"use strict";(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{8697:(Zt,Je,B)=>{B.d(Je,{nm:()=>lo});var I=B(1966);B(5879),B(3182);var fe=B(5861),Ze=B(6122),Ce=B(4537),st=B(9058),dt=B(7879);const $e=new Map,qe={activated:!1,tokenObservers:[]},Ct={initialized:!1,enabled:!1};function jt(xe){return $e.get(xe)||Object.assign({},qe)}function En(){return Ct}const Xn="https://content-firebaseappcheck.googleapis.com/v1",er="exchangeDebugToken",Ue={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Qe{constructor(Re,Ye,vt,Tt,ft){if(this.operation=Re,this.retryPolicy=Ye,this.getWaitDuration=vt,this.lowerBound=Tt,this.upperBound=ft,this.pending=null,this.nextErrorWaitInterval=Tt,Tt>ft)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Re){var Ye=this;return(0,fe.Z)(function*(){Ye.stop();try{Ye.pending=new st.BH,yield function ot(xe){return new Promise(Re=>{setTimeout(Re,xe)})}(Ye.getNextRun(Re)),Ye.pending.resolve(),yield Ye.pending.promise,Ye.pending=new st.BH,yield Ye.operation(),Ye.pending.resolve(),yield Ye.pending.promise,Ye.process(!0).catch(()=>{})}catch(vt){Ye.retryPolicy(vt)?Ye.process(!1).catch(()=>{}):Ye.stop()}})()}getNextRun(Re){if(Re)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ye=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ye}}}const nt=new st.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ke(xe){if(!jt(xe).activated)throw nt.create("use-before-activation",{appName:xe.name})}function Lt(xe,Re){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,fe.Z)(function*({url:xe,body:Re},Ye){const vt={"Content-Type":"application/json"},Tt=Ye.getImmediate({optional:!0});if(Tt){const Vi=yield Tt.getHeartbeatsHeader();Vi&&(vt["X-Firebase-Client"]=Vi)}const ft={method:"POST",body:JSON.stringify(Re),headers:vt};let Xt,_n;try{Xt=yield fetch(xe,ft)}catch(Vi){throw nt.create("fetch-network-error",{originalErrorMessage:Vi?.message})}if(200!==Xt.status)throw nt.create("fetch-status-error",{httpStatus:Xt.status});try{_n=yield Xt.json()}catch(Vi){throw nt.create("fetch-parse-error",{originalErrorMessage:Vi?.message})}const Vn=_n.ttl.match(/^([\d.]+)(s)$/);if(!Vn||!Vn[2]||isNaN(Number(Vn[1])))throw nt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_n.ttl}`});const bi=1e3*Number(Vn[1]),fi=Date.now();return{token:_n.token,expireTimeMillis:fi+bi,issuedAtTimeMillis:fi}})).apply(this,arguments)}function Kt(xe,Re){const{projectId:Ye,appId:vt,apiKey:Tt}=xe.options;return{url:`${Xn}/projects/${Ye}/apps/${vt}:${er}?key=${Tt}`,body:{debug_token:Re}}}const un="firebase-app-check-database",$n=1,cr="firebase-app-check-store";let Ni=null;function sr(){return(sr=(0,fe.Z)(function*(xe,Re){const vt=(yield function jr(){return Ni||(Ni=new Promise((xe,Re)=>{try{const Ye=indexedDB.open(un,$n);Ye.onsuccess=vt=>{xe(vt.target.result)},Ye.onerror=vt=>{var Tt;Re(nt.create("storage-open",{originalErrorMessage:null===(Tt=vt.target.error)||void 0===Tt?void 0:Tt.message}))},Ye.onupgradeneeded=vt=>{0===vt.oldVersion&&vt.target.result.createObjectStore(cr,{keyPath:"compositeKey"})}}catch(Ye){Re(nt.create("storage-open",{originalErrorMessage:Ye?.message}))}}),Ni)}()).transaction(cr,"readwrite"),ft=vt.objectStore(cr).put({compositeKey:xe,value:Re});return new Promise((Xt,_n)=>{ft.onsuccess=Vn=>{Xt()},vt.onerror=Vn=>{var bi;_n(nt.create("storage-set",{originalErrorMessage:null===(bi=Vn.target.error)||void 0===bi?void 0:bi.message}))}})})).apply(this,arguments)}const wr=new dt.Yd("@firebase/app-check");function $r(xe,Re){return(0,st.hl)()?function Ti(xe,Re){return function gn(xe,Re){return sr.apply(this,arguments)}(function Gn(xe){return`${xe.options.appId}-${xe.name}`}(xe),Re)}(xe,Re).catch(Ye=>{wr.warn(`Failed to write token to IndexedDB. Error: ${Ye}`)}):Promise.resolve()}function is(){return En().enabled}function yi(){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,fe.Z)(function*(){const xe=En();if(xe.enabled&&xe.token)return xe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const fr={error:"UNKNOWN_ERROR"};function ei(xe){return st.US.encodeString(JSON.stringify(xe),!1)}function tr(xe){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,fe.Z)(function*(xe,Re=!1){const Ye=xe.app;ke(Ye);const vt=jt(Ye);let ft,Tt=vt.token;if(Tt&&!re(Tt)&&(vt.token=void 0,Tt=void 0),!Tt){const Vn=yield vt.cachedTokenPromise;Vn&&(re(Vn)?Tt=Vn:yield $r(Ye,void 0))}if(!Re&&Tt&&re(Tt))return{token:Tt.token};let _n,Xt=!1;if(is()){vt.exchangeTokenPromise||(vt.exchangeTokenPromise=Lt(Kt(Ye,yield yi()),xe.heartbeatServiceProvider).finally(()=>{vt.exchangeTokenPromise=void 0}),Xt=!0);const Vn=yield vt.exchangeTokenPromise;return yield $r(Ye,Vn),vt.token=Vn,{token:Vn.token}}try{vt.exchangeTokenPromise||(vt.exchangeTokenPromise=vt.provider.getToken().finally(()=>{vt.exchangeTokenPromise=void 0}),Xt=!0),Tt=yield jt(Ye).exchangeTokenPromise}catch(Vn){"appCheck/throttled"===Vn.code?wr.warn(Vn.message):wr.error(Vn),ft=Vn}return Tt?ft?_n=re(Tt)?{token:Tt.token,internalError:ft}:je(ft):(_n={token:Tt.token},vt.token=Tt,yield $r(Ye,Tt)):_n=je(ft),Xt&&function J(xe,Re){const Ye=jt(xe).tokenObservers;for(const vt of Ye)try{"EXTERNAL"===vt.type&&null!=Re.error?vt.error(Re.error):vt.next(Re)}catch{}}(Ye,_n),_n})).apply(this,arguments)}function An(xe){return ti.apply(this,arguments)}function ti(){return(ti=(0,fe.Z)(function*(xe){const Re=xe.app;ke(Re);const{provider:Ye}=jt(Re);if(is()){const vt=yield yi(),{token:Tt}=yield Lt(Kt(Re,vt),xe.heartbeatServiceProvider);return{token:Tt}}{const{token:vt}=yield Ye.getToken();return{token:vt}}})).apply(this,arguments)}function we(xe,Re){const Ye=jt(xe),vt=Ye.tokenObservers.filter(Tt=>Tt.next!==Re);0===vt.length&&Ye.tokenRefresher&&Ye.tokenRefresher.isRunning()&&Ye.tokenRefresher.stop(),Ye.tokenObservers=vt}function Q(xe){const{app:Re}=xe,Ye=jt(Re);let vt=Ye.tokenRefresher;vt||(vt=function ne(xe){const{app:Re}=xe;return new Qe((0,fe.Z)(function*(){let vt;if(vt=jt(Re).token?yield tr(xe,!0):yield tr(xe),vt.error)throw vt.error;if(vt.internalError)throw vt.internalError}),()=>!0,()=>{const Ye=jt(Re);if(Ye.token){let vt=Ye.token.issuedAtTimeMillis+.5*(Ye.token.expireTimeMillis-Ye.token.issuedAtTimeMillis)+3e5;return vt=Math.min(vt,Ye.token.expireTimeMillis-3e5),Math.max(0,vt-Date.now())}return 0},Ue.RETRIAL_MIN_WAIT,Ue.RETRIAL_MAX_WAIT)}(xe),Ye.tokenRefresher=vt),!vt.isRunning()&&Ye.isTokenAutoRefreshEnabled&&vt.start()}function re(xe){return xe.expireTimeMillis-Date.now()>0}function je(xe){return{token:ei(fr),error:xe}}class gt{constructor(Re,Ye){this.app=Re,this.heartbeatServiceProvider=Ye}_delete(){const{tokenObservers:Re}=jt(this.app);for(const Ye of Re)we(this.app,Ye.next);return Promise.resolve()}}const gr="app-check-internal";!function uo(){(0,Ze._registerComponent)(new Ce.wA("app-check",xe=>function Ut(xe,Re){return new gt(xe,Re)}(xe.getProvider("app").getImmediate(),xe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((xe,Re,Ye)=>{xe.getProvider(gr).initialize()})),(0,Ze._registerComponent)(new Ce.wA(gr,xe=>function Tn(xe){return{getToken:Re=>tr(xe,Re),getLimitedUseToken:()=>An(xe),addTokenListener:Re=>function Ln(xe,Re,Ye,vt){const{app:Tt}=xe,ft=jt(Tt);if(ft.tokenObservers=[...ft.tokenObservers,{next:Ye,error:vt,type:Re}],ft.token&&re(ft.token)){const _n=ft.token;Promise.resolve().then(()=>{Ye({token:_n.token}),Q(xe)}).catch(()=>{})}ft.cachedTokenPromise.then(()=>Q(xe))}(xe,"INTERNAL",Re),removeTokenListener:Re=>we(xe.app,Re)}}(xe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ze.registerVersion)("@firebase/app-check","0.8.0")}();class lo{constructor(){return(0,I.vb)("app-check")}}typeof window<"u"&&window},7046:(Zt,Je,B)=>{B.d(Je,{zQ:()=>jt,ww:()=>pn,rT:()=>dt,f7:()=>qe,L6:()=>Ce,_Q:()=>st,lh:()=>$e,Qv:()=>Ze,nw:()=>Ct});var I=B(5879),X=B(8645),Y=B(2096),de=B(5592),Ie=B(2459),Ne=B(3019),Me=B(3093),Be=B(4664),Pe=B(7398),ae=B(940),he=B(1374),Ae=B(4674);function mt(En,Xn){return(0,Ae.m)(Xn)?(0,Be.w)(()=>En,Xn):(0,Be.w)(()=>En)}var ut=B(5137),kt=B(2181),wt=B(1966),Pt=B(6304),bt=B(6814),Le=B(8697),Mt=B(7142);const Ze=new I.OlP("angularfire2.auth.use-emulator"),Ce=new I.OlP("angularfire2.auth.settings"),st=new I.OlP("angularfire2.auth.tenant-id"),dt=new I.OlP("angularfire2.auth.langugage-code"),$e=new I.OlP("angularfire2.auth.use-device-language"),qe=new I.OlP("angularfire.auth.persistence"),Ct=(En,Xn,Bn,Lr,er,Ue,tt,Qe)=>(0,Pt.cc)(`${En.name}.auth`,"AngularFireAuth",En.name,()=>{const ot=Xn.runOutsideAngular(()=>En.auth());if(Bn&&ot.useEmulator(...Bn),Lr&&(ot.tenantId=Lr),ot.languageCode=er,Ue&&ot.useDeviceLanguage(),tt)for(const[Se,nt]of Object.entries(tt))ot.settings[Se]=nt;return Qe&&ot.setPersistence(Qe),ot},[Bn,Lr,er,Ue,tt,Qe]);let jt=(()=>{class En{constructor(Bn,Lr,er,Ue,tt,Qe,ot,Se,nt,oe,ke,yt){const pt=new X.x,Lt=(0,Y.of)(void 0).pipe((0,Me.Q)(tt.outsideAngular),(0,Be.w)(()=>Ue.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,5967)))),(0,Pe.U)(()=>(0,Pt.on)(Bn,Ue,Lr)),(0,Pe.U)(Ht=>Ct(Ht,Ue,Qe,Se,nt,oe,ot,ke)),(0,ae.d)({bufferSize:1,refCount:!1}));if((0,bt.PM)(er))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{Lt.pipe((0,he.P)()).subscribe();const cn=Lt.pipe((0,Be.w)(un=>un.getRedirectResult().then($n=>$n,()=>null)),wt.iC,(0,ae.d)({bufferSize:1,refCount:!1})),Mn=Lt.pipe((0,Be.w)(un=>new de.y($n=>({unsubscribe:Ue.runOutsideAngular(()=>un.onAuthStateChanged(cr=>$n.next(cr),cr=>$n.error(cr),()=>$n.complete()))})))),Kt=Lt.pipe((0,Be.w)(un=>new de.y($n=>({unsubscribe:Ue.runOutsideAngular(()=>un.onIdTokenChanged(cr=>$n.next(cr),cr=>$n.error(cr),()=>$n.complete()))}))));this.authState=cn.pipe(mt(Mn),(0,ut.R)(tt.outsideAngular),(0,Me.Q)(tt.insideAngular)),this.user=cn.pipe(mt(Kt),(0,ut.R)(tt.outsideAngular),(0,Me.Q)(tt.insideAngular)),this.idToken=this.user.pipe((0,Be.w)(un=>un?(0,Ie.D)(un.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,Be.w)(un=>un?(0,Ie.D)(un.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,Ne.T)(cn,pt,this.authState.pipe((0,kt.h)(un=>!un))).pipe((0,Pe.U)(un=>un?.user?un:null),(0,ut.R)(tt.outsideAngular),(0,Me.Q)(tt.insideAngular))}return(0,Pt.pX)(this,Lt,Ue,{spy:{apply:(Ht,cn,Mn)=>{(Ht.startsWith("signIn")||Ht.startsWith("createUser"))&&Mn.then(Kt=>pt.next(Kt))}}})}}return En.\u0275fac=function(Bn){return new(Bn||En)(I.LFG(Pt.Dh),I.LFG(Pt.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(wt.HU),I.LFG(Ze,8),I.LFG(Ce,8),I.LFG(st,8),I.LFG(dt,8),I.LFG($e,8),I.LFG(qe,8),I.LFG(Le.nm,8))},En.\u0275prov=I.Yz7({token:En,factory:En.\u0275fac,providedIn:"any"}),En})(),pn=(()=>{class En{constructor(){Mt.Z.registerVersion("angularfire",wt.q4.full,"auth-compat")}}return En.\u0275fac=function(Bn){return new(Bn||En)},En.\u0275mod=I.oAB({type:En}),En.\u0275inj=I.cJS({providers:[jt]}),En})()},8330:(Zt,Je,B)=>{B.d(Je,{ST:()=>IE,yb:()=>qE});var I=B(5879),X=B(6321),Y=B(5592),de=B(2459),Ie=B(2096),Ne=B(1966),Me=B(7921),Be=B(9360),Pe=B(8251);function ae(){return(0,Be.e)((i,e)=>{let t,a=!1;i.subscribe((0,Pe.x)(e,d=>{const p=t;t=d,a&&e.next([p,d]),a=!0}))})}var $e,he=B(7398),Ae=B(6699),mt=B(3997),ut=B(2181),kt=B(6304),wt=B(6814),bt=(B(5967),B(3106)),Le=B(5861),Mt=B(6122),fe=B(4537),Ze=B(7879),Ce=B(9058),st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dt={},qe=qe||{},Ct=st||self;function jt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function pn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Xn="closure_uid_"+(1e9*Math.random()>>>0),Bn=0;function Lr(i,e,t){return i.call.apply(i.bind,arguments)}function er(i,e,t){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,a),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function Ue(i,e,t){return(Ue=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lr:er).apply(null,arguments)}function tt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function Qe(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(a,d,p){for(var v=Array(arguments.length-2),M=2;M<arguments.length;M++)v[M-2]=arguments[M];return e.prototype[d].apply(a,v)}}function ot(){this.s=this.s,this.o=this.o}ot.prototype.s=!1,ot.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function En(i){Object.prototype.hasOwnProperty.call(i,Xn)&&i[Xn]||(i[Xn]=++Bn)}(this)},ot.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function oe(i){const e=i.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=i[a];return t}return[]}function ke(i,e){for(let t=1;t<arguments.length;t++){const a=arguments[t];if(jt(a)){const d=i.length||0,p=a.length||0;i.length=d+p;for(let v=0;v<p;v++)i[d+v]=a[v]}else i.push(a)}}function yt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Ct.addEventListener("test",()=>{},e),Ct.removeEventListener("test",()=>{},e)}catch{}return i}();function Lt(i){return/^[\s\xa0]*$/.test(i)}function Ht(){var i=Ct.navigator;return i&&(i=i.userAgent)?i:""}function cn(i){return-1!=Ht().indexOf(i)}function Mn(i){return Mn[" "](i),i}Mn[" "]=function(){};var Ti,i,un=cn("Opera"),$n=cn("Trident")||cn("MSIE"),cr=cn("Edge"),Us=cr||$n,Ni=cn("Gecko")&&!(-1!=Ht().toLowerCase().indexOf("webkit")&&!cn("Edge"))&&!(cn("Trident")||cn("MSIE"))&&!cn("Edge"),jr=-1!=Ht().toLowerCase().indexOf("webkit")&&!cn("Edge");function rs(){var i=Ct.document;return i?i.documentMode:void 0}e:{var nn="",xn=(i=Ht(),Ni?/rv:([^\);]+)(\)|;)/.exec(i):cr?/Edge\/([\d\.]+)/.exec(i):$n?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):jr?/WebKit\/(\S+)/.exec(i):un?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(xn&&(nn=xn?xn[1]:""),$n){var gn=rs();if(null!=gn&&gn>parseFloat(nn)){Ti=String(gn);break e}}Ti=nn}var Ci=Ct.document&&$n&&(rs()||parseInt(Ti,10))||void 0;function Gn(i,e){if(yt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ni){e:{try{Mn(e.nodeName);var d=!0;break e}catch{}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:wr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Gn.$.h.call(this)}}Qe(Gn,yt);var wr={2:"touch",3:"pen",4:"mouse"};Gn.prototype.h=function(){Gn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Gi="closure_listenable_"+(1e6*Math.random()|0),Wn=0;function $r(i,e,t,a,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.la=d,this.key=++Wn,this.fa=this.ia=!1}function Yt(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Ir(i,e,t){for(const a in i)e.call(t,i[a],a,i)}function yi(i){const e={};for(const t in i)e[t]=i[t];return e}const Fi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function br(i,e){let t,a;for(let d=1;d<arguments.length;d++){for(t in a=arguments[d],a)i[t]=a[t];for(let p=0;p<Fi.length;p++)t=Fi[p],Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t])}}function fr(i){this.src=i,this.g={},this.h=0}function ei(i,e){var t=e.type;if(t in i.g){var p,a=i.g[t],d=nt(a,e);(p=0<=d)&&Array.prototype.splice.call(a,d,1),p&&(Yt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function tr(i,e,t,a){for(var d=0;d<i.length;++d){var p=i[d];if(!p.fa&&p.listener==e&&p.capture==!!t&&p.la==a)return d}return-1}fr.prototype.add=function(i,e,t,a,d){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var v=tr(i,e,a,d);return-1<v?(e=i[v],t||(e.ia=!1)):((e=new $r(e,this.src,p,!!a,d)).ia=t,i.push(e)),e};var Nr="closure_lm_"+(1e6*Math.random()|0),An={};function ti(i,e,t,a,d){if(a&&a.once)return Q(i,e,t,a,d);if(Array.isArray(e)){for(var p=0;p<e.length;p++)ti(i,e[p],t,a,d);return null}return t=Tn(t),i&&i[Gi]?i.O(e,t,pn(a)?!!a.capture:!!a,d):Ln(i,e,t,!1,a,d)}function Ln(i,e,t,a,d,p){if(!e)throw Error("Invalid event type");var v=pn(d)?!!d.capture:!!d,M=gt(i);if(M||(i[Nr]=M=new fr(i)),(t=M.add(e,t,a,v,p)).proxy)return t;if(a=function we(){const e=je;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=a,a.src=i,a.listener=t,i.addEventListener)pt||(d=v),void 0===d&&(d=!1),i.addEventListener(e.toString(),a,d);else if(i.attachEvent)i.attachEvent(re(e.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return t}function Q(i,e,t,a,d){if(Array.isArray(e)){for(var p=0;p<e.length;p++)Q(i,e[p],t,a,d);return null}return t=Tn(t),i&&i[Gi]?i.P(e,t,pn(a)?!!a.capture:!!a,d):Ln(i,e,t,!0,a,d)}function ne(i,e,t,a,d){if(Array.isArray(e))for(var p=0;p<e.length;p++)ne(i,e[p],t,a,d);else a=pn(a)?!!a.capture:!!a,t=Tn(t),i&&i[Gi]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=tr(p=i.g[e],t,a,d))&&(Yt(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=gt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=tr(e,t,a,d)),(t=-1<i?e[i]:null)&&J(t))}function J(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Gi])ei(e.i,i);else{var t=i.type,a=i.proxy;e.removeEventListener?e.removeEventListener(t,a,i.capture):e.detachEvent?e.detachEvent(re(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=gt(e))?(ei(t,i),0==t.h&&(t.src=null,e[Nr]=null)):Yt(i)}}}function re(i){return i in An?An[i]:An[i]="on"+i}function je(i,e){if(i.fa)i=!0;else{e=new Gn(e,this);var t=i.listener,a=i.la||i.src;i.ia&&J(i),i=t.call(a,e)}return i}function gt(i){return(i=i[Nr])instanceof fr?i:null}var Ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(i){return"function"==typeof i?i:(i[Ut]||(i[Ut]=function(e){return i.handleEvent(e)}),i[Ut])}function Jt(){ot.call(this),this.i=new fr(this),this.S=this,this.J=null}function xt(i,e){var t,a=i.J;if(a)for(t=[];a;a=a.J)t.push(a);if(i=i.S,a=e.type||e,"string"==typeof e)e=new yt(e,i);else if(e instanceof yt)e.target=e.target||i;else{var d=e;br(e=new yt(a,i),d)}if(d=!0,t)for(var p=t.length-1;0<=p;p--){var v=e.g=t[p];d=bn(v,a,!0,e)&&d}if(d=bn(v=e.g=i,a,!0,e)&&d,d=bn(v,a,!1,e)&&d,t)for(p=0;p<t.length;p++)d=bn(v=e.g=t[p],a,!1,e)&&d}function bn(i,e,t,a){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,p=0;p<e.length;++p){var v=e[p];if(v&&!v.fa&&v.capture==t){var M=v.listener,U=v.la||v.src;v.ia&&ei(i.i,v),d=!1!==M.call(U,a)&&d}}return d&&!a.defaultPrevented}Qe(Jt,ot),Jt.prototype[Gi]=!0,Jt.prototype.removeEventListener=function(i,e,t,a){ne(this,i,e,t,a)},Jt.prototype.N=function(){if(Jt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],a=0;a<t.length;a++)Yt(t[a]);delete i.g[e],i.h--}}this.J=null},Jt.prototype.O=function(i,e,t,a){return this.i.add(String(i),e,!1,t,a)},Jt.prototype.P=function(i,e,t,a){return this.i.add(String(i),e,!0,t,a)};var Hr=Ct.JSON.stringify;function Te(){var i=mn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var me=new class We{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ve,i=>i.reset());class ve{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ve(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function at(i){Ct.setTimeout(()=>{throw i},0)}let Qt,Bt=!1,mn=new class be{constructor(){this.h=this.g=null}add(e,t){const a=me.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}},dr=()=>{const i=Ct.Promise.resolve(void 0);Qt=()=>{i.then(nr)}};var nr=()=>{for(var i;i=Te();){try{i.h.call(i.g)}catch(t){at(t)}var e=me;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Bt=!1};function Fr(i,e){Jt.call(this),this.h=i||1,this.g=e||Ct,this.j=Ue(this.qb,this),this.l=Date.now()}function ss(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function cs(i,e,t){if("function"==typeof i)t&&(i=Ue(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ue(i.handleEvent,i)}return 2147483647<Number(e)?-1:Ct.setTimeout(i,e||0)}function Tr(i){i.g=cs(()=>{i.g=null,i.i&&(i.i=!1,Tr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Qe(Fr,Jt),($e=Fr.prototype).ga=!1,$e.T=null,$e.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xt(this,"tick"),this.ga&&(ss(this),this.start()))}},$e.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$e.N=function(){Fr.$.N.call(this),ss(this),delete this.g};class pr extends ot{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Tr(this)}N(){super.N(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(i){ot.call(this),this.h=i,this.g={}}Qe(vs,ot);var Pi=[];function Di(i,e,t,a){Array.isArray(t)||(t&&(Pi[0]=t.toString()),t=Pi);for(var d=0;d<t.length;d++){var p=ti(e,t[d],a||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function Ns(i){Ir(i.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},i),i.g={}}function Io(){this.g=!0}function Ys(i,e,t,a){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lo(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var a=t[i];if(!(2>a.length)){var d=a[1];if(Array.isArray(d)&&!(1>d.length)){var p=d[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var v=1;v<d.length;v++)d[v]=""}}}return Hr(t)}catch{return e}}(i,t)+(a?" "+a:"")})}vs.prototype.N=function(){vs.$.N.call(this),Ns(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Io.prototype.Ea=function(){this.g=!1},Io.prototype.info=function(){};var _i={},Uo=null;function Qs(){return Uo=Uo||new Jt}function qa(i){yt.call(this,_i.Ta,i)}function Ui(i){const e=Qs();xt(e,new qa(e))}function Za(i,e){yt.call(this,_i.STAT_EVENT,i),this.stat=e}function hi(i){const e=Qs();xt(e,new Za(e,i))}function Ia(i,e){yt.call(this,_i.Ua,i),this.size=e}function co(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){i()},e)}_i.Ta="serverreachability",Qe(qa,yt),_i.STAT_EVENT="statevent",Qe(Za,yt),_i.Ua="timingevent",Qe(Ia,yt);var Fn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Sr(){}function Bi(){}Sr.prototype.h=null;var Ye,ia={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function xe(){yt.call(this,"d")}function Re(){yt.call(this,"c")}function vt(){}function Tt(i,e,t,a){this.l=i,this.j=e,this.m=t,this.W=a||1,this.U=new vs(this),this.P=Xt,this.V=new Fr(i=Us?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ft}function ft(){this.i=null,this.g="",this.h=!1}Qe(xe,yt),Qe(Re,yt),Qe(vt,Sr),vt.prototype.g=function(){return new XMLHttpRequest},vt.prototype.i=function(){return{}},Ye=new vt;var Xt=45e3,_n={},Vn={};function bi(i,e,t){i.L=1,i.v=$o(yr(e)),i.s=t,i.S=!0,fi(i,null)}function fi(i,e){i.G=Date.now(),Yi(i),i.A=yr(i.v);var t=i.A,a=i.W;Array.isArray(a)||(a=[String(a)]),Qi(t.i,"t",a),i.C=0,t=i.l.J,i.h=new ft,i.g=Qa(i.l,t?e:null,!i.s),0<i.O&&(i.M=new pr(Ue(i.Pa,i,i.g),i.O)),Di(i.U,i.g,"readystatechange",i.nb),e=i.I?yi(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Ui(),function gr(i,e,t,a,d,p){i.info(function(){if(i.g)if(p)for(var v="",M=p.split("&"),U=0;U<M.length;U++){var z=M[U].split("=");if(1<z.length){var te=z[0];z=z[1];var Ee=te.split("_");v=2<=Ee.length&&"type"==Ee[1]?v+(te+"=")+z+"&":v+(te+"=redacted&")}}else v=null;else v=p;return"XMLHTTP REQ ("+a+") [attempt "+d+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Vi(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Zr(i,e,t){let d,a=!0;for(;!i.J&&i.C<t.length;){if(d=os(i,t),d==Vn){4==e&&(i.o=4,hi(14),a=!1),Ys(i.j,i.m,null,"[Incomplete Response]");break}if(d==_n){i.o=4,hi(15),Ys(i.j,i.m,t,"[Invalid Chunk]"),a=!1;break}Ys(i.j,i.m,d,null),Yr(i,d)}Vi(i)&&d!=Vn&&d!=_n&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,hi(16),a=!1),i.i=i.i&&a,a?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),gu(e),e.M=!0,hi(11))):(Ys(i.j,i.m,t,"[Invalid Chunked Response]"),us(i),ho(i))}function os(i,e){var t=i.C,a=e.indexOf("\n",t);return-1==a?Vn:(t=Number(e.substring(t,a)),isNaN(t)?_n:(a+=1)+t>e.length?Vn:(e=e.slice(a,a+t),i.C=a+t,e))}function Yi(i){i.Y=Date.now()+i.P,Un(i,i.P)}function Un(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=co(Ue(i.lb,i),e)}function as(i){i.B&&(Ct.clearTimeout(i.B),i.B=null)}function ho(i){0==i.l.H||i.J||ni(i.l,i)}function us(i){as(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,ss(i.V),Ns(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Yr(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||al(t.i,i)))if(!i.K&&al(t.i,i)&&3==t.H){try{var a=t.Ja.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var d=a;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;mu(t),Aa(t)}Lu(t),hi(18)}}else t.Fa=d[1],0<t.Fa-t.V&&37500>d[2]&&t.G&&0==t.A&&!t.v&&(t.v=co(Ue(t.ib,t),6e3));if(1>=ol(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else xs(t,11)}else if((i.K||t.g==i)&&mu(t),!Lt(e))for(d=t.Ja.g.parse(e),e=0;e<d.length;e++){let z=d[e];if(t.V=z[0],z=z[1],2==t.H)if("c"==z[0]){t.K=z[1],t.pa=z[2];const te=z[3];null!=te&&(t.ra=te,t.l.info("VER="+t.ra));const Ee=z[4];null!=Ee&&(t.Ga=Ee,t.l.info("SVER="+t.Ga));const rt=z[5];null!=rt&&"number"==typeof rt&&0<rt&&(t.L=a=1.5*rt,t.l.info("backChannelRequestTimeoutMs_="+a)),a=t;const _t=i.g;if(_t){const zt=_t.g?_t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zt){var p=a.i;p.g||-1==zt.indexOf("spdy")&&-1==zt.indexOf("quic")&&-1==zt.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(ba(p,p.h),p.h=null))}if(a.F){const an=_t.g?_t.g.getResponseHeader("X-HTTP-Session-Id"):null;an&&(a.Da=an,gi(a.I,a.F,an))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var v=i;if((a=t).wa=Sc(a,a.J?a.pa:null,a.Y),v.K){du(a.i,v);var M=v,U=a.L;U&&M.setTimeout(U),M.B&&(as(M),Yi(M)),a.g=v}else cl(a);0<t.j.length&&Ra(t)}else"stop"!=z[0]&&"close"!=z[0]||xs(t,7);else 3==t.H&&("stop"==z[0]||"close"==z[0]?"stop"==z[0]?xs(t,7):ji(t):"noop"!=z[0]&&t.h&&t.h.Aa(z),t.A=0)}Ui()}catch{}}function ds(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(jt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Ca(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(jt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const a in i)e[t++]=a;return e}}}(i),a=function Ta(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(jt(i)){for(var e=[],t=i.length,a=0;a<t;a++)e.push(i[a]);return e}for(a in e=[],t=0,i)e[t++]=i[a];return e}(i),d=a.length,p=0;p<d;p++)e.call(void 0,a[p],t&&t[p],i)}($e=Tt.prototype).setTimeout=function(i){this.P=i},$e.nb=function(i){i=i.target;const e=this.M;e&&3==Oi(i)?e.l():this.Pa(i)},$e.Pa=function(i){try{if(i==this.g)e:{const te=Oi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>te)&&(3!=te||Us||this.g&&(this.h.h||this.g.ja()||qo(this.g)))){this.J||4!=te||7==e||Ui(),as(this);var t=this.g.da();this.ca=t;t:if(Vi(this)){var a=qo(this.g);i="";var d=a.length,p=4==Oi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){us(this),ho(this);var v="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(a[e],{stream:p&&e==d-1});a.splice(0,d),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ja();if(this.i=200==t,function uo(i,e,t,a,d,p,v){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+p+" "+v})}(this.j,this.u,this.A,this.m,this.W,te,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var M,U=this.g;if((M=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lt(M)){var z=M;break t}}z=null}if(!(t=z)){this.i=!1,this.o=3,hi(12),us(this),ho(this);break e}Ys(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,t)}this.S?(Zr(this,te,v),Us&&this.i&&3==te&&(Di(this.U,this.V,"tick",this.mb),this.V.start())):(Ys(this.j,this.m,v,null),Yr(this,v)),4==te&&us(this),this.i&&!this.J&&(4==te?ni(this.l,this):(this.i=!1,Yi(this)))}else(function vi(i){const e={};i=(i.g&&2<=Oi(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let a=0;a<i.length;a++){if(Lt(i[a]))continue;var t=Ve(i[a]);const d=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const p=e[d]||[];e[d]=p,p.push(t)}!function is(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(a){return a.join(", ")})})(this.g),400==t&&0<v.indexOf("Unknown SID")?(this.o=3,hi(12)):(this.o=0,hi(13)),us(this),ho(this)}}}catch{}},$e.mb=function(){if(this.g){var i=Oi(this.g),e=this.g.ja();this.C<e.length&&(as(this),Zr(this,i,e),this.i&&4!=i&&Yi(this))}},$e.cancel=function(){this.J=!0,us(this)},$e.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Fo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ui(),hi(17)),us(this),this.o=2,ho(this)):Un(this,this.Y-i)};var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pi(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof pi){this.h=i.h,jo(this,i.j),this.s=i.s,this.g=i.g,fo(this,i.m),this.l=i.l;var e=i.i,t=new hs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Qn(this,t),this.o=i.o}else i&&(e=String(i).match(Vo))?(this.h=!1,jo(this,e[1]||"",!0),this.s=Es(e[2]||""),this.g=Es(e[3]||"",!0),fo(this,e[4]),this.l=Es(e[5]||"",!0),Qn(this,e[6]||"",!0),this.o=Es(e[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}function yr(i){return new pi(i)}function jo(i,e,t){i.j=t?Es(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function fo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Qn(i,e,t){e instanceof hs?(i.i=e,function Ya(i,e){e&&!i.j&&(Vs(i),i.i=null,i.g.forEach(function(t,a){var d=a.toLowerCase();a!=d&&(Co(this,a),Qi(this,d,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Si(e,zo)),i.i=new hs(e,i.h))}function gi(i,e,t){i.i.set(e,t)}function $o(i){return gi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Es(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Si(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Bs),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Bs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}pi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Si(e,To,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Si(e,To,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Si(t,"/"==t.charAt(0)?Wi:Ho,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Si(t,ui)),i.join("")};var To=/[#\/\?@]/g,Ho=/[#\?:]/g,Wi=/[#\?]/g,zo=/[#\?@]/g,ui=/#/g;function hs(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Vs(i){i.g||(i.g=new Map,i.h=0,i.i&&function Xs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var a=i[t].indexOf("="),d=null;if(0<=a){var p=i[t].substring(0,a);d=i[t].substring(a+1)}else p=i[t];e(p,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Co(i,e){Vs(i),e=Ai(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Da(i,e){return Vs(i),e=Ai(i,e),i.g.has(e)}function Qi(i,e,t){Co(i,e),0<t.length&&(i.i=null,i.g.set(Ai(i,e),oe(t)),i.h+=t.length)}function Ai(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function cu(i){this.l=i||Go,i=Ct.PerformanceNavigationTiming?0<(i=Ct.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ka&&Ct.g.Ka()&&Ct.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}($e=hs.prototype).add=function(i,e){Vs(this),this.i=null,i=Ai(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},$e.forEach=function(i,e){Vs(this),this.g.forEach(function(t,a){t.forEach(function(d){i.call(e,d,a,this)},this)},this)},$e.ta=function(){Vs(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let a=0;a<e.length;a++){const d=i[a];for(let p=0;p<d.length;p++)t.push(e[a])}return t},$e.Z=function(i){Vs(this);let e=[];if("string"==typeof i)Da(this,i)&&(e=e.concat(this.g.get(Ai(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},$e.set=function(i,e){return Vs(this),this.i=null,Da(this,i=Ai(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},$e.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},$e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var a=e[t];const p=encodeURIComponent(String(a)),v=this.Z(a);for(a=0;a<v.length;a++){var d=p;""!==v[a]&&(d+="="+encodeURIComponent(String(v[a]))),i.push(d)}}return this.i=i.join("&")};var Go=10;function zl(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ol(i){return i.h?1:i.g?i.g.size:0}function al(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ba(i,e){i.g?i.g.add(e):i.h=e}function du(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Gl(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return oe(i.i)}cu.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var xu=class{stringify(i){return Ct.JSON.stringify(i,void 0)}parse(i){return Ct.JSON.parse(i,void 0)}};function fs(){this.g=new xu}function sa(i,e,t){const a=t||"";try{ds(i,function(d,p){let v=d;pn(d)&&(v=Hr(d)),e.push(a+p+"="+encodeURIComponent(v))})}catch(d){throw e.push(a+"type="+encodeURIComponent("_badmap")),d}}function hu(i,e,t,a,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(a)}catch{}}function Js(i){this.l=i.fc||null,this.j=i.ob||!1}function eo(i,e){Jt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=oa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qe(Js,Sr),Js.prototype.g=function(){return new eo(this.l,this.j)},Js.prototype.i=function(i){return function(){return i}}({}),Qe(eo,Jt);var oa=0;function ll(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Sa(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Qr(i)}function Qr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}($e=eo.prototype).open=function(i,e){if(this.readyState!=oa)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Qr(this)},$e.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Ct).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},$e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sa(this)),this.readyState=oa},$e.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ct.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ll(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},$e.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Sa(this):Qr(this),3==this.readyState&&ll(this)}},$e.Za=function(i){this.g&&(this.response=this.responseText=i,Sa(this))},$e.Ya=function(i){this.g&&(this.response=i,Sa(this))},$e.ka=function(){this.g&&Sa(this)},$e.setRequestHeader=function(i,e){this.v.append(i,e)},$e.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},$e.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Wl=Ct.JSON.parse;function Hn(i){Jt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ou,this.L=this.M=!1}Qe(Hn,Jt);var Ou="",bc=/^https?$/i,ku=["POST","PUT"];function Ko(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,aa(i),to(i)}function aa(i){i.F||(i.F=!0,xt(i,"complete"),xt(i,"error"))}function ua(i){if(i.h&&typeof qe<"u"&&(!i.C[1]||4!=Oi(i)||2!=i.da()))if(i.v&&4==Oi(i))cs(i.La,0,i);else if(xt(i,"readystatechange"),4==Oi(i)){i.h=!1;try{const v=i.da();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===v){var d=String(i.I).match(Vo)[1]||null;!d&&Ct.self&&Ct.self.location&&(d=Ct.self.location.protocol.slice(0,-1)),a=!bc.test(d?d.toLowerCase():"")}t=a}if(t)xt(i,"complete"),xt(i,"success");else{i.m=6;try{var p=2<Oi(i)?i.g.statusText:""}catch{p=""}i.j=p+" ["+i.da()+"]",aa(i)}}finally{to(i)}}}function to(i,e){if(i.g){ws(i);const t=i.g,a=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||xt(i,"ready");try{t.onreadystatechange=a}catch{}}}function ws(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Ct.clearTimeout(i.A),i.A=null)}function Oi(i){return i.g?i.g.readyState:0}function qo(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Ou:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function no(i){let e="";return Ir(i,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}function fu(i,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=no(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):gi(i,e,t))}function Ps(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function pu(i){this.Ga=0,this.j=[],this.l=new Io,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ps("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ps("baseRetryDelayMs",5e3,i),this.hb=Ps("retryDelaySeedMs",1e4,i),this.eb=Ps("forwardChannelMaxRetries",2,i),this.xa=Ps("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new cu(i&&i.concurrentRequestLimit),this.Ja=new fs,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ji(i){if(Ri(i),3==i.H){var e=i.W++,t=yr(i.I);if(gi(t,"SID",i.K),gi(t,"RID",e),gi(t,"TYPE","terminate"),ue(i,t),(e=new Tt(i,i.l,e)).L=2,e.v=$o(yr(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon)try{t=Ct.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=Qa(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Yi(e)}la(i)}function Aa(i){i.g&&(gu(i),i.g.cancel(),i.g=null)}function Ri(i){Aa(i),i.u&&(Ct.clearTimeout(i.u),i.u=null),mu(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Ct.clearTimeout(i.m),i.m=null)}function Ra(i){if(!zl(i.i)&&!i.m){i.m=!0;var e=i.Na;Qt||dr(),Bt||(Qt(),Bt=!0),mn.add(e,i),i.C=0}}function bo(i,e){var t;t=e?e.m:i.W++;const a=yr(i.I);gi(a,"SID",i.K),gi(a,"RID",t),gi(a,"AID",i.V),ue(i,a),i.o&&i.s&&fu(a,i.o,i.s),t=new Tt(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Zo(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),ba(i.i,t),bi(t,a,e)}function ue(i,e){i.na&&Ir(i.na,function(t,a){gi(e,a,t)}),i.h&&ds({},function(t,a){gi(e,a,t)})}function Zo(i,e,t){t=Math.min(i.j.length,t);var a=i.h?Ue(i.h.Va,i.h,i):null;e:{var d=i.j;let p=-1;for(;;){const v=["count="+t];-1==p?0<t?(p=d[0].g,v.push("ofs="+p)):p=0:v.push("ofs="+p);let M=!0;for(let U=0;U<t;U++){let z=d[U].g;const te=d[U].map;if(z-=p,0>z)p=Math.max(0,d[U].g-100),M=!1;else try{sa(te,v,"req"+z+"_")}catch{a&&a(te)}}if(M){a=v.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,a}function cl(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Qt||dr(),Bt||(Qt(),Bt=!0),mn.add(e,i),i.A=0}}function Lu(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=co(Ue(i.Ma,i),Kr(i,i.A)),i.A++,0))}function gu(i){null!=i.B&&(Ct.clearTimeout(i.B),i.B=null)}function dl(i){i.g=new Tt(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=yr(i.wa);gi(e,"RID","rpc"),gi(e,"SID",i.K),gi(e,"AID",i.V),gi(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&gi(e,"TO",i.qa),gi(e,"TYPE","xmlhttp"),ue(i,e),i.o&&i.s&&fu(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=$o(yr(e)),t.s=null,t.S=!0,fi(t,i)}function mu(i){null!=i.v&&(Ct.clearTimeout(i.v),i.v=null)}function ni(i,e){var t=null;if(i.g==e){mu(i),gu(i),i.g=null;var a=2}else{if(!al(i.i,e))return;t=e.F,du(i.i,e),a=1}if(0!=i.H)if(e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.G;var d=i.C;xt(a=Qs(),new Ia(a,t)),Ra(i)}else cl(i);else if(3==(d=e.o)||0==d&&0<e.ca||!(1==a&&function Do(i,e){return!(ol(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=co(Ue(i.Na,i,e),Kr(i,i.C)),i.C++,0)))}(i,e)||2==a&&Lu(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:xs(i,5);break;case 4:xs(i,10);break;case 3:xs(i,6);break;default:xs(i,2)}}function Kr(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function xs(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var a=Ue(i.pb,i);t||(t=new pi("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||jo(t,"https"),$o(t)),function ul(i,e){const t=new Io;if(Ct.Image){const a=new Image;a.onload=tt(hu,t,a,"TestLoadImage: loaded",!0,e),a.onerror=tt(hu,t,a,"TestLoadImage: error",!1,e),a.onabort=tt(hu,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=tt(hu,t,a,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else e(!1)}(t.toString(),a)}else hi(2);i.H=0,i.h&&i.h.za(e),la(i),Ri(i)}function la(i){if(i.H=0,i.ma=[],i.h){const e=Gl(i.i);(0!=e.length||0!=i.j.length)&&(ke(i.ma,e),ke(i.ma,i.j),i.i.i.length=0,oe(i.j),i.j.length=0),i.h.ya()}}function Sc(i,e,t){var a=t instanceof pi?yr(t):new pi(t);if(""!=a.g)e&&(a.g=e+"."+a.g),fo(a,a.m);else{var d=Ct.location;a=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var p=new pi(null);a&&jo(p,a),e&&(p.g=e),d&&fo(p,d),t&&(p.l=t),a=p}return e=i.Da,(t=i.F)&&e&&gi(a,t,e),gi(a,"VER",i.ra),ue(i,a),a}function Qa(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hn(t&&i.Ha&&!i.va?new Js({ob:!0}):i.va)).Oa(i.J),e}function Kl(){}function Ma(){if($n&&!(10<=Number(Ci)))throw Error("Environmental error: no available transport.")}function Is(i,e){Jt.call(this),this.g=new pu(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Lt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Lt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new go(this)}function yu(i){xe.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function po(){Re.call(this),this.status=1}function go(i){this.g=i}function rr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function So(i,e,t){t||(t=0);var a=Array(16);if("string"==typeof e)for(var d=0;16>d;++d)a[d]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(d=0;16>d;++d)a[d]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var p=i.g[3],v=(e=i.g[0])+(p^(t=i.g[1])&((d=i.g[2])^p))+a[0]+3614090360&4294967295;v=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=t+(v<<7&4294967295|v>>>25))+((v=p+(d^e&(t^d))+a[1]+3905402710&4294967295)<<12&4294967295|v>>>20))+((v=d+(t^p&(e^t))+a[2]+606105819&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^d&(p^e))+a[3]+3250441966&4294967295)<<22&4294967295|v>>>10))+((v=e+(p^t&(d^p))+a[4]+4118548399&4294967295)<<7&4294967295|v>>>25))+((v=p+(d^e&(t^d))+a[5]+1200080426&4294967295)<<12&4294967295|v>>>20))+((v=d+(t^p&(e^t))+a[6]+2821735955&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^d&(p^e))+a[7]+4249261313&4294967295)<<22&4294967295|v>>>10))+((v=e+(p^t&(d^p))+a[8]+1770035416&4294967295)<<7&4294967295|v>>>25))+((v=p+(d^e&(t^d))+a[9]+2336552879&4294967295)<<12&4294967295|v>>>20))+((v=d+(t^p&(e^t))+a[10]+4294925233&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^d&(p^e))+a[11]+2304563134&4294967295)<<22&4294967295|v>>>10))+((v=e+(p^t&(d^p))+a[12]+1804603682&4294967295)<<7&4294967295|v>>>25))+((v=p+(d^e&(t^d))+a[13]+4254626195&4294967295)<<12&4294967295|v>>>20))+((v=d+(t^p&(e^t))+a[14]+2792965006&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^d&(p^e))+a[15]+1236535329&4294967295)<<22&4294967295|v>>>10))+((v=e+(d^p&(t^d))+a[1]+4129170786&4294967295)<<5&4294967295|v>>>27))+((v=p+(t^d&(e^t))+a[6]+3225465664&4294967295)<<9&4294967295|v>>>23))+((v=d+(e^t&(p^e))+a[11]+643717713&4294967295)<<14&4294967295|v>>>18))+((v=t+(p^e&(d^p))+a[0]+3921069994&4294967295)<<20&4294967295|v>>>12))+((v=e+(d^p&(t^d))+a[5]+3593408605&4294967295)<<5&4294967295|v>>>27))+((v=p+(t^d&(e^t))+a[10]+38016083&4294967295)<<9&4294967295|v>>>23))+((v=d+(e^t&(p^e))+a[15]+3634488961&4294967295)<<14&4294967295|v>>>18))+((v=t+(p^e&(d^p))+a[4]+3889429448&4294967295)<<20&4294967295|v>>>12))+((v=e+(d^p&(t^d))+a[9]+568446438&4294967295)<<5&4294967295|v>>>27))+((v=p+(t^d&(e^t))+a[14]+3275163606&4294967295)<<9&4294967295|v>>>23))+((v=d+(e^t&(p^e))+a[3]+4107603335&4294967295)<<14&4294967295|v>>>18))+((v=t+(p^e&(d^p))+a[8]+1163531501&4294967295)<<20&4294967295|v>>>12))+((v=e+(d^p&(t^d))+a[13]+2850285829&4294967295)<<5&4294967295|v>>>27))+((v=p+(t^d&(e^t))+a[2]+4243563512&4294967295)<<9&4294967295|v>>>23))+((v=d+(e^t&(p^e))+a[7]+1735328473&4294967295)<<14&4294967295|v>>>18))+((v=t+(p^e&(d^p))+a[12]+2368359562&4294967295)<<20&4294967295|v>>>12))+((v=e+(t^d^p)+a[5]+4294588738&4294967295)<<4&4294967295|v>>>28))+((v=p+(e^t^d)+a[8]+2272392833&4294967295)<<11&4294967295|v>>>21))+((v=d+(p^e^t)+a[11]+1839030562&4294967295)<<16&4294967295|v>>>16))+((v=t+(d^p^e)+a[14]+4259657740&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^d^p)+a[1]+2763975236&4294967295)<<4&4294967295|v>>>28))+((v=p+(e^t^d)+a[4]+1272893353&4294967295)<<11&4294967295|v>>>21))+((v=d+(p^e^t)+a[7]+4139469664&4294967295)<<16&4294967295|v>>>16))+((v=t+(d^p^e)+a[10]+3200236656&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^d^p)+a[13]+681279174&4294967295)<<4&4294967295|v>>>28))+((v=p+(e^t^d)+a[0]+3936430074&4294967295)<<11&4294967295|v>>>21))+((v=d+(p^e^t)+a[3]+3572445317&4294967295)<<16&4294967295|v>>>16))+((v=t+(d^p^e)+a[6]+76029189&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^d^p)+a[9]+3654602809&4294967295)<<4&4294967295|v>>>28))+((v=p+(e^t^d)+a[12]+3873151461&4294967295)<<11&4294967295|v>>>21))+((v=d+(p^e^t)+a[15]+530742520&4294967295)<<16&4294967295|v>>>16))+((v=t+(d^p^e)+a[2]+3299628645&4294967295)<<23&4294967295|v>>>9))+((v=e+(d^(t|~p))+a[0]+4096336452&4294967295)<<6&4294967295|v>>>26))+((v=p+(t^(e|~d))+a[7]+1126891415&4294967295)<<10&4294967295|v>>>22))+((v=d+(e^(p|~t))+a[14]+2878612391&4294967295)<<15&4294967295|v>>>17))+((v=t+(p^(d|~e))+a[5]+4237533241&4294967295)<<21&4294967295|v>>>11))+((v=e+(d^(t|~p))+a[12]+1700485571&4294967295)<<6&4294967295|v>>>26))+((v=p+(t^(e|~d))+a[3]+2399980690&4294967295)<<10&4294967295|v>>>22))+((v=d+(e^(p|~t))+a[10]+4293915773&4294967295)<<15&4294967295|v>>>17))+((v=t+(p^(d|~e))+a[1]+2240044497&4294967295)<<21&4294967295|v>>>11))+((v=e+(d^(t|~p))+a[8]+1873313359&4294967295)<<6&4294967295|v>>>26))+((v=p+(t^(e|~d))+a[15]+4264355552&4294967295)<<10&4294967295|v>>>22))+((v=d+(e^(p|~t))+a[6]+2734768916&4294967295)<<15&4294967295|v>>>17))+((v=t+(p^(d|~e))+a[13]+1309151649&4294967295)<<21&4294967295|v>>>11))+((p=(e=t+((v=e+(d^(t|~p))+a[4]+4149444226&4294967295)<<6&4294967295|v>>>26))+((v=p+(t^(e|~d))+a[11]+3174756917&4294967295)<<10&4294967295|v>>>22))^((d=p+((v=d+(e^(p|~t))+a[2]+718787259&4294967295)<<15&4294967295|v>>>17))|~e))+a[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(d+(v<<21&4294967295|v>>>11))&4294967295,i.g[2]=i.g[2]+d&4294967295,i.g[3]=i.g[3]+p&4294967295}function R(i,e){this.h=e;for(var t=[],a=!0,d=i.length-1;0<=d;d--){var p=0|i[d];a&&p==e||(t[d]=p,a=!1)}this.g=t}($e=Hn.prototype).Oa=function(i){this.M=i},$e.ha=function(i,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ye.g(),this.C=function Bo(i){return i.h||(i.h=i.i())}(this.u?this.u:Ye),this.g.onreadystatechange=Ue(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(p){return void Ko(this,p)}if(i=t||"",t=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var d in a)t.set(d,a[d]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const p of a.keys())t.set(p,a.get(p))}a=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),d=Ct.FormData&&i instanceof Ct.FormData,!(0<=nt(ku,e))||a||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,v]of t)this.g.setRequestHeader(p,v);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ws(this),0<this.B&&((this.L=function Wo(i){return $n&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ue(this.ua,this)):this.A=cs(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){Ko(this,p)}},$e.ua=function(){typeof qe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xt(this,"timeout"),this.abort(8))},$e.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,xt(this,"complete"),xt(this,"abort"),to(this))},$e.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),to(this,!0)),Hn.$.N.call(this)},$e.La=function(){this.s||(this.G||this.v||this.l?ua(this):this.kb())},$e.kb=function(){ua(this)},$e.isActive=function(){return!!this.g},$e.da=function(){try{return 2<Oi(this)?this.g.status:-1}catch{return-1}},$e.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},$e.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Wl(e)}},$e.Ia=function(){return this.m},$e.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},($e=pu.prototype).ra=8,$e.H=1,$e.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const d=new Tt(this,this.l,i);let p=this.s;if(this.U&&(p?(p=yi(p),br(p,this.U)):p=this.U),null!==this.o||this.O||(d.I=p,p=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var a=this.j[t];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Zo(this,d,e),gi(t=yr(this.I),"RID",i),gi(t,"CVER",22),this.F&&gi(t,"X-HTTP-Session-Id",this.F),ue(this,t),p&&(this.O?e="headers="+encodeURIComponent(String(no(p)))+"&"+e:this.o&&fu(t,this.o,p)),ba(this.i,d),this.bb&&gi(t,"TYPE","init"),this.P?(gi(t,"$req",e),gi(t,"SID","null"),d.aa=!0,bi(d,t,null)):bi(d,t,e),this.H=2}}else 3==this.H&&(i?bo(this,i):0==this.j.length||zl(this.i)||bo(this))},$e.Ma=function(){if(this.u=null,dl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=co(Ue(this.jb,this),i)}},$e.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,hi(10),Aa(this),dl(this))},$e.ib=function(){null!=this.v&&(this.v=null,Aa(this),Lu(this),hi(19))},$e.pb=function(i){i?(this.l.info("Successfully pinged google.com"),hi(2)):(this.l.info("Failed to ping google.com"),hi(1))},$e.isActive=function(){return!!this.h&&this.h.isActive(this)},($e=Kl.prototype).Ba=function(){},$e.Aa=function(){},$e.za=function(){},$e.ya=function(){},$e.isActive=function(){return!0},$e.Va=function(){},Ma.prototype.g=function(i,e){return new Is(i,e)},Qe(Is,Jt),Is.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;hi(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=Sc(i,null,i.Y),Ra(i)},Is.prototype.close=function(){ji(this.g)},Is.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Hr(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&Ra(e)},Is.prototype.N=function(){this.g.h=null,delete this.j,ji(this.g),delete this.g,Is.$.N.call(this)},Qe(yu,xe),Qe(po,Re),Qe(go,Kl),go.prototype.Ba=function(){xt(this.g,"a")},go.prototype.Aa=function(i){xt(this.g,new yu(i))},go.prototype.za=function(i){xt(this.g,new po)},go.prototype.ya=function(){xt(this.g,"b")},Qe(rr,function ql(){this.blockSize=-1}),rr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},rr.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,a=this.m,d=this.h,p=0;p<e;){if(0==d)for(;p<=t;)So(this,i,p),p+=this.blockSize;if("string"==typeof i){for(;p<e;)if(a[d++]=i.charCodeAt(p++),d==this.blockSize){So(this,a),d=0;break}}else for(;p<e;)if(a[d++]=i[p++],d==this.blockSize){So(this,a),d=0;break}}this.h=d,this.i+=e},rr.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var a=0;32>a;a+=8)i[t++]=this.g[e]>>>a&255;return i};var K={};function F(i){return-128<=i&&128>i?function Kt(i,e){var t=K;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new R([0|e],0>e?-1:0)}):new R([0|i],0>i?-1:0)}function G(i){if(isNaN(i)||!isFinite(i))return lt;if(0>i)return Sn(G(-i));for(var e=[],t=1,a=0;i>=t;a++)e[a]=i/t|0,t*=et;return new R(e,0)}var et=4294967296,lt=F(0),rn=F(1),zn=F(16777216);function Zn(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Kn(i){return-1==i.h}function Sn(i){for(var e=i.g.length,t=[],a=0;a<e;a++)t[a]=~i.g[a];return new R(t,~i.h).add(rn)}function Xr(i,e){return i.add(Sn(e))}function qr(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function mi(i,e){this.g=i,this.h=e}function Ei(i,e){if(Zn(e))throw Error("division by zero");if(Zn(i))return new mi(lt,lt);if(Kn(i))return e=Ei(Sn(i),e),new mi(Sn(e.g),Sn(e.h));if(Kn(e))return e=Ei(i,Sn(e)),new mi(Sn(e.g),e.h);if(30<i.g.length){if(Kn(i)||Kn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=rn,a=e;0>=a.X(i);)t=yn(t),a=yn(a);var d=ls(t,1),p=ls(a,1);for(a=ls(a,2),t=ls(t,2);!Zn(a);){var v=p.add(a);0>=v.X(i)&&(d=d.add(t),p=v),a=ls(a,1),t=ls(t,1)}return e=Xr(i,d.R(e)),new mi(d,e)}for(d=lt;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),a=48>=(a=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,a-48),v=(p=G(t)).R(e);Kn(v)||0<v.X(i);)v=(p=G(t-=a)).R(e);Zn(p)&&(p=rn),d=d.add(p),i=Xr(i,v)}return new mi(d,i)}function yn(i){for(var e=i.g.length+1,t=[],a=0;a<e;a++)t[a]=i.D(a)<<1|i.D(a-1)>>>31;return new R(t,i.h)}function ls(i,e){var t=e>>5;e%=32;for(var a=i.g.length-t,d=[],p=0;p<a;p++)d[p]=0<e?i.D(p+t)>>>e|i.D(p+t+1)<<32-e:i.D(p+t);return new R(d,i.h)}($e=R.prototype).ea=function(){if(Kn(this))return-Sn(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var a=this.D(t);i+=(0<=a?a:et+a)*e,e*=et}return i},$e.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(Zn(this))return"0";if(Kn(this))return"-"+Sn(this).toString(i);for(var e=G(Math.pow(i,6)),t=this,a="";;){var d=Ei(t,e).g,p=((0<(t=Xr(t,d.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(Zn(t=d))return p+a;for(;6>p.length;)p="0"+p;a=p+a}},$e.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},$e.X=function(i){return Kn(i=Xr(this,i))?-1:Zn(i)?0:1},$e.abs=function(){return Kn(this)?Sn(this):this},$e.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],a=0,d=0;d<=e;d++){var p=a+(65535&this.D(d))+(65535&i.D(d)),v=(p>>>16)+(this.D(d)>>>16)+(i.D(d)>>>16);a=v>>>16,t[d]=(v&=65535)<<16|(p&=65535)}return new R(t,-2147483648&t[t.length-1]?-1:0)},$e.R=function(i){if(Zn(this)||Zn(i))return lt;if(Kn(this))return Kn(i)?Sn(this).R(Sn(i)):Sn(Sn(this).R(i));if(Kn(i))return Sn(this.R(Sn(i)));if(0>this.X(zn)&&0>i.X(zn))return G(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],a=0;a<2*e;a++)t[a]=0;for(a=0;a<this.g.length;a++)for(var d=0;d<i.g.length;d++){var p=this.D(a)>>>16,v=65535&this.D(a),M=i.D(d)>>>16,U=65535&i.D(d);t[2*a+2*d]+=v*U,qr(t,2*a+2*d),t[2*a+2*d+1]+=p*U,qr(t,2*a+2*d+1),t[2*a+2*d+1]+=v*M,qr(t,2*a+2*d+1),t[2*a+2*d+2]+=p*M,qr(t,2*a+2*d+2)}for(a=0;a<e;a++)t[a]=t[2*a+1]<<16|t[2*a];for(a=e;a<2*e;a++)t[a]=0;return new R(t,0)},$e.gb=function(i){return Ei(this,i).h},$e.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)&i.D(a);return new R(t,this.h&i.h)},$e.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)|i.D(a);return new R(t,this.h|i.h)},$e.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)^i.D(a);return new R(t,this.h^i.h)},Ma.prototype.createWebChannel=Ma.prototype.g,Is.prototype.send=Is.prototype.u,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,Fn.NO_ERROR=0,Fn.TIMEOUT=8,Fn.HTTP_ERROR=6,xi.COMPLETE="complete",Bi.EventType=ia,ia.OPEN="a",ia.CLOSE="b",ia.ERROR="c",ia.MESSAGE="d",Jt.prototype.listen=Jt.prototype.O,Hn.prototype.listenOnce=Hn.prototype.P,Hn.prototype.getLastError=Hn.prototype.Sa,Hn.prototype.getLastErrorCode=Hn.prototype.Ia,Hn.prototype.getStatus=Hn.prototype.da,Hn.prototype.getResponseJson=Hn.prototype.Wa,Hn.prototype.getResponseText=Hn.prototype.ja,Hn.prototype.send=Hn.prototype.ha,Hn.prototype.setWithCredentials=Hn.prototype.Oa,rr.prototype.digest=rr.prototype.l,rr.prototype.reset=rr.prototype.reset,rr.prototype.update=rr.prototype.j,R.prototype.add=R.prototype.add,R.prototype.multiply=R.prototype.R,R.prototype.modulo=R.prototype.gb,R.prototype.compare=R.prototype.X,R.prototype.toNumber=R.prototype.ea,R.prototype.toString=R.prototype.toString,R.prototype.getBits=R.prototype.D,R.fromNumber=G,R.fromString=function ge(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Sn(ge(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=G(Math.pow(e,8)),a=lt,d=0;d<i.length;d+=8){var p=Math.min(8,i.length-d),v=parseInt(i.substring(d,d+p),e);8>p?(p=G(Math.pow(e,p)),a=a.R(p).add(G(v))):a=(a=a.R(t)).add(G(v))}return a};var ro=dt.createWebChannelTransport=function(){return new Ma},Ts=dt.getStatEventTarget=function(){return Qs()},Cs=dt.ErrorCode=Fn,zr=dt.EventType=xi,Ac=dt.Event=_i,ki=dt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Fu=dt.FetchXmlHttpFactory=Js,hl=dt.WebChannel=Bi,Os=dt.XhrIo=Hn,_d=dt.Md5=rr,Na=dt.Integer=R;const St="@firebase/firestore";class Rn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");let _u="9.23.0";const mo=new Ze.Yd("@firebase/firestore");function Ds(){return mo.logLevel}function At(i,...e){if(mo.logLevel<=Ze.in.DEBUG){const t=e.map(Uu);mo.debug(`Firestore (${_u}): ${i}`,...t)}}function Pr(i,...e){if(mo.logLevel<=Ze.in.ERROR){const t=e.map(Uu);mo.error(`Firestore (${_u}): ${i}`,...t)}}function ps(i,...e){if(mo.logLevel<=Ze.in.WARN){const t=e.map(Uu);mo.warn(`Firestore (${_u}): ${i}`,...t)}}function Uu(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Ot(i="Unexpected state"){const e=`FIRESTORE (${_u}) INTERNAL ASSERTION FAILED: `+i;throw Pr(e),new Error(e)}function vn(i,e){i||Ot()}function Vt(i,e){return i}const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Ce.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class js{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rn.UNAUTHENTICATED))}shutdown(){}}class Bu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ah{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let d=this.i;const p=z=>this.i!==d?(d=this.i,t(z)):Promise.resolve();let v=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new ri,e.enqueueRetryable(()=>p(this.currentUser))};const M=()=>{const z=v;e.enqueueRetryable((0,Le.Z)(function*(){yield z.promise,yield p(a.currentUser)}))},U=z=>{At("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=z,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(z=>U(z)),setTimeout(()=>{if(!this.auth){const z=this.t.getImmediate({optional:!0});z?U(z):(At("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new ri)}},0),M()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(At("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(vn("string"==typeof a.accessToken),new js(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vn(null===e||"string"==typeof e),new Rn(e)}}class $i{constructor(e,t,a){this.h=e,this.l=t,this.m=a,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Pa{constructor(e,t,a){this.h=e,this.l=t,this.m=a}getToken(){return Promise.resolve(new $i(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const a=p=>{null!=p.error&&At("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const v=p.token!==this.T;return this.T=p.token,At("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>a(p))};const d=p=>{At("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.I.onInit(p=>d(p)),setTimeout(()=>{if(!this.appCheck){const p=this.I.getImmediate({optional:!0});p?d(p):At("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vn("string"==typeof t.token),this.T=t.token,new fl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Mc(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}class pl{static A(){const t=62*Math.floor(256/62);let a="";for(;a.length<20;){const d=Mc(40);for(let p=0;p<d.length;++p)a.length<20&&d[p]<t&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(d[p]%62))}return a}}function On(i,e){return i<e?-1:i>e?1:0}function Ao(i,e,t){return i.length===e.length&&i.every((a,d)=>t(a,e[d]))}function Yl(i){return i+"\0"}class ii{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Et(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ii.fromMillis(Date.now())}static fromDate(e){return ii.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new ii(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?On(this.nanoseconds,e.nanoseconds):On(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wn(e)}static min(){return new wn(new ii(0,0))}static max(){return new wn(new ii(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class io{constructor(e,t,a){void 0===t?t=0:t>e.length&&Ot(),void 0===a?a=e.length-t:a>e.length-t&&Ot(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===io.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof io?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let d=0;d<a;d++){const p=e.get(d),v=t.get(d);if(p<v)return-1;if(p>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qn extends io{construct(e,t,a){return new qn(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Et(it.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(d=>d.length>0))}return new qn(t)}static emptyPath(){return new qn([])}}const Yo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends io{construct(e,t,a){return new or(e,t,a)}static isValidIdentifier(e){return Yo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new or(["__name__"])}static fromServerFormat(e){const t=[];let a="",d=0;const p=()=>{if(0===a.length)throw new Et(it.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let v=!1;for(;d<e.length;){const M=e[d];if("\\"===M){if(d+1===e.length)throw new Et(it.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const U=e[d+1];if("\\"!==U&&"."!==U&&"`"!==U)throw new Et(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=U,d+=2}else"`"===M?(v=!v,d++):"."!==M||v?(a+=M,d++):(p(),d++)}if(p(),v)throw new Et(it.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}class qt{constructor(e){this.path=e}static fromPath(e){return new qt(qn.fromString(e))}static fromName(e){return new qt(qn.fromString(e).popFirst(5))}static empty(){return new qt(qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qt(new qn(e.slice()))}}class si{constructor(e,t,a,d){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=d}}function ca(i){return i.fields.find(e=>2===e.kind)}function Ro(i){return i.fields.filter(e=>2!==e.kind)}si.UNKNOWN_ID=-1;class Mo{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vu(0,C.min())}}function S(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,d=wn.fromTimestamp(1e9===a?new ii(t+1,0):new ii(t,a));return new C(d,qt.empty(),e)}function x(i){return new C(i.readTime,i.key,-1)}class C{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new C(wn.min(),qt.empty(),-1)}static max(){return new C(wn.max(),qt.empty(),-1)}}function N(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=qt.comparator(i.documentKey,e.documentKey),0!==t?t:On(i.largestBatchId,e.largestBatchId))}const $="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class se{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ie(i){return He.apply(this,arguments)}function He(){return He=(0,Le.Z)(function*(i){if(i.code!==it.FAILED_PRECONDITION||i.message!==$)throw i;At("LocalStore","Unexpectedly lost primary lease")}),He.apply(this,arguments)}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((a,d)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(a,d)},this.catchCallback=p=>{this.wrapFailure(t,p).next(a,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,a)=>{t(e)})}static reject(e){return new pe((t,a)=>{a(e)})}static waitFor(e){return new pe((t,a)=>{let d=0,p=0,v=!1;e.forEach(M=>{++d,M.next(()=>{++p,v&&p===d&&t()},U=>a(U))}),v=!0,p===d&&t()})}static or(e){let t=pe.resolve(!1);for(const a of e)t=t.next(d=>d?pe.resolve(d):a());return t}static forEach(e,t){const a=[];return e.forEach((d,p)=>{a.push(t.call(this,d,p))}),this.waitFor(a)}static mapArray(e,t){return new pe((a,d)=>{const p=e.length,v=new Array(p);let M=0;for(let U=0;U<p;U++){const z=U;t(e[z]).next(te=>{v[z]=te,++M,M===p&&a(v)},te=>d(te))}})}static doWhile(e,t){return new pe((a,d)=>{const p=()=>{!0===e()?t().next(()=>{p()},d):a()};p()})}}class hn{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ri,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ur(e,t.error)):this.v.resolve()},this.transaction.onerror=a=>{const d=ml(a.target.error);this.v.reject(new Ur(e,d))}}static open(e,t,a,d){try{return new hn(t,e.transaction(d,a))}catch(p){throw new Ur(t,p)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(At("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Qo(t)}}class tn{constructor(e,t,a){this.name=e,this.version=t,this.V=a,12.2===tn.S((0,Ce.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return At("SimpleDb","Removing database:",e),bs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ce.hl)())return!1;if(tn.C())return!0;const e=(0,Ce.z$)(),t=tn.S(e),a=0<t&&t<10,d=tn.N(e),p=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||p)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static N(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}$(e){var t=this;return(0,Le.Z)(function*(){return t.db||(At("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,d)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=v=>{a(v.target.result)},p.onblocked=()=>{d(new Ur(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=v=>{const M=v.target.error;d("VersionError"===M.name?new Et(it.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new Et(it.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Ur(e,M))},p.onupgradeneeded=v=>{At("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.V.O(v.target.result,p.transaction,v.oldVersion,t.version).next(()=>{At("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=a=>t.F(a)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,d){var p=this;return(0,Le.Z)(function*(){const v="readonly"===t;let M=0;for(;;){++M;try{p.db=yield p.$(e);const U=hn.open(p.db,e,v?"readonly":"readwrite",a),z=d(U).next(te=>(U.P(),te)).catch(te=>(U.abort(te),pe.reject(te))).toPromise();return z.catch(()=>{}),yield U.R,z}catch(U){const z=U,te="FirebaseError"!==z.name&&M<3;if(At("SimpleDb","Transaction failed with error:",z.message,"Retrying:",te),p.close(),!te)return Promise.reject(z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Cr{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return bs(this.L.delete())}}class Ur extends Et{constructor(e,t){super(it.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function da(i){return"IndexedDbTransactionError"===i.name}class Qo{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(At("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(At("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),bs(a)}add(e){return At("SimpleDb","ADD",this.store.name,e,e),bs(this.store.add(e))}get(e){return bs(this.store.get(e)).next(t=>(void 0===t&&(t=null),At("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return At("SimpleDb","DELETE",this.store.name,e),bs(this.store.delete(e))}count(){return At("SimpleDb","COUNT",this.store.name),bs(this.store.count())}j(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const d=this.cursor(a),p=[];return this.W(d,(v,M)=>{p.push(M)}).next(()=>p)}{const d=this.store.getAll(a.range);return new pe((p,v)=>{d.onerror=M=>{v(M.target.error)},d.onsuccess=M=>{p(M.target.result)}})}}H(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new pe((d,p)=>{a.onerror=v=>{p(v.target.error)},a.onsuccess=v=>{d(v.target.result)}})}J(e,t){At("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.Y=!1;const d=this.cursor(a);return this.W(d,(p,v,M)=>M.delete())}X(e,t){let a;t?a=e:(a={},t=e);const d=this.cursor(a);return this.W(d,t)}Z(e){const t=this.cursor({});return new pe((a,d)=>{t.onerror=p=>{const v=ml(p.target.error);d(v)},t.onsuccess=p=>{const v=p.target.result;v?e(v.primaryKey,v.value).next(M=>{M?v.continue():a()}):a()}})}W(e,t){const a=[];return new pe((d,p)=>{e.onerror=v=>{p(v.target.error)},e.onsuccess=v=>{const M=v.target.result;if(!M)return void d();const U=new Cr(M),z=t(M.primaryKey,M.value,U);if(z instanceof pe){const te=z.catch(Ee=>(U.done(),pe.reject(Ee)));a.push(te)}U.isDone?d():null===U.K?M.continue():M.continue(U.K)}}).next(()=>pe.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.Y?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bs(i){return new pe((e,t)=>{i.onsuccess=a=>{e(a.target.result)},i.onerror=a=>{const d=ml(a.target.error);t(d)}})}let ju=!1;function ml(i){const e=tn.S((0,Ce.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const a=new Et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ju||(ju=!0,setTimeout(()=>{throw a},0)),a}}return i}class np{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;At("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Le.Z)(function*(){t.task=null;try{At("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(a){da(a)?At("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield ie(a)}yield t.et(6e4)}))}}class No{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.st(a,e))})()}st(e,t){const a=new Set;let d=t,p=!0;return pe.doWhile(()=>!0===p&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!a.has(v))return At("IndexBackiller",`Processing collection: ${v}`),this.it(e,v,d).next(M=>{d-=M,a.add(v)});p=!1})).next(()=>t-d)}it(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,a).next(p=>{const v=p.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.rt(d,p)).next(M=>(At("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,t,M))).next(()=>v.size)}))}rt(e,t){let a=e;return t.changes.forEach((d,p)=>{const v=x(p);N(v,a)>0&&(a=v)}),new C(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ss=(()=>{class i{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=d=>this.ot(d),this.ut=d=>a.writeSequenceNumber(d))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function xa(i){return null==i}function Ql(i){return 0===i&&1/i==-1/0}function Nc(i){return"number"==typeof i&&Number.isInteger(i)&&!Ql(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function As(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Qh(e)),e=ha(i.get(t),e);return Qh(e)}function ha(i,e){let t=e;const a=i.length;for(let d=0;d<a;d++){const p=i.charAt(d);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function Qh(i){return i+"\x01\x01"}function Oa(i){const e=i.length;if(vn(e>=2),2===e)return vn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),qn.emptyPath();const t=e-2,a=[];let d="";for(let p=0;p<e;){const v=i.indexOf("\x01",p);switch((v<0||v>t)&&Ot(),i.charAt(v+1)){case"\x01":const M=i.substring(p,v);let U;0===d.length?U=M:(d+=M,U=d,d=""),a.push(U);break;case"\x10":d+=i.substring(p,v),d+="\0";break;case"\x11":d+=i.substring(p,v+1);break;default:Ot()}p=v+2}return new qn(a)}const vd=["userId","batchId"];function Pc(i,e){return[i,As(e)]}function ka(i,e,t){return[i,As(e),t]}const lh={},Xl=["prefixPath","collectionGroup","readTime","documentId"],yl=["prefixPath","collectionGroup","documentId"],xc=["collectionGroup","readTime","prefixPath","documentId"],Oc=["canonicalId","targetId"],Eu=["targetId","path"],ch=["path","targetId"],Ed=["collectionId","parent"],_l=["indexId","uid"],Jl=["uid","sequenceNumber"],ec=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rp=["indexId","uid","orderedDocumentKey"],kc=["userId","collectionPath","documentId"],$u=["userId","collectionPath","largestBatchId"],Xh=["userId","collectionGroup","largestBatchId"],Lc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hu=[...Lc,"documentOverlays"],La=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dh=La,ip=[...dh,"indexConfiguration","indexState","indexEntries"];class fa extends se{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function $s(i,e){const t=Vt(i);return tn.M(t.ht,e)}function wu(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function pa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function tc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Br{constructor(e,t){this.comparator=e,this.root=t||gs.EMPTY}insert(e,t){return new Br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gs.BLACK,null,null))}remove(e){return new Br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const d=this.comparator(e,a.key);if(0===d)return t+a.left.size;d<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ga(this.root,e,this.comparator,!0)}}class ga{constructor(e,t,a,d){this.isReverse=d,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?a(e.key,t):1,t&&d&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gs{constructor(e,t,a,d,p){this.key=e,this.value=t,this.color=a??gs.RED,this.left=d??gs.EMPTY,this.right=p??gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,d,p){return new gs(e??this.key,t??this.value,a??this.color,d??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let d=this;const p=a(e,d.key);return d=p<0?d.copy(null,null,null,d.left.insert(e,t,a),null):0===p?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,a)),d.fixUp()}removeMin(){if(this.left.isEmpty())return gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return gs.EMPTY;a=d.right.min(),d=d.copy(a.key,a.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ot();const e=this.left.check();if(e!==this.right.check())throw Ot();return e+(this.isRed()?0:1)}}gs.EMPTY=null,gs.RED=!0,gs.BLACK=!1,gs.EMPTY=new class{constructor(){this.size=0}get key(){throw Ot()}get value(){throw Ot()}get color(){throw Ot()}get left(){throw Ot()}get right(){throw Ot()}copy(i,e,t,a,d){return this}insert(i,e,t){return new gs(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wi{constructor(e){this.comparator=e,this.data=new Br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const d=a.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P(this.data.getIterator())}getIteratorFrom(e){return new P(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,p=a.getNext().key;if(0!==this.comparator(d,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wi(this.comparator);return t.data=e,t}}class P{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function L(i){return i.hasNext()?i.getNext():void 0}class W{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new W([])}unionWith(e){let t=new wi(or.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new W(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class ce extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ze{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new ce("Invalid base64 string: "+d):d}}(e);return new ze(t)}static fromUint8Array(e){const t=function(a){let d="";for(let p=0;p<a.length;++p)d+=String.fromCharCode(a[p]);return d}(e);return new ze(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return On(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ze.EMPTY_BYTE_STRING=new ze("");const It=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(i){if(vn(!!i),"string"==typeof i){let e=0;const t=It.exec(i);if(vn(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ft(i.seconds),nanos:Ft(i.nanos)}}function Ft(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function sn(i){return"string"==typeof i?ze.fromBase64String(i):ze.fromUint8Array(i)}function Yn(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Cn(i){const e=i.mapValue.fields.__previous_value__;return Yn(e)?Cn(e):e}function xr(i){const e=en(i.mapValue.fields.__local_write_time__.timestampValue);return new ii(e.seconds,e.nanos)}class ks{constructor(e,t,a,d,p,v,M,U,z){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=d,this.ssl=p,this.forceLongPolling=v,this.autoDetectLongPolling=M,this.longPollingOptions=U,this.useFetchStreams=z}}class so{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new so("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof so&&e.projectId===this.projectId&&e.database===this.database}}const Xa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xi={nullValue:"NULL_VALUE"};function Ji(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Yn(i)?4:Pg(i)?9007199254740991:10:Ot()}function Ls(i,e){if(i===e)return!0;const t=Ji(i);if(t!==Ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return xr(i).isEqual(xr(e));case 3:return function(a,d){if("string"==typeof a.timestampValue&&"string"==typeof d.timestampValue&&a.timestampValue.length===d.timestampValue.length)return a.timestampValue===d.timestampValue;const p=en(a.timestampValue),v=en(d.timestampValue);return p.seconds===v.seconds&&p.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,sn(i.bytesValue).isEqual(sn(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,d){return Ft(a.geoPointValue.latitude)===Ft(d.geoPointValue.latitude)&&Ft(a.geoPointValue.longitude)===Ft(d.geoPointValue.longitude)}(i,e);case 2:return function(a,d){if("integerValue"in a&&"integerValue"in d)return Ft(a.integerValue)===Ft(d.integerValue);if("doubleValue"in a&&"doubleValue"in d){const p=Ft(a.doubleValue),v=Ft(d.doubleValue);return p===v?Ql(p)===Ql(v):isNaN(p)&&isNaN(v)}return!1}(i,e);case 9:return Ao(i.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:return function(a,d){const p=a.mapValue.fields||{},v=d.mapValue.fields||{};if(wu(p)!==wu(v))return!1;for(const M in p)if(p.hasOwnProperty(M)&&(void 0===v[M]||!Ls(p[M],v[M])))return!1;return!0}(i,e);default:return Ot()}var d}function Ja(i,e){return void 0!==(i.values||[]).find(t=>Ls(t,e))}function Fa(i,e){if(i===e)return 0;const t=Ji(i),a=Ji(e);if(t!==a)return On(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return On(i.booleanValue,e.booleanValue);case 2:return function(d,p){const v=Ft(d.integerValue||d.doubleValue),M=Ft(p.integerValue||p.doubleValue);return v<M?-1:v>M?1:v===M?0:isNaN(v)?isNaN(M)?0:-1:1}(i,e);case 3:return Mg(i.timestampValue,e.timestampValue);case 4:return Mg(xr(i),xr(e));case 5:return On(i.stringValue,e.stringValue);case 6:return function(d,p){const v=sn(d),M=sn(p);return v.compareTo(M)}(i.bytesValue,e.bytesValue);case 7:return function(d,p){const v=d.split("/"),M=p.split("/");for(let U=0;U<v.length&&U<M.length;U++){const z=On(v[U],M[U]);if(0!==z)return z}return On(v.length,M.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,p){const v=On(Ft(d.latitude),Ft(p.latitude));return 0!==v?v:On(Ft(d.longitude),Ft(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,p){const v=d.values||[],M=p.values||[];for(let U=0;U<v.length&&U<M.length;++U){const z=Fa(v[U],M[U]);if(z)return z}return On(v.length,M.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,p){if(d===Xa.mapValue&&p===Xa.mapValue)return 0;if(d===Xa.mapValue)return 1;if(p===Xa.mapValue)return-1;const v=d.fields||{},M=Object.keys(v),U=p.fields||{},z=Object.keys(U);M.sort(),z.sort();for(let te=0;te<M.length&&te<z.length;++te){const Ee=On(M[te],z[te]);if(0!==Ee)return Ee;const rt=Fa(v[M[te]],U[z[te]]);if(0!==rt)return rt}return On(M.length,z.length)}(i.mapValue,e.mapValue);default:throw Ot()}}function Mg(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return On(i,e);const t=en(i),a=en(e),d=On(t.seconds,a.seconds);return 0!==d?d:On(t.nanos,a.nanos)}function wd(i){return Id(i)}function Id(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const d=en(a);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?sn(i.bytesValue).toBase64():"referenceValue"in i?qt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(a){let d="[",p=!0;for(const v of a.values||[])p?p=!1:d+=",",d+=Id(v);return d+"]"}(i.arrayValue):"mapValue"in i?function(a){const d=Object.keys(a.fields||{}).sort();let p="{",v=!0;for(const M of d)v?v=!1:p+=",",p+=`${M}:${Id(a.fields[M])}`;return p+"}"}(i.mapValue):Ot();var e}function Rs(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function hh(i){return!!i&&"integerValue"in i}function zu(i){return!!i&&"arrayValue"in i}function jm(i){return!!i&&"nullValue"in i}function Ng(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Jh(i){return!!i&&"mapValue"in i}function Td(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return pa(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Td(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Td(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Pg(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function xg(i){return"nullValue"in i?Xi:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Rs(so.empty(),qt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Ot()}function $m(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Rs(so.empty(),qt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Xa:Ot()}function op(i,e){const t=Fa(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ef(i,e){const t=Fa(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Td(t)}setAll(e){let t=or.emptyPath(),a={},d=[];e.forEach((v,M)=>{if(!t.isImmediateParentOf(M)){const U=this.getFieldsMap(t);this.applyChanges(U,a,d),a={},d=[],t=M.popLast()}v?a[M.lastSegment()]=Td(v):d.push(M.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,a,d)}delete(e){const t=this.field(e.popLast());Jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let d=t.mapValue.fields[e.get(a)];Jh(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,a){pa(t,(d,p)=>e[d]=p);for(const d of a)delete e[d]}clone(){return new ms(Td(this.value))}}function tf(i){const e=[];return pa(i.fields,(t,a)=>{const d=new or([t]);if(Jh(a)){const p=tf(a.mapValue).fields;if(0===p.length)e.push(d);else for(const v of p)e.push(d.child(v))}else e.push(d)}),new W(e)}class Mi{constructor(e,t,a,d,p,v,M){this.key=e,this.documentType=t,this.version=a,this.readTime=d,this.createTime=p,this.data=v,this.documentState=M}static newInvalidDocument(e){return new Mi(e,0,wn.min(),wn.min(),wn.min(),ms.empty(),0)}static newFoundDocument(e,t,a,d){return new Mi(e,1,t,wn.min(),a,d,0)}static newNoDocument(e,t){return new Mi(e,2,t,wn.min(),wn.min(),ms.empty(),0)}static newUnknownDocument(e,t){return new Mi(e,3,t,wn.min(),wn.min(),ms.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gu{constructor(e,t){this.position=e,this.inclusive=t}}function fh(i,e,t){let a=0;for(let d=0;d<i.position.length;d++){const p=e[d],v=i.position[d];if(a=p.field.isKeyField()?qt.comparator(qt.fromName(v.referenceValue),t.key):Fa(v,t.data.field(p.field)),"desc"===p.dir&&(a*=-1),0!==a)break}return a}function ap(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ls(i.position[t],e.position[t]))return!1;return!0}class Cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Dd{}class Or extends Dd{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,a):new kg(e,t,a):"array-contains"===t?new vl(e,a):"in"===t?new Hs(e,a):"not-in"===t?new Sd(e,a):"array-contains-any"===t?new rf(e,a):new Or(e,t,a)}static createKeyFieldInFilter(e,t,a){return"in"===t?new bd(e,a):new Bc(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fa(t,this.value)):null!==t&&Ji(this.value)===Ji(t)&&this.matchesComparison(Fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Jr extends Dd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Jr(e,t)}matches(e){return nc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function nc(i){return"and"===i.op}function Iu(i){return"or"===i.op}function rc(i){return nf(i)&&nc(i)}function nf(i){for(const e of i.filters)if(e instanceof Jr)return!1;return!0}function ic(i){if(i instanceof Or)return i.field.canonicalString()+i.op.toString()+wd(i.value);if(rc(i))return i.filters.map(e=>ic(e)).join(",");{const e=i.filters.map(t=>ic(t)).join(",");return`${i.op}(${e})`}}function ph(i,e){return i instanceof Or?(t=i,(a=e)instanceof Or&&t.op===a.op&&t.field.isEqual(a.field)&&Ls(t.value,a.value)):i instanceof Jr?function(t,a){return a instanceof Jr&&t.op===a.op&&t.filters.length===a.filters.length&&t.filters.reduce((d,p,v)=>d&&ph(p,a.filters[v]),!0)}(i,e):void Ot();var t,a}function Uc(i,e){const t=i.filters.concat(e);return Jr.create(t,i.op)}function Og(i){return i instanceof Or?`${(e=i).field.canonicalString()} ${e.op} ${wd(e.value)}`:i instanceof Jr?function(e){return e.op.toString()+" {"+e.getFilters().map(Og).join(" ,")+"}"}(i):"Filter";var e}class kg extends Or{constructor(e,t,a){super(e,t,a),this.key=qt.fromName(a.referenceValue)}matches(e){const t=qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class bd extends Or{constructor(e,t){super(e,"in",t),this.keys=gh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bc extends Or{constructor(e,t){super(e,"not-in",t),this.keys=gh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gh(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>qt.fromName(a.referenceValue))}class vl extends Or{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zu(t)&&Ja(t.arrayValue,this.value)}}class Hs extends Or{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ja(this.value.arrayValue,t)}}class Sd extends Or{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ja(this.value.arrayValue,t)}}class rf extends Or{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Ja(this.value.arrayValue,a))}}class Tu{constructor(e,t=null,a=[],d=[],p=null,v=null,M=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=d,this.limit=p,this.startAt=v,this.endAt=M,this.dt=null}}function zs(i,e=null,t=[],a=[],d=null,p=null,v=null){return new Tu(i,e,t,a,d,p,v)}function Vc(i){const e=Vt(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>ic(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(d=a).field.canonicalString()+d.dir;var d}).join(","),xa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>wd(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>wd(a)).join(",")),e.dt=t}return e.dt}function sc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Fc(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!ph(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ap(i.startAt,e.startAt)&&ap(i.endAt,e.endAt)}function oc(i){return qt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Wu(i,e){return i.filters.filter(t=>t instanceof Or&&t.field.isEqual(e))}function El(i,e,t){let a=Xi,d=!0;for(const p of Wu(i,e)){let v=Xi,M=!0;switch(p.op){case"<":case"<=":v=xg(p.value);break;case"==":case"in":case">=":v=p.value;break;case">":v=p.value,M=!1;break;case"!=":case"not-in":v=Xi}op({value:a,inclusive:d},{value:v,inclusive:M})<0&&(a=v,d=M)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];op({value:a,inclusive:d},{value:v,inclusive:t.inclusive})<0&&(a=v,d=t.inclusive);break}return{value:a,inclusive:d}}function eu(i,e,t){let a=Xa,d=!0;for(const p of Wu(i,e)){let v=Xa,M=!0;switch(p.op){case">=":case">":v=$m(p.value),M=!1;break;case"==":case"in":case"<=":v=p.value;break;case"<":v=p.value,M=!1;break;case"!=":case"not-in":v=Xa}ef({value:a,inclusive:d},{value:v,inclusive:M})>0&&(a=v,d=M)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];ef({value:a,inclusive:d},{value:v,inclusive:t.inclusive})>0&&(a=v,d=t.inclusive);break}return{value:a,inclusive:d}}class ac{constructor(e,t=null,a=[],d=[],p=null,v="F",M=null,U=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=d,this.limit=p,this.limitType=v,this.startAt=M,this.endAt=U,this.wt=null,this._t=null}}function mh(i,e,t,a,d,p,v,M){return new ac(i,e,t,a,d,p,v,M)}function jc(i){return new ac(i)}function Lg(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Gs(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Ad(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function uc(i){return null!==i.collectionGroup}function Ku(i){const e=Vt(i);if(null===e.wt){e.wt=[];const t=Ad(e),a=Gs(e);if(null!==t&&null===a)t.isKeyField()||e.wt.push(new Cd(t)),e.wt.push(new Cd(or.keyField(),"asc"));else{let d=!1;for(const p of e.explicitOrderBy)e.wt.push(p),p.field.isKeyField()&&(d=!0);if(!d){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Cd(or.keyField(),p))}}}return e.wt}function Po(i){const e=Vt(i);if(!e._t)if("F"===e.limitType)e._t=zs(e.path,e.collectionGroup,Ku(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of Ku(e))t.push(new Cd(p.field,"desc"===p.dir?"asc":"desc"));const a=e.endAt?new Gu(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Gu(e.startAt.position,e.startAt.inclusive):null;e._t=zs(e.path,e.collectionGroup,t,e.filters,e.limit,a,d)}return e._t}function Rd(i,e){e.getFirstInequalityField(),Ad(i);const t=i.filters.concat([e]);return new ac(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function $c(i,e,t){return new ac(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function qu(i,e){return sc(Po(i),Po(e))&&i.limitType===e.limitType}function sf(i){return`${Vc(Po(i))}|lt:${i.limitType}`}function tu(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(a=>Og(a)).join(", ")}]`),xa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(a=>{return`${(d=a).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>wd(a)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>wd(a)).join(",")),`Target(${t})`}(Po(i))}; limitType=${i.limitType})`}function lc(i,e){return e.isFoundDocument()&&function(t,a){const d=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):qt.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,a){for(const d of Ku(t))if(!d.field.isKeyField()&&null===a.data.field(d.field))return!1;return!0}(i,e)&&function(t,a){for(const d of t.filters)if(!d.matches(a))return!1;return!0}(i,e)&&(a=e,!((t=i).startAt&&!function(d,p,v){const M=fh(d,p,v);return d.inclusive?M<=0:M<0}(t.startAt,Ku(t),a)||t.endAt&&!function(d,p,v){const M=fh(d,p,v);return d.inclusive?M>=0:M>0}(t.endAt,Ku(t),a)));var t,a}function wl(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function yh(i){return(e,t)=>{let a=!1;for(const d of Ku(i)){const p=Fg(d,e,t);if(0!==p)return p;a=a||d.field.isKeyField()}return 0}}function Fg(i,e,t){const a=i.field.isKeyField()?qt.comparator(e.key,t.key):function(d,p,v){const M=p.data.field(d),U=v.data.field(d);return null!==M&&null!==U?Fa(M,U):Ot()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Ot()}}class Ua{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[d,p]of a)if(this.equalsFn(d,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),d=this.inner[a];if(void 0===d)return this.inner[a]=[[e,t]],void this.innerSize++;for(let p=0;p<d.length;p++)if(this.equalsFn(d[p][0],e))return void(d[p]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return 1===a.length?delete this.inner[t]:a.splice(d,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,(t,a)=>{for(const[d,p]of a)e(d,p)})}isEmpty(){return tc(this.inner)}size(){return this.innerSize}}const af=new Br(qt.comparator);function xo(){return af}const _h=new Br(qt.comparator);function Zu(...i){let e=_h;for(const t of i)e=e.insert(t.key,t);return e}function up(i){let e=_h;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function nu(){return Md()}function uf(){return Md()}function Md(){return new Ua(i=>i.toString(),(i,e)=>i.isEqual(e))}const lp=new Br(qt.comparator),Xo=new wi(qt.comparator);function Jn(...i){let e=Xo;for(const t of i)e=e.add(t);return e}const Nd=new wi(On);function Hc(){return Nd}function Ws(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function Pd(i){return{integerValue:""+i}}function zc(i,e){return Nc(e)?Pd(e):Ws(i,e)}class Gc{constructor(){this._=void 0}}function Jo(i,e,t){return i instanceof cc?function(a,d){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return d&&Yn(d)&&(d=Cn(d)),d&&(p.fields.__previous_value__=d),{mapValue:p}}(t,e):i instanceof Il?vh(i,e):i instanceof Wc?lf(i,e):function(a,d){const p=cp(a,d),v=ru(p)+ru(a.gt);return hh(p)&&hh(a.gt)?Pd(v):Ws(a.serializer,v)}(i,e)}function xd(i,e,t){return i instanceof Il?vh(i,e):i instanceof Wc?lf(i,e):t}function cp(i,e){return i instanceof Tl?hh(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class cc extends Gc{}class Il extends Gc{constructor(e){super(),this.elements=e}}function vh(i,e){const t=dp(e);for(const a of i.elements)t.some(d=>Ls(d,a))||t.push(a);return{arrayValue:{values:t}}}class Wc extends Gc{constructor(e){super(),this.elements=e}}function lf(i,e){let t=dp(e);for(const a of i.elements)t=t.filter(d=>!Ls(d,a));return{arrayValue:{values:t}}}class Tl extends Gc{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ru(i){return Ft(i.integerValue||i.doubleValue)}function dp(i){return zu(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Cl{constructor(e,t){this.field=e,this.transform=t}}class zm{constructor(e,t){this.version=e,this.transformResults=t}}class Hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hi}static exists(e){return new Hi(void 0,e)}static updateTime(e){return new Hi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ks(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class dc{}function Dl(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Od(i.key,Hi.none()):new Kc(i.key,i.data,Hi.none());{const t=i.data,a=ms.empty();let d=new wi(or.comparator);for(let p of e.fields)if(!d.has(p)){let v=t.field(p);null===v&&p.length>1&&(p=p.popLast(),v=t.field(p)),null===v?a.delete(p):a.set(p,v),d=d.add(p)}return new bl(i.key,a,new W(d.toArray()),Hi.none())}}function cf(i,e,t){i instanceof Kc?function(a,d,p){const v=a.value.clone(),M=Zc(a.fieldTransforms,d,p.transformResults);v.setAll(M),d.convertToFoundDocument(p.version,v).setHasCommittedMutations()}(i,e,t):i instanceof bl?function(a,d,p){if(!Ks(a.precondition,d))return void d.convertToUnknownDocument(p.version);const v=Zc(a.fieldTransforms,d,p.transformResults),M=d.data;M.setAll(qc(a)),M.setAll(v),d.convertToFoundDocument(p.version,M).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ma(i,e,t,a){return i instanceof Kc?function(d,p,v,M){if(!Ks(d.precondition,p))return v;const U=d.value.clone(),z=hp(d.fieldTransforms,M,p);return U.setAll(z),p.convertToFoundDocument(p.version,U).setHasLocalMutations(),null}(i,e,t,a):i instanceof bl?function(d,p,v,M){if(!Ks(d.precondition,p))return v;const U=hp(d.fieldTransforms,M,p),z=p.data;return z.setAll(qc(d)),z.setAll(U),p.convertToFoundDocument(p.version,z).setHasLocalMutations(),null===v?null:v.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(te=>te.field))}(i,e,t,a):(v=t,Ks(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):v);var p,v}function ya(i,e){let t=null;for(const a of i.fieldTransforms){const d=e.data.field(a.field),p=cp(a.transform,d||null);null!=p&&(null===t&&(t=ms.empty()),t.set(a.field,p))}return t||null}function hc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===a||t&&a&&Ao(t,a,(d,p)=>function Hm(i,e){return i.field.isEqual(e.field)&&(a=e.transform,(t=i.transform)instanceof Il&&a instanceof Il||t instanceof Wc&&a instanceof Wc?Ao(t.elements,a.elements,Ls):t instanceof Tl&&a instanceof Tl?Ls(t.gt,a.gt):t instanceof cc&&a instanceof cc);var t,a}(d,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,a}class Kc extends dc{constructor(e,t,a,d=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class bl extends dc{constructor(e,t,a,d,p=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=d,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function qc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function Zc(i,e,t){const a=new Map;vn(i.length===t.length);for(let d=0;d<t.length;d++){const p=i[d],v=p.transform,M=e.data.field(p.field);a.set(p.field,xd(v,M,t[d]))}return a}function hp(i,e,t){const a=new Map;for(const d of i){const p=d.transform,v=t.data.field(d.field);a.set(d.field,Jo(p,v,e))}return a}class Od extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class df extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class T{constructor(e,t,a,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=d}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const p=this.mutations[d];p.key.isEqual(e.key)&&cf(p,e,a[d])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=ma(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=ma(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=uf();return this.mutations.forEach(d=>{const p=e.get(d.key),v=p.overlayedDocument;let M=this.applyToLocalView(v,p.mutatedFields);M=t.has(d.key)?null:M;const U=Dl(v,M);null!==U&&a.set(d.key,U),v.isValidDocument()||v.convertToNoDocument(wn.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jn())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(t,a)=>hc(t,a))&&Ao(this.baseMutations,e.baseMutations,(t,a)=>hc(t,a))}}class m{constructor(e,t,a,d){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=d}static from(e,t,a){vn(e.mutations.length===a.length);let d=lp;const p=e.mutations;for(let v=0;v<p.length;v++)d=d.insert(p[v].key,a[v].version);return new m(e,t,a,d)}}class _{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class V{constructor(e,t){this.count=e,this.unchangedNames=t}}var Z,ye;function Ke(i){switch(i){default:return Ot();case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0}}function Nt(i){if(void 0===i)return Pr("GRPC error has no .code"),it.UNKNOWN;switch(i){case Z.OK:return it.OK;case Z.CANCELLED:return it.CANCELLED;case Z.UNKNOWN:return it.UNKNOWN;case Z.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case Z.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case Z.INTERNAL:return it.INTERNAL;case Z.UNAVAILABLE:return it.UNAVAILABLE;case Z.UNAUTHENTICATED:return it.UNAUTHENTICATED;case Z.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case Z.NOT_FOUND:return it.NOT_FOUND;case Z.ALREADY_EXISTS:return it.ALREADY_EXISTS;case Z.PERMISSION_DENIED:return it.PERMISSION_DENIED;case Z.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case Z.ABORTED:return it.ABORTED;case Z.OUT_OF_RANGE:return it.OUT_OF_RANGE;case Z.UNIMPLEMENTED:return it.UNIMPLEMENTED;case Z.DATA_LOSS:return it.DATA_LOSS;default:return Ot()}}(ye=Z||(Z={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";class Gt{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return on}static getOrCreateInstance(){return null===on&&(on=new Gt),on}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let on=null;function fn(){return new TextEncoder}const Li=new Na([4294967295,4294967295],0);function Ba(i){const e=fn().encode(i),t=new _d;return t.update(e),new Uint8Array(t.digest())}function Yc(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),d=e.getUint32(8,!0),p=e.getUint32(12,!0);return[new Na([t,a],0),new Na([d,p],0)]}class fc{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Sl(`Invalid padding: ${t}`);if(a<0)throw new Sl(`Invalid hash count: ${a}`);if(e.length>0&&0===this.hashCount)throw new Sl(`Invalid hash count: ${a}`);if(0===e.length&&0!==t)throw new Sl(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Na.fromNumber(this.It)}Et(e,t,a){let d=e.add(t.multiply(Na.fromNumber(a)));return 1===d.compare(Li)&&(d=new Na([d.getBits(0),d.getBits(1)],0)),d.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Ba(e),[a,d]=Yc(t);for(let p=0;p<this.hashCount;p++){const v=this.Et(a,d,p);if(!this.At(v))return!1}return!0}static create(e,t,a){const d=e%8==0?0:8-e%8,p=new Uint8Array(Math.ceil(e/8)),v=new fc(p,d,t);return a.forEach(M=>v.insert(M)),v}insert(e){if(0===this.It)return;const t=Ba(e),[a,d]=Yc(t);for(let p=0;p<this.hashCount;p++){const v=this.Et(a,d,p);this.Rt(v)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Al{constructor(e,t,a,d,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=d,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const d=new Map;return d.set(e,Vr.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Al(wn.min(),d,new Br(On),xo(),Jn())}}class Vr{constructor(e,t,a,d,p){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=d,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Vr(a,t,Jn(),Jn(),Jn())}}class _r{constructor(e,t,a,d){this.Pt=e,this.removedTargetIds=t,this.key=a,this.bt=d}}class ir{constructor(e,t){this.targetId=e,this.Vt=t}}class Cu{constructor(e,t,a=ze.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=d}}class oi{constructor(){this.St=0,this.Dt=Yu(),this.Ct=ze.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Jn(),t=Jn(),a=Jn();return this.Dt.forEach((d,p)=>{switch(p){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:a=a.add(d);break;default:Ot()}}),new Vr(this.Ct,this.xt,e,t,a)}Ft(){this.Nt=!1,this.Dt=Yu()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Qc{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=xo(),this.zt=fp(),this.Wt=new Br(On)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const a=this.Zt(t);switch(e.state){case 0:this.te(t)&&a.$t(e.resumeToken);break;case 1:a.Ut(),a.kt||a.Ft(),a.$t(e.resumeToken);break;case 2:a.Ut(),a.kt||this.removeTarget(t);break;case 3:this.te(t)&&(a.Kt(),a.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),a.$t(e.resumeToken));break;default:Ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((a,d)=>{this.te(d)&&t(d)})}ne(e){var t;const a=e.targetId,d=e.Vt.count,p=this.se(a);if(p){const v=p.target;if(oc(v))if(0===d){const M=new qt(v.path);this.Yt(a,M,Mi.newNoDocument(M,wn.min()))}else vn(1===d);else{const M=this.ie(a);if(M!==d){const U=this.re(e,M);0!==U&&(this.ee(a),this.Wt=this.Wt.insert(a,2===U?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Gt.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(z,te,Ee){var rt,_t,zt,an,dn,lr;const ci={localCacheCount:te,existenceFilterCount:Ee.count},vr=Ee.unchangedNames;return vr&&(ci.bloomFilter={applied:0===z,hashCount:null!==(rt=vr?.hashCount)&&void 0!==rt?rt:0,bitmapLength:null!==(an=null===(zt=null===(_t=vr?.bits)||void 0===_t?void 0:_t.bitmap)||void 0===zt?void 0:zt.length)&&void 0!==an?an:0,padding:null!==(lr=null===(dn=vr?.bits)||void 0===dn?void 0:dn.padding)&&void 0!==lr?lr:0}),ci}(U,M,e.Vt))}}}}re(e,t){const{unchangedNames:a,count:d}=e.Vt;if(!a||!a.bits)return 1;const{bits:{bitmap:p="",padding:v=0},hashCount:M=0}=a;let U,z;try{U=sn(p).toUint8Array()}catch(te){if(te instanceof ce)return ps("Decoding the base64 bloom filter in existence filter failed ("+te.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw te}try{z=new fc(U,v,M)}catch(te){return ps(te instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",te),1}return 0===z.It?1:d!==t-this.oe(e.targetId,z)?2:0}oe(e,t){const a=this.Gt.getRemoteKeysForTarget(e);let d=0;return a.forEach(p=>{const v=this.Gt.ue(),M=`projects/${v.projectId}/databases/${v.database}/documents/${p.path.canonicalString()}`;t.vt(M)||(this.Yt(e,p,null),d++)}),d}ce(e){const t=new Map;this.Qt.forEach((p,v)=>{const M=this.se(v);if(M){if(p.current&&oc(M.target)){const U=new qt(M.target.path);null!==this.jt.get(U)||this.ae(v,U)||this.Yt(v,U,Mi.newNoDocument(U,e))}p.Mt&&(t.set(v,p.Ot()),p.Ft())}});let a=Jn();this.zt.forEach((p,v)=>{let M=!0;v.forEachWhile(U=>{const z=this.se(U);return!z||"TargetPurposeLimboResolution"===z.purpose||(M=!1,!1)}),M&&(a=a.add(p))}),this.jt.forEach((p,v)=>v.setReadTime(e));const d=new Al(e,t,this.Wt,this.jt,a);return this.jt=xo(),this.zt=fp(),this.Wt=new Br(On),d}Jt(e,t){if(!this.te(e))return;const a=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,a),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,a){if(!this.te(e))return;const d=this.Zt(e);this.ae(e,t)?d.Bt(t,1):d.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),a&&(this.jt=this.jt.insert(t,a))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new oi,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new wi(On),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||At("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new oi),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function fp(){return new Br(qt.comparator)}function Yu(){return new Br(qt.comparator)}const kd={asc:"ASCENDING",desc:"DESCENDING"},ys={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ar={and:"AND",or:"OR"};class Va{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gm(i,e){return i.useProto3Json||xa(e)?e:{value:e}}function Ld(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iu(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function d_(i,e){return Ld(i,e.toTimestamp())}function _s(i){return vn(!!i),wn.fromTimestamp(function(e){const t=en(e);return new ii(t.seconds,t.nanos)}(i))}function pp(i,e){return(t=i,new qn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Fd(i){const e=qn.fromString(i);return vn(m_(e)),e}function Rl(i,e){return pp(i.databaseId,e.path)}function Qu(i,e){const t=Fd(e);if(t.get(1)!==i.databaseId.projectId)throw new Et(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Et(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new qt(f_(t))}function hf(i,e){return pp(i.databaseId,e)}function h_(i){const e=Fd(i);return 4===e.length?qn.emptyPath():f_(e)}function Ud(i){return new qn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function f_(i){return vn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ff(i,e,t){return{name:Rl(i,e),fields:t.value.mapValue.fields}}function gp(i,e,t){const a=Qu(i,e.name),d=_s(e.updateTime),p=e.createTime?_s(e.createTime):wn.min(),v=new ms({mapValue:{fields:e.fields}}),M=Mi.newFoundDocument(a,d,p,v);return t&&M.setHasCommittedMutations(),t?M.setHasCommittedMutations():M}function mr(i,e){let t;if(e instanceof Kc)t={update:ff(i,e.key,e.value)};else if(e instanceof Od)t={delete:Rl(i,e.key)};else if(e instanceof bl)t={update:ff(i,e.key,e.data),updateMask:hv(e.fieldMask)};else{if(!(e instanceof df))return Ot();t={verify:Rl(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(d,p){const v=p.transform;if(v instanceof cc)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Il)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Wc)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Tl)return{fieldPath:p.field.canonicalString(),increment:v.gt};throw Ot()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:d_(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:Ot()),t;var d}function Eh(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?Hi.updateTime(_s(d.updateTime)):void 0!==d.exists?Hi.exists(d.exists):Hi.none():Hi.none(),a=e.updateTransforms?e.updateTransforms.map(d=>function(p,v){let M=null;"setToServerValue"in v?(vn("REQUEST_TIME"===v.setToServerValue),M=new cc):"appendMissingElements"in v?M=new Il(v.appendMissingElements.values||[]):"removeAllFromArray"in v?M=new Wc(v.removeAllFromArray.values||[]):"increment"in v?M=new Tl(p,v.increment):Ot();const U=or.fromServerFormat(v.fieldPath);return new Cl(U,M)}(i,d)):[];var d;if(e.update){const d=Qu(i,e.update.name),p=new ms({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new W((e.updateMask.fieldPaths||[]).map(z=>or.fromServerFormat(z)));return new bl(d,p,v,t,a)}return new Kc(d,p,t,a)}if(e.delete){const d=Qu(i,e.delete);return new Od(d,t)}if(e.verify){const d=Qu(i,e.verify);return new df(d,t)}return Ot()}function Wm(i,e){return{documents:[hf(i,e.path)]}}function Xu(i,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=hf(i,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=hf(i,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const d=function(U){if(0!==U.length)return g_(Jr.create(U,"and"))}(e.filters);d&&(t.structuredQuery.where=d);const p=function(U){if(0!==U.length)return U.map(z=>{return{field:Xc((te=z).field),direction:qs(te.dir)};var te})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const v=Gm(i,e.limit);var M,U;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(t.structuredQuery.endAt={before:!(U=e.endAt).inclusive,values:U.position}),t}function yp(i){let e=h_(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let d=null;if(a>0){vn(1===a);const te=t.from[0];te.allDescendants?d=te.collectionId:e=e.child(te.collectionId)}let p=[];t.where&&(p=function(te){const Ee=p_(te);return Ee instanceof Jr&&rc(Ee)?Ee.getFilters():[Ee]}(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(te=>{return new Cd(vp((Ee=te).field),function(rt){switch(rt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ee.direction));var Ee}));let M=null;t.limit&&(M=function(te){let Ee;return Ee="object"==typeof te?te.value:te,xa(Ee)?null:Ee}(t.limit));let U=null;var te;t.startAt&&(U=new Gu((te=t.startAt).values||[],!!te.before));let z=null;return t.endAt&&(z=function(te){return new Gu(te.values||[],!te.before)}(t.endAt)),mh(e,d,v,p,M,"F",U,z)}function p_(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=vp(e.unaryFilter.field);return Or.create(t,"==",{doubleValue:NaN});case"IS_NULL":const a=vp(e.unaryFilter.field);return Or.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=vp(e.unaryFilter.field);return Or.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=vp(e.unaryFilter.field);return Or.create(p,"!=",{nullValue:"NULL_VALUE"});default:return Ot()}}(i):void 0!==i.fieldFilter?Or.create(vp((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ot()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return Jr.create(e.compositeFilter.filters.map(t=>p_(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ot()}}(e.compositeFilter.op))}(i):Ot();var e}function qs(i){return kd[i]}function _p(i){return ys[i]}function Km(i){return Ar[i]}function Xc(i){return{fieldPath:i.canonicalString()}}function vp(i){return or.fromServerFormat(i.fieldPath)}function g_(i){return i instanceof Or?function(e){if("=="===e.op){if(Ng(e.value))return{unaryFilter:{field:Xc(e.field),op:"IS_NAN"}};if(jm(e.value))return{unaryFilter:{field:Xc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ng(e.value))return{unaryFilter:{field:Xc(e.field),op:"IS_NOT_NAN"}};if(jm(e.value))return{unaryFilter:{field:Xc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xc(e.field),op:_p(e.op),value:e.value}}}(i):i instanceof Jr?function(e){const t=e.getFilters().map(a=>g_(a));return 1===t.length?t[0]:{compositeFilter:{op:Km(e.op),filters:t}}}(i):Ot()}function hv(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function m_(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class ja{constructor(e,t,a,d,p=wn.min(),v=wn.min(),M=ze.EMPTY_BYTE_STRING,U=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=d,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=M,this.expectedCount=U}withSequenceNumber(e){return new ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qm{constructor(e){this.fe=e}}function __(i,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Rl(d=i.fe,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Ld(d,p.version.toTimestamp()),createTime:Ld(d,p.createTime.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:Jc(e.version)};else{if(!e.isUnknownDocument())return Ot();a.unknownDocument={path:t.path.toArray(),version:Jc(e.version)}}var d,p;return a}function Bg(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Jc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rr(i){const e=new ii(i.seconds,i.nanoseconds);return wn.fromTimestamp(e)}function Nl(i,e){const t=(e.baseMutations||[]).map(p=>Eh(i.fe,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const a=e.mutations.map(p=>Eh(i.fe,p)),d=ii.fromMillis(e.localWriteTimeMs);return new T(e.batchId,d,t,a)}function pf(i){const e=Rr(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Rr(i.lastLimboFreeSnapshotVersion):wn.min();let a;var d;return void 0!==i.query.documents?(vn(1===(d=i.query).documents.length),a=Po(jc(h_(d.documents[0])))):a=Po(yp(i.query)),new ja(a,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,ze.fromBase64String(i.resumeToken))}function gf(i,e){const t=Jc(e.snapshotVersion),a=Jc(e.lastLimboFreeSnapshotVersion);let d;d=oc(e.target)?Wm(i.fe,e.target):Xu(i.fe,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vc(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:d}}function mf(i){const e=yp({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?$c(e,e.limit,"L"):e}function wh(i,e){return new _(e.largestBatchId,Eh(i.fe,e.overlayMutation))}function ed(i,e){const t=e.path.lastSegment();return[i,As(e.path.popLast()),t]}function Ep(i,e,t,a){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Jc(a.readTime),documentKey:As(a.documentKey.path),largestBatchId:a.largestBatchId}}class hr{getBundleMetadata(e,t){return Vg(e).get(t).next(a=>{if(a)return{id:(d=a).bundleId,createTime:Rr(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Vg(e).put({bundleId:(a=t).id,createTime:Jc(_s(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return wp(e).get(t).next(a=>{if(a)return{name:(d=a).name,query:mf(d.bundledQuery),readTime:Rr(d.readTime)};var d})}saveNamedQuery(e,t){return wp(e).put({name:(a=t).name,readTime:Jc(_s(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Vg(i){return $s(i,"bundles")}function wp(i){return $s(i,"namedQueries")}class Zm{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Zm(e,t.uid||"")}getOverlay(e,t){return zi(e).get(ed(this.userId,t)).next(a=>a?wh(this.serializer,a):null)}getOverlays(e,t){const a=nu();return pe.forEach(t,d=>this.getOverlay(e,d).next(p=>{null!==p&&a.set(d,p)})).next(()=>a)}saveOverlays(e,t,a){const d=[];return a.forEach((p,v)=>{const M=new _(t,v);d.push(this.we(e,M))}),pe.waitFor(d)}removeOverlaysForBatchId(e,t,a){const d=new Set;t.forEach(v=>d.add(As(v.getCollectionPath())));const p=[];return d.forEach(v=>{const M=IDBKeyRange.bound([this.userId,v,a],[this.userId,v,a+1],!1,!0);p.push(zi(e).J("collectionPathOverlayIndex",M))}),pe.waitFor(p)}getOverlaysForCollection(e,t,a){const d=nu(),p=As(t),v=IDBKeyRange.bound([this.userId,p,a],[this.userId,p,Number.POSITIVE_INFINITY],!0);return zi(e).j("collectionPathOverlayIndex",v).next(M=>{for(const U of M){const z=wh(this.serializer,U);d.set(z.getKey(),z)}return d})}getOverlaysForCollectionGroup(e,t,a,d){const p=nu();let v;const M=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zi(e).X({index:"collectionGroupOverlayIndex",range:M},(U,z,te)=>{const Ee=wh(this.serializer,z);p.size()<d||Ee.largestBatchId===v?(p.set(Ee.getKey(),Ee),v=Ee.largestBatchId):te.done()}).next(()=>p)}we(e,t){return zi(e).put(function(a,d,p){const[v,M,U]=ed(d,p.mutation.key);return{userId:d,collectionPath:M,documentId:U,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:mr(a.fe,p.mutation)}}(this.serializer,this.userId,t))}}function zi(i){return $s(i,"documentOverlays")}class td{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ft(e.integerValue));else if("doubleValue"in e){const a=Ft(e.doubleValue);isNaN(a)?this.ye(t,13):(this.ye(t,15),Ql(a)?t.pe(0):t.pe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ye(t,20),"string"==typeof a?t.Ie(a):(t.Ie(`${a.seconds||""}`),t.pe(a.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(sn(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.ye(t,45),t.pe(a.latitude||0),t.pe(a.longitude||0)}else"mapValue"in e?Pg(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ot()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const a=e.fields||{};this.ye(t,55);for(const d of Object.keys(a))this.Te(d,t),this.me(a[d],t)}Pe(e,t){const a=e.values||[];this.ye(t,50);for(const d of a)this.me(d,t)}ve(e,t){this.ye(t,37),qt.fromName(e).path.forEach(a=>{this.ye(t,60),this.be(a,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function fv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function jg(i){const e=64-function(t){let a=0;for(let d=0;d<8;++d){const p=fv(255&t[d]);if(a+=p,8!==p)break}return a}(i);return Math.ceil(e/8)}td.Ve=new td;class v_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.De(a.value),a=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Ne(a.value),a=t.next();this.ke()}Me(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.De(a);else if(a<2048)this.De(960|a>>>6),this.De(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.De(480|a>>>12),this.De(128|63&a>>>6),this.De(128|63&a);else{const d=t.codePointAt(0);this.De(240|d>>>18),this.De(128|63&d>>>12),this.De(128|63&d>>>6),this.De(128|63&d)}}this.Ce()}$e(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Ne(a);else if(a<2048)this.Ne(960|a>>>6),this.Ne(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a);else{const d=t.codePointAt(0);this.Ne(240|d>>>18),this.Ne(128|63&d>>>12),this.Ne(128|63&d>>>6),this.Ne(128|63&d)}}this.ke()}Oe(e){const t=this.Fe(e),a=jg(t);this.Be(1+a),this.buffer[this.position++]=255&a;for(let d=t.length-a;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Le(e){const t=this.Fe(e),a=jg(t);this.Be(1+a),this.buffer[this.position++]=~(255&a);for(let d=t.length-a;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(d){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,d,!1),new Uint8Array(p.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let d=1;d<t.length;++d)t[d]^=a?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const d=new Uint8Array(a);d.set(this.buffer),this.buffer=d}}class Ih{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Vd{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class nd{constructor(){this.je=new v_,this.ze=new Ih(this.je),this.We=new Vd(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class rd{constructor(e,t,a,d){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=d}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new rd(this.indexId,this.documentKey,this.arrayValue,a)}}function pc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Pl(i.arrayValue,e.arrayValue),0!==t?t:(t=Pl(i.directionalValue,e.directionalValue),0!==t?t:qt.comparator(i.documentKey,e.documentKey)))}function Pl(i,e){for(let t=0;t<i.length&&t<e.length;++t){const a=i[t]-e[t];if(0!==a)return a}return i.length-e.length}class pv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const a=t;a.isInequality()?this.Ze=a:this.Xe.push(a)}}tn(e){vn(e.collectionGroup===this.collectionId);const t=ca(e);if(void 0!==t&&!this.en(t))return!1;const a=Ro(e);let d=new Set,p=0,v=0;for(;p<a.length&&this.en(a[p]);++p)d=d.add(a[p].fieldPath.canonicalString());if(p===a.length)return!0;if(void 0!==this.Ze){if(!d.has(this.Ze.field.canonicalString())){const M=a[p];if(!this.nn(this.Ze,M)||!this.sn(this.Ye[v++],M))return!1}++p}for(;p<a.length;++p)if(v>=this.Ye.length||!this.sn(this.Ye[v++],a[p]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ip(i){var e,t;if(vn(i instanceof Or||i instanceof Jr),i instanceof Or){if(i instanceof Hs){const d=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(p=>Or.create(i.field,"==",p)))||[];return Jr.create(d,"or")}return i}const a=i.filters.map(d=>Ip(d));return Jr.create(a,i.op)}function E_(i){if(0===i.getFilters().length)return[];const e=Qm(Ip(i));return vn(Hg(e)),$g(e)||Ym(e)?[e]:e.getFilters()}function $g(i){return i instanceof Or}function Ym(i){return i instanceof Jr&&rc(i)}function Hg(i){return $g(i)||Ym(i)||function(e){if(e instanceof Jr&&Iu(e)){for(const t of e.getFilters())if(!$g(t)&&!Ym(t))return!1;return!0}return!1}(i)}function Qm(i){if(vn(i instanceof Or||i instanceof Jr),i instanceof Or)return i;if(1===i.filters.length)return Qm(i.filters[0]);const e=i.filters.map(a=>Qm(a));let t=Jr.create(e,i.op);return t=yf(t),Hg(t)?t:(vn(t instanceof Jr),vn(nc(t)),vn(t.filters.length>1),t.filters.reduce((a,d)=>Tp(a,d)))}function Tp(i,e){let t;return vn(i instanceof Or||i instanceof Jr),vn(e instanceof Or||e instanceof Jr),t=i instanceof Or?e instanceof Or?Jr.create([i,e],"and"):Xm(i,e):e instanceof Or?Xm(e,i):function(a,d){if(vn(a.filters.length>0&&d.filters.length>0),nc(a)&&nc(d))return Uc(a,d.getFilters());const p=Iu(a)?a:d,v=Iu(a)?d:a,M=p.filters.map(U=>Tp(U,v));return Jr.create(M,"or")}(i,e),yf(t)}function Xm(i,e){if(nc(e))return Uc(e,i.getFilters());{const t=e.filters.map(a=>Tp(i,a));return Jr.create(t,"or")}}function yf(i){if(vn(i instanceof Or||i instanceof Jr),i instanceof Or)return i;const e=i.getFilters();if(1===e.length)return yf(e[0]);if(nf(i))return i;const t=e.map(d=>yf(d)),a=[];return t.forEach(d=>{d instanceof Or?a.push(d):d instanceof Jr&&(d.op===i.op?a.push(...d.filters):a.push(d))}),1===a.length?a[0]:Jr.create(a,i.op)}class gv{constructor(){this.rn=new jd}addToCollectionParentIndex(e,t){return this.rn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(C.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(C.min())}updateCollectionGroup(e,t,a){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class jd{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),d=this.index[t]||new wi(qn.comparator),p=!d.has(a);return this.index[t]=d.add(a),p}has(e){const t=e.lastSegment(),a=e.popLast(),d=this.index[t];return d&&d.has(a)}getEntries(e){return(this.index[e]||new wi(qn.comparator)).toArray()}}const Gr=new Uint8Array(0);class Cp{constructor(e,t){this.user=e,this.databaseId=t,this.on=new jd,this.un=new Ua(a=>Vc(a),(a,d)=>sc(a,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const a=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const p={collectionId:a,parent:As(d)};return _f(e).put(p)}return pe.resolve()}getCollectionParents(e,t){const a=[],d=IDBKeyRange.bound([t,""],[Yl(t),""],!1,!0);return _f(e).j(d).next(p=>{for(const v of p){if(v.collectionId!==t)break;a.push(Oa(v.parent))}return a})}addFieldIndex(e,t){const a=Th(e),d={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var v;delete d.indexId;const p=a.add(d);if(t.indexState){const v=id(e);return p.next(M=>{v.put(Ep(M,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const a=Th(e),d=id(e),p=xl(e);return a.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=xl(e);let d=!0;const p=new Map;return pe.forEach(this.cn(t),v=>this.an(e,v).next(M=>{d&&(d=!!M),p.set(v,M)})).next(()=>{if(d){let v=Jn();const M=[];return pe.forEach(p,(U,z)=>{var te;At("IndexedDbIndexManager",`Using index ${te=U,`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map(vr=>`${vr.fieldPath}:${vr.kind}`).join(",")}`} to execute ${Vc(t)}`);const Ee=function(vr,Zs){const Zi=ca(Zs);if(void 0===Zi)return null;for(const ns of Wu(vr,Zi.fieldPath))switch(ns.op){case"array-contains-any":return ns.value.arrayValue.values||[];case"array-contains":return[ns.value]}return null}(z,U),rt=function(vr,Zs){const Zi=new Map;for(const ns of Ro(Zs))for(const Ka of Wu(vr,ns.fieldPath))switch(Ka.op){case"==":case"in":Zi.set(ns.fieldPath.canonicalString(),Ka.value);break;case"not-in":case"!=":return Zi.set(ns.fieldPath.canonicalString(),Ka.value),Array.from(Zi.values())}return null}(z,U),_t=function(vr,Zs){const Zi=[];let ns=!0;for(const Ka of Ro(Zs)){const ep=0===Ka.kind?El(vr,Ka.fieldPath,vr.startAt):eu(vr,Ka.fieldPath,vr.startAt);Zi.push(ep.value),ns&&(ns=ep.inclusive)}return new Gu(Zi,ns)}(z,U),zt=function(vr,Zs){const Zi=[];let ns=!0;for(const Ka of Ro(Zs)){const ep=0===Ka.kind?eu(vr,Ka.fieldPath,vr.endAt):El(vr,Ka.fieldPath,vr.endAt);Zi.push(ep.value),ns&&(ns=ep.inclusive)}return new Gu(Zi,ns)}(z,U),an=this.hn(U,z,_t),dn=this.hn(U,z,zt),lr=this.ln(U,z,rt),ci=this.fn(U.indexId,Ee,an,_t.inclusive,dn,zt.inclusive,lr);return pe.forEach(ci,vr=>a.H(vr,t.limit).next(Zs=>{Zs.forEach(Zi=>{const ns=qt.fromSegments(Zi.documentKey);v.has(ns)||(v=v.add(ns),M.push(ns))})}))}).next(()=>M)}return pe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:E_(Jr.create(e.filters,"and")).map(a=>zs(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,a,d,p,v,M){const U=(null!=t?t.length:1)*Math.max(a.length,p.length),z=U/(null!=t?t.length:1),te=[];for(let Ee=0;Ee<U;++Ee){const rt=t?this.dn(t[Ee/z]):Gr,_t=this.wn(e,rt,a[Ee%z],d),zt=this._n(e,rt,p[Ee%z],v),an=M.map(dn=>this.wn(e,rt,dn,!0));te.push(...this.createRange(_t,zt,an))}return te}wn(e,t,a,d){const p=new rd(e,qt.empty(),t,a);return d?p:p.Je()}_n(e,t,a,d){const p=new rd(e,qt.empty(),t,a);return d?p.Je():p}an(e,t){const a=new pv(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(p=>{let v=null;for(const M of p)a.tn(M)&&(!v||M.fields.length>v.fields.length)&&(v=M);return v})}getIndexType(e,t){let a=2;const d=this.cn(t);return pe.forEach(d,p=>this.an(e,p).next(v=>{v?0!==a&&v.fields.length<function(M){let U=new wi(or.comparator),z=!1;for(const te of M.filters)for(const Ee of te.getFlattenedFilters())Ee.field.isKeyField()||("array-contains"===Ee.op||"array-contains-any"===Ee.op?z=!0:U=U.add(Ee.field));for(const te of M.orderBy)te.field.isKeyField()||(U=U.add(te.field));return U.size+(z?1:0)}(p)&&(a=1):a=0})).next(()=>null!==t.limit&&d.length>1&&2===a?1:a)}mn(e,t){const a=new nd;for(const d of Ro(e)){const p=t.data.field(d.fieldPath);if(null==p)return null;const v=a.He(d.kind);td.Ve._e(p,v)}return a.Qe()}dn(e){const t=new nd;return td.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const a=new nd;return td.Ve._e(Rs(this.databaseId,t),a.He(function(d){const p=Ro(d);return 0===p.length?0:p[p.length-1].kind}(e))),a.Qe()}ln(e,t,a){if(null===a)return[];let d=[];d.push(new nd);let p=0;for(const v of Ro(e)){const M=a[p++];for(const U of d)if(this.yn(t,v.fieldPath)&&zu(M))d=this.pn(d,v,M);else{const z=U.He(v.kind);td.Ve._e(M,z)}}return this.In(d)}hn(e,t,a){return this.ln(e,t,a.position)}In(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].Qe();return t}pn(e,t,a){const d=[...e],p=[];for(const v of a.arrayValue.values||[])for(const M of d){const U=new nd;U.seed(M.Qe()),td.Ve._e(v,U.He(t.kind)),p.push(U)}return p}yn(e,t){return!!e.filters.find(a=>a instanceof Or&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=Th(e),d=id(e);return(t?a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.j()).next(p=>{const v=[];return pe.forEach(p,M=>d.get([M.indexId,this.uid]).next(U=>{v.push(function(z,te){const Ee=te?new Vu(te.sequenceNumber,new C(Rr(te.readTime),new qt(Oa(te.documentKey)),te.largestBatchId)):Vu.empty(),rt=z.fields.map(([_t,zt])=>new Mo(or.fromServerFormat(_t),zt));return new si(z.indexId,z.collectionGroup,rt,Ee)}(M,U))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,d)=>{const p=a.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==p?p:On(a.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const d=Th(e),p=id(e);return this.Tn(e).next(v=>d.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(M=>pe.forEach(M,U=>p.put(Ep(U.indexId,this.user,v,a)))))}updateIndexEntries(e,t){const a=new Map;return pe.forEach(t,(d,p)=>{const v=a.get(d.collectionGroup);return(v?pe.resolve(v):this.getFieldIndexes(e,d.collectionGroup)).next(M=>(a.set(d.collectionGroup,M),pe.forEach(M,U=>this.En(e,d,U).next(z=>{const te=this.An(p,U);return z.isEqual(te)?pe.resolve():this.vn(e,p,U,z,te)}))))})}Rn(e,t,a,d){return xl(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.gn(a,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,a,d){return xl(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.gn(a,t.key),t.key.path.toArray()])}En(e,t,a){const d=xl(e);let p=new wi(pc);return d.X({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.gn(a,t)])},(v,M)=>{p=p.add(new rd(a.indexId,t,M.arrayValue,M.directionalValue))}).next(()=>p)}An(e,t){let a=new wi(pc);const d=this.mn(t,e);if(null==d)return a;const p=ca(t);if(null!=p){const v=e.data.field(p.fieldPath);if(zu(v))for(const M of v.arrayValue.values||[])a=a.add(new rd(t.indexId,e.key,this.dn(M),d))}else a=a.add(new rd(t.indexId,e.key,Gr,d));return a}vn(e,t,a,d,p){At("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(M,U,z,te,Ee){const rt=M.getIterator(),_t=U.getIterator();let zt=L(rt),an=L(_t);for(;zt||an;){let dn=!1,lr=!1;if(zt&&an){const ci=z(zt,an);ci<0?lr=!0:ci>0&&(dn=!0)}else null!=zt?lr=!0:dn=!0;dn?(te(an),an=L(_t)):lr?(Ee(zt),zt=L(rt)):(zt=L(rt),an=L(_t))}}(d,p,pc,M=>{v.push(this.Rn(e,t,a,M))},M=>{v.push(this.Pn(e,t,a,M))}),pe.waitFor(v)}Tn(e){let t=1;return id(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,d,p)=>{p.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((v,M)=>pc(v,M)).filter((v,M,U)=>!M||0!==pc(v,U[M-1]));const d=[];d.push(e);for(const v of a){const M=pc(v,e),U=pc(v,t);if(0===M)d[0]=e.Je();else if(M>0&&U<0)d.push(v),d.push(v.Je());else if(U>0)break}d.push(t);const p=[];for(let v=0;v<d.length;v+=2){if(this.bn(d[v],d[v+1]))return[];p.push(IDBKeyRange.bound([d[v].indexId,this.uid,d[v].arrayValue,d[v].directionalValue,Gr,[]],[d[v+1].indexId,this.uid,d[v+1].arrayValue,d[v+1].directionalValue,Gr,[]]))}return p}bn(e,t){return pc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(w_)}getMinOffset(e,t){return pe.mapArray(this.cn(t),a=>this.an(e,a).next(d=>d||Ot())).next(w_)}}function _f(i){return $s(i,"collectionParents")}function xl(i){return $s(i,"indexEntries")}function Th(i){return $s(i,"indexConfiguration")}function id(i){return $s(i,"indexState")}function w_(i){vn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<i.length;a++){const d=i[a].indexState.offset;N(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new C(e.readTime,e.documentKey,t)}const Jm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oo{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Oo(e,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zg(i,e,t){const a=i.store("mutations"),d=i.store("documentMutations"),p=[],v=IDBKeyRange.only(t.batchId);let M=0;const U=a.X({range:v},(te,Ee,rt)=>(M++,rt.delete()));p.push(U.next(()=>{vn(1===M)}));const z=[];for(const te of t.mutations){const Ee=ka(e,te.key.path,t.batchId);p.push(d.delete(Ee)),z.push(te.key)}return pe.waitFor(p).next(()=>z)}function ey(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Ot();e=i.noDocument}return JSON.stringify(e).length}Oo.DEFAULT_COLLECTION_PERCENTILE=10,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oo.DEFAULT=new Oo(41943040,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oo.DISABLED=new Oo(-1,0,0);class vf{constructor(e,t,a,d){this.userId=e,this.serializer=t,this.indexManager=a,this.referenceDelegate=d,this.Vn={}}static de(e,t,a,d){vn(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new vf(p,t,a,d)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).X({index:"userMutationsIndex",range:a},(d,p,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,a,d){const p=sd(e),v=Ju(e);return v.add({}).next(M=>{vn("number"==typeof M);const U=new T(M,t,a,d),z=function(rt,_t,zt){const an=zt.baseMutations.map(lr=>mr(rt.fe,lr)),dn=zt.mutations.map(lr=>mr(rt.fe,lr));return{userId:_t,batchId:zt.batchId,localWriteTimeMs:zt.localWriteTime.toMillis(),baseMutations:an,mutations:dn}}(this.serializer,this.userId,U),te=[];let Ee=new wi((rt,_t)=>On(rt.canonicalString(),_t.canonicalString()));for(const rt of d){const _t=ka(this.userId,rt.key.path,M);Ee=Ee.add(rt.key.path.popLast()),te.push(v.put(z)),te.push(p.put(_t,lh))}return Ee.forEach(rt=>{te.push(this.indexManager.addToCollectionParentIndex(e,rt))}),e.addOnCommittedListener(()=>{this.Vn[M]=U.keys()}),pe.waitFor(te).next(()=>U)})}lookupMutationBatch(e,t){return Ju(e).get(t).next(a=>a?(vn(a.userId===this.userId),Nl(this.serializer,a)):null)}Sn(e,t){return this.Vn[t]?pe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const d=a.keys();return this.Vn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,d=IDBKeyRange.lowerBound([this.userId,a]);let p=null;return Ju(e).X({index:"userMutationsIndex",range:d},(v,M,U)=>{M.userId===this.userId&&(vn(M.batchId>=a),p=Nl(this.serializer,M)),U.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Ju(e).X({index:"userMutationsIndex",range:t,reverse:!0},(d,p,v)=>{a=p.batchId,v.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).j("userMutationsIndex",t).next(a=>a.map(d=>Nl(this.serializer,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=Pc(this.userId,t.path),d=IDBKeyRange.lowerBound(a),p=[];return sd(e).X({range:d},(v,M,U)=>{const[z,te,Ee]=v,rt=Oa(te);if(z===this.userId&&t.path.isEqual(rt))return Ju(e).get(Ee).next(_t=>{if(!_t)throw Ot();vn(_t.userId===this.userId),p.push(Nl(this.serializer,_t))});U.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new wi(On);const d=[];return t.forEach(p=>{const v=Pc(this.userId,p.path),M=IDBKeyRange.lowerBound(v),U=sd(e).X({range:M},(z,te,Ee)=>{const[rt,_t,zt]=z,an=Oa(_t);rt===this.userId&&p.path.isEqual(an)?a=a.add(zt):Ee.done()});d.push(U)}),pe.waitFor(d).next(()=>this.Dn(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,d=a.length+1,p=Pc(this.userId,a),v=IDBKeyRange.lowerBound(p);let M=new wi(On);return sd(e).X({range:v},(U,z,te)=>{const[Ee,rt,_t]=U,zt=Oa(rt);Ee===this.userId&&a.isPrefixOf(zt)?zt.length===d&&(M=M.add(_t)):te.done()}).next(()=>this.Dn(e,M))}Dn(e,t){const a=[],d=[];return t.forEach(p=>{d.push(Ju(e).get(p).next(v=>{if(null===v)throw Ot();vn(v.userId===this.userId),a.push(Nl(this.serializer,v))}))}),pe.waitFor(d).next(()=>a)}removeMutationBatch(e,t){return zg(e.ht,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),pe.forEach(a,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const a=IDBKeyRange.lowerBound([this.userId]),d=[];return sd(e).X({range:a},(p,v,M)=>{if(p[0]===this.userId){const U=Oa(p[1]);d.push(U)}else M.done()}).next(()=>{vn(0===d.length)})})}containsKey(e,t){return Ol(e,this.userId,t)}xn(e){return Dp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ol(i,e,t){const a=Pc(e,t.path),d=a[1],p=IDBKeyRange.lowerBound(a);let v=!1;return sd(i).X({range:p,Y:!0},(M,U,z)=>{const[te,Ee,rt]=M;te===e&&Ee===d&&(v=!0),z.done()}).next(()=>v)}function Ju(i){return $s(i,"mutations")}function sd(i){return $s(i,"documentMutations")}function Dp(i){return $s(i,"mutationQueues")}class _a{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new _a(0)}static Mn(){return new _a(-1)}}class bp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const a=new _a(t.highestTargetId);return t.highestTargetId=a.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>wn.fromTimestamp(new ii(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.$n(e).next(d=>(d.highestListenSequenceNumber=t,a&&(d.lastRemoteSnapshotVersion=a.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.On(e,d)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(a=>(a.targetCount+=1,this.Bn(t,a),this.On(e,a))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>su(e).delete(t.targetId)).next(()=>this.$n(e)).next(a=>(vn(a.targetCount>0),a.targetCount-=1,this.On(e,a)))}removeTargets(e,t,a){let d=0;const p=[];return su(e).X((v,M)=>{const U=pf(M);U.sequenceNumber<=t&&null===a.get(U.targetId)&&(d++,p.push(this.removeTargetData(e,U)))}).next(()=>pe.waitFor(p)).next(()=>d)}forEachTarget(e,t){return su(e).X((a,d)=>{const p=pf(d);t(p)})}$n(e){return gc(e).get("targetGlobalKey").next(t=>(vn(null!==t),t))}On(e,t){return gc(e).put("targetGlobalKey",t)}Fn(e,t){return su(e).put(gf(this.serializer,t))}Bn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const a=Vc(t),d=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let p=null;return su(e).X({range:d,index:"queryTargetsIndex"},(v,M,U)=>{const z=pf(M);sc(t,z.target)&&(p=z,U.done())}).next(()=>p)}addMatchingKeys(e,t,a){const d=[],p=$a(e);return t.forEach(v=>{const M=As(v.path);d.push(p.put({targetId:a,path:M})),d.push(this.referenceDelegate.addReference(e,a,v))}),pe.waitFor(d)}removeMatchingKeys(e,t,a){const d=$a(e);return pe.forEach(t,p=>{const v=As(p.path);return pe.waitFor([d.delete([a,v]),this.referenceDelegate.removeReference(e,a,p)])})}removeMatchingKeysForTargetId(e,t){const a=$a(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(d)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),d=$a(e);let p=Jn();return d.X({range:a,Y:!0},(v,M,U)=>{const z=Oa(v[1]),te=new qt(z);p=p.add(te)}).next(()=>p)}containsKey(e,t){const a=As(t.path),d=IDBKeyRange.bound([a],[Yl(a)],!1,!0);let p=0;return $a(e).X({index:"documentTargetsIndex",Y:!0,range:d},([v,M],U,z)=>{0!==v&&(p++,z.done())}).next(()=>p>0)}le(e,t){return su(e).get(t).next(a=>a?pf(a):null)}}function su(i){return $s(i,"targets")}function gc(i){return $s(i,"targetGlobal")}function $a(i){return $s(i,"targetDocuments")}function Gg([i,e],[t,a]){const d=On(i,t);return 0===d?On(e,a):d}class Wg{constructor(e){this.Ln=e,this.buffer=new wi(Gg),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Gg(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class el{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;At("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Le.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){da(a)?At("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ie(a)}yield t.Qn(3e5)}))}}class ty{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(Ss.ct);const a=new Wg(t);return this.jn.forEachTarget(e,d=>a.Kn(d.sequenceNumber)).next(()=>this.jn.Wn(e,d=>a.Kn(d))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.jn.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Jm)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jm):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let a,d,p,v,M,U,z;const te=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ee=>(Ee>this.params.maximumSequenceNumbersToCollect?(At("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ee}`),d=this.params.maximumSequenceNumbersToCollect):d=Ee,v=Date.now(),this.nthSequenceNumber(e,d))).next(Ee=>(a=Ee,M=Date.now(),this.removeTargets(e,a,t))).next(Ee=>(p=Ee,U=Date.now(),this.removeOrphanedDocuments(e,a))).next(Ee=>(z=Date.now(),Ds()<=Ze.in.DEBUG&&At("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-te}ms\n\tDetermined least recently used ${d} in `+(M-v)+`ms\n\tRemoved ${p} targets in `+(U-M)+`ms\n\tRemoved ${Ee} documents in `+(z-U)+`ms\nTotal Duration: ${z-te}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:p,documentsRemoved:Ee})))}}class qg{constructor(e,t){this.db=e,this.garbageCollector=function Kg(i,e){return new ty(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(d=>a+d))}Jn(e){let t=0;return this.Wn(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(a,d)=>t(d))}addReference(e,t,a){return $d(e,a)}removeReference(e,t,a){return $d(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return $d(e,t)}Xn(e,t){return function(a,d){let p=!1;return Dp(a).Z(v=>Ol(a,v,d).next(M=>(M&&(p=!0),pe.resolve(!M)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let p=0;return this.Yn(e,(v,M)=>{if(M<=t){const U=this.Xn(e,v).next(z=>{if(!z)return p++,a.getEntry(e,v).next(()=>(a.removeEntry(v,wn.min()),$a(e).delete([0,As(v.path)])))});d.push(U)}}).next(()=>pe.waitFor(d)).next(()=>a.apply(e)).next(()=>p)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return $d(e,t)}Yn(e,t){const a=$a(e);let d,p=Ss.ct;return a.X({index:"documentTargetsIndex"},([v,M],{path:U,sequenceNumber:z})=>{0===v?(p!==Ss.ct&&t(new qt(Oa(d)),p),p=z,d=U):p=Ss.ct}).next(()=>{p!==Ss.ct&&t(new qt(Oa(d)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $d(i,e){return $a(i).put((a=i.currentSequenceNumber,{targetId:0,path:As(e.path),sequenceNumber:a}));var a}class Zg{constructor(){this.changes=new Ua(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?pe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class od{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return ai(e).put(a)}removeEntry(e,t,a){return ai(e).delete(function(d,p){const v=d.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Bg(p),v[v.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Zn(e,a)))}getEntry(e,t){let a=Mi.newInvalidDocument(t);return ai(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(va(t))},(d,p)=>{a=this.ts(t,p)}).next(()=>a)}es(e,t){let a={size:0,document:Mi.newInvalidDocument(t)};return ai(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(va(t))},(d,p)=>{a={document:this.ts(t,p),size:ey(p)}}).next(()=>a)}getEntries(e,t){let a=xo();return this.ns(e,t,(d,p)=>{const v=this.ts(d,p);a=a.insert(d,v)}).next(()=>a)}ss(e,t){let a=xo(),d=new Br(qt.comparator);return this.ns(e,t,(p,v)=>{const M=this.ts(p,v);a=a.insert(p,M),d=d.insert(p,ey(v))}).next(()=>({documents:a,rs:d}))}ns(e,t,a){if(t.isEmpty())return pe.resolve();let d=new wi(Sp);t.forEach(U=>d=d.add(U));const p=IDBKeyRange.bound(va(d.first()),va(d.last())),v=d.getIterator();let M=v.getNext();return ai(e).X({index:"documentKeyIndex",range:p},(U,z,te)=>{const Ee=qt.fromSegments([...z.prefixPath,z.collectionGroup,z.documentId]);for(;M&&Sp(M,Ee)<0;)a(M,null),M=v.getNext();M&&M.isEqual(Ee)&&(a(M,z),M=v.hasNext()?v.getNext():null),M?te.G(va(M)):te.done()}).next(()=>{for(;M;)a(M,null),M=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,t,a,d){const p=t.path,v=[p.popLast().toArray(),p.lastSegment(),Bg(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],M=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ai(e).j(IDBKeyRange.bound(v,M,!0)).next(U=>{let z=xo();for(const te of U){const Ee=this.ts(qt.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);Ee.isFoundDocument()&&(lc(t,Ee)||d.has(Ee.key))&&(z=z.insert(Ee.key,Ee))}return z})}getAllFromCollectionGroup(e,t,a,d){let p=xo();const v=Ef(t,a),M=Ef(t,C.max());return ai(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,M,!0)},(U,z,te)=>{const Ee=this.ts(qt.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);p=p.insert(Ee.key,Ee),p.size===d&&te.done()}).next(()=>p)}newChangeBuffer(e){return new ny(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return I_(e).get("remoteDocumentGlobalKey").next(t=>(vn(!!t),t))}Zn(e,t){return I_(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const a=function y_(i,e){let t;if(e.document)t=gp(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=qt.fromSegments(e.noDocument.path),d=Rr(e.noDocument.readTime);t=Mi.newNoDocument(a,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ot();{const a=qt.fromSegments(e.unknownDocument.path),d=Rr(e.unknownDocument.version);t=Mi.newUnknownDocument(a,d)}}return e.readTime&&t.setReadTime(function(a){const d=new ii(a[0],a[1]);return wn.fromTimestamp(d)}(e.readTime)),t}(this.serializer,t);if(!a.isNoDocument()||!a.version.isEqual(wn.min()))return a}return Mi.newInvalidDocument(e)}}function Hd(i){return new od(i)}class ny extends Zg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ua(a=>a.toString(),(a,d)=>a.isEqual(d))}applyChanges(e){const t=[];let a=0,d=new wi((p,v)=>On(p.canonicalString(),v.canonicalString()));return this.changes.forEach((p,v)=>{const M=this.us.get(p);if(t.push(this.os.removeEntry(e,p,M.readTime)),v.isValidDocument()){const U=__(this.os.serializer,v);d=d.add(p.path.popLast());const z=ey(U);a+=z-M.size,t.push(this.os.addEntry(e,p,U))}else if(a-=M.size,this.trackRemovals){const U=__(this.os.serializer,v.convertToNoDocument(wn.min()));t.push(this.os.addEntry(e,p,U))}}),d.forEach(p=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.os.updateMetadata(e,a)),pe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(a=>(this.us.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:a,rs:d})=>(d.forEach((p,v)=>{this.us.set(p,{size:v,readTime:a.get(p).readTime})}),a))}}function I_(i){return $s(i,"remoteDocumentGlobal")}function ai(i){return $s(i,"remoteDocumentsV14")}function va(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ef(i,e){const t=e.documentKey.path.toArray();return[i,Bg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sp(i,e){const t=i.path.toArray(),a=e.path.toArray();let d=0;for(let p=0;p<t.length-2&&p<a.length-2;++p)if(d=On(t[p],a[p]),d)return d;return d=On(t.length,a.length),d||(d=On(t[t.length-2],a[a.length-2]),d||On(t[t.length-1],a[a.length-1]))}class Yg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ry{constructor(e,t,a,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=d}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(a=d,this.remoteDocumentCache.getEntry(e,t))).next(d=>(null!==a&&ma(a.mutation,d,W.empty(),ii.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Jn()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Jn()){const d=nu();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,a).next(p=>{let v=Zu();return p.forEach((M,U)=>{v=v.insert(M,U.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const a=nu();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Jn()))}populateOverlays(e,t,a){const d=[];return a.forEach(p=>{t.has(p)||d.push(p)}),this.documentOverlayCache.getOverlays(e,d).next(p=>{p.forEach((v,M)=>{t.set(v,M)})})}computeViews(e,t,a,d){let p=xo();const v=Md(),M=Md();return t.forEach((U,z)=>{const te=a.get(z.key);d.has(z.key)&&(void 0===te||te.mutation instanceof bl)?p=p.insert(z.key,z):void 0!==te?(v.set(z.key,te.mutation.getFieldMask()),ma(te.mutation,z,te.mutation.getFieldMask(),ii.now())):v.set(z.key,W.empty())}),this.recalculateAndSaveOverlays(e,p).next(U=>(U.forEach((z,te)=>v.set(z,te)),t.forEach((z,te)=>{var Ee;return M.set(z,new Yg(te,null!==(Ee=v.get(z))&&void 0!==Ee?Ee:null))}),M))}recalculateAndSaveOverlays(e,t){const a=Md();let d=new Br((v,M)=>v-M),p=Jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const M of v)M.keys().forEach(U=>{const z=t.get(U);if(null===z)return;let te=a.get(U)||W.empty();te=M.applyToLocalView(z,te),a.set(U,te);const Ee=(d.get(M.batchId)||Jn()).add(U);d=d.insert(M.batchId,Ee)})}).next(()=>{const v=[],M=d.getReverseIterator();for(;M.hasNext();){const U=M.getNext(),z=U.key,te=U.value,Ee=uf();te.forEach(rt=>{if(!p.has(rt)){const _t=Dl(t.get(rt),a.get(rt));null!==_t&&Ee.set(rt,_t),p=p.add(rt)}}),v.push(this.documentOverlayCache.saveOverlays(e,z,Ee))}return pe.waitFor(v)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return qt.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):uc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var d}getNextDocuments(e,t,a,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,d).next(p=>{const v=d-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,d-p.size):pe.resolve(nu());let M=-1,U=p;return v.next(z=>pe.forEach(z,(te,Ee)=>(M<Ee.largestBatchId&&(M=Ee.largestBatchId),p.get(te)?pe.resolve():this.remoteDocumentCache.getEntry(e,te).next(rt=>{U=U.insert(te,rt)}))).next(()=>this.populateOverlays(e,z,p)).next(()=>this.computeViews(e,U,z,Jn())).next(te=>({batchId:M,changes:up(te)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qt(t)).next(a=>{let d=Zu();return a.isFoundDocument()&&(d=d.insert(a.key,a)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const d=t.collectionGroup;let p=Zu();return this.indexManager.getCollectionParents(e,d).next(v=>pe.forEach(v,M=>{const U=(z=t,te=M.child(d),new ac(te,null,z.explicitOrderBy.slice(),z.filters.slice(),z.limit,z.limitType,z.startAt,z.endAt));var z,te;return this.getDocumentsMatchingCollectionQuery(e,U,a).next(z=>{z.forEach((te,Ee)=>{p=p.insert(te,Ee)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,a){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(p=>(d=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,d))).next(p=>{d.forEach((M,U)=>{const z=U.getKey();null===p.get(z)&&(p=p.insert(z,Mi.newInvalidDocument(z)))});let v=Zu();return p.forEach((M,U)=>{const z=d.get(M);void 0!==z&&ma(z.mutation,U,W.empty(),ii.now()),lc(t,U)&&(v=v.insert(M,U))}),v})}}class Ch{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return pe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var a;return this.cs.set(t.id,{id:(a=t).id,version:a.version,createTime:_s(a.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(a=t).name,query:mf(a.bundledQuery),readTime:_s(a.readTime)}),pe.resolve();var a}}class T_{constructor(){this.overlays=new Br(qt.comparator),this.ls=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=nu();return pe.forEach(t,d=>this.getOverlay(e,d).next(p=>{null!==p&&a.set(d,p)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((d,p)=>{this.we(e,t,p)}),pe.resolve()}removeOverlaysForBatchId(e,t,a){const d=this.ls.get(a);return void 0!==d&&(d.forEach(p=>this.overlays=this.overlays.remove(p)),this.ls.delete(a)),pe.resolve()}getOverlaysForCollection(e,t,a){const d=nu(),p=t.length+1,v=new qt(t.child("")),M=this.overlays.getIteratorFrom(v);for(;M.hasNext();){const U=M.getNext().value,z=U.getKey();if(!t.isPrefixOf(z.path))break;z.path.length===p&&U.largestBatchId>a&&d.set(U.getKey(),U)}return pe.resolve(d)}getOverlaysForCollectionGroup(e,t,a,d){let p=new Br((z,te)=>z-te);const v=this.overlays.getIterator();for(;v.hasNext();){const z=v.getNext().value;if(z.getKey().getCollectionGroup()===t&&z.largestBatchId>a){let te=p.get(z.largestBatchId);null===te&&(te=nu(),p=p.insert(z.largestBatchId,te)),te.set(z.getKey(),z)}}const M=nu(),U=p.getIterator();for(;U.hasNext()&&(U.getNext().value.forEach((z,te)=>M.set(z,te)),!(M.size()>=d)););return pe.resolve(M)}we(e,t,a){const d=this.overlays.get(a.key);if(null!==d){const v=this.ls.get(d.largestBatchId).delete(a.key);this.ls.set(d.largestBatchId,v)}this.overlays=this.overlays.insert(a.key,new _(t,a));let p=this.ls.get(t);void 0===p&&(p=Jn(),this.ls.set(t,p)),this.ls.set(t,p.add(a.key))}}class mc{constructor(){this.fs=new wi(yo.ds),this.ws=new wi(yo._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const a=new yo(e,t);this.fs=this.fs.add(a),this.ws=this.ws.add(a)}gs(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.ys(new yo(e,t))}ps(e,t){e.forEach(a=>this.removeReference(a,t))}Is(e){const t=new qt(new qn([])),a=new yo(t,e),d=new yo(t,e+1),p=[];return this.ws.forEachInRange([a,d],v=>{this.ys(v),p.push(v.key)}),p}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new qt(new qn([])),a=new yo(t,e),d=new yo(t,e+1);let p=Jn();return this.ws.forEachInRange([a,d],v=>{p=p.add(v.key)}),p}containsKey(e){const t=new yo(e,0),a=this.fs.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class yo{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return qt.comparator(e.key,t.key)||On(e.As,t.As)}static _s(e,t){return On(e.As,t.As)||qt.comparator(e.key,t.key)}}class Ap{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new wi(yo.ds)}checkEmpty(e){return pe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,d){const p=this.vs;this.vs++;const v=new T(p,t,a,d);this.mutationQueue.push(v);for(const M of d)this.Rs=this.Rs.add(new yo(M.key,p)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return pe.resolve(v)}lookupMutationBatch(e,t){return pe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.bs(t+1),p=d<0?0:d;return pe.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new yo(t,0),d=new yo(t,Number.POSITIVE_INFINITY),p=[];return this.Rs.forEachInRange([a,d],v=>{const M=this.Ps(v.As);p.push(M)}),pe.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new wi(On);return t.forEach(d=>{const p=new yo(d,0),v=new yo(d,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([p,v],M=>{a=a.add(M.As)})}),pe.resolve(this.Vs(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,d=a.length+1;let p=a;qt.isDocumentKey(p)||(p=p.child(""));const v=new yo(new qt(p),0);let M=new wi(On);return this.Rs.forEachWhile(U=>{const z=U.key.path;return!!a.isPrefixOf(z)&&(z.length===d&&(M=M.add(U.As)),!0)},v),pe.resolve(this.Vs(M))}Vs(e){const t=[];return e.forEach(a=>{const d=this.Ps(a);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){vn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let a=this.Rs;return pe.forEach(t.mutations,d=>{const p=new yo(d.key,t.batchId);return a=a.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Rs=a})}Cn(e){}containsKey(e,t){const a=new yo(t,0),d=this.Rs.firstAfterOrEqual(a);return pe.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return pe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Rp{constructor(e){this.Ds=e,this.docs=new Br(qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,d=this.docs.get(a),p=d?d.size:0,v=this.Ds(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:v}),this.size+=v-p,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return pe.resolve(a?a.document.mutableCopy():Mi.newInvalidDocument(t))}getEntries(e,t){let a=xo();return t.forEach(d=>{const p=this.docs.get(d);a=a.insert(d,p?p.document.mutableCopy():Mi.newInvalidDocument(d))}),pe.resolve(a)}getDocumentsMatchingQuery(e,t,a,d){let p=xo();const v=t.path,M=new qt(v.child("")),U=this.docs.getIteratorFrom(M);for(;U.hasNext();){const{key:z,value:{document:te}}=U.getNext();if(!v.isPrefixOf(z.path))break;z.path.length>v.length+1||N(x(te),a)<=0||(d.has(te.key)||lc(t,te))&&(p=p.insert(te.key,te.mutableCopy()))}return pe.resolve(p)}getAllFromCollectionGroup(e,t,a,d){Ot()}Cs(e,t){return pe.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new Qg(this)}getSize(e){return pe.resolve(this.size)}}class Qg extends Zg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((a,d)=>{d.isValidDocument()?t.push(this.os.addEntry(e,d)):this.os.removeEntry(a)}),pe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class iy{constructor(e){this.persistence=e,this.xs=new Ua(t=>Vc(t),sc),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new mc,this.targetCount=0,this.Ms=_a.kn()}forEachTarget(e,t){return this.xs.forEach((a,d)=>t(d)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.Ns&&(this.Ns=t),pe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new _a(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Fn(t),pe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,a){let d=0;const p=[];return this.xs.forEach((v,M)=>{M.sequenceNumber<=t&&null===a.get(M.targetId)&&(this.xs.delete(v),p.push(this.removeMatchingKeysForTargetId(e,M.targetId)),d++)}),pe.waitFor(p).next(()=>d)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const a=this.xs.get(t)||null;return pe.resolve(a)}addMatchingKeys(e,t,a){return this.ks.gs(t,a),pe.resolve()}removeMatchingKeys(e,t,a){this.ks.ps(t,a);const d=this.persistence.referenceDelegate,p=[];return d&&t.forEach(v=>{p.push(d.markPotentiallyOrphaned(e,v))}),pe.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const a=this.ks.Es(t);return pe.resolve(a)}containsKey(e,t){return pe.resolve(this.ks.containsKey(t))}}class Mp{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ss(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new iy(this),this.indexManager=new gv,this.remoteDocumentCache=new Rp(a=>this.referenceDelegate.Ls(a)),this.serializer=new qm(t),this.qs=new Ch(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.$s[e.toKey()];return a||(a=new Ap(t,this.referenceDelegate),this.$s[e.toKey()]=a),a}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,a){At("MemoryPersistence","Starting transaction:",e);const d=new wf(this.Os.next());return this.referenceDelegate.Us(),a(d).next(p=>this.referenceDelegate.Ks(d).next(()=>p)).toPromise().then(p=>(d.raiseOnCommittedEvent(),p))}Gs(e,t){return pe.or(Object.values(this.$s).map(a=>()=>a.containsKey(e,t)))}}class wf extends se{constructor(e){super(),this.currentSequenceNumber=e}}class If{constructor(e){this.persistence=e,this.Qs=new mc,this.js=null}static zs(e){return new If(e)}get Ws(){if(this.js)return this.js;throw Ot()}addReference(e,t,a){return this.Qs.addReference(a,t),this.Ws.delete(a.toString()),pe.resolve()}removeReference(e,t,a){return this.Qs.removeReference(a,t),this.Ws.add(a.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(d=>this.Ws.add(d.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(p=>this.Ws.add(p.toString()))}).next(()=>a.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Ws,a=>{const d=qt.fromPath(a);return this.Hs(e,d).next(p=>{p||t.removeEntry(d,wn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(a=>{a?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return pe.or([()=>pe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Np{constructor(e){this.serializer=e}O(e,t,a,d){const p=new hn("createOrUpgrade",t);var M;a<1&&d>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vd,{unique:!0}),M.createObjectStore("documentMutations"),Pp(e),function(M){M.createObjectStore("remoteDocuments")}(e));let v=pe.resolve();return a<3&&d>=3&&(0!==a&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),Pp(e)),v=v.next(()=>function(M){const U=M.store("targetGlobal"),z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wn.min().toTimestamp(),targetCount:0};return U.put("targetGlobalKey",z)}(p))),a<4&&d>=4&&(0!==a&&(v=v.next(()=>function(M,U){return U.store("mutations").j().next(z=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vd,{unique:!0});const te=U.store("mutations"),Ee=z.map(rt=>te.put(rt));return pe.waitFor(Ee)})}(e,p))),v=v.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&d>=5&&(v=v.next(()=>this.Ys(p))),a<6&&d>=6&&(v=v.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(p)))),a<7&&d>=7&&(v=v.next(()=>this.Zs(p))),a<8&&d>=8&&(v=v.next(()=>this.ti(e,p))),a<9&&d>=9&&(v=v.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&d>=10&&(v=v.next(()=>this.ei(p))),a<11&&d>=11&&(v=v.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&d>=12&&(v=v.next(()=>{!function(M){const U=M.createObjectStore("documentOverlays",{keyPath:kc});U.createIndex("collectionPathOverlayIndex",$u,{unique:!1}),U.createIndex("collectionGroupOverlayIndex",Xh,{unique:!1})}(e)})),a<13&&d>=13&&(v=v.next(()=>function(M){const U=M.createObjectStore("remoteDocumentsV14",{keyPath:Xl});U.createIndex("documentKeyIndex",yl),U.createIndex("collectionGroupIndex",xc)}(e)).next(()=>this.ni(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&d>=14&&(v=v.next(()=>this.si(e,p))),a<15&&d>=15&&(v=v.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:_l}).createIndex("sequenceNumberIndex",Jl,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:ec}).createIndex("documentKeyIndex",rp,{unique:!1})}(e))),v}Xs(e){let t=0;return e.store("remoteDocuments").X((a,d)=>{t+=ey(d)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Ys(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.j().next(d=>pe.forEach(d,p=>{const v=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return a.j("userMutationsIndex",v).next(M=>pe.forEach(M,U=>{vn(U.userId===p.userId);const z=Nl(this.serializer,U);return zg(e,p.userId,z).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const p=[];return a.X((v,M)=>{const U=new qn(v),z=[0,As(U)];p.push(t.get(z).next(te=>te?pe.resolve():t.put({targetId:0,path:As(U),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>pe.waitFor(p))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Ed});const a=t.store("collectionParents"),d=new jd,p=v=>{if(d.add(v)){const M=v.lastSegment(),U=v.popLast();return a.put({collectionId:M,parent:As(U)})}};return t.store("remoteDocuments").X({Y:!0},(v,M)=>{const U=new qn(v);return p(U.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([v,M,U],z)=>{const te=Oa(M);return p(te.popLast())}))}ei(e){const t=e.store("targets");return t.X((a,d)=>{const p=pf(d),v=gf(this.serializer,p);return t.put(v)})}ni(e,t){const a=t.store("remoteDocuments"),d=[];return a.X((p,v)=>{const M=t.store("remoteDocumentsV14"),U=(z=v,z.document?new qt(qn.fromString(z.document.name).popFirst(5)):z.noDocument?qt.fromSegments(z.noDocument.path):z.unknownDocument?qt.fromSegments(z.unknownDocument.path):Ot()).path.toArray();var z;const te={prefixPath:U.slice(0,U.length-2),collectionGroup:U[U.length-2],documentId:U[U.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};d.push(M.put(te))}).next(()=>pe.waitFor(d))}si(e,t){const a=t.store("mutations"),d=Hd(this.serializer),p=new Mp(If.zs,this.serializer.fe);return a.j().next(v=>{const M=new Map;return v.forEach(U=>{var z;let te=null!==(z=M.get(U.userId))&&void 0!==z?z:Jn();Nl(this.serializer,U).keys().forEach(Ee=>te=te.add(Ee)),M.set(U.userId,te)}),pe.forEach(M,(U,z)=>{const te=new Rn(z),Ee=Zm.de(this.serializer,te),rt=p.getIndexManager(te),_t=vf.de(te,this.serializer,rt,p.referenceDelegate);return new ry(d,_t,Ee,rt).recalculateAndSaveOverlaysForDocumentKeys(new fa(t,Ss.ct),U).next()})})}}function Pp(i){i.createObjectStore("targetDocuments",{keyPath:Eu}).createIndex("documentTargetsIndex",ch,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Oc,{unique:!0}),i.createObjectStore("targetGlobal")}const zd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class xp{constructor(e,t,a,d,p,v,M,U,z,te,Ee=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.ii=p,this.window=v,this.document=M,this.ri=z,this.oi=te,this.ui=Ee,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=rt=>Promise.resolve(),!xp.D())throw new Et(it.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qg(this,d),this.di=t+"main",this.serializer=new qm(U),this.wi=new tn(this.di,this.ui,new Np(this.serializer)),this.Bs=new bp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Hd(this.serializer),this.qs=new hr,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===te&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Et(it.FAILED_PRECONDITION,zd);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ss(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var a=(0,Le.Z)(function*(d){if(t.started)return e(d)});return function(d){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Le.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Le.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(da(e))return At("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return At("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Dh(e).get("owner").next(t=>pe.resolve(this.Ri(t)))}Pi(e){return bh(e).delete(this.clientId)}bi(){var e=this;return(0,Le.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const d=$s(a,"clientMetadata");return d.j().next(p=>{const v=e.Si(p,18e5),M=p.filter(U=>-1===v.indexOf(U));return pe.forEach(M,U=>d.delete(U.clientId)).next(()=>M)})}).catch(()=>[]);if(e._i)for(const a of t)e._i.removeItem(e.Di(a.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?pe.resolve(!0):Dh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Et(it.FAILED_PRECONDITION,zd);return!1}}return!(!this.networkEnabled||!this.inForeground)||bh(e).j().next(a=>void 0===this.Si(a,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(t=>(this.isPrimary!==t&&At("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Le.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new fa(t,Ss.ct);return e.Ai(a).next(()=>e.Pi(a))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(a=>this.Vi(a.updateTimeMs,t)&&!this.Ci(a.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>bh(e).j().next(t=>this.Si(t,18e5).map(a=>a.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return vf.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cp(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Zm.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,a){At("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",p=15===(v=this.ui)?ip:14===v?dh:13===v?La:12===v?Hu:11===v?Lc:void Ot();var v;let M;return this.wi.runTransaction(e,d,p,U=>(M=new fa(U,this.Os?this.Os.next():Ss.ct),"readwrite-primary"===t?this.Ti(M).next(z=>!!z||this.Ei(M)).next(z=>{if(!z)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Et(it.FAILED_PRECONDITION,$);return a(M)}).next(z=>this.vi(M).next(()=>z)):this.Oi(M).next(()=>a(M)))).then(U=>(M.raiseOnCommittedEvent(),U))}Oi(e){return Dh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Et(it.FAILED_PRECONDITION,zd)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dh(e).put("owner",t)}static D(){return tn.D()}Ai(e){const t=Dh(e);return t.get("owner").next(a=>this.Ri(a)?(At("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Vi(e,t){const a=Date.now();return!(e<a-t||e>a&&(Pr(`Detected an update time that is in the future: ${e} > ${a}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Ce.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const a=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return At("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Pr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dh(i){return $s(i,"owner")}function bh(i){return $s(i,"clientMetadata")}function C_(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Op{constructor(e,t,a,d){this.targetId=e,this.fromCache=t,this.Fi=a,this.Bi=d}static Li(e,t){let a=Jn(),d=Jn();for(const p of t.docChanges)switch(p.type){case 0:a=a.add(p.doc.key);break;case 1:d=d.add(p.doc.key)}return new Op(e,t.fromCache,a,d)}}class Xg{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,a,d){return this.Ki(e,t).next(p=>p||this.Gi(e,t,d,a)).next(p=>p||this.Qi(e,t))}Ki(e,t){if(Lg(t))return pe.resolve(null);let a=Po(t);return this.indexManager.getIndexType(e,a).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=$c(t,null,"F"),a=Po(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(p=>{const v=Jn(...p);return this.Ui.getDocuments(e,v).next(M=>this.indexManager.getMinOffset(e,a).next(U=>{const z=this.ji(t,M);return this.zi(t,z,v,U.readTime)?this.Ki(e,$c(t,null,"F")):this.Wi(e,z,t,U)}))})))}Gi(e,t,a,d){return Lg(t)||d.isEqual(wn.min())?this.Qi(e,t):this.Ui.getDocuments(e,a).next(p=>{const v=this.ji(t,p);return this.zi(t,v,a,d)?this.Qi(e,t):(Ds()<=Ze.in.DEBUG&&At("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),tu(t)),this.Wi(e,v,t,S(d,-1)))})}ji(e,t){let a=new wi(yh(e));return t.forEach((d,p)=>{lc(e,p)&&(a=a.add(p))}),a}zi(e,t,a,d){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(d)>0)}Qi(e,t){return Ds()<=Ze.in.DEBUG&&At("QueryEngine","Using full collection scan to execute query:",tu(t)),this.Ui.getDocumentsMatchingQuery(e,t,C.min())}Wi(e,t,a,d){return this.Ui.getDocumentsMatchingQuery(e,a,d).next(p=>(t.forEach(v=>{p=p.insert(v.key,v)}),p))}}class D_{constructor(e,t,a,d){this.persistence=e,this.Hi=t,this.serializer=d,this.Ji=new Br(On),this.Yi=new Ua(p=>Vc(p),sc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(a)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ry(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function kp(i,e,t,a){return new D_(i,e,t,a)}function Jg(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,Le.Z)(function*(i,e){const t=Vt(i);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let d;return t.mutationQueue.getAllMutationBatches(a).next(p=>(d=p,t.tr(e),t.mutationQueue.getAllMutationBatches(a))).next(p=>{const v=[],M=[];let U=Jn();for(const z of d){v.push(z.batchId);for(const te of z.mutations)U=U.add(te.key)}for(const z of p){M.push(z.batchId);for(const te of z.mutations)U=U.add(te.key)}return t.localDocuments.getDocuments(a,U).next(z=>({er:z,removedBatchIds:v,addedBatchIds:M}))})})}),Lp.apply(this,arguments)}function b_(i){const e=Vt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function S_(i,e,t){let a=Jn(),d=Jn();return t.forEach(p=>a=a.add(p)),e.getEntries(i,a).next(p=>{let v=xo();return t.forEach((M,U)=>{const z=p.get(M);U.isFoundDocument()!==z.isFoundDocument()&&(d=d.add(M)),U.isNoDocument()&&U.version.isEqual(wn.min())?(e.removeEntry(M,U.readTime),v=v.insert(M,U)):!z.isValidDocument()||U.version.compareTo(z.version)>0||0===U.version.compareTo(z.version)&&z.hasPendingWrites?(e.addEntry(U),v=v.insert(M,U)):At("LocalStore","Ignoring outdated watch update for ",M,". Current version:",z.version," Watch version:",U.version)}),{nr:v,sr:d}})}function A_(i,e){const t=Vt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Gd(i,e){const t=Vt(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let d;return t.Bs.getTargetData(a,e).next(p=>p?(d=p,pe.resolve(d)):t.Bs.allocateTargetId(a).next(v=>(d=new ja(e,v,"TargetPurposeListen",a.currentSequenceNumber),t.Bs.addTargetData(a,d).next(()=>d))))}).then(a=>{const d=t.Ji.get(a.targetId);return(null===d||a.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(a.targetId,a),t.Yi.set(e,a.targetId)),a})}function Wd(i,e,t){return em.apply(this,arguments)}function em(){return em=(0,Le.Z)(function*(i,e,t){const a=Vt(i),d=a.Ji.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",p,v=>a.persistence.referenceDelegate.removeTarget(v,d)))}catch(v){if(!da(v))throw v;At("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}a.Ji=a.Ji.remove(e),a.Yi.delete(d.target)}),em.apply(this,arguments)}function Sh(i,e,t){const a=Vt(i);let d=wn.min(),p=Jn();return a.persistence.runTransaction("Execute query","readonly",v=>function(M,U,z){const te=Vt(M),Ee=te.Yi.get(z);return void 0!==Ee?pe.resolve(te.Ji.get(Ee)):te.Bs.getTargetData(U,z)}(a,v,Po(e)).next(M=>{if(M)return d=M.lastLimboFreeSnapshotVersion,a.Bs.getMatchingKeysForTargetId(v,M.targetId).next(U=>{p=U})}).next(()=>a.Hi.getDocumentsMatchingQuery(v,e,t?d:wn.min(),t?p:Jn())).next(M=>(R_(a,wl(e),M),{documents:M,ir:p})))}function tm(i,e){const t=Vt(i),a=Vt(t.Bs),d=t.Ji.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",p=>a.le(p,e).next(v=>v?v.target:null))}function Up(i,e){const t=Vt(i),a=t.Xi.get(e)||wn.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Zi.getAllFromCollectionGroup(d,e,S(a,-1),Number.MAX_SAFE_INTEGER)).then(d=>(R_(t,e,d),d))}function R_(i,e,t){let a=i.Xi.get(e)||wn.min();t.forEach((d,p)=>{p.readTime.compareTo(a)>0&&(a=p.readTime)}),i.Xi.set(e,a)}function nm(){return nm=(0,Le.Z)(function*(i,e,t,a){const d=Vt(i);let p=Jn(),v=xo();for(const z of t){const te=e.rr(z.metadata.name);z.document&&(p=p.add(te));const Ee=e.ur(z);Ee.setReadTime(e.cr(z.metadata.readTime)),v=v.insert(te,Ee)}const M=d.Zi.newChangeBuffer({trackRemovals:!0}),U=yield Gd(d,(z=a,Po(jc(qn.fromString(`__bundle__/docs/${z}`)))));var z;return d.persistence.runTransaction("Apply bundle documents","readwrite",z=>S_(z,M,v).next(te=>(M.apply(z),te)).next(te=>d.Bs.removeMatchingKeysForTargetId(z,U.targetId).next(()=>d.Bs.addMatchingKeys(z,p,U.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(z,te.nr,te.sr)).next(()=>te.nr)))}),nm.apply(this,arguments)}function Bp(i,e){return rm.apply(this,arguments)}function rm(){return rm=(0,Le.Z)(function*(i,e,t=Jn()){const a=yield Gd(i,Po(mf(e.bundledQuery))),d=Vt(i);return d.persistence.runTransaction("Save named query","readwrite",p=>{const v=_s(e.readTime);if(a.snapshotVersion.compareTo(v)>=0)return d.qs.saveNamedQuery(p,e);const M=a.withResumeToken(ze.EMPTY_BYTE_STRING,v);return d.Ji=d.Ji.insert(M.targetId,M),d.Bs.updateTargetData(p,M).next(()=>d.Bs.removeMatchingKeysForTargetId(p,a.targetId)).next(()=>d.Bs.addMatchingKeys(p,t,a.targetId)).next(()=>d.qs.saveNamedQuery(p,e))})}),rm.apply(this,arguments)}function oy(i,e){return`firestore_clients_${i}_${e}`}function Cf(i,e,t){let a=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function im(i,e){return`firestore_targets_${i}_${e}`}class kl{constructor(e,t,a,d){this.user=e,this.batchId=t,this.state=a,this.error=d}static ar(e,t,a){const d=JSON.parse(a);let p,v="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return v&&d.error&&(v="string"==typeof d.error.message&&"string"==typeof d.error.code,v&&(p=new Et(d.error.code,d.error.message))),v?new kl(e,t,d.state,p):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ad{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static ar(e,t){const a=JSON.parse(t);let d,p="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(d=new Et(a.error.code,a.error.message))),p?new ad(e,a.state,d):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const a=JSON.parse(t);let d="object"==typeof a&&a.activeTargetIds instanceof Array,p=Hc();for(let v=0;d&&v<a.activeTargetIds.length;++v)d=Nc(a.activeTargetIds[v]),p=p.add(a.activeTargetIds[v]);return d?new sm(e,p):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class om{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new om(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ay{constructor(){this.activeTargetIds=Hc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uy{constructor(e,t,a,d,p){this.window=e,this.ii=t,this.persistenceKey=a,this.wr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Br(On),this.started=!1,this.yr=[];const v=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.pr=oy(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new ay),this.Tr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Le.Z)(function*(){const t=yield e.syncEngine.$i();for(const d of t){if(d===e.wr)continue;const p=e.getItem(oy(e.persistenceKey,d));if(p){const v=sm.ar(d,p);v&&(e.gr=e.gr.insert(v.clientId,v))}}e.Pr();const a=e.storage.getItem(e.vr);if(a){const d=e.br(a);d&&e.Vr(d)}for(const d of e.yr)e.mr(d);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((a,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,a){this.Dr(e,t,a),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(im(this.persistenceKey,e));if(a){const d=ad.ar(e,a);d&&(t=d.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(im(this.persistenceKey,e))}updateQueryState(e,t,a){this.kr(e,t,a)}handleUserChange(e,t,a){t.forEach(d=>{this.Cr(d)}),this.currentUser=e,a.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return At("SharedClientState","READ",e,t),t}setItem(e,t){At("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){At("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const a=e;if(a.storageArea===this.storage){if(At("SharedClientState","EVENT",a.key,a.newValue),a.key===this.pr)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Le.Z)(function*(){if(t.started){if(null!==a.key)if(t.Tr.test(a.key)){if(null==a.newValue){const d=t.Or(a.key);return t.Fr(d,null)}{const d=t.Br(a.key,a.newValue);if(d)return t.Fr(d.clientId,d)}}else if(t.Er.test(a.key)){if(null!==a.newValue){const d=t.Lr(a.key,a.newValue);if(d)return t.qr(d)}}else if(t.Ar.test(a.key)){if(null!==a.newValue){const d=t.Ur(a.key,a.newValue);if(d)return t.Kr(d)}}else if(a.key===t.vr){if(null!==a.newValue){const d=t.br(a.newValue);if(d)return t.Vr(d)}}else if(a.key===t.Ir){const d=function(p){let v=Ss.ct;if(null!=p)try{const M=JSON.parse(p);vn("number"==typeof M),v=M}catch(M){Pr("SharedClientState","Failed to read sequence number from WebStorage",M)}return v}(a.newValue);d!==Ss.ct&&t.sequenceNumberHandler(d)}else if(a.key===t.Rr){const d=t.Gr(a.newValue);yield Promise.all(d.map(p=>t.syncEngine.Qr(p)))}}else t.yr.push(a)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,a){const d=new kl(this.currentUser,e,t,a),p=Cf(this.persistenceKey,this.currentUser,e);this.setItem(p,d.hr())}Cr(e){const t=Cf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,a){const d=im(this.persistenceKey,e),p=new ad(e,t,a);this.setItem(d,p.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const a=this.Or(e);return sm.ar(a,t)}Lr(e,t){const a=this.Er.exec(e),d=Number(a[1]);return kl.ar(new Rn(void 0!==a[2]?a[2]:null),d,t)}Ur(e,t){const a=this.Ar.exec(e),d=Number(a[1]);return ad.ar(d,t)}br(e){return om.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);At("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const a=t?this.gr.insert(e,t):this.gr.remove(e),d=this.Sr(this.gr),p=this.Sr(a),v=[],M=[];return p.forEach(U=>{d.has(U)||v.push(U)}),d.forEach(U=>{p.has(U)||M.push(U)}),this.syncEngine.Wr(v,M).then(()=>{this.gr=a})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Hc();return e.forEach((a,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class N_{constructor(){this.Hr=new ay,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,a){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ay,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class P_{Yr(e){}shutdown(){}}class am{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){At("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){At("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Df=null;function Kd(){return null===Df?Df=268435456+Math.round(2147483648*Math.random()):Df++,"0x"+Df.toString(16)}const ly={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eE{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const _o="WebChannelConnection";class ud extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,a,d,p){const v=Kd(),M=this.To(e,t);At("RestConnection",`Sending RPC '${e}' ${v}:`,M,a);const U={};return this.Eo(U,d,p),this.Ao(e,M,U,a).then(z=>(At("RestConnection",`Received RPC '${e}' ${v}: `,z),z),z=>{throw ps("RestConnection",`RPC '${e}' ${v} failed with error: `,z,"url: ",M,"request:",a),z})}vo(e,t,a,d,p,v){return this.Io(e,t,a,d,p)}Eo(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+_u,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,p)=>e[p]=d),a&&a.headers.forEach((d,p)=>e[p]=d)}To(e,t){return`${this.mo}/v1/${t}:${ly[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,a,d){const p=Kd();return new Promise((v,M)=>{const U=new Os;U.setWithCredentials(!0),U.listenOnce(zr.COMPLETE,()=>{try{switch(U.getLastErrorCode()){case Cs.NO_ERROR:const te=U.getResponseJson();At(_o,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(te)),v(te);break;case Cs.TIMEOUT:At(_o,`RPC '${e}' ${p} timed out`),M(new Et(it.DEADLINE_EXCEEDED,"Request time out"));break;case Cs.HTTP_ERROR:const Ee=U.getStatus();if(At(_o,`RPC '${e}' ${p} failed with status:`,Ee,"response text:",U.getResponseText()),Ee>0){let rt=U.getResponseJson();Array.isArray(rt)&&(rt=rt[0]);const _t=rt?.error;if(_t&&_t.status&&_t.message){const zt=function(an){const dn=an.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(dn)>=0?dn:it.UNKNOWN}(_t.status);M(new Et(zt,_t.message))}else M(new Et(it.UNKNOWN,"Server responded with status "+U.getStatus()))}else M(new Et(it.UNAVAILABLE,"Connection failed."));break;default:Ot()}}finally{At(_o,`RPC '${e}' ${p} completed.`)}});const z=JSON.stringify(d);At(_o,`RPC '${e}' ${p} sending request:`,d),U.send(t,"POST",z,a,15)})}Ro(e,t,a){const d=Kd(),p=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=ro(),M=Ts(),U={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},z=this.longPollingOptions.timeoutSeconds;void 0!==z&&(U.longPollingTimeout=Math.round(1e3*z)),this.useFetchStreams&&(U.xmlHttpFactory=new Fu({})),this.Eo(U.initMessageHeaders,t,a),U.encodeInitMessageHeaders=!0;const te=p.join("");At(_o,`Creating RPC '${e}' stream ${d}: ${te}`,U);const Ee=v.createWebChannel(te,U);let rt=!1,_t=!1;const zt=new eE({ro:dn=>{_t?At(_o,`Not sending because RPC '${e}' stream ${d} is closed:`,dn):(rt||(At(_o,`Opening RPC '${e}' stream ${d} transport.`),Ee.open(),rt=!0),At(_o,`RPC '${e}' stream ${d} sending:`,dn),Ee.send(dn))},oo:()=>Ee.close()}),an=(dn,lr,ci)=>{dn.listen(lr,vr=>{try{ci(vr)}catch(Zs){setTimeout(()=>{throw Zs},0)}})};return an(Ee,hl.EventType.OPEN,()=>{_t||At(_o,`RPC '${e}' stream ${d} transport opened.`)}),an(Ee,hl.EventType.CLOSE,()=>{_t||(_t=!0,At(_o,`RPC '${e}' stream ${d} transport closed`),zt.wo())}),an(Ee,hl.EventType.ERROR,dn=>{_t||(_t=!0,ps(_o,`RPC '${e}' stream ${d} transport errored:`,dn),zt.wo(new Et(it.UNAVAILABLE,"The operation could not be completed")))}),an(Ee,hl.EventType.MESSAGE,dn=>{var lr;if(!_t){const ci=dn.data[0];vn(!!ci);const Zs=ci.error||(null===(lr=ci[0])||void 0===lr?void 0:lr.error);if(Zs){At(_o,`RPC '${e}' stream ${d} received error:`,Zs);const Zi=Zs.status;let ns=function(ep){const TE=Z[ep];if(void 0!==TE)return Nt(TE)}(Zi),Ka=Zs.message;void 0===ns&&(ns=it.INTERNAL,Ka="Unknown error status: "+Zi+" with message "+Zs.message),_t=!0,zt.wo(new Et(ns,Ka)),Ee.close()}else At(_o,`RPC '${e}' stream ${d} received:`,ci),zt._o(ci)}}),an(M,Ac.STAT_EVENT,dn=>{dn.stat===ki.PROXY?At(_o,`RPC '${e}' stream ${d} detected buffering proxy`):dn.stat===ki.NOPROXY&&At(_o,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{zt.fo()},0),zt}}function bf(){return typeof window<"u"?window:null}function Vp(){return typeof document<"u"?document:null}function Sf(i){return new Va(i,!0)}class cy{constructor(e,t,a=1e3,d=1.5,p=6e4){this.ii=e,this.timerId=t,this.Po=a,this.bo=d,this.Vo=p,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),a=Math.max(0,Date.now()-this.Co),d=Math.max(0,t-a);d>0&&At("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,d,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class um{constructor(e,t,a,d,p,v,M,U){this.ii=e,this.$o=a,this.Oo=d,this.connection=p,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=M,this.listener=U,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new cy(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Le.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Le.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var a=this;return(0,Le.Z)(function*(){a.Ho(),a.Jo(),a.qo.cancel(),a.Fo++,4!==e?a.qo.reset():t&&t.code===it.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),a.qo.xo()):t&&t.code===it.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Yo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,d])=>{this.Fo===t&&this.Zo(a,d)},a=>{e(()=>{const d=new Et(it.UNKNOWN,"Fetching auth token failed: "+a.message);return this.tu(d)})})}Zo(e,t){const a=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{a(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(d=>{a(()=>this.tu(d))}),this.stream.onMessage(d=>{a(()=>this.onMessage(d))})}Go(){var e=this;this.state=5,this.qo.No((0,Le.Z)(function*(){e.state=0,e.start()}))}tu(e){return At("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(At("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x_ extends um{constructor(e,t,a,d,p,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,d,v),this.serializer=p}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Bd(i,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(U=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===U?1:"REMOVE"===U?2:"CURRENT"===U?3:"RESET"===U?4:Ot(),d=e.targetChange.targetIds||[],p=function(U,z){return U.useProto3Json?(vn(void 0===z||"string"==typeof z),ze.fromBase64String(z||"")):(vn(void 0===z||z instanceof Uint8Array),ze.fromUint8Array(z||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,M=v&&function(U){const z=void 0===U.code?it.UNKNOWN:Nt(U.code);return new Et(z,U.message||"")}(v);t=new Cu(a,d,p,M||null)}else if("documentChange"in e){const a=e.documentChange,d=Qu(i,a.document.name),p=_s(a.document.updateTime),v=a.document.createTime?_s(a.document.createTime):wn.min(),M=new ms({mapValue:{fields:a.document.fields}}),U=Mi.newFoundDocument(d,p,v,M);t=new _r(a.targetIds||[],a.removedTargetIds||[],U.key,U)}else if("documentDelete"in e){const a=e.documentDelete,d=Qu(i,a.document),p=a.readTime?_s(a.readTime):wn.min(),v=Mi.newNoDocument(d,p);t=new _r([],a.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const a=e.documentRemove,d=Qu(i,a.document);t=new _r([],a.removedTargetIds||[],d,null)}else{if(!("filter"in e))return Ot();{const a=e.filter,{count:d=0,unchangedNames:p}=a,v=new V(d,p);t=new ir(a.targetId,v)}}var U;return t}(this.serializer,e),a=function(d){if(!("targetChange"in d))return wn.min();const p=d.targetChange;return p.targetIds&&p.targetIds.length?wn.min():p.readTime?_s(p.readTime):wn.min()}(e);return this.listener.nu(t,a)}su(e){const t={};t.database=Ud(this.serializer),t.addTarget=function(d,p){let v;const M=p.target;if(v=oc(M)?{documents:Wm(d,M)}:{query:Xu(d,M)},v.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){v.resumeToken=iu(d,p.resumeToken);const U=Gm(d,p.expectedCount);null!==U&&(v.expectedCount=U)}else if(p.snapshotVersion.compareTo(wn.min())>0){v.readTime=Ld(d,p.snapshotVersion.toTimestamp());const U=Gm(d,p.expectedCount);null!==U&&(v.expectedCount=U)}return v}(this.serializer,e);const a=function Ml(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ot()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Wo(t)}iu(e){const t={};t.database=Ud(this.serializer),t.removeTarget=e,this.Wo(t)}}class mv extends um{constructor(e,t,a,d,p,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,d,v),this.serializer=p,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(vn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function mp(i,e){return i&&i.length>0?(vn(void 0!==e),i.map(t=>function(a,d){let p=_s(a.updateTime?a.updateTime:d);return p.isEqual(wn.min())&&(p=_s(d)),new zm(p,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=_s(e.commitTime);return this.listener.cu(a,t)}return vn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ud(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>mr(this.serializer,a))};this.Wo(t)}}class yv extends class{}{constructor(e,t,a,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=d,this.lu=!1}fu(){if(this.lu)throw new Et(it.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,p])=>this.connection.Io(e,t,a,d,p)).catch(d=>{throw"FirebaseError"===d.name?(d.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Et(it.UNKNOWN,d.toString())})}vo(e,t,a,d){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,v])=>this.connection.vo(e,t,a,p,v,d)).catch(p=>{throw"FirebaseError"===p.name?(p.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Et(it.UNKNOWN,p.toString())})}terminate(){this.lu=!0}}class Ah{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Pr(t),this.mu=!1):At("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yc{constructor(e,t,a,d,p){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=p,this.Pu.Yr(M=>{a.enqueueAndForget((0,Le.Z)(function*(){var U;Su(v)&&(At("RemoteStore","Restarting streams for network reachability change."),yield(U=(0,Le.Z)(function*(z){const te=Vt(z);te.vu.add(4),yield ld(te),te.bu.set("Unknown"),te.vu.delete(4),yield Du(te)}),function(z){return U.apply(this,arguments)})(v))}))}),this.bu=new Ah(a,d)}}function Du(i){return jp.apply(this,arguments)}function jp(){return jp=(0,Le.Z)(function*(i){if(Su(i))for(const e of i.Ru)yield e(!0)}),jp.apply(this,arguments)}function ld(i){return k_.apply(this,arguments)}function k_(){return k_=(0,Le.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),k_.apply(this,arguments)}function dy(i,e){const t=Vt(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),bu(t)?lm(t):Qd(t).Ko()&&$p(t,e))}function Af(i,e){const t=Vt(i),a=Qd(t);t.Au.delete(e),a.Ko()&&hy(t,e),0===t.Au.size&&(a.Ko()?a.jo():Su(t)&&t.bu.set("Unknown"))}function $p(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qd(i).su(e)}function hy(i,e){i.Vu.qt(e),Qd(i).iu(e)}function lm(i){i.Vu=new Qc({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),Qd(i).start(),i.bu.gu()}function bu(i){return Su(i)&&!Qd(i).Uo()&&i.Au.size>0}function Su(i){return 0===Vt(i).vu.size}function fy(i){i.Vu=void 0}function L_(i){return ar.apply(this,arguments)}function ar(){return ar=(0,Le.Z)(function*(i){i.Au.forEach((e,t)=>{$p(i,e)})}),ar.apply(this,arguments)}function Hp(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,Le.Z)(function*(i,e){fy(i),bu(i)?(i.bu.Iu(e),lm(i)):i.bu.set("Unknown")}),zp.apply(this,arguments)}function tE(i,e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,Le.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof Cu&&2===e.state&&e.cause)try{yield(a=(0,Le.Z)(function*(d,p){const v=p.cause;for(const M of p.targetIds)d.Au.has(M)&&(yield d.remoteSyncer.rejectListen(M,v),d.Au.delete(M),d.Vu.removeTarget(M))}),function(d,p){return a.apply(this,arguments)})(i,e)}catch(a){At("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield qd(i,a)}else if(e instanceof _r?i.Vu.Ht(e):e instanceof ir?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(wn.min()))try{const a=yield b_(i.localStore);t.compareTo(a)>=0&&(yield function(d,p){const v=d.Vu.ce(p);return v.targetChanges.forEach((M,U)=>{if(M.resumeToken.approximateByteSize()>0){const z=d.Au.get(U);z&&d.Au.set(U,z.withResumeToken(M.resumeToken,p))}}),v.targetMismatches.forEach((M,U)=>{const z=d.Au.get(M);if(!z)return;d.Au.set(M,z.withResumeToken(ze.EMPTY_BYTE_STRING,z.snapshotVersion)),hy(d,M);const te=new ja(z.target,M,U,z.sequenceNumber);$p(d,te)}),d.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(a){At("RemoteStore","Failed to raise snapshot:",a),yield qd(i,a)}var a}),Gp.apply(this,arguments)}function qd(i,e,t){return py.apply(this,arguments)}function py(){return py=(0,Le.Z)(function*(i,e,t){if(!da(e))throw e;i.vu.add(1),yield ld(i),i.bu.set("Offline"),t||(t=()=>b_(i.localStore)),i.asyncQueue.enqueueRetryable((0,Le.Z)(function*(){At("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield Du(i)}))}),py.apply(this,arguments)}function Rh(i,e){return e().catch(t=>qd(i,t,e))}function Zd(i){return cm.apply(this,arguments)}function cm(){return cm=(0,Le.Z)(function*(i){const e=Vt(i),t=Fl(e);let a=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;gy(e);)try{const d=yield A_(e.localStore,a);if(null===d){0===e.Eu.length&&t.jo();break}a=d.batchId,Wp(e,d)}catch(d){yield qd(e,d)}Kp(e)&&my(e)}),cm.apply(this,arguments)}function gy(i){return Su(i)&&i.Eu.length<10}function Wp(i,e){i.Eu.push(e);const t=Fl(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function Kp(i){return Su(i)&&!Fl(i).Uo()&&i.Eu.length>0}function my(i){Fl(i).start()}function dm(i){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,Le.Z)(function*(i){Fl(i).hu()}),Rf.apply(this,arguments)}function Yd(i){return tl.apply(this,arguments)}function tl(){return tl=(0,Le.Z)(function*(i){const e=Fl(i);for(const t of i.Eu)e.uu(t.mutations)}),tl.apply(this,arguments)}function F_(i,e,t){return yy.apply(this,arguments)}function yy(){return yy=(0,Le.Z)(function*(i,e,t){const a=i.Eu.shift(),d=m.from(a,e,t);yield Rh(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield Zd(i)}),yy.apply(this,arguments)}function hm(i,e){return _c.apply(this,arguments)}function _c(){return _c=(0,Le.Z)(function*(i,e){var t;e&&Fl(i).ou&&(yield(t=(0,Le.Z)(function*(a,d){if(Ke(p=d.code)&&p!==it.ABORTED){const v=a.Eu.shift();Fl(a).Qo(),yield Rh(a,()=>a.remoteSyncer.rejectFailedWrite(v.batchId,d)),yield Zd(a)}var p}),function(a,d){return t.apply(this,arguments)})(i,e)),Kp(i)&&my(i)}),_c.apply(this,arguments)}function Mf(i,e){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,Le.Z)(function*(i,e){const t=Vt(i);t.asyncQueue.verifyOperationInProgress(),At("RemoteStore","RemoteStore received new credentials");const a=Su(t);t.vu.add(3),yield ld(t),a&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Du(t)}),Mh.apply(this,arguments)}function qp(i,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,Le.Z)(function*(i,e){const t=Vt(i);e?(t.vu.delete(2),yield Du(t)):e||(t.vu.add(2),yield ld(t),t.bu.set("Unknown"))}),Zp.apply(this,arguments)}function Qd(i){return i.Su||(i.Su=function(e,t,a){const d=Vt(e);return d.fu(),new x_(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,a)}(i.datastore,i.asyncQueue,{uo:L_.bind(null,i),ao:Hp.bind(null,i),nu:tE.bind(null,i)}),i.Ru.push(function(){var e=(0,Le.Z)(function*(t){t?(i.Su.Qo(),bu(i)?lm(i):i.bu.set("Unknown")):(yield i.Su.stop(),fy(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function Fl(i){return i.Du||(i.Du=function(e,t,a){const d=Vt(e);return d.fu(),new mv(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,a)}(i.datastore,i.asyncQueue,{uo:dm.bind(null,i),ao:hm.bind(null,i),au:Yd.bind(null,i),cu:F_.bind(null,i)}),i.Ru.push(function(){var e=(0,Le.Z)(function*(t){t?(i.Du.Qo(),yield Zd(i)):(yield i.Du.stop(),i.Eu.length>0&&(At("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class Nf{constructor(e,t,a,d,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=d,this.removalCallback=p,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,a,d,p){const v=Date.now()+a,M=new Nf(e,t,v,d,p);return M.start(a),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Et(it.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vc(i,e){if(Pr("AsyncQueue",`${e}: ${i}`),da(i))return new Et(it.UNAVAILABLE,`${e}: ${i}`);throw i}class Xd{constructor(e){this.comparator=e?(t,a)=>e(t,a)||qt.comparator(t.key,a.key):(t,a)=>qt.comparator(t.key,a.key),this.keyedMap=Zu(),this.sortedSet=new Br(this.comparator)}static emptySet(e){return new Xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,p=a.getNext().key;if(!d.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new Xd;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Yp{constructor(){this.Cu=new Br(qt.comparator)}track(e){const t=e.doc.key,a=this.Cu.get(t);a?0!==e.type&&3===a.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==a.type?this.Cu=this.Cu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Cu=this.Cu.remove(t):1===e.type&&2===a.type?this.Cu=this.Cu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ot():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,a)=>{e.push(a)}),e}}class nl{constructor(e,t,a,d,p,v,M,U,z){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=d,this.mutatedKeys=p,this.fromCache=v,this.syncStateChanged=M,this.excludesMetadataChanges=U,this.hasCachedResults=z}static fromInitialDocuments(e,t,a,d,p){const v=[];return t.forEach(M=>{v.push({type:0,doc:M})}),new nl(e,t,Xd.emptySet(t),v,a,d,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==a[d].type||!t[d].doc.isEqual(a[d].doc))return!1;return!0}}class fm{constructor(){this.Nu=void 0,this.listeners=[]}}class U_{constructor(){this.queries=new Ua(e=>sf(e),qu),this.onlineState="Unknown",this.ku=new Set}}function _y(i,e){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,Le.Z)(function*(i,e){const t=Vt(i),a=e.query;let d=!1,p=t.queries.get(a);if(p||(d=!0,p=new fm),d)try{p.Nu=yield t.onListen(a)}catch(v){const M=vc(v,`Initialization of query '${tu(e.query)}' failed`);return void e.onError(M)}t.queries.set(a,p),p.listeners.push(e),e.Mu(t.onlineState),p.Nu&&e.$u(p.Nu)&&Ey(t)}),Pf.apply(this,arguments)}function pm(i,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Le.Z)(function*(i,e){const t=Vt(i),a=e.query;let d=!1;const p=t.queries.get(a);if(p){const v=p.listeners.indexOf(e);v>=0&&(p.listeners.splice(v,1),d=0===p.listeners.length)}if(d)return t.queries.delete(a),t.onUnlisten(a)}),gm.apply(this,arguments)}function xf(i,e){const t=Vt(i);let a=!1;for(const d of e){const v=t.queries.get(d.query);if(v){for(const M of v.listeners)M.$u(d)&&(a=!0);v.Nu=d}}a&&Ey(t)}function vy(i,e,t){const a=Vt(i),d=a.queries.get(e);if(d)for(const p of d.listeners)p.onError(t);a.queries.delete(e)}function Ey(i){i.ku.forEach(e=>{e.next()})}class Ha{constructor(e,t,a){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=a||{}}$u(e){if(!this.options.includeMetadataChanges){const a=[];for(const d of e.docChanges)3!==d.type&&a.push(d);e=new nl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class _v{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class mm{constructor(e){this.serializer=e}rr(e){return Qu(this.serializer,e)}ur(e){return e.metadata.exists?gp(this.serializer,e.document,!1):Mi.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return _s(e)}}class wy{constructor(e,t,a){this.ju=e,this.localStore=t,this.serializer=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qp(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const a=qn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,a=new mm(this.serializer);for(const d of e)if(d.metadata.queries){const p=a.rr(d.metadata.name);for(const v of d.metadata.queries){const M=(t.get(v)||Jn()).add(p);t.set(v,M)}}return t}complete(){var e=this;return(0,Le.Z)(function*(){const t=yield function M_(i,e,t,a){return nm.apply(this,arguments)}(e.localStore,new mm(e.serializer),e.documents,e.ju.id),a=e.Wu(e.documents);for(const d of e.queries)yield Bp(e.localStore,d,a.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Qp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Iy{constructor(e){this.key=e}}class Of{constructor(e){this.key=e}}class Ul{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Jn(),this.mutatedKeys=Jn(),this.tc=yh(e),this.ec=new Xd(this.tc)}get nc(){return this.Yu}sc(e,t){const a=t?t.ic:new Yp,d=t?t.ec:this.ec;let p=t?t.mutatedKeys:this.mutatedKeys,v=d,M=!1;const U="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,z="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((te,Ee)=>{const rt=d.get(te),_t=lc(this.query,Ee)?Ee:null,zt=!!rt&&this.mutatedKeys.has(rt.key),an=!!_t&&(_t.hasLocalMutations||this.mutatedKeys.has(_t.key)&&_t.hasCommittedMutations);let dn=!1;rt&&_t?rt.data.isEqual(_t.data)?zt!==an&&(a.track({type:3,doc:_t}),dn=!0):this.rc(rt,_t)||(a.track({type:2,doc:_t}),dn=!0,(U&&this.tc(_t,U)>0||z&&this.tc(_t,z)<0)&&(M=!0)):!rt&&_t?(a.track({type:0,doc:_t}),dn=!0):rt&&!_t&&(a.track({type:1,doc:rt}),dn=!0,(U||z)&&(M=!0)),dn&&(_t?(v=v.add(_t),p=an?p.add(te):p.delete(te)):(v=v.delete(te),p=p.delete(te)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const te="F"===this.query.limitType?v.last():v.first();v=v.delete(te.key),p=p.delete(te.key),a.track({type:1,doc:te})}return{ec:v,ic:a,zi:M,mutatedKeys:p}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const d=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const p=e.ic.xu();p.sort((z,te)=>function(Ee,rt){const _t=zt=>{switch(zt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ot()}};return _t(Ee)-_t(rt)}(z.type,te.type)||this.tc(z.doc,te.doc)),this.oc(a);const v=t?this.uc():[],M=0===this.Zu.size&&this.current?1:0,U=M!==this.Xu;return this.Xu=M,0!==p.length||U?{snapshot:new nl(this.query,e.ec,d,p,e.mutatedKeys,0===M,U,!1,!!a&&a.resumeToken.approximateByteSize()>0),cc:v}:{cc:v}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Yp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Jn(),this.ec.forEach(a=>{this.ac(a.key)&&(this.Zu=this.Zu.add(a.key))});const t=[];return e.forEach(a=>{this.Zu.has(a)||t.push(new Of(a))}),this.Zu.forEach(a=>{e.has(a)||t.push(new Iy(a))}),t}hc(e){this.Yu=e.ir,this.Zu=Jn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return nl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Xp{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class B_{constructor(e){this.key=e,this.fc=!1}}class V_{constructor(e,t,a,d,p,v){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=d,this.currentUser=p,this.maxConcurrentLimboResolutions=v,this.dc={},this.wc=new Ua(M=>sf(M),qu),this._c=new Map,this.mc=new Set,this.gc=new Br(qt.comparator),this.yc=new Map,this.Ic=new mc,this.Tc={},this.Ec=new Map,this.Ac=_a.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Ty(i,e){return cd.apply(this,arguments)}function cd(){return cd=(0,Le.Z)(function*(i,e){const t=og(i);let a,d;const p=t.wc.get(e);if(p)a=p.targetId,t.sharedClientState.addLocalQueryTarget(a),d=p.view.lc();else{const v=yield Gd(t.localStore,Po(e)),M=t.sharedClientState.addLocalQueryTarget(v.targetId);a=v.targetId,d=yield Nh(t,e,a,"current"===M,v.resumeToken),t.isPrimaryClient&&dy(t.remoteStore,v)}return d}),cd.apply(this,arguments)}function Nh(i,e,t,a,d){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,Le.Z)(function*(i,e,t,a,d){i.Rc=(Ee,rt,_t)=>{return(zt=(0,Le.Z)(function*(an,dn,lr,ci){let vr=dn.view.sc(lr);vr.zi&&(vr=yield Sh(an.localStore,dn.query,!1).then(({documents:ns})=>dn.view.sc(ns,vr)));const Zs=ci&&ci.targetChanges.get(dn.targetId),Zi=dn.view.applyChanges(vr,an.isPrimaryClient,Zs);return Sy(an,dn.targetId,Zi.cc),Zi.snapshot}),function(an,dn,lr,ci){return zt.apply(this,arguments)})(i,Ee,rt,_t);var zt};const p=yield Sh(i.localStore,e,!0),v=new Ul(e,p.ir),M=v.sc(p.documents),U=Vr.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==i.onlineState,d),z=v.applyChanges(M,i.isPrimaryClient,U);Sy(i,t,z.cc);const te=new Xp(e,t,v);return i.wc.set(e,te),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),z.snapshot}),Cy.apply(this,arguments)}function rl(i,e){return ym.apply(this,arguments)}function ym(){return ym=(0,Le.Z)(function*(i,e){const t=Vt(i),a=t.wc.get(e),d=t._c.get(a.targetId);if(d.length>1)return t._c.set(a.targetId,d.filter(p=>!qu(p,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Wd(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),Af(t.remoteStore,a.targetId),Ec(t,a.targetId)}).catch(ie))):(Ec(t,a.targetId),yield Wd(t.localStore,a.targetId,!0))}),ym.apply(this,arguments)}function za(){return za=(0,Le.Z)(function*(i,e,t){const a=ag(i);try{const d=yield function(p,v){const M=Vt(p),U=ii.now(),z=v.reduce((rt,_t)=>rt.add(_t.key),Jn());let te,Ee;return M.persistence.runTransaction("Locally write mutations","readwrite",rt=>{let _t=xo(),zt=Jn();return M.Zi.getEntries(rt,z).next(an=>{_t=an,_t.forEach((dn,lr)=>{lr.isValidDocument()||(zt=zt.add(dn))})}).next(()=>M.localDocuments.getOverlayedDocuments(rt,_t)).next(an=>{te=an;const dn=[];for(const lr of v){const ci=ya(lr,te.get(lr.key).overlayedDocument);null!=ci&&dn.push(new bl(lr.key,ci,tf(ci.value.mapValue),Hi.exists(!0)))}return M.mutationQueue.addMutationBatch(rt,U,dn,v)}).next(an=>{Ee=an;const dn=an.applyToLocalDocumentSet(te,zt);return M.documentOverlayCache.saveOverlays(rt,an.batchId,dn)})}).then(()=>({batchId:Ee.batchId,changes:up(te)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(d.batchId),function(p,v,M){let U=p.Tc[p.currentUser.toKey()];U||(U=new Br(On)),U=U.insert(v,M),p.Tc[p.currentUser.toKey()]=U}(a,d.batchId,t),yield dd(a,d.changes),yield Zd(a.remoteStore)}catch(d){const p=vc(d,"Failed to persist write");t.reject(p)}}),za.apply(this,arguments)}function Jp(i,e){return Ga.apply(this,arguments)}function Ga(){return Ga=(0,Le.Z)(function*(i,e){const t=Vt(i);try{const a=yield function sy(i,e){const t=Vt(i),a=e.snapshotVersion;let d=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const v=t.Zi.newChangeBuffer({trackRemovals:!0});d=t.Ji;const M=[];e.targetChanges.forEach((te,Ee)=>{const rt=d.get(Ee);if(!rt)return;M.push(t.Bs.removeMatchingKeys(p,te.removedDocuments,Ee).next(()=>t.Bs.addMatchingKeys(p,te.addedDocuments,Ee)));let _t=rt.withSequenceNumber(p.currentSequenceNumber);var zt,an,dn;null!==e.targetMismatches.get(Ee)?_t=_t.withResumeToken(ze.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):te.resumeToken.approximateByteSize()>0&&(_t=_t.withResumeToken(te.resumeToken,a)),d=d.insert(Ee,_t),an=_t,dn=te,(0===(zt=rt).resumeToken.approximateByteSize()||an.snapshotVersion.toMicroseconds()-zt.snapshotVersion.toMicroseconds()>=3e8||dn.addedDocuments.size+dn.modifiedDocuments.size+dn.removedDocuments.size>0)&&M.push(t.Bs.updateTargetData(p,_t))});let U=xo(),z=Jn();if(e.documentUpdates.forEach(te=>{e.resolvedLimboDocuments.has(te)&&M.push(t.persistence.referenceDelegate.updateLimboDocument(p,te))}),M.push(S_(p,v,e.documentUpdates).next(te=>{U=te.nr,z=te.sr})),!a.isEqual(wn.min())){const te=t.Bs.getLastRemoteSnapshotVersion(p).next(Ee=>t.Bs.setTargetsMetadata(p,p.currentSequenceNumber,a));M.push(te)}return pe.waitFor(M).next(()=>v.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,U,z)).next(()=>U)}).then(p=>(t.Ji=d,p))}(t.localStore,e);e.targetChanges.forEach((d,p)=>{const v=t.yc.get(p);v&&(vn(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?v.fc=!0:d.modifiedDocuments.size>0?vn(v.fc):d.removedDocuments.size>0&&(vn(v.fc),v.fc=!1))}),yield dd(t,a,e)}catch(a){yield ie(a)}}),Ga.apply(this,arguments)}function _m(i,e,t){const a=Vt(i);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const d=[];a.wc.forEach((p,v)=>{const M=v.view.Mu(e);M.snapshot&&d.push(M.snapshot)}),function(p,v){const M=Vt(p);M.onlineState=v;let U=!1;M.queries.forEach((z,te)=>{for(const Ee of te.listeners)Ee.Mu(v)&&(U=!0)}),U&&Ey(M)}(a.eventManager,e),d.length&&a.dc.nu(d),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Ev(i,e,t){return eg.apply(this,arguments)}function eg(){return eg=(0,Le.Z)(function*(i,e,t){const a=Vt(i);a.sharedClientState.updateQueryState(e,"rejected",t);const d=a.yc.get(e),p=d&&d.key;if(p){let v=new Br(qt.comparator);v=v.insert(p,Mi.newNoDocument(p,wn.min()));const M=Jn().add(p),U=new Al(wn.min(),new Map,new Br(On),v,M);yield Jp(a,U),a.gc=a.gc.remove(p),a.yc.delete(e),rg(a)}else yield Wd(a.localStore,e,!1).then(()=>Ec(a,e,t)).catch(ie)}),eg.apply(this,arguments)}function j_(i,e){return kf.apply(this,arguments)}function kf(){return kf=(0,Le.Z)(function*(i,e){const t=Vt(i),a=e.batch.batchId;try{const d=yield function Fp(i,e){const t=Vt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const d=e.batch.keys(),p=t.Zi.newChangeBuffer({trackRemovals:!0});return function(v,M,U,z){const te=U.batch,Ee=te.keys();let rt=pe.resolve();return Ee.forEach(_t=>{rt=rt.next(()=>z.getEntry(M,_t)).next(zt=>{const an=U.docVersions.get(_t);vn(null!==an),zt.version.compareTo(an)<0&&(te.applyToRemoteDocument(zt,U),zt.isValidDocument()&&(zt.setReadTime(U.commitVersion),z.addEntry(zt)))})}),rt.next(()=>v.mutationQueue.removeMutationBatch(M,te))}(t,a,e,p).next(()=>p.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(v){let M=Jn();for(let U=0;U<v.mutationResults.length;++U)v.mutationResults[U].transformResults.length>0&&(M=M.add(v.batch.mutations[U].key));return M}(e))).next(()=>t.localDocuments.getDocuments(a,d))})}(t.localStore,e);vm(t,a,null),ng(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield dd(t,d)}catch(d){yield ie(d)}}),kf.apply(this,arguments)}function Dy(i,e,t){return by.apply(this,arguments)}function by(){return by=(0,Le.Z)(function*(i,e,t){const a=Vt(i);try{const d=yield function(p,v){const M=Vt(p);return M.persistence.runTransaction("Reject batch","readwrite-primary",U=>{let z;return M.mutationQueue.lookupMutationBatch(U,v).next(te=>(vn(null!==te),z=te.keys(),M.mutationQueue.removeMutationBatch(U,te))).next(()=>M.mutationQueue.performConsistencyCheck(U)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(U,z,v)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(U,z)).next(()=>M.localDocuments.getDocuments(U,z))})}(a.localStore,e);vm(a,e,t),ng(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield dd(a,d)}catch(d){yield ie(d)}}),by.apply(this,arguments)}function tg(){return tg=(0,Le.Z)(function*(i,e){const t=Vt(i);Su(t.remoteStore)||At("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(p){const v=Vt(p);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>v.mutationQueue.getHighestUnacknowledgedBatchId(M))}(t.localStore);if(-1===a)return void e.resolve();const d=t.Ec.get(a)||[];d.push(e),t.Ec.set(a,d)}catch(a){const d=vc(a,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),tg.apply(this,arguments)}function ng(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function vm(i,e,t){const a=Vt(i);let d=a.Tc[a.currentUser.toKey()];if(d){const p=d.get(e);p&&(t?p.reject(t):p.resolve(),d=d.remove(e)),a.Tc[a.currentUser.toKey()]=d}}function Ec(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i._c.get(e))i.wc.delete(a),t&&i.dc.Pc(a,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(a=>{i.Ic.containsKey(a)||Au(i,a)})}function Au(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Af(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),rg(i))}function Sy(i,e,t){for(const a of t)a instanceof Iy?(i.Ic.addReference(a.key,e),Ay(i,a)):a instanceof Of?(At("SyncEngine","Document no longer in limbo: "+a.key),i.Ic.removeReference(a.key,e),i.Ic.containsKey(a.key)||Au(i,a.key)):Ot()}function Ay(i,e){const t=e.key,a=t.path.canonicalString();i.gc.get(t)||i.mc.has(a)||(At("SyncEngine","New document in limbo: "+t),i.mc.add(a),rg(i))}function rg(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new qt(qn.fromString(e)),a=i.Ac.next();i.yc.set(a,new B_(t)),i.gc=i.gc.insert(t,a),dy(i.remoteStore,new ja(Po(jc(t.path)),a,"TargetPurposeLimboResolution",Ss.ct))}}function dd(i,e,t){return Ry.apply(this,arguments)}function Ry(){return Ry=(0,Le.Z)(function*(i,e,t){const a=Vt(i),d=[],p=[],v=[];var M;a.wc.isEmpty()||(a.wc.forEach((M,U)=>{v.push(a.Rc(U,e,t).then(z=>{if((z||t)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(U.targetId,z?.fromCache?"not-current":"current"),z){d.push(z);const te=Op.Li(U.targetId,z);p.push(te)}}))}),yield Promise.all(v),a.dc.nu(d),yield(M=(0,Le.Z)(function*(U,z){const te=Vt(U);try{yield te.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ee=>pe.forEach(z,rt=>pe.forEach(rt.Fi,_t=>te.persistence.referenceDelegate.addReference(Ee,rt.targetId,_t)).next(()=>pe.forEach(rt.Bi,_t=>te.persistence.referenceDelegate.removeReference(Ee,rt.targetId,_t)))))}catch(Ee){if(!da(Ee))throw Ee;At("LocalStore","Failed to update sequence numbers: "+Ee)}for(const Ee of z){const rt=Ee.targetId;if(!Ee.fromCache){const _t=te.Ji.get(rt),an=_t.withLastLimboFreeSnapshotVersion(_t.snapshotVersion);te.Ji=te.Ji.insert(rt,an)}}}),function(U,z){return M.apply(this,arguments)})(a.localStore,p))}),Ry.apply(this,arguments)}function $_(i,e){return H_.apply(this,arguments)}function H_(){return H_=(0,Le.Z)(function*(i,e){const t=Vt(i);if(!t.currentUser.isEqual(e)){At("SyncEngine","User change. New user:",e.toKey());const a=yield Jg(t.localStore,e);t.currentUser=e,(d=t).Ec.forEach(v=>{v.forEach(M=>{M.reject(new Et(it.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.Ec.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield dd(t,a.er)}var d}),H_.apply(this,arguments)}function z_(i,e){const t=Vt(i),a=t.yc.get(e);if(a&&a.fc)return Jn().add(a.key);{let d=Jn();const p=t._c.get(e);if(!p)return d;for(const v of p){const M=t.wc.get(v);d=d.unionWith(M.view.nc)}return d}}function wv(i,e){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,Le.Z)(function*(i,e){const t=Vt(i),a=yield Sh(t.localStore,e.query,!0),d=e.view.hc(a);return t.isPrimaryClient&&Sy(t,e.targetId,d.cc),d}),Jd.apply(this,arguments)}function Ff(i,e){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,Le.Z)(function*(i,e){const t=Vt(i);return Up(t.localStore,e).then(a=>dd(t,a))}),Uf.apply(this,arguments)}function ig(i,e,t,a){return wc.apply(this,arguments)}function wc(){return wc=(0,Le.Z)(function*(i,e,t,a){const d=Vt(i),p=yield function(v,M){const U=Vt(v),z=Vt(U.mutationQueue);return U.persistence.runTransaction("Lookup mutation documents","readonly",te=>z.Sn(te,M).next(Ee=>Ee?U.localDocuments.getDocuments(te,Ee):pe.resolve(null)))}(d.localStore,e);var M;null!==p?("pending"===t?yield Zd(d.remoteStore):"acknowledged"===t||"rejected"===t?(vm(d,e,a||null),ng(d,e),M=e,Vt(Vt(d.localStore).mutationQueue).Cn(M)):Ot(),yield dd(d,p)):At("SyncEngine","Cannot apply mutation batch with id: "+e)}),wc.apply(this,arguments)}function Bf(){return Bf=(0,Le.Z)(function*(i,e){const t=Vt(i);if(og(t),ag(t),!0===e&&!0!==t.vc){const a=t.sharedClientState.getAllActiveQueryTargets(),d=yield sg(t,a.toArray());t.vc=!0,yield qp(t.remoteStore,!0);for(const p of d)dy(t.remoteStore,p)}else if(!1===e&&!1!==t.vc){const a=[];let d=Promise.resolve();t._c.forEach((p,v)=>{t.sharedClientState.isLocalQueryTarget(v)?a.push(v):d=d.then(()=>(Ec(t,v),Wd(t.localStore,v,!0))),Af(t.remoteStore,v)}),yield d,yield sg(t,a),function(p){const v=Vt(p);v.yc.forEach((M,U)=>{Af(v.remoteStore,U)}),v.Ic.Ts(),v.yc=new Map,v.gc=new Br(qt.comparator)}(t),t.vc=!1,yield qp(t.remoteStore,!1)}}),Bf.apply(this,arguments)}function sg(i,e,t){return My.apply(this,arguments)}function My(){return My=(0,Le.Z)(function*(i,e,t){const a=Vt(i),d=[],p=[];for(const v of e){let M;const U=a._c.get(v);if(U&&0!==U.length){M=yield Gd(a.localStore,Po(U[0]));for(const z of U){const te=a.wc.get(z),Ee=yield wv(a,te);Ee.snapshot&&p.push(Ee.snapshot)}}else{const z=yield tm(a.localStore,v);M=yield Gd(a.localStore,z),yield Nh(a,eh(z),v,!1,M.resumeToken)}d.push(M)}return a.dc.nu(p),d}),My.apply(this,arguments)}function eh(i){return mh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function W_(i){const e=Vt(i);return Vt(Vt(e.localStore).persistence).$i()}function Vf(i,e,t,a){return Em.apply(this,arguments)}function Em(){return Em=(0,Le.Z)(function*(i,e,t,a){const d=Vt(i);if(d.vc)return void At("SyncEngine","Ignoring unexpected query state notification.");const p=d._c.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const v=yield Up(d.localStore,wl(p[0])),M=Al.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ze.EMPTY_BYTE_STRING);yield dd(d,v,M);break}case"rejected":yield Wd(d.localStore,e,!0),Ec(d,e,a);break;default:Ot()}}),Em.apply(this,arguments)}function Ny(i,e,t){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,Le.Z)(function*(i,e,t){const a=og(i);if(a.vc){for(const d of e){if(a._c.has(d)){At("SyncEngine","Adding an already active target "+d);continue}const p=yield tm(a.localStore,d),v=yield Gd(a.localStore,p);yield Nh(a,eh(p),v.targetId,!1,v.resumeToken),dy(a.remoteStore,v)}for(const d of t)a._c.has(d)&&(yield Wd(a.localStore,d,!1).then(()=>{Af(a.remoteStore,d),Ec(a,d)}).catch(ie))}}),Ph.apply(this,arguments)}function og(i){const e=Vt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ev.bind(null,e),e.dc.nu=xf.bind(null,e.eventManager),e.dc.Pc=vy.bind(null,e.eventManager),e}function ag(i){const e=Vt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dy.bind(null,e),e}class lg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Le.Z)(function*(){t.serializer=Sf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return kp(this.persistence,new Xg,e.initialUser,this.serializer)}createPersistence(e){return new Mp(If.zs,this.serializer)}createSharedClientState(e){return new N_}terminate(){var e=this;return(0,Le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xy extends lg{constructor(e,t,a){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,Le.Z)(function*(){yield t().call(a,e),yield a.Vc.initialize(a,e),yield ag(a.Vc.syncEngine),yield Zd(a.Vc.remoteStore),yield a.persistence.Ii(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return kp(this.persistence,new Xg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new el(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const a=new No(t,this.persistence);return new np(e.asyncQueue,a)}createPersistence(e){const t=C_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Oo.withCacheSize(this.cacheSizeBytes):Oo.DEFAULT;return new xp(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,bf(),Vp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new N_}}class Oy extends xy{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,Le.Z)(function*(){yield t().call(a,e);const d=a.Vc.syncEngine;a.sharedClientState instanceof uy&&(a.sharedClientState.syncEngine={jr:ig.bind(null,d),zr:Vf.bind(null,d),Wr:Ny.bind(null,d),$i:W_.bind(null,d),Qr:Ff.bind(null,d)},yield a.sharedClientState.start()),yield a.persistence.Ii(function(){var p=(0,Le.Z)(function*(v){yield function G_(i,e){return Bf.apply(this,arguments)}(a.Vc.syncEngine,v),a.gcScheduler&&(v&&!a.gcScheduler.started?a.gcScheduler.start():v||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(v&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():v||a.indexBackfillerScheduler.stop())});return function(v){return p.apply(this,arguments)}}())})()}createSharedClientState(e){const t=bf();if(!uy.D(t))throw new Et(it.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=C_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uy(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class jf{initialize(e,t){var a=this;return(0,Le.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=d=>_m(a.syncEngine,d,1),a.remoteStore.remoteSyncer.handleCredentialChange=$_.bind(null,a.syncEngine),yield qp(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new U_}createDatastore(e){const t=Sf(e.databaseInfo.databaseId),a=new ud(e.databaseInfo);return new yv(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,d=e.asyncQueue,p=M=>_m(this.syncEngine,M,0),v=am.D()?new am:new P_,new yc(t,a,d,p,v);var t,a,d,p,v}createSyncEngine(e,t){return function(a,d,p,v,M,U,z){const te=new V_(a,d,p,v,M,U);return z&&(te.vc=!0),te}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Le.Z)(function*(t){const a=Vt(t);At("RemoteStore","RemoteStore shutting down."),a.vu.add(5),yield ld(a),a.Pu.shutdown(),a.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ky(i,e=10240){let t=0;return{read:()=>(0,Le.Z)(function*(){if(t<i.byteLength){const a={value:i.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,Le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class cg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ly{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ri,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(a=>{a&&a.Qu()?this.metadata.resolve(a.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(a?.Gu)}`))},a=>this.metadata.reject(a))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Le.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Le.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Le.Z)(function*(){const t=yield e.kc();if(null===t)return null;const a=e.xc.decode(t),d=Number(a);isNaN(d)&&e.Mc(`length string (${a}) is not valid number`);const p=yield e.$c(d);return new _v(JSON.parse(p),t.length+d)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Le.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}$c(e){var t=this;return(0,Le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const a=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Le.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class Fy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Et(it.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(d=(0,Le.Z)(function*(p,v){const M=Vt(p),U=Ud(M.serializer)+"/documents",z={documents:v.map(_t=>Rl(M.serializer,_t))},te=yield M.vo("BatchGetDocuments",U,z,v.length),Ee=new Map;te.forEach(_t=>{const zt=function Ug(i,e){return"found"in e?function(t,a){vn(!!a.found);const d=Qu(t,a.found.name),p=_s(a.found.updateTime),v=a.found.createTime?_s(a.found.createTime):wn.min(),M=new ms({mapValue:{fields:a.found.fields}});return Mi.newFoundDocument(d,p,v,M)}(i,e):"missing"in e?function(t,a){vn(!!a.missing),vn(!!a.readTime);const d=Qu(t,a.missing),p=_s(a.readTime);return Mi.newNoDocument(d,p)}(i,e):Ot()}(M.serializer,_t);Ee.set(zt.key.toString(),zt)});const rt=[];return v.forEach(_t=>{const zt=Ee.get(_t.toString());vn(!!zt),rt.push(zt)}),rt}),function(p,v){return d.apply(this,arguments)})(t.datastore,e);var d;return a.forEach(d=>t.recordVersion(d)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Od(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,d)=>{const p=qt.fromPath(d);e.mutations.push(new df(p,e.precondition(p)))}),yield(a=(0,Le.Z)(function*(d,p){const v=Vt(d),M=Ud(v.serializer)+"/documents",U={writes:p.map(z=>mr(v.serializer,z))};yield v.Io("Commit",M,U)}),function(d,p){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ot();t=wn.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new Et(it.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wn.min())?Hi.exists(!1):Hi.updateTime(t):Hi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wn.min()))throw new Et(it.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hi.updateTime(t)}return Hi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Wa{constructor(e,t,a,d,p){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=d,this.deferred=p,this.Bc=a.maxAttempts,this.qo=new cy(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Le.Z)(function*(){const t=new Fy(e.datastore),a=e.qc(t);a&&a.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(p=>{e.Uc(p)}))}).catch(d=>{e.Uc(d)})}))}qc(e){try{const t=this.updateFunction(e);return!xa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ke(t)}return!1}}class wm{constructor(e,t,a,d){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=d,this.user=Rn.UNAUTHENTICATED,this.clientId=pl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var v=(0,Le.Z)(function*(M){At("FirestoreClient","Received user=",M.uid),yield p.authCredentialListener(M),p.user=M});return function(M){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(a,v=>(At("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,Le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Et(it.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Le.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const d=vc(a,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function ou(i,e){return $f.apply(this,arguments)}function $f(){return $f=(0,Le.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),At("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,Le.Z)(function*(p){a.isEqual(p)||(yield Jg(e.localStore,p),a=p)});return function(p){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),$f.apply(this,arguments)}function au(i,e){return hd.apply(this,arguments)}function hd(){return hd=(0,Le.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Im(i);At("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield e.initialize(t,a),i.setCredentialChangeListener(d=>Mf(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,p)=>Mf(e.remoteStore,p)),i._onlineComponents=e}),hd.apply(this,arguments)}function Uy(i){return"FirebaseError"===i.name?i.code===it.FAILED_PRECONDITION||i.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Im(i){return fd.apply(this,arguments)}function fd(){return fd=(0,Le.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){At("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ou(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Uy(t))throw t;ps("Error using user provided cache. Falling back to memory cache: "+t),yield ou(i,new lg)}}else At("FirestoreClient","Using default OfflineComponentProvider"),yield ou(i,new lg);return i._offlineComponents}),fd.apply(this,arguments)}function By(i){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Le.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(At("FirestoreClient","Using user provided OnlineComponentProvider"),yield au(i,i._uninitializedComponentsProvider._online)):(At("FirestoreClient","Using default OnlineComponentProvider"),yield au(i,new jf))),i._onlineComponents}),Tm.apply(this,arguments)}function Vy(i){return Im(i).then(e=>e.persistence)}function Hf(i){return Im(i).then(e=>e.localStore)}function Iv(i){return By(i).then(e=>e.remoteStore)}function Cm(i){return By(i).then(e=>e.syncEngine)}function dg(i){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,Le.Z)(function*(i){const e=yield By(i),t=e.eventManager;return t.onListen=Ty.bind(null,e.syncEngine),t.onUnlisten=rl.bind(null,e.syncEngine),t}),Ic.apply(this,arguments)}function $y(i,e,t={}){const a=new ri;return i.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return function(d,p,v,M,U){const z=new cg({next:Ee=>{p.enqueueAndForget(()=>pm(d,te));const rt=Ee.docs.has(v);!rt&&Ee.fromCache?U.reject(new Et(it.UNAVAILABLE,"Failed to get document because the client is offline.")):rt&&Ee.fromCache&&M&&"server"===M.source?U.reject(new Et(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):U.resolve(Ee)},error:Ee=>U.reject(Ee)}),te=new Ha(jc(v.path),z,{includeMetadataChanges:!0,Ku:!0});return _y(d,te)}(yield dg(i),i.asyncQueue,e,t,a)})),a.promise}function xh(i,e,t={}){const a=new ri;return i.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return function(d,p,v,M,U){const z=new cg({next:Ee=>{p.enqueueAndForget(()=>pm(d,te)),Ee.fromCache&&"server"===M.source?U.reject(new Et(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):U.resolve(Ee)},error:Ee=>U.reject(Ee)}),te=new Ha(v,z,{includeMetadataChanges:!0,Ku:!0});return _y(d,te)}(yield dg(i),i.asyncQueue,e,t,a)})),a.promise}function bm(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Oh=new Map;function nh(i,e,t){if(!t)throw new Et(it.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function rh(i,e,t,a){if(!0===e&&!0===a)throw new Et(it.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function kh(i){if(!qt.isDocumentKey(i))throw new Et(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Lh(i){if(qt.isDocumentKey(i))throw new Et(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function pd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Ot()}function Dr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Et(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pd(i);throw new Et(it.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Fh(i,e){if(e<=0)throw new Et(it.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Uh{constructor(e){var t,a;if(void 0===e.host){if(void 0!==e.ssl)throw new Et(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Et(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=bm(null!==(a=e.experimentalLongPollingOptions)&&void 0!==a?a:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Et(it.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Et(it.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Et(it.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,t,a,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Et(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Et(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uh(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oh;switch(t.type){case"firstParty":return new Pa(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Et(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Oh.get(e);t&&(At("ComponentProvider","Removing Datastore"),Oh.delete(e),t.terminate())}(this),Promise.resolve()}}class es{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}}class ko{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ko(this.firestore,e,this._query)}}class Vl extends ko{constructor(e,t,a){super(e,t,jc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new qt(e))}withConverter(e){return new Vl(this.firestore,e,this._path)}}function zy(i,e,...t){if(i=(0,Ce.m9)(i),nh("collection","path",e),i instanceof zf){const a=qn.fromString(e,...t);return Lh(a),new Vl(i,null,a)}{if(!(i instanceof es||i instanceof Vl))throw new Et(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(qn.fromString(e,...t));return Lh(a),new Vl(i.firestore,null,a)}}function pg(i,e,...t){if(i=(0,Ce.m9)(i),1===arguments.length&&(e=pl.A()),nh("doc","path",e),i instanceof zf){const a=qn.fromString(e,...t);return kh(a),new es(i,null,new qt(a))}{if(!(i instanceof es||i instanceof Vl))throw new Et(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(qn.fromString(e,...t));return kh(a),new es(i.firestore,i instanceof Vl?i.converter:null,new qt(a))}}function Gy(i,e){return i=(0,Ce.m9)(i),e=(0,Ce.m9)(e),(i instanceof es||i instanceof Vl)&&(e instanceof es||e instanceof Vl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function gg(i,e){return i=(0,Ce.m9)(i),e=(0,Ce.m9)(e),i instanceof ko&&e instanceof ko&&i.firestore===e.firestore&&qu(i._query,e._query)&&i.converter===e.converter}class Tv{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new cy(this,"async_queue_retry"),this.Xc=()=>{const t=Vp();t&&At("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Vp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Vp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ri;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Le.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!da(t))throw t;At("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(a=>{throw this.Wc=a,this.Hc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(p){let v=p.message||"";return p.stack&&(v=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),v}(a)),a}).then(a=>(this.Hc=!1,a))));return this.Gc=t,t}enqueueAfterDelay(e,t,a){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const d=Nf.createAndSchedule(this,e,t,a,p=>this.na(p));return this.zc.push(d),d}Zc(){this.Wc&&Ot()}verifyOperationInProgress(){}sa(){var e=this;return(0,Le.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function il(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const d of["next","error","complete"])if(d in a&&"function"==typeof a[d])return!0;return!1}(i)}class nE{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ts extends zf{constructor(e,t,a,d){super(e,t,a,d),this.type="firestore",this._queue=new Tv,this._persistenceKey=d?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||q_(this),this._firestoreClient.terminate()}}function oo(i){return i._firestoreClient||q_(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function q_(i){var e,t,a;const d=i._freezeSettings(),p=(M=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ks(i._databaseId,M,i._persistenceKey,(z=d).host,z.ssl,z.experimentalForceLongPolling,z.experimentalAutoDetectLongPolling,bm(z.experimentalLongPollingOptions),z.useFetchStreams));var M,z;i._firestoreClient=new wm(i._authCredentials,i._appCheckCredentials,i._queue,p),null!==(t=d.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(a=d.cache)&&void 0!==a&&a._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:d.cache.kind,_offline:d.cache._offlineComponentProvider,_online:d.cache._onlineComponentProvider})}function mg(i,e,t){const a=new ri;return i.asyncQueue.enqueue((0,Le.Z)(function*(){try{yield ou(i,t),yield au(i,e),a.resolve()}catch(d){const p=d;if(!Uy(p))throw p;ps("Error enabling indexeddb cache. Falling back to memory cache: "+p),a.reject(p)}})).then(()=>a.promise)}function Gf(i){if(i._initialized||i._terminated)throw new Et(it.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tc(ze.fromBase64String(e))}catch(t){throw new Et(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tc(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Et(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class md{constructor(e){this._methodName=e}}class Wf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return On(this._lat,e._lat)||On(this._long,e._long)}}const rE=/^__.*__$/;class Rv{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new bl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kc(e,this.data,t,this.fieldTransforms)}}class Q_{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new bl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ot()}}class Am{constructor(e,t,a,d,p,v){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=d,void 0===p&&this.ua(),this.fieldTransforms=p||[],this.fieldMask=v||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.aa({path:a,la:!1});return d.fa(e),d}da(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.aa({path:a,la:!1});return d.ua(),d}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Tg(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(vg(this.ca)&&rE.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class X_{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Sf(e)}ya(e,t,a,d=!1){return new Am({ca:e,methodName:t,ga:a,path:or.emptyPath(),la:!1,ma:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bh(i){const e=i._freezeSettings(),t=Sf(i._databaseId);return new X_(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Rm(i,e,t,a,d,p={}){const v=i.ya(p.merge||p.mergeFields?2:0,e,t,d);Zf("Data must be an object, but it was:",v,a);const M=Kf(a,v);let U,z;if(p.merge)U=new W(v.fieldMask),z=v.fieldTransforms;else if(p.mergeFields){const te=[];for(const Ee of p.mergeFields){const rt=jh(e,Ee,t);if(!v.contains(rt))throw new Et(it.INVALID_ARGUMENT,`Field '${rt}' is specified in your field mask but missing from your input data.`);xm(te,rt)||te.push(rt)}U=new W(te),z=v.fieldTransforms.filter(Ee=>U.covers(Ee.field))}else U=null,z=v.fieldTransforms;return new Rv(new ms(M),U,z)}class Mu extends md{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mu}}function vo(i,e,t){return new Am({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ea extends md{_toFieldTransform(e){return new Cl(e.path,new cc)}isEqual(e){return e instanceof Ea}}class Eg extends md{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=vo(this,e,!0),a=this.pa.map(p=>Vh(p,t)),d=new Il(a);return new Cl(e.path,d)}isEqual(e){return this===e}}class Mv extends md{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=vo(this,e,!0),a=this.pa.map(p=>Vh(p,t)),d=new Wc(a);return new Cl(e.path,d)}isEqual(e){return this===e}}class Nv extends md{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Tl(e.serializer,zc(e.serializer,this.Ia));return new Cl(e.path,t)}isEqual(e){return this===e}}function Mm(i,e,t,a){const d=i.ya(1,e,t);Zf("Data must be an object, but it was:",d,a);const p=[],v=ms.empty();pa(a,(U,z)=>{const te=Pm(e,U,t);z=(0,Ce.m9)(z);const Ee=d.da(te);if(z instanceof Mu)p.push(te);else{const rt=Vh(z,Ee);null!=rt&&(p.push(te),v.set(te,rt))}});const M=new W(p);return new Q_(v,M,d.fieldTransforms)}function wg(i,e,t,a,d,p){const v=i.ya(1,e,t),M=[jh(e,a,t)],U=[d];if(p.length%2!=0)throw new Et(it.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let rt=0;rt<p.length;rt+=2)M.push(jh(e,p[rt])),U.push(p[rt+1]);const z=[],te=ms.empty();for(let rt=M.length-1;rt>=0;--rt)if(!xm(z,M[rt])){const _t=M[rt];let zt=U[rt];zt=(0,Ce.m9)(zt);const an=v.da(_t);if(zt instanceof Mu)z.push(_t);else{const dn=Vh(zt,an);null!=dn&&(z.push(_t),te.set(_t,dn))}}const Ee=new W(z);return new Q_(te,Ee,v.fieldTransforms)}function Nm(i,e,t,a=!1){return Vh(t,i.ya(a?4:3,e))}function Vh(i,e){if(qf(i=(0,Ce.m9)(i)))return Zf("Unsupported field value:",e,i),Kf(i,e);if(i instanceof md)return function(t,a){if(!vg(a.ca))throw a._a(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a._a(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(a);d&&a.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,a){const d=[];let p=0;for(const v of t){let M=Vh(v,a.wa(p));null==M&&(M={nullValue:"NULL_VALUE"}),d.push(M),p++}return{arrayValue:{values:d}}}(i,e)}return function(t,a){if(null===(t=(0,Ce.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zc(a.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=ii.fromDate(t);return{timestampValue:Ld(a.serializer,d)}}if(t instanceof ii){const d=new ii(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ld(a.serializer,d)}}if(t instanceof Wf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tc)return{bytesValue:iu(a.serializer,t._byteString)};if(t instanceof es){const d=a.databaseId,p=t.firestore._databaseId;if(!p.isEqual(d))throw a._a(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:pp(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a._a(`Unsupported field value: ${pd(t)}`)}(i,e)}function Kf(i,e){const t={};return tc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(i,(a,d)=>{const p=Vh(d,e.ha(a));null!=p&&(t[a]=p)}),{mapValue:{fields:t}}}function qf(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ii||i instanceof Wf||i instanceof Tc||i instanceof es||i instanceof md)}function Zf(i,e,t){if(!qf(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=pd(t);throw e._a("an object"===a?i+" a custom object":i+" "+a)}var a}function jh(i,e,t){if((e=(0,Ce.m9)(e))instanceof gd)return e._internalPath;if("string"==typeof e)return Pm(i,e);throw Tg("Field path arguments must be of type string or ",i,!1,void 0,t)}const Ig=new RegExp("[~\\*/\\[\\]]");function Pm(i,e,t){if(e.search(Ig)>=0)throw Tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new gd(...e.split("."))._internalPath}catch{throw Tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Tg(i,e,t,a,d){const p=a&&!a.isEmpty(),v=void 0!==d;let M=`Function ${e}() called with invalid data`;t&&(M+=" (via `toFirestore()`)"),M+=". ";let U="";return(p||v)&&(U+=" (found",p&&(U+=` in field ${a}`),v&&(U+=` in document ${d}`),U+=")"),new Et(it.INVALID_ARGUMENT,M+i+U)}function xm(i,e){return i.some(t=>t.isEqual(e))}class $h{constructor(e,t,a,d,p){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=d,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yy extends $h{data(){return super.data()}}function Yf(i,e){return"string"==typeof e?Pm(i,e):e instanceof gd?e._internalPath:e._delegate._internalPath}function Qy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Et(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class Qf extends Xy{}function Cc(i,e,...t){let a=[];e instanceof Xy&&a.push(e),a=a.concat(t),function(d){const p=d.filter(M=>M instanceof zh).length,v=d.filter(M=>M instanceof Hh).length;if(p>1||p>0&&v>0)throw new Et(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const d of a)i=d._apply(i);return i}class Hh extends Qf{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Hh(e,t,a)}_apply(e){const t=this._parse(e);return l(e._query,t),new ko(e.firestore,e.converter,Rd(e._query,t))}_parse(e){const t=Bh(e.firestore);return function(d,p,v,M,U,z,te){let Ee;if(U.isKeyField()){if("array-contains"===z||"array-contains-any"===z)throw new Et(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if("in"===z||"not-in"===z){n_(te,z);const rt=[];for(const _t of te)rt.push(t_(M,d,_t));Ee={arrayValue:{values:rt}}}else Ee=t_(M,d,te)}else"in"!==z&&"not-in"!==z&&"array-contains-any"!==z||n_(te,z),Ee=Nm(v,"where",te,"in"===z||"not-in"===z);return Or.create(U,z,Ee)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class zh extends Xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zh(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return 1===t.length?t[0]:Jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,d){let p=a;const v=d.getFlattenedFilters();for(const M of v)l(p,M),p=Rd(p,M)}(e._query,t),new ko(e.firestore,e.converter,Rd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Om extends Qf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Om(e,t)}_apply(e){const t=function(a,d,p){if(null!==a.startAt)throw new Et(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Et(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Cd(d,p);return function(M,U){if(null===Gs(M)){const z=Ad(M);null!==z&&s(0,z,U.field)}}(a,v),v}(e._query,this._field,this._direction);return new ko(e.firestore,e.converter,function(a,d){const p=a.explicitOrderBy.concat([d]);return new ac(a.path,a.collectionGroup,p,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class km extends Qf{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new km(e,t,a)}_apply(e){return new ko(e.firestore,e.converter,$c(e._query,this._limit,this._limitType))}}class Lm extends Qf{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new Lm(e,t,a)}_apply(e){const t=e_(e,this.type,this._docOrFields,this._inclusive);return new ko(e.firestore,e.converter,(d=t,new ac((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,d,a.endAt)));var a,d}}class Cg extends Qf{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new Cg(e,t,a)}_apply(e){const t=e_(e,this.type,this._docOrFields,this._inclusive);return new ko(e.firestore,e.converter,(d=t,new ac((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,d)));var a,d}}function e_(i,e,t,a){if(t[0]=(0,Ce.m9)(t[0]),t[0]instanceof $h)return function(d,p,v,M,U){if(!M)throw new Et(it.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const z=[];for(const te of Ku(d))if(te.field.isKeyField())z.push(Rs(p,M.key));else{const Ee=M.data.field(te.field);if(Yn(Ee))throw new Et(it.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+te.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ee){const rt=te.field.canonicalString();throw new Et(it.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${rt}' (used as the orderBy) does not exist.`)}z.push(Ee)}return new Gu(z,U)}(i._query,i.firestore._databaseId,e,t[0]._document,a);{const d=Bh(i.firestore);return function(p,v,M,U,z,te){const Ee=p.explicitOrderBy;if(z.length>Ee.length)throw new Et(it.INVALID_ARGUMENT,`Too many arguments provided to ${U}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const rt=[];for(let _t=0;_t<z.length;_t++){const zt=z[_t];if(Ee[_t].field.isKeyField()){if("string"!=typeof zt)throw new Et(it.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${U}(), but got a ${typeof zt}`);if(!uc(p)&&-1!==zt.indexOf("/"))throw new Et(it.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${U}() must be a plain document ID, but '${zt}' contains a slash.`);const an=p.path.child(qn.fromString(zt));if(!qt.isDocumentKey(an))throw new Et(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${U}() must result in a valid document path, but '${an}' is not because it contains an odd number of segments.`);const dn=new qt(an);rt.push(Rs(v,dn))}else{const an=Nm(M,U,zt);rt.push(an)}}return new Gu(rt,te)}(i._query,i.firestore._databaseId,d,e,t,a)}}function t_(i,e,t){if("string"==typeof(t=(0,Ce.m9)(t))){if(""===t)throw new Et(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uc(e)&&-1!==t.indexOf("/"))throw new Et(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(qn.fromString(t));if(!qt.isDocumentKey(a))throw new Et(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Rs(i,new qt(a))}if(t instanceof es)return Rs(i,t._key);throw new Et(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(t)}.`)}function n_(i,e){if(!Array.isArray(i)||0===i.length)throw new Et(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l(i,e){if(e.isInequality()){const a=Ad(i),d=e.field;if(null!==a&&!a.isEqual(d))throw new Et(it.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${a.toString()}' and '${d.toString()}'`);const p=Gs(i);null!==p&&s(0,d,p)}const t=function(a,d){for(const p of a)for(const v of p.getFlattenedFilters())if(d.indexOf(v.op)>=0)return v.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Et(it.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function s(i,e,t){if(!t.isEqual(e))throw new Et(it.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class c{convertValue(e,t="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ot()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return pa(e,(d,p)=>{a[d]=this.convertValue(p,t)}),a}convertGeoPoint(e){return new Wf(Ft(e.latitude),Ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Cn(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(xr(e));default:return null}}convertTimestamp(e){const t=en(e);return new ii(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=qn.fromString(e);vn(m_(a));const d=new so(a.get(1),a.get(3)),p=new qt(a.popFirst(5));return d.isEqual(t)||Pr(`Document ${p} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function g(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}class E extends c{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,t)}}class De{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ge extends $h{constructor(e,t,a,d,p,v){super(e,t,a,d,v),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ct(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Yf("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class ct extends Ge{data(e={}){return super.data(e)}}class ht{constructor(e,t,a,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new De(d.hasPendingWrites,d.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new ct(this._firestore,this._userDataWriter,a.key,a,new De(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,d){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map(v=>({type:"added",doc:new ct(a._firestore,a._userDataWriter,v.doc.key,v.doc,new De(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:p++}))}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(v=>d||3!==v.type).map(v=>{const M=new ct(a._firestore,a._userDataWriter,v.doc.key,v.doc,new De(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let U=-1,z=-1;return 0!==v.type&&(U=p.indexOf(v.doc.key),p=p.delete(v.doc.key)),1!==v.type&&(p=p.add(v.doc),z=p.indexOf(v.doc.key)),{type:Wt(v.type),doc:M,oldIndex:U,newIndex:z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wt(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ot()}}function In(i,e){return i instanceof Ge&&e instanceof Ge?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ht&&e instanceof ht&&i._firestore===e._firestore&&gg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class ur extends c{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,t)}}function na(i,e,t){i=Dr(i,es);const a=Dr(i.firestore,ts),d=g(i.converter,e,t);return ih(a,[Rm(Bh(a),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,Hi.none())])}function Eo(i,e,t,...a){i=Dr(i,es);const d=Dr(i.firestore,ts),p=Bh(d);let v;return v="string"==typeof(e=(0,Ce.m9)(e))||e instanceof gd?wg(p,"updateDoc",i._key,e,t,a):Mm(p,"updateDoc",i._key,e),ih(d,[v.toMutation(i._key,Hi.exists(!0))])}function Gh(i,...e){var t,a,d;i=(0,Ce.m9)(i);let p={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||il(e[v])||(p=e[v],v++);const M={includeMetadataChanges:p.includeMetadataChanges};if(il(e[v])){const Ee=e[v];e[v]=null===(t=Ee.next)||void 0===t?void 0:t.bind(Ee),e[v+1]=null===(a=Ee.error)||void 0===a?void 0:a.bind(Ee),e[v+2]=null===(d=Ee.complete)||void 0===d?void 0:d.bind(Ee)}let U,z,te;if(i instanceof es)z=Dr(i.firestore,ts),te=jc(i._key.path),U={next:Ee=>{e[v]&&e[v](r_(z,i,Ee))},error:e[v+1],complete:e[v+2]};else{const Ee=Dr(i,ko);z=Dr(Ee.firestore,ts),te=Ee._query;const rt=new ur(z);U={next:_t=>{e[v]&&e[v](new ht(z,rt,Ee,_t))},error:e[v+1],complete:e[v+2]},Qy(i._query)}return function(Ee,rt,_t,zt){const an=new cg(zt),dn=new Ha(rt,an,_t);return Ee.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return _y(yield dg(Ee),dn)})),()=>{an.Dc(),Ee.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return pm(yield dg(Ee),dn)}))}}(oo(z),te,M,U)}function ih(i,e){return function(t,a){const d=new ri;return t.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return function vv(i,e,t){return za.apply(this,arguments)}(yield Cm(t),a,d)})),d.promise}(oo(i),e)}function r_(i,e,t){const a=t.docs.get(e._key),d=new ur(i);return new Ge(i,d,e._key,a,new De(t.hasPendingWrites,t.fromCache),e.converter)}const Xf={maxAttempts:5};class sh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bh(e)}set(e,t,a){this._verifyNotCommitted();const d=Jf(e,this._firestore),p=g(d.converter,t,a),v=Rm(this._dataReader,"WriteBatch.set",d._key,p,null!==d.converter,a);return this._mutations.push(v.toMutation(d._key,Hi.none())),this}update(e,t,a,...d){this._verifyNotCommitted();const p=Jf(e,this._firestore);let v;return v="string"==typeof(t=(0,Ce.m9)(t))||t instanceof gd?wg(this._dataReader,"WriteBatch.update",p._key,t,a,d):Mm(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(v.toMutation(p._key,Hi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jf(e,this._firestore);return this._mutations=this._mutations.concat(new Od(t._key,Hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(it.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jf(i,e){if((i=(0,Ce.m9)(i)).firestore!==e)throw new Et(it.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class iE extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bh(e)}get(e){const t=Jf(e,this._firestore),a=new E(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return Ot();const p=d[0];if(p.isFoundDocument())return new $h(this._firestore,a,p.key,p,t.converter);if(p.isNoDocument())return new $h(this._firestore,a,t._key,null,t.converter);throw Ot()})}set(e,t,a){const d=Jf(e,this._firestore),p=g(d.converter,t,a),v=Rm(this._dataReader,"Transaction.set",d._key,p,null!==d.converter,a);return this._transaction.set(d._key,v),this}update(e,t,a,...d){const p=Jf(e,this._firestore);let v;return v="string"==typeof(t=(0,Ce.m9)(t))||t instanceof gd?wg(this._dataReader,"Transaction.update",p._key,t,a,d):Mm(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,v),this}delete(e){const t=Jf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jf(e,this._firestore),a=new ur(this._firestore);return super.get(e).then(d=>new Ge(this._firestore,a,t._key,d._document,new De(!1,!1),t.converter))}}function i_(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Et("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function s_(){if(typeof Uint8Array>"u")throw new Et("unimplemented","Uint8Arrays are not available in this environment.")}function Uv(){if(!function Oe(){return typeof atob<"u"}())throw new Et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){_u=Mt.SDK_VERSION,(0,Mt._registerComponent)(new fe.wA("firestore",(t,{instanceIdentifier:a,options:d})=>{const p=t.getProvider("app").getImmediate(),v=new ts(new ah(t.getProvider("auth-internal")),new vu(t.getProvider("app-check-internal")),function(M,U){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new Et(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new so(M.options.projectId,U)}(p,a),p);return d=Object.assign({useFetchStreams:e},d),v._setSettings(d),v},"PUBLIC").setMultipleInstances(!0)),(0,Mt.registerVersion)(St,"3.13.0",i),(0,Mt.registerVersion)(St,"3.13.0","esm2017")}();class Um{constructor(e){this._delegate=e}static fromBase64String(e){return Uv(),new Um(Tc.fromBase64String(e))}static fromUint8Array(e){return s_(),new Um(Tc.fromUint8Array(e))}toBase64(){return Uv(),this._delegate.toBase64()}toUint8Array(){return s_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ov(i){return function aE(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(i,["next","error","complete"])}class uE{enableIndexedDbPersistence(e,t){return function Dv(i,e){Gf(i=Dr(i,ts));const t=oo(i);if(t._uninitializedComponentsProvider)throw new Et(it.FAILED_PRECONDITION,"SDK cache is already specified.");ps("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const a=i._freezeSettings(),d=new jf;return mg(t,d,new xy(d,a.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bv(i){Gf(i=Dr(i,ts));const e=oo(i);if(e._uninitializedComponentsProvider)throw new Et(it.FAILED_PRECONDITION,"SDK cache is already specified.");ps("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),a=new jf;return mg(e,a,new Oy(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yg(i){if(i._initialized&&!i._terminated)throw new Et(it.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Le.Z)(function*(){try{yield(t=(0,Le.Z)(function*(a){if(!tn.D())return Promise.resolve();const d=a+"main";yield tn.delete(d)}),function(a){return t.apply(this,arguments)})(C_(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Bv{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof so||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ps("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function Hy(i,e,t,a={}){var d;const p=(i=Dr(i,zf))._getSettings(),v=`${e}:${t}`;if("firestore.googleapis.com"!==p.host&&p.host!==v&&ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},p),{host:v,ssl:!1})),a.mockUserToken){let M,U;if("string"==typeof a.mockUserToken)M=a.mockUserToken,U=Rn.MOCK_USER;else{M=(0,Ce.Sg)(a.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const z=a.mockUserToken.sub||a.mockUserToken.user_id;if(!z)throw new Et(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");U=new Rn(z)}i._authCredentials=new Bu(new js(M,U))}}(this._delegate,e,t,a)}enableNetwork(){return function qy(i){return function Dm(i){return i.asyncQueue.enqueue((0,Le.Z)(function*(){const e=yield Vy(i),t=yield Iv(i);return e.setNetworkEnabled(!0),function(a){const d=Vt(a);return d.vu.delete(0),Du(d)}(t)}))}(oo(i=Dr(i,ts)))}(this._delegate)}disableNetwork(){return function Zy(i){return function hg(i){return i.asyncQueue.enqueue((0,Le.Z)(function*(){const e=yield Vy(i),t=yield Iv(i);return e.setNetworkEnabled(!1),(a=(0,Le.Z)(function*(d){const p=Vt(d);p.vu.add(0),yield ld(p),p.bu.set("Offline")}),function(d){return a.apply(this,arguments)})(t);var a}))}(oo(i=Dr(i,ts)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,rh("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Ky(i){return function(e){const t=new ri;return e.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return function Lf(i,e){return tg.apply(this,arguments)}(yield Cm(e),t)})),t.promise}(oo(i=Dr(i,ts)))}(this._delegate)}onSnapshotsInSync(e){return function Wh(i,e){return function ea(i,e){const t=new cg(e);return i.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return a=yield dg(i),d=t,Vt(a).ku.add(d),void d.next();var a,d})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return a=yield dg(i),d=t,void Vt(a).ku.delete(d);var a,d}))}}(oo(i=Dr(i,ts)),il(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bm(this,zy(this._delegate,e))}catch(t){throw Nu(t,"collection()","Firestore.collection()")}}doc(e){try{return new Dc(this,pg(this._delegate,e))}catch(t){throw Nu(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pu(this,function K_(i,e){if(i=Dr(i,zf),nh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Et(it.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ko(i,null,(t=e,new ac(qn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Nu(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function kE(i,e,t){i=Dr(i,ts);const a=Object.assign(Object.assign({},Xf),t);return function(d){if(d.maxAttempts<1)throw new Et(it.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(d,p,v){const M=new ri;return d.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){const U=yield function jy(i){return By(i).then(e=>e.datastore)}(d);new Wa(d.asyncQueue,U,v,p,M).run()})),M.promise}(oo(i),d=>e(new iE(i,d)),a)}(this._delegate,t=>e(new cE(this,t)))}batch(){return oo(this._delegate),new dE(new sh(this._delegate,e=>ih(this._delegate,e)))}loadBundle(e){return function Z_(i,e){const t=oo(i=Dr(i,ts)),a=new nE;return function th(i,e,t,a){const d=function(p,v){let M;return M="string"==typeof p?fn().encode(p):p,U=function(U,z){if(U instanceof Uint8Array)return ky(U,z);if(U instanceof ArrayBuffer)return ky(new Uint8Array(U),z);if(U instanceof ReadableStream)return U.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new Ly(U,v);var U}(t,Sf(e));i.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){!function ug(i,e,t){const a=Vt(i);var d;(d=(0,Le.Z)(function*(p,v,M){try{const U=yield v.getMetadata();if(yield function(rt,_t){const zt=Vt(rt),an=_s(_t.createTime);return zt.persistence.runTransaction("hasNewerBundle","readonly",dn=>zt.qs.getBundleMetadata(dn,_t.id)).then(dn=>!!dn&&dn.createTime.compareTo(an)>=0)}(p.localStore,U))return yield v.close(),M._completeWith({taskState:"Success",documentsLoaded:(rt=U).totalDocuments,bytesLoaded:rt.totalBytes,totalDocuments:rt.totalDocuments,totalBytes:rt.totalBytes}),Promise.resolve(new Set);M._updateProgress(Qp(U));const z=new wy(U,p.localStore,v.serializer);let te=yield v.bc();for(;te;){const rt=yield z.zu(te);rt&&M._updateProgress(rt),te=yield v.bc()}const Ee=yield z.complete();return yield dd(p,Ee.Ju,void 0),yield function(rt,_t){const zt=Vt(rt);return zt.persistence.runTransaction("Save bundle","readwrite",an=>zt.qs.saveBundleMetadata(an,_t))}(p.localStore,U),M._completeWith(Ee.progress),Promise.resolve(Ee.Hu)}catch(U){return ps("SyncEngine",`Loading bundle failed with ${U}`),M._failWith(U),Promise.resolve(new Set)}var rt}),function(p,v,M){return d.apply(this,arguments)})(a,e,t).then(d=>{a.sharedClientState.notifyBundleLoaded(d)})}(yield Cm(i),d,a)}))}(t,i._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function Sv(i,e){return function uu(i,e){return i.asyncQueue.enqueue((0,Le.Z)(function*(){return function(t,a){const d=Vt(t);return d.persistence.runTransaction("Get named query","readonly",p=>d.qs.getNamedQuery(p,a))}(yield Hf(i),e)}))}(oo(i=Dr(i,ts)),e).then(t=>t?new ko(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Pu(this,t):null)}}class o_ extends c{constructor(e){super(),this.firestore=e}convertBytes(e){return new Um(new Tc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Dc.forKey(t,this.firestore,null)}}class cE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new o_(e)}get(e){const t=bg(e);return this._delegate.get(t).then(a=>new a_(this._firestore,new Ge(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const d=bg(e);return a?(i_("Transaction.set",a),this._delegate.set(d,t,a)):this._delegate.set(d,t),this}update(e,t,a,...d){const p=bg(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,a,...d),this}delete(e){const t=bg(e);return this._delegate.delete(t),this}}class dE{constructor(e){this._delegate=e}set(e,t,a){const d=bg(e);return a?(i_("WriteBatch.set",a),this._delegate.set(d,t,a)):this._delegate.set(d,t),this}update(e,t,a,...d){const p=bg(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,a,...d),this}delete(e){const t=bg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dg{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new ct(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new u_(this._firestore,a),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=Dg.INSTANCES;let d=a.get(e);d||(d=new WeakMap,a.set(e,d));let p=d.get(t);return p||(p=new Dg(e,new o_(e),t),d.set(t,p)),p}}Dg.INSTANCES=new WeakMap;class Dc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new o_(e)}static forPath(e,t,a){if(e.length%2!=0)throw new Et("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Dc(t,new es(t._delegate,a,new qt(e)))}static forKey(e,t,a){return new Dc(t,new es(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new Bm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bm(this.firestore,zy(this._delegate,e))}catch(t){throw Nu(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ce.m9)(e))instanceof es&&Gy(this._delegate,e)}set(e,t){t=i_("DocumentReference.set",t);try{return t?na(this._delegate,e,t):na(this._delegate,e)}catch(a){throw Nu(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?Eo(this._delegate,e):Eo(this._delegate,e,t,...a)}catch(d){throw Nu(d,"updateDoc()","DocumentReference.update()")}}delete(){return function yd(i){return ih(Dr(i.firestore,ts),[new Od(i._key,Hi.none())])}(this._delegate)}onSnapshot(...e){const t=hE(e),a=fE(e,d=>new a_(this.firestore,new Ge(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Gh(this._delegate,t,a)}get(e){let t;return t="cache"===e?.source?function kr(i){i=Dr(i,es);const e=Dr(i.firestore,ts),t=oo(e),a=new ur(e);return function fg(i,e){const t=new ri;return i.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return(a=(0,Le.Z)(function*(d,p,v){try{const M=yield function(U,z){const te=Vt(U);return te.persistence.runTransaction("read document","readonly",Ee=>te.localDocuments.getDocument(Ee,z))}(d,p);M.isFoundDocument()?v.resolve(M):M.isNoDocument()?v.resolve(null):v.reject(new Et(it.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const U=vc(M,`Failed to get document '${p} from cache`);v.reject(U)}}),function(d,p,v){return a.apply(this,arguments)})(yield Hf(i),e,t);var a})),t.promise}(t,i._key).then(d=>new Ge(e,a,i._key,d,new De(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function Wr(i){i=Dr(i,es);const e=Dr(i.firestore,ts);return $y(oo(e),i._key,{source:"server"}).then(t=>r_(e,i,t))}(this._delegate):function Nn(i){i=Dr(i,es);const e=Dr(i.firestore,ts);return $y(oo(e),i._key).then(t=>r_(e,i,t))}(this._delegate),t.then(a=>new a_(this.firestore,new Ge(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new Dc(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}function Nu(i,e,t){return i.message=i.message.replace(e,t),i}function hE(i){for(const e of i)if("object"==typeof e&&!ov(e))return e;return{}}function fE(i,e){var t,a;let d;return d=ov(i[0])?i[0]:ov(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{d.next&&d.next(e(p))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(a=d.complete)||void 0===a?void 0:a.bind(d)}}class a_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Dc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return In(this._delegate,e._delegate)}}class u_ extends a_{data(e){const t=this._delegate.data(e);return function Rc(i,e){i||Ot()}(void 0!==t),t}}class Pu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new o_(e)}where(e,t,a){try{return new Pu(this.firestore,Cc(this._delegate,function Jy(i,e,t){const a=e,d=Yf("where",i);return Hh._create(d,a,t)}(e,t,a)))}catch(d){throw Nu(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Pu(this.firestore,Cc(this._delegate,function J_(i,e="asc"){const t=e,a=Yf("orderBy",i);return Om._create(a,t)}(e,t)))}catch(a){throw Nu(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pu(this.firestore,Cc(this._delegate,function Ov(i){return Fh("limit",i),km._create("limit",i,"F")}(e)))}catch(t){throw Nu(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Pu(this.firestore,Cc(this._delegate,function ev(i){return Fh("limitToLast",i),km._create("limitToLast",i,"L")}(e)))}catch(t){throw Nu(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pu(this.firestore,Cc(this._delegate,function tv(...i){return Lm._create("startAt",i,!0)}(...e)))}catch(t){throw Nu(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pu(this.firestore,Cc(this._delegate,function Fm(...i){return Lm._create("startAfter",i,!1)}(...e)))}catch(t){throw Nu(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pu(this.firestore,Cc(this._delegate,function kv(...i){return Cg._create("endBefore",i,!1)}(...e)))}catch(t){throw Nu(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pu(this.firestore,Cc(this._delegate,function nv(...i){return Cg._create("endAt",i,!0)}(...e)))}catch(t){throw Nu(t,"endAt()","Query.endAt()")}}isEqual(e){return gg(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ta(i){i=Dr(i,ko);const e=Dr(i.firestore,ts),t=oo(e),a=new ur(e);return function Bl(i,e){const t=new ri;return i.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return(a=(0,Le.Z)(function*(d,p,v){try{const M=yield Sh(d,p,!0),U=new Ul(p,M.ir),z=U.sc(M.documents),te=U.applyChanges(z,!1);v.resolve(te.snapshot)}catch(M){const U=vc(M,`Failed to execute query '${p} against cache`);v.reject(U)}}),function(d,p,v){return a.apply(this,arguments)})(yield Hf(i),e,t);var a})),t.promise}(t,i._query).then(d=>new ht(e,a,i,d))}(this._delegate):"server"===e?.source?function ao(i){i=Dr(i,ko);const e=Dr(i.firestore,ts),t=oo(e),a=new ur(e);return xh(t,i._query,{source:"server"}).then(d=>new ht(e,a,i,d))}(this._delegate):function lu(i){i=Dr(i,ko);const e=Dr(i.firestore,ts),t=oo(e),a=new ur(e);return Qy(i._query),xh(t,i._query).then(d=>new ht(e,a,i,d))}(this._delegate),t.then(a=>new Vv(this.firestore,new ht(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=hE(e),a=fE(e,d=>new Vv(this.firestore,new ht(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Gh(this._delegate,t,a)}withConverter(e){return new Pu(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}class $E{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new u_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Vv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Pu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new u_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $E(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new u_(this._firestore,a))})}isEqual(e){return In(this._delegate,e._delegate)}}class Bm extends Pu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Dc(this.firestore,e):null}doc(e){try{return new Dc(this.firestore,void 0===e?pg(this._delegate):pg(this._delegate,e))}catch(t){throw Nu(t,"doc()","CollectionReference.doc()")}}add(e){return function rv(i,e){const t=Dr(i.firestore,ts),a=pg(i),d=g(i.converter,e);return ih(t,[Rm(Bh(i.firestore),"addDoc",a._key,d,null!==i.converter,{}).toMutation(a._key,Hi.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new Dc(this.firestore,t))}isEqual(e){return Gy(this._delegate,e._delegate)}withConverter(e){return new Bm(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}function bg(i){return Dr(i,es)}class jv{constructor(...e){this._delegate=new gd(...e)}static documentId(){return new jv(or.keyField().canonicalString())}isEqual(e){return(e=(0,Ce.m9)(e))instanceof gd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sE(){return new Ea("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sg(e)}static delete(){const e=function LE(){return new Mu("deleteField")}();return e._methodName="FieldValue.delete",new Sg(e)}static arrayUnion(...e){const t=function oE(...i){return new Eg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Sg(t)}static arrayRemove(...e){const t=function sv(...i){return new Mv("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Sg(t)}static increment(e){const t=function FE(i){return new Nv("increment",i)}(e);return t._methodName="FieldValue.increment",new Sg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const HE={Firestore:Bv,GeoPoint:Wf,Timestamp:ii,Blob:Um,Transaction:cE,WriteBatch:dE,DocumentReference:Dc,DocumentSnapshot:a_,Query:Pu,QueryDocumentSnapshot:u_,QuerySnapshot:Vv,CollectionReference:Bm,FieldPath:jv,FieldValue:Sg,setLogLevel:function lE(i){!function qi(i){mo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function pE(i){(function zE(i,e){i.INTERNAL.registerComponent(new fe.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(a,d)},"PUBLIC").setServiceProps(Object.assign({},HE)))})(i,(e,t)=>new Bv(e,t,new uE)),i.registerVersion("@firebase/firestore-compat","0.3.12")}(bt.Z);var qh=B(7046),gE=B(8697),mE=B(7142);function $v(i,e){return function yE(i,e=X.z){return new Y.y(t=>{let a;return null!=e?e.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},t)}):a=i.onSnapshot({includeMetadataChanges:!0},t),()=>{a?.()}})}(i,e)}function av(i,e){return $v(i,e).pipe((0,he.U)(t=>({payload:t,type:"query"})))}function l_(i,e){return av(i,e).pipe((0,Me.O)(void 0),ae(),(0,he.U)(([t,a])=>{const d=a.payload.docChanges(),p=d.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((v,M)=>{const U=d.find(te=>te.doc.ref.isEqual(v.ref)),z=t?.payload.docs.find(te=>te.ref.isEqual(v.ref));U&&JSON.stringify(U.doc.metadata)===JSON.stringify(v.metadata)||!U&&z&&JSON.stringify(z.metadata)===JSON.stringify(v.metadata)||p.push({type:"modified",payload:{oldIndex:M,newIndex:M,type:"modified",doc:v}})}),p}))}function Hv(i,e,t){return l_(i,t).pipe((0,Ae.R)((a,d)=>function vE(i,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(i=function GE(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Zh(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Zh(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Zh(i,e.oldIndex,1)}return i}(i,a))}),i}(a,d.map(p=>p.payload),e),[]),(0,mt.x)(),(0,he.U)(a=>a.map(d=>({type:d.type,payload:d}))))}function Zh(i,e,t,...a){const d=i.slice();return d.splice(e,t,...a),d}function EE(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Ag{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=l_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,he.U)(a=>a.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,Me.O)(void 0),ae(),(0,ut.h)(([a,d])=>d.length>0||!a),(0,he.U)(([a,d])=>d),Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ae.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=EE(e);return Hv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return av(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Ne.iC)}get(e){return(0,de.D)(this.query.get(e)).pipe(Ne.iC)}add(e){return this.ref.add(e)}doc(e){return new WE(this.ref.doc(e),this.afs)}}class WE{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:d,query:p}=Rg(a,t);return new Ag(d,p,this.afs)}snapshotChanges(){return function _E(i,e){return $v(i,e).pipe((0,Me.O)(void 0),ae(),(0,he.U)(([t,a])=>a.exists?t?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,he.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,de.D)(this.ref.get(e)).pipe(Ne.iC)}}class zv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?l_(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,ut.h)(t=>t.length>0),Ne.iC):l_(this.query,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ae.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=EE(e);return Hv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return av(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(a=>a.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),Ne.iC)}get(e){return(0,de.D)(this.query.get(e)).pipe(Ne.iC)}}const KE=new I.OlP("angularfire2.enableFirestorePersistence"),Gv=new I.OlP("angularfire2.firestore.persistenceSettings"),wE=new I.OlP("angularfire2.firestore.settings"),O0=new I.OlP("angularfire2.firestore.use-emulator");function Rg(i,e=(t=>t)){return{query:e(i),ref:i}}let IE=(()=>{class i{constructor(t,a,d,p,v,M,U,z,te,Ee,rt,_t,zt,an,dn,lr,ci){this.schedulers=U;const vr=(0,kt.on)(t,M,a),Zs=te;Ee&&(0,qh.nw)(vr,M,rt,zt,an,dn,_t,lr),[this.firestore,this.persistenceEnabled$]=(0,kt.cc)(`${vr.name}.firestore`,"AngularFirestore",vr.name,()=>{const Zi=M.runOutsideAngular(()=>vr.firestore());if(p&&Zi.settings(p),Zs&&Zi.useEmulator(...Zs),d&&!(0,wt.PM)(v)){const ns=()=>{try{return(0,de.D)(Zi.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(Ka){return typeof console<"u"&&console.warn(Ka),(0,Ie.of)(!1)}};return[Zi,M.runOutsideAngular(ns)]}return[Zi,(0,Ie.of)(!1)]},[p,Zs,d])}collection(t,a){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:v}=Rg(d,a),M=this.schedulers.ngZone.run(()=>p);return new Ag(M,v,this)}collectionGroup(t,a){const d=a||(v=>v),p=this.firestore.collectionGroup(t);return new zv(d(p),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>a);return new WE(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(I.LFG(kt.Dh),I.LFG(kt.xv,8),I.LFG(KE,8),I.LFG(wE,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Ne.HU),I.LFG(Gv,8),I.LFG(O0,8),I.LFG(qh.zQ,8),I.LFG(qh.Qv,8),I.LFG(qh.L6,8),I.LFG(qh._Q,8),I.LFG(qh.rT,8),I.LFG(qh.lh,8),I.LFG(qh.f7,8),I.LFG(gE.nm,8))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),qE=(()=>{class i{constructor(){mE.Z.registerVersion("angularfire",Ne.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:KE,useValue:!0},{provide:Gv,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=I.oAB({type:i}),i.\u0275inj=I.cJS({providers:[IE]}),i})()},6304:(Zt,Je,B)=>{B.d(Je,{Dh:()=>Be,GT:()=>Ne,cc:()=>ut,hO:()=>mt,on:()=>ae,pX:()=>Ie,xv:()=>Pe});var I=B(5879),X=B(7142),Y=B(1966);Zt=B.hmd(Zt);const de=["ngOnDestroy"],Ie=(bt,Le,Mt,fe={})=>new Proxy(bt,{get:(Ze,Ce)=>Mt.runOutsideAngular(()=>{var st;if(bt[Ce])return!(null===(st=fe?.spy)||void 0===st)&&st.get&&fe.spy.get(Ce,bt[Ce]),bt[Ce];if(de.indexOf(Ce)>-1)return()=>{};const dt=Le.toPromise().then($e=>{const qe=$e&&$e[Ce];return"function"==typeof qe?qe.bind($e):qe&&qe.then?qe.then(Ct=>Mt.run(()=>Ct)):Mt.run(()=>qe)});return new Proxy(()=>{},{get:($e,qe)=>dt[qe],apply:($e,qe,Ct)=>dt.then(jt=>{var pn;const En=jt&&jt(...Ct);return!(null===(pn=fe?.spy)||void 0===pn)&&pn.apply&&fe.spy.apply(Ce,Ct,En),En})})})}),Ne=(bt,Le)=>{Le.forEach(Mt=>{Object.getOwnPropertyNames(Mt.prototype||Mt).forEach(fe=>{Object.defineProperty(bt.prototype,fe,Object.getOwnPropertyDescriptor(Mt.prototype||Mt,fe))})})};class Me{constructor(Le){return Le}}const Be=new I.OlP("angularfire2.app.options"),Pe=new I.OlP("angularfire2.app.name");function ae(bt,Le,Mt){const Ze="object"==typeof Mt&&Mt||{};Ze.name=Ze.name||"string"==typeof Mt&&Mt||"[DEFAULT]";const st=X.Z.apps.filter(dt=>dt&&dt.name===Ze.name)[0]||Le.runOutsideAngular(()=>X.Z.initializeApp(bt,Ze));try{JSON.stringify(bt)!==JSON.stringify(st.options)&&he("error",`${st.name} Firebase App already initialized with different options${Zt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Me(st)}const he=(bt,...Le)=>{(0,I.X6Q)()&&typeof console<"u"&&console[bt](...Le)},Ae={provide:Me,useFactory:ae,deps:[Be,I.R0b,[new I.FiY,Pe]]};let mt=(()=>{class bt{constructor(Mt){X.Z.registerVersion("angularfire",Y.q4.full,"core"),X.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),X.Z.registerVersion("angular",I.q4F.full,Mt.toString())}static initializeApp(Mt,fe){return{ngModule:bt,providers:[{provide:Be,useValue:Mt},{provide:Pe,useValue:fe}]}}}return bt.\u0275fac=function(Mt){return new(Mt||bt)(I.LFG(I.Lbi))},bt.\u0275mod=I.oAB({type:bt}),bt.\u0275inj=I.cJS({providers:[Ae]}),bt})();function ut(bt,Le,Mt,fe,Ze){const[,Ce,st]=globalThis.\u0275AngularfireInstanceCache.find(dt=>dt[0]===bt)||[];if(Ce)return function kt(bt,Le){try{return bt.toString()===Le.toString()}catch{return bt===Le}}(Ze,st)||(Pt("error",`${Le} was already initialized on the ${Mt} Firebase App with different settings.${wt?" You may need to reload as Firebase is not HMR aware.":""}`),Pt("warn",{is:Ze,was:st})),Ce;{const dt=fe();return globalThis.\u0275AngularfireInstanceCache.push([bt,dt,Ze]),dt}}const wt=!!Zt.hot,Pt=(bt,...Le)=>{(0,I.X6Q)()&&typeof console<"u"&&console[bt](...Le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},1966:(Zt,Je,B)=>{B.d(Je,{q4:()=>xc,iC:()=>Br,fc:()=>pa,HU:()=>ip,vb:()=>Lc,JM:()=>Xh});var I=B(5879),X=B(3182),Y=B(5861),de=B(6122),Ie=B(9058),Ne=B(4537),Me=B(7879);const Be=(P,L)=>L.some(W=>P instanceof W);let Pe,ae;const mt=new WeakMap,ut=new WeakMap,kt=new WeakMap,wt=new WeakMap,Pt=new WeakMap;let Mt={get(P,L,W){if(P instanceof IDBTransaction){if("done"===L)return ut.get(P);if("objectStoreNames"===L)return P.objectStoreNames||kt.get(P);if("store"===L)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return st(P[L])},set:(P,L,W)=>(P[L]=W,!0),has:(P,L)=>P instanceof IDBTransaction&&("done"===L||"store"===L)||L in P};function Ce(P){return"function"==typeof P?function Ze(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...L){return P.apply(dt(this),L),st(mt.get(this))}:function(...L){return st(P.apply(dt(this),L))}:function(L,...W){const ce=P.call(dt(this),L,...W);return kt.set(ce,L.sort?L.sort():[L]),st(ce)}}(P):(P instanceof IDBTransaction&&function Le(P){if(ut.has(P))return;const L=new Promise((W,ce)=>{const Oe=()=>{P.removeEventListener("complete",ze),P.removeEventListener("error",It),P.removeEventListener("abort",It)},ze=()=>{W(),Oe()},It=()=>{ce(P.error||new DOMException("AbortError","AbortError")),Oe()};P.addEventListener("complete",ze),P.addEventListener("error",It),P.addEventListener("abort",It)});ut.set(P,L)}(P),Be(P,function he(){return Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,Mt):P)}function st(P){if(P instanceof IDBRequest)return function bt(P){const L=new Promise((W,ce)=>{const Oe=()=>{P.removeEventListener("success",ze),P.removeEventListener("error",It)},ze=()=>{W(st(P.result)),Oe()},It=()=>{ce(P.error),Oe()};P.addEventListener("success",ze),P.addEventListener("error",It)});return L.then(W=>{W instanceof IDBCursor&&mt.set(W,P)}).catch(()=>{}),Pt.set(L,P),L}(P);if(wt.has(P))return wt.get(P);const L=Ce(P);return L!==P&&(wt.set(P,L),Pt.set(L,P)),L}const dt=P=>Pt.get(P);function $e(P,L,{blocked:W,upgrade:ce,blocking:Oe,terminated:ze}={}){const It=indexedDB.open(P,L),en=st(It);return ce&&It.addEventListener("upgradeneeded",Ft=>{ce(st(It.result),Ft.oldVersion,Ft.newVersion,st(It.transaction))}),W&&It.addEventListener("blocked",()=>W()),en.then(Ft=>{ze&&Ft.addEventListener("close",()=>ze()),Oe&&Ft.addEventListener("versionchange",()=>Oe())}).catch(()=>{}),en}function qe(P,{blocked:L}={}){const W=indexedDB.deleteDatabase(P);return L&&W.addEventListener("blocked",()=>L()),st(W).then(()=>{})}const Ct=["get","getKey","getAll","getAllKeys","count"],jt=["put","add","delete","clear"],pn=new Map;function En(P,L){if(!(P instanceof IDBDatabase)||L in P||"string"!=typeof L)return;if(pn.get(L))return pn.get(L);const W=L.replace(/FromIndex$/,""),ce=L!==W,Oe=jt.includes(W);if(!(W in(ce?IDBIndex:IDBObjectStore).prototype)||!Oe&&!Ct.includes(W))return;const ze=function(){var It=(0,Y.Z)(function*(en,...Ft){const sn=this.transaction(en,Oe?"readwrite":"readonly");let Yn=sn.store;return ce&&(Yn=Yn.index(Ft.shift())),(yield Promise.all([Yn[W](...Ft),Oe&&sn.done]))[0]});return function(Ft){return It.apply(this,arguments)}}();return pn.set(L,ze),ze}!function fe(P){Mt=P(Mt)}(P=>({...P,get:(L,W,ce)=>En(L,W)||P.get(L,W,ce),has:(L,W)=>!!En(L,W)||P.has(L,W)}));const Xn="@firebase/installations",Bn="0.6.4",Lr=1e4,er=`w:${Bn}`,Ue="FIS_v2",tt="https://firebaseinstallations.googleapis.com/v1",Qe=36e5,oe=new Ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ke(P){return P instanceof Ie.ZR&&P.code.includes("request-failed")}function yt({projectId:P}){return`${tt}/projects/${P}/installations`}function pt(P){return{token:P.token,requestStatus:2,expiresIn:$n(P.expiresIn),creationTime:Date.now()}}function Lt(P,L){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,Y.Z)(function*(P,L){const ce=(yield L.json()).error;return oe.create("request-failed",{requestName:P,serverCode:ce.code,serverMessage:ce.message,serverStatus:ce.status})})).apply(this,arguments)}function cn({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function Kt(P){return un.apply(this,arguments)}function un(){return(un=(0,Y.Z)(function*(P){const L=yield P();return L.status>=500&&L.status<600?P():L})).apply(this,arguments)}function $n(P){return Number(P.replace("s","000"))}function Ni(){return(Ni=(0,Y.Z)(function*({appConfig:P,heartbeatServiceProvider:L},{fid:W}){const ce=yt(P),Oe=cn(P),ze=L.getImmediate({optional:!0});if(ze){const sn=yield ze.getHeartbeatsHeader();sn&&Oe.append("x-firebase-client",sn)}const en={method:"POST",headers:Oe,body:JSON.stringify({fid:W,authVersion:Ue,appId:P.appId,sdkVersion:er})},Ft=yield Kt(()=>fetch(ce,en));if(Ft.ok){const sn=yield Ft.json();return{fid:sn.fid||W,registrationStatus:2,refreshToken:sn.refreshToken,authToken:pt(sn.authToken)}}throw yield Lt("Create Installation",Ft)})).apply(this,arguments)}function jr(P){return new Promise(L=>{setTimeout(L,P)})}const Ti=/^[cdef][\w-]{21}$/,nn="";function xn(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const W=function gn(P){return function rs(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Ti.test(W)?W:nn}catch{return nn}}function sr(P){return`${P.appName}!${P.appId}`}const Mr=new Map;function Ci(P,L){const W=sr(P);Gi(W,L),function Wn(P,L){const W=function Yt(){return!$r&&"BroadcastChannel"in self&&($r=new BroadcastChannel("[Firebase] FID Change"),$r.onmessage=P=>{Gi(P.data.key,P.data.fid)}),$r}();W&&W.postMessage({key:P,fid:L}),function Ir(){0===Mr.size&&$r&&($r.close(),$r=null)}()}(W,L)}function Gi(P,L){const W=Mr.get(P);if(W)for(const ce of W)ce(L)}let $r=null;const is="firebase-installations-database",yi=1,Fi="firebase-installations-store";let br=null;function fr(){return br||(br=$e(is,yi,{upgrade:(P,L)=>{0===L&&P.createObjectStore(Fi)}})),br}function ei(P,L){return tr.apply(this,arguments)}function tr(){return(tr=(0,Y.Z)(function*(P,L){const W=sr(P),Oe=(yield fr()).transaction(Fi,"readwrite"),ze=Oe.objectStore(Fi),It=yield ze.get(W);return yield ze.put(L,W),yield Oe.done,(!It||It.fid!==L.fid)&&Ci(P,L.fid),L})).apply(this,arguments)}function Nr(P){return An.apply(this,arguments)}function An(){return(An=(0,Y.Z)(function*(P){const L=sr(P),ce=(yield fr()).transaction(Fi,"readwrite");yield ce.objectStore(Fi).delete(L),yield ce.done})).apply(this,arguments)}function ti(P,L){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,Y.Z)(function*(P,L){const W=sr(P),Oe=(yield fr()).transaction(Fi,"readwrite"),ze=Oe.objectStore(Fi),It=yield ze.get(W),en=L(It);return void 0===en?yield ze.delete(W):yield ze.put(en,W),yield Oe.done,en&&(!It||It.fid!==en.fid)&&Ci(P,en.fid),en})).apply(this,arguments)}function we(P){return Q.apply(this,arguments)}function Q(){return Q=(0,Y.Z)(function*(P){let L;const W=yield ti(P.appConfig,ce=>{const Oe=function ne(P){return Jt(P||{fid:xn(),registrationStatus:0})}(ce),ze=function J(P,L){if(0===L.registrationStatus){if(!navigator.onLine)return{installationEntry:L,registrationPromise:Promise.reject(oe.create("app-offline"))};const W={fid:L.fid,registrationStatus:1,registrationTime:Date.now()},ce=function re(P,L){return je.apply(this,arguments)}(P,W);return{installationEntry:W,registrationPromise:ce}}return 1===L.registrationStatus?{installationEntry:L,registrationPromise:gt(P)}:{installationEntry:L}}(P,Oe);return L=ze.registrationPromise,ze.installationEntry});return W.fid===nn?{installationEntry:yield L}:{installationEntry:W,registrationPromise:L}}),Q.apply(this,arguments)}function je(){return je=(0,Y.Z)(function*(P,L){try{const W=yield function Us(P,L){return Ni.apply(this,arguments)}(P,L);return ei(P.appConfig,W)}catch(W){throw ke(W)&&409===W.customData.serverCode?yield Nr(P.appConfig):yield ei(P.appConfig,{fid:L.fid,registrationStatus:0}),W}}),je.apply(this,arguments)}function gt(P){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,Y.Z)(function*(P){let L=yield Tn(P.appConfig);for(;1===L.registrationStatus;)yield jr(100),L=yield Tn(P.appConfig);if(0===L.registrationStatus){const{installationEntry:W,registrationPromise:ce}=yield we(P);return ce||W}return L})).apply(this,arguments)}function Tn(P){return ti(P,L=>{if(!L)throw oe.create("installation-not-found");return Jt(L)})}function Jt(P){return function xt(P){return 1===P.registrationStatus&&P.registrationTime+Lr<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Hr(){return(Hr=(0,Y.Z)(function*({appConfig:P,heartbeatServiceProvider:L},W){const ce=function We(P,{fid:L}){return`${yt(P)}/${L}/authTokens:generate`}(P,W),Oe=function Mn(P,{refreshToken:L}){const W=cn(P);return W.append("Authorization",function cr(P){return`${Ue} ${P}`}(L)),W}(P,W),ze=L.getImmediate({optional:!0});if(ze){const sn=yield ze.getHeartbeatsHeader();sn&&Oe.append("x-firebase-client",sn)}const en={method:"POST",headers:Oe,body:JSON.stringify({installation:{sdkVersion:er,appId:P.appId}})},Ft=yield Kt(()=>fetch(ce,en));if(Ft.ok)return pt(yield Ft.json());throw yield Lt("Generate Auth Token",Ft)})).apply(this,arguments)}function Te(P){return be.apply(this,arguments)}function be(){return be=(0,Y.Z)(function*(P,L=!1){let W;const ce=yield ti(P.appConfig,ze=>{if(!Bt(ze))throw oe.create("not-registered");const It=ze.authToken;if(!L&&function mn(P){return 2===P.requestStatus&&!function dr(P){const L=Date.now();return L<P.creationTime||P.creationTime+P.expiresIn<L+Qe}(P)}(It))return ze;if(1===It.requestStatus)return W=function me(P,L){return ve.apply(this,arguments)}(P,L),ze;{if(!navigator.onLine)throw oe.create("app-offline");const en=function nr(P){const L={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:L})}(ze);return W=function at(P,L){return Qt.apply(this,arguments)}(P,en),en}});return W?yield W:ce.authToken}),be.apply(this,arguments)}function ve(){return(ve=(0,Y.Z)(function*(P,L){let W=yield Ve(P.appConfig);for(;1===W.authToken.requestStatus;)yield jr(100),W=yield Ve(P.appConfig);const ce=W.authToken;return 0===ce.requestStatus?Te(P,L):ce})).apply(this,arguments)}function Ve(P){return ti(P,L=>{if(!Bt(L))throw oe.create("not-registered");return function Fr(P){return 1===P.requestStatus&&P.requestTime+Lr<Date.now()}(L.authToken)?Object.assign(Object.assign({},L),{authToken:{requestStatus:0}}):L})}function Qt(){return Qt=(0,Y.Z)(function*(P,L){try{const W=yield function bn(P,L){return Hr.apply(this,arguments)}(P,L),ce=Object.assign(Object.assign({},L),{authToken:W});return yield ei(P.appConfig,ce),W}catch(W){if(!ke(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const ce=Object.assign(Object.assign({},L),{authToken:{requestStatus:0}});yield ei(P.appConfig,ce)}else yield Nr(P.appConfig);throw W}}),Qt.apply(this,arguments)}function Bt(P){return void 0!==P&&2===P.registrationStatus}function cs(){return(cs=(0,Y.Z)(function*(P){const L=P,{installationEntry:W,registrationPromise:ce}=yield we(L);return ce?ce.catch(console.error):Te(L).catch(console.error),W.fid})).apply(this,arguments)}function pr(){return pr=(0,Y.Z)(function*(P,L=!1){const W=P;return yield function vs(P){return Pi.apply(this,arguments)}(W),(yield Te(W,L)).token}),pr.apply(this,arguments)}function Pi(){return(Pi=(0,Y.Z)(function*(P){const{registrationPromise:L}=yield we(P);L&&(yield L)})).apply(this,arguments)}function _i(P){return oe.create("missing-app-config-values",{valueName:P})}const Uo="installations",qa=P=>{const L=P.getProvider("app").getImmediate(),W=function lo(P){if(!P||!P.options)throw _i("App Configuration");if(!P.name)throw _i("App Name");const L=["projectId","apiKey","appId"];for(const W of L)if(!P.options[W])throw _i(W);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(L);return{app:L,appConfig:W,heartbeatServiceProvider:(0,de._getProvider)(L,"heartbeat"),_delete:()=>Promise.resolve()}},Ui=P=>{const L=P.getProvider("app").getImmediate(),W=(0,de._getProvider)(L,Uo).getImmediate();return{getId:()=>function ss(P){return cs.apply(this,arguments)}(W),getToken:Oe=>function Tr(P){return pr.apply(this,arguments)}(W,Oe)}};(function Za(){(0,de._registerComponent)(new Ne.wA(Uo,qa,"PUBLIC")),(0,de._registerComponent)(new Ne.wA("installations-internal",Ui,"PRIVATE"))})(),(0,de.registerVersion)(Xn,Bn),(0,de.registerVersion)(Xn,Bn,"esm2017");const hi="@firebase/remote-config",Sr=new Ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class as{constructor(L,W,ce,Oe){this.client=L,this.storage=W,this.storageCache=ce,this.logger=Oe}isCachedDataFresh(L,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ce=Date.now()-W,Oe=ce<=L;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${L}. Is cache hit: ${Oe}.`),Oe}fetch(L){var W=this;return(0,Y.Z)(function*(){const[ce,Oe]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Oe&&W.isCachedDataFresh(L.cacheMaxAgeMillis,ce))return Oe;L.eTag=Oe&&Oe.eTag;const ze=yield W.client.fetch(L),It=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ze.status&&It.push(W.storage.setLastSuccessfulFetchResponse(ze)),yield Promise.all(It),ze})()}}function ho(P=navigator){return P.languages&&P.languages[0]||P.language}class us{constructor(L,W,ce,Oe,ze,It){this.firebaseInstallations=L,this.sdkVersion=W,this.namespace=ce,this.projectId=Oe,this.apiKey=ze,this.appId=It}fetch(L){var W=this;return(0,Y.Z)(function*(){const[ce,Oe]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,en={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":L.eTag||"*"},Ft={sdk_version:W.sdkVersion,app_instance_id:ce,app_instance_id_token:Oe,app_id:W.appId,language_code:ho()},sn={method:"POST",headers:en,body:JSON.stringify(Ft)},Yn=fetch(It,sn),Cn=new Promise((Ji,Ls)=>{L.signal.addEventListener(()=>{const Ja=new Error("The operation was aborted.");Ja.name="AbortError",Ls(Ja)})});let xr;try{yield Promise.race([Yn,Cn]),xr=yield Yn}catch(Ji){let Ls="fetch-client-network";throw"AbortError"===Ji?.name&&(Ls="fetch-timeout"),Sr.create(Ls,{originalErrorMessage:Ji?.message})}let ks=xr.status;const so=xr.headers.get("ETag")||void 0;let Xa,Xi;if(200===xr.status){let Ji;try{Ji=yield xr.json()}catch(Ls){throw Sr.create("fetch-client-parse",{originalErrorMessage:Ls?.message})}Xa=Ji.entries,Xi=Ji.state}if("INSTANCE_STATE_UNSPECIFIED"===Xi?ks=500:"NO_CHANGE"===Xi?ks=304:("NO_TEMPLATE"===Xi||"EMPTY_CONFIG"===Xi)&&(Xa={}),304!==ks&&200!==ks)throw Sr.create("fetch-status",{httpStatus:ks});return{status:ks,eTag:so,config:Xa}})()}}class Ca{constructor(L,W){this.client=L,this.storage=W}fetch(L){var W=this;return(0,Y.Z)(function*(){const ce=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(L,ce)})()}attemptFetch(L,{throttleEndTimeMillis:W,backoffCount:ce}){var Oe=this;return(0,Y.Z)(function*(){yield function Yr(P,L){return new Promise((W,ce)=>{const Oe=Math.max(L-Date.now(),0),ze=setTimeout(W,Oe);P.addEventListener(()=>{clearTimeout(ze),ce(Sr.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}(L.signal,W);try{const ze=yield Oe.client.fetch(L);return yield Oe.storage.deleteThrottleMetadata(),ze}catch(ze){if(!function Ta(P){if(!(P instanceof Ie.ZR&&P.customData))return!1;const L=Number(P.customData.httpStatus);return 429===L||500===L||503===L||504===L}(ze))throw ze;const It={throttleEndTimeMillis:Date.now()+(0,Ie.$s)(ce),backoffCount:ce+1};return yield Oe.storage.setThrottleMetadata(It),Oe.attemptFetch(L,It)}})()}}class Xs{constructor(L,W,ce,Oe,ze){this.app=L,this._client=W,this._storageCache=ce,this._storage=Oe,this._logger=ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pi(P,L){const W=P.target.error||void 0;return Sr.create(L,{originalErrorMessage:W&&W?.message})}const yr="app_namespace_store";class gi{constructor(L,W,ce,Oe=function Qn(){return new Promise((P,L)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=ce=>{L(pi(ce,"storage-open"))},W.onsuccess=ce=>{P(ce.target.result)},W.onupgradeneeded=ce=>{0===ce.oldVersion&&ce.target.result.createObjectStore(yr,{keyPath:"compositeKey"})}}catch(W){L(Sr.create("storage-open",{originalErrorMessage:W?.message}))}})}()){this.appId=L,this.appName=W,this.namespace=ce,this.openDbPromise=Oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(L){return this.set("last_fetch_status",L)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(L){return this.set("last_successful_fetch_timestamp_millis",L)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(L){return this.set("last_successful_fetch_response",L)}getActiveConfig(){return this.get("active_config")}setActiveConfig(L){return this.set("active_config",L)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(L){return this.set("active_config_etag",L)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(L){return this.set("throttle_metadata",L)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(L){var W=this;return(0,Y.Z)(function*(){const ce=yield W.openDbPromise;return new Promise((Oe,ze)=>{const en=ce.transaction([yr],"readonly").objectStore(yr),Ft=W.createCompositeKey(L);try{const sn=en.get(Ft);sn.onerror=Yn=>{ze(pi(Yn,"storage-get"))},sn.onsuccess=Yn=>{const Cn=Yn.target.result;Oe(Cn?Cn.value:void 0)}}catch(sn){ze(Sr.create("storage-get",{originalErrorMessage:sn?.message}))}})})()}set(L,W){var ce=this;return(0,Y.Z)(function*(){const Oe=yield ce.openDbPromise;return new Promise((ze,It)=>{const Ft=Oe.transaction([yr],"readwrite").objectStore(yr),sn=ce.createCompositeKey(L);try{const Yn=Ft.put({compositeKey:sn,value:W});Yn.onerror=Cn=>{It(pi(Cn,"storage-set"))},Yn.onsuccess=()=>{ze()}}catch(Yn){It(Sr.create("storage-set",{originalErrorMessage:Yn?.message}))}})})()}delete(L){var W=this;return(0,Y.Z)(function*(){const ce=yield W.openDbPromise;return new Promise((Oe,ze)=>{const en=ce.transaction([yr],"readwrite").objectStore(yr),Ft=W.createCompositeKey(L);try{const sn=en.delete(Ft);sn.onerror=Yn=>{ze(pi(Yn,"storage-delete"))},sn.onsuccess=()=>{Oe()}}catch(sn){ze(Sr.create("storage-delete",{originalErrorMessage:sn?.message}))}})})()}createCompositeKey(L){return[this.appId,this.appName,this.namespace,L].join()}}class $o{constructor(L){this.storage=L}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var L=this;return(0,Y.Z)(function*(){const W=L.storage.getLastFetchStatus(),ce=L.storage.getLastSuccessfulFetchTimestampMillis(),Oe=L.storage.getActiveConfig(),ze=yield W;ze&&(L.lastFetchStatus=ze);const It=yield ce;It&&(L.lastSuccessfulFetchTimestampMillis=It);const en=yield Oe;en&&(L.activeConfig=en)})()}setLastFetchStatus(L){return this.lastFetchStatus=L,this.storage.setLastFetchStatus(L)}setLastSuccessfulFetchTimestampMillis(L){return this.lastSuccessfulFetchTimestampMillis=L,this.storage.setLastSuccessfulFetchTimestampMillis(L)}setActiveConfig(L){return this.activeConfig=L,this.storage.setActiveConfig(L)}}function To(){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,Y.Z)(function*(){if(!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Es(){(0,de._registerComponent)(new Ne.wA("remote-config",function P(L,{instanceIdentifier:W}){const ce=L.getProvider("app").getImmediate(),Oe=L.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Sr.create("registration-window");if(!(0,Ie.hl)())throw Sr.create("indexed-db-unavailable");const{projectId:ze,apiKey:It,appId:en}=ce.options;if(!ze)throw Sr.create("registration-project-id");if(!It)throw Sr.create("registration-api-key");if(!en)throw Sr.create("registration-app-id");const Ft=new gi(en,ce.name,W=W||"firebase"),sn=new $o(Ft),Yn=new Me.Yd(hi);Yn.logLevel=Me.in.ERROR;const Cn=new us(Oe,de.SDK_VERSION,W,ze,It,en),xr=new Ca(Cn,Ft),ks=new as(xr,Ft,sn,Yn),so=new Xs(ce,ks,sn,Ft,Yn);return function Xt(P){const L=(0,Ie.m9)(P);L._initializePromise||(L._initializePromise=L._storageCache.loadFromStorage().then(()=>{L._isInitializationComplete=!0}))}(so),so},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(hi,"0.4.4"),(0,de.registerVersion)(hi,"0.4.4","esm2017")}();const Wi="/firebase-messaging-sw.js",zo="/firebase-cloud-messaging-push-scope",ui="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hs="https://fcmregistrations.googleapis.com/v1",Vs="google.c.a.c_id",Co="google.c.a.c_l",Da="google.c.a.ts";var Ya=function(P){return P.PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",P}(Ya||{});function Ki(P){const L=new Uint8Array(P);return btoa(String.fromCharCode(...L)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cu(P){const W=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ce=atob(W),Oe=new Uint8Array(ce.length);for(let ze=0;ze<ce.length;++ze)Oe[ze]=ce.charCodeAt(ze);return Oe}const Go="fcm_token_details_db",zl=5,ol="fcm_token_object_Store";function ba(){return ba=(0,Y.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ze=>ze.name).includes(Go))return null;let L=null;return(yield $e(Go,zl,{upgrade:(ce=(0,Y.Z)(function*(Oe,ze,It,en){var Ft;if(ze<2||!Oe.objectStoreNames.contains(ol))return;const sn=en.objectStore(ol),Yn=yield sn.index("fcmSenderId").get(P);if(yield sn.clear(),Yn)if(2===ze){const Cn=Yn;if(!Cn.auth||!Cn.p256dh||!Cn.endpoint)return;L={token:Cn.fcmToken,createTime:null!==(Ft=Cn.createTime)&&void 0!==Ft?Ft:Date.now(),subscriptionOptions:{auth:Cn.auth,p256dh:Cn.p256dh,endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:"string"==typeof Cn.vapidKey?Cn.vapidKey:Ki(Cn.vapidKey)}}}else if(3===ze){const Cn=Yn;L={token:Cn.fcmToken,createTime:Cn.createTime,subscriptionOptions:{auth:Ki(Cn.auth),p256dh:Ki(Cn.p256dh),endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:Ki(Cn.vapidKey)}}}else if(4===ze){const Cn=Yn;L={token:Cn.fcmToken,createTime:Cn.createTime,subscriptionOptions:{auth:Ki(Cn.auth),p256dh:Ki(Cn.p256dh),endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:Ki(Cn.vapidKey)}}}}),function(ze,It,en,Ft){return ce.apply(this,arguments)})})).close(),yield qe(Go),yield qe("fcm_vapid_details_db"),yield qe("undefined"),function du(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:L}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof L.auth&&L.auth.length>0&&"string"==typeof L.p256dh&&L.p256dh.length>0&&"string"==typeof L.endpoint&&L.endpoint.length>0&&"string"==typeof L.swScope&&L.swScope.length>0&&"string"==typeof L.vapidKey&&L.vapidKey.length>0}(L)?L:null;var ce}),ba.apply(this,arguments)}const Gl="firebase-messaging-database",xu=1,fs="firebase-messaging-store";let sa=null;function ul(){return sa||(sa=$e(Gl,xu,{upgrade:(P,L)=>{0===L&&P.createObjectStore(fs)}})),sa}function hu(P){return Js.apply(this,arguments)}function Js(){return Js=(0,Y.Z)(function*(P){const L=Qr(P),ce=yield(yield ul()).transaction(fs).objectStore(fs).get(L);if(ce)return ce;{const Oe=yield function al(P){return ba.apply(this,arguments)}(P.appConfig.senderId);if(Oe)return yield eo(P,Oe),Oe}}),Js.apply(this,arguments)}function eo(P,L){return oa.apply(this,arguments)}function oa(){return(oa=(0,Y.Z)(function*(P,L){const W=Qr(P),Oe=(yield ul()).transaction(fs,"readwrite");return yield Oe.objectStore(fs).put(L,W),yield Oe.done,L})).apply(this,arguments)}function Sa(){return(Sa=(0,Y.Z)(function*(P){const L=Qr(P),ce=(yield ul()).transaction(fs,"readwrite");yield ce.objectStore(fs).delete(L),yield ce.done})).apply(this,arguments)}function Qr({appConfig:P}){return P.appId}const Hn=new Ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ou(P,L){return bc.apply(this,arguments)}function bc(){return(bc=(0,Y.Z)(function*(P,L){const W=yield to(P),ce=Oi(L),Oe={method:"POST",headers:W,body:JSON.stringify(ce)};let ze;try{ze=yield(yield fetch(ua(P.appConfig),Oe)).json()}catch(It){throw Hn.create("token-subscribe-failed",{errorInfo:It?.toString()})}if(ze.error)throw Hn.create("token-subscribe-failed",{errorInfo:ze.error.message});if(!ze.token)throw Hn.create("token-subscribe-no-token");return ze.token})).apply(this,arguments)}function Wo(){return(Wo=(0,Y.Z)(function*(P,L){const W=yield to(P),ce=Oi(L.subscriptionOptions),Oe={method:"PATCH",headers:W,body:JSON.stringify(ce)};let ze;try{ze=yield(yield fetch(`${ua(P.appConfig)}/${L.token}`,Oe)).json()}catch(It){throw Hn.create("token-update-failed",{errorInfo:It?.toString()})}if(ze.error)throw Hn.create("token-update-failed",{errorInfo:ze.error.message});if(!ze.token)throw Hn.create("token-update-no-token");return ze.token})).apply(this,arguments)}function Ko(P,L){return aa.apply(this,arguments)}function aa(){return(aa=(0,Y.Z)(function*(P,L){const ce={method:"DELETE",headers:yield to(P)};try{const ze=yield(yield fetch(`${ua(P.appConfig)}/${L}`,ce)).json();if(ze.error)throw Hn.create("token-unsubscribe-failed",{errorInfo:ze.error.message})}catch(Oe){throw Hn.create("token-unsubscribe-failed",{errorInfo:Oe?.toString()})}})).apply(this,arguments)}function ua({projectId:P}){return`${hs}/projects/${P}/registrations`}function to(P){return ws.apply(this,arguments)}function ws(){return(ws=(0,Y.Z)(function*({appConfig:P,installations:L}){const W=yield L.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function Oi({p256dh:P,auth:L,endpoint:W,vapidKey:ce}){const Oe={web:{endpoint:W,auth:L,p256dh:P}};return ce!==ui&&(Oe.web.applicationPubKey=ce),Oe}const qo=6048e5;function no(){return no=(0,Y.Z)(function*(P){const L=yield function Ra(P,L){return Do.apply(this,arguments)}(P.swRegistration,P.vapidKey),W={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:L.endpoint,auth:Ki(L.getKey("auth")),p256dh:Ki(L.getKey("p256dh"))},ce=yield hu(P.firebaseDependencies);if(ce){if(function bo(P,L){return L.vapidKey===P.vapidKey&&L.endpoint===P.endpoint&&L.auth===P.auth&&L.p256dh===P.p256dh}(ce.subscriptionOptions,W))return Date.now()>=ce.createTime+qo?function pu(P,L){return ji.apply(this,arguments)}(P,{token:ce.token,createTime:Date.now(),subscriptionOptions:W}):ce.token;try{yield Ko(P.firebaseDependencies,ce.token)}catch(Oe){console.warn(Oe)}return Aa(P.firebaseDependencies,W)}return Aa(P.firebaseDependencies,W)}),no.apply(this,arguments)}function Ps(){return Ps=(0,Y.Z)(function*(P){const L=yield hu(P.firebaseDependencies);L&&(yield Ko(P.firebaseDependencies,L.token),yield function ll(P){return Sa.apply(this,arguments)}(P.firebaseDependencies));const W=yield P.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()}),Ps.apply(this,arguments)}function ji(){return ji=(0,Y.Z)(function*(P,L){try{const W=yield function ku(P,L){return Wo.apply(this,arguments)}(P.firebaseDependencies,L),ce=Object.assign(Object.assign({},L),{token:W,createTime:Date.now()});return yield eo(P.firebaseDependencies,ce),W}catch(W){throw yield function fu(P){return Ps.apply(this,arguments)}(P),W}}),ji.apply(this,arguments)}function Aa(P,L){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,Y.Z)(function*(P,L){const ce={token:yield Ou(P,L),createTime:Date.now(),subscriptionOptions:L};return yield eo(P,ce),ce.token})).apply(this,arguments)}function Do(){return(Do=(0,Y.Z)(function*(P,L){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cu(L)})})).apply(this,arguments)}function ue(P){const L={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Zo(P,L){if(!L.notification)return;P.notification={};const W=L.notification.title;W&&(P.notification.title=W);const ce=L.notification.body;ce&&(P.notification.body=ce);const Oe=L.notification.image;Oe&&(P.notification.image=Oe);const ze=L.notification.icon;ze&&(P.notification.icon=ze)}(L,P),function cl(P,L){L.data&&(P.data=L.data)}(L,P),function Lu(P,L){var W,ce,Oe,ze,It;if(!(L.fcmOptions||null!==(W=L.notification)&&void 0!==W&&W.click_action))return;P.fcmOptions={};const en=null!==(Oe=null===(ce=L.fcmOptions)||void 0===ce?void 0:ce.link)&&void 0!==Oe?Oe:null===(ze=L.notification)||void 0===ze?void 0:ze.click_action;en&&(P.fcmOptions.link=en);const Ft=null===(It=L.fcmOptions)||void 0===It?void 0:It.analytics_label;Ft&&(P.fcmOptions.analyticsLabel=Ft)}(L,P),L}function dl(P,L){const W=[];for(let ce=0;ce<P.length;ce++)W.push(P.charAt(ce)),ce<L.length&&W.push(L.charAt(ce));return W.join("")}function ni(P){return Hn.create("missing-app-config-values",{valueName:P})}dl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Kr{constructor(L,W,ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function mu(P){if(!P||!P.options)throw ni("App Configuration Object");if(!P.name)throw ni("App Name");const L=["projectId","apiKey","appId","messagingSenderId"],{options:W}=P;for(const ce of L)if(!W[ce])throw ni(ce);return{appName:P.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(L);this.firebaseDependencies={app:L,appConfig:Oe,installations:W,analyticsProvider:ce}}_delete(){return Promise.resolve()}}function la(){return(la=(0,Y.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(Wi,{scope:zo}),P.swRegistration.update().catch(()=>{})}catch(L){throw Hn.create("failed-service-worker-registration",{browserErrorMessage:L?.message})}})).apply(this,arguments)}function Qa(){return(Qa=(0,Y.Z)(function*(P,L){if(!L&&!P.swRegistration&&(yield function xs(P){return la.apply(this,arguments)}(P)),L||!P.swRegistration){if(!(L instanceof ServiceWorkerRegistration))throw Hn.create("invalid-sw-registration");P.swRegistration=L}})).apply(this,arguments)}function Ma(){return(Ma=(0,Y.Z)(function*(P,L){L?P.vapidKey=L:P.vapidKey||(P.vapidKey=ui)})).apply(this,arguments)}function yu(){return yu=(0,Y.Z)(function*(P,L){if(!navigator)throw Hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Hn.create("permission-blocked");return yield function Kl(P,L){return Ma.apply(this,arguments)}(P,L?.vapidKey),yield function Sc(P,L){return Qa.apply(this,arguments)}(P,L?.serviceWorkerRegistration),function vi(P){return no.apply(this,arguments)}(P)}),yu.apply(this,arguments)}function go(){return(go=(0,Y.Z)(function*(P,L,W){const ce=function ql(P){switch(P){case Ya.NOTIFICATION_CLICKED:return"notification_open";case Ya.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(L);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(ce,{message_id:W[Vs],message_name:W[Co],message_time:W[Da],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function So(){return So=(0,Y.Z)(function*(P,L){const W=L.data;if(!W.isFirebaseMessaging)return;P.onMessageHandler&&W.messageType===Ya.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(ue(W)):P.onMessageHandler.next(ue(W)));const ce=W.data;(function gu(P){return"object"==typeof P&&!!P&&Vs in P})(ce)&&"1"===ce["google.c.a.e"]&&(yield function po(P,L,W){return go.apply(this,arguments)}(P,W.messageType,ce))}),So.apply(this,arguments)}const R="@firebase/messaging",K="0.12.4",F=P=>{const L=new Kr(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function rr(P,L){return So.apply(this,arguments)}(L,W)),L},G=P=>{const L=P.getProvider("messaging").getImmediate();return{getToken:ce=>function Is(P,L){return yu.apply(this,arguments)}(L,ce)}};function et(){return lt.apply(this,arguments)}function lt(){return(lt=(0,Y.Z)(function*(){try{yield(0,Ie.eu)()}catch{return!1}return typeof window<"u"&&(0,Ie.hl)()&&(0,Ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ge(){(0,de._registerComponent)(new Ne.wA("messaging",F,"PUBLIC")),(0,de._registerComponent)(new Ne.wA("messaging-internal",G,"PRIVATE")),(0,de.registerVersion)(R,K),(0,de.registerVersion)(R,K,"esm2017")}();const Ei="analytics",yn="firebase_id",ls="origin",ro=6e4,Ts="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cs="https://www.googletagmanager.com/gtag/js",zr=new Me.Yd("@firebase/analytics"),ki=new Ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Fu(P){if(!P.startsWith(Cs)){const L=ki.create("invalid-gtag-resource",{gtagURL:P});return zr.warn(L.message),""}return P}function hl(P){return Promise.all(P.map(L=>L.catch(W=>W)))}function Rn(){return(Rn=(0,Y.Z)(function*(P,L,W,ce,Oe,ze){const It=ce[Oe];try{if(It)yield L[It];else{const Ft=(yield hl(W)).find(sn=>sn.measurementId===Oe);Ft&&(yield L[Ft.appId])}}catch(en){zr.error(en)}P("config",Oe,ze)})).apply(this,arguments)}function mo(){return(mo=(0,Y.Z)(function*(P,L,W,ce,Oe){try{let ze=[];if(Oe&&Oe.send_to){let It=Oe.send_to;Array.isArray(It)||(It=[It]);const en=yield hl(W);for(const Ft of It){const sn=en.find(Cn=>Cn.measurementId===Ft),Yn=sn&&L[sn.appId];if(!Yn){ze=[];break}ze.push(Yn)}}0===ze.length&&(ze=Object.values(L)),yield Promise.all(ze),P("event",ce,Oe||{})}catch(ze){zr.error(ze)}})).apply(this,arguments)}const Pr=30,Ot=new class Uu{constructor(L={},W=1e3){this.throttleMetadata=L,this.intervalMillis=W}getThrottleMetadata(L){return this.throttleMetadata[L]}setThrottleMetadata(L,W){this.throttleMetadata[L]=W}deleteThrottleMetadata(L){delete this.throttleMetadata[L]}};function vn(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function Vt(){return(Vt=(0,Y.Z)(function*(P){var L;const{appId:W,apiKey:ce}=P,Oe={method:"GET",headers:vn(ce)},ze=Ts.replace("{app-id}",W),It=yield fetch(ze,Oe);if(200!==It.status&&304!==It.status){let en="";try{const Ft=yield It.json();null!==(L=Ft.error)&&void 0!==L&&L.message&&(en=Ft.error.message)}catch{}throw ki.create("config-fetch-failed",{httpStatus:It.status,responseMessage:en})}return It.json()})).apply(this,arguments)}function Et(){return(Et=(0,Y.Z)(function*(P,L=Ot,W){const{appId:ce,apiKey:Oe,measurementId:ze}=P.options;if(!ce)throw ki.create("no-app-id");if(!Oe){if(ze)return{measurementId:ze,appId:ce};throw ki.create("no-api-key")}const It=L.getThrottleMetadata(ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},en=new ah;return setTimeout((0,Y.Z)(function*(){en.abort()}),void 0!==W?W:ro),ri({appId:ce,apiKey:Oe,measurementId:ze},It,en,L)})).apply(this,arguments)}function ri(P,L,W){return js.apply(this,arguments)}function js(){return js=(0,Y.Z)(function*(P,{throttleEndTimeMillis:L,backoffCount:W},ce,Oe=Ot){var ze;const{appId:It,measurementId:en}=P;try{yield function oh(P,L){return new Promise((W,ce)=>{const Oe=Math.max(L-Date.now(),0),ze=setTimeout(W,Oe);P.addEventListener(()=>{clearTimeout(ze),ce(ki.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}(ce,L)}catch(Ft){if(en)return zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${en} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:It,measurementId:en};throw Ft}try{const Ft=yield function Rc(P){return Vt.apply(this,arguments)}(P);return Oe.deleteThrottleMetadata(It),Ft}catch(Ft){const sn=Ft;if(!function Bu(P){if(!(P instanceof Ie.ZR&&P.customData))return!1;const L=Number(P.customData.httpStatus);return 429===L||500===L||503===L||504===L}(sn)){if(Oe.deleteThrottleMetadata(It),en)return zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${en} provided in the "measurementId" field in the local Firebase config. [${sn?.message}]`),{appId:It,measurementId:en};throw Ft}const Yn=503===Number(null===(ze=sn?.customData)||void 0===ze?void 0:ze.httpStatus)?(0,Ie.$s)(W,Oe.intervalMillis,Pr):(0,Ie.$s)(W,Oe.intervalMillis),Cn={throttleEndTimeMillis:Date.now()+Yn,backoffCount:W+1};return Oe.setThrottleMetadata(It,Cn),zr.debug(`Calling attemptFetch again in ${Yn} millis`),ri(P,Cn,ce,Oe)}}),js.apply(this,arguments)}class ah{constructor(){this.listeners=[]}addEventListener(L){this.listeners.push(L)}abort(){this.listeners.forEach(L=>L())}}let $i,qn;function fl(){return(fl=(0,Y.Z)(function*(P,L,W,ce,Oe){if(Oe&&Oe.global)P("event",W,ce);else{const ze=yield L;P("event",W,Object.assign(Object.assign({},ce),{send_to:ze}))}})).apply(this,arguments)}function si(){return(si=(0,Y.Z)(function*(){if(!(0,Ie.hl)())return zr.warn(ki.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ie.eu)()}catch(P){return zr.warn(ki.create("indexeddb-unavailable",{errorInfo:P?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ro(){return Ro=(0,Y.Z)(function*(P,L,W,ce,Oe,ze,It){var en;const Ft=function it(P){return Et.apply(this,arguments)}(P);Ft.then(ks=>{W[ks.measurementId]=ks.appId,P.options.measurementId&&ks.measurementId!==P.options.measurementId&&zr.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${ks.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ks=>zr.error(ks)),L.push(Ft);const sn=function qt(){return si.apply(this,arguments)}().then(ks=>{if(ks)return ce.getId()}),[Yn,Cn]=yield Promise.all([Ft,sn]);(function At(P){const L=window.document.getElementsByTagName("script");for(const W of Object.values(L))if(W.src&&W.src.includes(Cs)&&W.src.includes(P))return W;return null})(ze)||function _d(P,L){const W=function Os(P,L){let W;return window.trustedTypes&&(W=window.trustedTypes.createPolicy(P,L)),W}("firebase-js-sdk-policy",{createScriptURL:Fu}),ce=document.createElement("script"),Oe=`${Cs}?l=${P}&id=${L}`;ce.src=W?W?.createScriptURL(Oe):Oe,ce.async=!0,document.head.appendChild(ce)}(ze,Yn.measurementId),qn&&(Oe("consent","default",qn),function Yo(P){qn=P}(void 0)),Oe("js",new Date);const xr=null!==(en=It?.config)&&void 0!==en?en:{};return xr[ls]="firebase",xr.update=!0,null!=Cn&&(xr[yn]=Cn),Oe("config",Yn.measurementId,xr),$i&&(Oe("set",$i),function or(P){$i=P}(void 0)),Yn.measurementId}),Ro.apply(this,arguments)}class uh{constructor(L){this.app=L}_delete(){return delete Mo[this.app.options.appId],Promise.resolve()}}let Mo={},gl=[];const Vu={};let C,N,S="dataLayer",$=!1;function He(P,L,W){!function ie(){const P=[];if((0,Ie.ru)()&&P.push("This is a browser extension environment."),(0,Ie.zI)()||P.push("Cookies are not available."),P.length>0){const L=P.map((ce,Oe)=>`(${Oe+1}) ${ce}`).join(" "),W=ki.create("invalid-analytics-context",{errorInfo:L});zr.warn(W.message)}}();const ce=P.options.appId;if(!ce)throw ki.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw ki.create("no-api-key");zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Mo[ce])throw ki.create("already-exists",{id:ce});if(!$){!function Na(P){let L=[];Array.isArray(window[P])?L=window[P]:window[P]=L}(S);const{wrappedGtag:ze,gtagCore:It}=function qi(P,L,W,ce,Oe){let ze=function(...It){window[ce].push(arguments)};return window[Oe]&&"function"==typeof window[Oe]&&(ze=window[Oe]),window[Oe]=function Ds(P,L,W,ce){function ze(){return ze=(0,Y.Z)(function*(It,...en){try{if("event"===It){const[Ft,sn]=en;yield function _u(P,L,W,ce,Oe){return mo.apply(this,arguments)}(P,L,W,Ft,sn)}else if("config"===It){const[Ft,sn]=en;yield function St(P,L,W,ce,Oe,ze){return Rn.apply(this,arguments)}(P,L,W,ce,Ft,sn)}else if("consent"===It){const[Ft]=en;P("consent","update",Ft)}else if("get"===It){const[Ft,sn,Yn]=en;P("get",Ft,sn,Yn)}else if("set"===It){const[Ft]=en;P("set",Ft)}else P(It,...en)}catch(Ft){zr.error(Ft)}}),ze.apply(this,arguments)}return function Oe(It){return ze.apply(this,arguments)}}(ze,P,L,W),{gtagCore:ze,wrappedGtag:window[Oe]}}(Mo,gl,Vu,S,"gtag");N=ze,C=It,$=!0}return Mo[ce]=function ca(P,L,W,ce,Oe,ze,It){return Ro.apply(this,arguments)}(P,gl,Vu,L,C,S,W),new uh(P)}function tn(){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,Y.Z)(function*(){if((0,Ie.ru)()||!(0,Ie.zI)()||!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}const xa="@firebase/analytics";!function Nc(){(0,de._registerComponent)(new Ne.wA(Ei,(L,{options:W})=>He(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,de._registerComponent)(new Ne.wA("analytics-internal",function P(L){try{const W=L.getProvider(Ei).getImmediate();return{logEvent:(ce,Oe,ze)=>function No(P,L,W,ce){P=(0,Ie.m9)(P),function Pa(P,L,W,ce,Oe){return fl.apply(this,arguments)}(N,Mo[P.app.options.appId],L,W,ce).catch(Oe=>zr.error(Oe))}(W,ce,Oe,ze)}}catch(W){throw ki.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,de.registerVersion)(xa,"0.10.0"),(0,de.registerVersion)(xa,"0.10.0","esm2017")}();var As=B(1954),Qh=B(2631);const vd=new class Oa extends Qh.v{}(class ha extends As.o{constructor(L,W){super(L,W),this.scheduler=L,this.work=W}schedule(L,W=0){return W>0?super.schedule(L,W):(this.delay=W,this.state=L,this.scheduler.flush(this),this)}execute(L,W){return W>0||this.closed?super.execute(L,W):this._execute(L,W)}requestAsyncId(L,W,ce=0){return null!=ce&&ce>0||null==ce&&this.delay>0?super.requestAsyncId(L,W,ce):(L.flush(this),0)}});var ka=B(6321),lh=B(9397),Xl=B(3093),yl=B(5137);const xc=new I.GfV("7.6.1"),Oc="__angularfire_symbol__analyticsIsSupportedValue",Eu="__angularfire_symbol__analyticsIsSupported",ch="__angularfire_symbol__remoteConfigIsSupportedValue",Ed="__angularfire_symbol__remoteConfigIsSupported",_l="__angularfire_symbol__messagingIsSupportedValue",Jl="__angularfire_symbol__messagingIsSupported";function Xh(P,L,W){if(L){if(1===L.length)return L[0];const ze=L.filter(It=>It.app===W);if(1===ze.length)return ze[0]}return W.container.getProvider(P).getImmediate({optional:!0})}globalThis[Eu]||(globalThis[Eu]=tn().then(P=>globalThis[Oc]=P).catch(()=>globalThis[Oc]=!1)),globalThis[Jl]||(globalThis[Jl]=et().then(P=>globalThis[_l]=P).catch(()=>globalThis[_l]=!1)),globalThis[Ed]||(globalThis[Ed]=To().then(P=>globalThis[ch]=P).catch(()=>globalThis[ch]=!1));const Lc=(P,L)=>{const W=L?[L]:(0,X.C6)(),ce=[];return W.forEach(Oe=>{Oe.container.getProvider(P).instances.forEach(It=>{ce.includes(It)||ce.push(It)})}),ce};function Hu(){}class La{constructor(L,W=vd){this.zone=L,this.delegate=W}now(){return this.delegate.now()}schedule(L,W,ce){const Oe=this.zone;return this.delegate.schedule(function(It){Oe.runGuarded(()=>{L.apply(this,[It])})},W,ce)}}class dh{constructor(L){this.zone=L,this.task=null}call(L,W){const ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hu,{},Hu,Hu)),W.pipe((0,lh.b)({next:ce,complete:ce,error:ce})).subscribe(L).add(ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ip=(()=>{class P{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new La(Zone.current)),this.insideAngular=W.run(()=>new La(Zone.current,ka.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(W){return new(W||P)(I.LFG(I.R0b))},P.\u0275prov=I.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function fa(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function pa(P){return P.pipe((0,Xl.Q)(fa().outsideAngular))}function Br(P){return fa(),function ga(P){return function(W){return(W=W.lift(new dh(P.ngZone))).pipe((0,yl.R)(P.outsideAngular),(0,Xl.Q)(P.insideAngular))}}(fa())(P)}},9058:(Zt,Je,B)=>{B.d(Je,{$s:()=>Nr,BH:()=>Ce,DV:()=>$n,Dv:()=>Gi,G6:()=>er,GJ:()=>Kt,L:()=>Pe,LL:()=>nt,Pz:()=>Ze,Sg:()=>st,UG:()=>qe,UI:()=>Us,US:()=>Ne,Wj:()=>Yt,Wl:()=>pt,Yr:()=>Lr,ZB:()=>Ae,ZR:()=>Se,aH:()=>fe,b$:()=>pn,cI:()=>yt,dS:()=>is,eu:()=>tt,g5:()=>Y,gK:()=>Wn,gQ:()=>gn,h$:()=>Be,hl:()=>Ue,hu:()=>X,jU:()=>Ct,lb:()=>Ir,m9:()=>Ln,ne:()=>sr,p$:()=>he,pd:()=>xn,r3:()=>un,ru:()=>jt,tV:()=>ae,uI:()=>$e,ug:()=>yi,vZ:()=>Ni,w1:()=>Xn,w9:()=>Mn,xO:()=>Ti,xb:()=>cr,z$:()=>dt,zI:()=>Qe,zd:()=>nn});const I={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},X=function(we,Q){if(!we)throw Y(Q)},Y=function(we){return new Error("Firebase Database ("+I.SDK_VERSION+") INTERNAL ASSERT FAILED: "+we)},de=function(we){const Q=[];let ne=0;for(let J=0;J<we.length;J++){let re=we.charCodeAt(J);re<128?Q[ne++]=re:re<2048?(Q[ne++]=re>>6|192,Q[ne++]=63&re|128):55296==(64512&re)&&J+1<we.length&&56320==(64512&we.charCodeAt(J+1))?(re=65536+((1023&re)<<10)+(1023&we.charCodeAt(++J)),Q[ne++]=re>>18|240,Q[ne++]=re>>12&63|128,Q[ne++]=re>>6&63|128,Q[ne++]=63&re|128):(Q[ne++]=re>>12|224,Q[ne++]=re>>6&63|128,Q[ne++]=63&re|128)}return Q},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,Q){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,J=[];for(let re=0;re<we.length;re+=3){const je=we[re],gt=re+1<we.length,Ut=gt?we[re+1]:0,Tn=re+2<we.length,Jt=Tn?we[re+2]:0;let Hr=(15&Ut)<<2|Jt>>6,We=63&Jt;Tn||(We=64,gt||(Hr=64)),J.push(ne[je>>2],ne[(3&je)<<4|Ut>>4],ne[Hr],ne[We])}return J.join("")},encodeString(we,Q){return this.HAS_NATIVE_SUPPORT&&!Q?btoa(we):this.encodeByteArray(de(we),Q)},decodeString(we,Q){return this.HAS_NATIVE_SUPPORT&&!Q?atob(we):function(we){const Q=[];let ne=0,J=0;for(;ne<we.length;){const re=we[ne++];if(re<128)Q[J++]=String.fromCharCode(re);else if(re>191&&re<224){const je=we[ne++];Q[J++]=String.fromCharCode((31&re)<<6|63&je)}else if(re>239&&re<365){const Tn=((7&re)<<18|(63&we[ne++])<<12|(63&we[ne++])<<6|63&we[ne++])-65536;Q[J++]=String.fromCharCode(55296+(Tn>>10)),Q[J++]=String.fromCharCode(56320+(1023&Tn))}else{const je=we[ne++],gt=we[ne++];Q[J++]=String.fromCharCode((15&re)<<12|(63&je)<<6|63&gt)}}return Q.join("")}(this.decodeStringToByteArray(we,Q))},decodeStringToByteArray(we,Q){this.init_();const ne=Q?this.charToByteMapWebSafe_:this.charToByteMap_,J=[];for(let re=0;re<we.length;){const je=ne[we.charAt(re++)],Ut=re<we.length?ne[we.charAt(re)]:0;++re;const Jt=re<we.length?ne[we.charAt(re)]:64;++re;const bn=re<we.length?ne[we.charAt(re)]:64;if(++re,null==je||null==Ut||null==Jt||null==bn)throw new Me;J.push(je<<2|Ut>>4),64!==Jt&&(J.push(Ut<<4&240|Jt>>2),64!==bn&&J.push(Jt<<6&192|bn))}return J},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}};class Me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(we){const Q=de(we);return Ne.encodeByteArray(Q,!0)},Pe=function(we){return Be(we).replace(/\./g,"")},ae=function(we){try{return Ne.decodeString(we,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function he(we){return Ae(void 0,we)}function Ae(we,Q){if(!(Q instanceof Object))return Q;switch(Q.constructor){case Date:return new Date(Q.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return Q}for(const ne in Q)!Q.hasOwnProperty(ne)||!mt(ne)||(we[ne]=Ae(we[ne],Q[ne]));return we}function mt(we){return"__proto__"!==we}const bt=()=>{try{return function ut(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const we=process.env.__FIREBASE_DEFAULTS__;return we?JSON.parse(we):void 0})()||(()=>{if(typeof document>"u")return;let we;try{we=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Q=we&&ae(we[1]);return Q&&JSON.parse(Q)})()}catch(we){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${we}`)}},fe=()=>{var we;return null===(we=bt())||void 0===we?void 0:we.config},Ze=we=>{var Q;return null===(Q=bt())||void 0===Q?void 0:Q[`_${we}`]};class Ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Q,ne)=>{this.resolve=Q,this.reject=ne})}wrapCallback(Q){return(ne,J)=>{ne?this.reject(ne):this.resolve(J),"function"==typeof Q&&(this.promise.catch(()=>{}),1===Q.length?Q(ne):Q(ne,J))}}}function st(we,Q){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const J=Q||"demo-project",re=we.iat||0,je=we.sub||we.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${J}`,aud:J,iat:re,exp:re+3600,auth_time:re,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},we);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(gt)),""].join(".")}function dt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function qe(){var we;const Q=null===(we=bt())||void 0===we?void 0:we.forceEnvironment;if("node"===Q)return!0;if("browser"===Q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ct(){return"object"==typeof self&&self.self===self}function jt(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function pn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xn(){const we=dt();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function Lr(){return!0===I.NODE_CLIENT||!0===I.NODE_ADMIN}function er(){return!qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){try{return"object"==typeof indexedDB}catch{return!1}}function tt(){return new Promise((we,Q)=>{try{let ne=!0;const J="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(J);re.onsuccess=()=>{re.result.close(),ne||self.indexedDB.deleteDatabase(J),we(!0)},re.onupgradeneeded=()=>{ne=!1},re.onerror=()=>{var je;Q((null===(je=re.error)||void 0===je?void 0:je.message)||"")}}catch(ne){Q(ne)}})}function Qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Se extends Error{constructor(Q,ne,J){super(ne),this.code=Q,this.customData=J,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nt.prototype.create)}}class nt{constructor(Q,ne,J){this.service=Q,this.serviceName=ne,this.errors=J}create(Q,...ne){const J=ne[0]||{},re=`${this.service}/${Q}`,je=this.errors[Q],gt=je?function oe(we,Q){return we.replace(ke,(ne,J)=>{const re=Q[J];return null!=re?String(re):`<${J}?>`})}(je,J):"Error";return new Se(re,`${this.serviceName}: ${gt} (${re}).`,J)}}const ke=/\{\$([^}]+)}/g;function yt(we){return JSON.parse(we)}function pt(we){return JSON.stringify(we)}const Lt=function(we){let Q={},ne={},J={},re="";try{const je=we.split(".");Q=yt(ae(je[0])||""),ne=yt(ae(je[1])||""),re=je[2],J=ne.d||{},delete ne.d}catch{}return{header:Q,claims:ne,data:J,signature:re}},Mn=function(we){const ne=Lt(we).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},Kt=function(we){const Q=Lt(we).claims;return"object"==typeof Q&&!0===Q.admin};function un(we,Q){return Object.prototype.hasOwnProperty.call(we,Q)}function $n(we,Q){if(Object.prototype.hasOwnProperty.call(we,Q))return we[Q]}function cr(we){for(const Q in we)if(Object.prototype.hasOwnProperty.call(we,Q))return!1;return!0}function Us(we,Q,ne){const J={};for(const re in we)Object.prototype.hasOwnProperty.call(we,re)&&(J[re]=Q.call(ne,we[re],re,we));return J}function Ni(we,Q){if(we===Q)return!0;const ne=Object.keys(we),J=Object.keys(Q);for(const re of ne){if(!J.includes(re))return!1;const je=we[re],gt=Q[re];if(jr(je)&&jr(gt)){if(!Ni(je,gt))return!1}else if(je!==gt)return!1}for(const re of J)if(!ne.includes(re))return!1;return!0}function jr(we){return null!==we&&"object"==typeof we}function Ti(we){const Q=[];for(const[ne,J]of Object.entries(we))Array.isArray(J)?J.forEach(re=>{Q.push(encodeURIComponent(ne)+"="+encodeURIComponent(re))}):Q.push(encodeURIComponent(ne)+"="+encodeURIComponent(J));return Q.length?"&"+Q.join("&"):""}function nn(we){const Q={};return we.replace(/^\?/,"").split("&").forEach(J=>{if(J){const[re,je]=J.split("=");Q[decodeURIComponent(re)]=decodeURIComponent(je)}}),Q}function xn(we){const Q=we.indexOf("?");if(!Q)return"";const ne=we.indexOf("#",Q);return we.substring(Q,ne>0?ne:void 0)}class gn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Q=1;Q<this.blockSize;++Q)this.pad_[Q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Q,ne){ne||(ne=0);const J=this.W_;if("string"==typeof Q)for(let bn=0;bn<16;bn++)J[bn]=Q.charCodeAt(ne)<<24|Q.charCodeAt(ne+1)<<16|Q.charCodeAt(ne+2)<<8|Q.charCodeAt(ne+3),ne+=4;else for(let bn=0;bn<16;bn++)J[bn]=Q[ne]<<24|Q[ne+1]<<16|Q[ne+2]<<8|Q[ne+3],ne+=4;for(let bn=16;bn<80;bn++){const Hr=J[bn-3]^J[bn-8]^J[bn-14]^J[bn-16];J[bn]=4294967295&(Hr<<1|Hr>>>31)}let Jt,xt,re=this.chain_[0],je=this.chain_[1],gt=this.chain_[2],Ut=this.chain_[3],Tn=this.chain_[4];for(let bn=0;bn<80;bn++){bn<40?bn<20?(Jt=Ut^je&(gt^Ut),xt=1518500249):(Jt=je^gt^Ut,xt=1859775393):bn<60?(Jt=je&gt|Ut&(je|gt),xt=2400959708):(Jt=je^gt^Ut,xt=3395469782);const Hr=(re<<5|re>>>27)+Jt+Tn+xt+J[bn]&4294967295;Tn=Ut,Ut=gt,gt=4294967295&(je<<30|je>>>2),je=re,re=Hr}this.chain_[0]=this.chain_[0]+re&4294967295,this.chain_[1]=this.chain_[1]+je&4294967295,this.chain_[2]=this.chain_[2]+gt&4294967295,this.chain_[3]=this.chain_[3]+Ut&4294967295,this.chain_[4]=this.chain_[4]+Tn&4294967295}update(Q,ne){if(null==Q)return;void 0===ne&&(ne=Q.length);const J=ne-this.blockSize;let re=0;const je=this.buf_;let gt=this.inbuf_;for(;re<ne;){if(0===gt)for(;re<=J;)this.compress_(Q,re),re+=this.blockSize;if("string"==typeof Q){for(;re<ne;)if(je[gt]=Q.charCodeAt(re),++gt,++re,gt===this.blockSize){this.compress_(je),gt=0;break}}else for(;re<ne;)if(je[gt]=Q[re],++gt,++re,gt===this.blockSize){this.compress_(je),gt=0;break}}this.inbuf_=gt,this.total_+=ne}digest(){const Q=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let re=this.blockSize-1;re>=56;re--)this.buf_[re]=255&ne,ne/=256;this.compress_(this.buf_);let J=0;for(let re=0;re<5;re++)for(let je=24;je>=0;je-=8)Q[J]=this.chain_[re]>>je&255,++J;return Q}}function sr(we,Q){const ne=new Mr(we,Q);return ne.subscribe.bind(ne)}class Mr{constructor(Q,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{Q(this)}).catch(J=>{this.error(J)})}next(Q){this.forEachObserver(ne=>{ne.next(Q)})}error(Q){this.forEachObserver(ne=>{ne.error(Q)}),this.close(Q)}complete(){this.forEachObserver(Q=>{Q.complete()}),this.close()}subscribe(Q,ne,J){let re;if(void 0===Q&&void 0===ne&&void 0===J)throw new Error("Missing Observer.");re=function Gn(we,Q){if("object"!=typeof we||null===we)return!1;for(const ne of Q)if(ne in we&&"function"==typeof we[ne])return!0;return!1}(Q,["next","error","complete"])?Q:{next:Q,error:ne,complete:J},void 0===re.next&&(re.next=wr),void 0===re.error&&(re.error=wr),void 0===re.complete&&(re.complete=wr);const je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch{}}),this.observers.push(re),je}unsubscribeOne(Q){void 0===this.observers||void 0===this.observers[Q]||(delete this.observers[Q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Q){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,Q)}sendOne(Q,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Q])try{ne(this.observers[Q])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})}close(Q){this.finalized||(this.finalized=!0,void 0!==Q&&(this.finalError=Q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wr(){}const Gi=function(we,Q,ne,J){let re;if(J<Q?re="at least "+Q:J>ne&&(re=0===ne?"none":"no more than "+ne),re)throw new Error(we+" failed: Was called with "+J+(1===J?" argument.":" arguments.")+" Expects "+re+".")};function Wn(we,Q){return`${we} failed: ${Q} argument `}function Yt(we,Q,ne,J){if((!J||ne)&&"function"!=typeof ne)throw new Error(Wn(we,Q)+"must be a valid function.")}function Ir(we,Q,ne,J){if((!J||ne)&&("object"!=typeof ne||null===ne))throw new Error(Wn(we,Q)+"must be a valid context object.")}const is=function(we){const Q=[];let ne=0;for(let J=0;J<we.length;J++){let re=we.charCodeAt(J);if(re>=55296&&re<=56319){const je=re-55296;J++,X(J<we.length,"Surrogate pair missing trail surrogate."),re=65536+(je<<10)+(we.charCodeAt(J)-56320)}re<128?Q[ne++]=re:re<2048?(Q[ne++]=re>>6|192,Q[ne++]=63&re|128):re<65536?(Q[ne++]=re>>12|224,Q[ne++]=re>>6&63|128,Q[ne++]=63&re|128):(Q[ne++]=re>>18|240,Q[ne++]=re>>12&63|128,Q[ne++]=re>>6&63|128,Q[ne++]=63&re|128)}return Q},yi=function(we){let Q=0;for(let ne=0;ne<we.length;ne++){const J=we.charCodeAt(ne);J<128?Q++:J<2048?Q+=2:J>=55296&&J<=56319?(Q+=4,ne++):Q+=3}return Q},br=1e3,fr=2,ei=144e5,tr=.5;function Nr(we,Q=br,ne=fr){const J=Q*Math.pow(ne,we),re=Math.round(tr*J*(Math.random()-.5)*2);return Math.min(ei,J+re)}function Ln(we){return we&&we._delegate?we._delegate:we}},5148:(Zt,Je,B)=>{B.d(Je,{e:()=>Ie});var I=B(5879),X=B(8330),Y=B(7046),de=B(8113);let Ie=(()=>{class Ne{afs;afAuth;router;ngZone;userData;constructor(Be,Pe,ae,he){this.afs=Be,this.afAuth=Pe,this.router=ae,this.ngZone=he,this.afAuth.authState.subscribe(Ae=>{Ae?(this.userData=Ae,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.removeItem("user"),JSON.parse(localStorage.getItem("user")))})}SignIn(Be,Pe){return this.afAuth.signInWithEmailAndPassword(Be,Pe).then(ae=>{this.SetUserData(ae.user),this.afAuth.authState.subscribe(he=>{he&&he.emailVerified?this.router.navigate(["dashboard"]):(alert("Please verify email"),this.router.navigate(["auth/verify-email-address"]))})}).catch(ae=>{window.alert(ae.message)})}SignUp(Be,Pe){return this.afAuth.createUserWithEmailAndPassword(Be,Pe).then(ae=>{this.SendVerificationMail(),this.SetUserData(ae.user)}).catch(ae=>{window.alert(ae.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(Be=>Be.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(Be){return this.afAuth.sendPasswordResetEmail(Be).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Pe=>{window.alert(Pe)})}get isLoggedIn(){const Be=JSON.parse(localStorage.getItem("user"));return null!==Be&&!1!==Be.emailVerified}SetUserData(Be){return this.afs.doc(`users/${Be.uid}`).set({uid:Be.uid,email:Be.email,displayName:Be.displayName,photoURL:Be.photoURL,emailVerified:Be.emailVerified,created:new Date},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["auth/login"])})}static \u0275fac=function(Pe){return new(Pe||Ne)(I.LFG(X.ST),I.LFG(Y.zQ),I.LFG(de.F0),I.LFG(I.R0b))};static \u0275prov=I.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})}return Ne})()},2281:(Zt,Je,B)=>{var I=B(6593),X=B(5879),Y=B(6825);function Ie(l){return new X.vHH(3e3,!1)}function oe(l){switch(l.length){case 0:return new Y.ZN;case 1:return l[0];default:return new Y.ZE(l)}}function ke(l,s,o=new Map,c=new Map){const g=[],E=[];let b=-1,k=null;if(s.forEach(j=>{const q=j.get("offset"),_e=q==b,De=_e&&k||new Map;j.forEach((Ge,ct)=>{let ht=ct,Wt=Ge;if("offset"!==ct)switch(ht=l.normalizePropertyName(ht,g),Wt){case Y.k1:Wt=o.get(ct);break;case Y.l3:Wt=c.get(ct);break;default:Wt=l.normalizeStyleValue(ct,ht,Wt,g)}De.set(ht,Wt)}),_e||E.push(De),k=De,b=q}),g.length)throw function jt(l){return new X.vHH(3502,!1)}();return E}function yt(l,s,o,c){switch(s){case"start":l.onStart(()=>c(o&&pt(o,"start",l)));break;case"done":l.onDone(()=>c(o&&pt(o,"done",l)));break;case"destroy":l.onDestroy(()=>c(o&&pt(o,"destroy",l)))}}function pt(l,s,o){const E=Lt(l.element,l.triggerName,l.fromState,l.toState,s||l.phaseName,o.totalTime??l.totalTime,!!o.disabled),b=l._data;return null!=b&&(E._data=b),E}function Lt(l,s,o,c,g="",E=0,b){return{element:l,triggerName:s,fromState:o,toState:c,phaseName:g,totalTime:E,disabled:!!b}}function Ht(l,s,o){let c=l.get(s);return c||l.set(s,c=o),c}function cn(l){const s=l.indexOf(":");return[l.substring(1,s),l.slice(s+1)]}const Mn=(()=>typeof document>"u"?null:document.documentElement)();function Kt(l){const s=l.parentNode||l.host||null;return s===Mn?null:s}let $n=null,cr=!1;function rs(l,s){for(;s;){if(s===l)return!0;s=Kt(s)}return!1}function Ti(l,s,o){if(o)return Array.from(l.querySelectorAll(s));const c=l.querySelector(s);return c?[c]:[]}let xn=(()=>{class l{validateStyleProperty(o){return function Us(l){$n||($n=function jr(){return typeof document<"u"?document.body:null}()||{},cr=!!$n.style&&"WebkitAppearance"in $n.style);let s=!0;return $n.style&&!function un(l){return"ebkit"==l.substring(1,6)}(l)&&(s=l in $n.style,!s&&cr&&(s="Webkit"+l.charAt(0).toUpperCase()+l.slice(1)in $n.style)),s}(o)}matchesElement(o,c){return!1}containsElement(o,c){return rs(o,c)}getParentElement(o){return Kt(o)}query(o,c,g){return Ti(o,c,g)}computeStyle(o,c,g){return g||""}animate(o,c,g,E,b,k=[],j){return new Y.ZN(g,E)}static#e=this.\u0275fac=function(c){return new(c||l)};static#t=this.\u0275prov=X.Yz7({token:l,factory:l.\u0275fac})}return l})(),gn=(()=>{class l{static#e=this.NOOP=new xn}return l})();const sr=1e3,Gn="ng-enter",wr="ng-leave",Gi="ng-trigger",Wn=".ng-trigger",$r="ng-animating",Yt=".ng-animating";function Ir(l){if("number"==typeof l)return l;const s=l.match(/^(-?[\.\d]+)(m?s)/);return!s||s.length<2?0:is(parseFloat(s[1]),s[2])}function is(l,s){return"s"===s?l*sr:l}function yi(l,s,o){return l.hasOwnProperty("duration")?l:function Fi(l,s,o){let g,E=0,b="";if("string"==typeof l){const k=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===k)return s.push(Ie()),{duration:0,delay:0,easing:""};g=is(parseFloat(k[1]),k[2]);const j=k[3];null!=j&&(E=is(parseFloat(j),k[4]));const q=k[5];q&&(b=q)}else g=l;if(!o){let k=!1,j=s.length;g<0&&(s.push(function Ne(){return new X.vHH(3100,!1)}()),k=!0),E<0&&(s.push(function Me(){return new X.vHH(3101,!1)}()),k=!0),k&&s.splice(j,0,Ie())}return{duration:g,delay:E,easing:b}}(l,s,o)}function br(l,s={}){return Object.keys(l).forEach(o=>{s[o]=l[o]}),s}function fr(l){const s=new Map;return Object.keys(l).forEach(o=>{s.set(o,l[o])}),s}function Nr(l,s=new Map,o){if(o)for(let[c,g]of o)s.set(c,g);for(let[c,g]of l)s.set(c,g);return s}function An(l,s,o){s.forEach((c,g)=>{const E=gt(g);o&&!o.has(g)&&o.set(g,l.style[E]),l.style[E]=c})}function ti(l,s){s.forEach((o,c)=>{const g=gt(c);l.style[g]=""})}function Ln(l){return Array.isArray(l)?1==l.length?l[0]:(0,Y.vP)(l):l}const Q=new RegExp("{{\\s*(.+?)\\s*}}","g");function ne(l){let s=[];if("string"==typeof l){let o;for(;o=Q.exec(l);)s.push(o[1]);Q.lastIndex=0}return s}function J(l,s,o){const c=l.toString(),g=c.replace(Q,(E,b)=>{let k=s[b];return null==k&&(o.push(function Pe(l){return new X.vHH(3003,!1)}()),k=""),k.toString()});return g==c?l:g}function re(l){const s=[];let o=l.next();for(;!o.done;)s.push(o.value),o=l.next();return s}const je=/-+([a-z0-9])/g;function gt(l){return l.replace(je,(...s)=>s[1].toUpperCase())}function xt(l,s,o){switch(s.type){case 7:return l.visitTrigger(s,o);case 0:return l.visitState(s,o);case 1:return l.visitTransition(s,o);case 2:return l.visitSequence(s,o);case 3:return l.visitGroup(s,o);case 4:return l.visitAnimate(s,o);case 5:return l.visitKeyframes(s,o);case 6:return l.visitStyle(s,o);case 8:return l.visitReference(s,o);case 9:return l.visitAnimateChild(s,o);case 10:return l.visitAnimateRef(s,o);case 11:return l.visitQuery(s,o);case 12:return l.visitStagger(s,o);default:throw function ae(l){return new X.vHH(3004,!1)}()}}function bn(l,s){return window.getComputedStyle(l)[s]}const Ve="*";function at(l,s){const o=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(c=>function Qt(l,s,o){if(":"==l[0]){const j=function Bt(l,s){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,c)=>parseFloat(c)>parseFloat(o);case":decrement":return(o,c)=>parseFloat(c)<parseFloat(o);default:return s.push(function dt(l){return new X.vHH(3016,!1)}()),"* => *"}}(l,o);if("function"==typeof j)return void s.push(j);l=j}const c=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return o.push(function st(l){return new X.vHH(3015,!1)}()),s;const g=c[1],E=c[2],b=c[3];s.push(nr(g,b));"<"==E[0]&&!(g==Ve&&b==Ve)&&s.push(nr(b,g))}(c,o,s)):o.push(l),o}const mn=new Set(["true","1"]),dr=new Set(["false","0"]);function nr(l,s){const o=mn.has(l)||dr.has(l),c=mn.has(s)||dr.has(s);return(g,E)=>{let b=l==Ve||l==g,k=s==Ve||s==E;return!b&&o&&"boolean"==typeof g&&(b=g?mn.has(l):dr.has(l)),!k&&c&&"boolean"==typeof E&&(k=E?mn.has(s):dr.has(s)),b&&k}}const ss=new RegExp("s*:selfs*,?","g");function cs(l,s,o,c){return new pr(l).build(s,o,c)}class pr{constructor(s){this._driver=s}build(s,o,c){const g=new Di(o);return this._resetContextStyleTimingState(g),xt(this,Ln(s),g)}_resetContextStyleTimingState(s){s.currentQuerySelector="",s.collectedStyles=new Map,s.collectedStyles.set("",new Map),s.currentTime=0}visitTrigger(s,o){let c=o.queryCount=0,g=o.depCount=0;const E=[],b=[];return"@"==s.name.charAt(0)&&o.errors.push(function Ae(){return new X.vHH(3006,!1)}()),s.definitions.forEach(k=>{if(this._resetContextStyleTimingState(o),0==k.type){const j=k,q=j.name;q.toString().split(/\s*,\s*/).forEach(_e=>{j.name=_e,E.push(this.visitState(j,o))}),j.name=q}else if(1==k.type){const j=this.visitTransition(k,o);c+=j.queryCount,g+=j.depCount,b.push(j)}else o.errors.push(function mt(){return new X.vHH(3007,!1)}())}),{type:7,name:s.name,states:E,transitions:b,queryCount:c,depCount:g,options:null}}visitState(s,o){const c=this.visitStyle(s.styles,o),g=s.options&&s.options.params||null;if(c.containsDynamicStyles){const E=new Set,b=g||{};c.styles.forEach(k=>{k instanceof Map&&k.forEach(j=>{ne(j).forEach(q=>{b.hasOwnProperty(q)||E.add(q)})})}),E.size&&(re(E.values()),o.errors.push(function ut(l,s){return new X.vHH(3008,!1)}()))}return{type:0,name:s.name,style:c,options:g?{params:g}:null}}visitTransition(s,o){o.queryCount=0,o.depCount=0;const c=xt(this,Ln(s.animation),o);return{type:1,matchers:at(s.expr,o.errors),animation:c,queryCount:o.queryCount,depCount:o.depCount,options:gr(s.options)}}visitSequence(s,o){return{type:2,steps:s.steps.map(c=>xt(this,c,o)),options:gr(s.options)}}visitGroup(s,o){const c=o.currentTime;let g=0;const E=s.steps.map(b=>{o.currentTime=c;const k=xt(this,b,o);return g=Math.max(g,o.currentTime),k});return o.currentTime=g,{type:3,steps:E,options:gr(s.options)}}visitAnimate(s,o){const c=function Io(l,s){if(l.hasOwnProperty("duration"))return l;if("number"==typeof l)return uo(yi(l,s).duration,0,"");const o=l;if(o.split(/\s+/).some(E=>"{"==E.charAt(0)&&"{"==E.charAt(1))){const E=uo(0,0,"");return E.dynamic=!0,E.strValue=o,E}const g=yi(o,s);return uo(g.duration,g.delay,g.easing)}(s.timings,o.errors);o.currentAnimateTimings=c;let g,E=s.styles?s.styles:(0,Y.oB)({});if(5==E.type)g=this.visitKeyframes(E,o);else{let b=s.styles,k=!1;if(!b){k=!0;const q={};c.easing&&(q.easing=c.easing),b=(0,Y.oB)(q)}o.currentTime+=c.duration+c.delay;const j=this.visitStyle(b,o);j.isEmptyStep=k,g=j}return o.currentAnimateTimings=null,{type:4,timings:c,style:g,options:null}}visitStyle(s,o){const c=this._makeStyleAst(s,o);return this._validateStyleAst(c,o),c}_makeStyleAst(s,o){const c=[],g=Array.isArray(s.styles)?s.styles:[s.styles];for(let k of g)"string"==typeof k?k===Y.l3?c.push(k):o.errors.push(new X.vHH(3002,!1)):c.push(fr(k));let E=!1,b=null;return c.forEach(k=>{if(k instanceof Map&&(k.has("easing")&&(b=k.get("easing"),k.delete("easing")),!E))for(let j of k.values())if(j.toString().indexOf("{{")>=0){E=!0;break}}),{type:6,styles:c,easing:b,offset:s.offset,containsDynamicStyles:E,options:null}}_validateStyleAst(s,o){const c=o.currentAnimateTimings;let g=o.currentTime,E=o.currentTime;c&&E>0&&(E-=c.duration+c.delay),s.styles.forEach(b=>{"string"!=typeof b&&b.forEach((k,j)=>{const q=o.collectedStyles.get(o.currentQuerySelector),_e=q.get(j);let De=!0;_e&&(E!=g&&E>=_e.startTime&&g<=_e.endTime&&(o.errors.push(function Pt(l,s,o,c,g){return new X.vHH(3010,!1)}()),De=!1),E=_e.startTime),De&&q.set(j,{startTime:E,endTime:g}),o.options&&function we(l,s,o){const c=s.params||{},g=ne(l);g.length&&g.forEach(E=>{c.hasOwnProperty(E)||o.push(function Be(l){return new X.vHH(3001,!1)}())})}(k,o.options,o.errors)})})}visitKeyframes(s,o){const c={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function bt(){return new X.vHH(3011,!1)}()),c;let E=0;const b=[];let k=!1,j=!1,q=0;const _e=s.steps.map(Nn=>{const ur=this._makeStyleAst(Nn,o);let kr=null!=ur.offset?ur.offset:function Ns(l){if("string"==typeof l)return null;let s=null;if(Array.isArray(l))l.forEach(o=>{if(o instanceof Map&&o.has("offset")){const c=o;s=parseFloat(c.get("offset")),c.delete("offset")}});else if(l instanceof Map&&l.has("offset")){const o=l;s=parseFloat(o.get("offset")),o.delete("offset")}return s}(ur.styles),Wr=0;return null!=kr&&(E++,Wr=ur.offset=kr),j=j||Wr<0||Wr>1,k=k||Wr<q,q=Wr,b.push(Wr),ur});j&&o.errors.push(function Le(){return new X.vHH(3012,!1)}()),k&&o.errors.push(function Mt(){return new X.vHH(3200,!1)}());const De=s.steps.length;let Ge=0;E>0&&E<De?o.errors.push(function fe(){return new X.vHH(3202,!1)}()):0==E&&(Ge=1/(De-1));const ct=De-1,ht=o.currentTime,Wt=o.currentAnimateTimings,In=Wt.duration;return _e.forEach((Nn,ur)=>{const kr=Ge>0?ur==ct?1:Ge*ur:b[ur],Wr=kr*In;o.currentTime=ht+Wt.delay+Wr,Wt.duration=Wr,this._validateStyleAst(Nn,o),Nn.offset=kr,c.styles.push(Nn)}),c}visitReference(s,o){return{type:8,animation:xt(this,Ln(s.animation),o),options:gr(s.options)}}visitAnimateChild(s,o){return o.depCount++,{type:9,options:gr(s.options)}}visitAnimateRef(s,o){return{type:10,animation:this.visitReference(s.animation,o),options:gr(s.options)}}visitQuery(s,o){const c=o.currentQuerySelector,g=s.options||{};o.queryCount++,o.currentQuery=s;const[E,b]=function vs(l){const s=!!l.split(/\s*,\s*/).find(o=>":self"==o);return s&&(l=l.replace(ss,"")),l=l.replace(/@\*/g,Wn).replace(/@\w+/g,o=>Wn+"-"+o.slice(1)).replace(/:animating/g,Yt),[l,s]}(s.selector);o.currentQuerySelector=c.length?c+" "+E:E,Ht(o.collectedStyles,o.currentQuerySelector,new Map);const k=xt(this,Ln(s.animation),o);return o.currentQuery=null,o.currentQuerySelector=c,{type:11,selector:E,limit:g.limit||0,optional:!!g.optional,includeSelf:b,animation:k,originalSelector:s.selector,options:gr(s.options)}}visitStagger(s,o){o.currentQuery||o.errors.push(function Ze(){return new X.vHH(3013,!1)}());const c="full"===s.timings?{duration:0,delay:0,easing:"full"}:yi(s.timings,o.errors,!0);return{type:12,animation:xt(this,Ln(s.animation),o),timings:c,options:null}}}class Di{constructor(s){this.errors=s,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gr(l){return l?(l=br(l)).params&&(l.params=function Pi(l){return l?br(l):null}(l.params)):l={},l}function uo(l,s,o){return{duration:l,delay:s,easing:o}}function Ys(l,s,o,c,g,E,b=null,k=!1){return{type:1,element:l,keyframes:s,preStyleProps:o,postStyleProps:c,duration:g,delay:E,totalTime:g+E,easing:b,subTimeline:k}}class Fo{constructor(){this._map=new Map}get(s){return this._map.get(s)||[]}append(s,o){let c=this._map.get(s);c||this._map.set(s,c=[]),c.push(...o)}has(s){return this._map.has(s)}clear(){this._map.clear()}}const Uo=new RegExp(":enter","g"),qa=new RegExp(":leave","g");function Ui(l,s,o,c,g,E=new Map,b=new Map,k,j,q=[]){return(new Za).buildKeyframes(l,s,o,c,g,E,b,k,j,q)}class Za{buildKeyframes(s,o,c,g,E,b,k,j,q,_e=[]){q=q||new Fo;const De=new Ia(s,o,q,g,E,_e,[]);De.options=j;const Ge=j.delay?Ir(j.delay):0;De.currentTimeline.delayNextStep(Ge),De.currentTimeline.setStyles([b],null,De.errors,j),xt(this,c,De);const ct=De.timelines.filter(ht=>ht.containsAnimation());if(ct.length&&k.size){let ht;for(let Wt=ct.length-1;Wt>=0;Wt--){const In=ct[Wt];if(In.element===o){ht=In;break}}ht&&!ht.allowOnlyTimelineStyles()&&ht.setStyles([k],null,De.errors,j)}return ct.length?ct.map(ht=>ht.buildKeyframes()):[Ys(o,[],[],[],0,Ge,"",!1)]}visitTrigger(s,o){}visitState(s,o){}visitTransition(s,o){}visitAnimateChild(s,o){const c=o.subInstructions.get(o.element);if(c){const g=o.createSubContext(s.options),E=o.currentTimeline.currentTime,b=this._visitSubInstructions(c,g,g.options);E!=b&&o.transformIntoNewTimeline(b)}o.previousNode=s}visitAnimateRef(s,o){const c=o.createSubContext(s.options);c.transformIntoNewTimeline(),this._applyAnimationRefDelays([s.options,s.animation.options],o,c),this.visitReference(s.animation,c),o.transformIntoNewTimeline(c.currentTimeline.currentTime),o.previousNode=s}_applyAnimationRefDelays(s,o,c){for(const g of s){const E=g?.delay;if(E){const b="number"==typeof E?E:Ir(J(E,g?.params??{},o.errors));c.delayNextStep(b)}}}_visitSubInstructions(s,o,c){let E=o.currentTimeline.currentTime;const b=null!=c.duration?Ir(c.duration):null,k=null!=c.delay?Ir(c.delay):null;return 0!==b&&s.forEach(j=>{const q=o.appendInstructionToTimeline(j,b,k);E=Math.max(E,q.duration+q.delay)}),E}visitReference(s,o){o.updateOptions(s.options,!0),xt(this,s.animation,o),o.previousNode=s}visitSequence(s,o){const c=o.subContextCount;let g=o;const E=s.options;if(E&&(E.params||E.delay)&&(g=o.createSubContext(E),g.transformIntoNewTimeline(),null!=E.delay)){6==g.previousNode.type&&(g.currentTimeline.snapshotCurrentStyles(),g.previousNode=hi);const b=Ir(E.delay);g.delayNextStep(b)}s.steps.length&&(s.steps.forEach(b=>xt(this,b,g)),g.currentTimeline.applyStylesToKeyframe(),g.subContextCount>c&&g.transformIntoNewTimeline()),o.previousNode=s}visitGroup(s,o){const c=[];let g=o.currentTimeline.currentTime;const E=s.options&&s.options.delay?Ir(s.options.delay):0;s.steps.forEach(b=>{const k=o.createSubContext(s.options);E&&k.delayNextStep(E),xt(this,b,k),g=Math.max(g,k.currentTimeline.currentTime),c.push(k.currentTimeline)}),c.forEach(b=>o.currentTimeline.mergeTimelineCollectedStyles(b)),o.transformIntoNewTimeline(g),o.previousNode=s}_visitTiming(s,o){if(s.dynamic){const c=s.strValue;return yi(o.params?J(c,o.params,o.errors):c,o.errors)}return{duration:s.duration,delay:s.delay,easing:s.easing}}visitAnimate(s,o){const c=o.currentAnimateTimings=this._visitTiming(s.timings,o),g=o.currentTimeline;c.delay&&(o.incrementTime(c.delay),g.snapshotCurrentStyles());const E=s.style;5==E.type?this.visitKeyframes(E,o):(o.incrementTime(c.duration),this.visitStyle(E,o),g.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=s}visitStyle(s,o){const c=o.currentTimeline,g=o.currentAnimateTimings;!g&&c.hasCurrentStyleProperties()&&c.forwardFrame();const E=g&&g.easing||s.easing;s.isEmptyStep?c.applyEmptyStep(E):c.setStyles(s.styles,E,o.errors,o.options),o.previousNode=s}visitKeyframes(s,o){const c=o.currentAnimateTimings,g=o.currentTimeline.duration,E=c.duration,k=o.createSubContext().currentTimeline;k.easing=c.easing,s.styles.forEach(j=>{k.forwardTime((j.offset||0)*E),k.setStyles(j.styles,j.easing,o.errors,o.options),k.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(k),o.transformIntoNewTimeline(g+E),o.previousNode=s}visitQuery(s,o){const c=o.currentTimeline.currentTime,g=s.options||{},E=g.delay?Ir(g.delay):0;E&&(6===o.previousNode.type||0==c&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=hi);let b=c;const k=o.invokeQuery(s.selector,s.originalSelector,s.limit,s.includeSelf,!!g.optional,o.errors);o.currentQueryTotal=k.length;let j=null;k.forEach((q,_e)=>{o.currentQueryIndex=_e;const De=o.createSubContext(s.options,q);E&&De.delayNextStep(E),q===o.element&&(j=De.currentTimeline),xt(this,s.animation,De),De.currentTimeline.applyStylesToKeyframe(),b=Math.max(b,De.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(b),j&&(o.currentTimeline.mergeTimelineCollectedStyles(j),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=s}visitStagger(s,o){const c=o.parentContext,g=o.currentTimeline,E=s.timings,b=Math.abs(E.duration),k=b*(o.currentQueryTotal-1);let j=b*o.currentQueryIndex;switch(E.duration<0?"reverse":E.easing){case"reverse":j=k-j;break;case"full":j=c.currentStaggerTime}const _e=o.currentTimeline;j&&_e.delayNextStep(j);const De=_e.currentTime;xt(this,s.animation,o),o.previousNode=s,c.currentStaggerTime=g.currentTime-De+(g.startTime-c.currentTimeline.startTime)}}const hi={};class Ia{constructor(s,o,c,g,E,b,k,j){this._driver=s,this.element=o,this.subInstructions=c,this._enterClassName=g,this._leaveClassName=E,this.errors=b,this.timelines=k,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=j||new co(this._driver,o,0),k.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(s,o){if(!s)return;const c=s;let g=this.options;null!=c.duration&&(g.duration=Ir(c.duration)),null!=c.delay&&(g.delay=Ir(c.delay));const E=c.params;if(E){let b=g.params;b||(b=this.options.params={}),Object.keys(E).forEach(k=>{(!o||!b.hasOwnProperty(k))&&(b[k]=J(E[k],b,this.errors))})}}_copyOptions(){const s={};if(this.options){const o=this.options.params;if(o){const c=s.params={};Object.keys(o).forEach(g=>{c[g]=o[g]})}}return s}createSubContext(s=null,o,c){const g=o||this.element,E=new Ia(this._driver,g,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(g,c||0));return E.previousNode=this.previousNode,E.currentAnimateTimings=this.currentAnimateTimings,E.options=this._copyOptions(),E.updateOptions(s),E.currentQueryIndex=this.currentQueryIndex,E.currentQueryTotal=this.currentQueryTotal,E.parentContext=this,this.subContextCount++,E}transformIntoNewTimeline(s){return this.previousNode=hi,this.currentTimeline=this.currentTimeline.fork(this.element,s),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(s,o,c){const g={duration:o??s.duration,delay:this.currentTimeline.currentTime+(c??0)+s.delay,easing:""},E=new Fn(this._driver,s.element,s.keyframes,s.preStyleProps,s.postStyleProps,g,s.stretchStartingKeyframe);return this.timelines.push(E),g}incrementTime(s){this.currentTimeline.forwardTime(this.currentTimeline.duration+s)}delayNextStep(s){s>0&&this.currentTimeline.delayNextStep(s)}invokeQuery(s,o,c,g,E,b){let k=[];if(g&&k.push(this.element),s.length>0){s=(s=s.replace(Uo,"."+this._enterClassName)).replace(qa,"."+this._leaveClassName);let q=this._driver.query(this.element,s,1!=c);0!==c&&(q=c<0?q.slice(q.length+c,q.length):q.slice(0,c)),k.push(...q)}return!E&&0==k.length&&b.push(function Ce(l){return new X.vHH(3014,!1)}()),k}}class co{constructor(s,o,c,g){this._driver=s,this.element=o,this.startTime=c,this._elementTimelineStylesLookup=g,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(s){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+s),o&&this.snapshotCurrentStyles()):this.startTime+=s}fork(s,o){return this.applyStylesToKeyframe(),new co(this._driver,s,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(s){this.applyStylesToKeyframe(),this.duration=s,this._loadKeyframe()}_updateStyle(s,o){this._localTimelineStyles.set(s,o),this._globalTimelineStyles.set(s,o),this._styleSummary.set(s,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(s){s&&this._previousKeyframe.set("easing",s);for(let[o,c]of this._globalTimelineStyles)this._backFill.set(o,c||Y.l3),this._currentKeyframe.set(o,Y.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(s,o,c,g){o&&this._previousKeyframe.set("easing",o);const E=g&&g.params||{},b=function Sr(l,s){const o=new Map;let c;return l.forEach(g=>{if("*"===g){c=c||s.keys();for(let E of c)o.set(E,Y.l3)}else Nr(g,o)}),o}(s,this._globalTimelineStyles);for(let[k,j]of b){const q=J(j,E,c);this._pendingStyles.set(k,q),this._localTimelineStyles.has(k)||this._backFill.set(k,this._globalTimelineStyles.get(k)??Y.l3),this._updateStyle(k,q)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((s,o)=>{this._currentKeyframe.set(o,s)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((s,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,s)}))}snapshotCurrentStyles(){for(let[s,o]of this._localTimelineStyles)this._pendingStyles.set(s,o),this._updateStyle(s,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const s=[];for(let o in this._currentKeyframe)s.push(o);return s}mergeTimelineCollectedStyles(s){s._styleSummary.forEach((o,c)=>{const g=this._styleSummary.get(c);(!g||o.time>g.time)&&this._updateStyle(c,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const s=new Set,o=new Set,c=1===this._keyframes.size&&0===this.duration;let g=[];this._keyframes.forEach((k,j)=>{const q=Nr(k,new Map,this._backFill);q.forEach((_e,De)=>{_e===Y.k1?s.add(De):_e===Y.l3&&o.add(De)}),c||q.set("offset",j/this.duration),g.push(q)});const E=s.size?re(s.values()):[],b=o.size?re(o.values()):[];if(c){const k=g[0],j=new Map(k);k.set("offset",0),j.set("offset",1),g=[k,j]}return Ys(this.element,g,E,b,this.duration,this.startTime,this.easing,!1)}}class Fn extends co{constructor(s,o,c,g,E,b,k=!1){super(s,o,b.delay),this.keyframes=c,this.preStyleProps=g,this.postStyleProps=E,this._stretchStartingKeyframe=k,this.timings={duration:b.duration,delay:b.delay,easing:b.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let s=this.keyframes,{delay:o,duration:c,easing:g}=this.timings;if(this._stretchStartingKeyframe&&o){const E=[],b=c+o,k=o/b,j=Nr(s[0]);j.set("offset",0),E.push(j);const q=Nr(s[0]);q.set("offset",xi(k)),E.push(q);const _e=s.length-1;for(let De=1;De<=_e;De++){let Ge=Nr(s[De]);const ct=Ge.get("offset");Ge.set("offset",xi((o+ct*c)/b)),E.push(Ge)}c=b,o=0,g="",s=E}return Ys(this.element,s,this.preStyleProps,this.postStyleProps,c,o,g,!0)}}function xi(l,s=3){const o=Math.pow(10,s-1);return Math.round(l*o)/o}class Bi{}const xe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Re extends Bi{normalizePropertyName(s,o){return gt(s)}normalizeStyleValue(s,o,c,g){let E="";const b=c.toString().trim();if(xe.has(o)&&0!==c&&"0"!==c)if("number"==typeof c)E="px";else{const k=c.match(/^[+-]?[\d\.]+([a-z]*)$/);k&&0==k[1].length&&g.push(function he(l,s){return new X.vHH(3005,!1)}())}return b+E}}function Ye(l,s,o,c,g,E,b,k,j,q,_e,De,Ge){return{type:0,element:l,triggerName:s,isRemovalTransition:g,fromState:o,fromStyles:E,toState:c,toStyles:b,timelines:k,queriedElements:j,preStyleProps:q,postStyleProps:_e,totalTime:De,errors:Ge}}const vt={};class Tt{constructor(s,o,c){this._triggerName=s,this.ast=o,this._stateStyles=c}match(s,o,c,g){return function Xt(l,s,o,c,g){return l.some(E=>E(s,o,c,g))}(this.ast.matchers,s,o,c,g)}buildStyles(s,o,c){let g=this._stateStyles.get("*");return void 0!==s&&(g=this._stateStyles.get(s?.toString())||g),g?g.buildStyles(o,c):new Map}build(s,o,c,g,E,b,k,j,q,_e){const De=[],Ge=this.ast.options&&this.ast.options.params||vt,ht=this.buildStyles(c,k&&k.params||vt,De),Wt=j&&j.params||vt,In=this.buildStyles(g,Wt,De),Nn=new Set,ur=new Map,kr=new Map,Wr="void"===g,lu={params:_n(Wt,Ge),delay:this.ast.options?.delay},ta=_e?[]:Ui(s,o,this.ast.animation,E,b,ht,In,lu,q,De);let ao=0;if(ta.forEach(Eo=>{ao=Math.max(Eo.duration+Eo.delay,ao)}),De.length)return Ye(o,this._triggerName,c,g,Wr,ht,In,[],[],ur,kr,ao,De);ta.forEach(Eo=>{const yd=Eo.element,rv=Ht(ur,yd,new Set);Eo.preStyleProps.forEach(Wh=>rv.add(Wh));const Gh=Ht(kr,yd,new Set);Eo.postStyleProps.forEach(Wh=>Gh.add(Wh)),yd!==o&&Nn.add(yd)});const na=re(Nn.values());return Ye(o,this._triggerName,c,g,Wr,ht,In,ta,na,ur,kr,ao)}}function _n(l,s){const o=br(s);for(const c in l)l.hasOwnProperty(c)&&null!=l[c]&&(o[c]=l[c]);return o}class Vn{constructor(s,o,c){this.styles=s,this.defaultParams=o,this.normalizer=c}buildStyles(s,o){const c=new Map,g=br(this.defaultParams);return Object.keys(s).forEach(E=>{const b=s[E];null!==b&&(g[E]=b)}),this.styles.styles.forEach(E=>{"string"!=typeof E&&E.forEach((b,k)=>{b&&(b=J(b,g,o));const j=this.normalizer.normalizePropertyName(k,o);b=this.normalizer.normalizeStyleValue(k,j,b,o),c.set(k,b)})}),c}}class fi{constructor(s,o,c){this.name=s,this.ast=o,this._normalizer=c,this.transitionFactories=[],this.states=new Map,o.states.forEach(g=>{this.states.set(g.name,new Vn(g.style,g.options&&g.options.params||{},c))}),Zr(this.states,"true","1"),Zr(this.states,"false","0"),o.transitions.forEach(g=>{this.transitionFactories.push(new Tt(s,g,this.states))}),this.fallbackTransition=function Vi(l,s,o){return new Tt(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(b,k)=>!0],options:null,queryCount:0,depCount:0},s)}(s,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(s,o,c,g){return this.transitionFactories.find(b=>b.match(s,o,c,g))||null}matchStyles(s,o,c){return this.fallbackTransition.buildStyles(s,o,c)}}function Zr(l,s,o){l.has(s)?l.has(o)||l.set(o,l.get(s)):l.has(o)&&l.set(s,l.get(o))}const os=new Fo;class Yi{constructor(s,o,c){this.bodyNode=s,this._driver=o,this._normalizer=c,this._animations=new Map,this._playersById=new Map,this.players=[]}register(s,o){const c=[],E=cs(this._driver,o,c,[]);if(c.length)throw function pn(l){return new X.vHH(3503,!1)}();this._animations.set(s,E)}_buildPlayer(s,o,c){const g=s.element,E=ke(this._normalizer,s.keyframes,o,c);return this._driver.animate(g,E,s.duration,s.delay,s.easing,[],!0)}create(s,o,c={}){const g=[],E=this._animations.get(s);let b;const k=new Map;if(E?(b=Ui(this._driver,o,E,Gn,wr,new Map,new Map,c,os,g),b.forEach(_e=>{const De=Ht(k,_e.element,new Map);_e.postStyleProps.forEach(Ge=>De.set(Ge,null))})):(g.push(function En(){return new X.vHH(3300,!1)}()),b=[]),g.length)throw function Xn(l){return new X.vHH(3504,!1)}();k.forEach((_e,De)=>{_e.forEach((Ge,ct)=>{_e.set(ct,this._driver.computeStyle(De,ct,Y.l3))})});const q=oe(b.map(_e=>{const De=k.get(_e.element);return this._buildPlayer(_e,new Map,De)}));return this._playersById.set(s,q),q.onDestroy(()=>this.destroy(s)),this.players.push(q),q}destroy(s){const o=this._getPlayer(s);o.destroy(),this._playersById.delete(s);const c=this.players.indexOf(o);c>=0&&this.players.splice(c,1)}_getPlayer(s){const o=this._playersById.get(s);if(!o)throw function Bn(l){return new X.vHH(3301,!1)}();return o}listen(s,o,c,g){const E=Lt(o,"","","");return yt(this._getPlayer(s),c,E,g),()=>{}}command(s,o,c,g){if("register"==c)return void this.register(s,g[0]);if("create"==c)return void this.create(s,o,g[0]||{});const E=this._getPlayer(s);switch(c){case"play":E.play();break;case"pause":E.pause();break;case"reset":E.reset();break;case"restart":E.restart();break;case"finish":E.finish();break;case"init":E.init();break;case"setPosition":E.setPosition(parseFloat(g[0]));break;case"destroy":this.destroy(s)}}}const Un="ng-animate-queued",ho="ng-animate-disabled",Ca=[],ds={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Vo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xs="__ng_removed";class pi{get params(){return this.options.params}constructor(s,o=""){this.namespaceId=o;const c=s&&s.hasOwnProperty("value");if(this.value=function Es(l){return l??null}(c?s.value:s),c){const E=br(s);delete E.value,this.options=E}else this.options={};this.options.params||(this.options.params={})}absorbOptions(s){const o=s.params;if(o){const c=this.options.params;Object.keys(o).forEach(g=>{null==c[g]&&(c[g]=o[g])})}}}const yr="void",jo=new pi(yr);class fo{constructor(s,o,c){this.id=s,this.hostElement=o,this._engine=c,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+s,zo(o,this._hostClassName)}listen(s,o,c,g){if(!this._triggers.has(o))throw function Lr(l,s){return new X.vHH(3302,!1)}();if(null==c||0==c.length)throw function er(l){return new X.vHH(3303,!1)}();if(!function Bs(l){return"start"==l||"done"==l}(c))throw function Ue(l,s){return new X.vHH(3400,!1)}();const E=Ht(this._elementListeners,s,[]),b={name:o,phase:c,callback:g};E.push(b);const k=Ht(this._engine.statesByElement,s,new Map);return k.has(o)||(zo(s,Gi),zo(s,Gi+"-"+o),k.set(o,jo)),()=>{this._engine.afterFlush(()=>{const j=E.indexOf(b);j>=0&&E.splice(j,1),this._triggers.has(o)||k.delete(o)})}}register(s,o){return!this._triggers.has(s)&&(this._triggers.set(s,o),!0)}_getTrigger(s){const o=this._triggers.get(s);if(!o)throw function tt(l){return new X.vHH(3401,!1)}();return o}trigger(s,o,c,g=!0){const E=this._getTrigger(o),b=new gi(this.id,o,s);let k=this._engine.statesByElement.get(s);k||(zo(s,Gi),zo(s,Gi+"-"+o),this._engine.statesByElement.set(s,k=new Map));let j=k.get(o);const q=new pi(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&j&&q.absorbOptions(j.options),k.set(o,q),j||(j=jo),q.value!==yr&&j.value===q.value){if(!function Da(l,s){const o=Object.keys(l),c=Object.keys(s);if(o.length!=c.length)return!1;for(let g=0;g<o.length;g++){const E=o[g];if(!s.hasOwnProperty(E)||l[E]!==s[E])return!1}return!0}(j.params,q.params)){const Wt=[],In=E.matchStyles(j.value,j.params,Wt),Nn=E.matchStyles(q.value,q.params,Wt);Wt.length?this._engine.reportError(Wt):this._engine.afterFlush(()=>{ti(s,In),An(s,Nn)})}return}const Ge=Ht(this._engine.playersByElement,s,[]);Ge.forEach(Wt=>{Wt.namespaceId==this.id&&Wt.triggerName==o&&Wt.queued&&Wt.destroy()});let ct=E.matchTransition(j.value,q.value,s,q.params),ht=!1;if(!ct){if(!g)return;ct=E.fallbackTransition,ht=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:s,triggerName:o,transition:ct,fromState:j,toState:q,player:b,isFallbackTransition:ht}),ht||(zo(s,Un),b.onStart(()=>{ui(s,Un)})),b.onDone(()=>{let Wt=this.players.indexOf(b);Wt>=0&&this.players.splice(Wt,1);const In=this._engine.playersByElement.get(s);if(In){let Nn=In.indexOf(b);Nn>=0&&In.splice(Nn,1)}}),this.players.push(b),Ge.push(b),b}deregister(s){this._triggers.delete(s),this._engine.statesByElement.forEach(o=>o.delete(s)),this._elementListeners.forEach((o,c)=>{this._elementListeners.set(c,o.filter(g=>g.name!=s))})}clearElementCache(s){this._engine.statesByElement.delete(s),this._elementListeners.delete(s);const o=this._engine.playersByElement.get(s);o&&(o.forEach(c=>c.destroy()),this._engine.playersByElement.delete(s))}_signalRemovalForInnerTriggers(s,o){const c=this._engine.driver.query(s,Wn,!0);c.forEach(g=>{if(g[Xs])return;const E=this._engine.fetchNamespacesByElement(g);E.size?E.forEach(b=>b.triggerLeaveAnimation(g,o,!1,!0)):this.clearElementCache(g)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(g=>this.clearElementCache(g)))}triggerLeaveAnimation(s,o,c,g){const E=this._engine.statesByElement.get(s),b=new Map;if(E){const k=[];if(E.forEach((j,q)=>{if(b.set(q,j.value),this._triggers.has(q)){const _e=this.trigger(s,q,yr,g);_e&&k.push(_e)}}),k.length)return this._engine.markElementAsRemoved(this.id,s,!0,o,b),c&&oe(k).onDone(()=>this._engine.processLeaveNode(s)),!0}return!1}prepareLeaveAnimationListeners(s){const o=this._elementListeners.get(s),c=this._engine.statesByElement.get(s);if(o&&c){const g=new Set;o.forEach(E=>{const b=E.name;if(g.has(b))return;g.add(b);const j=this._triggers.get(b).fallbackTransition,q=c.get(b)||jo,_e=new pi(yr),De=new gi(this.id,b,s);this._engine.totalQueuedPlayers++,this._queue.push({element:s,triggerName:b,transition:j,fromState:q,toState:_e,player:De,isFallbackTransition:!0})})}}removeNode(s,o){const c=this._engine;if(s.childElementCount&&this._signalRemovalForInnerTriggers(s,o),this.triggerLeaveAnimation(s,o,!0))return;let g=!1;if(c.totalAnimations){const E=c.players.length?c.playersByQueriedElement.get(s):[];if(E&&E.length)g=!0;else{let b=s;for(;b=b.parentNode;)if(c.statesByElement.get(b)){g=!0;break}}}if(this.prepareLeaveAnimationListeners(s),g)c.markElementAsRemoved(this.id,s,!1,o);else{const E=s[Xs];(!E||E===ds)&&(c.afterFlush(()=>this.clearElementCache(s)),c.destroyInnerAnimations(s),c._onRemovalComplete(s,o))}}insertNode(s,o){zo(s,this._hostClassName)}drainQueuedTransitions(s){const o=[];return this._queue.forEach(c=>{const g=c.player;if(g.destroyed)return;const E=c.element,b=this._elementListeners.get(E);b&&b.forEach(k=>{if(k.name==c.triggerName){const j=Lt(E,c.triggerName,c.fromState.value,c.toState.value);j._data=s,yt(c.player,k.phase,j,k.callback)}}),g.markedForDestroy?this._engine.afterFlush(()=>{g.destroy()}):o.push(c)}),this._queue=[],o.sort((c,g)=>{const E=c.transition.ast.depCount,b=g.transition.ast.depCount;return 0==E||0==b?E-b:this._engine.driver.containsElement(c.element,g.element)?1:-1})}destroy(s){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,s)}}class Qn{_onRemovalComplete(s,o){this.onRemovalComplete(s,o)}constructor(s,o,c){this.bodyNode=s,this.driver=o,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(g,E)=>{}}get queuedPlayers(){const s=[];return this._namespaceList.forEach(o=>{o.players.forEach(c=>{c.queued&&s.push(c)})}),s}createNamespace(s,o){const c=new fo(s,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(c,o):(this.newHostElements.set(o,c),this.collectEnterElement(o)),this._namespaceLookup[s]=c}_balanceNamespaceList(s,o){const c=this._namespaceList,g=this.namespacesByHostElement;if(c.length-1>=0){let b=!1,k=this.driver.getParentElement(o);for(;k;){const j=g.get(k);if(j){const q=c.indexOf(j);c.splice(q+1,0,s),b=!0;break}k=this.driver.getParentElement(k)}b||c.unshift(s)}else c.push(s);return g.set(o,s),s}register(s,o){let c=this._namespaceLookup[s];return c||(c=this.createNamespace(s,o)),c}registerTrigger(s,o,c){let g=this._namespaceLookup[s];g&&g.register(o,c)&&this.totalAnimations++}destroy(s,o){s&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const c=this._fetchNamespace(s);this.namespacesByHostElement.delete(c.hostElement);const g=this._namespaceList.indexOf(c);g>=0&&this._namespaceList.splice(g,1),c.destroy(o),delete this._namespaceLookup[s]}))}_fetchNamespace(s){return this._namespaceLookup[s]}fetchNamespacesByElement(s){const o=new Set,c=this.statesByElement.get(s);if(c)for(let g of c.values())if(g.namespaceId){const E=this._fetchNamespace(g.namespaceId);E&&o.add(E)}return o}trigger(s,o,c,g){if(Si(o)){const E=this._fetchNamespace(s);if(E)return E.trigger(o,c,g),!0}return!1}insertNode(s,o,c,g){if(!Si(o))return;const E=o[Xs];if(E&&E.setForRemoval){E.setForRemoval=!1,E.setForMove=!0;const b=this.collectedLeaveElements.indexOf(o);b>=0&&this.collectedLeaveElements.splice(b,1)}if(s){const b=this._fetchNamespace(s);b&&b.insertNode(o,c)}g&&this.collectEnterElement(o)}collectEnterElement(s){this.collectedEnterElements.push(s)}markElementAsDisabled(s,o){o?this.disabledNodes.has(s)||(this.disabledNodes.add(s),zo(s,ho)):this.disabledNodes.has(s)&&(this.disabledNodes.delete(s),ui(s,ho))}removeNode(s,o,c){if(Si(o)){const g=s?this._fetchNamespace(s):null;g?g.removeNode(o,c):this.markElementAsRemoved(s,o,!1,c);const E=this.namespacesByHostElement.get(o);E&&E.id!==s&&E.removeNode(o,c)}else this._onRemovalComplete(o,c)}markElementAsRemoved(s,o,c,g,E){this.collectedLeaveElements.push(o),o[Xs]={namespaceId:s,setForRemoval:g,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:E}}listen(s,o,c,g,E){return Si(o)?this._fetchNamespace(s).listen(o,c,g,E):()=>{}}_buildInstruction(s,o,c,g,E){return s.transition.build(this.driver,s.element,s.fromState.value,s.toState.value,c,g,s.fromState.options,s.toState.options,o,E)}destroyInnerAnimations(s){let o=this.driver.query(s,Wn,!0);o.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(s,Yt,!0),o.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(s){const o=this.playersByElement.get(s);o&&o.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(s){const o=this.playersByQueriedElement.get(s);o&&o.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(s=>{if(this.players.length)return oe(this.players).onDone(()=>s());s()})}processLeaveNode(s){const o=s[Xs];if(o&&o.setForRemoval){if(s[Xs]=ds,o.namespaceId){this.destroyInnerAnimations(s);const c=this._fetchNamespace(o.namespaceId);c&&c.clearElementCache(s)}this._onRemovalComplete(s,o.setForRemoval)}s.classList?.contains(ho)&&this.markElementAsDisabled(s,!1),this.driver.query(s,".ng-animate-disabled",!0).forEach(c=>{this.markElementAsDisabled(c,!1)})}flush(s=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,g)=>this._balanceNamespaceList(c,g)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)zo(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{o=this._flushAnimations(c,s)}finally{for(let g=0;g<c.length;g++)c[g]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],o.length?oe(o).onDone(()=>{c.forEach(g=>g())}):c.forEach(g=>g())}}reportError(s){throw function Qe(l){return new X.vHH(3402,!1)}()}_flushAnimations(s,o){const c=new Fo,g=[],E=new Map,b=[],k=new Map,j=new Map,q=new Map,_e=new Set;this.disabledNodes.forEach(Dn=>{_e.add(Dn);const jn=this.driver.query(Dn,".ng-animate-queued",!0);for(let Pn=0;Pn<jn.length;Pn++)_e.add(jn[Pn])});const De=this.bodyNode,Ge=Array.from(this.statesByElement.keys()),ct=Wi(Ge,this.collectedEnterElements),ht=new Map;let Wt=0;ct.forEach((Dn,jn)=>{const Pn=Gn+Wt++;ht.set(jn,Pn),Dn.forEach(li=>zo(li,Pn))});const In=[],Nn=new Set,ur=new Set;for(let Dn=0;Dn<this.collectedLeaveElements.length;Dn++){const jn=this.collectedLeaveElements[Dn],Pn=jn[Xs];Pn&&Pn.setForRemoval&&(In.push(jn),Nn.add(jn),Pn.hasAnimation?this.driver.query(jn,".ng-star-inserted",!0).forEach(li=>Nn.add(li)):ur.add(jn))}const kr=new Map,Wr=Wi(Ge,Array.from(Nn));Wr.forEach((Dn,jn)=>{const Pn=wr+Wt++;kr.set(jn,Pn),Dn.forEach(li=>zo(li,Pn))}),s.push(()=>{ct.forEach((Dn,jn)=>{const Pn=ht.get(jn);Dn.forEach(li=>ui(li,Pn))}),Wr.forEach((Dn,jn)=>{const Pn=kr.get(jn);Dn.forEach(li=>ui(li,Pn))}),In.forEach(Dn=>{this.processLeaveNode(Dn)})});const lu=[],ta=[];for(let Dn=this._namespaceList.length-1;Dn>=0;Dn--)this._namespaceList[Dn].drainQueuedTransitions(o).forEach(Pn=>{const li=Pn.player,Lo=Pn.element;if(lu.push(li),this.collectedEnterElements.length){const wa=Lo[Xs];if(wa&&wa.setForMove){if(wa.previousTriggersValues&&wa.previousTriggersValues.has(Pn.triggerName)){const Kh=wa.previousTriggersValues.get(Pn.triggerName),jl=this.statesByElement.get(Pn.element);if(jl&&jl.has(Pn.triggerName)){const Xf=jl.get(Pn.triggerName);Xf.value=Kh,jl.set(Pn.triggerName,Xf)}}return void li.destroy()}}const wo=!De||!this.driver.containsElement(De,Lo),Fs=kr.get(Lo),ra=ht.get(Lo),Ms=this._buildInstruction(Pn,c,ra,Fs,wo);if(Ms.errors&&Ms.errors.length)return void ta.push(Ms);if(wo)return li.onStart(()=>ti(Lo,Ms.fromStyles)),li.onDestroy(()=>An(Lo,Ms.toStyles)),void g.push(li);if(Pn.isFallbackTransition)return li.onStart(()=>ti(Lo,Ms.fromStyles)),li.onDestroy(()=>An(Lo,Ms.toStyles)),void g.push(li);const iv=[];Ms.timelines.forEach(wa=>{wa.stretchStartingKeyframe=!0,this.disabledNodes.has(wa.element)||iv.push(wa)}),Ms.timelines=iv,c.append(Lo,Ms.timelines),b.push({instruction:Ms,player:li,element:Lo}),Ms.queriedElements.forEach(wa=>Ht(k,wa,[]).push(li)),Ms.preStyleProps.forEach((wa,Kh)=>{if(wa.size){let jl=j.get(Kh);jl||j.set(Kh,jl=new Set),wa.forEach((Xf,sh)=>jl.add(sh))}}),Ms.postStyleProps.forEach((wa,Kh)=>{let jl=q.get(Kh);jl||q.set(Kh,jl=new Set),wa.forEach((Xf,sh)=>jl.add(sh))})});if(ta.length){const Dn=[];ta.forEach(jn=>{Dn.push(function Se(l,s){return new X.vHH(3505,!1)}())}),lu.forEach(jn=>jn.destroy()),this.reportError(Dn)}const ao=new Map,na=new Map;b.forEach(Dn=>{const jn=Dn.element;c.has(jn)&&(na.set(jn,jn),this._beforeAnimationBuild(Dn.player.namespaceId,Dn.instruction,ao))}),g.forEach(Dn=>{const jn=Dn.element;this._getPreviousPlayers(jn,!1,Dn.namespaceId,Dn.triggerName,null).forEach(li=>{Ht(ao,jn,[]).push(li),li.destroy()})});const Eo=In.filter(Dn=>Qi(Dn,j,q)),yd=new Map;Ho(yd,this.driver,ur,q,Y.l3).forEach(Dn=>{Qi(Dn,j,q)&&Eo.push(Dn)});const Gh=new Map;ct.forEach((Dn,jn)=>{Ho(Gh,this.driver,new Set(Dn),j,Y.k1)}),Eo.forEach(Dn=>{const jn=yd.get(Dn),Pn=Gh.get(Dn);yd.set(Dn,new Map([...jn?.entries()??[],...Pn?.entries()??[]]))});const Wh=[],ih=[],r_={};b.forEach(Dn=>{const{element:jn,player:Pn,instruction:li}=Dn;if(c.has(jn)){if(_e.has(jn))return Pn.onDestroy(()=>An(jn,li.toStyles)),Pn.disabled=!0,Pn.overrideTotalTime(li.totalTime),void g.push(Pn);let Lo=r_;if(na.size>1){let Fs=jn;const ra=[];for(;Fs=Fs.parentNode;){const Ms=na.get(Fs);if(Ms){Lo=Ms;break}ra.push(Fs)}ra.forEach(Ms=>na.set(Ms,Lo))}const wo=this._buildAnimation(Pn.namespaceId,li,ao,E,Gh,yd);if(Pn.setRealPlayer(wo),Lo===r_)Wh.push(Pn);else{const Fs=this.playersByElement.get(Lo);Fs&&Fs.length&&(Pn.parentPlayer=oe(Fs)),g.push(Pn)}}else ti(jn,li.fromStyles),Pn.onDestroy(()=>An(jn,li.toStyles)),ih.push(Pn),_e.has(jn)&&g.push(Pn)}),ih.forEach(Dn=>{const jn=E.get(Dn.element);if(jn&&jn.length){const Pn=oe(jn);Dn.setRealPlayer(Pn)}}),g.forEach(Dn=>{Dn.parentPlayer?Dn.syncPlayerEvents(Dn.parentPlayer):Dn.destroy()});for(let Dn=0;Dn<In.length;Dn++){const jn=In[Dn],Pn=jn[Xs];if(ui(jn,wr),Pn&&Pn.hasAnimation)continue;let li=[];if(k.size){let wo=k.get(jn);wo&&wo.length&&li.push(...wo);let Fs=this.driver.query(jn,Yt,!0);for(let ra=0;ra<Fs.length;ra++){let Ms=k.get(Fs[ra]);Ms&&Ms.length&&li.push(...Ms)}}const Lo=li.filter(wo=>!wo.destroyed);Lo.length?hs(this,jn,Lo):this.processLeaveNode(jn)}return In.length=0,Wh.forEach(Dn=>{this.players.push(Dn),Dn.onDone(()=>{Dn.destroy();const jn=this.players.indexOf(Dn);this.players.splice(jn,1)}),Dn.play()}),Wh}afterFlush(s){this._flushFns.push(s)}afterFlushAnimationsDone(s){this._whenQuietFns.push(s)}_getPreviousPlayers(s,o,c,g,E){let b=[];if(o){const k=this.playersByQueriedElement.get(s);k&&(b=k)}else{const k=this.playersByElement.get(s);if(k){const j=!E||E==yr;k.forEach(q=>{q.queued||!j&&q.triggerName!=g||b.push(q)})}}return(c||g)&&(b=b.filter(k=>!(c&&c!=k.namespaceId||g&&g!=k.triggerName))),b}_beforeAnimationBuild(s,o,c){const E=o.element,b=o.isRemovalTransition?void 0:s,k=o.isRemovalTransition?void 0:o.triggerName;for(const j of o.timelines){const q=j.element,_e=q!==E,De=Ht(c,q,[]);this._getPreviousPlayers(q,_e,b,k,o.toState).forEach(ct=>{const ht=ct.getRealPlayer();ht.beforeDestroy&&ht.beforeDestroy(),ct.destroy(),De.push(ct)})}ti(E,o.fromStyles)}_buildAnimation(s,o,c,g,E,b){const k=o.triggerName,j=o.element,q=[],_e=new Set,De=new Set,Ge=o.timelines.map(ht=>{const Wt=ht.element;_e.add(Wt);const In=Wt[Xs];if(In&&In.removedBeforeQueried)return new Y.ZN(ht.duration,ht.delay);const Nn=Wt!==j,ur=function Vs(l){const s=[];return Co(l,s),s}((c.get(Wt)||Ca).map(ao=>ao.getRealPlayer())).filter(ao=>!!ao.element&&ao.element===Wt),kr=E.get(Wt),Wr=b.get(Wt),lu=ke(this._normalizer,ht.keyframes,kr,Wr),ta=this._buildPlayer(ht,lu,ur);if(ht.subTimeline&&g&&De.add(Wt),Nn){const ao=new gi(s,k,Wt);ao.setRealPlayer(ta),q.push(ao)}return ta});q.forEach(ht=>{Ht(this.playersByQueriedElement,ht.element,[]).push(ht),ht.onDone(()=>function $o(l,s,o){let c=l.get(s);if(c){if(c.length){const g=c.indexOf(o);c.splice(g,1)}0==c.length&&l.delete(s)}return c}(this.playersByQueriedElement,ht.element,ht))}),_e.forEach(ht=>zo(ht,$r));const ct=oe(Ge);return ct.onDestroy(()=>{_e.forEach(ht=>ui(ht,$r)),An(j,o.toStyles)}),De.forEach(ht=>{Ht(g,ht,[]).push(ct)}),ct}_buildPlayer(s,o,c){return o.length>0?this.driver.animate(s.element,o,s.duration,s.delay,s.easing,c):new Y.ZN(s.duration,s.delay)}}class gi{constructor(s,o,c){this.namespaceId=s,this.triggerName=o,this.element=c,this._player=new Y.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(s){this._containsRealPlayer||(this._player=s,this._queuedCallbacks.forEach((o,c)=>{o.forEach(g=>yt(s,c,void 0,g))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(s.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(s){this.totalTime=s}syncPlayerEvents(s){const o=this._player;o.triggerCallback&&s.onStart(()=>o.triggerCallback("start")),s.onDone(()=>this.finish()),s.onDestroy(()=>this.destroy())}_queueEvent(s,o){Ht(this._queuedCallbacks,s,[]).push(o)}onDone(s){this.queued&&this._queueEvent("done",s),this._player.onDone(s)}onStart(s){this.queued&&this._queueEvent("start",s),this._player.onStart(s)}onDestroy(s){this.queued&&this._queueEvent("destroy",s),this._player.onDestroy(s)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(s){this.queued||this._player.setPosition(s)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(s){const o=this._player;o.triggerCallback&&o.triggerCallback(s)}}function Si(l){return l&&1===l.nodeType}function To(l,s){const o=l.style.display;return l.style.display=s??"none",o}function Ho(l,s,o,c,g){const E=[];o.forEach(j=>E.push(To(j)));const b=[];c.forEach((j,q)=>{const _e=new Map;j.forEach(De=>{const Ge=s.computeStyle(q,De,g);_e.set(De,Ge),(!Ge||0==Ge.length)&&(q[Xs]=Vo,b.push(q))}),l.set(q,_e)});let k=0;return o.forEach(j=>To(j,E[k++])),b}function Wi(l,s){const o=new Map;if(l.forEach(k=>o.set(k,[])),0==s.length)return o;const g=new Set(s),E=new Map;function b(k){if(!k)return 1;let j=E.get(k);if(j)return j;const q=k.parentNode;return j=o.has(q)?q:g.has(q)?1:b(q),E.set(k,j),j}return s.forEach(k=>{const j=b(k);1!==j&&o.get(j).push(k)}),o}function zo(l,s){l.classList?.add(s)}function ui(l,s){l.classList?.remove(s)}function hs(l,s,o){oe(o).onDone(()=>l.processLeaveNode(s))}function Co(l,s){for(let o=0;o<l.length;o++){const c=l[o];c instanceof Y.ZE?Co(c.players,s):s.push(c)}}function Qi(l,s,o){const c=o.get(l);if(!c)return!1;let g=s.get(l);return g?c.forEach(E=>g.add(E)):s.set(l,c),o.delete(l),!0}class Ai{constructor(s,o,c){this.bodyNode=s,this._driver=o,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(g,E)=>{},this._transitionEngine=new Qn(s,o,c),this._timelineEngine=new Yi(s,o,c),this._transitionEngine.onRemovalComplete=(g,E)=>this.onRemovalComplete(g,E)}registerTrigger(s,o,c,g,E){const b=s+"-"+g;let k=this._triggerCache[b];if(!k){const j=[],_e=cs(this._driver,E,j,[]);if(j.length)throw function Ct(l,s){return new X.vHH(3404,!1)}();k=function bi(l,s,o){return new fi(l,s,o)}(g,_e,this._normalizer),this._triggerCache[b]=k}this._transitionEngine.registerTrigger(o,g,k)}register(s,o){this._transitionEngine.register(s,o)}destroy(s,o){this._transitionEngine.destroy(s,o)}onInsert(s,o,c,g){this._transitionEngine.insertNode(s,o,c,g)}onRemove(s,o,c){this._transitionEngine.removeNode(s,o,c)}disableAnimations(s,o){this._transitionEngine.markElementAsDisabled(s,o)}process(s,o,c,g){if("@"==c.charAt(0)){const[E,b]=cn(c);this._timelineEngine.command(E,o,b,g)}else this._transitionEngine.trigger(s,o,c,g)}listen(s,o,c,g,E){if("@"==c.charAt(0)){const[b,k]=cn(c);return this._timelineEngine.listen(b,o,k,E)}return this._transitionEngine.listen(s,o,c,g,E)}flush(s=-1){this._transitionEngine.flush(s)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(s){this._transitionEngine.afterFlushAnimationsDone(s)}}let Ki=(()=>{class l{static#e=this.initialStylesByElement=new WeakMap;constructor(o,c,g){this._element=o,this._startStyles=c,this._endStyles=g,this._state=0;let E=l.initialStylesByElement.get(o);E||l.initialStylesByElement.set(o,E=new Map),this._initialStyles=E}start(){this._state<1&&(this._startStyles&&An(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(An(this._element,this._initialStyles),this._endStyles&&(An(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(ti(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ti(this._element,this._endStyles),this._endStyles=null),An(this._element,this._initialStyles),this._state=3)}}return l})();function cu(l){let s=null;return l.forEach((o,c)=>{(function Go(l){return"display"===l||"position"===l})(c)&&(s=s||new Map,s.set(c,o))}),s}class zl{constructor(s,o,c,g){this.element=s,this.keyframes=o,this.options=c,this._specialStyles=g,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(s=>s()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const s=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,s,this.options),this._finalKeyframe=s.length?s[s.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(s){const o=[];return s.forEach(c=>{o.push(Object.fromEntries(c))}),o}_triggerWebAnimation(s,o,c){return s.animate(this._convertKeyframesToObject(o),c)}onStart(s){this._originalOnStartFns.push(s),this._onStartFns.push(s)}onDone(s){this._originalOnDoneFns.push(s),this._onDoneFns.push(s)}onDestroy(s){this._onDestroyFns.push(s)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(s=>s()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(s=>s()),this._onDestroyFns=[])}setPosition(s){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=s*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const s=new Map;this.hasStarted()&&this._finalKeyframe.forEach((c,g)=>{"offset"!==g&&s.set(g,this._finished?c:bn(this.element,g))}),this.currentSnapshot=s}triggerCallback(s){const o="start"===s?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}class ol{validateStyleProperty(s){return!0}validateAnimatableStyleProperty(s){return!0}matchesElement(s,o){return!1}containsElement(s,o){return rs(s,o)}getParentElement(s){return Kt(s)}query(s,o,c){return Ti(s,o,c)}computeStyle(s,o,c){return window.getComputedStyle(s)[o]}animate(s,o,c,g,E,b=[]){const j={duration:c,delay:g,fill:0==g?"both":"forwards"};E&&(j.easing=E);const q=new Map,_e=b.filter(ct=>ct instanceof zl);(function Tn(l,s){return 0===l||0===s})(c,g)&&_e.forEach(ct=>{ct.currentSnapshot.forEach((ht,Wt)=>q.set(Wt,ht))});let De=function ei(l){return l.length?l[0]instanceof Map?l:l.map(s=>fr(s)):[]}(o).map(ct=>Nr(ct));De=function Jt(l,s,o){if(o.size&&s.length){let c=s[0],g=[];if(o.forEach((E,b)=>{c.has(b)||g.push(b),c.set(b,E)}),g.length)for(let E=1;E<s.length;E++){let b=s[E];g.forEach(k=>b.set(k,bn(l,k)))}}return s}(s,De,q);const Ge=function Ya(l,s){let o=null,c=null;return Array.isArray(s)&&s.length?(o=cu(s[0]),s.length>1&&(c=cu(s[s.length-1]))):s instanceof Map&&(o=cu(s)),o||c?new Ki(l,o,c):null}(s,De);return new zl(s,De,j,Ge)}}var al=B(6814);let ba=(()=>{class l extends Y._j{constructor(o,c){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(c.body,{id:"0",encapsulation:X.ifc.None,styles:[],data:{animation:[]}})}build(o){const c=this._nextAnimationId.toString();this._nextAnimationId++;const g=Array.isArray(o)?(0,Y.vP)(o):o;return xu(this._renderer,null,c,"register",[g]),new du(c,this._renderer)}static#e=this.\u0275fac=function(c){return new(c||l)(X.LFG(X.FYo),X.LFG(al.K0))};static#t=this.\u0275prov=X.Yz7({token:l,factory:l.\u0275fac})}return l})();class du extends Y.LC{constructor(s,o){super(),this._id=s,this._renderer=o}create(s,o){return new Gl(this._id,s,o||{},this._renderer)}}class Gl{constructor(s,o,c,g){this.id=s,this.element=o,this._renderer=g,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(s,o){return this._renderer.listen(this.element,`@@${this.id}:${s}`,o)}_command(s,...o){return xu(this._renderer,this.element,this.id,s,o)}onDone(s){this._listen("done",s)}onStart(s){this._listen("start",s)}onDestroy(s){this._listen("destroy",s)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(s){this._command("setPosition",s)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function xu(l,s,o,c,g){return l.setProperty(s,`@@${o}:${c}`,g)}const sa="@.disabled";let ul=(()=>{class l{constructor(o,c,g){this.delegate=o,this.engine=c,this._zone=g,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,c.onRemovalComplete=(E,b)=>{const k=b?.parentNode(E);k&&b.removeChild(k,E)}}createRenderer(o,c){const E=this.delegate.createRenderer(o,c);if(!(o&&c&&c.data&&c.data.animation)){let _e=this._rendererCache.get(E);return _e||(_e=new hu("",E,this.engine,()=>this._rendererCache.delete(E)),this._rendererCache.set(E,_e)),_e}const b=c.id,k=c.id+"-"+this._currentId;this._currentId++,this.engine.register(k,o);const j=_e=>{Array.isArray(_e)?_e.forEach(j):this.engine.registerTrigger(b,k,o,_e.name,_e)};return c.data.animation.forEach(j),new Js(this,k,E,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(o,c,g){o>=0&&o<this._microtaskId?this._zone.run(()=>c(g)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(E=>{const[b,k]=E;b(k)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,g]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(c){return new(c||l)(X.LFG(X.FYo),X.LFG(Ai),X.LFG(X.R0b))};static#t=this.\u0275prov=X.Yz7({token:l,factory:l.\u0275fac})}return l})();class hu{constructor(s,o,c,g){this.namespaceId=s,this.delegate=o,this.engine=c,this._onDestroy=g}get data(){return this.delegate.data}destroyNode(s){this.delegate.destroyNode?.(s)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(s,o){return this.delegate.createElement(s,o)}createComment(s){return this.delegate.createComment(s)}createText(s){return this.delegate.createText(s)}appendChild(s,o){this.delegate.appendChild(s,o),this.engine.onInsert(this.namespaceId,o,s,!1)}insertBefore(s,o,c,g=!0){this.delegate.insertBefore(s,o,c),this.engine.onInsert(this.namespaceId,o,s,g)}removeChild(s,o,c){this.engine.onRemove(this.namespaceId,o,this.delegate)}selectRootElement(s,o){return this.delegate.selectRootElement(s,o)}parentNode(s){return this.delegate.parentNode(s)}nextSibling(s){return this.delegate.nextSibling(s)}setAttribute(s,o,c,g){this.delegate.setAttribute(s,o,c,g)}removeAttribute(s,o,c){this.delegate.removeAttribute(s,o,c)}addClass(s,o){this.delegate.addClass(s,o)}removeClass(s,o){this.delegate.removeClass(s,o)}setStyle(s,o,c,g){this.delegate.setStyle(s,o,c,g)}removeStyle(s,o,c){this.delegate.removeStyle(s,o,c)}setProperty(s,o,c){"@"==o.charAt(0)&&o==sa?this.disableAnimations(s,!!c):this.delegate.setProperty(s,o,c)}setValue(s,o){this.delegate.setValue(s,o)}listen(s,o,c){return this.delegate.listen(s,o,c)}disableAnimations(s,o){this.engine.disableAnimations(s,o)}}class Js extends hu{constructor(s,o,c,g,E){super(o,c,g,E),this.factory=s,this.namespaceId=o}setProperty(s,o,c){"@"==o.charAt(0)?"."==o.charAt(1)&&o==sa?this.disableAnimations(s,c=void 0===c||!!c):this.engine.process(this.namespaceId,s,o.slice(1),c):this.delegate.setProperty(s,o,c)}listen(s,o,c){if("@"==o.charAt(0)){const g=function eo(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(s);let E=o.slice(1),b="";return"@"!=E.charAt(0)&&([E,b]=function oa(l){const s=l.indexOf(".");return[l.substring(0,s),l.slice(s+1)]}(E)),this.engine.listen(this.namespaceId,g,E,b,k=>{this.factory.scheduleListenerCallback(k._data||-1,c,k)})}return this.delegate.listen(s,o,c)}}const Wl=[{provide:Y._j,useClass:ba},{provide:Bi,useFactory:function Sa(){return new Re}},{provide:Ai,useClass:(()=>{class l extends Ai{constructor(o,c,g,E){super(o.body,c,g)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(c){return new(c||l)(X.LFG(al.K0),X.LFG(gn),X.LFG(Bi),X.LFG(X.z2F))};static#t=this.\u0275prov=X.Yz7({token:l,factory:l.\u0275fac})}return l})()},{provide:X.FYo,useFactory:function Qr(l,s,o){return new ul(l,s,o)},deps:[I.se,Ai,X.R0b]}],Hn=[{provide:gn,useFactory:()=>new ol},{provide:X.QbO,useValue:"BrowserAnimations"},...Wl],Ou=[{provide:gn,useClass:xn},{provide:X.QbO,useValue:"NoopAnimations"},...Wl];let bc=(()=>{class l{static withConfig(o){return{ngModule:l,providers:o.disableAnimations?Ou:Hn}}static#e=this.\u0275fac=function(c){return new(c||l)};static#t=this.\u0275mod=X.oAB({type:l});static#n=this.\u0275inj=X.cJS({providers:Hn,imports:[I.b2]})}return l})();var aa=B(8113);let ua=(()=>{class l{title="angularfiebase-authentication";static \u0275fac=function(c){return new(c||l)};static \u0275cmp=X.Xpm({type:l,selectors:[["app-root"]],decls:1,vars:0,template:function(c,g){1&c&&X._UZ(0,"router-outlet")},dependencies:[aa.lC]})}return l})();var to=B(6304),ws=B(7046),Oi=B(5592),qo=B(2096),vi=B(2459),no=B(6321),fu=B(9360),Ps=B(8251),ji=B(7398),Aa=B(4664),Ri=B(1966),Ra=B(3106),Do=B(5861),bo=B(6122),ue=B(9058),Zo=B(4537);const cl="firebasestorage.googleapis.com",Lu="storageBucket";class ni extends ue.ZR{constructor(s,o,c=0){super(xs(s),`Firebase Storage: ${o} (${xs(s)})`),this.status_=c,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ni.prototype)}get status(){return this.status_}set status(s){this.status_=s}_codeEquals(s){return xs(s)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(s){this.customData.serverResponse=s,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Kr=function(l){return l.UNKNOWN="unknown",l.OBJECT_NOT_FOUND="object-not-found",l.BUCKET_NOT_FOUND="bucket-not-found",l.PROJECT_NOT_FOUND="project-not-found",l.QUOTA_EXCEEDED="quota-exceeded",l.UNAUTHENTICATED="unauthenticated",l.UNAUTHORIZED="unauthorized",l.UNAUTHORIZED_APP="unauthorized-app",l.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",l.INVALID_CHECKSUM="invalid-checksum",l.CANCELED="canceled",l.INVALID_EVENT_NAME="invalid-event-name",l.INVALID_URL="invalid-url",l.INVALID_DEFAULT_BUCKET="invalid-default-bucket",l.NO_DEFAULT_BUCKET="no-default-bucket",l.CANNOT_SLICE_BLOB="cannot-slice-blob",l.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",l.NO_DOWNLOAD_URL="no-download-url",l.INVALID_ARGUMENT="invalid-argument",l.INVALID_ARGUMENT_COUNT="invalid-argument-count",l.APP_DELETED="app-deleted",l.INVALID_ROOT_OPERATION="invalid-root-operation",l.INVALID_FORMAT="invalid-format",l.INTERNAL_ERROR="internal-error",l.UNSUPPORTED_ENVIRONMENT="unsupported-environment",l}(Kr||{});function xs(l){return"storage/"+l}function la(){return new ni(Kr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function yu(){return new ni(Kr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function po(){return new ni(Kr.CANCELED,"User canceled the upload/download.")}function So(){return new ni(Kr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function G(l){return new ni(Kr.INVALID_ARGUMENT,l)}function ge(){return new ni(Kr.APP_DELETED,"The Firebase app was deleted.")}function et(l){return new ni(Kr.INVALID_ROOT_OPERATION,"The operation '"+l+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lt(l,s){return new ni(Kr.INVALID_FORMAT,"String does not match format '"+l+"': "+s)}function rn(l){throw new ni(Kr.INTERNAL_ERROR,"Internal error: "+l)}class zn{constructor(s,o){this.bucket=s,this.path_=o}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const s=encodeURIComponent;return"/b/"+s(this.bucket)+"/o/"+s(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(s,o){let c;try{c=zn.makeFromUrl(s,o)}catch{return new zn(s,"")}if(""===c.path)return c;throw function ql(l){return new ni(Kr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+l+"'.")}(s)}static makeFromUrl(s,o){let c=null;const g="([A-Za-z0-9.\\-_]+)",k=new RegExp("^gs://"+g+"(/(.*))?$","i");function q(Wr){Wr.path_=decodeURIComponent(Wr.path)}const De=o.replace(/[.]/g,"\\."),kr=[{regex:k,indices:{bucket:1,path:3},postModify:function E(Wr){"/"===Wr.path.charAt(Wr.path.length-1)&&(Wr.path_=Wr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${De}/v[A-Za-z0-9_]+/b/${g}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:q},{regex:new RegExp(`^https?://${o===cl?"(?:storage.googleapis.com|storage.cloud.google.com)":o}/${g}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:q}];for(let Wr=0;Wr<kr.length;Wr++){const lu=kr[Wr],ta=lu.regex.exec(s);if(ta){let na=ta[lu.indices.path];na||(na=""),c=new zn(ta[lu.indices.bucket],na),lu.postModify(c);break}}if(null==c)throw function go(l){return new ni(Kr.INVALID_URL,"Invalid URL '"+l+"'.")}(s);return c}}class Zn{constructor(s){this.promise_=Promise.reject(s)}getPromise(){return this.promise_}cancel(s=!1){}}function Ei(l){return"string"==typeof l||l instanceof String}function yn(l){return ls()&&l instanceof Blob}function ls(){return typeof Blob<"u"&&!(0,ue.UG)()}function ro(l,s,o,c){if(c<s)throw G(`Invalid value for '${l}'. Expected ${s} or greater.`);if(c>o)throw G(`Invalid value for '${l}'. Expected ${o} or less.`)}function Ts(l,s,o){let c=s;return null==o&&(c=`https://${s}`),`${o}://${c}/v0${l}`}function Cs(l){const s=encodeURIComponent;let o="?";for(const c in l)l.hasOwnProperty(c)&&(o=o+(s(c)+"=")+s(l[c])+"&");return o=o.slice(0,-1),o}var zr=function(l){return l[l.NO_ERROR=0]="NO_ERROR",l[l.NETWORK_ERROR=1]="NETWORK_ERROR",l[l.ABORT=2]="ABORT",l}(zr||{});function Ac(l,s){const o=l>=500&&l<600,g=-1!==[408,429].indexOf(l),E=-1!==s.indexOf(l);return o||g||E}class ki{constructor(s,o,c,g,E,b,k,j,q,_e,De,Ge=!0){this.url_=s,this.method_=o,this.headers_=c,this.body_=g,this.successCodes_=E,this.additionalRetryCodes_=b,this.callback_=k,this.errorCallback_=j,this.timeout_=q,this.progressCallback_=_e,this.connectionFactory_=De,this.retry=Ge,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ct,ht)=>{this.resolve_=ct,this.reject_=ht,this.start_()})}start_(){const o=(c,g)=>{const E=this.resolve_,b=this.reject_,k=g.connection;if(g.wasSuccessCode)try{const j=this.callback_(k,k.getResponse());!function Xr(l){return void 0!==l}(j)?E():E(j)}catch(j){b(j)}else if(null!==k){const j=la();j.serverResponse=k.getErrorText(),b(this.errorCallback_?this.errorCallback_(k,j):j)}else b(g.canceled?this.appDelete_?ge():po():yu())};this.canceled_?o(0,new Fu(!1,null,!0)):this.backoffId_=function Kn(l,s,o){let c=1,g=null,E=null,b=!1,k=0;function j(){return 2===k}let q=!1;function _e(...In){q||(q=!0,s.apply(null,In))}function De(In){g=setTimeout(()=>{g=null,l(ct,j())},In)}function Ge(){E&&clearTimeout(E)}function ct(In,...Nn){if(q)return void Ge();if(In)return Ge(),void _e.call(null,In,...Nn);if(j()||b)return Ge(),void _e.call(null,In,...Nn);let kr;c<64&&(c*=2),1===k?(k=2,kr=0):kr=1e3*(c+Math.random()),De(kr)}let ht=!1;function Wt(In){ht||(ht=!0,Ge(),!q&&(null!==g?(In||(k=2),clearTimeout(g),De(0)):In||(k=1)))}return De(0),E=setTimeout(()=>{b=!0,Wt(!0)},o),Wt}((c,g)=>{if(g)return void c(!1,new Fu(!1,null,!0));const E=this.connectionFactory_();this.pendingConnection_=E;const b=k=>{null!==this.progressCallback_&&this.progressCallback_(k.loaded,k.lengthComputable?k.total:-1)};null!==this.progressCallback_&&E.addUploadProgressListener(b),E.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&E.removeUploadProgressListener(b),this.pendingConnection_=null;const k=E.getErrorCode()===zr.NO_ERROR,j=E.getStatus();if(!k||Ac(j,this.additionalRetryCodes_)&&this.retry){const _e=E.getErrorCode()===zr.ABORT;return void c(!1,new Fu(!1,null,_e))}const q=-1!==this.successCodes_.indexOf(j);c(!0,new Fu(q,E))})},o,this.timeout_)}getPromise(){return this.promise_}cancel(s){this.canceled_=!0,this.appDelete_=s||!1,null!==this.backoffId_&&function Sn(l){l(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Fu{constructor(s,o,c){this.wasSuccessCode=s,this.connection=o,this.canceled=!!c}}function _u(...l){const s=function Rn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==s){const o=new s;for(let c=0;c<l.length;c++)o.append(l[c]);return o.getBlob()}if(ls())return new Blob(l);throw new ni(Kr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class At{constructor(s,o){this.data=s,this.contentType=o||null}}function Pr(l,s){switch(l){case qi.RAW:return new At(ps(s));case qi.BASE64:case qi.BASE64URL:return new At(Ot(l,s));case qi.DATA_URL:return new At(function Rc(l){const s=new vn(l);return s.base64?Ot(qi.BASE64,s.rest):function Uu(l){let s;try{s=decodeURIComponent(l)}catch{throw lt(qi.DATA_URL,"Malformed data URL.")}return ps(s)}(s.rest)}(s),function Vt(l){return new vn(l).contentType}(s))}throw la()}function ps(l){const s=[];for(let o=0;o<l.length;o++){let c=l.charCodeAt(o);c<=127?s.push(c):c<=2047?s.push(192|c>>6,128|63&c):55296==(64512&c)?o<l.length-1&&56320==(64512&l.charCodeAt(o+1))?(c=65536|(1023&c)<<10|1023&l.charCodeAt(++o),s.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|63&c)):s.push(239,191,189):56320==(64512&c)?s.push(239,191,189):s.push(224|c>>12,128|c>>6&63,128|63&c)}return new Uint8Array(s)}function Ot(l,s){switch(l){case qi.BASE64:{const g=-1!==s.indexOf("-"),E=-1!==s.indexOf("_");if(g||E)throw lt(l,"Invalid character '"+(g?"-":"_")+"' found: is it base64url encoded?");break}case qi.BASE64URL:{const g=-1!==s.indexOf("+"),E=-1!==s.indexOf("/");if(g||E)throw lt(l,"Invalid character '"+(g?"+":"/")+"' found: is it base64 encoded?");s=s.replace(/-/g,"+").replace(/_/g,"/");break}}let o;try{o=function Ds(l){if(typeof atob>"u")throw function F(l){return new ni(Kr.UNSUPPORTED_ENVIRONMENT,`${l} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(l)}(s)}catch(g){throw g.message.includes("polyfill")?g:lt(l,"Invalid character found")}const c=new Uint8Array(o.length);for(let g=0;g<o.length;g++)c[g]=o.charCodeAt(g);return c}class vn{constructor(s){this.base64=!1,this.contentType=null;const o=s.match(/^data:([^,]+)?,/);if(null===o)throw lt(qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const c=o[1]||null;null!=c&&(this.base64=function it(l,s){return l.length>=s.length&&l.substring(l.length-s.length)===s}(c,";base64"),this.contentType=this.base64?c.substring(0,c.length-7):c),this.rest=s.substring(s.indexOf(",")+1)}}class Et{constructor(s,o){let c=0,g="";yn(s)?(this.data_=s,c=s.size,g=s.type):s instanceof ArrayBuffer?(o?this.data_=new Uint8Array(s):(this.data_=new Uint8Array(s.byteLength),this.data_.set(new Uint8Array(s))),c=this.data_.length):s instanceof Uint8Array&&(o?this.data_=s:(this.data_=new Uint8Array(s.length),this.data_.set(s)),c=s.length),this.size_=c,this.type_=g}size(){return this.size_}type(){return this.type_}slice(s,o){if(yn(this.data_)){const g=function mo(l,s,o){return l.webkitSlice?l.webkitSlice(s,o):l.mozSlice?l.mozSlice(s,o):l.slice?l.slice(s,o):null}(this.data_,s,o);return null===g?null:new Et(g)}{const c=new Uint8Array(this.data_.buffer,s,o-s);return new Et(c,!0)}}static getBlob(...s){if(ls()){const o=s.map(c=>c instanceof Et?c.data_:c);return new Et(_u.apply(null,o))}{const o=s.map(b=>Ei(b)?Pr(qi.RAW,b).data:b.data_);let c=0;o.forEach(b=>{c+=b.byteLength});const g=new Uint8Array(c);let E=0;return o.forEach(b=>{for(let k=0;k<b.length;k++)g[E++]=b[k]}),new Et(g,!0)}}uploadData(){return this.data_}}function ri(l){let s;try{s=JSON.parse(l)}catch{return null}return function mi(l){return"object"==typeof l&&!Array.isArray(l)}(s)?s:null}function Bu(l){const s=l.lastIndexOf("/",l.length-2);return-1===s?l:l.slice(s+1)}function ah(l,s){return s}class $i{constructor(s,o,c,g){this.server=s,this.local=o||s,this.writable=!!c,this.xform=g||ah}}let Pa=null;function vu(){if(Pa)return Pa;const l=[];l.push(new $i("bucket")),l.push(new $i("generation")),l.push(new $i("metageneration")),l.push(new $i("name","fullPath",!0));const o=new $i("name");o.xform=function s(E,b){return function fl(l){return!Ei(l)||l.length<2?l:Bu(l)}(b)},l.push(o);const g=new $i("size");return g.xform=function c(E,b){return void 0!==b?Number(b):b},l.push(g),l.push(new $i("timeCreated")),l.push(new $i("updated")),l.push(new $i("md5Hash",null,!0)),l.push(new $i("cacheControl",null,!0)),l.push(new $i("contentDisposition",null,!0)),l.push(new $i("contentEncoding",null,!0)),l.push(new $i("contentLanguage",null,!0)),l.push(new $i("contentType",null,!0)),l.push(new $i("metadata","customMetadata",!0)),Pa=l,Pa}function pl(l,s,o){const c=ri(s);return null===c?null:function Mc(l,s,o){const c={type:"file"},g=o.length;for(let E=0;E<g;E++){const b=o[E];c[b.local]=b.xform(c,s[b.server])}return function Zl(l,s){Object.defineProperty(l,"ref",{get:function o(){const E=new zn(l.bucket,l.fullPath);return s._makeStorageReference(E)}})}(c,l),c}(l,c,o)}function Ao(l,s){const o={},c=s.length;for(let g=0;g<c;g++){const E=s[g];E.writable&&(o[E.server]=l[E.local])}return JSON.stringify(o)}const Yl="prefixes",ii="items";class qn{constructor(s,o,c,g){this.url=s,this.method=o,this.handler=c,this.timeout=g,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yo(l){if(!l)throw la()}function or(l,s){return function o(c,g){const E=pl(l,g,s);return Yo(null!==E),E}}function ca(l){return function s(o,c){let g;return g=401===o.getStatus()?o.getErrorText().includes("Firebase App Check token is invalid")?function Ma(){return new ni(Kr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Kl(){return new ni(Kr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===o.getStatus()?function Qa(l){return new ni(Kr.QUOTA_EXCEEDED,"Quota for bucket '"+l+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(l.bucket):403===o.getStatus()?function Is(l){return new ni(Kr.UNAUTHORIZED,"User does not have permission to access '"+l+"'.")}(l.path):c,g.status=o.getStatus(),g.serverResponse=c.serverResponse,g}}function Ro(l){const s=ca(l);return function o(c,g){let E=s(c,g);return 404===c.getStatus()&&(E=function Sc(l){return new ni(Kr.OBJECT_NOT_FOUND,"Object '"+l+"' does not exist.")}(l.path)),E.serverResponse=g.serverResponse,E}}function uh(l,s,o){const g=Ts(s.fullServerUrl(),l.host,l._protocol),b=l.maxOperationRetryTime,k=new qn(g,"GET",or(l,o),b);return k.errorHandler=Ro(s),k}function Mo(l,s,o,c,g){const E={};E.prefix=s.isRoot?"":s.path+"/",o&&o.length>0&&(E.delimiter=o),c&&(E.pageToken=c),g&&(E.maxResults=g);const k=Ts(s.bucketOnlyServerUrl(),l.host,l._protocol),q=l.maxOperationRetryTime,_e=new qn(k,"GET",function qt(l,s){return function o(c,g){const E=function io(l,s,o){const c=ri(o);return null===c?null:function wn(l,s,o){const c={prefixes:[],items:[],nextPageToken:o.nextPageToken};if(o[Yl])for(const g of o[Yl]){const E=g.replace(/\/$/,""),b=l._makeStorageReference(new zn(s,E));c.prefixes.push(b)}if(o[ii])for(const g of o[ii]){const E=l._makeStorageReference(new zn(s,g.name));c.items.push(E)}return c}(l,s,c)}(l,s,g);return Yo(null!==E),E}}(l,s.bucket),q);return _e.urlParams=E,_e.errorHandler=ca(s),_e}function N(l,s,o){const c=Object.assign({},o);return c.fullPath=l.path,c.size=s.size(),c.contentType||(c.contentType=function C(l,s){return l&&l.contentType||s&&s.type()||"application/octet-stream"}(null,s)),c}class se{constructor(s,o,c,g){this.current=s,this.total=o,this.finalized=!!c,this.metadata=g||null}}function ie(l,s){let o=null;try{o=l.getResponseHeader("X-Goog-Upload-Status")}catch{Yo(!1)}return Yo(!!o&&-1!==(s||["active"]).indexOf(o)),o}const Cr={STATE_CHANGED:"state_changed"},Ur={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function da(l){switch(l){case"running":case"pausing":case"canceling":return Ur.RUNNING;case"paused":return Ur.PAUSED;case"success":return Ur.SUCCESS;case"canceled":return Ur.CANCELED;default:return Ur.ERROR}}class Qo{constructor(s,o,c){if(function qr(l){return"function"==typeof l}(s)||null!=o||null!=c)this.next=s,this.error=o??void 0,this.complete=c??void 0;else{const E=s;this.next=E.next,this.error=E.error,this.complete=E.complete}}}function bs(l){return(...s)=>{Promise.resolve().then(()=>l(...s))}}let ju=null;class ml{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zr.NO_ERROR,this.sendPromise_=new Promise(s=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zr.ABORT,s()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zr.NETWORK_ERROR,s()}),this.xhr_.addEventListener("load",()=>{s()})})}send(s,o,c,g){if(this.sent_)throw rn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(o,s,!0),void 0!==g)for(const E in g)g.hasOwnProperty(E)&&this.xhr_.setRequestHeader(E,g[E].toString());return void 0!==c?this.xhr_.send(c):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(s){return this.xhr_.getResponseHeader(s)}addUploadProgressListener(s){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",s)}removeUploadProgressListener(s){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",s)}}class np extends ml{initXhr(){this.xhr_.responseType="text"}}function No(){return ju?ju():new np}class As{constructor(s,o,c=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=s,this._blob=o,this._metadata=c,this._mappings=vu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=g=>{if(this._request=void 0,this._chunkMultiplier=1,g._codeEquals(Kr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const E=this.isExponentialBackoffExpired();if(Ac(g.status,[])){if(!E)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();g=yu()}this._error=g,this._transition("error")}},this._metadataErrorHandler=g=>{this._request=void 0,g._codeEquals(Kr.CANCELED)?this.completeTransitions_():(this._error=g,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((g,E)=>{this._resolve=g,this._reject=E,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const s=this._transferred;return o=>this._updateProgress(s+o)}_shouldDoResumable(s){return s.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(s){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([o,c])=>{switch(this._state){case"running":s(o,c);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((s,o)=>{const c=function He(l,s,o,c,g){const E=s.bucketOnlyServerUrl(),b=N(s,c,g),k={name:b.fullPath},j=Ts(E,l.host,l._protocol),_e={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${c.size()}`,"X-Goog-Upload-Header-Content-Type":b.contentType,"Content-Type":"application/json; charset=utf-8"},De=Ao(b,o),ht=new qn(j,"POST",function ct(Wt){let In;ie(Wt);try{In=Wt.getResponseHeader("X-Goog-Upload-URL")}catch{Yo(!1)}return Yo(Ei(In)),In},l.maxUploadRetryTime);return ht.urlParams=k,ht.headers=_e,ht.body=De,ht.errorHandler=ca(s),ht}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),g=this._ref.storage._makeRequest(c,No,s,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._uploadUrl=E,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const s=this._uploadUrl;this._resolveToken((o,c)=>{const g=function pe(l,s,o,c){const j=new qn(o,"POST",function E(q){const _e=ie(q,["active","final"]);let De=null;try{De=q.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yo(!1)}De||Yo(!1);const Ge=Number(De);return Yo(!isNaN(Ge)),new se(Ge,c.size(),"final"===_e)},l.maxUploadRetryTime);return j.headers={"X-Goog-Upload-Command":"query"},j.errorHandler=ca(s),j}(this._ref.storage,this._ref._location,s,this._blob),E=this._ref.storage._makeRequest(g,No,o,c);this._request=E,E.getPromise().then(b=>{this._request=void 0,this._updateProgress(b.current),this._needToFetchStatus=!1,b.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const s=262144*this._chunkMultiplier,o=new se(this._transferred,this._blob.size()),c=this._uploadUrl;this._resolveToken((g,E)=>{let b;try{b=function tn(l,s,o,c,g,E,b,k){const j=new se(0,0);if(b?(j.current=b.current,j.total=b.total):(j.current=0,j.total=c.size()),c.size()!==j.total)throw function R(){return new ni(Kr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const q=j.total-j.current;let _e=q;g>0&&(_e=Math.min(_e,g));const De=j.current;let ct="";ct=0===_e?"finalize":q===_e?"upload, finalize":"upload";const ht={"X-Goog-Upload-Command":ct,"X-Goog-Upload-Offset":`${j.current}`},Wt=c.slice(De,De+_e);if(null===Wt)throw So();const kr=new qn(o,"POST",function In(Wr,lu){const ta=ie(Wr,["active","final"]),ao=j.current+_e,na=c.size();let Eo;return Eo="final"===ta?or(s,E)(Wr,lu):null,new se(ao,na,"final"===ta,Eo)},s.maxUploadRetryTime);return kr.headers=ht,kr.body=Wt.uploadData(),kr.progressCallback=k||null,kr.errorHandler=ca(l),kr}(this._ref._location,this._ref.storage,c,this._blob,s,this._mappings,o,this._makeProgressCallback())}catch(j){return this._error=j,void this._transition("error")}const k=this._ref.storage._makeRequest(b,No,g,E,!1);this._request=k,k.getPromise().then(j=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(j.current),j.finalized?(this._metadata=j.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((s,o)=>{const c=uh(this._ref.storage,this._ref._location,this._mappings),g=this._ref.storage._makeRequest(c,No,s,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((s,o)=>{const c=function $(l,s,o,c,g){const E=s.bucketOnlyServerUrl(),b={"X-Goog-Upload-Protocol":"multipart"},j=function k(){let kr="";for(let Wr=0;Wr<2;Wr++)kr+=Math.random().toString().slice(2);return kr}();b["Content-Type"]="multipart/related; boundary="+j;const q=N(s,c,g),_e=Ao(q,o),ct=Et.getBlob("--"+j+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_e+"\r\n--"+j+"\r\nContent-Type: "+q.contentType+"\r\n\r\n",c,"\r\n--"+j+"--");if(null===ct)throw So();const ht={name:q.fullPath},Wt=Ts(E,l.host,l._protocol),Nn=l.maxUploadRetryTime,ur=new qn(Wt,"POST",or(l,o),Nn);return ur.urlParams=ht,ur.headers=b,ur.body=ct.uploadData(),ur.errorHandler=ca(s),ur}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),g=this._ref.storage._makeRequest(c,No,s,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(s){const o=this._transferred;this._transferred=s,this._transferred!==o&&this._notifyObservers()}_transition(s){if(this._state!==s)switch(s){case"canceling":case"pausing":this._state=s,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const o="paused"===this._state;this._state=s,o&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=s,this._notifyObservers();break;case"canceled":this._error=po(),this._state=s,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const s=da(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:s,metadata:this._metadata,task:this,ref:this._ref}}on(s,o,c,g){const E=new Qo(o||void 0,c||void 0,g||void 0);return this._addObserver(E),()=>{this._removeObserver(E)}}then(s,o){return this._promise.then(s,o)}catch(s){return this.then(null,s)}_addObserver(s){this._observers.push(s),this._notifyObserver(s)}_removeObserver(s){const o=this._observers.indexOf(s);-1!==o&&this._observers.splice(o,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(o=>{this._notifyObserver(o)})}_finishPromise(){if(void 0!==this._resolve){let s=!0;switch(da(this._state)){case Ur.SUCCESS:bs(this._resolve.bind(null,this.snapshot))();break;case Ur.CANCELED:case Ur.ERROR:bs(this._reject.bind(null,this._error))();break;default:s=!1}s&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(s){switch(da(this._state)){case Ur.RUNNING:case Ur.PAUSED:s.next&&bs(s.next.bind(s,this.snapshot))();break;case Ur.SUCCESS:s.complete&&bs(s.complete.bind(s))();break;default:s.error&&bs(s.error.bind(s,this._error))()}}resume(){const s="paused"===this._state||"pausing"===this._state;return s&&this._transition("running"),s}pause(){const s="running"===this._state;return s&&this._transition("pausing"),s}cancel(){const s="running"===this._state||"pausing"===this._state;return s&&this._transition("canceling"),s}}class ha{constructor(s,o){this._service=s,this._location=o instanceof zn?o:zn.makeFromUrl(o,s.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(s,o){return new ha(s,o)}get root(){const s=new zn(this._location.bucket,"");return this._newRef(this._service,s)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bu(this._location.path)}get storage(){return this._service}get parent(){const s=function js(l){if(0===l.length)return null;const s=l.lastIndexOf("/");return-1===s?"":l.slice(0,s)}(this._location.path);if(null===s)return null;const o=new zn(this._location.bucket,s);return new ha(this._service,o)}_throwIfRoot(s){if(""===this._location.path)throw et(s)}}function Xl(l,s,o){return yl.apply(this,arguments)}function yl(){return(yl=(0,Do.Z)(function*(l,s,o){const g=yield xc(l,{pageToken:o});s.prefixes.push(...g.prefixes),s.items.push(...g.items),null!=g.nextPageToken&&(yield Xl(l,s,g.nextPageToken))})).apply(this,arguments)}function xc(l,s){null!=s&&"number"==typeof s.maxResults&&ro("options.maxResults",1,1e3,s.maxResults);const o=s||{},c=Mo(l.storage,l._location,"/",o.pageToken,o.maxResults);return l.storage.makeRequestWithTokens(c,No)}function ch(l){l._throwIfRoot("getDownloadURL");const s=function Vu(l,s,o){const g=Ts(s.fullServerUrl(),l.host,l._protocol),b=l.maxOperationRetryTime,k=new qn(g,"GET",function si(l,s){return function o(c,g){const E=pl(l,g,s);return Yo(null!==E),function On(l,s,o,c){const g=ri(s);if(null===g||!Ei(g.downloadTokens))return null;const E=g.downloadTokens;if(0===E.length)return null;const b=encodeURIComponent;return E.split(",").map(q=>{const De=l.fullPath;return Ts("/b/"+b(l.bucket)+"/o/"+b(De),o,c)+Cs({alt:"media",token:q})})[0]}(E,g,l.host,l._protocol)}}(l,o),b);return k.errorHandler=Ro(s),k}(l.storage,l._location,vu());return l.storage.makeRequestWithTokens(s,No).then(o=>{if(null===o)throw function K(){return new ni(Kr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return o})}function _l(l,s){const o=function oh(l,s){const o=s.split("/").filter(c=>c.length>0).join("/");return 0===l.length?o:l+"/"+o}(l._location.path,s),c=new zn(l._location.bucket,o);return new ha(l.storage,c)}function rp(l,s){if(l instanceof Lc){const o=l;if(null==o._bucket)throw function rr(){return new ni(Kr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Lu+"' property when initializing the app?")}();const c=new ha(o,o._bucket);return null!=s?rp(c,s):c}return void 0!==s?_l(l,s):l}function kc(l,s){if(s&&function Jl(l){return/^[A-Za-z]+:\/\//.test(l)}(s)){if(l instanceof Lc)return function ec(l,s){return new ha(l,s)}(l,s);throw G("To use ref(service, url), the first argument must be a Storage instance.")}return rp(l,s)}function $u(l,s){const o=s?.[Lu];return null==o?null:zn.makeFromBucketSpec(o,l)}class Lc{constructor(s,o,c,g,E){this.app=s,this._authProvider=o,this._appCheckProvider=c,this._url=g,this._firebaseVersion=E,this._bucket=null,this._host=cl,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=g?zn.makeFromBucketSpec(g,this._host):$u(this._host,this.app.options)}get host(){return this._host}set host(s){this._host=s,this._bucket=null!=this._url?zn.makeFromBucketSpec(this._url,s):$u(s,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(s){ro("time",0,Number.POSITIVE_INFINITY,s),this._maxUploadRetryTime=s}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(s){ro("time",0,Number.POSITIVE_INFINITY,s),this._maxOperationRetryTime=s}_getAuthToken(){var s=this;return(0,Do.Z)(function*(){if(s._overrideAuthToken)return s._overrideAuthToken;const o=s._authProvider.getImmediate({optional:!0});if(o){const c=yield o.getToken();if(null!==c)return c.accessToken}return null})()}_getAppCheckToken(){var s=this;return(0,Do.Z)(function*(){const o=s._appCheckProvider.getImmediate({optional:!0});return o?(yield o.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(s=>s.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(s){return new ha(this,s)}_makeRequest(s,o,c,g,E=!0){if(this._deleted)return new Zn(ge());{const b=function St(l,s,o,c,g,E,b=!0){const k=Cs(l.urlParams),j=l.url+k,q=Object.assign({},l.headers);return function _d(l,s){s&&(l["X-Firebase-GMPID"]=s)}(q,s),function hl(l,s){null!==s&&s.length>0&&(l.Authorization="Firebase "+s)}(q,o),function Os(l,s){l["X-Firebase-Storage-Version"]="webjs/"+(s??"AppManager")}(q,E),function Na(l,s){null!==s&&(l["X-Firebase-AppCheck"]=s)}(q,c),new ki(j,l.method,q,l.body,l.successCodes,l.additionalRetryCodes,l.handler,l.errorHandler,l.timeout,l.progressCallback,g,b)}(s,this._appId,c,g,o,this._firebaseVersion,E);return this._requests.add(b),b.getPromise().then(()=>this._requests.delete(b),()=>this._requests.delete(b)),b}}makeRequestWithTokens(s,o){var c=this;return(0,Do.Z)(function*(){const[g,E]=yield Promise.all([c._getAuthToken(),c._getAppCheckToken()]);return c._makeRequest(s,o,g,E).getPromise()})()}}const Hu="@firebase/storage";function P(l,s){return kc(l=(0,ue.m9)(l),s)}function It(l,{instanceIdentifier:s}){const o=l.getProvider("app").getImmediate(),c=l.getProvider("auth-internal"),g=l.getProvider("app-check-internal");return new Lc(o,c,g,s,bo.SDK_VERSION)}!function en(){(0,bo._registerComponent)(new Zo.wA("storage",It,"PUBLIC").setMultipleInstances(!0)),(0,bo.registerVersion)(Hu,"0.11.2",""),(0,bo.registerVersion)(Hu,"0.11.2","esm2017")}();class Ft{constructor(s,o,c){this._delegate=s,this.task=o,this.ref=c}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sn{constructor(s,o){this._delegate=s,this._ref=o,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ft(this._delegate.snapshot,this,this._ref)}then(s,o){return this._delegate.then(c=>{if(s)return s(new Ft(c,this,this._ref))},o)}on(s,o,c,g){let E;return o&&(E="function"==typeof o?b=>o(new Ft(b,this,this._ref)):{next:o.next?b=>o.next(new Ft(b,this,this._ref)):void 0,complete:o.complete||void 0,error:o.error||void 0}),this._delegate.on(s,E,c||void 0,g||void 0)}}class Yn{constructor(s,o){this._delegate=s,this._service=o}get prefixes(){return this._delegate.prefixes.map(s=>new Cn(s,this._service))}get items(){return this._delegate.items.map(s=>new Cn(s,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Cn{constructor(s,o){this._delegate=s,this.storage=o}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(s){const o=function L(l,s){return _l(l,s)}(this._delegate,s);return new Cn(o,this.storage)}get root(){return new Cn(this._delegate.root,this.storage)}get parent(){const s=this._delegate.parent;return null==s?null:new Cn(s,this.storage)}put(s,o){return this._throwIfRoot("put"),new sn(function wu(l,s,o){return function Pc(l,s,o){return l._throwIfRoot("uploadBytesResumable"),new As(l,new Et(s),o)}(l=(0,ue.m9)(l),s,o)}(this._delegate,s,o),this)}putString(s,o=qi.RAW,c){this._throwIfRoot("putString");const g=Pr(o,s),E=Object.assign({},c);return null==E.contentType&&null!=g.contentType&&(E.contentType=g.contentType),new sn(new As(this._delegate,new Et(g.data,!0),E),this)}listAll(){return function ga(l){return function lh(l){const s={prefixes:[],items:[]};return Xl(l,s).then(()=>s)}(l=(0,ue.m9)(l))}(this._delegate).then(s=>new Yn(s,this.storage))}list(s){return function Br(l,s){return xc(l=(0,ue.m9)(l),s)}(this._delegate,s||void 0).then(o=>new Yn(o,this.storage))}getMetadata(){return function pa(l){return function Oc(l){l._throwIfRoot("getMetadata");const s=uh(l.storage,l._location,vu());return l.storage.makeRequestWithTokens(s,No)}(l=(0,ue.m9)(l))}(this._delegate)}updateMetadata(s){return function tc(l,s){return function Eu(l,s){l._throwIfRoot("updateMetadata");const o=function S(l,s,o,c){const E=Ts(s.fullServerUrl(),l.host,l._protocol),k=Ao(o,c),q=l.maxOperationRetryTime,_e=new qn(E,"PATCH",or(l,c),q);return _e.headers={"Content-Type":"application/json; charset=utf-8"},_e.body=k,_e.errorHandler=Ro(s),_e}(l.storage,l._location,s,vu());return l.storage.makeRequestWithTokens(o,No)}(l=(0,ue.m9)(l),s)}(this._delegate,s)}getDownloadURL(){return function gs(l){return ch(l=(0,ue.m9)(l))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function wi(l){return function Ed(l){l._throwIfRoot("deleteObject");const s=function x(l,s){const c=Ts(s.fullServerUrl(),l.host,l._protocol),k=new qn(c,"DELETE",function b(j,q){},l.maxOperationRetryTime);return k.successCodes=[200,204],k.errorHandler=Ro(s),k}(l.storage,l._location);return l.storage.makeRequestWithTokens(s,No)}(l=(0,ue.m9)(l))}(this._delegate)}_throwIfRoot(s){if(""===this._delegate._location.path)throw et(s)}}class xr{constructor(s,o){this.app=s,this._delegate=o}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(s){if(ks(s))throw G("ref() expected a child path but got a URL, use refFromURL instead.");return new Cn(P(this._delegate,s),this)}refFromURL(s){if(!ks(s))throw G("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zn.makeFromUrl(s,this._delegate.host)}catch{throw G("refFromUrl() expected a valid full URL but got an invalid one.")}return new Cn(P(this._delegate,s),this)}setMaxUploadRetryTime(s){this._delegate.maxUploadRetryTime=s}setMaxOperationRetryTime(s){this._delegate.maxOperationRetryTime=s}useEmulator(s,o,c={}){!function ce(l,s,o,c={}){!function Xh(l,s,o,c={}){l.host=`${s}:${o}`,l._protocol="http";const{mockUserToken:g}=c;g&&(l._overrideAuthToken="string"==typeof g?g:(0,ue.Sg)(g,l.app.options.projectId))}(l,s,o,c)}(this._delegate,s,o,c)}}function ks(l){return/^[A-Za-z]+:\/\//.test(l)}function Ji(l,{instanceIdentifier:s}){const o=l.getProvider("app-compat").getImmediate(),c=l.getProvider("storage").getImmediate({identifier:s});return new xr(o,c)}!function Ls(l){const s={TaskState:Ur,TaskEvent:Cr,StringFormat:qi,Storage:xr,Reference:Cn};l.INTERNAL.registerComponent(new Zo.wA("storage-compat",Ji,"PUBLIC").setServiceProps(s).setMultipleInstances(!0)),l.registerVersion("@firebase/storage-compat","0.3.2")}(Ra.Z);var Ja=B(8697),Fa=B(7142);function wd(l){const s=function Mg(l){return new Oi.y(s=>{const o=b=>s.next(b);o(l.snapshot);const E=l.on("state_changed",o);return l.then(b=>{o(b),s.complete()},b=>{o(l.snapshot),(b=>{s.error(b)})(b)}),function(){E()}}).pipe(function pu(l,s=no.z){return(0,fu.e)((o,c)=>{let g=null,E=null,b=null;const k=()=>{if(g){g.unsubscribe(),g=null;const q=E;E=null,c.next(q)}};function j(){const q=b+l,_e=s.now();if(_e<q)return g=this.schedule(void 0,q-_e),void c.add(g);k()}o.subscribe((0,Ps.x)(c,q=>{E=q,b=s.now(),g||(g=s.schedule(j,l),c.add(g))},()=>{k(),c.complete()},void 0,()=>{E=g=null}))})}(0))}(l);return{task:l,then:l.then.bind(l),catch:l.catch.bind(l),pause:l.pause.bind(l),cancel:l.cancel.bind(l),resume:l.resume.bind(l),snapshotChanges:()=>s,percentageChanges:()=>s.pipe((0,ji.U)(o=>o.bytesTransferred/o.totalBytes*100))}}function Id(l){return{getDownloadURL:()=>(0,qo.of)(void 0).pipe(Ri.fc,(0,Aa.w)(()=>l.getDownloadURL()),Ri.iC),getMetadata:()=>(0,qo.of)(void 0).pipe(Ri.fc,(0,Aa.w)(()=>l.getMetadata()),Ri.iC),delete:()=>(0,vi.D)(l.delete()),child:s=>Id(l.child(s)),updateMetadata:s=>(0,vi.D)(l.updateMetadata(s)),put:(s,o)=>wd(l.put(s,o)),putString:(s,o,c)=>wd(l.putString(s,o,c)),list:s=>(0,vi.D)(l.list(s)),listAll:()=>(0,vi.D)(l.listAll())}}const sp=new X.OlP("angularfire2.storageBucket"),Rs=new X.OlP("angularfire2.storage.maxUploadRetryTime"),hh=new X.OlP("angularfire2.storage.maxOperationRetryTime"),zu=new X.OlP("angularfire2.storage.use-emulator");let jm=(()=>{class l{constructor(o,c,g,E,b,k,j,q,_e,De){const Ge=(0,to.on)(o,b,c);this.storage=(0,to.cc)(`${Ge.name}.storage.${g}`,"AngularFireStorage",Ge.name,()=>{const ct=b.runOutsideAngular(()=>Ge.storage(g||void 0)),ht=_e;return ht&&ct.useEmulator(...ht),j&&ct.setMaxUploadRetryTime(j),q&&ct.setMaxOperationRetryTime(q),ct},[j,q])}ref(o){return Id(this.storage.ref(o))}refFromURL(o){return Id(this.storage.refFromURL(o))}upload(o,c,g){return Id(this.storage.ref(o)).put(c,g)}}return l.\u0275fac=function(o){return new(o||l)(X.LFG(to.Dh),X.LFG(to.xv,8),X.LFG(sp,8),X.LFG(X.Lbi),X.LFG(X.R0b),X.LFG(Ri.HU),X.LFG(Rs,8),X.LFG(hh,8),X.LFG(zu,8),X.LFG(Ja.nm,8))},l.\u0275prov=X.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),Jh=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=X.oAB({type:l}),l.\u0275inj=X.cJS({}),l})(),Td=(()=>{class l{constructor(){Fa.Z.registerVersion("angularfire",Ri.q4.full,"gcs-compat")}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=X.oAB({type:l}),l.\u0275inj=X.cJS({providers:[jm],imports:[Jh]}),l})();var Pg=B(8330),xg=B(3019),$m=B(3020),op=B(6699),ef=B(3997),ms=B(4829),tf=B(2737),Mi=B(2420),Gu=B(4564);B(5967);var Fc=B(7879);const Dd="@firebase/database";let Jr="";function nc(l){Jr=l}class Iu{constructor(s){this.domStorage_=s,this.prefix_="firebase:"}set(s,o){null==o?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),(0,ue.Wl)(o))}get(s){const o=this.domStorage_.getItem(this.prefixedName_(s));return null==o?null:(0,ue.cI)(o)}remove(s){this.domStorage_.removeItem(this.prefixedName_(s))}prefixedName_(s){return this.prefix_+s}toString(){return this.domStorage_.toString()}}class rc{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(s,o){null==o?delete this.cache_[s]:this.cache_[s]=o}get(s){return(0,ue.r3)(this.cache_,s)?this.cache_[s]:null}remove(s){delete this.cache_[s]}}const nf=function(l){try{if(typeof window<"u"&&typeof window[l]<"u"){const s=window[l];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new Iu(s)}}catch{}return new rc},ic=nf("localStorage"),ph=nf("sessionStorage"),Uc=new Fc.Yd("@firebase/database"),Og=function(){let l=1;return function(){return l++}}(),kg=function(l){const s=(0,ue.dS)(l),o=new ue.gQ;o.update(s);const c=o.digest();return ue.US.encodeByteArray(c)},bd=function(...l){let s="";for(let o=0;o<l.length;o++){const c=l[o];Array.isArray(c)||c&&"object"==typeof c&&"number"==typeof c.length?s+=bd.apply(null,c):s+="object"==typeof c?(0,ue.Wl)(c):c,s+=" "}return s};let Bc=null,gh=!0;const vl=function(l,s){(0,ue.hu)(!s||!0===l||!1===l,"Can't turn on custom loggers persistently."),!0===l?(Uc.logLevel=Fc.in.VERBOSE,Bc=Uc.log.bind(Uc),s&&ph.set("logging_enabled",!0)):"function"==typeof l?Bc=l:(Bc=null,ph.remove("logging_enabled"))},Hs=function(...l){if(!0===gh&&(gh=!1,null===Bc&&!0===ph.get("logging_enabled")&&vl(!0)),Bc){const s=bd.apply(null,l);Bc(s)}},Sd=function(l){return function(...s){Hs(l,...s)}},rf=function(...l){const s="FIREBASE INTERNAL ERROR: "+bd(...l);Uc.error(s)},Tu=function(...l){const s=`FIREBASE FATAL ERROR: ${bd(...l)}`;throw Uc.error(s),new Error(s)},zs=function(...l){const s="FIREBASE WARNING: "+bd(...l);Uc.warn(s)},sc=function(l){return"number"==typeof l&&(l!=l||l===Number.POSITIVE_INFINITY||l===Number.NEGATIVE_INFINITY)},Wu="[MIN_NAME]",El="[MAX_NAME]",eu=function(l,s){if(l===s)return 0;if(l===Wu||s===El)return-1;if(s===Wu||l===El)return 1;{const o=sf(l),c=sf(s);return null!==o?null!==c?o-c==0?l.length-s.length:o-c:-1:null!==c?1:l<s?-1:1}},ac=function(l,s){return l===s?0:l<s?-1:1},mh=function(l,s){if(s&&l in s)return s[l];throw new Error("Missing required key ("+l+") in object: "+(0,ue.Wl)(s))},jc=function(l){if("object"!=typeof l||null===l)return(0,ue.Wl)(l);const s=[];for(const c in l)s.push(c);s.sort();let o="{";for(let c=0;c<s.length;c++)0!==c&&(o+=","),o+=(0,ue.Wl)(s[c]),o+=":",o+=jc(l[s[c]]);return o+="}",o},Lg=function(l,s){const o=l.length;if(o<=s)return[l];const c=[];for(let g=0;g<o;g+=s)c.push(l.substring(g,g+s>o?o:g+s));return c};function Gs(l,s){for(const o in l)l.hasOwnProperty(o)&&s(o,l[o])}const Ad=function(l){(0,ue.hu)(!sc(l),"Invalid JSON number");const c=1023;let g,E,b,k,j;0===l?(E=0,b=0,g=1/l==-1/0?1:0):(g=l<0,(l=Math.abs(l))>=Math.pow(2,1-c)?(k=Math.min(Math.floor(Math.log(l)/Math.LN2),c),E=k+c,b=Math.round(l*Math.pow(2,52-k)-Math.pow(2,52))):(E=0,b=Math.round(l/Math.pow(2,-1074))));const q=[];for(j=52;j;j-=1)q.push(b%2?1:0),b=Math.floor(b/2);for(j=11;j;j-=1)q.push(E%2?1:0),E=Math.floor(E/2);q.push(g?1:0),q.reverse();const _e=q.join("");let De="";for(j=0;j<64;j+=8){let Ge=parseInt(_e.substr(j,8),2).toString(16);1===Ge.length&&(Ge="0"+Ge),De+=Ge}return De.toLowerCase()},Rd=new RegExp("^-?(0*)\\d{1,10}$"),sf=function(l){if(Rd.test(l)){const s=Number(l);if(s>=-2147483648&&s<=2147483647)return s}return null},tu=function(l){try{l()}catch(s){setTimeout(()=>{throw zs("Exception was thrown by user callback.",s.stack||""),s},Math.floor(0))}},wl=function(l,s){const o=setTimeout(l,s);return"number"==typeof o&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(o):"object"==typeof o&&o.unref&&o.unref(),o};class yh{constructor(s,o){this.appName_=s,this.appCheckProvider=o,this.appCheck=o?.getImmediate({optional:!0}),this.appCheck||o?.get().then(c=>this.appCheck=c)}getToken(s){return this.appCheck?this.appCheck.getToken(s):new Promise((o,c)=>{setTimeout(()=>{this.appCheck?this.getToken(s).then(o,c):o(null)},0)})}addTokenChangeListener(s){var o;null===(o=this.appCheckProvider)||void 0===o||o.get().then(c=>c.addTokenListener(s))}notifyForInvalidToken(){zs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Fg{constructor(s,o,c){this.appName_=s,this.firebaseOptions_=o,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(g=>this.auth_=g)}getToken(s){return this.auth_?this.auth_.getToken(s).catch(o=>o&&"auth/token-not-initialized"===o.code?(Hs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)):new Promise((o,c)=>{setTimeout(()=>{this.auth_?this.getToken(s).then(o,c):o(null)},0)})}addTokenChangeListener(s){this.auth_?this.auth_.addAuthTokenListener(s):this.authProvider_.get().then(o=>o.addAuthTokenListener(s))}removeTokenChangeListener(s){this.authProvider_.get().then(o=>o.removeAuthTokenListener(s))}notifyForInvalidToken(){let s='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';s+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zs(s)}}let Ua=(()=>{class l{constructor(o){this.accessToken=o}getToken(o){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(o){o(this.accessToken)}removeTokenChangeListener(o){}notifyForInvalidToken(){}}return l.OWNER="owner",l})();const nu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xo="websocket",Jn="long_polling";class Nd{constructor(s,o,c,g,E=!1,b="",k=!1,j=!1){this.secure=o,this.namespace=c,this.webSocketOnly=g,this.nodeAdmin=E,this.persistenceKey=b,this.includeNamespaceInQueryParams=k,this.isUsingEmulator=j,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ic.get("host:"+s)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&ic.set("host:"+this._host,this.internalHost))}toString(){let s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ws(l,s,o){let c;if((0,ue.hu)("string"==typeof s,"typeof type must == string"),(0,ue.hu)("object"==typeof o,"typeof params must == object"),s===Xo)c=(l.secure?"wss://":"ws://")+l.internalHost+"/.ws?";else{if(s!==Jn)throw new Error("Unknown connection type: "+s);c=(l.secure?"https://":"http://")+l.internalHost+"/.lp?"}(function Hc(l){return l.host!==l.internalHost||l.isCustomHost()||l.includeNamespaceInQueryParams})(l)&&(o.ns=l.namespace);const g=[];return Gs(o,(E,b)=>{g.push(E+"="+b)}),c+g.join("&")}class Pd{constructor(){this.counters_={}}incrementCounter(s,o=1){(0,ue.r3)(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=o}get(){return(0,ue.p$)(this.counters_)}}const zc={},Gc={};function Jo(l){const s=l.toString();return zc[s]||(zc[s]=new Pd),zc[s]}class cp{constructor(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(s,o){this.closeAfterResponse=s,this.onClose=o,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(s,o){for(this.pendingResponses[s]=o;this.pendingResponses[this.currentResponseNum];){const c=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let g=0;g<c.length;++g)c[g]&&tu(()=>{this.onMessage_(c[g])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ya{constructor(s,o,c,g,E,b,k){this.connId=s,this.repoInfo=o,this.applicationId=c,this.appCheckToken=g,this.authToken=E,this.transportSessionId=b,this.lastSessionId=k,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sd(s),this.stats_=Jo(o),this.urlFn=j=>(this.appCheckToken&&(j.ac=this.appCheckToken),Ws(o,Jn,j))}open(s,o){this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new cp(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(l){if((0,ue.Yr)()||"complete"===document.readyState)l();else{let s=!1;const o=function(){document.body?s||(s=!0,l()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hc((...E)=>{const[b,k,j,q,_e]=E;if(this.incrementIncomingBytes_(E),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===b)this.id=k,this.password=j;else{if("close"!==b)throw new Error("Unrecognized command received: "+b);k?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(k,()=>{this.onClosed_()})):this.onClosed_()}},(...E)=>{const[b,k]=E;this.incrementIncomingBytes_(E),this.myPacketOrderer.handleResponse(b,k)},()=>{this.onClosed_()},this.urlFn);const c={start:"t"};c.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(c.cb=this.scriptTagHolder.uniqueCallbackIdentifier),c.v="5",this.transportSessionId&&(c.s=this.transportSessionId),this.lastSessionId&&(c.ls=this.lastSessionId),this.applicationId&&(c.p=this.applicationId),this.appCheckToken&&(c.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&nu.test(location.hostname)&&(c.r="f");const g=this.urlFn(c);this.log_("Connecting via long-poll to "+g),this.scriptTagHolder.addTag(g,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ya.forceAllow_=!0}static forceDisallow(){ya.forceDisallow_=!0}static isAvailable(){return!((0,ue.Yr)()||!ya.forceAllow_&&(ya.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(s){const o=(0,ue.Wl)(s);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const c=(0,ue.h$)(o),g=Lg(c,1840);for(let E=0;E<g.length;E++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,g.length,g[E]),this.curSegmentNum++}addDisconnectPingFrame(s,o){if((0,ue.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const c={dframe:"t"};c.id=s,c.pw=o,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(s){const o=(0,ue.Wl)(s).length;this.bytesReceived+=o,this.stats_.incrementCounter("bytes_received",o)}}class hc{constructor(s,o,c,g){if(this.onDisconnect=c,this.urlFn=g,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ue.Yr)())this.commandCB=s,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=Og(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=o,this.myIFrame=hc.createIFrame_();let E="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(E='<script>document.domain="'+document.domain+'";<\/script>');const b="<html><body>"+E+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(b),this.myIFrame.doc.close()}catch(k){Hs("frame writing exception"),k.stack&&Hs(k.stack),Hs(k)}}}static createIFrame_(){const s=document.createElement("iframe");if(s.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(s);try{s.contentWindow.document||Hs("No IE domain setting required")}catch{const c=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const s=this.onDisconnect;s&&(this.onDisconnect=null,s())}startLongPoll(s,o){for(this.myID=s,this.myPW=o,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const s={};s.id=this.myID,s.pw=this.myPW,s.ser=this.currentSerial;let o=this.urlFn(s),c="",g=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){const b=this.pendingSegs.shift();c=c+"&seg"+g+"="+b.seg+"&ts"+g+"="+b.ts+"&d"+g+"="+b.d,g++}return o+=c,this.addLongPollTag_(o,this.currentSerial),!0}return!1}enqueueSegment(s,o,c){this.pendingSegs.push({seg:s,ts:o,d:c}),this.alive&&this.newRequest_()}addLongPollTag_(s,o){this.outstandingRequests.add(o);const c=()=>{this.outstandingRequests.delete(o),this.newRequest_()},g=setTimeout(c,Math.floor(25e3));this.addTag(s,()=>{clearTimeout(g),c()})}addTag(s,o){(0,ue.Yr)()?this.doNodeLongPoll(s,o):setTimeout(()=>{try{if(!this.sendNewPolls)return;const c=this.myIFrame.doc.createElement("script");c.type="text/javascript",c.async=!0,c.src=s,c.onload=c.onreadystatechange=function(){const g=c.readyState;(!g||"loaded"===g||"complete"===g)&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),o())},c.onerror=()=>{Hs("Long-poll script failed to load: "+s),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(c)}catch{}},Math.floor(1))}}let qc=null;typeof MozWebSocket<"u"?qc=MozWebSocket:typeof WebSocket<"u"&&(qc=WebSocket);let Zc=(()=>{class l{constructor(o,c,g,E,b,k,j){this.connId=o,this.applicationId=g,this.appCheckToken=E,this.authToken=b,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sd(this.connId),this.stats_=Jo(c),this.connURL=l.connectionURL_(c,k,j,E,g),this.nodeAdmin=c.nodeAdmin}static connectionURL_(o,c,g,E,b){const k={v:"5"};return!(0,ue.Yr)()&&typeof location<"u"&&location.hostname&&nu.test(location.hostname)&&(k.r="f"),c&&(k.s=c),g&&(k.ls=g),E&&(k.ac=E),b&&(k.p=b),Ws(o,Xo,k)}open(o,c){this.onDisconnect=c,this.onMessage=o,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ic.set("previous_websocket_failure",!0);try{let g;if((0,ue.Yr)()){g={headers:{"User-Agent":`Firebase/5/${Jr}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(g.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(g.headers["X-Firebase-AppCheck"]=this.appCheckToken);const b=process.env,k=0===this.connURL.indexOf("wss://")?b.HTTPS_PROXY||b.https_proxy:b.HTTP_PROXY||b.http_proxy;k&&(g.proxy={origin:k})}this.mySock=new qc(this.connURL,[],g)}catch(g){this.log_("Error instantiating WebSocket.");const E=g.message||g.data;return E&&this.log_(E),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=g=>{this.handleIncomingFrame(g)},this.mySock.onerror=g=>{this.log_("WebSocket error.  Closing connection.");const E=g.message||g.data;E&&this.log_(E),this.onClosed_()}}start(){}static forceDisallow(){l.forceDisallow_=!0}static isAvailable(){let o=!1;if(typeof navigator<"u"&&navigator.userAgent){const g=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);g&&g.length>1&&parseFloat(g[1])<4.4&&(o=!0)}return!o&&null!==qc&&!l.forceDisallow_}static previouslyFailed(){return ic.isInMemoryStorage||!0===ic.get("previous_websocket_failure")}markConnectionHealthy(){ic.remove("previous_websocket_failure")}appendFrame_(o){if(this.frames.push(o),this.frames.length===this.totalFrames){const c=this.frames.join("");this.frames=null;const g=(0,ue.cI)(c);this.onMessage(g)}}handleNewFrameCount_(o){this.totalFrames=o,this.frames=[]}extractFrameCount_(o){if((0,ue.hu)(null===this.frames,"We already have a frame buffer"),o.length<=6){const c=Number(o);if(!isNaN(c))return this.handleNewFrameCount_(c),null}return this.handleNewFrameCount_(1),o}handleIncomingFrame(o){if(null===this.mySock)return;const c=o.data;if(this.bytesReceived+=c.length,this.stats_.incrementCounter("bytes_received",c.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(c);else{const g=this.extractFrameCount_(c);null!==g&&this.appendFrame_(g)}}send(o){this.resetKeepAlive();const c=(0,ue.Wl)(o);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const g=Lg(c,16384);g.length>1&&this.sendString_(String(g.length));for(let E=0;E<g.length;E++)this.sendString_(g[E])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(o){try{this.mySock.send(o)}catch(c){this.log_("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return l.responsesRequiredToBeHealthy=2,l.healthyTimeout=3e4,l})(),hp=(()=>{class l{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[ya,Zc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(o){const c=Zc&&Zc.isAvailable();let g=c&&!Zc.previouslyFailed();if(o.webSocketOnly&&(c||zs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),g=!0),g)this.transports_=[Zc];else{const E=this.transports_=[];for(const b of l.ALL_TRANSPORTS)b&&b.isAvailable()&&E.push(b);l.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return l.globalTransportInitialized_=!1,l})();class Li{constructor(s,o,c,g,E,b,k,j,q,_e){this.id=s,this.repoInfo_=o,this.applicationId_=c,this.appCheckToken_=g,this.authToken_=E,this.onMessage_=b,this.onReady_=k,this.onDisconnect_=j,this.onKill_=q,this.lastSessionId=_e,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sd("c:"+this.id+":"),this.transportManager_=new hp(o),this.log_("Connection created"),this.start_()}start_(){const s=this.transportManager_.initialTransport();this.conn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.conn_),c=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(o,c)},Math.floor(0));const g=s.healthyTimeout||0;g>0&&(this.healthyTimeout_=wl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(g)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(s){return o=>{s===this.conn_?this.onConnectionLost_(o):s===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(s){return o=>{2!==this.state_&&(s===this.rx_?this.onPrimaryMessageReceived_(o):s===this.secondaryConn_?this.onSecondaryMessageReceived_(o):this.log_("message on old connection"))}}sendRequest(s){this.sendData_({t:"d",d:s})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(s){if("t"in s){const o=s.t;"a"===o?this.upgradeIfSecondaryHealthy_():"r"===o?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===o&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(s){const o=mh("t",s),c=mh("d",s);if("c"===o)this.onSecondaryControl_(c);else{if("d"!==o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(c)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(s){const o=mh("t",s),c=mh("d",s);"c"===o?this.onControl_(c):"d"===o&&this.onDataMessage_(c)}onDataMessage_(s){this.onPrimaryResponse_(),this.onMessage_(s)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(s){const o=mh("t",s);if("d"in s){const c=s.d;if("h"===o){const g=Object.assign({},c);this.repoInfo_.isUsingEmulator&&(g.h=this.repoInfo_.host),this.onHandshake_(g)}else if("n"===o){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let g=0;g<this.pendingDataMessages.length;++g)this.onDataMessage_(this.pendingDataMessages[g]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===o?this.onConnectionShutdown_(c):"r"===o?this.onReset_(c):"e"===o?rf("Server Error: "+c):"o"===o?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rf("Unknown control packet command: "+o)}}onHandshake_(s){const o=s.ts,c=s.v,g=s.h;this.sessionId=s.s,this.repoInfo_.host=g,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,o),"5"!==c&&zs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)}startUpgrade_(s){this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.secondaryConn_),c=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,c),wl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.host=s,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(s,o){this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()}onConnectionLost_(s){this.conn_=null,s||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ic.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(s){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(s)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ba{put(s,o,c,g){}merge(s,o,c,g){}refreshAuthToken(s){}refreshAppCheckToken(s){}onDisconnectPut(s,o,c){}onDisconnectMerge(s,o,c){}onDisconnectCancel(s,o){}reportStats(s){}}class Yc{constructor(s){this.allowedEvents_=s,this.listeners_={},(0,ue.hu)(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}trigger(s,...o){if(Array.isArray(this.listeners_[s])){const c=[...this.listeners_[s]];for(let g=0;g<c.length;g++)c[g].callback.apply(c[g].context,o)}}on(s,o,c){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:o,context:c});const g=this.getInitialEvent(s);g&&o.apply(c,g)}off(s,o,c){this.validateEventType_(s);const g=this.listeners_[s]||[];for(let E=0;E<g.length;E++)if(g[E].callback===o&&(!c||c===g[E].context))return void g.splice(E,1)}validateEventType_(s){(0,ue.hu)(this.allowedEvents_.find(o=>o===s),"Unknown event: "+s)}}class fc extends Yc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ue.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fc}getInitialEvent(s){return(0,ue.hu)("online"===s,"Unknown event type: "+s),[this.online_]}currentlyOnline(){return this.online_}}class Vr{constructor(s,o){if(void 0===o){this.pieces_=s.split("/");let c=0;for(let g=0;g<this.pieces_.length;g++)this.pieces_[g].length>0&&(this.pieces_[c]=this.pieces_[g],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=o}toString(){let s="";for(let o=this.pieceNum_;o<this.pieces_.length;o++)""!==this.pieces_[o]&&(s+="/"+this.pieces_[o]);return s||"/"}}function _r(){return new Vr("")}function ir(l){return l.pieceNum_>=l.pieces_.length?null:l.pieces_[l.pieceNum_]}function Cu(l){return l.pieces_.length-l.pieceNum_}function oi(l){let s=l.pieceNum_;return s<l.pieces_.length&&s++,new Vr(l.pieces_,s)}function Qc(l){return l.pieceNum_<l.pieces_.length?l.pieces_[l.pieces_.length-1]:null}function Yu(l,s=0){return l.pieces_.slice(l.pieceNum_+s)}function kd(l){if(l.pieceNum_>=l.pieces_.length)return null;const s=[];for(let o=l.pieceNum_;o<l.pieces_.length-1;o++)s.push(l.pieces_[o]);return new Vr(s,0)}function ys(l,s){const o=[];for(let c=l.pieceNum_;c<l.pieces_.length;c++)o.push(l.pieces_[c]);if(s instanceof Vr)for(let c=s.pieceNum_;c<s.pieces_.length;c++)o.push(s.pieces_[c]);else{const c=s.split("/");for(let g=0;g<c.length;g++)c[g].length>0&&o.push(c[g])}return new Vr(o,0)}function Ar(l){return l.pieceNum_>=l.pieces_.length}function Va(l,s){const o=ir(l),c=ir(s);if(null===o)return s;if(o===c)return Va(oi(l),oi(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+l+")")}function Gm(l,s){const o=Yu(l,0),c=Yu(s,0);for(let g=0;g<o.length&&g<c.length;g++){const E=eu(o[g],c[g]);if(0!==E)return E}return o.length===c.length?0:o.length<c.length?-1:1}function Ld(l,s){if(Cu(l)!==Cu(s))return!1;for(let o=l.pieceNum_,c=s.pieceNum_;o<=l.pieces_.length;o++,c++)if(l.pieces_[o]!==s.pieces_[c])return!1;return!0}function iu(l,s){let o=l.pieceNum_,c=s.pieceNum_;if(Cu(l)>Cu(s))return!1;for(;o<l.pieces_.length;){if(l.pieces_[o]!==s.pieces_[c])return!1;++o,++c}return!0}class d_{constructor(s,o){this.errorPrefix_=o,this.parts_=Yu(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(let c=0;c<this.parts_.length;c++)this.byteLength_+=(0,ue.ug)(this.parts_[c]);Fd(this)}}function Fd(l){if(l.byteLength_>768)throw new Error(l.errorPrefix_+"has a key path longer than 768 bytes ("+l.byteLength_+").");if(l.parts_.length>32)throw new Error(l.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rl(l))}function Rl(l){return 0===l.parts_.length?"":"in property '"+l.parts_.join(".")+"'"}class Qu extends Yc{constructor(){let s,o;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",s="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",s="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",s="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",s="webkitHidden")),this.visible_=!0,o&&document.addEventListener(o,()=>{const c=!document[s];c!==this.visible_&&(this.visible_=c,this.trigger("visible",c))},!1)}static getInstance(){return new Qu}getInitialEvent(s){return(0,ue.hu)("visible"===s,"Unknown event type: "+s),[this.visible_]}}const hf=1e3;let mp,Bd=(()=>{class l extends Ba{constructor(o,c,g,E,b,k,j,q){if(super(),this.repoInfo_=o,this.applicationId_=c,this.onDataUpdate_=g,this.onConnectStatus_=E,this.onServerInfoUpdate_=b,this.authTokenProvider_=k,this.appCheckTokenProvider_=j,this.authOverride_=q,this.id=l.nextPersistentConnectionId_++,this.log_=Sd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,q&&!(0,ue.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qu.getInstance().on("visible",this.onVisible_,this),-1===o.host.indexOf("fblocal")&&fc.getInstance().on("online",this.onOnline_,this)}sendRequest(o,c,g){const E=++this.requestNumber_,b={r:E,a:o,b:c};this.log_((0,ue.Wl)(b)),(0,ue.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(b),g&&(this.requestCBHash_[E]=g)}get(o){this.initConnection_();const c=new ue.BH,E={action:"g",request:{p:o._path.toString(),q:o._queryObject},onComplete:k=>{const j=k.d;"ok"===k.s?c.resolve(j):c.reject(j)}};return this.outstandingGets_.push(E),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),c.promise}listen(o,c,g,E){this.initConnection_();const b=o._queryIdentifier,k=o._path.toString();this.log_("Listen called for "+k+" "+b),this.listens.has(k)||this.listens.set(k,new Map),(0,ue.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ue.hu)(!this.listens.get(k).has(b),"listen() called twice for same path/queryId.");const j={onComplete:E,hashFn:c,query:o,tag:g};this.listens.get(k).set(b,j),this.connected_&&this.sendListen_(j)}sendGet_(o){const c=this.outstandingGets_[o];this.sendRequest("g",c.request,g=>{delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),c.onComplete&&c.onComplete(g)})}sendListen_(o){const c=o.query,g=c._path.toString(),E=c._queryIdentifier;this.log_("Listen on "+g+" for "+E);const b={p:g};o.tag&&(b.q=c._queryObject,b.t=o.tag),b.h=o.hashFn(),this.sendRequest("q",b,j=>{const q=j.d,_e=j.s;l.warnOnListenWarnings_(q,c),(this.listens.get(g)&&this.listens.get(g).get(E))===o&&(this.log_("listen response",j),"ok"!==_e&&this.removeListen_(g,E),o.onComplete&&o.onComplete(_e,q))})}static warnOnListenWarnings_(o,c){if(o&&"object"==typeof o&&(0,ue.r3)(o,"w")){const g=(0,ue.DV)(o,"w");if(Array.isArray(g)&&~g.indexOf("no_index")){const E='".indexOn": "'+c._queryParams.getIndex().toString()+'"',b=c._path.toString();zs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${E} at ${b} to your security rules for better performance.`)}}}refreshAuthToken(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(o)}reduceReconnectDelayIfAdminCredential_(o){(o&&40===o.length||(0,ue.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const o=this.authToken_,c=(0,ue.w9)(o)?"auth":"gauth",g={cred:o};null===this.authOverride_?g.noauth=!0:"object"==typeof this.authOverride_&&(g.authvar=this.authOverride_),this.sendRequest(c,g,E=>{const b=E.s,k=E.d||"error";this.authToken_===o&&("ok"===b?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(b,k))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},o=>{const c=o.s,g=o.d||"error";"ok"===c?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(c,g)})}unlisten(o,c){const g=o._path.toString(),E=o._queryIdentifier;this.log_("Unlisten called for "+g+" "+E),(0,ue.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(g,E)&&this.connected_&&this.sendUnlisten_(g,E,o._queryObject,c)}sendUnlisten_(o,c,g,E){this.log_("Unlisten on "+o+" for "+c);const b={p:o};E&&(b.q=g,b.t=E),this.sendRequest("n",b)}onDisconnectPut(o,c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,c,g):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:c,onComplete:g})}onDisconnectMerge(o,c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,c,g):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:c,onComplete:g})}onDisconnectCancel(o,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,c):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:c})}sendOnDisconnect_(o,c,g,E){const b={p:c,d:g};this.log_("onDisconnect "+o,b),this.sendRequest(o,b,k=>{E&&setTimeout(()=>{E(k.s,k.d)},Math.floor(0))})}put(o,c,g,E){this.putInternal("p",o,c,g,E)}merge(o,c,g,E){this.putInternal("m",o,c,g,E)}putInternal(o,c,g,E,b){this.initConnection_();const k={p:c,d:g};void 0!==b&&(k.h=b),this.outstandingPuts_.push({action:o,request:k,onComplete:E}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)}sendPut_(o){const c=this.outstandingPuts_[o].action,g=this.outstandingPuts_[o].request,E=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(c,g,b=>{this.log_(c+" response",b),delete this.outstandingPuts_[o],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),E&&E(b.s,b.d)})}reportStats(o){if(this.connected_){const c={c:o};this.log_("reportStats",c),this.sendRequest("s",c,g=>{"ok"!==g.s&&this.log_("reportStats","Error sending stats: "+g.d)})}}onDataMessage_(o){if("r"in o){this.log_("from server: "+(0,ue.Wl)(o));const c=o.r,g=this.requestCBHash_[c];g&&(delete this.requestCBHash_[c],g(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}onDataPush_(o,c){this.log_("handleServerMessage",o,c),"d"===o?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===o?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===o?this.onListenRevoked_(c.p,c.q):"ac"===o?this.onAuthRevoked_(c.s,c.d):"apc"===o?this.onAppCheckRevoked_(c.s,c.d):"sd"===o?this.onSecurityDebugPacket_(c):rf("Unrecognized action received from server: "+(0,ue.Wl)(o)+"\nAre you using the latest client?")}onReady_(o,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(o){(0,ue.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(o))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hf,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}onOnline_(o){o?(this.log_("Browser went online."),this.reconnectDelay_=hf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=hf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const o=(new Date).getTime()-this.lastConnectionAttemptTime_;let c=Math.max(0,this.reconnectDelay_-o);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var o=this;return(0,Do.Z)(function*(){if(o.shouldReconnect_()){o.log_("Making a connection attempt"),o.lastConnectionAttemptTime_=(new Date).getTime(),o.lastConnectionEstablishedTime_=null;const c=o.onDataMessage_.bind(o),g=o.onReady_.bind(o),E=o.onRealtimeDisconnect_.bind(o),b=o.id+":"+l.nextConnectionId_++,k=o.lastSessionId;let j=!1,q=null;const _e=function(){q?q.close():(j=!0,E())};o.realtime_={close:_e,sendRequest:function(ct){(0,ue.hu)(q,"sendRequest call when we're not connected not allowed."),q.sendRequest(ct)}};const Ge=o.forceTokenRefresh_;o.forceTokenRefresh_=!1;try{const[ct,ht]=yield Promise.all([o.authTokenProvider_.getToken(Ge),o.appCheckTokenProvider_.getToken(Ge)]);j?Hs("getToken() completed but was canceled"):(Hs("getToken() completed. Creating connection."),o.authToken_=ct&&ct.accessToken,o.appCheckToken_=ht&&ht.token,q=new Li(b,o.repoInfo_,o.applicationId_,o.appCheckToken_,o.authToken_,c,g,E,Wt=>{zs(Wt+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},k))}catch(ct){o.log_("Failed to get token: "+ct),j||(o.repoInfo_.nodeAdmin&&zs(ct),_e())}}})()}interrupt(o){Hs("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(o){Hs("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,ue.xb)(this.interruptReasons_)&&(this.reconnectDelay_=hf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(o){const c=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})}cancelSentTransactions_(){for(let o=0;o<this.outstandingPuts_.length;o++){const c=this.outstandingPuts_[o];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(o,c){let g;g=c?c.map(b=>jc(b)).join("$"):"default";const E=this.removeListen_(o,g);E&&E.onComplete&&E.onComplete("permission_denied")}removeListen_(o,c){const g=new Vr(o).toString();let E;if(this.listens.has(g)){const b=this.listens.get(g);E=b.get(c),b.delete(c),0===b.size&&this.listens.delete(g)}else E=void 0;return E}onAuthRevoked_(o,c){Hs("Auth token revoked: "+o+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(o,c){Hs("App check token revoked: "+o+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const o of this.listens.values())for(const c of o.values())this.sendListen_(c);for(let o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){const o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(let o=0;o<this.outstandingGets_.length;o++)this.outstandingGets_[o]&&this.sendGet_(o)}sendConnectStats_(){const o={};let c="js";(0,ue.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+c+"."+Jr.replace(/\./g,"-")]=1,(0,ue.uI)()?o["framework.cordova"]=1:(0,ue.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}shouldReconnect_(){const o=fc.getInstance().currentlyOnline();return(0,ue.xb)(this.interruptReasons_)&&o}}return l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l})();class mr{constructor(s,o){this.name=s,this.node=o}static Wrap(s,o){return new mr(s,o)}}class Eh{getCompare(){return this.compare.bind(this)}indexedValueChanged(s,o){const c=new mr(Wu,s),g=new mr(Wu,o);return 0!==this.compare(c,g)}minPost(){return mr.MIN}}class Wm extends Eh{static get __EMPTY_NODE(){return mp}static set __EMPTY_NODE(s){mp=s}compare(s,o){return eu(s.name,o.name)}isDefinedOn(s){throw(0,ue.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(s,o){return!1}minPost(){return mr.MIN}maxPost(){return new mr(El,mp)}makePost(s,o){return(0,ue.hu)("string"==typeof s,"KeyIndex indexValue must always be a string."),new mr(s,mp)}toString(){return".key"}}const Xu=new Wm;class yp{constructor(s,o,c,g,E=null){this.isReverse_=g,this.resultGenerator_=E,this.nodeStack_=[];let b=1;for(;!s.isEmpty();)if(b=o?c(s.key,o):1,g&&(b*=-1),b<0)s=this.isReverse_?s.left:s.right;else{if(0===b){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}getNext(){if(0===this.nodeStack_.length)return null;let o,s=this.nodeStack_.pop();if(o=this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return o}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}}}let Xc,Ml=(()=>{class l{constructor(o,c,g,E,b){this.key=o,this.value=c,this.color=g??l.RED,this.left=E??qs.EMPTY_NODE,this.right=b??qs.EMPTY_NODE}copy(o,c,g,E,b){return new l(o??this.key,c??this.value,g??this.color,E??this.left,b??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||!!o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,c,g){let E=this;const b=g(o,E.key);return E=b<0?E.copy(null,null,null,E.left.insert(o,c,g),null):0===b?E.copy(null,c,null,null,null):E.copy(null,null,null,null,E.right.insert(o,c,g)),E.fixUp_()}removeMin_(){if(this.left.isEmpty())return qs.EMPTY_NODE;let o=this;return!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.removeMin_(),null),o.fixUp_()}remove(o,c){let g,E;if(g=this,c(o,g.key)<0)!g.left.isEmpty()&&!g.left.isRed_()&&!g.left.left.isRed_()&&(g=g.moveRedLeft_()),g=g.copy(null,null,null,g.left.remove(o,c),null);else{if(g.left.isRed_()&&(g=g.rotateRight_()),!g.right.isEmpty()&&!g.right.isRed_()&&!g.right.left.isRed_()&&(g=g.moveRedRight_()),0===c(o,g.key)){if(g.right.isEmpty())return qs.EMPTY_NODE;E=g.right.min_(),g=g.copy(E.key,E.value,null,null,g.right.removeMin_())}g=g.copy(null,null,null,null,g.right.remove(o,c))}return g.fixUp_()}isRed_(){return this.color}fixUp_(){let o=this;return o.right.isRed_()&&!o.left.isRed_()&&(o=o.rotateLeft_()),o.left.isRed_()&&o.left.left.isRed_()&&(o=o.rotateRight_()),o.left.isRed_()&&o.right.isRed_()&&(o=o.colorFlip_()),o}moveRedLeft_(){let o=this.colorFlip_();return o.right.left.isRed_()&&(o=o.copy(null,null,null,null,o.right.rotateRight_()),o=o.rotateLeft_(),o=o.colorFlip_()),o}moveRedRight_(){let o=this.colorFlip_();return o.left.left.isRed_()&&(o=o.rotateRight_(),o=o.colorFlip_()),o}rotateLeft_(){const o=this.copy(null,null,l.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight_(){const o=this.copy(null,null,l.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip_(){const o=this.left.copy(null,null,!this.left.color,null,null),c=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,c)}checkMaxDepth_(){const o=this.check_();return Math.pow(2,o)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const o=this.left.check_();if(o!==this.right.check_())throw new Error("Black depths differ");return o+(this.isRed_()?0:1)}}return l.RED=!0,l.BLACK=!1,l})();class qs{constructor(s,o=qs.EMPTY_NODE){this.comparator_=s,this.root_=o}insert(s,o){return new qs(this.comparator_,this.root_.insert(s,o,this.comparator_).copy(null,null,Ml.BLACK,null,null))}remove(s){return new qs(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,Ml.BLACK,null,null))}get(s){let o,c=this.root_;for(;!c.isEmpty();){if(o=this.comparator_(s,c.key),0===o)return c.value;o<0?c=c.left:o>0&&(c=c.right)}return null}getPredecessorKey(s){let o,c=this.root_,g=null;for(;!c.isEmpty();){if(o=this.comparator_(s,c.key),0===o){if(c.left.isEmpty())return g?g.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}o<0?c=c.left:o>0&&(g=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(s){return this.root_.inorderTraversal(s)}reverseTraversal(s){return this.root_.reverseTraversal(s)}getIterator(s){return new yp(this.root_,null,this.comparator_,!1,s)}getIteratorFrom(s,o){return new yp(this.root_,s,this.comparator_,!1,o)}getReverseIteratorFrom(s,o){return new yp(this.root_,s,this.comparator_,!0,o)}getReverseIterator(s){return new yp(this.root_,null,this.comparator_,!0,s)}}function _p(l,s){return eu(l.name,s.name)}function Km(l,s){return eu(l,s)}qs.EMPTY_NODE=new class p_{copy(s,o,c,g,E){return this}insert(s,o,c){return new Ml(s,o,null)}remove(s,o){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const g_=function(l){return"number"==typeof l?"number:"+Ad(l):"string:"+l},hv=function(l){if(l.isLeafNode()){const s=l.val();(0,ue.hu)("string"==typeof s||"number"==typeof s||"object"==typeof s&&(0,ue.r3)(s,".sv"),"Priority must be a string or number.")}else(0,ue.hu)(l===Xc||l.isEmpty(),"priority of unexpected type.");(0,ue.hu)(l===Xc||l.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let m_,qm,y_,ja=(()=>{class l{constructor(o,c=l.__childrenNodeConstructor.EMPTY_NODE){this.value_=o,this.priorityNode_=c,this.lazyHash_=null,(0,ue.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),hv(this.priorityNode_)}static set __childrenNodeConstructor(o){m_=o}static get __childrenNodeConstructor(){return m_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(o){return new l(this.value_,o)}getImmediateChild(o){return".priority"===o?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}getChild(o){return Ar(o)?this:".priority"===ir(o)?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(o,c){return null}updateImmediateChild(o,c){return".priority"===o?this.updatePriority(c):c.isEmpty()&&".priority"!==o?this:l.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(o,c).updatePriority(this.priorityNode_)}updateChild(o,c){const g=ir(o);return null===g?c:c.isEmpty()&&".priority"!==g?this:((0,ue.hu)(".priority"!==g||1===Cu(o),".priority must be the last token in a path"),this.updateImmediateChild(g,l.__childrenNodeConstructor.EMPTY_NODE.updateChild(oi(o),c)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(o,c){return!1}val(o){return o&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let o="";this.priorityNode_.isEmpty()||(o+="priority:"+g_(this.priorityNode_.val())+":");const c=typeof this.value_;o+=c+":",o+="number"===c?Ad(this.value_):this.value_,this.lazyHash_=kg(o)}return this.lazyHash_}getValue(){return this.value_}compareTo(o){return o===l.__childrenNodeConstructor.EMPTY_NODE?1:o instanceof l.__childrenNodeConstructor?-1:((0,ue.hu)(o.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(o))}compareToLeafNode_(o){const c=typeof o.value_,g=typeof this.value_,E=l.VALUE_TYPE_ORDER.indexOf(c),b=l.VALUE_TYPE_ORDER.indexOf(g);return(0,ue.hu)(E>=0,"Unknown leaf type: "+c),(0,ue.hu)(b>=0,"Unknown leaf type: "+g),E===b?"object"===g?0:this.value_<o.value_?-1:this.value_===o.value_?0:1:b-E}withIndex(){return this}isIndexed(){return!0}equals(o){return o===this||!!o.isLeafNode()&&(this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_))}}return l.VALUE_TYPE_ORDER=["object","boolean","number","string"],l})();const Rr=new class Jc extends Eh{compare(s,o){const c=s.node.getPriority(),g=o.node.getPriority(),E=c.compareTo(g);return 0===E?eu(s.name,o.name):E}isDefinedOn(s){return!s.getPriority().isEmpty()}indexedValueChanged(s,o){return!s.getPriority().equals(o.getPriority())}minPost(){return mr.MIN}maxPost(){return new mr(El,new ja("[PRIORITY-POST]",y_))}makePost(s,o){const c=qm(s);return new mr(o,new ja("[PRIORITY-POST]",c))}toString(){return".priority"}},Nl=Math.log(2);class pf{constructor(s){this.count=parseInt(Math.log(s+1)/Nl,10),this.current_=this.count-1;const g=(E=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=s+1&g}nextBitIsOne(){const s=!(this.bits_&1<<this.current_);return this.current_--,s}}const gf=function(l,s,o,c){l.sort(s);const g=function(j,q){const _e=q-j;let De,Ge;if(0===_e)return null;if(1===_e)return De=l[j],Ge=o?o(De):De,new Ml(Ge,De.node,Ml.BLACK,null,null);{const ct=parseInt(_e/2,10)+j,ht=g(j,ct),Wt=g(ct+1,q);return De=l[ct],Ge=o?o(De):De,new Ml(Ge,De.node,Ml.BLACK,ht,Wt)}},k=function(j){let q=null,_e=null,De=l.length;const Ge=function(ht,Wt){const In=De-ht,Nn=De;De-=ht;const ur=g(In+1,Nn),kr=l[In],Wr=o?o(kr):kr;ct(new Ml(Wr,kr.node,Wt,null,ur))},ct=function(ht){q?(q.left=ht,q=ht):(_e=ht,q=ht)};for(let ht=0;ht<j.count;++ht){const Wt=j.nextBitIsOne(),In=Math.pow(2,j.count-(ht+1));Wt?Ge(In,Ml.BLACK):(Ge(In,Ml.BLACK),Ge(In,Ml.RED))}return _e}(new pf(l.length));return new qs(c||s,k)};let mf;const wh={};class ed{constructor(s,o){this.indexes_=s,this.indexSet_=o}static get Default(){return(0,ue.hu)(wh&&Rr,"ChildrenNode.ts has not been loaded"),mf=mf||new ed({".priority":wh},{".priority":Rr}),mf}get(s){const o=(0,ue.DV)(this.indexes_,s);if(!o)throw new Error("No index defined for "+s);return o instanceof qs?o:null}hasIndex(s){return(0,ue.r3)(this.indexSet_,s.toString())}addIndex(s,o){(0,ue.hu)(s!==Xu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const c=[];let g=!1;const E=o.getIterator(mr.Wrap);let k,b=E.getNext();for(;b;)g=g||s.isDefinedOn(b.node),c.push(b),b=E.getNext();k=g?gf(c,s.getCompare()):wh;const j=s.toString(),q=Object.assign({},this.indexSet_);q[j]=s;const _e=Object.assign({},this.indexes_);return _e[j]=k,new ed(_e,q)}addToIndexes(s,o){const c=(0,ue.UI)(this.indexes_,(g,E)=>{const b=(0,ue.DV)(this.indexSet_,E);if((0,ue.hu)(b,"Missing index implementation for "+E),g===wh){if(b.isDefinedOn(s.node)){const k=[],j=o.getIterator(mr.Wrap);let q=j.getNext();for(;q;)q.name!==s.name&&k.push(q),q=j.getNext();return k.push(s),gf(k,b.getCompare())}return wh}{const k=o.get(s.name);let j=g;return k&&(j=j.remove(new mr(s.name,k))),j.insert(s,s.node)}});return new ed(c,this.indexSet_)}removeFromIndexes(s,o){const c=(0,ue.UI)(this.indexes_,g=>{if(g===wh)return g;{const E=o.get(s.name);return E?g.remove(new mr(s.name,E)):g}});return new ed(c,this.indexSet_)}}let Ep,hr=(()=>{class l{constructor(o,c,g){this.children_=o,this.priorityNode_=c,this.indexMap_=g,this.lazyHash_=null,this.priorityNode_&&hv(this.priorityNode_),this.children_.isEmpty()&&(0,ue.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ep||(Ep=new l(new qs(Km),null,ed.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ep}updatePriority(o){return this.children_.isEmpty()?this:new l(this.children_,o,this.indexMap_)}getImmediateChild(o){if(".priority"===o)return this.getPriority();{const c=this.children_.get(o);return null===c?Ep:c}}getChild(o){const c=ir(o);return null===c?this:this.getImmediateChild(c).getChild(oi(o))}hasChild(o){return null!==this.children_.get(o)}updateImmediateChild(o,c){if((0,ue.hu)(c,"We should always be passing snapshot nodes"),".priority"===o)return this.updatePriority(c);{const g=new mr(o,c);let E,b;c.isEmpty()?(E=this.children_.remove(o),b=this.indexMap_.removeFromIndexes(g,this.children_)):(E=this.children_.insert(o,c),b=this.indexMap_.addToIndexes(g,this.children_));const k=E.isEmpty()?Ep:this.priorityNode_;return new l(E,k,b)}}updateChild(o,c){const g=ir(o);if(null===g)return c;{(0,ue.hu)(".priority"!==ir(o)||1===Cu(o),".priority must be the last token in a path");const E=this.getImmediateChild(g).updateChild(oi(o),c);return this.updateImmediateChild(g,E)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(o){if(this.isEmpty())return null;const c={};let g=0,E=0,b=!0;if(this.forEachChild(Rr,(k,j)=>{c[k]=j.val(o),g++,b&&l.INTEGER_REGEXP_.test(k)?E=Math.max(E,Number(k)):b=!1}),!o&&b&&E<2*g){const k=[];for(const j in c)k[j]=c[j];return k}return o&&!this.getPriority().isEmpty()&&(c[".priority"]=this.getPriority().val()),c}hash(){if(null===this.lazyHash_){let o="";this.getPriority().isEmpty()||(o+="priority:"+g_(this.getPriority().val())+":"),this.forEachChild(Rr,(c,g)=>{const E=g.hash();""!==E&&(o+=":"+c+":"+E)}),this.lazyHash_=""===o?"":kg(o)}return this.lazyHash_}getPredecessorChildName(o,c,g){const E=this.resolveIndex_(g);if(E){const b=E.getPredecessorKey(new mr(o,c));return b?b.name:null}return this.children_.getPredecessorKey(o)}getFirstChildName(o){const c=this.resolveIndex_(o);if(c){const g=c.minKey();return g&&g.name}return this.children_.minKey()}getFirstChild(o){const c=this.getFirstChildName(o);return c?new mr(c,this.children_.get(c)):null}getLastChildName(o){const c=this.resolveIndex_(o);if(c){const g=c.maxKey();return g&&g.name}return this.children_.maxKey()}getLastChild(o){const c=this.getLastChildName(o);return c?new mr(c,this.children_.get(c)):null}forEachChild(o,c){const g=this.resolveIndex_(o);return g?g.inorderTraversal(E=>c(E.name,E.node)):this.children_.inorderTraversal(c)}getIterator(o){return this.getIteratorFrom(o.minPost(),o)}getIteratorFrom(o,c){const g=this.resolveIndex_(c);if(g)return g.getIteratorFrom(o,E=>E);{const E=this.children_.getIteratorFrom(o.name,mr.Wrap);let b=E.peek();for(;null!=b&&c.compare(b,o)<0;)E.getNext(),b=E.peek();return E}}getReverseIterator(o){return this.getReverseIteratorFrom(o.maxPost(),o)}getReverseIteratorFrom(o,c){const g=this.resolveIndex_(c);if(g)return g.getReverseIteratorFrom(o,E=>E);{const E=this.children_.getReverseIteratorFrom(o.name,mr.Wrap);let b=E.peek();for(;null!=b&&c.compare(b,o)>0;)E.getNext(),b=E.peek();return E}}compareTo(o){return this.isEmpty()?o.isEmpty()?0:-1:o.isLeafNode()||o.isEmpty()?1:o===wp?-1:0}withIndex(o){if(o===Xu||this.indexMap_.hasIndex(o))return this;{const c=this.indexMap_.addIndex(o,this.children_);return new l(this.children_,this.priorityNode_,c)}}isIndexed(o){return o===Xu||this.indexMap_.hasIndex(o)}equals(o){if(o===this)return!0;if(o.isLeafNode())return!1;{const c=o;if(this.getPriority().equals(c.getPriority())){if(this.children_.count()===c.children_.count()){const g=this.getIterator(Rr),E=c.getIterator(Rr);let b=g.getNext(),k=E.getNext();for(;b&&k;){if(b.name!==k.name||!b.node.equals(k.node))return!1;b=g.getNext(),k=E.getNext()}return null===b&&null===k}return!1}return!1}}resolveIndex_(o){return o===Xu?null:this.indexMap_.get(o.toString())}}return l.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,l})();const wp=new class Vg extends hr{constructor(){super(new qs(Km),hr.EMPTY_NODE,ed.Default)}compareTo(s){return s===this?0:1}equals(s){return s===this}getPriority(){return this}getImmediateChild(s){return hr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(mr,{MIN:{value:new mr(Wu,hr.EMPTY_NODE)},MAX:{value:new mr(El,wp)}}),Wm.__EMPTY_NODE=hr.EMPTY_NODE,ja.__childrenNodeConstructor=hr,function vp(l){Xc=l}(wp),function Bg(l){y_=l}(wp);const Zm=!0;function zi(l,s=null){if(null===l)return hr.EMPTY_NODE;if("object"==typeof l&&".priority"in l&&(s=l[".priority"]),(0,ue.hu)(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof l&&".value"in l&&null!==l[".value"]&&(l=l[".value"]),"object"!=typeof l||".sv"in l)return new ja(l,zi(s));if(l instanceof Array||!Zm){let o=hr.EMPTY_NODE;return Gs(l,(c,g)=>{if((0,ue.r3)(l,c)&&"."!==c.substring(0,1)){const E=zi(g);(E.isLeafNode()||!E.isEmpty())&&(o=o.updateImmediateChild(c,E))}}),o.updatePriority(zi(s))}{const o=[];let c=!1;if(Gs(l,(b,k)=>{if("."!==b.substring(0,1)){const j=zi(k);j.isEmpty()||(c=c||!j.getPriority().isEmpty(),o.push(new mr(b,j)))}}),0===o.length)return hr.EMPTY_NODE;const E=gf(o,_p,b=>b.name,Km);if(c){const b=gf(o,Rr.getCompare());return new hr(E,zi(s),new ed({".priority":b},{".priority":Rr}))}return new hr(E,zi(s),ed.Default)}}!function __(l){qm=l}(zi);class td extends Eh{constructor(s){super(),this.indexPath_=s,(0,ue.hu)(!Ar(s)&&".priority"!==ir(s),"Can't create PathIndex with empty path or .priority key")}extractChild(s){return s.getChild(this.indexPath_)}isDefinedOn(s){return!s.getChild(this.indexPath_).isEmpty()}compare(s,o){const c=this.extractChild(s.node),g=this.extractChild(o.node),E=c.compareTo(g);return 0===E?eu(s.name,o.name):E}makePost(s,o){const c=zi(s),g=hr.EMPTY_NODE.updateChild(this.indexPath_,c);return new mr(o,g)}maxPost(){const s=hr.EMPTY_NODE.updateChild(this.indexPath_,wp);return new mr(El,s)}toString(){return Yu(this.indexPath_,0).join("/")}}const jg=new class fv extends Eh{compare(s,o){const c=s.node.compareTo(o.node);return 0===c?eu(s.name,o.name):c}isDefinedOn(s){return!0}indexedValueChanged(s,o){return!s.equals(o)}minPost(){return mr.MIN}maxPost(){return mr.MAX}makePost(s,o){const c=zi(s);return new mr(o,c)}toString(){return".value"}};function v_(l){return{type:"value",snapshotNode:l}}function Ih(l,s){return{type:"child_added",snapshotNode:s,childName:l}}function Vd(l,s){return{type:"child_removed",snapshotNode:s,childName:l}}function nd(l,s,o){return{type:"child_changed",snapshotNode:s,childName:l,oldSnap:o}}class pc{constructor(s){this.index_=s}updateChild(s,o,c,g,E,b){(0,ue.hu)(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");const k=s.getImmediateChild(o);return k.getChild(g).equals(c.getChild(g))&&k.isEmpty()===c.isEmpty()||(null!=b&&(c.isEmpty()?s.hasChild(o)?b.trackChildChange(Vd(o,k)):(0,ue.hu)(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):k.isEmpty()?b.trackChildChange(Ih(o,c)):b.trackChildChange(nd(o,c,k))),s.isLeafNode()&&c.isEmpty())?s:s.updateImmediateChild(o,c).withIndex(this.index_)}updateFullNode(s,o,c){return null!=c&&(s.isLeafNode()||s.forEachChild(Rr,(g,E)=>{o.hasChild(g)||c.trackChildChange(Vd(g,E))}),o.isLeafNode()||o.forEachChild(Rr,(g,E)=>{if(s.hasChild(g)){const b=s.getImmediateChild(g);b.equals(E)||c.trackChildChange(nd(g,E,b))}else c.trackChildChange(Ih(g,E))})),o.withIndex(this.index_)}updatePriority(s,o){return s.isEmpty()?hr.EMPTY_NODE:s.updatePriority(o)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Pl{constructor(s){this.indexedFilter_=new pc(s.getIndex()),this.index_=s.getIndex(),this.startPost_=Pl.getStartPost_(s),this.endPost_=Pl.getEndPost_(s),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(s){const o=this.startIsInclusive_?this.index_.compare(this.getStartPost(),s)<=0:this.index_.compare(this.getStartPost(),s)<0,c=this.endIsInclusive_?this.index_.compare(s,this.getEndPost())<=0:this.index_.compare(s,this.getEndPost())<0;return o&&c}updateChild(s,o,c,g,E,b){return this.matches(new mr(o,c))||(c=hr.EMPTY_NODE),this.indexedFilter_.updateChild(s,o,c,g,E,b)}updateFullNode(s,o,c){o.isLeafNode()&&(o=hr.EMPTY_NODE);let g=o.withIndex(this.index_);g=g.updatePriority(hr.EMPTY_NODE);const E=this;return o.forEachChild(Rr,(b,k)=>{E.matches(new mr(b,k))||(g=g.updateImmediateChild(b,hr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,g,c)}updatePriority(s,o){return s}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(s){if(s.hasStart()){const o=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),o)}return s.getIndex().minPost()}static getEndPost_(s){if(s.hasEnd()){const o=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),o)}return s.getIndex().maxPost()}}class pv{constructor(s){this.withinDirectionalStart=o=>this.reverse_?this.withinEndPost(o):this.withinStartPost(o),this.withinDirectionalEnd=o=>this.reverse_?this.withinStartPost(o):this.withinEndPost(o),this.withinStartPost=o=>{const c=this.index_.compare(this.rangedFilter_.getStartPost(),o);return this.startIsInclusive_?c<=0:c<0},this.withinEndPost=o=>{const c=this.index_.compare(o,this.rangedFilter_.getEndPost());return this.endIsInclusive_?c<=0:c<0},this.rangedFilter_=new Pl(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft(),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}updateChild(s,o,c,g,E,b){return this.rangedFilter_.matches(new mr(o,c))||(c=hr.EMPTY_NODE),s.getImmediateChild(o).equals(c)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,o,c,g,E,b):this.fullLimitUpdateChild_(s,o,c,E,b)}updateFullNode(s,o,c){let g;if(o.isLeafNode()||o.isEmpty())g=hr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<o.numChildren()&&o.isIndexed(this.index_)){let E;g=hr.EMPTY_NODE.withIndex(this.index_),E=this.reverse_?o.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let b=0;for(;E.hasNext()&&b<this.limit_;){const k=E.getNext();if(this.withinDirectionalStart(k)){if(!this.withinDirectionalEnd(k))break;g=g.updateImmediateChild(k.name,k.node),b++}}}else{let E;g=o.withIndex(this.index_),g=g.updatePriority(hr.EMPTY_NODE),E=this.reverse_?g.getReverseIterator(this.index_):g.getIterator(this.index_);let b=0;for(;E.hasNext();){const k=E.getNext();b<this.limit_&&this.withinDirectionalStart(k)&&this.withinDirectionalEnd(k)?b++:g=g.updateImmediateChild(k.name,hr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,g,c)}updatePriority(s,o){return s}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(s,o,c,g,E){let b;if(this.reverse_){const De=this.index_.getCompare();b=(Ge,ct)=>De(ct,Ge)}else b=this.index_.getCompare();const k=s;(0,ue.hu)(k.numChildren()===this.limit_,"");const j=new mr(o,c),q=this.reverse_?k.getFirstChild(this.index_):k.getLastChild(this.index_),_e=this.rangedFilter_.matches(j);if(k.hasChild(o)){const De=k.getImmediateChild(o);let Ge=g.getChildAfterChild(this.index_,q,this.reverse_);for(;null!=Ge&&(Ge.name===o||k.hasChild(Ge.name));)Ge=g.getChildAfterChild(this.index_,Ge,this.reverse_);const ct=null==Ge?1:b(Ge,j);if(_e&&!c.isEmpty()&&ct>=0)return E?.trackChildChange(nd(o,c,De)),k.updateImmediateChild(o,c);{E?.trackChildChange(Vd(o,De));const Wt=k.updateImmediateChild(o,hr.EMPTY_NODE);return null!=Ge&&this.rangedFilter_.matches(Ge)?(E?.trackChildChange(Ih(Ge.name,Ge.node)),Wt.updateImmediateChild(Ge.name,Ge.node)):Wt}}return c.isEmpty()?s:_e&&b(q,j)>=0?(null!=E&&(E.trackChildChange(Vd(q.name,q.node)),E.trackChildChange(Ih(o,c))),k.updateImmediateChild(o,c).updateImmediateChild(q.name,hr.EMPTY_NODE)):s}}class Ip{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ue.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ue.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ue.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ue.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:El}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ue.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rr}copy(){const s=new Ip;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.startAfterSet_=this.startAfterSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.endBeforeSet_=this.endBeforeSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s}}function Hg(l,s,o){const c=l.copy();return c.startSet_=!0,void 0===s&&(s=null),c.indexStartValue_=s,null!=o?(c.startNameSet_=!0,c.indexStartName_=o):(c.startNameSet_=!1,c.indexStartName_=""),c}function Tp(l,s,o){const c=l.copy();return c.endSet_=!0,void 0===s&&(s=null),c.indexEndValue_=s,void 0!==o?(c.endNameSet_=!0,c.indexEndName_=o):(c.endNameSet_=!1,c.indexEndName_=""),c}function yf(l,s){const o=l.copy();return o.index_=s,o}function gv(l){const s={};if(l.isDefault())return s;let o;if(l.index_===Rr?o="$priority":l.index_===jg?o="$value":l.index_===Xu?o="$key":((0,ue.hu)(l.index_ instanceof td,"Unrecognized index type!"),o=l.index_.toString()),s.orderBy=(0,ue.Wl)(o),l.startSet_){const c=l.startAfterSet_?"startAfter":"startAt";s[c]=(0,ue.Wl)(l.indexStartValue_),l.startNameSet_&&(s[c]+=","+(0,ue.Wl)(l.indexStartName_))}if(l.endSet_){const c=l.endBeforeSet_?"endBefore":"endAt";s[c]=(0,ue.Wl)(l.indexEndValue_),l.endNameSet_&&(s[c]+=","+(0,ue.Wl)(l.indexEndName_))}return l.limitSet_&&(l.isViewFromLeft()?s.limitToFirst=l.limit_:s.limitToLast=l.limit_),s}function jd(l){const s={};if(l.startSet_&&(s.sp=l.indexStartValue_,l.startNameSet_&&(s.sn=l.indexStartName_),s.sin=!l.startAfterSet_),l.endSet_&&(s.ep=l.indexEndValue_,l.endNameSet_&&(s.en=l.indexEndName_),s.ein=!l.endBeforeSet_),l.limitSet_){s.l=l.limit_;let o=l.viewFrom_;""===o&&(o=l.isViewFromLeft()?"l":"r"),s.vf=o}return l.index_!==Rr&&(s.i=l.index_.toString()),s}class Gr extends Ba{constructor(s,o,c,g){super(),this.repoInfo_=s,this.onDataUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=g,this.log_=Sd("p:rest:"),this.listens_={}}reportStats(s){throw new Error("Method not implemented.")}static getListenId_(s,o){return void 0!==o?"tag$"+o:((0,ue.hu)(s._queryParams.isDefault(),"should have a tag if it's not a default query."),s._path.toString())}listen(s,o,c,g){const E=s._path.toString();this.log_("Listen called for "+E+" "+s._queryIdentifier);const b=Gr.getListenId_(s,c),k={};this.listens_[b]=k;const j=gv(s._queryParams);this.restRequest_(E+".json",j,(q,_e)=>{let De=_e;if(404===q&&(De=null,q=null),null===q&&this.onDataUpdate_(E,De,!1,c),(0,ue.DV)(this.listens_,b)===k){let Ge;Ge=q?401===q?"permission_denied":"rest_error:"+q:"ok",g(Ge,null)}})}unlisten(s,o){const c=Gr.getListenId_(s,o);delete this.listens_[c]}get(s){const o=gv(s._queryParams),c=s._path.toString(),g=new ue.BH;return this.restRequest_(c+".json",o,(E,b)=>{let k=b;404===E&&(k=null,E=null),null===E?(this.onDataUpdate_(c,k,!1,null),g.resolve(k)):g.reject(new Error(k))}),g.promise}refreshAuthToken(s){}restRequest_(s,o={},c){return o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([g,E])=>{g&&g.accessToken&&(o.auth=g.accessToken),E&&E.token&&(o.ac=E.token);const b=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+s+"?ns="+this.repoInfo_.namespace+(0,ue.xO)(o);this.log_("Sending REST request for "+b);const k=new XMLHttpRequest;k.onreadystatechange=()=>{if(c&&4===k.readyState){this.log_("REST Response for "+b+" received. status:",k.status,"response:",k.responseText);let j=null;if(k.status>=200&&k.status<300){try{j=(0,ue.cI)(k.responseText)}catch{zs("Failed to parse JSON response for "+b+": "+k.responseText)}c(null,j)}else 401!==k.status&&404!==k.status&&zs("Got unsuccessful REST response for "+b+" Status: "+k.status),c(k.status);c=null}},k.open("GET",b,!0),k.send()})}}class Cp{constructor(){this.rootNode_=hr.EMPTY_NODE}getNode(s){return this.rootNode_.getChild(s)}updateSnapshot(s,o){this.rootNode_=this.rootNode_.updateChild(s,o)}}function _f(){return{value:null,children:new Map}}function xl(l,s,o){if(Ar(s))l.value=o,l.children.clear();else if(null!==l.value)l.value=l.value.updateChild(s,o);else{const c=ir(s);l.children.has(c)||l.children.set(c,_f()),xl(l.children.get(c),s=oi(s),o)}}function Th(l,s){if(Ar(s))return l.value=null,l.children.clear(),!0;if(null!==l.value){if(l.value.isLeafNode())return!1;{const o=l.value;return l.value=null,o.forEachChild(Rr,(c,g)=>{xl(l,new Vr(c),g)}),Th(l,s)}}if(l.children.size>0){const o=ir(s);return s=oi(s),l.children.has(o)&&Th(l.children.get(o),s)&&l.children.delete(o),0===l.children.size}return!0}function id(l,s,o){null!==l.value?o(s,l.value):function w_(l,s){l.children.forEach((o,c)=>{s(c,o)})}(l,(c,g)=>{id(g,new Vr(s.toString()+"/"+c),o)})}class Jm{constructor(s){this.collection_=s,this.last_=null}get(){const s=this.collection_.get(),o=Object.assign({},s);return this.last_&&Gs(this.last_,(c,g)=>{o[c]=o[c]-g}),this.last_=s,o}}class vf{constructor(s,o){this.server_=o,this.statsToReport_={},this.statsListener_=new Jm(s);const c=1e4+2e4*Math.random();wl(this.reportStats_.bind(this),Math.floor(c))}reportStats_(){const s=this.statsListener_.get(),o={};let c=!1;Gs(s,(g,E)=>{E>0&&(0,ue.r3)(this.statsToReport_,g)&&(o[g]=E,c=!0)}),c&&this.server_.reportStats(o),wl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ol=function(l){return l[l.OVERWRITE=0]="OVERWRITE",l[l.MERGE=1]="MERGE",l[l.ACK_USER_WRITE=2]="ACK_USER_WRITE",l[l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",l}(Ol||{});function Dp(l){return{fromUser:!1,fromServer:!0,queryId:l,tagged:!0}}class _a{constructor(s,o,c){this.path=s,this.affectedTree=o,this.revert=c,this.type=Ol.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(s){if(Ar(this.path)){if(null!=this.affectedTree.value)return(0,ue.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const o=this.affectedTree.subtree(new Vr(s));return new _a(_r(),o,this.revert)}}return(0,ue.hu)(ir(this.path)===s,"operationForChild called for unrelated child."),new _a(oi(this.path),this.affectedTree,this.revert)}}class bp{constructor(s,o){this.source=s,this.path=o,this.type=Ol.LISTEN_COMPLETE}operationForChild(s){return Ar(this.path)?new bp(this.source,_r()):new bp(this.source,oi(this.path))}}class su{constructor(s,o,c){this.source=s,this.path=o,this.snap=c,this.type=Ol.OVERWRITE}operationForChild(s){return Ar(this.path)?new su(this.source,_r(),this.snap.getImmediateChild(s)):new su(this.source,oi(this.path),this.snap)}}class gc{constructor(s,o,c){this.source=s,this.path=o,this.children=c,this.type=Ol.MERGE}operationForChild(s){if(Ar(this.path)){const o=this.children.subtree(new Vr(s));return o.isEmpty()?null:o.value?new su(this.source,_r(),o.value):new gc(this.source,_r(),o)}return(0,ue.hu)(ir(this.path)===s,"Can't get a merge for a child not on the path of the operation"),new gc(this.source,oi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $a{constructor(s,o,c){this.node_=s,this.fullyInitialized_=o,this.filtered_=c}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(s){if(Ar(s))return this.isFullyInitialized()&&!this.filtered_;const o=ir(s);return this.isCompleteForChild(o)}isCompleteForChild(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)}getNode(){return this.node_}}class Gg{constructor(s){this.query_=s,this.index_=this.query_._queryParams.getIndex()}}function el(l,s,o,c,g,E){const b=c.filter(k=>k.type===o);b.sort((k,j)=>function Kg(l,s,o){if(null==s.childName||null==o.childName)throw(0,ue.g5)("Should only compare child_ events.");const c=new mr(s.childName,s.snapshotNode),g=new mr(o.childName,o.snapshotNode);return l.index_.compare(c,g)}(l,k,j)),b.forEach(k=>{const j=function ty(l,s,o){return"value"===s.type||"child_removed"===s.type||(s.prevName=o.getPredecessorChildName(s.childName,s.snapshotNode,l.index_)),s}(l,k,E);g.forEach(q=>{q.respondsTo(k.type)&&s.push(q.createEvent(j,l.query_))})})}function qg(l,s){return{eventCache:l,serverCache:s}}function $d(l,s,o,c){return qg(new $a(s,o,c),l.serverCache)}function Zg(l,s,o,c){return qg(l.eventCache,new $a(s,o,c))}function od(l){return l.eventCache.isFullyInitialized()?l.eventCache.getNode():null}function Hd(l){return l.serverCache.isFullyInitialized()?l.serverCache.getNode():null}let ny;class ai{constructor(s,o=(()=>(ny||(ny=new qs(ac)),ny))()){this.value=s,this.children=o}static fromObject(s){let o=new ai(null);return Gs(s,(c,g)=>{o=o.set(new Vr(c),g)}),o}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(s,o){if(null!=this.value&&o(this.value))return{path:_r(),value:this.value};if(Ar(s))return null;{const c=ir(s),g=this.children.get(c);if(null!==g){const E=g.findRootMostMatchingPathAndValue(oi(s),o);return null!=E?{path:ys(new Vr(c),E.path),value:E.value}:null}return null}}findRootMostValueAndPath(s){return this.findRootMostMatchingPathAndValue(s,()=>!0)}subtree(s){if(Ar(s))return this;{const o=ir(s),c=this.children.get(o);return null!==c?c.subtree(oi(s)):new ai(null)}}set(s,o){if(Ar(s))return new ai(o,this.children);{const c=ir(s),E=(this.children.get(c)||new ai(null)).set(oi(s),o),b=this.children.insert(c,E);return new ai(this.value,b)}}remove(s){if(Ar(s))return this.children.isEmpty()?new ai(null):new ai(null,this.children);{const o=ir(s),c=this.children.get(o);if(c){const g=c.remove(oi(s));let E;return E=g.isEmpty()?this.children.remove(o):this.children.insert(o,g),null===this.value&&E.isEmpty()?new ai(null):new ai(this.value,E)}return this}}get(s){if(Ar(s))return this.value;{const o=ir(s),c=this.children.get(o);return c?c.get(oi(s)):null}}setTree(s,o){if(Ar(s))return o;{const c=ir(s),E=(this.children.get(c)||new ai(null)).setTree(oi(s),o);let b;return b=E.isEmpty()?this.children.remove(c):this.children.insert(c,E),new ai(this.value,b)}}fold(s){return this.fold_(_r(),s)}fold_(s,o){const c={};return this.children.inorderTraversal((g,E)=>{c[g]=E.fold_(ys(s,g),o)}),o(s,this.value,c)}findOnPath(s,o){return this.findOnPath_(s,_r(),o)}findOnPath_(s,o,c){const g=!!this.value&&c(o,this.value);if(g)return g;if(Ar(s))return null;{const E=ir(s),b=this.children.get(E);return b?b.findOnPath_(oi(s),ys(o,E),c):null}}foreachOnPath(s,o){return this.foreachOnPath_(s,_r(),o)}foreachOnPath_(s,o,c){if(Ar(s))return this;{this.value&&c(o,this.value);const g=ir(s),E=this.children.get(g);return E?E.foreachOnPath_(oi(s),ys(o,g),c):new ai(null)}}foreach(s){this.foreach_(_r(),s)}foreach_(s,o){this.children.inorderTraversal((c,g)=>{g.foreach_(ys(s,c),o)}),this.value&&o(s,this.value)}foreachChild(s){this.children.inorderTraversal((o,c)=>{c.value&&s(o,c.value)})}}class va{constructor(s){this.writeTree_=s}static empty(){return new va(new ai(null))}}function Ef(l,s,o){if(Ar(s))return new va(new ai(o));{const c=l.writeTree_.findRootMostValueAndPath(s);if(null!=c){const g=c.path;let E=c.value;const b=Va(g,s);return E=E.updateChild(b,o),new va(l.writeTree_.set(g,E))}{const g=new ai(o),E=l.writeTree_.setTree(s,g);return new va(E)}}}function Sp(l,s,o){let c=l;return Gs(o,(g,E)=>{c=Ef(c,ys(s,g),E)}),c}function Yg(l,s){if(Ar(s))return va.empty();{const o=l.writeTree_.setTree(s,new ai(null));return new va(o)}}function ry(l,s){return null!=Ch(l,s)}function Ch(l,s){const o=l.writeTree_.findRootMostValueAndPath(s);return null!=o?l.writeTree_.get(o.path).getChild(Va(o.path,s)):null}function T_(l){const s=[],o=l.writeTree_.value;return null!=o?o.isLeafNode()||o.forEachChild(Rr,(c,g)=>{s.push(new mr(c,g))}):l.writeTree_.children.inorderTraversal((c,g)=>{null!=g.value&&s.push(new mr(c,g.value))}),s}function mc(l,s){if(Ar(s))return l;{const o=Ch(l,s);return new va(null!=o?new ai(o):l.writeTree_.subtree(s))}}function yo(l){return l.writeTree_.isEmpty()}function Ap(l,s){return Rp(_r(),l.writeTree_,s)}function Rp(l,s,o){if(null!=s.value)return o.updateChild(l,s.value);{let c=null;return s.children.inorderTraversal((g,E)=>{".priority"===g?((0,ue.hu)(null!==E.value,"Priority writes must always be leaf nodes"),c=E.value):o=Rp(ys(l,g),E,o)}),!o.getChild(l).isEmpty()&&null!==c&&(o=o.updateChild(ys(l,".priority"),c)),o}}function Qg(l,s){return A_(s,l)}function Tf(l,s){if(l.snap)return iu(l.path,s);for(const o in l.children)if(l.children.hasOwnProperty(o)&&iu(ys(l.path,o),s))return!0;return!1}function Pp(l){return l.visible}function zd(l,s,o){let c=va.empty();for(let g=0;g<l.length;++g){const E=l[g];if(s(E)){const b=E.path;let k;if(E.snap)iu(o,b)?(k=Va(o,b),c=Ef(c,k,E.snap)):iu(b,o)&&(k=Va(b,o),c=Ef(c,_r(),E.snap.getChild(k)));else{if(!E.children)throw(0,ue.g5)("WriteRecord should have .snap or .children");if(iu(o,b))k=Va(o,b),c=Sp(c,k,E.children);else if(iu(b,o))if(k=Va(b,o),Ar(k))c=Sp(c,_r(),E.children);else{const j=(0,ue.DV)(E.children,ir(k));if(j){const q=j.getChild(oi(k));c=Ef(c,_r(),q)}}}}}return c}function xp(l,s,o,c,g){if(c||g){const E=mc(l.visibleWrites,s);return!g&&yo(E)?o:g||null!=o||ry(E,_r())?Ap(zd(l.allWrites,function(q){return(q.visible||g)&&(!c||!~c.indexOf(q.writeId))&&(iu(q.path,s)||iu(s,q.path))},s),o||hr.EMPTY_NODE):null}{const E=Ch(l.visibleWrites,s);if(null!=E)return E;{const b=mc(l.visibleWrites,s);return yo(b)?o:null!=o||ry(b,_r())?Ap(b,o||hr.EMPTY_NODE):null}}}function kp(l,s,o,c){return xp(l.writeTree,l.treePath,s,o,c)}function Jg(l,s){return function Dh(l,s,o){let c=hr.EMPTY_NODE;const g=Ch(l.visibleWrites,s);if(g)return g.isLeafNode()||g.forEachChild(Rr,(E,b)=>{c=c.updateImmediateChild(E,b)}),c;if(o){const E=mc(l.visibleWrites,s);return o.forEachChild(Rr,(b,k)=>{const j=Ap(mc(E,new Vr(b)),k);c=c.updateImmediateChild(b,j)}),T_(E).forEach(b=>{c=c.updateImmediateChild(b.name,b.node)}),c}return T_(mc(l.visibleWrites,s)).forEach(b=>{c=c.updateImmediateChild(b.name,b.node)}),c}(l.writeTree,l.treePath,s)}function Lp(l,s,o,c){return function bh(l,s,o,c,g){(0,ue.hu)(c||g,"Either existingEventSnap or existingServerSnap must exist");const E=ys(s,o);if(ry(l.visibleWrites,E))return null;{const b=mc(l.visibleWrites,E);return yo(b)?g.getChild(o):Ap(b,g.getChild(o))}}(l.writeTree,l.treePath,s,o,c)}function Fp(l,s){return function Op(l,s){return Ch(l.visibleWrites,s)}(l.writeTree,ys(l.treePath,s))}function sy(l,s,o){return function C_(l,s,o,c){const g=ys(s,o),E=Ch(l.visibleWrites,g);return null!=E?E:c.isCompleteForChild(o)?Ap(mc(l.visibleWrites,g),c.getNode().getImmediateChild(o)):null}(l.writeTree,l.treePath,s,o)}function S_(l,s){return A_(ys(l.treePath,s),l.writeTree)}function A_(l,s){return{treePath:l,writeTree:s}}class Gd{constructor(){this.changeMap=new Map}trackChildChange(s){const o=s.type,c=s.childName;(0,ue.hu)("child_added"===o||"child_changed"===o||"child_removed"===o,"Only child changes supported for tracking"),(0,ue.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");const g=this.changeMap.get(c);if(g){const E=g.type;if("child_added"===o&&"child_removed"===E)this.changeMap.set(c,nd(c,s.snapshotNode,g.snapshotNode));else if("child_removed"===o&&"child_added"===E)this.changeMap.delete(c);else if("child_removed"===o&&"child_changed"===E)this.changeMap.set(c,Vd(c,g.oldSnap));else if("child_changed"===o&&"child_added"===E)this.changeMap.set(c,Ih(c,s.snapshotNode));else{if("child_changed"!==o||"child_changed"!==E)throw(0,ue.g5)("Illegal combination of changes: "+s+" occurred after "+g);this.changeMap.set(c,nd(c,s.snapshotNode,g.oldSnap))}}else this.changeMap.set(c,s)}getChanges(){return Array.from(this.changeMap.values())}}const em=new class Wd{getCompleteChild(s){return null}getChildAfterChild(s,o,c){return null}};class Sh{constructor(s,o,c=null){this.writes_=s,this.viewCache_=o,this.optCompleteServerCache_=c}getCompleteChild(s){const o=this.viewCache_.eventCache;if(o.isCompleteForChild(s))return o.getNode().getImmediateChild(s);{const c=null!=this.optCompleteServerCache_?new $a(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sy(this.writes_,s,c)}}getChildAfterChild(s,o,c){const g=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hd(this.viewCache_),E=function b_(l,s,o,c,g,E){return function Xg(l,s,o,c,g,E,b){let k;const j=mc(l.visibleWrites,s),q=Ch(j,_r());if(null!=q)k=q;else{if(null==o)return[];k=Ap(j,o)}if(k=k.withIndex(b),k.isEmpty()||k.isLeafNode())return[];{const _e=[],De=b.getCompare(),Ge=E?k.getReverseIteratorFrom(c,b):k.getIteratorFrom(c,b);let ct=Ge.getNext();for(;ct&&_e.length<g;)0!==De(ct,c)&&_e.push(ct),ct=Ge.getNext();return _e}}(l.writeTree,l.treePath,s,o,c,g,E)}(this.writes_,g,o,1,c,s);return 0===E.length?null:E[0]}}function nm(l,s,o,c,g,E){const b=s.eventCache;if(null!=Fp(c,o))return s;{let k,j;if(Ar(o))if((0,ue.hu)(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){const q=Hd(s),De=Jg(c,q instanceof hr?q:hr.EMPTY_NODE);k=l.filter.updateFullNode(s.eventCache.getNode(),De,E)}else{const q=kp(c,Hd(s));k=l.filter.updateFullNode(s.eventCache.getNode(),q,E)}else{const q=ir(o);if(".priority"===q){(0,ue.hu)(1===Cu(o),"Can't have a priority with additional path components");const _e=b.getNode();j=s.serverCache.getNode();const De=Lp(c,o,_e,j);k=null!=De?l.filter.updatePriority(_e,De):b.getNode()}else{const _e=oi(o);let De;if(b.isCompleteForChild(q)){j=s.serverCache.getNode();const Ge=Lp(c,o,b.getNode(),j);De=null!=Ge?b.getNode().getImmediateChild(q).updateChild(_e,Ge):b.getNode().getImmediateChild(q)}else De=sy(c,q,s.serverCache);k=null!=De?l.filter.updateChild(b.getNode(),q,De,_e,g,E):b.getNode()}}return $d(s,k,b.isFullyInitialized()||Ar(o),l.filter.filtersNodes())}}function Bp(l,s,o,c,g,E,b,k){const j=s.serverCache;let q;const _e=b?l.filter:l.filter.getIndexedFilter();if(Ar(o))q=_e.updateFullNode(j.getNode(),c,null);else if(_e.filtersNodes()&&!j.isFiltered()){const ct=j.getNode().updateChild(o,c);q=_e.updateFullNode(j.getNode(),ct,null)}else{const ct=ir(o);if(!j.isCompleteForPath(o)&&Cu(o)>1)return s;const ht=oi(o),In=j.getNode().getImmediateChild(ct).updateChild(ht,c);q=".priority"===ct?_e.updatePriority(j.getNode(),In):_e.updateChild(j.getNode(),ct,In,ht,em,null)}const De=Zg(s,q,j.isFullyInitialized()||Ar(o),_e.filtersNodes());return nm(l,De,o,g,new Sh(g,De,E),k)}function rm(l,s,o,c,g,E,b){const k=s.eventCache;let j,q;const _e=new Sh(g,s,E);if(Ar(o))q=l.filter.updateFullNode(s.eventCache.getNode(),c,b),j=$d(s,q,!0,l.filter.filtersNodes());else{const De=ir(o);if(".priority"===De)q=l.filter.updatePriority(s.eventCache.getNode(),c),j=$d(s,q,k.isFullyInitialized(),k.isFiltered());else{const Ge=oi(o),ct=k.getNode().getImmediateChild(De);let ht;if(Ar(Ge))ht=c;else{const Wt=_e.getCompleteChild(De);ht=null!=Wt?".priority"===Qc(Ge)&&Wt.getChild(kd(Ge)).isEmpty()?Wt:Wt.updateChild(Ge,c):hr.EMPTY_NODE}j=ct.equals(ht)?s:$d(s,l.filter.updateChild(k.getNode(),De,ht,Ge,_e,b),k.isFullyInitialized(),l.filter.filtersNodes())}}return j}function oy(l,s){return l.eventCache.isCompleteForChild(s)}function im(l,s,o){return o.foreach((c,g)=>{s=s.updateChild(c,g)}),s}function kl(l,s,o,c,g,E,b,k){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;let q,j=s;q=Ar(o)?c:new ai(null).setTree(o,c);const _e=s.serverCache.getNode();return q.children.inorderTraversal((De,Ge)=>{if(_e.hasChild(De)){const ht=im(0,s.serverCache.getNode().getImmediateChild(De),Ge);j=Bp(l,j,new Vr(De),ht,g,E,b,k)}}),q.children.inorderTraversal((De,Ge)=>{const ct=!s.serverCache.isCompleteForChild(De)&&null===Ge.value;if(!_e.hasChild(De)&&!ct){const Wt=im(0,s.serverCache.getNode().getImmediateChild(De),Ge);j=Bp(l,j,new Vr(De),Wt,g,E,b,k)}}),j}class ay{constructor(s,o){this.query_=s,this.eventRegistrations_=[];const c=this.query_._queryParams,g=new pc(c.getIndex()),E=function E_(l){return l.loadsAllData()?new pc(l.getIndex()):l.hasLimit()?new pv(l):new Pl(l)}(c);this.processor_=function tm(l){return{filter:l}}(E);const b=o.serverCache,k=o.eventCache,j=g.updateFullNode(hr.EMPTY_NODE,b.getNode(),null),q=E.updateFullNode(hr.EMPTY_NODE,k.getNode(),null),_e=new $a(j,b.isFullyInitialized(),g.filtersNodes()),De=new $a(q,k.isFullyInitialized(),E.filtersNodes());this.viewCache_=qg(De,_e),this.eventGenerator_=new Gg(this.query_)}get query(){return this.query_}}function P_(l,s){const o=Hd(l.viewCache_);return o&&(l.query._queryParams.loadsAllData()||!Ar(s)&&!o.getImmediateChild(ir(s)).isEmpty())?o.getChild(s):null}function am(l){return 0===l.eventRegistrations_.length}function Kd(l,s,o){const c=[];if(o){(0,ue.hu)(null==s,"A cancel should cancel all event registrations.");const g=l.query._path;l.eventRegistrations_.forEach(E=>{const b=E.createCancelEvent(o,g);b&&c.push(b)})}if(s){let g=[];for(let E=0;E<l.eventRegistrations_.length;++E){const b=l.eventRegistrations_[E];if(b.matches(s)){if(s.hasAnyCallback()){g=g.concat(l.eventRegistrations_.slice(E+1));break}}else g.push(b)}l.eventRegistrations_=g}else l.eventRegistrations_=[];return c}function ly(l,s,o,c){s.type===Ol.MERGE&&null!==s.source.queryId&&((0,ue.hu)(Hd(l.viewCache_),"We should always have a full cache before handling merges"),(0,ue.hu)(od(l.viewCache_),"Missing event cache, even though we have a server cache"));const g=l.viewCache_,E=function R_(l,s,o,c,g){const E=new Gd;let b,k;if(o.type===Ol.OVERWRITE){const q=o;q.source.fromUser?b=rm(l,s,q.path,q.snap,c,g,E):((0,ue.hu)(q.source.fromServer,"Unknown source."),k=q.source.tagged||s.serverCache.isFiltered()&&!Ar(q.path),b=Bp(l,s,q.path,q.snap,c,g,k,E))}else if(o.type===Ol.MERGE){const q=o;q.source.fromUser?b=function Cf(l,s,o,c,g,E,b){let k=s;return c.foreach((j,q)=>{const _e=ys(o,j);oy(s,ir(_e))&&(k=rm(l,k,_e,q,g,E,b))}),c.foreach((j,q)=>{const _e=ys(o,j);oy(s,ir(_e))||(k=rm(l,k,_e,q,g,E,b))}),k}(l,s,q.path,q.children,c,g,E):((0,ue.hu)(q.source.fromServer,"Unknown source."),k=q.source.tagged||s.serverCache.isFiltered(),b=kl(l,s,q.path,q.children,c,g,k,E))}else if(o.type===Ol.ACK_USER_WRITE){const q=o;b=q.revert?function om(l,s,o,c,g,E){let b;if(null!=Fp(c,o))return s;{const k=new Sh(c,s,g),j=s.eventCache.getNode();let q;if(Ar(o)||".priority"===ir(o)){let _e;if(s.serverCache.isFullyInitialized())_e=kp(c,Hd(s));else{const De=s.serverCache.getNode();(0,ue.hu)(De instanceof hr,"serverChildren would be complete if leaf node"),_e=Jg(c,De)}q=l.filter.updateFullNode(j,_e,E)}else{const _e=ir(o);let De=sy(c,_e,s.serverCache);null==De&&s.serverCache.isCompleteForChild(_e)&&(De=j.getImmediateChild(_e)),q=null!=De?l.filter.updateChild(j,_e,De,oi(o),k,E):s.eventCache.getNode().hasChild(_e)?l.filter.updateChild(j,_e,hr.EMPTY_NODE,oi(o),k,E):j,q.isEmpty()&&s.serverCache.isFullyInitialized()&&(b=kp(c,Hd(s)),b.isLeafNode()&&(q=l.filter.updateFullNode(q,b,E)))}return b=s.serverCache.isFullyInitialized()||null!=Fp(c,_r()),$d(s,q,b,l.filter.filtersNodes())}}(l,s,q.path,c,g,E):function ad(l,s,o,c,g,E,b){if(null!=Fp(g,o))return s;const k=s.serverCache.isFiltered(),j=s.serverCache;if(null!=c.value){if(Ar(o)&&j.isFullyInitialized()||j.isCompleteForPath(o))return Bp(l,s,o,j.getNode().getChild(o),g,E,k,b);if(Ar(o)){let q=new ai(null);return j.getNode().forEachChild(Xu,(_e,De)=>{q=q.set(new Vr(_e),De)}),kl(l,s,o,q,g,E,k,b)}return s}{let q=new ai(null);return c.foreach((_e,De)=>{const Ge=ys(o,_e);j.isCompleteForPath(Ge)&&(q=q.set(_e,j.getNode().getChild(Ge)))}),kl(l,s,o,q,g,E,k,b)}}(l,s,q.path,q.affectedTree,c,g,E)}else{if(o.type!==Ol.LISTEN_COMPLETE)throw(0,ue.g5)("Unknown operation type: "+o.type);b=function sm(l,s,o,c,g){const E=s.serverCache;return nm(l,Zg(s,E.getNode(),E.isFullyInitialized()||Ar(o),E.isFiltered()),o,c,em,g)}(l,s,o.path,c,E)}const j=E.getChanges();return function M_(l,s,o){const c=s.eventCache;if(c.isFullyInitialized()){const g=c.getNode().isLeafNode()||c.getNode().isEmpty(),E=od(l);(o.length>0||!l.eventCache.isFullyInitialized()||g&&!c.getNode().equals(E)||!c.getNode().getPriority().equals(E.getPriority()))&&o.push(v_(od(s)))}}(s,b,j),{viewCache:b,changes:j}}(l.processor_,g,s,o,c);return function Up(l,s){(0,ue.hu)(s.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),(0,ue.hu)(s.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed")}(l.processor_,E.viewCache),(0,ue.hu)(E.viewCache.serverCache.isFullyInitialized()||!g.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),l.viewCache_=E.viewCache,_o(l,E.changes,E.viewCache.eventCache.getNode(),null)}function _o(l,s,o,c){return function Wg(l,s,o,c){const g=[],E=[];return s.forEach(b=>{"child_changed"===b.type&&l.index_.indexedValueChanged(b.oldSnap,b.snapshotNode)&&E.push(function rd(l,s){return{type:"child_moved",snapshotNode:s,childName:l}}(b.childName,b.snapshotNode))}),el(l,g,"child_removed",s,c,o),el(l,g,"child_added",s,c,o),el(l,g,"child_moved",E,c,o),el(l,g,"child_changed",s,c,o),el(l,g,"value",s,c,o),g}(l.eventGenerator_,s,o,c?[c]:l.eventRegistrations_)}let ud,ld;class bf{constructor(){this.views=new Map}}function um(l,s,o,c){const g=s.source.queryId;if(null!==g){const E=l.views.get(g);return(0,ue.hu)(null!=E,"SyncTree gave us an op for an invalid query."),ly(E,s,o,c)}{let E=[];for(const b of l.views.values())E=E.concat(ly(b,s,o,c));return E}}function x_(l,s,o,c,g){const b=l.views.get(s._queryIdentifier);if(!b){let k=kp(o,g?c:null),j=!1;k?j=!0:c instanceof hr?(k=Jg(o,c),j=!1):(k=hr.EMPTY_NODE,j=!1);const q=qg(new $a(k,j,!1),new $a(c,g,!1));return new ay(s,q)}return b}function O_(l){const s=[];for(const o of l.views.values())o.query._queryParams.loadsAllData()||s.push(o);return s}function Ll(l,s){let o=null;for(const c of l.views.values())o=o||P_(c,s);return o}function Ah(l,s){return s._queryParams.loadsAllData()?jp(l):l.views.get(s._queryIdentifier)}function yc(l,s){return null!=Ah(l,s)}function Du(l){return null!=jp(l)}function jp(l){for(const s of l.views.values())if(s.query._queryParams.loadsAllData())return s;return null}let Af=1;class $p{constructor(s){this.listenProvider_=s,this.syncPointTree_=new ai(null),this.pendingWriteTree_=function D_(){return{visibleWrites:va.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hy(l,s,o,c,g){return function iy(l,s,o,c,g){(0,ue.hu)(c>l.lastWriteId,"Stacking an older write on top of newer ones"),void 0===g&&(g=!0),l.allWrites.push({path:s,snap:o,writeId:c,visible:g}),g&&(l.visibleWrites=Ef(l.visibleWrites,s,o)),l.lastWriteId=c}(l.pendingWriteTree_,s,o,c,g),g?Rh(l,new su({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,o)):[]}function bu(l,s,o=!1){const c=function wf(l,s){for(let o=0;o<l.allWrites.length;o++){const c=l.allWrites[o];if(c.writeId===s)return c}return null}(l.pendingWriteTree_,s);if(function If(l,s){const o=l.allWrites.findIndex(k=>k.writeId===s);(0,ue.hu)(o>=0,"removeWrite called with nonexistent writeId.");const c=l.allWrites[o];l.allWrites.splice(o,1);let g=c.visible,E=!1,b=l.allWrites.length-1;for(;g&&b>=0;){const k=l.allWrites[b];k.visible&&(b>=o&&Tf(k,c.path)?g=!1:iu(c.path,k.path)&&(E=!0)),b--}return!!g&&(E?(function Np(l){l.visibleWrites=zd(l.allWrites,Pp,_r()),l.lastWriteId=l.allWrites.length>0?l.allWrites[l.allWrites.length-1].writeId:-1}(l),!0):(c.snap?l.visibleWrites=Yg(l.visibleWrites,c.path):Gs(c.children,j=>{l.visibleWrites=Yg(l.visibleWrites,ys(c.path,j))}),!0))}(l.pendingWriteTree_,s)){let E=new ai(null);return null!=c.snap?E=E.set(_r(),!0):Gs(c.children,b=>{E=E.set(new Vr(b),!0)}),Rh(l,new _a(c.path,E,o))}return[]}function Su(l,s,o){return Rh(l,new su({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,o))}function Hp(l,s,o,c,g=!1){const E=s._path,b=l.syncPointTree_.get(E);let k=[];if(b&&("default"===s._queryIdentifier||yc(b,s))){const j=function yv(l,s,o,c){const g=s._queryIdentifier,E=[];let b=[];const k=Du(l);if("default"===g)for(const[j,q]of l.views.entries())b=b.concat(Kd(q,o,c)),am(q)&&(l.views.delete(j),q.query._queryParams.loadsAllData()||E.push(q.query));else{const j=l.views.get(g);j&&(b=b.concat(Kd(j,o,c)),am(j)&&(l.views.delete(g),j.query._queryParams.loadsAllData()||E.push(j.query)))}return k&&!Du(l)&&E.push(new(function Sf(){return(0,ue.hu)(ud,"Reference.ts has not been loaded"),ud}())(s._repo,s._path)),{removed:E,events:b}}(b,s,o,c);(function cy(l){return 0===l.views.size})(b)&&(l.syncPointTree_=l.syncPointTree_.remove(E));const q=j.removed;if(k=j.events,!g){const _e=-1!==q.findIndex(Ge=>Ge._queryParams.loadsAllData()),De=l.syncPointTree_.findOnPath(E,(Ge,ct)=>Du(ct));if(_e&&!De){const Ge=l.syncPointTree_.subtree(E);if(!Ge.isEmpty()){const ct=function Yd(l){return l.fold((s,o,c)=>{if(o&&Du(o))return[jp(o)];{let g=[];return o&&(g=O_(o)),Gs(c,(E,b)=>{g=g.concat(b)}),g}})}(Ge);for(let ht=0;ht<ct.length;++ht){const Wt=ct[ht],In=Wt.query,Nn=gy(l,Wt);l.listenProvider_.startListening(tl(In),Wp(l,In),Nn.hashFn,Nn.onComplete)}}}!De&&q.length>0&&!c&&(_e?l.listenProvider_.stopListening(tl(s),null):q.forEach(Ge=>{const ct=l.queryToTagMap.get(Kp(Ge));l.listenProvider_.stopListening(tl(Ge),ct)}))}!function F_(l,s){for(let o=0;o<s.length;++o){const c=s[o];if(!c._queryParams.loadsAllData()){const g=Kp(c),E=l.queryToTagMap.get(g);l.queryToTagMap.delete(g),l.tagToQueryMap.delete(E)}}}(l,q)}return k}function zp(l,s,o,c){const g=my(l,c);if(null!=g){const E=dm(g),b=E.path,k=E.queryId,j=Va(b,s);return Rf(l,b,new su(Dp(k),j,o))}return[]}function Gp(l,s,o,c=!1){const g=s._path;let E=null,b=!1;l.syncPointTree_.foreachOnPath(g,(Ge,ct)=>{const ht=Va(Ge,g);E=E||Ll(ct,ht),b=b||Du(ct)});let j,k=l.syncPointTree_.get(g);k?(b=b||Du(k),E=E||Ll(k,_r())):(k=new bf,l.syncPointTree_=l.syncPointTree_.set(g,k)),null!=E?j=!0:(j=!1,E=hr.EMPTY_NODE,l.syncPointTree_.subtree(g).foreachChild((ct,ht)=>{const Wt=Ll(ht,_r());Wt&&(E=E.updateImmediateChild(ct,Wt))}));const q=yc(k,s);if(!q&&!s._queryParams.loadsAllData()){const Ge=Kp(s);(0,ue.hu)(!l.queryToTagMap.has(Ge),"View does not exist, but we have a tag");const ct=function yy(){return Af++}();l.queryToTagMap.set(Ge,ct),l.tagToQueryMap.set(ct,Ge)}let De=function mv(l,s,o,c,g,E){const b=x_(l,s,c,g,E);return l.views.has(s._queryIdentifier)||l.views.set(s._queryIdentifier,b),function Df(l,s){l.eventRegistrations_.push(s)}(b,o),function eE(l,s){const o=l.viewCache_.eventCache,c=[];return o.getNode().isLeafNode()||o.getNode().forEachChild(Rr,(E,b)=>{c.push(Ih(E,b))}),o.isFullyInitialized()&&c.push(v_(o.getNode())),_o(l,c,o.getNode(),s)}(b,o)}(k,s,o,Qg(l.pendingWriteTree_,g),E,j);if(!q&&!b&&!c){const Ge=Ah(k,s);De=De.concat(function hm(l,s,o){const c=s._path,g=Wp(l,s),E=gy(l,o),b=l.listenProvider_.startListening(tl(s),g,E.hashFn,E.onComplete),k=l.syncPointTree_.subtree(c);if(g)(0,ue.hu)(!Du(k.value),"If we're adding a query, it shouldn't be shadowed");else{const j=k.fold((q,_e,De)=>{if(!Ar(q)&&_e&&Du(_e))return[jp(_e).query];{let Ge=[];return _e&&(Ge=Ge.concat(O_(_e).map(ct=>ct.query))),Gs(De,(ct,ht)=>{Ge=Ge.concat(ht)}),Ge}});for(let q=0;q<j.length;++q){const _e=j[q];l.listenProvider_.stopListening(tl(_e),Wp(l,_e))}}return b}(l,s,Ge))}return De}function qd(l,s,o){const g=l.pendingWriteTree_,E=l.syncPointTree_.findOnPath(s,(b,k)=>{const q=Ll(k,Va(b,s));if(q)return q});return xp(g,s,E,o,!0)}function Rh(l,s){return Zd(s,l.syncPointTree_,null,Qg(l.pendingWriteTree_,_r()))}function Zd(l,s,o,c){if(Ar(l.path))return cm(l,s,o,c);{const g=s.get(_r());null==o&&null!=g&&(o=Ll(g,_r()));let E=[];const b=ir(l.path),k=l.operationForChild(b),j=s.children.get(b);if(j&&k){const q=o?o.getImmediateChild(b):null,_e=S_(c,b);E=E.concat(Zd(k,j,q,_e))}return g&&(E=E.concat(um(g,l,c,o))),E}}function cm(l,s,o,c){const g=s.get(_r());null==o&&null!=g&&(o=Ll(g,_r()));let E=[];return s.children.inorderTraversal((b,k)=>{const j=o?o.getImmediateChild(b):null,q=S_(c,b),_e=l.operationForChild(b);_e&&(E=E.concat(cm(_e,k,j,q)))}),g&&(E=E.concat(um(g,l,c,o))),E}function gy(l,s){const o=s.query,c=Wp(l,o);return{hashFn:()=>(function uy(l){return l.viewCache_.serverCache.getNode()}(s)||hr.EMPTY_NODE).hash(),onComplete:g=>{if("ok"===g)return c?function ar(l,s,o){const c=my(l,o);if(c){const g=dm(c),E=g.path,b=g.queryId,k=Va(E,s);return Rf(l,E,new bp(Dp(b),k))}return[]}(l,o._path,c):function L_(l,s){return Rh(l,new bp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s))}(l,o._path);{const E=function Po(l,s){let o="Unknown Error";"too_big"===l?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===l?o="Client doesn't have permission to access the desired data.":"unavailable"===l&&(o="The service is unavailable");const c=new Error(l+" at "+s._path.toString()+": "+o);return c.code=l.toUpperCase(),c}(g,o);return Hp(l,o,null,E)}}}}function Wp(l,s){const o=Kp(s);return l.queryToTagMap.get(o)}function Kp(l){return l._path.toString()+"$"+l._queryIdentifier}function my(l,s){return l.tagToQueryMap.get(s)}function dm(l){const s=l.indexOf("$");return(0,ue.hu)(-1!==s&&s<l.length-1,"Bad queryKey."),{queryId:l.substr(s+1),path:new Vr(l.substr(0,s))}}function Rf(l,s,o){const c=l.syncPointTree_.get(s);return(0,ue.hu)(c,"Missing sync point for query tag that we're tracking"),um(c,o,Qg(l.pendingWriteTree_,s),null)}function tl(l){return l._queryParams.loadsAllData()&&!l._queryParams.isDefault()?new(function dy(){return(0,ue.hu)(ld,"Reference.ts has not been loaded"),ld}())(l._repo,l._path):l}class _c{constructor(s){this.node_=s}getImmediateChild(s){const o=this.node_.getImmediateChild(s);return new _c(o)}node(){return this.node_}}class Mf{constructor(s,o){this.syncTree_=s,this.path_=o}getImmediateChild(s){const o=ys(this.path_,s);return new Mf(this.syncTree_,o)}node(){return qd(this.syncTree_,this.path_)}}const Mh=function(l){return(l=l||{}).timestamp=l.timestamp||(new Date).getTime(),l},qp=function(l,s,o){return l&&"object"==typeof l?((0,ue.hu)(".sv"in l,"Unexpected leaf node or priority contents"),"string"==typeof l[".sv"]?Zp(l[".sv"],s,o):"object"==typeof l[".sv"]?Qd(l[".sv"],s):void(0,ue.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2))):l},Zp=function(l,s,o){if("timestamp"===l)return o.timestamp;(0,ue.hu)(!1,"Unexpected server value: "+l)},Qd=function(l,s,o){l.hasOwnProperty("increment")||(0,ue.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2));const c=l.increment;"number"!=typeof c&&(0,ue.hu)(!1,"Unexpected increment value: "+c);const g=s.node();if((0,ue.hu)(null!==g&&typeof g<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!g.isLeafNode())return c;const b=g.getValue();return"number"!=typeof b?c:b+c},Fl=function(l,s,o,c){return vc(s,new Mf(o,l),c)},Nf=function(l,s,o){return vc(l,new _c(s),o)};function vc(l,s,o){const c=l.getPriority().val(),g=qp(c,s.getImmediateChild(".priority"),o);let E;if(l.isLeafNode()){const b=l,k=qp(b.getValue(),s,o);return k!==b.getValue()||g!==b.getPriority().val()?new ja(k,zi(g)):l}{const b=l;return E=b,g!==b.getPriority().val()&&(E=E.updatePriority(new ja(g))),b.forEachChild(Rr,(k,j)=>{const q=vc(j,s.getImmediateChild(k),o);q!==j&&(E=E.updateImmediateChild(k,q))}),E}}class Xd{constructor(s="",o=null,c={children:{},childCount:0}){this.name=s,this.parent=o,this.node=c}}function Yp(l,s){let o=s instanceof Vr?s:new Vr(s),c=l,g=ir(o);for(;null!==g;){const E=(0,ue.DV)(c.node.children,g)||{children:{},childCount:0};c=new Xd(g,c,E),o=oi(o),g=ir(o)}return c}function nl(l){return l.node.value}function fm(l,s){l.node.value=s,vy(l)}function U_(l){return l.node.childCount>0}function Pf(l,s){Gs(l.node.children,(o,c)=>{s(new Xd(o,l,c))})}function pm(l,s,o,c){o&&!c&&s(l),Pf(l,g=>{pm(g,s,!0,c)}),o&&c&&s(l)}function xf(l){return new Vr(null===l.parent?l.name:xf(l.parent)+"/"+l.name)}function vy(l){null!==l.parent&&function Ey(l,s,o){const c=function _y(l){return void 0===nl(l)&&!U_(l)}(o),g=(0,ue.r3)(l.node.children,s);c&&g?(delete l.node.children[s],l.node.childCount--,vy(l)):!c&&!g&&(l.node.children[s]=o.node,l.node.childCount++,vy(l))}(l.parent,l.name,l)}const Ha=/[\[\].#$\/\u0000-\u001F\u007F]/,_v=/[\[\].#$\u0000-\u001F\u007F]/,mm=10485760,wy=function(l){return"string"==typeof l&&0!==l.length&&!Ha.test(l)},Qp=function(l){return"string"==typeof l&&0!==l.length&&!_v.test(l)},Of=function(l){return null===l||"string"==typeof l||"number"==typeof l&&!sc(l)||l&&"object"==typeof l&&(0,ue.r3)(l,".sv")},Ul=function(l,s,o,c){c&&void 0===s||Xp((0,ue.gK)(l,"value"),s,o)},Xp=function(l,s,o){const c=o instanceof Vr?new d_(o,l):o;if(void 0===s)throw new Error(l+"contains undefined "+Rl(c));if("function"==typeof s)throw new Error(l+"contains a function "+Rl(c)+" with contents = "+s.toString());if(sc(s))throw new Error(l+"contains "+s.toString()+" "+Rl(c));if("string"==typeof s&&s.length>mm/3&&(0,ue.ug)(s)>mm)throw new Error(l+"contains a string greater than "+mm+" utf8 bytes "+Rl(c)+" ('"+s.substring(0,50)+"...')");if(s&&"object"==typeof s){let g=!1,E=!1;if(Gs(s,(b,k)=>{if(".value"===b)g=!0;else if(".priority"!==b&&".sv"!==b&&(E=!0,!wy(b)))throw new Error(l+" contains an invalid key ("+b+") "+Rl(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function _s(l,s){l.parts_.length>0&&(l.byteLength_+=1),l.parts_.push(s),l.byteLength_+=(0,ue.ug)(s),Fd(l)})(c,b),Xp(l,k,c),function pp(l){const s=l.parts_.pop();l.byteLength_-=(0,ue.ug)(s),l.parts_.length>0&&(l.byteLength_-=1)}(c)}),g&&E)throw new Error(l+' contains ".value" child '+Rl(c)+" in addition to actual children.")}},V_=function(l,s,o,c){if(c&&void 0===s)return;const g=(0,ue.gK)(l,"values");if(!s||"object"!=typeof s||Array.isArray(s))throw new Error(g+" must be an object containing the children to replace.");const E=[];Gs(s,(b,k)=>{const j=new Vr(b);if(Xp(g,k,ys(o,j)),".priority"===Qc(j)&&!Of(k))throw new Error(g+"contains an invalid value for '"+j.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");E.push(j)}),function(l,s){let o,c;for(o=0;o<s.length;o++){c=s[o];const E=Yu(c);for(let b=0;b<E.length;b++)if((".priority"!==E[b]||b!==E.length-1)&&!wy(E[b]))throw new Error(l+"contains an invalid key ("+E[b]+") in path "+c.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}s.sort(Gm);let g=null;for(o=0;o<s.length;o++){if(c=s[o],null!==g&&iu(g,c))throw new Error(l+"contains a path "+g.toString()+" that is ancestor of another path "+c.toString());g=c}}(g,E)},Ty=function(l,s,o){if(!o||void 0!==s){if(sc(s))throw new Error((0,ue.gK)(l,"priority")+"is "+s.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Of(s))throw new Error((0,ue.gK)(l,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cd=function(l,s,o,c){if(!(c&&void 0===o||wy(o)))throw new Error((0,ue.gK)(l,s)+'was an invalid key = "'+o+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Nh=function(l,s,o,c){if(!(c&&void 0===o||Qp(o)))throw new Error((0,ue.gK)(l,s)+'was an invalid path = "'+o+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Cy=function(l,s,o,c){o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),Nh(l,s,o,c)},rl=function(l,s){if(".info"===ir(s))throw new Error(l+" failed = Can't modify data under /.info/")},ym=function(l,s){const o=s.path.toString();if("string"!=typeof s.repoInfo.host||0===s.repoInfo.host.length||!wy(s.repoInfo.namespace)&&"localhost"!==s.repoInfo.host.split(":")[0]||0!==o.length&&!function(l){return l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Qp(l)}(o))throw new Error((0,ue.gK)(l,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class vv{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function za(l,s){let o=null;for(let c=0;c<s.length;c++){const g=s[c],E=g.getPath();null!==o&&!Ld(E,o.path)&&(l.eventLists_.push(o),o=null),null===o&&(o={events:[],path:E}),o.events.push(g)}o&&l.eventLists_.push(o)}function Jp(l,s,o){za(l,o),_m(l,c=>Ld(c,s))}function Ga(l,s,o){za(l,o),_m(l,c=>iu(c,s)||iu(s,c))}function _m(l,s){l.recursionDepth_++;let o=!0;for(let c=0;c<l.eventLists_.length;c++){const g=l.eventLists_[c];g&&(s(g.path)?(Ev(l.eventLists_[c]),l.eventLists_[c]=null):o=!1)}o&&(l.eventLists_=[]),l.recursionDepth_--}function Ev(l){for(let s=0;s<l.events.length;s++){const o=l.events[s];if(null!==o){l.events[s]=null;const c=o.getEventRunner();Bc&&Hs("event: "+o.toString()),tu(c)}}}const eg="repo_interrupt",j_=25;class kf{constructor(s,o,c,g){this.repoInfo_=s,this.forceRestClient_=o,this.authTokenProvider_=c,this.appCheckProvider_=g,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_f(),this.transactionQueueTree_=new Xd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function by(l){const o=l.infoData_.getNode(new Vr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+o}function Lf(l){return Mh({timestamp:by(l)})}function tg(l,s,o,c,g){l.dataUpdateCount++;const E=new Vr(s);o=l.interceptServerDataCallback_?l.interceptServerDataCallback_(s,o):o;let b=[];if(g)if(c){const j=(0,ue.UI)(o,q=>zi(q));b=function tE(l,s,o,c){const g=my(l,c);if(g){const E=dm(g),b=E.path,k=E.queryId,j=Va(b,s),q=ai.fromObject(o);return Rf(l,b,new gc(Dp(k),j,q))}return[]}(l.serverSyncTree_,E,j,g)}else{const j=zi(o);b=zp(l.serverSyncTree_,E,j,g)}else if(c){const j=(0,ue.UI)(o,q=>zi(q));b=function fy(l,s,o){const c=ai.fromObject(o);return Rh(l,new gc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,c))}(l.serverSyncTree_,E,j)}else{const j=zi(o);b=Su(l.serverSyncTree_,E,j)}let k=E;b.length>0&&(k=eh(l,E)),Ga(l.eventQueue_,k,b)}function ng(l,s){Ec(l,"connected",s),!1===s&&function dd(l){ig(l,"onDisconnectEvents");const s=Lf(l),o=_f();id(l.onDisconnect_,_r(),(g,E)=>{const b=Fl(g,E,l.serverSyncTree_,s);xl(o,g,b)});let c=[];id(o,_r(),(g,E)=>{c=c.concat(Su(l.serverSyncTree_,g,E));const b=og(l,g);eh(l,b)}),l.onDisconnect_=_f(),Ga(l.eventQueue_,_r(),c)}(l)}function Ec(l,s,o){const c=new Vr("/.info/"+s),g=zi(o);l.infoData_.updateSnapshot(c,g);const E=Su(l.infoSyncTree_,c,g);Ga(l.eventQueue_,c,E)}function Au(l){return l.nextWriteId_++}function Ay(l,s,o,c,g){ig(l,"set",{path:s.toString(),value:o,priority:c});const E=Lf(l),b=zi(o,c),k=qd(l.serverSyncTree_,s),j=Nf(b,k,E),q=Au(l),_e=hy(l.serverSyncTree_,s,j,q,!0);za(l.eventQueue_,_e),l.server_.put(s.toString(),b.val(!0),(Ge,ct)=>{const ht="ok"===Ge;ht||zs("set at "+s+" failed: "+Ge);const Wt=bu(l.serverSyncTree_,q,!ht);Ga(l.eventQueue_,s,Wt),wc(0,g,Ge,ct)});const De=og(l,s);eh(l,De),Ga(l.eventQueue_,De,[])}function Ry(l,s,o){l.server_.onDisconnectCancel(s.toString(),(c,g)=>{"ok"===c&&Th(l.onDisconnect_,s),wc(0,o,c,g)})}function $_(l,s,o,c){const g=zi(o);l.server_.onDisconnectPut(s.toString(),g.val(!0),(E,b)=>{"ok"===E&&xl(l.onDisconnect_,s,g),wc(0,c,E,b)})}function Jd(l,s,o){let c;c=".info"===ir(s._path)?Hp(l.infoSyncTree_,s,o):Hp(l.serverSyncTree_,s,o),Jp(l.eventQueue_,s._path,c)}function Ff(l){l.persistentConnection_&&l.persistentConnection_.interrupt(eg)}function ig(l,...s){let o="";l.persistentConnection_&&(o=l.persistentConnection_.id+":"),Hs(o,...s)}function wc(l,s,o,c){s&&tu(()=>{if("ok"===o)s(null);else{const g=(o||"error").toUpperCase();let E=g;c&&(E+=": "+c);const b=new Error(E);b.code=g,s(b)}})}function Bf(l,s,o){return qd(l.serverSyncTree_,s,o)||hr.EMPTY_NODE}function sg(l,s=l.transactionQueueTree_){if(s||Ph(l,s),nl(s)){const o=Em(l,s);(0,ue.hu)(o.length>0,"Sending zero length transaction queue"),o.every(g=>0===g.status)&&function My(l,s,o){const c=o.map(q=>q.currentWriteId),g=Bf(l,s,c);let E=g;const b=g.hash();for(let q=0;q<o.length;q++){const _e=o[q];(0,ue.hu)(0===_e.status,"tryToSendTransactionQueue_: items in queue should all be run."),_e.status=1,_e.retryCount++;const De=Va(s,_e.path);E=E.updateChild(De,_e.currentOutputSnapshotRaw)}const k=E.val(!0),j=s;l.server_.put(j.toString(),k,q=>{ig(l,"transaction put response",{path:j.toString(),status:q});let _e=[];if("ok"===q){const De=[];for(let Ge=0;Ge<o.length;Ge++)o[Ge].status=2,_e=_e.concat(bu(l.serverSyncTree_,o[Ge].currentWriteId)),o[Ge].onComplete&&De.push(()=>o[Ge].onComplete(null,!0,o[Ge].currentOutputSnapshotResolved)),o[Ge].unwatcher();Ph(l,Yp(l.transactionQueueTree_,s)),sg(l,l.transactionQueueTree_),Ga(l.eventQueue_,s,_e);for(let Ge=0;Ge<De.length;Ge++)tu(De[Ge])}else{if("datastale"===q)for(let De=0;De<o.length;De++)o[De].status=3===o[De].status?4:0;else{zs("transaction at "+j.toString()+" failed: "+q);for(let De=0;De<o.length;De++)o[De].status=4,o[De].abortReason=q}eh(l,s)}},b)}(l,xf(s),o)}else U_(s)&&Pf(s,o=>{sg(l,o)})}function eh(l,s){const o=Vf(l,s),c=xf(o);return function W_(l,s,o){if(0===s.length)return;const c=[];let g=[];const b=s.filter(k=>0===k.status).map(k=>k.currentWriteId);for(let k=0;k<s.length;k++){const j=s[k],q=Va(o,j.path);let De,_e=!1;if((0,ue.hu)(null!==q,"rerunTransactionsUnderNode_: relativePath should not be null."),4===j.status)_e=!0,De=j.abortReason,g=g.concat(bu(l.serverSyncTree_,j.currentWriteId,!0));else if(0===j.status)if(j.retryCount>=j_)_e=!0,De="maxretry",g=g.concat(bu(l.serverSyncTree_,j.currentWriteId,!0));else{const Ge=Bf(l,j.path,b);j.currentInputSnapshot=Ge;const ct=s[k].update(Ge.val());if(void 0!==ct){Xp("transaction failed: Data returned ",ct,j.path);let ht=zi(ct);"object"==typeof ct&&null!=ct&&(0,ue.r3)(ct,".priority")||(ht=ht.updatePriority(Ge.getPriority()));const In=j.currentWriteId,Nn=Lf(l),ur=Nf(ht,Ge,Nn);j.currentOutputSnapshotRaw=ht,j.currentOutputSnapshotResolved=ur,j.currentWriteId=Au(l),b.splice(b.indexOf(In),1),g=g.concat(hy(l.serverSyncTree_,j.path,ur,j.currentWriteId,j.applyLocally)),g=g.concat(bu(l.serverSyncTree_,In,!0))}else _e=!0,De="nodata",g=g.concat(bu(l.serverSyncTree_,j.currentWriteId,!0))}Ga(l.eventQueue_,o,g),g=[],_e&&(s[k].status=2,setTimeout(s[k].unwatcher,Math.floor(0)),s[k].onComplete&&c.push("nodata"===De?()=>s[k].onComplete(null,!1,s[k].currentInputSnapshot):()=>s[k].onComplete(new Error(De),!1,null)))}Ph(l,l.transactionQueueTree_);for(let k=0;k<c.length;k++)tu(c[k]);sg(l,l.transactionQueueTree_)}(l,Em(l,o),c),c}function Vf(l,s){let o,c=l.transactionQueueTree_;for(o=ir(s);null!==o&&void 0===nl(c);)c=Yp(c,o),o=ir(s=oi(s));return c}function Em(l,s){const o=[];return Ny(l,s,o),o.sort((c,g)=>c.order-g.order),o}function Ny(l,s,o){const c=nl(s);if(c)for(let g=0;g<c.length;g++)o.push(c[g]);Pf(s,g=>{Ny(l,g,o)})}function Ph(l,s){const o=nl(s);if(o){let c=0;for(let g=0;g<o.length;g++)2!==o[g].status&&(o[c]=o[g],c++);o.length=c,fm(s,o.length>0?o:void 0)}Pf(s,c=>{Ph(l,c)})}function og(l,s){const o=xf(Vf(l,s)),c=Yp(l.transactionQueueTree_,s);return function gm(l,s,o){let c=o?l:l.parent;for(;null!==c;){if(s(c))return!0;c=c.parent}}(c,g=>{ag(l,g)}),ag(l,c),pm(c,g=>{ag(l,g)}),o}function ag(l,s){const o=nl(s);if(o){const c=[];let g=[],E=-1;for(let b=0;b<o.length;b++)3===o[b].status||(1===o[b].status?((0,ue.hu)(E===b-1,"All SENT items should be at beginning of queue."),E=b,o[b].status=3,o[b].abortReason="set"):((0,ue.hu)(0===o[b].status,"Unexpected transaction status in abort"),o[b].unwatcher(),g=g.concat(bu(l.serverSyncTree_,o[b].currentWriteId,!0)),o[b].onComplete&&c.push(o[b].onComplete.bind(null,new Error("set"),!1,null))));-1===E?fm(s,void 0):o.length=E+1,Ga(l.eventQueue_,xf(s),g);for(let b=0;b<c.length;b++)tu(c[b])}}const Py=function(l,s){const o=xy(l),c=o.namespace;return"firebase.com"===o.domain&&Tu(o.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==o.domain&&Tu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),o.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Nd(o.host,o.secure,c,"ws"===o.scheme||"wss"===o.scheme,s,"",c!==o.subdomain),path:new Vr(o.pathString)}},xy=function(l){let s="",o="",c="",g="",E="",b=!0,k="https",j=443;if("string"==typeof l){let q=l.indexOf("//");q>=0&&(k=l.substring(0,q-1),l=l.substring(q+2));let _e=l.indexOf("/");-1===_e&&(_e=l.length);let De=l.indexOf("?");-1===De&&(De=l.length),s=l.substring(0,Math.min(_e,De)),_e<De&&(g=function ug(l){let s="";const o=l.split("/");for(let c=0;c<o.length;c++)if(o[c].length>0){let g=o[c];try{g=decodeURIComponent(g.replace(/\+/g," "))}catch{}s+="/"+g}return s}(l.substring(_e,De)));const Ge=function lg(l){const s={};"?"===l.charAt(0)&&(l=l.substring(1));for(const o of l.split("&")){if(0===o.length)continue;const c=o.split("=");2===c.length?s[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):zs(`Invalid query segment '${o}' in query '${l}'`)}return s}(l.substring(Math.min(l.length,De)));q=s.indexOf(":"),q>=0?(b="https"===k||"wss"===k,j=parseInt(s.substring(q+1),10)):q=s.length;const ct=s.slice(0,q);if("localhost"===ct.toLowerCase())o="localhost";else if(ct.split(".").length<=2)o=ct;else{const ht=s.indexOf(".");c=s.substring(0,ht).toLowerCase(),o=s.substring(ht+1),E=c}"ns"in Ge&&(E=Ge.ns)}return{host:s,port:j,domain:o,subdomain:c,secure:b,scheme:k,pathString:g,namespace:E}},Oy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jf=function(){let l=0;const s=[];return function(o){const c=o===l;let g;l=o;const E=new Array(8);for(g=7;g>=0;g--)E[g]=Oy.charAt(o%64),o=Math.floor(o/64);(0,ue.hu)(0===o,"Cannot push at time == 0");let b=E.join("");if(c){for(g=11;g>=0&&63===s[g];g--)s[g]=0;s[g]++}else for(g=0;g<12;g++)s[g]=Math.floor(64*Math.random());for(g=0;g<12;g++)b+=Oy.charAt(s[g]);return(0,ue.hu)(20===b.length,"nextPushId: Length should be 20."),b}}();class ky{constructor(s,o,c,g){this.eventType=s,this.eventRegistration=o,this.snapshot=c,this.prevName=g}getPath(){const s=this.snapshot.ref;return"value"===this.eventType?s._path:s.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ue.Wl)(this.snapshot.exportVal())}}class cg{constructor(s,o,c){this.eventRegistration=s,this.error=o,this.path=c}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ly{constructor(s,o){this.snapshotCallback=s,this.cancelCallback=o}onValue(s,o){this.snapshotCallback.call(null,s,o)}onCancel(s){return(0,ue.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,s)}get hasCancelCallback(){return!!this.cancelCallback}matches(s){return this.snapshotCallback===s.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===s.snapshotCallback.userCallback&&this.snapshotCallback.context===s.snapshotCallback.context}}class Fy{constructor(s,o){this._repo=s,this._path=o}cancel(){const s=new ue.BH;return Ry(this._repo,this._path,s.wrapCallback(()=>{})),s.promise}remove(){rl("OnDisconnect.remove",this._path);const s=new ue.BH;return $_(this._repo,this._path,null,s.wrapCallback(()=>{})),s.promise}set(s){rl("OnDisconnect.set",this._path),Ul("OnDisconnect.set",s,this._path,!1);const o=new ue.BH;return $_(this._repo,this._path,s,o.wrapCallback(()=>{})),o.promise}setWithPriority(s,o){rl("OnDisconnect.setWithPriority",this._path),Ul("OnDisconnect.setWithPriority",s,this._path,!1),Ty("OnDisconnect.setWithPriority",o,!1);const c=new ue.BH;return function H_(l,s,o,c,g){const E=zi(o,c);l.server_.onDisconnectPut(s.toString(),E.val(!0),(b,k)=>{"ok"===b&&xl(l.onDisconnect_,s,E),wc(0,g,b,k)})}(this._repo,this._path,s,o,c.wrapCallback(()=>{})),c.promise}update(s){rl("OnDisconnect.update",this._path),V_("OnDisconnect.update",s,this._path,!1);const o=new ue.BH;return function z_(l,s,o,c){if((0,ue.xb)(o))return Hs("onDisconnect().update() called with empty data.  Don't do anything."),void wc(0,c,"ok",void 0);l.server_.onDisconnectMerge(s.toString(),o,(g,E)=>{"ok"===g&&Gs(o,(b,k)=>{const j=zi(k);xl(l.onDisconnect_,ys(s,b),j)}),wc(0,c,g,E)})}(this._repo,this._path,s,o.wrapCallback(()=>{})),o.promise}}class Wa{constructor(s,o,c,g){this._repo=s,this._path=o,this._queryParams=c,this._orderByCalled=g}get key(){return Ar(this._path)?null:Qc(this._path)}get ref(){return new au(this._repo,this._path)}get _queryIdentifier(){const s=jd(this._queryParams),o=jc(s);return"{}"===o?"default":o}get _queryObject(){return jd(this._queryParams)}isEqual(s){if(!((s=(0,ue.m9)(s))instanceof Wa))return!1;const o=this._repo===s._repo,c=Ld(this._path,s._path);return o&&c&&this._queryIdentifier===s._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function fp(l){let s="";for(let o=l.pieceNum_;o<l.pieces_.length;o++)""!==l.pieces_[o]&&(s+="/"+encodeURIComponent(String(l.pieces_[o])));return s||"/"}(this._path)}}function wm(l,s){if(!0===l._orderByCalled)throw new Error(s+": You can't combine multiple orderBy calls.")}function ou(l){let s=null,o=null;if(l.hasStart()&&(s=l.getIndexStartValue()),l.hasEnd()&&(o=l.getIndexEndValue()),l.getIndex()===Xu){const c="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",g="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(l.hasStart()){if(l.getIndexStartName()!==Wu)throw new Error(c);if("string"!=typeof s)throw new Error(g)}if(l.hasEnd()){if(l.getIndexEndName()!==El)throw new Error(c);if("string"!=typeof o)throw new Error(g)}}else if(l.getIndex()===Rr){if(null!=s&&!Of(s)||null!=o&&!Of(o))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ue.hu)(l.getIndex()instanceof td||l.getIndex()===jg,"unknown index type."),null!=s&&"object"==typeof s||null!=o&&"object"==typeof o)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $f(l){if(l.hasStart()&&l.hasEnd()&&l.hasLimit()&&!l.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class au extends Wa{constructor(s,o){super(s,o,new Ip,!1)}get parent(){const s=kd(this._path);return null===s?null:new au(this._repo,s)}get root(){let s=this;for(;null!==s.parent;)s=s.parent;return s}}class hd{constructor(s,o,c){this._node=s,this.ref=o,this._index=c}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(s){const o=new Vr(s),c=fd(this.ref,s);return new hd(this._node.getChild(o),c,Rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(s){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(c,g)=>s(new hd(g,fd(this.ref,c),Rr)))}hasChild(s){const o=new Vr(s);return!this._node.getChild(o).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Uy(l,s){return(l=(0,ue.m9)(l))._checkNotDeleted("ref"),void 0!==s?fd(l._root,s):l._root}function Im(l,s){(l=(0,ue.m9)(l))._checkNotDeleted("refFromURL");const o=Py(s,l._repo.repoInfo_.nodeAdmin);ym("refFromURL",o);const c=o.repoInfo;return!l._repo.repoInfo_.isCustomHost()&&c.host!==l._repo.repoInfo_.host&&Tu("refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+l._repo.repoInfo_.host+")"),Uy(l,o.path.toString())}function fd(l,s){return null===ir((l=(0,ue.m9)(l))._path)?Cy("child","path",s,!1):Nh("child","path",s,!1),new au(l._repo,ys(l._path,s))}function Hf(l,s){l=(0,ue.m9)(l),rl("set",l._path),Ul("set",s,l._path,!1);const o=new ue.BH;return Ay(l._repo,l._path,s,null,o.wrapCallback(()=>{})),o.promise}function jy(l,s){V_("update",s,l._path,!1);const o=new ue.BH;return function rg(l,s,o,c){ig(l,"update",{path:s.toString(),value:o});let g=!0;const E=Lf(l),b={};if(Gs(o,(k,j)=>{g=!1,b[k]=Fl(ys(s,k),zi(j),l.serverSyncTree_,E)}),g)Hs("update() called with empty data.  Don't do anything."),wc(0,c,"ok",void 0);else{const k=Au(l),j=function lm(l,s,o,c){!function Mp(l,s,o,c){(0,ue.hu)(c>l.lastWriteId,"Stacking an older merge on top of newer ones"),l.allWrites.push({path:s,children:o,writeId:c,visible:!0}),l.visibleWrites=Sp(l.visibleWrites,s,o),l.lastWriteId=c}(l.pendingWriteTree_,s,o,c);const g=ai.fromObject(o);return Rh(l,new gc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,g))}(l.serverSyncTree_,s,b,k);za(l.eventQueue_,j),l.server_.merge(s.toString(),o,(q,_e)=>{const De="ok"===q;De||zs("update at "+s+" failed: "+q);const Ge=bu(l.serverSyncTree_,k,!De),ct=Ge.length>0?eh(l,s):s;Ga(l.eventQueue_,ct,Ge),wc(0,c,q,_e)}),Gs(o,q=>{const _e=og(l,ys(s,q));eh(l,_e)}),Ga(l.eventQueue_,s,[])}}(l._repo,l._path,s,o.wrapCallback(()=>{})),o.promise}function dg(l){l=(0,ue.m9)(l);const s=new Ly(()=>{}),o=new Ic(s);return function Sy(l,s,o){const c=function py(l,s){const o=s._path;let c=null;l.syncPointTree_.foreachOnPath(o,(q,_e)=>{const De=Va(q,o);c=c||Ll(_e,De)});let g=l.syncPointTree_.get(o);g?c=c||Ll(g,_r()):(g=new bf,l.syncPointTree_=l.syncPointTree_.set(o,g));const E=null!=c,b=E?new $a(c,!0,!1):null;return function N_(l){return od(l.viewCache_)}(x_(g,s,Qg(l.pendingWriteTree_,s._path),E?b.getNode():hr.EMPTY_NODE,E))}(l.serverSyncTree_,s);return null!=c?Promise.resolve(c):l.server_.get(s).then(g=>{const E=zi(g).withIndex(s._queryParams.getIndex());let b;if(Gp(l.serverSyncTree_,s,o,!0),s._queryParams.loadsAllData())b=Su(l.serverSyncTree_,s._path,E);else{const k=Wp(l.serverSyncTree_,s);b=zp(l.serverSyncTree_,s._path,E,k)}return Ga(l.eventQueue_,s._path,b),Hp(l.serverSyncTree_,s,o,null,!0),E},g=>(ig(l,"get for query "+(0,ue.Wl)(s)+" failed: "+g),Promise.reject(new Error(g))))}(l._repo,l,o).then(c=>new hd(c,new au(l._repo,l._path),l._queryParams.getIndex()))}class Ic{constructor(s){this.callbackContext=s}respondsTo(s){return"value"===s}createEvent(s,o){const c=o._queryParams.getIndex();return new ky("value",this,new hd(s.snapshotNode,new au(o._repo,o._path),c))}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,null)}createCancelEvent(s,o){return this.callbackContext.hasCancelCallback?new cg(this,s,o):null}matches(s){return s instanceof Ic&&(!s.callbackContext||!this.callbackContext||s.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Dm{constructor(s,o){this.eventType=s,this.callbackContext=o}respondsTo(s){let o="children_added"===s?"child_added":s;return o="children_removed"===o?"child_removed":o,this.eventType===o}createCancelEvent(s,o){return this.callbackContext.hasCancelCallback?new cg(this,s,o):null}createEvent(s,o){(0,ue.hu)(null!=s.childName,"Child events should have a childName.");const c=fd(new au(o._repo,o._path),s.childName),g=o._queryParams.getIndex();return new ky(s.type,this,new hd(s.snapshotNode,c,g),s.prevName)}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,s.prevName)}matches(s){return s instanceof Dm&&this.eventType===s.eventType&&(!this.callbackContext||!s.callbackContext||this.callbackContext.matches(s.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function hg(l,s,o,c,g){let E;if("object"==typeof c&&(E=void 0,g=c),"function"==typeof c&&(E=c),g&&g.onlyOnce){const j=o,q=(_e,De)=>{Jd(l._repo,l,k),j(_e,De)};q.userCallback=o.userCallback,q.context=o.context,o=q}const b=new Ly(o,E||void 0),k="value"===s?new Ic(b):new Dm(s,b);return function wv(l,s,o){let c;c=".info"===ir(s._path)?Gp(l.infoSyncTree_,s,o):Gp(l.serverSyncTree_,s,o),Jp(l.eventQueue_,s._path,c)}(l._repo,l,k),()=>Jd(l._repo,l,k)}function fg(l,s,o,c){return hg(l,"value",s,o,c)}function $y(l,s,o,c){return hg(l,"child_added",s,o,c)}function Bl(l,s,o,c){return hg(l,"child_changed",s,o,c)}function xh(l,s,o,c){return hg(l,"child_moved",s,o,c)}function ea(l,s,o,c){return hg(l,"child_removed",s,o,c)}function th(l,s,o){let c=null;const g=o?new Ly(o):null;"value"===s?c=new Ic(g):s&&(c=new Dm(s,g)),Jd(l._repo,l,c)}class uu{}class Ru extends uu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){Ul("endAt",this._value,s._path,!0);const o=Tp(s._queryParams,this._value,this._key);if($f(o),ou(o),s._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wa(s._repo,s._path,o,s._orderByCalled)}}class Oh extends uu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){Ul("endBefore",this._value,s._path,!1);const o=function Xm(l,s,o){let c;return c=Tp(l,s,l.index_===Xu||o?o:Wu),c.endBeforeSet_=!0,c}(s._queryParams,this._value,this._key);if($f(o),ou(o),s._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wa(s._repo,s._path,o,s._orderByCalled)}}class rh extends uu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){Ul("startAt",this._value,s._path,!0);const o=Hg(s._queryParams,this._value,this._key);if($f(o),ou(o),s._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Wa(s._repo,s._path,o,s._orderByCalled)}}class Lh extends uu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){Ul("startAfter",this._value,s._path,!1);const o=function Qm(l,s,o){let c;return c=Hg(l,s,l.index_===Xu||o?o:El),c.startAfterSet_=!0,c}(s._queryParams,this._value,this._key);if($f(o),ou(o),s._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Wa(s._repo,s._path,o,s._orderByCalled)}}class Dr extends uu{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wa(s._repo,s._path,function $g(l,s){const o=l.copy();return o.limitSet_=!0,o.limit_=s,o.viewFrom_="l",o}(s._queryParams,this._limit),s._orderByCalled)}}class Uh extends uu{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wa(s._repo,s._path,function Ym(l,s){const o=l.copy();return o.limitSet_=!0,o.limit_=s,o.viewFrom_="r",o}(s._queryParams,this._limit),s._orderByCalled)}}class Hy extends uu{constructor(s){super(),this._path=s}_apply(s){wm(s,"orderByChild");const o=new Vr(this._path);if(Ar(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const c=new td(o),g=yf(s._queryParams,c);return ou(g),new Wa(s._repo,s._path,g,!0)}}class ko extends uu{_apply(s){wm(s,"orderByKey");const o=yf(s._queryParams,Xu);return ou(o),new Wa(s._repo,s._path,o,!0)}}class zy extends uu{_apply(s){wm(s,"orderByPriority");const o=yf(s._queryParams,Rr);return ou(o),new Wa(s._repo,s._path,o,!0)}}class pg extends uu{_apply(s){wm(s,"orderByValue");const o=yf(s._queryParams,jg);return ou(o),new Wa(s._repo,s._path,o,!0)}}class gg extends uu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){if(Ul("equalTo",this._value,s._path,!1),s._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(s._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ru(this._value,this._key)._apply(new rh(this._value,this._key)._apply(s))}}function il(l,...s){let o=(0,ue.m9)(l);for(const c of s)o=c._apply(o);return o}(function Vp(l){(0,ue.hu)(!ud,"__referenceConstructor has already been defined"),ud=l})(au),function k_(l){(0,ue.hu)(!ld,"__referenceConstructor has already been defined"),ld=l}(au);const Wy={};function Cv(l,s,o,c,g){let E=c||l.options.databaseURL;void 0===E&&(l.options.projectId||Tu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hs("Using default host for project ",l.options.projectId),E=`${l.options.projectId}-default-rtdb.firebaseio.com`);let j,q,b=Py(E,g),k=b.repoInfo;typeof process<"u"&&process.env&&(q=process.env.FIREBASE_DATABASE_EMULATOR_HOST),q?(j=!0,E=`http://${q}?ns=${k.namespace}`,b=Py(E,g),k=b.repoInfo):j=!b.repoInfo.secure;const _e=g&&j?new Ua(Ua.OWNER):new Fg(l.name,l.options,s);ym("Invalid Firebase Database URL",b),Ar(b.path)||Tu("Database URL must point to the root of a Firebase Database (not including a child path).");const De=function q_(l,s,o,c){let g=Wy[s.name];g||(g={},Wy[s.name]=g);let E=g[l.toURLString()];return E&&Tu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),E=new kf(l,false,o,c),g[l.toURLString()]=E,E}(k,l,_e,new yh(l.name,o));return new bv(De,l)}class bv{constructor(s,o){this._repoInternal=s,this.app=o,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Dy(l,s,o){if(l.stats_=Jo(l.repoInfo_),l.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)l.server_=new Gr(l.repoInfo_,(c,g,E,b)=>{tg(l,c,g,E,b)},l.authTokenProvider_,l.appCheckProvider_),setTimeout(()=>ng(l,!0),0);else{if(typeof o<"u"&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ue.Wl)(o)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}l.persistentConnection_=new Bd(l.repoInfo_,s,(c,g,E,b)=>{tg(l,c,g,E,b)},c=>{ng(l,c)},c=>{!function vm(l,s){Gs(s,(o,c)=>{Ec(l,o,c)})}(l,c)},l.authTokenProvider_,l.appCheckProvider_,o),l.server_=l.persistentConnection_}l.authTokenProvider_.addTokenChangeListener(c=>{l.server_.refreshAuthToken(c)}),l.appCheckProvider_.addTokenChangeListener(c=>{l.server_.refreshAppCheckToken(c.token)}),l.statsReporter_=function xd(l,s){const o=l.toString();return Gc[o]||(Gc[o]=s()),Gc[o]}(l.repoInfo_,()=>new vf(l.stats_,l.server_)),l.infoData_=new Cp,l.infoSyncTree_=new $p({startListening:(c,g,E,b)=>{let k=[];const j=l.infoData_.getNode(c._path);return j.isEmpty()||(k=Su(l.infoSyncTree_,c._path,j),setTimeout(()=>{b("ok")},0)),k},stopListening:()=>{}}),Ec(l,"connected",!1),l.serverSyncTree_=new $p({startListening:(c,g,E,b)=>(l.server_.listen(c,E,g,(k,j)=>{const q=b(k,j);Ga(l.eventQueue_,c._path,q)}),[]),stopListening:(c,g)=>{l.server_.unlisten(c,g)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new au(this._repo,_r())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function oo(l,s){const o=Wy[s];(!o||o[l.key]!==l)&&Tu(`Database ${s}(${l.repoInfo_}) has already been deleted.`),Ff(l),delete o[l.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(s){null===this._rootInternal&&Tu("Cannot call "+s+" on a deleted database.")}}function mg(){hp.IS_TRANSPORT_INITIALIZED&&zs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function yg(){mg(),ya.forceDisallow()}function Ky(){mg(),Zc.forceDisallow(),ya.forceAllow()}function Sv(l,s){vl(l,s)}const _g={".sv":"timestamp"};class gd{constructor(s,o){this.committed=s,this.snapshot=o}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Bd.prototype.simpleListen=function(l,s){this.sendRequest("q",{p:l},s)},Bd.prototype.echo=function(l,s){this.sendRequest("echo",{d:l},s)},function Gf(l){nc(bo.SDK_VERSION),(0,bo._registerComponent)(new Zo.wA("database",(s,{instanceIdentifier:o})=>Cv(s.getProvider("app").getImmediate(),s.getProvider("auth-internal"),s.getProvider("app-check-internal"),o),"PUBLIC").setMultipleInstances(!0)),(0,bo.registerVersion)(Dd,"0.14.4",l),(0,bo.registerVersion)(Dd,"0.14.4","esm2017")}();const Q_=new Fc.Yd("@firebase/database-compat"),vg=function(l){Q_.warn("FIREBASE WARNING: "+l)};class Bh{constructor(s){this._delegate=s}cancel(s){(0,ue.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ue.Wj)("OnDisconnect.cancel","onComplete",s,!0);const o=this._delegate.cancel();return s&&o.then(()=>s(null),c=>s(c)),o}remove(s){(0,ue.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ue.Wj)("OnDisconnect.remove","onComplete",s,!0);const o=this._delegate.remove();return s&&o.then(()=>s(null),c=>s(c)),o}set(s,o){(0,ue.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ue.Wj)("OnDisconnect.set","onComplete",o,!0);const c=this._delegate.set(s);return o&&c.then(()=>o(null),g=>o(g)),c}setWithPriority(s,o,c){(0,ue.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ue.Wj)("OnDisconnect.setWithPriority","onComplete",c,!0);const g=this._delegate.setWithPriority(s,o);return c&&g.then(()=>c(null),E=>c(E)),g}update(s,o){if((0,ue.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(s)){const g={};for(let E=0;E<s.length;++E)g[""+E]=s[E];s=g,vg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ue.Wj)("OnDisconnect.update","onComplete",o,!0);const c=this._delegate.update(s);return o&&c.then(()=>o(null),g=>o(g)),c}}class Rm{constructor(s,o){this.committed=s,this.snapshot=o}toJSON(){return(0,ue.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Mu{constructor(s,o){this._database=s,this._delegate=o}val(){return(0,ue.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ue.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ue.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ue.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(s){return(0,ue.Dv)("DataSnapshot.child",0,1,arguments.length),s=String(s),Nh("DataSnapshot.child","path",s,!1),new Mu(this._database,this._delegate.child(s))}hasChild(s){return(0,ue.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Nh("DataSnapshot.hasChild","path",s,!1),this._delegate.hasChild(s)}getPriority(){return(0,ue.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(s){return(0,ue.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ue.Wj)("DataSnapshot.forEach","action",s,!1),this._delegate.forEach(o=>s(new Mu(this._database,o)))}hasChildren(){return(0,ue.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ue.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ue.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ea(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class vo{constructor(s,o){this.database=s,this._delegate=o}on(s,o,c,g){var E;(0,ue.Dv)("Query.on",2,4,arguments.length),(0,ue.Wj)("Query.on","callback",o,!1);const b=vo.getCancelAndContextArgs_("Query.on",c,g),k=(q,_e)=>{o.call(b.context,new Mu(this.database,q),_e)};k.userCallback=o,k.context=b.context;const j=null===(E=b.cancel)||void 0===E?void 0:E.bind(b.context);switch(s){case"value":return fg(this._delegate,k,j),o;case"child_added":return $y(this._delegate,k,j),o;case"child_removed":return ea(this._delegate,k,j),o;case"child_changed":return Bl(this._delegate,k,j),o;case"child_moved":return xh(this._delegate,k,j),o;default:throw new Error((0,ue.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(s,o,c){if((0,ue.Dv)("Query.off",0,3,arguments.length),function(l,s,o){if(void 0!==s)switch(s){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ue.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,s),(0,ue.Wj)("Query.off","callback",o,!0),(0,ue.lb)("Query.off","context",c,!0),o){const g=()=>{};g.userCallback=o,g.context=c,th(this._delegate,s,g)}else th(this._delegate,s)}get(){return dg(this._delegate).then(s=>new Mu(this.database,s))}once(s,o,c,g){(0,ue.Dv)("Query.once",1,4,arguments.length),(0,ue.Wj)("Query.once","callback",o,!0);const E=vo.getCancelAndContextArgs_("Query.once",c,g),b=new ue.BH,k=(q,_e)=>{const De=new Mu(this.database,q);o&&o.call(E.context,De,_e),b.resolve(De)};k.userCallback=o,k.context=E.context;const j=q=>{E.cancel&&E.cancel.call(E.context,q),b.reject(q)};switch(s){case"value":fg(this._delegate,k,j,{onlyOnce:!0});break;case"child_added":$y(this._delegate,k,j,{onlyOnce:!0});break;case"child_removed":ea(this._delegate,k,j,{onlyOnce:!0});break;case"child_changed":Bl(this._delegate,k,j,{onlyOnce:!0});break;case"child_moved":xh(this._delegate,k,j,{onlyOnce:!0});break;default:throw new Error((0,ue.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return b.promise}limitToFirst(s){return(0,ue.Dv)("Query.limitToFirst",1,1,arguments.length),new vo(this.database,il(this._delegate,function Fh(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Dr(l)}(s)))}limitToLast(s){return(0,ue.Dv)("Query.limitToLast",1,1,arguments.length),new vo(this.database,il(this._delegate,function zf(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Uh(l)}(s)))}orderByChild(s){return(0,ue.Dv)("Query.orderByChild",1,1,arguments.length),new vo(this.database,il(this._delegate,function es(l){if("$key"===l)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===l)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===l)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Nh("orderByChild","path",l,!1),new Hy(l)}(s)))}orderByKey(){return(0,ue.Dv)("Query.orderByKey",0,0,arguments.length),new vo(this.database,il(this._delegate,function Vl(){return new ko}()))}orderByPriority(){return(0,ue.Dv)("Query.orderByPriority",0,0,arguments.length),new vo(this.database,il(this._delegate,function K_(){return new zy}()))}orderByValue(){return(0,ue.Dv)("Query.orderByValue",0,0,arguments.length),new vo(this.database,il(this._delegate,function Gy(){return new pg}()))}startAt(s=null,o){return(0,ue.Dv)("Query.startAt",0,2,arguments.length),new vo(this.database,il(this._delegate,function kh(l=null,s){return cd("startAt","key",s,!0),new rh(l,s)}(s,o)))}startAfter(s=null,o){return(0,ue.Dv)("Query.startAfter",0,2,arguments.length),new vo(this.database,il(this._delegate,function pd(l,s){return cd("startAfter","key",s,!0),new Lh(l,s)}(s,o)))}endAt(s=null,o){return(0,ue.Dv)("Query.endAt",0,2,arguments.length),new vo(this.database,il(this._delegate,function bm(l,s){return cd("endAt","key",s,!0),new Ru(l,s)}(s,o)))}endBefore(s=null,o){return(0,ue.Dv)("Query.endBefore",0,2,arguments.length),new vo(this.database,il(this._delegate,function nh(l,s){return cd("endBefore","key",s,!0),new Oh(l,s)}(s,o)))}equalTo(s,o){return(0,ue.Dv)("Query.equalTo",1,2,arguments.length),new vo(this.database,il(this._delegate,function Tv(l,s){return cd("equalTo","key",s,!0),new gg(l,s)}(s,o)))}toString(){return(0,ue.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ue.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(s){if((0,ue.Dv)("Query.isEqual",1,1,arguments.length),!(s instanceof vo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(s._delegate)}static getCancelAndContextArgs_(s,o,c){const g={cancel:void 0,context:void 0};if(o&&c)g.cancel=o,(0,ue.Wj)(s,"cancel",g.cancel,!0),g.context=c,(0,ue.lb)(s,"context",g.context,!0);else if(o)if("object"==typeof o&&null!==o)g.context=o;else{if("function"!=typeof o)throw new Error((0,ue.gK)(s,"cancelOrContext")+" must either be a cancel callback or a context object.");g.cancel=o}return g}get ref(){return new Ea(this.database,new au(this._delegate._repo,this._delegate._path))}}class Ea extends vo{constructor(s,o){super(s,new Wa(o._repo,o._path,new Ip,!1)),this.database=s,this._delegate=o}getKey(){return(0,ue.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(s){return(0,ue.Dv)("Reference.child",1,1,arguments.length),"number"==typeof s&&(s=String(s)),new Ea(this.database,fd(this._delegate,s))}getParent(){(0,ue.Dv)("Reference.parent",0,0,arguments.length);const s=this._delegate.parent;return s?new Ea(this.database,s):null}getRoot(){return(0,ue.Dv)("Reference.root",0,0,arguments.length),new Ea(this.database,this._delegate.root)}set(s,o){(0,ue.Dv)("Reference.set",1,2,arguments.length),(0,ue.Wj)("Reference.set","onComplete",o,!0);const c=Hf(this._delegate,s);return o&&c.then(()=>o(null),g=>o(g)),c}update(s,o){if((0,ue.Dv)("Reference.update",1,2,arguments.length),Array.isArray(s)){const g={};for(let E=0;E<s.length;++E)g[""+E]=s[E];s=g,vg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rl("Reference.update",this._delegate._path),(0,ue.Wj)("Reference.update","onComplete",o,!0);const c=jy(this._delegate,s);return o&&c.then(()=>o(null),g=>o(g)),c}setWithPriority(s,o,c){(0,ue.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ue.Wj)("Reference.setWithPriority","onComplete",c,!0);const g=function Cm(l,s,o){if(rl("setWithPriority",l._path),Ul("setWithPriority",s,l._path,!1),Ty("setWithPriority",o,!1),".length"===l.key||".keys"===l.key)throw"setWithPriority failed: "+l.key+" is a read-only object.";const c=new ue.BH;return Ay(l._repo,l._path,s,o,c.wrapCallback(()=>{})),c.promise}(this._delegate,s,o);return c&&g.then(()=>c(null),E=>c(E)),g}remove(s){(0,ue.Dv)("Reference.remove",0,1,arguments.length),(0,ue.Wj)("Reference.remove","onComplete",s,!0);const o=function Vy(l){return rl("remove",l._path),Hf(l,null)}(this._delegate);return s&&o.then(()=>s(null),c=>s(c)),o}transaction(s,o,c){(0,ue.Dv)("Reference.transaction",1,3,arguments.length),(0,ue.Wj)("Reference.transaction","transactionUpdate",s,!1),(0,ue.Wj)("Reference.transaction","onComplete",o,!0),function(l,s,o,c){if(void 0!==o&&"boolean"!=typeof o)throw new Error((0,ue.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,c);const g=function Y_(l,s,o){var c;if(l=(0,ue.m9)(l),rl("Reference.transaction",l._path),".length"===l.key||".keys"===l.key)throw"Reference.transaction failed: "+l.key+" is a read-only object.";const g=null===(c=o?.applyLocally)||void 0===c||c,E=new ue.BH,k=fg(l,()=>{});return function G_(l,s,o,c,g,E){ig(l,"transaction on "+s);const b={path:s,update:o,onComplete:c,status:null,order:Og(),applyLocally:E,retryCount:0,unwatcher:g,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},k=Bf(l,s,void 0);b.currentInputSnapshot=k;const j=b.update(k.val());if(void 0===j)b.unwatcher(),b.currentOutputSnapshotRaw=null,b.currentOutputSnapshotResolved=null,b.onComplete&&b.onComplete(null,!1,b.currentInputSnapshot);else{Xp("transaction failed: Data returned ",j,b.path),b.status=0;const q=Yp(l.transactionQueueTree_,s),_e=nl(q)||[];let De;_e.push(b),fm(q,_e),"object"==typeof j&&null!==j&&(0,ue.r3)(j,".priority")?(De=(0,ue.DV)(j,".priority"),(0,ue.hu)(Of(De),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):De=(qd(l.serverSyncTree_,s)||hr.EMPTY_NODE).getPriority().val();const Ge=Lf(l),ct=zi(j,De),ht=Nf(ct,k,Ge);b.currentOutputSnapshotRaw=ct,b.currentOutputSnapshotResolved=ht,b.currentWriteId=Au(l);const Wt=hy(l.serverSyncTree_,s,ht,b.currentWriteId,b.applyLocally);Ga(l.eventQueue_,s,Wt),sg(l,l.transactionQueueTree_)}}(l._repo,l._path,s,(j,q,_e)=>{let De=null;j?E.reject(j):(De=new hd(_e,new au(l._repo,l._path),Rr),E.resolve(new gd(q,De)))},k,g),E.promise}(this._delegate,s,{applyLocally:c}).then(E=>new Rm(E.committed,new Mu(this.database,E.snapshot)));return o&&g.then(E=>o(null,E.committed,E.snapshot),E=>o(E,!1,null)),g}setPriority(s,o){(0,ue.Dv)("Reference.setPriority",1,2,arguments.length),(0,ue.Wj)("Reference.setPriority","onComplete",o,!0);const c=function Iv(l,s){l=(0,ue.m9)(l),rl("setPriority",l._path),Ty("setPriority",s,!1);const o=new ue.BH;return Ay(l._repo,ys(l._path,".priority"),s,null,o.wrapCallback(()=>{})),o.promise}(this._delegate,s);return o&&c.then(()=>o(null),g=>o(g)),c}push(s,o){(0,ue.Dv)("Reference.push",0,2,arguments.length),(0,ue.Wj)("Reference.push","onComplete",o,!0);const c=function Tm(l,s){l=(0,ue.m9)(l),rl("push",l._path),Ul("push",s,l._path,!0);const o=by(l._repo),c=jf(o),g=fd(l,c),E=fd(l,c);let b;return b=null!=s?Hf(E,s).then(()=>E):Promise.resolve(E),g.then=b.then.bind(b),g.catch=b.then.bind(b,void 0),g}(this._delegate,s),g=c.then(b=>new Ea(this.database,b));o&&g.then(()=>o(null),b=>o(b));const E=new Ea(this.database,c);return E.then=g.then.bind(g),E.catch=g.catch.bind(g,void 0),E}onDisconnect(){return rl("Reference.onDisconnect",this._delegate._path),new Bh(new Fy(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Eg{constructor(s,o){this._delegate=s,this.app=o,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:yg,forceLongPolling:Ky}}useEmulator(s,o,c={}){!function Zy(l,s,o,c={}){(l=(0,ue.m9)(l))._checkNotDeleted("useEmulator"),l._instanceStarted&&Tu("Cannot call useEmulator() after instance has already been initialized.");const g=l._repoInternal;let E;if(g.repoInfo_.nodeAdmin)c.mockUserToken&&Tu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),E=new Ua(Ua.OWNER);else if(c.mockUserToken){const b="string"==typeof c.mockUserToken?c.mockUserToken:(0,ue.Sg)(c.mockUserToken,l.app.options.projectId);E=new Ua(b)}!function OE(l,s,o,c){l.repoInfo_=new Nd(`${s}:${o}`,!1,l.repoInfo_.namespace,l.repoInfo_.webSocketOnly,l.repoInfo_.nodeAdmin,l.repoInfo_.persistenceKey,l.repoInfo_.includeNamespaceInQueryParams,!0),c&&(l.authTokenProvider_=c)}(g,s,o,E)}(this._delegate,s,o,c)}ref(s){if((0,ue.Dv)("database.ref",0,1,arguments.length),s instanceof Ea){const o=Im(this._delegate,s.toString());return new Ea(this,o)}{const o=Uy(this._delegate,s);return new Ea(this,o)}}refFromURL(s){(0,ue.Dv)("database.refFromURL",1,1,arguments.length);const c=Im(this._delegate,s);return new Ea(this,c)}goOffline(){return(0,ue.Dv)("database.goOffline",0,0,arguments.length),function Sm(l){(l=(0,ue.m9)(l))._checkNotDeleted("goOffline"),Ff(l._repo)}(this._delegate)}goOnline(){return(0,ue.Dv)("database.goOnline",0,0,arguments.length),function Z_(l){(l=(0,ue.m9)(l))._checkNotDeleted("goOnline"),function Uf(l){l.persistentConnection_&&l.persistentConnection_.resume(eg)}(l._repo)}(this._delegate)}}Eg.ServerValue={TIMESTAMP:function Av(){return _g}(),increment:l=>function Tc(l){return{".sv":{increment:l}}}(l)};var Nv=Object.freeze({__proto__:null,initStandalone:function Mv({app:l,url:s,version:o,customAuthImpl:c,namespace:g,nodeAdmin:E=!1}){nc(o);const b=new Zo.zt("auth-internal",new Zo.H0("database-standalone"));return b.setComponent(new Zo.wA("auth-internal",()=>c,"PRIVATE")),{instance:new Eg(Cv(l,b,void 0,s,E),l),namespace:g}}});const Mm=Eg.ServerValue;function Kf(l){return null==l}function qf(l){return"function"==typeof l.set}function Zf(l,s){return qf(s)?s:l.ref(s)}function jh(l,s){if(function Nm(l){return"string"==typeof l}(l))return s.stringCase();if(qf(l))return s.firebaseCase();if(function Vh(l){return"function"==typeof l.exportVal}(l))return s.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof l)}function Ig(l,s,o="on",c=no.z){return new Oi.y(g=>{let E=null;return E=l[o](s,(b,k)=>{c.schedule(()=>{g.next({snapshot:b,prevKey:k})}),"once"===o&&c.schedule(()=>g.complete())},b=>{c.schedule(()=>g.error(b))}),"on"===o?{unsubscribe(){null!=E&&l.off(s,E)}}:{unsubscribe(){}}}).pipe((0,ji.U)(g=>{const{snapshot:E,prevKey:b}=g;let k=null;return E.exists()&&(k=E.key),{type:s,payload:E,prevKey:b,key:k}}),(0,$m.B)())}function Tg(l,s){const o=l.length;for(let c=0;c<o;c++)if(l[c].payload.key===s)return c;return-1}function $h(l,s){const{payload:o,prevKey:c,key:g}=s,E=Tg(l,g),b=function xm(l,s){if(Kf(s))return 0;{const o=Tg(l,s);return-1===o?l.length:o+1}}(l,c);switch(s.type){case"value":if(s.payload&&s.payload.exists()){let k=null;s.payload.forEach(j=>{const q={payload:j,type:"value",prevKey:k,key:j.key};return k=j.key,l=[...l,q],!1})}return l;case"child_added":if(E>-1){const k=l[E-1];(k&&k.key||null)!==c&&(l=l.filter(j=>j.payload.key!==o.key)).splice(b,0,s)}else{if(null==c)return[s,...l];(l=l.slice()).splice(b,0,s)}return l;case"child_removed":return l.filter(k=>k.payload.key!==o.key);case"child_changed":return l.map(k=>k.payload.key===g?s:k);case"child_moved":if(E>-1){const k=l.splice(E,1)[0];return(l=l.slice()).splice(b,0,k),l}return l;default:return l}}function Yy(l){return(Kf(l)||0===l.length)&&(l=["child_added","child_removed","child_changed","child_moved"]),l}function Yf(l,s,o){return function Pm(l,s,o){return Ig(l,"value","once",o).pipe((0,Aa.w)(c=>{const g=[(0,qo.of)(c)];return s.forEach(E=>g.push(Ig(l,E,"on",o))),(0,xg.T)(...g).pipe((0,op.R)($h,[]))}),(0,ef.x)())}(l,s=Yy(s),o)}function Qy(l,s,o){const c=(s=Yy(s)).map(g=>Ig(l,g,"on",o));return(0,xg.T)(...c)}function Hh(l,s){return function(c,g){return jh(c,{stringCase:()=>l.child(c)[s](g),firebaseCase:()=>c[s](g),snapshotCase:()=>c.ref[s](g)})}}function Jy(l){return function(o){return o?jh(o,{stringCase:()=>l.child(o).remove(),firebaseCase:()=>o.remove(),snapshotCase:()=>o.ref.remove()}):l.remove()}}function Pv(l,s){return function(){return Ig(l,"value","on",s)}}!function wg(l){l.INTERNAL.registerComponent(new Zo.wA("database-compat",(s,{instanceIdentifier:o})=>{const c=s.getProvider("app-compat").getImmediate(),g=s.getProvider("database").getImmediate({identifier:o});return new Eg(g,c)},"PUBLIC").setServiceProps({Reference:Ea,Query:vo,Database:Eg,DataSnapshot:Mu,enableLogging:Sv,INTERNAL:Nv,ServerValue:Mm}).setMultipleInstances(!0)),l.registerVersion("@firebase/database-compat","0.3.4")}(Ra.Z);const Om=new X.OlP("angularfire2.realtimeDatabaseURL"),J_=new X.OlP("angularfire2.database.use-emulator");let km=(()=>{class l{constructor(o,c,g,E,b,k,j,q,_e,De,Ge,ct,ht,Wt,In){this.schedulers=k;const Nn=j,ur=(0,to.on)(o,b,c);q&&(0,ws.nw)(ur,b,_e,Ge,ct,ht,De,Wt),this.database=(0,to.cc)(`${ur.name}.database.${g}`,"AngularFireDatabase",ur.name,()=>{const kr=b.runOutsideAngular(()=>ur.database(g||void 0));return Nn&&kr.useEmulator(...Nn),kr},[Nn])}list(o,c){const g=this.schedulers.ngZone.runOutsideAngular(()=>Zf(this.database,o));let E=g;return c&&(E=c(g)),function zh(l,s){const o=s.schedulers.outsideAngular,c=s.schedulers.ngZone.run(()=>l.ref);return{query:l,update:Hh(c,"update"),set:Hh(c,"set"),push:g=>c.push(g),remove:Jy(c),snapshotChanges:g=>Yf(l,g,o).pipe(Ri.iC),stateChanges:g=>Qy(l,g,o).pipe(Ri.iC),auditTrail:g=>function Xy(l,s,o){return function Cc(l,s,o){return function Qf(l,s){return Ig(l,"value","on",s).pipe((0,ji.U)(o=>{let c;return o.payload.forEach(g=>(c=g.key,!1)),{data:o,lastKeyToLoad:c}}))}(l,o).pipe(function fh(...l){const s=(0,Gu.jO)(l);return(0,fu.e)((o,c)=>{const g=l.length,E=new Array(g);let b=l.map(()=>!1),k=!1;for(let j=0;j<g;j++)(0,ms.Xf)(l[j]).subscribe((0,Ps.x)(c,q=>{E[j]=q,!k&&!b[j]&&(b[j]=!0,(k=b.every(tf.y))&&(b=null))},Mi.Z));o.subscribe((0,Ps.x)(c,j=>{if(k){const q=[j,...E];c.next(s?s(...q):q)}}))})}(s),(0,ji.U)(([g,E])=>{const b=g.lastKeyToLoad,k=E.map(j=>j.key);return{actions:E,lastKeyToLoad:b,loadedKeys:k}}),function ap(l){return(0,fu.e)((s,o)=>{let c=!1,g=0;s.subscribe((0,Ps.x)(o,E=>(c||(c=!l(E,g++)))&&o.next(E)))})}(g=>-1===g.loadedKeys.indexOf(g.lastKeyToLoad)),(0,ji.U)(g=>g.actions))}(l,Qy(l,s).pipe((0,op.R)((g,E)=>[...g,E],[])),o)}(l,g,o).pipe(Ri.iC),valueChanges:(g,E)=>Yf(l,g,o).pipe((0,ji.U)(k=>k.map(j=>E&&E.idField?Object.assign(Object.assign({},j.payload.val()),{[E.idField]:j.key}):j.payload.val())),Ri.iC)}}(E,this)}object(o){return function xv(l,s){return{query:l,snapshotChanges:()=>Pv(l,s.schedulers.outsideAngular)().pipe(Ri.iC),update:o=>l.ref.update(o),set:o=>l.ref.set(o),remove:()=>l.ref.remove(),valueChanges:()=>Pv(l,s.schedulers.outsideAngular)().pipe(Ri.iC,(0,ji.U)(c=>c.payload.exists()?c.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Zf(this.database,o)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return l.\u0275fac=function(o){return new(o||l)(X.LFG(to.Dh),X.LFG(to.xv,8),X.LFG(Om,8),X.LFG(X.Lbi),X.LFG(X.R0b),X.LFG(Ri.HU),X.LFG(J_,8),X.LFG(ws.zQ,8),X.LFG(ws.Qv,8),X.LFG(ws.L6,8),X.LFG(ws._Q,8),X.LFG(ws.rT,8),X.LFG(ws.lh,8),X.LFG(ws.f7,8),X.LFG(Ja.nm,8))},l.\u0275prov=X.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),Ov=(()=>{class l{constructor(){Fa.Z.registerVersion("angularfire",Ri.q4.full,"rtdb-compat")}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=X.oAB({type:l}),l.\u0275inj=X.cJS({providers:[km]}),l})();var ev=B(3754),Lm=B(5061),tv=B(9862);const Fm_firebase={apiKey:"AIzaSyAJE0uVferW2gzu9fdogmeCFEkRQNGN434",authDomain:"auctions-317be.firebaseapp.com",projectId:"auctions-317be",storageBucket:"auctions-317be.appspot.com",messagingSenderId:"949962431669",appId:"1:949962431669:web:0b70f1d85d122e87d732fc",measurementId:"G-06TBN8H13X"};var Cg=B(5148);const nv=[{path:"",loadChildren:()=>B.e(915).then(B.bind(B,3915)).then(l=>l.StoreModule)},{path:"dashboard",canActivate:[(()=>{class l{authService;router;constructor(o,c){this.authService=o,this.router=c}canActivate(o,c){return!0!==this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}static \u0275fac=function(c){return new(c||l)(X.LFG(Cg.e),X.LFG(aa.F0))};static \u0275prov=X.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()],loadChildren:()=>B.e(71).then(B.bind(B,6071)).then(l=>l.DashboardModule)},{path:"auth",loadChildren:()=>B.e(766).then(B.bind(B,6766)).then(l=>l.AuthModule)}];let e_=(()=>{class l{static \u0275fac=function(c){return new(c||l)};static \u0275mod=X.oAB({type:l});static \u0275inj=X.cJS({imports:[aa.Bz.forRoot(nv),aa.Bz]})}return l})();function t_(l){return new Lm.w(l,"./assets/i18n/",".json")}let n_=(()=>{class l{static \u0275fac=function(c){return new(c||l)};static \u0275mod=X.oAB({type:l,bootstrap:[ua]});static \u0275inj=X.cJS({imports:[I.b2,bc,to.hO.initializeApp(Fm_firebase),ws.ww,Pg.yb,Td,Ov,e_,ev.aw.forRoot({loader:{provide:ev.Zw,useFactory:t_,deps:[tv.eN]}})]})}return l})();(0,X.G48)(),I.q6().bootstrapModule(n_).catch(l=>console.error(l))},5619:(Zt,Je,B)=>{B.d(Je,{X:()=>X});var I=B(8645);class X extends I.x{constructor(de){super(),this._value=de}get value(){return this.getValue()}_subscribe(de){const Ie=super._subscribe(de);return!Ie.closed&&de.next(this._value),Ie}getValue(){const{hasError:de,thrownError:Ie,_value:Ne}=this;if(de)throw Ie;return this._throwIfClosed(),Ne}next(de){super.next(this._value=de)}}},5592:(Zt,Je,B)=>{B.d(Je,{y:()=>Be});var I=B(305),X=B(7394),Y=B(4850),de=B(8407),Ie=B(2653),Ne=B(4674),Me=B(1441);let Be=(()=>{class Ae{constructor(ut){ut&&(this._subscribe=ut)}lift(ut){const kt=new Ae;return kt.source=this,kt.operator=ut,kt}subscribe(ut,kt,wt){const Pt=function he(Ae){return Ae&&Ae instanceof I.Lv||function ae(Ae){return Ae&&(0,Ne.m)(Ae.next)&&(0,Ne.m)(Ae.error)&&(0,Ne.m)(Ae.complete)}(Ae)&&(0,X.Nn)(Ae)}(ut)?ut:new I.Hp(ut,kt,wt);return(0,Me.x)(()=>{const{operator:bt,source:Le}=this;Pt.add(bt?bt.call(Pt,Le):Le?this._subscribe(Pt):this._trySubscribe(Pt))}),Pt}_trySubscribe(ut){try{return this._subscribe(ut)}catch(kt){ut.error(kt)}}forEach(ut,kt){return new(kt=Pe(kt))((wt,Pt)=>{const bt=new I.Hp({next:Le=>{try{ut(Le)}catch(Mt){Pt(Mt),bt.unsubscribe()}},error:Pt,complete:wt});this.subscribe(bt)})}_subscribe(ut){var kt;return null===(kt=this.source)||void 0===kt?void 0:kt.subscribe(ut)}[Y.L](){return this}pipe(...ut){return(0,de.U)(ut)(this)}toPromise(ut){return new(ut=Pe(ut))((kt,wt)=>{let Pt;this.subscribe(bt=>Pt=bt,bt=>wt(bt),()=>kt(Pt))})}}return Ae.create=mt=>new Ae(mt),Ae})();function Pe(Ae){var mt;return null!==(mt=Ae??Ie.config.Promise)&&void 0!==mt?mt:Promise}},8645:(Zt,Je,B)=>{B.d(Je,{x:()=>Me});var I=B(5592),X=B(7394);const de=(0,B(2306).d)(Pe=>function(){Pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=B(9039),Ne=B(1441);let Me=(()=>{class Pe extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const Ae=new Be(this,this);return Ae.operator=he,Ae}_throwIfClosed(){if(this.closed)throw new de}next(he){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ae of this.currentObservers)Ae.next(he)}})}error(he){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:Ae}=this;for(;Ae.length;)Ae.shift().error(he)}})}complete(){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:Ae,isStopped:mt,observers:ut}=this;return Ae||mt?X.Lc:(this.currentObservers=null,ut.push(he),new X.w0(()=>{this.currentObservers=null,(0,Ie.P)(ut,he)}))}_checkFinalizedStatuses(he){const{hasError:Ae,thrownError:mt,isStopped:ut}=this;Ae?he.error(mt):ut&&he.complete()}asObservable(){const he=new I.y;return he.source=this,he}}return Pe.create=(ae,he)=>new Be(ae,he),Pe})();class Be extends Me{constructor(ae,he){super(),this.destination=ae,this.source=he}next(ae){var he,Ae;null===(Ae=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===Ae||Ae.call(he,ae)}error(ae){var he,Ae;null===(Ae=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===Ae||Ae.call(he,ae)}complete(){var ae,he;null===(he=null===(ae=this.destination)||void 0===ae?void 0:ae.complete)||void 0===he||he.call(ae)}_subscribe(ae){var he,Ae;return null!==(Ae=null===(he=this.source)||void 0===he?void 0:he.subscribe(ae))&&void 0!==Ae?Ae:X.Lc}}},305:(Zt,Je,B)=>{B.d(Je,{Hp:()=>wt,Lv:()=>Ae});var I=B(4674),X=B(7394),Y=B(2653),de=B(3894),Ie=B(2420);const Ne=Pe("C",void 0,void 0);function Pe(fe,Ze,Ce){return{kind:fe,value:Ze,error:Ce}}var ae=B(7599),he=B(1441);class Ae extends X.w0{constructor(Ze){super(),this.isStopped=!1,Ze?(this.destination=Ze,(0,X.Nn)(Ze)&&Ze.add(this)):this.destination=Mt}static create(Ze,Ce,st){return new wt(Ze,Ce,st)}next(Ze){this.isStopped?Le(function Be(fe){return Pe("N",fe,void 0)}(Ze),this):this._next(Ze)}error(Ze){this.isStopped?Le(function Me(fe){return Pe("E",void 0,fe)}(Ze),this):(this.isStopped=!0,this._error(Ze))}complete(){this.isStopped?Le(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ze){this.destination.next(Ze)}_error(Ze){try{this.destination.error(Ze)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function ut(fe,Ze){return mt.call(fe,Ze)}class kt{constructor(Ze){this.partialObserver=Ze}next(Ze){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Ze)}catch(st){Pt(st)}}error(Ze){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Ze)}catch(st){Pt(st)}else Pt(Ze)}complete(){const{partialObserver:Ze}=this;if(Ze.complete)try{Ze.complete()}catch(Ce){Pt(Ce)}}}class wt extends Ae{constructor(Ze,Ce,st){let dt;if(super(),(0,I.m)(Ze)||!Ze)dt={next:Ze??void 0,error:Ce??void 0,complete:st??void 0};else{let $e;this&&Y.config.useDeprecatedNextContext?($e=Object.create(Ze),$e.unsubscribe=()=>this.unsubscribe(),dt={next:Ze.next&&ut(Ze.next,$e),error:Ze.error&&ut(Ze.error,$e),complete:Ze.complete&&ut(Ze.complete,$e)}):dt=Ze}this.destination=new kt(dt)}}function Pt(fe){Y.config.useDeprecatedSynchronousErrorHandling?(0,he.O)(fe):(0,de.h)(fe)}function Le(fe,Ze){const{onStoppedNotification:Ce}=Y.config;Ce&&ae.z.setTimeout(()=>Ce(fe,Ze))}const Mt={closed:!0,next:Ie.Z,error:function bt(fe){throw fe},complete:Ie.Z}},7394:(Zt,Je,B)=>{B.d(Je,{Lc:()=>Ne,w0:()=>Ie,Nn:()=>Me});var I=B(4674);const Y=(0,B(2306).d)(Pe=>function(he){Pe(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((Ae,mt)=>`${mt+1}) ${Ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var de=B(9039);class Ie{constructor(ae){this.initialTeardown=ae,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ae;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const ut of he)ut.remove(this);else he.remove(this);const{initialTeardown:Ae}=this;if((0,I.m)(Ae))try{Ae()}catch(ut){ae=ut instanceof Y?ut.errors:[ut]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const ut of mt)try{Be(ut)}catch(kt){ae=ae??[],kt instanceof Y?ae=[...ae,...kt.errors]:ae.push(kt)}}if(ae)throw new Y(ae)}}add(ae){var he;if(ae&&ae!==this)if(this.closed)Be(ae);else{if(ae instanceof Ie){if(ae.closed||ae._hasParent(this))return;ae._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push(ae)}}_hasParent(ae){const{_parentage:he}=this;return he===ae||Array.isArray(he)&&he.includes(ae)}_addParent(ae){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push(ae),he):he?[he,ae]:ae}_removeParent(ae){const{_parentage:he}=this;he===ae?this._parentage=null:Array.isArray(he)&&(0,de.P)(he,ae)}remove(ae){const{_finalizers:he}=this;he&&(0,de.P)(he,ae),ae instanceof Ie&&ae._removeParent(this)}}Ie.EMPTY=(()=>{const Pe=new Ie;return Pe.closed=!0,Pe})();const Ne=Ie.EMPTY;function Me(Pe){return Pe instanceof Ie||Pe&&"closed"in Pe&&(0,I.m)(Pe.remove)&&(0,I.m)(Pe.add)&&(0,I.m)(Pe.unsubscribe)}function Be(Pe){(0,I.m)(Pe)?Pe():Pe.unsubscribe()}},2653:(Zt,Je,B)=>{B.d(Je,{config:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Zt,Je,B)=>{B.d(Je,{z:()=>Ie});var I=B(7537),Y=B(4564),de=B(2459);function Ie(...Ne){return function X(){return(0,I.J)(1)}()((0,de.D)(Ne,(0,Y.yG)(Ne)))}},4911:(Zt,Je,B)=>{B.d(Je,{P:()=>Y});var I=B(5592),X=B(4829);function Y(de){return new I.y(Ie=>{(0,X.Xf)(de()).subscribe(Ie)})}},6232:(Zt,Je,B)=>{B.d(Je,{E:()=>X});const X=new(B(5592).y)(Ie=>Ie.complete())},2459:(Zt,Je,B)=>{B.d(Je,{D:()=>Ze});var I=B(4829),X=B(3093),Y=B(5137),Ne=B(5592),Be=B(4971),Pe=B(4674),ae=B(7103);function Ae(Ce,st){if(!Ce)throw new Error("Iterable cannot be null");return new Ne.y(dt=>{(0,ae.f)(dt,st,()=>{const $e=Ce[Symbol.asyncIterator]();(0,ae.f)(dt,st,()=>{$e.next().then(qe=>{qe.done?dt.complete():dt.next(qe.value)})},0,!0)})})}var mt=B(8382),ut=B(4026),kt=B(4266),wt=B(3664),Pt=B(5726),bt=B(9853),Le=B(541);function Ze(Ce,st){return st?function fe(Ce,st){if(null!=Ce){if((0,mt.c)(Ce))return function de(Ce,st){return(0,I.Xf)(Ce).pipe((0,Y.R)(st),(0,X.Q)(st))}(Ce,st);if((0,kt.z)(Ce))return function Me(Ce,st){return new Ne.y(dt=>{let $e=0;return st.schedule(function(){$e===Ce.length?dt.complete():(dt.next(Ce[$e++]),dt.closed||this.schedule())})})}(Ce,st);if((0,ut.t)(Ce))return function Ie(Ce,st){return(0,I.Xf)(Ce).pipe((0,Y.R)(st),(0,X.Q)(st))}(Ce,st);if((0,Pt.D)(Ce))return Ae(Ce,st);if((0,wt.T)(Ce))return function he(Ce,st){return new Ne.y(dt=>{let $e;return(0,ae.f)(dt,st,()=>{$e=Ce[Be.h](),(0,ae.f)(dt,st,()=>{let qe,Ct;try{({value:qe,done:Ct}=$e.next())}catch(jt){return void dt.error(jt)}Ct?dt.complete():dt.next(qe)},0,!0)}),()=>(0,Pe.m)($e?.return)&&$e.return()})}(Ce,st);if((0,Le.L)(Ce))return function Mt(Ce,st){return Ae((0,Le.Q)(Ce),st)}(Ce,st)}throw(0,bt.z)(Ce)}(Ce,st):(0,I.Xf)(Ce)}},4829:(Zt,Je,B)=>{B.d(Je,{Xf:()=>mt});var I=B(7582),X=B(4266),Y=B(4026),de=B(5592),Ie=B(8382),Ne=B(5726),Me=B(9853),Be=B(3664),Pe=B(541),ae=B(4674),he=B(3894),Ae=B(4850);function mt(fe){if(fe instanceof de.y)return fe;if(null!=fe){if((0,Ie.c)(fe))return function ut(fe){return new de.y(Ze=>{const Ce=fe[Ae.L]();if((0,ae.m)(Ce.subscribe))return Ce.subscribe(Ze);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(fe);if((0,X.z)(fe))return function kt(fe){return new de.y(Ze=>{for(let Ce=0;Ce<fe.length&&!Ze.closed;Ce++)Ze.next(fe[Ce]);Ze.complete()})}(fe);if((0,Y.t)(fe))return function wt(fe){return new de.y(Ze=>{fe.then(Ce=>{Ze.closed||(Ze.next(Ce),Ze.complete())},Ce=>Ze.error(Ce)).then(null,he.h)})}(fe);if((0,Ne.D)(fe))return bt(fe);if((0,Be.T)(fe))return function Pt(fe){return new de.y(Ze=>{for(const Ce of fe)if(Ze.next(Ce),Ze.closed)return;Ze.complete()})}(fe);if((0,Pe.L)(fe))return function Le(fe){return bt((0,Pe.Q)(fe))}(fe)}throw(0,Me.z)(fe)}function bt(fe){return new de.y(Ze=>{(function Mt(fe,Ze){var Ce,st,dt,$e;return(0,I.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,I.KL)(fe);!(st=yield Ce.next()).done;)if(Ze.next(st.value),Ze.closed)return}catch(qe){dt={error:qe}}finally{try{st&&!st.done&&($e=Ce.return)&&(yield $e.call(Ce))}finally{if(dt)throw dt.error}}Ze.complete()})})(fe,Ze).catch(Ce=>Ze.error(Ce))})}},3019:(Zt,Je,B)=>{B.d(Je,{T:()=>Ne});var I=B(7537),X=B(4829),Y=B(6232),de=B(4564),Ie=B(2459);function Ne(...Me){const Be=(0,de.yG)(Me),Pe=(0,de._6)(Me,1/0),ae=Me;return ae.length?1===ae.length?(0,X.Xf)(ae[0]):(0,I.J)(Pe)((0,Ie.D)(ae,Be)):Y.E}},2096:(Zt,Je,B)=>{B.d(Je,{of:()=>Y});var I=B(4564),X=B(2459);function Y(...de){const Ie=(0,I.yG)(de);return(0,X.D)(de,Ie)}},8251:(Zt,Je,B)=>{B.d(Je,{x:()=>X});var I=B(305);function X(de,Ie,Ne,Me,Be){return new Y(de,Ie,Ne,Me,Be)}class Y extends I.Lv{constructor(Ie,Ne,Me,Be,Pe,ae){super(Ie),this.onFinalize=Pe,this.shouldUnsubscribe=ae,this._next=Ne?function(he){try{Ne(he)}catch(Ae){Ie.error(Ae)}}:super._next,this._error=Be?function(he){try{Be(he)}catch(Ae){Ie.error(Ae)}finally{this.unsubscribe()}}:super._error,this._complete=Me?function(){try{Me()}catch(he){Ie.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ne}=this;super.unsubscribe(),!Ne&&(null===(Ie=this.onFinalize)||void 0===Ie||Ie.call(this))}}}},6328:(Zt,Je,B)=>{B.d(Je,{b:()=>Y});var I=B(1631),X=B(4674);function Y(de,Ie){return(0,X.m)(Ie)?(0,I.z)(de,Ie,1):(0,I.z)(de,1)}},3572:(Zt,Je,B)=>{B.d(Je,{d:()=>Y});var I=B(9360),X=B(8251);function Y(de){return(0,I.e)((Ie,Ne)=>{let Me=!1;Ie.subscribe((0,X.x)(Ne,Be=>{Me=!0,Ne.next(Be)},()=>{Me||Ne.next(de),Ne.complete()}))})}},3997:(Zt,Je,B)=>{B.d(Je,{x:()=>de});var I=B(2737),X=B(9360),Y=B(8251);function de(Ne,Me=I.y){return Ne=Ne??Ie,(0,X.e)((Be,Pe)=>{let ae,he=!0;Be.subscribe((0,Y.x)(Pe,Ae=>{const mt=Me(Ae);(he||!Ne(ae,mt))&&(he=!1,ae=mt,Pe.next(Ae))}))})}function Ie(Ne,Me){return Ne===Me}},2181:(Zt,Je,B)=>{B.d(Je,{h:()=>Y});var I=B(9360),X=B(8251);function Y(de,Ie){return(0,I.e)((Ne,Me)=>{let Be=0;Ne.subscribe((0,X.x)(Me,Pe=>de.call(Ie,Pe,Be++)&&Me.next(Pe)))})}},4716:(Zt,Je,B)=>{B.d(Je,{x:()=>X});var I=B(9360);function X(Y){return(0,I.e)((de,Ie)=>{try{de.subscribe(Ie)}finally{Ie.add(Y)}})}},1374:(Zt,Je,B)=>{B.d(Je,{P:()=>Me});var I=B(6973),X=B(2181),Y=B(8180),de=B(3572),Ie=B(3026),Ne=B(2737);function Me(Be,Pe){const ae=arguments.length>=2;return he=>he.pipe(Be?(0,X.h)((Ae,mt)=>Be(Ae,mt,he)):Ne.y,(0,Y.q)(1),ae?(0,de.d)(Pe):(0,Ie.T)(()=>new I.K))}},7398:(Zt,Je,B)=>{B.d(Je,{U:()=>Y});var I=B(9360),X=B(8251);function Y(de,Ie){return(0,I.e)((Ne,Me)=>{let Be=0;Ne.subscribe((0,X.x)(Me,Pe=>{Me.next(de.call(Ie,Pe,Be++))}))})}},7537:(Zt,Je,B)=>{B.d(Je,{J:()=>Y});var I=B(1631),X=B(2737);function Y(de=1/0){return(0,I.z)(X.y,de)}},1631:(Zt,Je,B)=>{B.d(Je,{z:()=>Be});var I=B(7398),X=B(4829),Y=B(9360),de=B(7103),Ie=B(8251),Me=B(4674);function Be(Pe,ae,he=1/0){return(0,Me.m)(ae)?Be((Ae,mt)=>(0,I.U)((ut,kt)=>ae(Ae,ut,mt,kt))((0,X.Xf)(Pe(Ae,mt))),he):("number"==typeof ae&&(he=ae),(0,Y.e)((Ae,mt)=>function Ne(Pe,ae,he,Ae,mt,ut,kt,wt){const Pt=[];let bt=0,Le=0,Mt=!1;const fe=()=>{Mt&&!Pt.length&&!bt&&ae.complete()},Ze=st=>bt<Ae?Ce(st):Pt.push(st),Ce=st=>{ut&&ae.next(st),bt++;let dt=!1;(0,X.Xf)(he(st,Le++)).subscribe((0,Ie.x)(ae,$e=>{mt?.($e),ut?Ze($e):ae.next($e)},()=>{dt=!0},void 0,()=>{if(dt)try{for(bt--;Pt.length&&bt<Ae;){const $e=Pt.shift();kt?(0,de.f)(ae,kt,()=>Ce($e)):Ce($e)}fe()}catch($e){ae.error($e)}}))};return Pe.subscribe((0,Ie.x)(ae,Ze,()=>{Mt=!0,fe()})),()=>{wt?.()}}(Ae,mt,Pe,he)))}},3093:(Zt,Je,B)=>{B.d(Je,{Q:()=>de});var I=B(7103),X=B(9360),Y=B(8251);function de(Ie,Ne=0){return(0,X.e)((Me,Be)=>{Me.subscribe((0,Y.x)(Be,Pe=>(0,I.f)(Be,Ie,()=>Be.next(Pe),Ne),()=>(0,I.f)(Be,Ie,()=>Be.complete(),Ne),Pe=>(0,I.f)(Be,Ie,()=>Be.error(Pe),Ne)))})}},6699:(Zt,Je,B)=>{B.d(Je,{R:()=>de});var I=B(9360),X=B(8251);function de(Ie,Ne){return(0,I.e)(function Y(Ie,Ne,Me,Be,Pe){return(ae,he)=>{let Ae=Me,mt=Ne,ut=0;ae.subscribe((0,X.x)(he,kt=>{const wt=ut++;mt=Ae?Ie(mt,kt,wt):(Ae=!0,kt),Be&&he.next(mt)},Pe&&(()=>{Ae&&he.next(mt),he.complete()})))}}(Ie,Ne,arguments.length>=2,!0))}},3020:(Zt,Je,B)=>{B.d(Je,{B:()=>Ie});var I=B(4829),X=B(8645),Y=B(305),de=B(9360);function Ie(Me={}){const{connector:Be=(()=>new X.x),resetOnError:Pe=!0,resetOnComplete:ae=!0,resetOnRefCountZero:he=!0}=Me;return Ae=>{let mt,ut,kt,wt=0,Pt=!1,bt=!1;const Le=()=>{ut?.unsubscribe(),ut=void 0},Mt=()=>{Le(),mt=kt=void 0,Pt=bt=!1},fe=()=>{const Ze=mt;Mt(),Ze?.unsubscribe()};return(0,de.e)((Ze,Ce)=>{wt++,!bt&&!Pt&&Le();const st=kt=kt??Be();Ce.add(()=>{wt--,0===wt&&!bt&&!Pt&&(ut=Ne(fe,he))}),st.subscribe(Ce),!mt&&wt>0&&(mt=new Y.Hp({next:dt=>st.next(dt),error:dt=>{bt=!0,Le(),ut=Ne(Mt,Pe,dt),st.error(dt)},complete:()=>{Pt=!0,Le(),ut=Ne(Mt,ae),st.complete()}}),(0,I.Xf)(Ze).subscribe(mt))})(Ae)}}function Ne(Me,Be,...Pe){if(!0===Be)return void Me();if(!1===Be)return;const ae=new Y.Hp({next:()=>{ae.unsubscribe(),Me()}});return(0,I.Xf)(Be(...Pe)).subscribe(ae)}},940:(Zt,Je,B)=>{B.d(Je,{d:()=>Ie});var I=B(8645),X=B(4552);class Y extends I.x{constructor(Me=1/0,Be=1/0,Pe=X.l){super(),this._bufferSize=Me,this._windowTime=Be,this._timestampProvider=Pe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Be===1/0,this._bufferSize=Math.max(1,Me),this._windowTime=Math.max(1,Be)}next(Me){const{isStopped:Be,_buffer:Pe,_infiniteTimeWindow:ae,_timestampProvider:he,_windowTime:Ae}=this;Be||(Pe.push(Me),!ae&&Pe.push(he.now()+Ae)),this._trimBuffer(),super.next(Me)}_subscribe(Me){this._throwIfClosed(),this._trimBuffer();const Be=this._innerSubscribe(Me),{_infiniteTimeWindow:Pe,_buffer:ae}=this,he=ae.slice();for(let Ae=0;Ae<he.length&&!Me.closed;Ae+=Pe?1:2)Me.next(he[Ae]);return this._checkFinalizedStatuses(Me),Be}_trimBuffer(){const{_bufferSize:Me,_timestampProvider:Be,_buffer:Pe,_infiniteTimeWindow:ae}=this,he=(ae?1:2)*Me;if(Me<1/0&&he<Pe.length&&Pe.splice(0,Pe.length-he),!ae){const Ae=Be.now();let mt=0;for(let ut=1;ut<Pe.length&&Pe[ut]<=Ae;ut+=2)mt=ut;mt&&Pe.splice(0,mt+1)}}}var de=B(3020);function Ie(Ne,Me,Be){let Pe,ae=!1;return Ne&&"object"==typeof Ne?({bufferSize:Pe=1/0,windowTime:Me=1/0,refCount:ae=!1,scheduler:Be}=Ne):Pe=Ne??1/0,(0,de.B)({connector:()=>new Y(Pe,Me,Be),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ae})}},7921:(Zt,Je,B)=>{B.d(Je,{O:()=>de});var I=B(5211),X=B(4564),Y=B(9360);function de(...Ie){const Ne=(0,X.yG)(Ie);return(0,Y.e)((Me,Be)=>{(Ne?(0,I.z)(Ie,Me,Ne):(0,I.z)(Ie,Me)).subscribe(Be)})}},5137:(Zt,Je,B)=>{B.d(Je,{R:()=>X});var I=B(9360);function X(Y,de=0){return(0,I.e)((Ie,Ne)=>{Ne.add(Y.schedule(()=>Ie.subscribe(Ne),de))})}},4664:(Zt,Je,B)=>{B.d(Je,{w:()=>de});var I=B(4829),X=B(9360),Y=B(8251);function de(Ie,Ne){return(0,X.e)((Me,Be)=>{let Pe=null,ae=0,he=!1;const Ae=()=>he&&!Pe&&Be.complete();Me.subscribe((0,Y.x)(Be,mt=>{Pe?.unsubscribe();let ut=0;const kt=ae++;(0,I.Xf)(Ie(mt,kt)).subscribe(Pe=(0,Y.x)(Be,wt=>Be.next(Ne?Ne(mt,wt,kt,ut++):wt),()=>{Pe=null,Ae()}))},()=>{he=!0,Ae()}))})}},8180:(Zt,Je,B)=>{B.d(Je,{q:()=>de});var I=B(6232),X=B(9360),Y=B(8251);function de(Ie){return Ie<=0?()=>I.E:(0,X.e)((Ne,Me)=>{let Be=0;Ne.subscribe((0,Y.x)(Me,Pe=>{++Be<=Ie&&(Me.next(Pe),Ie<=Be&&Me.complete())}))})}},9397:(Zt,Je,B)=>{B.d(Je,{b:()=>Ie});var I=B(4674),X=B(9360),Y=B(8251),de=B(2737);function Ie(Ne,Me,Be){const Pe=(0,I.m)(Ne)||Me||Be?{next:Ne,error:Me,complete:Be}:Ne;return Pe?(0,X.e)((ae,he)=>{var Ae;null===(Ae=Pe.subscribe)||void 0===Ae||Ae.call(Pe);let mt=!0;ae.subscribe((0,Y.x)(he,ut=>{var kt;null===(kt=Pe.next)||void 0===kt||kt.call(Pe,ut),he.next(ut)},()=>{var ut;mt=!1,null===(ut=Pe.complete)||void 0===ut||ut.call(Pe),he.complete()},ut=>{var kt;mt=!1,null===(kt=Pe.error)||void 0===kt||kt.call(Pe,ut),he.error(ut)},()=>{var ut,kt;mt&&(null===(ut=Pe.unsubscribe)||void 0===ut||ut.call(Pe)),null===(kt=Pe.finalize)||void 0===kt||kt.call(Pe)}))}):de.y}},3026:(Zt,Je,B)=>{B.d(Je,{T:()=>de});var I=B(6973),X=B(9360),Y=B(8251);function de(Ne=Ie){return(0,X.e)((Me,Be)=>{let Pe=!1;Me.subscribe((0,Y.x)(Be,ae=>{Pe=!0,Be.next(ae)},()=>Pe?Be.complete():Be.error(Ne())))})}function Ie(){return new I.K}},1954:(Zt,Je,B)=>{B.d(Je,{o:()=>Ie});var I=B(7394);class X extends I.w0{constructor(Me,Be){super()}schedule(Me,Be=0){return this}}const Y={setInterval(Ne,Me,...Be){const{delegate:Pe}=Y;return Pe?.setInterval?Pe.setInterval(Ne,Me,...Be):setInterval(Ne,Me,...Be)},clearInterval(Ne){const{delegate:Me}=Y;return(Me?.clearInterval||clearInterval)(Ne)},delegate:void 0};var de=B(9039);class Ie extends X{constructor(Me,Be){super(Me,Be),this.scheduler=Me,this.work=Be,this.pending=!1}schedule(Me,Be=0){var Pe;if(this.closed)return this;this.state=Me;const ae=this.id,he=this.scheduler;return null!=ae&&(this.id=this.recycleAsyncId(he,ae,Be)),this.pending=!0,this.delay=Be,this.id=null!==(Pe=this.id)&&void 0!==Pe?Pe:this.requestAsyncId(he,this.id,Be),this}requestAsyncId(Me,Be,Pe=0){return Y.setInterval(Me.flush.bind(Me,this),Pe)}recycleAsyncId(Me,Be,Pe=0){if(null!=Pe&&this.delay===Pe&&!1===this.pending)return Be;null!=Be&&Y.clearInterval(Be)}execute(Me,Be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(Me,Be);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Me,Be){let ae,Pe=!1;try{this.work(Me)}catch(he){Pe=!0,ae=he||new Error("Scheduled action threw falsy error")}if(Pe)return this.unsubscribe(),ae}unsubscribe(){if(!this.closed){const{id:Me,scheduler:Be}=this,{actions:Pe}=Be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(Pe,this),null!=Me&&(this.id=this.recycleAsyncId(Be,Me,null)),this.delay=null,super.unsubscribe()}}}},2631:(Zt,Je,B)=>{B.d(Je,{v:()=>Y});var I=B(4552);class X{constructor(Ie,Ne=X.now){this.schedulerActionCtor=Ie,this.now=Ne}schedule(Ie,Ne=0,Me){return new this.schedulerActionCtor(this,Ie).schedule(Me,Ne)}}X.now=I.l.now;class Y extends X{constructor(Ie,Ne=X.now){super(Ie,Ne),this.actions=[],this._active=!1}flush(Ie){const{actions:Ne}=this;if(this._active)return void Ne.push(Ie);let Me;this._active=!0;do{if(Me=Ie.execute(Ie.state,Ie.delay))break}while(Ie=Ne.shift());if(this._active=!1,Me){for(;Ie=Ne.shift();)Ie.unsubscribe();throw Me}}}},6321:(Zt,Je,B)=>{B.d(Je,{z:()=>Y});var I=B(1954);const Y=new(B(2631).v)(I.o)},4552:(Zt,Je,B)=>{B.d(Je,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},7599:(Zt,Je,B)=>{B.d(Je,{z:()=>I});const I={setTimeout(X,Y,...de){const{delegate:Ie}=I;return Ie?.setTimeout?Ie.setTimeout(X,Y,...de):setTimeout(X,Y,...de)},clearTimeout(X){const{delegate:Y}=I;return(Y?.clearTimeout||clearTimeout)(X)},delegate:void 0}},4971:(Zt,Je,B)=>{B.d(Je,{h:()=>X});const X=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Zt,Je,B)=>{B.d(Je,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Zt,Je,B)=>{B.d(Je,{K:()=>X});const X=(0,B(2306).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Zt,Je,B)=>{B.d(Je,{_6:()=>Ne,jO:()=>de,yG:()=>Ie});var I=B(4674);function Y(Me){return Me[Me.length-1]}function de(Me){return(0,I.m)(Y(Me))?Me.pop():void 0}function Ie(Me){return function X(Me){return Me&&(0,I.m)(Me.schedule)}(Y(Me))?Me.pop():void 0}function Ne(Me,Be){return"number"==typeof Y(Me)?Me.pop():Be}},7453:(Zt,Je,B)=>{B.d(Je,{D:()=>Ie});const{isArray:I}=Array,{getPrototypeOf:X,prototype:Y,keys:de}=Object;function Ie(Me){if(1===Me.length){const Be=Me[0];if(I(Be))return{args:Be,keys:null};if(function Ne(Me){return Me&&"object"==typeof Me&&X(Me)===Y}(Be)){const Pe=de(Be);return{args:Pe.map(ae=>Be[ae]),keys:Pe}}}return{args:Me,keys:null}}},9039:(Zt,Je,B)=>{function I(X,Y){if(X){const de=X.indexOf(Y);0<=de&&X.splice(de,1)}}B.d(Je,{P:()=>I})},2306:(Zt,Je,B)=>{function I(X){const de=X(Ie=>{Error.call(Ie),Ie.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}B.d(Je,{d:()=>I})},2714:(Zt,Je,B)=>{function I(X,Y){return X.reduce((de,Ie,Ne)=>(de[Ie]=Y[Ne],de),{})}B.d(Je,{n:()=>I})},1441:(Zt,Je,B)=>{B.d(Je,{O:()=>de,x:()=>Y});var I=B(2653);let X=null;function Y(Ie){if(I.config.useDeprecatedSynchronousErrorHandling){const Ne=!X;if(Ne&&(X={errorThrown:!1,error:null}),Ie(),Ne){const{errorThrown:Me,error:Be}=X;if(X=null,Me)throw Be}}else Ie()}function de(Ie){I.config.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=Ie)}},7103:(Zt,Je,B)=>{function I(X,Y,de,Ie=0,Ne=!1){const Me=Y.schedule(function(){de(),Ne?X.add(this.schedule(null,Ie)):this.unsubscribe()},Ie);if(X.add(Me),!Ne)return Me}B.d(Je,{f:()=>I})},2737:(Zt,Je,B)=>{function I(X){return X}B.d(Je,{y:()=>I})},4266:(Zt,Je,B)=>{B.d(Je,{z:()=>I});const I=X=>X&&"number"==typeof X.length&&"function"!=typeof X},5726:(Zt,Je,B)=>{B.d(Je,{D:()=>X});var I=B(4674);function X(Y){return Symbol.asyncIterator&&(0,I.m)(Y?.[Symbol.asyncIterator])}},4674:(Zt,Je,B)=>{function I(X){return"function"==typeof X}B.d(Je,{m:()=>I})},8382:(Zt,Je,B)=>{B.d(Je,{c:()=>Y});var I=B(4850),X=B(4674);function Y(de){return(0,X.m)(de[I.L])}},3664:(Zt,Je,B)=>{B.d(Je,{T:()=>Y});var I=B(4971),X=B(4674);function Y(de){return(0,X.m)(de?.[I.h])}},2664:(Zt,Je,B)=>{B.d(Je,{b:()=>Y});var I=B(5592),X=B(4674);function Y(de){return!!de&&(de instanceof I.y||(0,X.m)(de.lift)&&(0,X.m)(de.subscribe))}},4026:(Zt,Je,B)=>{B.d(Je,{t:()=>X});var I=B(4674);function X(Y){return(0,I.m)(Y?.then)}},541:(Zt,Je,B)=>{B.d(Je,{L:()=>de,Q:()=>Y});var I=B(7582),X=B(4674);function Y(Ie){return(0,I.FC)(this,arguments,function*(){const Me=Ie.getReader();try{for(;;){const{value:Be,done:Pe}=yield(0,I.qq)(Me.read());if(Pe)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(Be)}}finally{Me.releaseLock()}})}function de(Ie){return(0,X.m)(Ie?.getReader)}},9360:(Zt,Je,B)=>{B.d(Je,{A:()=>X,e:()=>Y});var I=B(4674);function X(de){return(0,I.m)(de?.lift)}function Y(de){return Ie=>{if(X(Ie))return Ie.lift(function(Ne){try{return de(Ne,this)}catch(Me){this.error(Me)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Zt,Je,B)=>{B.d(Je,{Z:()=>de});var I=B(7398);const{isArray:X}=Array;function de(Ie){return(0,I.U)(Ne=>function Y(Ie,Ne){return X(Ne)?Ie(...Ne):Ie(Ne)}(Ie,Ne))}},2420:(Zt,Je,B)=>{function I(){}B.d(Je,{Z:()=>I})},8407:(Zt,Je,B)=>{B.d(Je,{U:()=>Y,z:()=>X});var I=B(2737);function X(...de){return Y(de)}function Y(de){return 0===de.length?I.y:1===de.length?de[0]:function(Ne){return de.reduce((Me,Be)=>Be(Me),Ne)}}},3894:(Zt,Je,B)=>{B.d(Je,{h:()=>Y});var I=B(2653),X=B(7599);function Y(de){X.z.setTimeout(()=>{const{onUnhandledError:Ie}=I.config;if(!Ie)throw de;Ie(de)})}},9853:(Zt,Je,B)=>{function I(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Je,{z:()=>I})},6825:(Zt,Je,B)=>{B.d(Je,{LC:()=>X,ZE:()=>bt,ZN:()=>Pt,_j:()=>I,jt:()=>Ie,k1:()=>Le,l3:()=>Y,oB:()=>Be,vP:()=>Me});class I{}class X{}const Y="*";function Ie(Mt,fe=null){return{type:4,styles:fe,timings:Mt}}function Me(Mt,fe=null){return{type:2,steps:Mt,options:fe}}function Be(Mt){return{type:6,styles:Mt,offset:null}}class Pt{constructor(fe=0,Ze=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=fe+Ze}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(fe=>fe()),this._onDoneFns=[])}onStart(fe){this._originalOnStartFns.push(fe),this._onStartFns.push(fe)}onDone(fe){this._originalOnDoneFns.push(fe),this._onDoneFns.push(fe)}onDestroy(fe){this._onDestroyFns.push(fe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(fe=>fe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(fe=>fe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(fe){this._position=this.totalTime?fe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(fe){const Ze="start"==fe?this._onStartFns:this._onDoneFns;Ze.forEach(Ce=>Ce()),Ze.length=0}}class bt{constructor(fe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=fe;let Ze=0,Ce=0,st=0;const dt=this.players.length;0==dt?queueMicrotask(()=>this._onFinish()):this.players.forEach($e=>{$e.onDone(()=>{++Ze==dt&&this._onFinish()}),$e.onDestroy(()=>{++Ce==dt&&this._onDestroy()}),$e.onStart(()=>{++st==dt&&this._onStart()})}),this.totalTime=this.players.reduce(($e,qe)=>Math.max($e,qe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(fe=>fe()),this._onDoneFns=[])}init(){this.players.forEach(fe=>fe.init())}onStart(fe){this._onStartFns.push(fe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(fe=>fe()),this._onStartFns=[])}onDone(fe){this._onDoneFns.push(fe)}onDestroy(fe){this._onDestroyFns.push(fe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(fe=>fe.play())}pause(){this.players.forEach(fe=>fe.pause())}restart(){this.players.forEach(fe=>fe.restart())}finish(){this._onFinish(),this.players.forEach(fe=>fe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(fe=>fe.destroy()),this._onDestroyFns.forEach(fe=>fe()),this._onDestroyFns=[])}reset(){this.players.forEach(fe=>fe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(fe){const Ze=fe*this.totalTime;this.players.forEach(Ce=>{const st=Ce.totalTime?Math.min(1,Ze/Ce.totalTime):1;Ce.setPosition(st)})}getPosition(){const fe=this.players.reduce((Ze,Ce)=>null===Ze||Ce.totalTime>Ze.totalTime?Ce:Ze,null);return null!=fe?fe.getPosition():0}beforeDestroy(){this.players.forEach(fe=>{fe.beforeDestroy&&fe.beforeDestroy()})}triggerCallback(fe){const Ze="start"==fe?this._onStartFns:this._onDoneFns;Ze.forEach(Ce=>Ce()),Ze.length=0}}const Le="!"},6814:(Zt,Je,B)=>{B.d(Je,{Do:()=>wt,EM:()=>Es,HT:()=>de,JF:()=>Wi,K0:()=>Ne,Mx:()=>ss,NF:()=>jo,O5:()=>uo,PM:()=>fo,S$:()=>mt,V_:()=>Be,Ye:()=>Pt,b0:()=>kt,bD:()=>Vo,ez:()=>ds,q:()=>Y,w_:()=>Ie});var I=B(5879);let X=null;function Y(){return X}function de(R){X||(X=R)}class Ie{}const Ne=new I.OlP("DocumentToken");let Me=(()=>{class R{historyGo(F){throw new Error("Not implemented")}static#e=this.\u0275fac=function(G){return new(G||R)};static#t=this.\u0275prov=I.Yz7({token:R,factory:function(){return(0,I.f3M)(Pe)},providedIn:"platform"})}return R})();const Be=new I.OlP("Location Initialized");let Pe=(()=>{class R extends Me{constructor(){super(),this._doc=(0,I.f3M)(Ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(F){const G=Y().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",F,!1),()=>G.removeEventListener("popstate",F)}onHashChange(F){const G=Y().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",F,!1),()=>G.removeEventListener("hashchange",F)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(F){this._location.pathname=F}pushState(F,G,ge){this._history.pushState(F,G,ge)}replaceState(F,G,ge){this._history.replaceState(F,G,ge)}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}static#e=this.\u0275fac=function(G){return new(G||R)};static#t=this.\u0275prov=I.Yz7({token:R,factory:function(){return new R},providedIn:"platform"})}return R})();function ae(R,K){if(0==R.length)return K;if(0==K.length)return R;let F=0;return R.endsWith("/")&&F++,K.startsWith("/")&&F++,2==F?R+K.substring(1):1==F?R+K:R+"/"+K}function he(R){const K=R.match(/#|\?|$/),F=K&&K.index||R.length;return R.slice(0,F-("/"===R[F-1]?1:0))+R.slice(F)}function Ae(R){return R&&"?"!==R[0]?"?"+R:R}let mt=(()=>{class R{historyGo(F){throw new Error("Not implemented")}static#e=this.\u0275fac=function(G){return new(G||R)};static#t=this.\u0275prov=I.Yz7({token:R,factory:function(){return(0,I.f3M)(kt)},providedIn:"root"})}return R})();const ut=new I.OlP("appBaseHref");let kt=(()=>{class R extends mt{constructor(F,G){super(),this._platformLocation=F,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,I.f3M)(Ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return ae(this._baseHref,F)}path(F=!1){const G=this._platformLocation.pathname+Ae(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&F?`${G}${ge}`:G}pushState(F,G,ge,et){const lt=this.prepareExternalUrl(ge+Ae(et));this._platformLocation.pushState(F,G,lt)}replaceState(F,G,ge,et){const lt=this.prepareExternalUrl(ge+Ae(et));this._platformLocation.replaceState(F,G,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static#e=this.\u0275fac=function(G){return new(G||R)(I.LFG(Me),I.LFG(ut,8))};static#t=this.\u0275prov=I.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),wt=(()=>{class R extends mt{constructor(F,G){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(F){const G=ae(this._baseHref,F);return G.length>0?"#"+G:G}pushState(F,G,ge,et){let lt=this.prepareExternalUrl(ge+Ae(et));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.pushState(F,G,lt)}replaceState(F,G,ge,et){let lt=this.prepareExternalUrl(ge+Ae(et));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.replaceState(F,G,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static#e=this.\u0275fac=function(G){return new(G||R)(I.LFG(Me),I.LFG(ut,8))};static#t=this.\u0275prov=I.Yz7({token:R,factory:R.\u0275fac})}return R})(),Pt=(()=>{class R{constructor(F){this._subject=new I.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=F;const G=this._locationStrategy.getBaseHref();this._basePath=function fe(R){if(new RegExp("^(https?:)?//").test(R)){const[,F]=R.split(/\/\/[^\/]+/);return F}return R}(he(Mt(G))),this._locationStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,G=""){return this.path()==this.normalize(F+Ae(G))}normalize(F){return R.stripTrailingSlash(function Le(R,K){if(!R||!K.startsWith(R))return K;const F=K.substring(R.length);return""===F||["/",";","?","#"].includes(F[0])?F:K}(this._basePath,Mt(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,G="",ge=null){this._locationStrategy.pushState(ge,"",F,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Ae(G)),ge)}replaceState(F,G="",ge=null){this._locationStrategy.replaceState(ge,"",F,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Ae(G)),ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){this._locationStrategy.historyGo?.(F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(F);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",G){this._urlChangeListeners.forEach(ge=>ge(F,G))}subscribe(F,G,ge){return this._subject.subscribe({next:F,error:G,complete:ge})}static#e=this.normalizeQueryParams=Ae;static#t=this.joinWithSlash=ae;static#n=this.stripTrailingSlash=he;static#r=this.\u0275fac=function(G){return new(G||R)(I.LFG(mt))};static#i=this.\u0275prov=I.Yz7({token:R,factory:function(){return function bt(){return new Pt((0,I.LFG)(mt))}()},providedIn:"root"})}return R})();function Mt(R){return R.replace(/\/index.html$/,"")}function ss(R,K){K=encodeURIComponent(K);for(const F of R.split(";")){const G=F.indexOf("="),[ge,et]=-1==G?[F,""]:[F.slice(0,G),F.slice(G+1)];if(ge.trim()===K)return decodeURIComponent(et)}return null}let uo=(()=>{class R{constructor(F,G){this._viewContainer=F,this._context=new Ys,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){Fo("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){Fo("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,G){return!0}static#e=this.\u0275fac=function(G){return new(G||R)(I.Y36(I.s_b),I.Y36(I.Rgc))};static#t=this.\u0275dir=I.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return R})();class Ys{constructor(){this.$implicit=null,this.ngIf=null}}function Fo(R,K){if(K&&!K.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,I.AaK)(K)}'.`)}let ds=(()=>{class R{static#e=this.\u0275fac=function(G){return new(G||R)};static#t=this.\u0275mod=I.oAB({type:R});static#n=this.\u0275inj=I.cJS({})}return R})();const Vo="browser",Xs="server";function jo(R){return R===Vo}function fo(R){return R===Xs}let Es=(()=>{class R{static#e=this.\u0275prov=(0,I.Yz7)({token:R,providedIn:"root",factory:()=>new Si((0,I.LFG)(Ne),window)})}return R})();class Si{constructor(K,F){this.document=K,this.window=F,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const F=function To(R,K){const F=R.getElementById(K)||R.getElementsByName(K)[0];if(F)return F;if("function"==typeof R.createTreeWalker&&R.body&&"function"==typeof R.body.attachShadow){const G=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let ge=G.currentNode;for(;ge;){const et=ge.shadowRoot;if(et){const lt=et.getElementById(K)||et.querySelector(`[name="${K}"]`);if(lt)return lt}ge=G.nextNode()}}return null}(this.document,K);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=K)}}scrollToElement(K){const F=K.getBoundingClientRect(),G=F.left+this.window.pageXOffset,ge=F.top+this.window.pageYOffset,et=this.offset();this.window.scrollTo(G-et[0],ge-et[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=Bs(this.window.history)||Bs(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Bs(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Wi{}},9862:(Zt,Je,B)=>{B.d(Je,{JF:()=>re,eN:()=>Ue});var I=B(5879),X=B(2096),Y=B(2459),de=B(5592),Ie=B(6328),Ne=B(2181),Me=B(7398),Be=B(4716),Pe=B(4664),ae=B(6814);class he{}class Ae{}class mt{constructor(Te){this.normalizedNames=new Map,this.lazyUpdate=null,Te?"string"==typeof Te?this.lazyInit=()=>{this.headers=new Map,Te.split("\n").forEach(be=>{const me=be.indexOf(":");if(me>0){const ve=be.slice(0,me),Ve=ve.toLowerCase(),at=be.slice(me+1).trim();this.maybeSetNormalizedName(ve,Ve),this.headers.has(Ve)?this.headers.get(Ve).push(at):this.headers.set(Ve,[at])}})}:typeof Headers<"u"&&Te instanceof Headers?(this.headers=new Map,Te.forEach((be,me)=>{this.setHeaderEntries(me,be)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(Te).forEach(([be,me])=>{this.setHeaderEntries(be,me)})}:this.headers=new Map}has(Te){return this.init(),this.headers.has(Te.toLowerCase())}get(Te){this.init();const be=this.headers.get(Te.toLowerCase());return be&&be.length>0?be[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Te){return this.init(),this.headers.get(Te.toLowerCase())||null}append(Te,be){return this.clone({name:Te,value:be,op:"a"})}set(Te,be){return this.clone({name:Te,value:be,op:"s"})}delete(Te,be){return this.clone({name:Te,value:be,op:"d"})}maybeSetNormalizedName(Te,be){this.normalizedNames.has(be)||this.normalizedNames.set(be,Te)}init(){this.lazyInit&&(this.lazyInit instanceof mt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Te=>this.applyUpdate(Te)),this.lazyUpdate=null))}copyFrom(Te){Te.init(),Array.from(Te.headers.keys()).forEach(be=>{this.headers.set(be,Te.headers.get(be)),this.normalizedNames.set(be,Te.normalizedNames.get(be))})}clone(Te){const be=new mt;return be.lazyInit=this.lazyInit&&this.lazyInit instanceof mt?this.lazyInit:this,be.lazyUpdate=(this.lazyUpdate||[]).concat([Te]),be}applyUpdate(Te){const be=Te.name.toLowerCase();switch(Te.op){case"a":case"s":let me=Te.value;if("string"==typeof me&&(me=[me]),0===me.length)return;this.maybeSetNormalizedName(Te.name,be);const ve=("a"===Te.op?this.headers.get(be):void 0)||[];ve.push(...me),this.headers.set(be,ve);break;case"d":const Ve=Te.value;if(Ve){let at=this.headers.get(be);if(!at)return;at=at.filter(Qt=>-1===Ve.indexOf(Qt)),0===at.length?(this.headers.delete(be),this.normalizedNames.delete(be)):this.headers.set(be,at)}else this.headers.delete(be),this.normalizedNames.delete(be)}}setHeaderEntries(Te,be){const me=(Array.isArray(be)?be:[be]).map(Ve=>Ve.toString()),ve=Te.toLowerCase();this.headers.set(ve,me),this.maybeSetNormalizedName(Te,ve)}forEach(Te){this.init(),Array.from(this.normalizedNames.keys()).forEach(be=>Te(this.normalizedNames.get(be),this.headers.get(be)))}}class kt{encodeKey(Te){return Le(Te)}encodeValue(Te){return Le(Te)}decodeKey(Te){return decodeURIComponent(Te)}decodeValue(Te){return decodeURIComponent(Te)}}const Pt=/%(\d[a-f0-9])/gi,bt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Le(We){return encodeURIComponent(We).replace(Pt,(Te,be)=>bt[be]??Te)}function Mt(We){return`${We}`}class fe{constructor(Te={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Te.encoder||new kt,Te.fromString){if(Te.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wt(We,Te){const be=new Map;return We.length>0&&We.replace(/^\?/,"").split("&").forEach(ve=>{const Ve=ve.indexOf("="),[at,Qt]=-1==Ve?[Te.decodeKey(ve),""]:[Te.decodeKey(ve.slice(0,Ve)),Te.decodeValue(ve.slice(Ve+1))],Bt=be.get(at)||[];Bt.push(Qt),be.set(at,Bt)}),be}(Te.fromString,this.encoder)}else Te.fromObject?(this.map=new Map,Object.keys(Te.fromObject).forEach(be=>{const me=Te.fromObject[be],ve=Array.isArray(me)?me.map(Mt):[Mt(me)];this.map.set(be,ve)})):this.map=null}has(Te){return this.init(),this.map.has(Te)}get(Te){this.init();const be=this.map.get(Te);return be?be[0]:null}getAll(Te){return this.init(),this.map.get(Te)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Te,be){return this.clone({param:Te,value:be,op:"a"})}appendAll(Te){const be=[];return Object.keys(Te).forEach(me=>{const ve=Te[me];Array.isArray(ve)?ve.forEach(Ve=>{be.push({param:me,value:Ve,op:"a"})}):be.push({param:me,value:ve,op:"a"})}),this.clone(be)}set(Te,be){return this.clone({param:Te,value:be,op:"s"})}delete(Te,be){return this.clone({param:Te,value:be,op:"d"})}toString(){return this.init(),this.keys().map(Te=>{const be=this.encoder.encodeKey(Te);return this.map.get(Te).map(me=>be+"="+this.encoder.encodeValue(me)).join("&")}).filter(Te=>""!==Te).join("&")}clone(Te){const be=new fe({encoder:this.encoder});return be.cloneFrom=this.cloneFrom||this,be.updates=(this.updates||[]).concat(Te),be}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Te=>this.map.set(Te,this.cloneFrom.map.get(Te))),this.updates.forEach(Te=>{switch(Te.op){case"a":case"s":const be=("a"===Te.op?this.map.get(Te.param):void 0)||[];be.push(Mt(Te.value)),this.map.set(Te.param,be);break;case"d":if(void 0===Te.value){this.map.delete(Te.param);break}{let me=this.map.get(Te.param)||[];const ve=me.indexOf(Mt(Te.value));-1!==ve&&me.splice(ve,1),me.length>0?this.map.set(Te.param,me):this.map.delete(Te.param)}}}),this.cloneFrom=this.updates=null)}}class Ce{constructor(){this.map=new Map}set(Te,be){return this.map.set(Te,be),this}get(Te){return this.map.has(Te)||this.map.set(Te,Te.defaultValue()),this.map.get(Te)}delete(Te){return this.map.delete(Te),this}has(Te){return this.map.has(Te)}keys(){return this.map.keys()}}function dt(We){return typeof ArrayBuffer<"u"&&We instanceof ArrayBuffer}function $e(We){return typeof Blob<"u"&&We instanceof Blob}function qe(We){return typeof FormData<"u"&&We instanceof FormData}class jt{constructor(Te,be,me,ve){let Ve;if(this.url=be,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Te.toUpperCase(),function st(We){switch(We){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ve?(this.body=void 0!==me?me:null,Ve=ve):Ve=me,Ve&&(this.reportProgress=!!Ve.reportProgress,this.withCredentials=!!Ve.withCredentials,Ve.responseType&&(this.responseType=Ve.responseType),Ve.headers&&(this.headers=Ve.headers),Ve.context&&(this.context=Ve.context),Ve.params&&(this.params=Ve.params)),this.headers||(this.headers=new mt),this.context||(this.context=new Ce),this.params){const at=this.params.toString();if(0===at.length)this.urlWithParams=be;else{const Qt=be.indexOf("?");this.urlWithParams=be+(-1===Qt?"?":Qt<be.length-1?"&":"")+at}}else this.params=new fe,this.urlWithParams=be}serializeBody(){return null===this.body?null:dt(this.body)||$e(this.body)||qe(this.body)||function Ct(We){return typeof URLSearchParams<"u"&&We instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof fe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||qe(this.body)?null:$e(this.body)?this.body.type||null:dt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof fe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Te={}){const be=Te.method||this.method,me=Te.url||this.url,ve=Te.responseType||this.responseType,Ve=void 0!==Te.body?Te.body:this.body,at=void 0!==Te.withCredentials?Te.withCredentials:this.withCredentials,Qt=void 0!==Te.reportProgress?Te.reportProgress:this.reportProgress;let Bt=Te.headers||this.headers,mn=Te.params||this.params;const dr=Te.context??this.context;return void 0!==Te.setHeaders&&(Bt=Object.keys(Te.setHeaders).reduce((nr,Fr)=>nr.set(Fr,Te.setHeaders[Fr]),Bt)),Te.setParams&&(mn=Object.keys(Te.setParams).reduce((nr,Fr)=>nr.set(Fr,Te.setParams[Fr]),mn)),new jt(be,me,Ve,{params:mn,headers:Bt,context:dr,reportProgress:Qt,responseType:ve,withCredentials:at})}}var pn=function(We){return We[We.Sent=0]="Sent",We[We.UploadProgress=1]="UploadProgress",We[We.ResponseHeader=2]="ResponseHeader",We[We.DownloadProgress=3]="DownloadProgress",We[We.Response=4]="Response",We[We.User=5]="User",We}(pn||{});class En{constructor(Te,be=200,me="OK"){this.headers=Te.headers||new mt,this.status=void 0!==Te.status?Te.status:be,this.statusText=Te.statusText||me,this.url=Te.url||null,this.ok=this.status>=200&&this.status<300}}class Xn extends En{constructor(Te={}){super(Te),this.type=pn.ResponseHeader}clone(Te={}){return new Xn({headers:Te.headers||this.headers,status:void 0!==Te.status?Te.status:this.status,statusText:Te.statusText||this.statusText,url:Te.url||this.url||void 0})}}class Bn extends En{constructor(Te={}){super(Te),this.type=pn.Response,this.body=void 0!==Te.body?Te.body:null}clone(Te={}){return new Bn({body:void 0!==Te.body?Te.body:this.body,headers:Te.headers||this.headers,status:void 0!==Te.status?Te.status:this.status,statusText:Te.statusText||this.statusText,url:Te.url||this.url||void 0})}}class Lr extends En{constructor(Te){super(Te,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Te.url||"(unknown url)"}`:`Http failure response for ${Te.url||"(unknown url)"}: ${Te.status} ${Te.statusText}`,this.error=Te.error||null}}function er(We,Te){return{body:Te,headers:We.headers,context:We.context,observe:We.observe,params:We.params,reportProgress:We.reportProgress,responseType:We.responseType,withCredentials:We.withCredentials}}let Ue=(()=>{class We{constructor(be){this.handler=be}request(be,me,ve={}){let Ve;if(be instanceof jt)Ve=be;else{let Bt,mn;Bt=ve.headers instanceof mt?ve.headers:new mt(ve.headers),ve.params&&(mn=ve.params instanceof fe?ve.params:new fe({fromObject:ve.params})),Ve=new jt(be,me,void 0!==ve.body?ve.body:null,{headers:Bt,context:ve.context,params:mn,reportProgress:ve.reportProgress,responseType:ve.responseType||"json",withCredentials:ve.withCredentials})}const at=(0,X.of)(Ve).pipe((0,Ie.b)(Bt=>this.handler.handle(Bt)));if(be instanceof jt||"events"===ve.observe)return at;const Qt=at.pipe((0,Ne.h)(Bt=>Bt instanceof Bn));switch(ve.observe||"body"){case"body":switch(Ve.responseType){case"arraybuffer":return Qt.pipe((0,Me.U)(Bt=>{if(null!==Bt.body&&!(Bt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Bt.body}));case"blob":return Qt.pipe((0,Me.U)(Bt=>{if(null!==Bt.body&&!(Bt.body instanceof Blob))throw new Error("Response is not a Blob.");return Bt.body}));case"text":return Qt.pipe((0,Me.U)(Bt=>{if(null!==Bt.body&&"string"!=typeof Bt.body)throw new Error("Response is not a string.");return Bt.body}));default:return Qt.pipe((0,Me.U)(Bt=>Bt.body))}case"response":return Qt;default:throw new Error(`Unreachable: unhandled observe type ${ve.observe}}`)}}delete(be,me={}){return this.request("DELETE",be,me)}get(be,me={}){return this.request("GET",be,me)}head(be,me={}){return this.request("HEAD",be,me)}jsonp(be,me){return this.request("JSONP",be,{params:(new fe).append(me,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(be,me={}){return this.request("OPTIONS",be,me)}patch(be,me,ve={}){return this.request("PATCH",be,er(ve,me))}post(be,me,ve={}){return this.request("POST",be,er(ve,me))}put(be,me,ve={}){return this.request("PUT",be,er(ve,me))}static#e=this.\u0275fac=function(me){return new(me||We)(I.LFG(he))};static#t=this.\u0275prov=I.Yz7({token:We,factory:We.\u0275fac})}return We})();function yt(We,Te){return Te(We)}function pt(We,Te){return(be,me)=>Te.intercept(be,{handle:ve=>We(ve,me)})}const Ht=new I.OlP(""),cn=new I.OlP(""),Mn=new I.OlP("");function Kt(){let We=null;return(Te,be)=>{null===We&&(We=((0,I.f3M)(Ht,{optional:!0})??[]).reduceRight(pt,yt));const me=(0,I.f3M)(I.HDt),ve=me.add();return We(Te,be).pipe((0,Be.x)(()=>me.remove(ve)))}}let un=(()=>{class We extends he{constructor(be,me){super(),this.backend=be,this.injector=me,this.chain=null,this.pendingTasks=(0,I.f3M)(I.HDt)}handle(be){if(null===this.chain){const ve=Array.from(new Set([...this.injector.get(cn),...this.injector.get(Mn,[])]));this.chain=ve.reduceRight((Ve,at)=>function Lt(We,Te,be){return(me,ve)=>be.runInContext(()=>Te(me,Ve=>We(Ve,ve)))}(Ve,at,this.injector),yt)}const me=this.pendingTasks.add();return this.chain(be,ve=>this.backend.handle(ve)).pipe((0,Be.x)(()=>this.pendingTasks.remove(me)))}static#e=this.\u0275fac=function(me){return new(me||We)(I.LFG(Ae),I.LFG(I.lqb))};static#t=this.\u0275prov=I.Yz7({token:We,factory:We.\u0275fac})}return We})();const Mr=/^\)\]\}',?\n/;let Gn=(()=>{class We{constructor(be){this.xhrFactory=be}handle(be){if("JSONP"===be.method)throw new I.vHH(-2800,!1);const me=this.xhrFactory;return(me.\u0275loadImpl?(0,Y.D)(me.\u0275loadImpl()):(0,X.of)(null)).pipe((0,Pe.w)(()=>new de.y(Ve=>{const at=me.build();if(at.open(be.method,be.urlWithParams),be.withCredentials&&(at.withCredentials=!0),be.headers.forEach((Tr,pr)=>at.setRequestHeader(Tr,pr.join(","))),be.headers.has("Accept")||at.setRequestHeader("Accept","application/json, text/plain, */*"),!be.headers.has("Content-Type")){const Tr=be.detectContentTypeHeader();null!==Tr&&at.setRequestHeader("Content-Type",Tr)}if(be.responseType){const Tr=be.responseType.toLowerCase();at.responseType="json"!==Tr?Tr:"text"}const Qt=be.serializeBody();let Bt=null;const mn=()=>{if(null!==Bt)return Bt;const Tr=at.statusText||"OK",pr=new mt(at.getAllResponseHeaders()),vs=function Ci(We){return"responseURL"in We&&We.responseURL?We.responseURL:/^X-Request-URL:/m.test(We.getAllResponseHeaders())?We.getResponseHeader("X-Request-URL"):null}(at)||be.url;return Bt=new Xn({headers:pr,status:at.status,statusText:Tr,url:vs}),Bt},dr=()=>{let{headers:Tr,status:pr,statusText:vs,url:Pi}=mn(),Di=null;204!==pr&&(Di=typeof at.response>"u"?at.responseText:at.response),0===pr&&(pr=Di?200:0);let Ns=pr>=200&&pr<300;if("json"===be.responseType&&"string"==typeof Di){const Io=Di;Di=Di.replace(Mr,"");try{Di=""!==Di?JSON.parse(Di):null}catch(gr){Di=Io,Ns&&(Ns=!1,Di={error:gr,text:Di})}}Ns?(Ve.next(new Bn({body:Di,headers:Tr,status:pr,statusText:vs,url:Pi||void 0})),Ve.complete()):Ve.error(new Lr({error:Di,headers:Tr,status:pr,statusText:vs,url:Pi||void 0}))},nr=Tr=>{const{url:pr}=mn(),vs=new Lr({error:Tr,status:at.status||0,statusText:at.statusText||"Unknown Error",url:pr||void 0});Ve.error(vs)};let Fr=!1;const ss=Tr=>{Fr||(Ve.next(mn()),Fr=!0);let pr={type:pn.DownloadProgress,loaded:Tr.loaded};Tr.lengthComputable&&(pr.total=Tr.total),"text"===be.responseType&&at.responseText&&(pr.partialText=at.responseText),Ve.next(pr)},cs=Tr=>{let pr={type:pn.UploadProgress,loaded:Tr.loaded};Tr.lengthComputable&&(pr.total=Tr.total),Ve.next(pr)};return at.addEventListener("load",dr),at.addEventListener("error",nr),at.addEventListener("timeout",nr),at.addEventListener("abort",nr),be.reportProgress&&(at.addEventListener("progress",ss),null!==Qt&&at.upload&&at.upload.addEventListener("progress",cs)),at.send(Qt),Ve.next({type:pn.Sent}),()=>{at.removeEventListener("error",nr),at.removeEventListener("abort",nr),at.removeEventListener("load",dr),at.removeEventListener("timeout",nr),be.reportProgress&&(at.removeEventListener("progress",ss),null!==Qt&&at.upload&&at.upload.removeEventListener("progress",cs)),at.readyState!==at.DONE&&at.abort()}})))}static#e=this.\u0275fac=function(me){return new(me||We)(I.LFG(ae.JF))};static#t=this.\u0275prov=I.Yz7({token:We,factory:We.\u0275fac})}return We})();const wr=new I.OlP("XSRF_ENABLED"),Wn=new I.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Yt=new I.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Ir{}let is=(()=>{class We{constructor(be,me,ve){this.doc=be,this.platform=me,this.cookieName=ve,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const be=this.doc.cookie||"";return be!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ae.Mx)(be,this.cookieName),this.lastCookieString=be),this.lastToken}static#e=this.\u0275fac=function(me){return new(me||We)(I.LFG(ae.K0),I.LFG(I.Lbi),I.LFG(Wn))};static#t=this.\u0275prov=I.Yz7({token:We,factory:We.\u0275fac})}return We})();function yi(We,Te){const be=We.url.toLowerCase();if(!(0,I.f3M)(wr)||"GET"===We.method||"HEAD"===We.method||be.startsWith("http://")||be.startsWith("https://"))return Te(We);const me=(0,I.f3M)(Ir).getToken(),ve=(0,I.f3M)(Yt);return null!=me&&!We.headers.has(ve)&&(We=We.clone({headers:We.headers.set(ve,me)})),Te(We)}var br=function(We){return We[We.Interceptors=0]="Interceptors",We[We.LegacyInterceptors=1]="LegacyInterceptors",We[We.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",We[We.NoXsrfProtection=3]="NoXsrfProtection",We[We.JsonpSupport=4]="JsonpSupport",We[We.RequestsMadeViaParent=5]="RequestsMadeViaParent",We[We.Fetch=6]="Fetch",We}(br||{});function ei(...We){const Te=[Ue,Gn,un,{provide:he,useExisting:un},{provide:Ae,useExisting:Gn},{provide:cn,useValue:yi,multi:!0},{provide:wr,useValue:!0},{provide:Ir,useClass:is}];for(const be of We)Te.push(...be.\u0275providers);return(0,I.MR2)(Te)}const Nr=new I.OlP("LEGACY_INTERCEPTOR_FN");function An(){return function fr(We,Te){return{\u0275kind:We,\u0275providers:Te}}(br.LegacyInterceptors,[{provide:Nr,useFactory:Kt},{provide:cn,useExisting:Nr,multi:!0}])}let re=(()=>{class We{static#e=this.\u0275fac=function(me){return new(me||We)};static#t=this.\u0275mod=I.oAB({type:We});static#n=this.\u0275inj=I.cJS({providers:[ei(An())]})}return We})()},5879:(Zt,Je,B)=>{B.d(Je,{$8M:()=>pa,$WT:()=>Bo,$Z:()=>F_,AFp:()=>va,ALo:()=>fw,AaK:()=>Ae,CHM:()=>_u,CRH:()=>Sw,EJc:()=>BC,EpF:()=>Qf,F4k:()=>Hh,FYo:()=>om,FiY:()=>Mi,G48:()=>lD,GfV:()=>P_,HDt:()=>Zw,JOm:()=>yh,KtG:()=>mo,LFG:()=>An,Lbi:()=>Yg,Lck:()=>ET,MAs:()=>Mm,MMx:()=>ew,MR2:()=>id,NdJ:()=>Jy,Ojb:()=>T_,OlP:()=>Gr,Oqu:()=>i_,P3R:()=>Xm,PXZ:()=>eD,Q6J:()=>wg,QGY:()=>Cc,QbO:()=>Ch,Qsj:()=>ay,R0b:()=>Hl,RDi:()=>f_,Rgc:()=>Xv,SBq:()=>ad,Sil:()=>$C,Suo:()=>bw,TTD:()=>Kr,TgZ:()=>Kf,VuI:()=>kD,X6Q:()=>uD,XFs:()=>nn,Xpm:()=>_i,Xq5:()=>jy,Xts:()=>Cp,Y36:()=>tl,YKP:()=>X0,YNc:()=>Mu,Yjl:()=>co,Yz7:()=>Ht,Z0I:()=>un,ZZ4:()=>M0,_UZ:()=>Zf,_Vd:()=>Cf,_c5:()=>DD,_uU:()=>BE,aQg:()=>N0,c2e:()=>qw,cJS:()=>Mn,cg1:()=>zv,dDg:()=>YC,dqk:()=>Gn,eFA:()=>lI,eJc:()=>p0,eoX:()=>sI,f3M:()=>Ln,g9A:()=>Sp,h0i:()=>uv,hGG:()=>bD,hij:()=>s_,iGM:()=>Dw,ifc:()=>Tn,ip1:()=>Kw,jDz:()=>tw,kL8:()=>Gv,lG2:()=>Ia,lcZ:()=>pw,lqb:()=>el,lri:()=>rI,n5z:()=>ip,oAB:()=>Ui,q4F:()=>am,qFp:()=>FD,qLn:()=>ud,qZA:()=>qf,rWj:()=>iI,rg0:()=>gu,sBO:()=>cD,s_b:()=>bE,soG:()=>AE,tb:()=>C0,tp0:()=>fh,uIk:()=>bm,vHH:()=>fe,vpe:()=>tp,wAp:()=>Rg,xp6:()=>Hp,z2F:()=>dv,zSh:()=>su,zs3:()=>Yd});var I=B(8645),X=B(7394),Y=B(5619),de=B(5592),Ie=B(3019),Ne=B(2096),Me=B(3020),Be=B(4664),Pe=B(3997);function ae(n){for(let r in n)if(n[r]===ae)return r;throw Error("Could not find renamed property on target object.")}function Ae(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ae).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const u=r.indexOf("\n");return-1===u?r:r.substring(0,u)}function mt(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ut=ae({__forward_ref__:ae});function kt(n){return n.__forward_ref__=kt,n.toString=function(){return Ae(this())},n}function wt(n){return Pt(n)?n():n}function Pt(n){return"function"==typeof n&&n.hasOwnProperty(ut)&&n.__forward_ref__===kt}function bt(n){return n&&!!n.\u0275providers}const Mt="https://g.co/ng/security#xss";class fe extends Error{constructor(r,u){super(function Ze(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,u)),this.code=r}}function Ce(n){return"string"==typeof n?n:null==n?"":String(n)}function Ct(n,r){throw new fe(-201,!1)}function oe(n,r){null==n&&function ke(n,r,u,h){throw new Error(`ASSERTION ERROR: ${n}`+(null==h?"":` [Expected=> ${u} ${h} ${r} <=Actual]`))}(r,n,null,"!=")}function Ht(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kt(n){return $n(n,Ni)||$n(n,rs)}function un(n){return null!==Kt(n)}function $n(n,r){return n.hasOwnProperty(r)?n[r]:null}function Us(n){return n&&(n.hasOwnProperty(jr)||n.hasOwnProperty(Ti))?n[jr]:null}const Ni=ae({\u0275prov:ae}),jr=ae({\u0275inj:ae}),rs=ae({ngInjectableDef:ae}),Ti=ae({ngInjectorDef:ae});var nn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(nn||{});let xn;function sr(n){const r=xn;return xn=n,r}function Mr(n,r,u){const h=Kt(n);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&nn.Optional?null:void 0!==r?r:void Ct(Ae(n))}const Gn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),$r={},Yt="__NG_DI_FLAG__",Ir="ngTempTokenPath",yi=/\n/gm,br="__source";let fr;function tr(n){const r=fr;return fr=n,r}function Nr(n,r=nn.Default){if(void 0===fr)throw new fe(-203,!1);return null===fr?Mr(n,void 0,r):fr.get(n,r&nn.Optional?null:void 0,r)}function An(n,r=nn.Default){return(function gn(){return xn}()||Nr)(wt(n),r)}function Ln(n,r=nn.Default){return An(n,we(r))}function we(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Q(n){const r=[];for(let u=0;u<n.length;u++){const h=wt(n[u]);if(Array.isArray(h)){if(0===h.length)throw new fe(900,!1);let f,y=nn.Default;for(let w=0;w<h.length;w++){const A=h[w],O=J(A);"number"==typeof O?-1===O?f=A.token:y|=O:f=A}r.push(An(f,y))}else r.push(An(h))}return r}function ne(n,r){return n[Yt]=r,n.prototype[Yt]=r,n}function J(n){return n[Yt]}function gt(n){return{toString:n}.toString()}var Ut=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ut||{}),Tn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Tn||{});const Jt={},xt=[],bn=ae({\u0275cmp:ae}),Hr=ae({\u0275dir:ae}),We=ae({\u0275pipe:ae}),Te=ae({\u0275mod:ae}),be=ae({\u0275fac:ae}),me=ae({__NG_ELEMENT_ID__:ae}),ve=ae({__NG_ENV_ID__:ae});function Ve(n,r,u){let h=n.length;for(;;){const f=n.indexOf(r,u);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=r.length;if(f+y===h||n.charCodeAt(f+y)<=32)return f}u=f+1}}function at(n,r,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const y=u[h++],w=u[h++],A=u[h++];n.setAttribute(r,w,A,y)}else{const y=f,w=u[++h];Bt(y)?n.setProperty(r,y,w):n.setAttribute(r,y,w),h++}}return h}function Qt(n){return 3===n||4===n||6===n}function Bt(n){return 64===n.charCodeAt(0)}function mn(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let u=-1;for(let h=0;h<r.length;h++){const f=r[h];"number"==typeof f?u=f:0===u||dr(n,u,f,null,-1===u||2===u?r[++h]:null)}}return n}function dr(n,r,u,h,f){let y=0,w=n.length;if(-1===r)w=-1;else for(;y<n.length;){const A=n[y++];if("number"==typeof A){if(A===r){w=-1;break}if(A>r){w=y-1;break}}}for(;y<n.length;){const A=n[y];if("number"==typeof A)break;if(A===u){if(null===h)return void(null!==f&&(n[y+1]=f));if(h===n[y+1])return void(n[y+2]=f)}y++,null!==h&&y++,null!==f&&y++}-1!==w&&(n.splice(w,0,r),y=w+1),n.splice(y++,0,u),null!==h&&n.splice(y++,0,h),null!==f&&n.splice(y++,0,f)}const nr="ng-template";function Fr(n,r,u){let h=0,f=!0;for(;h<n.length;){let y=n[h++];if("string"==typeof y&&f){const w=n[h++];if(u&&"class"===y&&-1!==Ve(w.toLowerCase(),r,0))return!0}else{if(1===y){for(;h<n.length&&"string"==typeof(y=n[h++]);)if(y.toLowerCase()===r)return!0;return!1}"number"==typeof y&&(f=!1)}}return!1}function ss(n){return 4===n.type&&n.value!==nr}function cs(n,r,u){return r===(4!==n.type||u?n.value:nr)}function Tr(n,r,u){let h=4;const f=n.attrs||[],y=function Ns(n){for(let r=0;r<n.length;r++)if(Qt(n[r]))return r;return n.length}(f);let w=!1;for(let A=0;A<r.length;A++){const O=r[A];if("number"!=typeof O){if(!w)if(4&h){if(h=2|1&h,""!==O&&!cs(n,O,u)||""===O&&1===r.length){if(pr(h))return!1;w=!0}}else{const H=8&h?O:r[++A];if(8&h&&null!==n.attrs){if(!Fr(n.attrs,H,u)){if(pr(h))return!1;w=!0}continue}const le=vs(8&h?"class":O,f,ss(n),u);if(-1===le){if(pr(h))return!1;w=!0;continue}if(""!==H){let Fe;Fe=le>y?"":f[le+1].toLowerCase();const Xe=8&h?Fe:null;if(Xe&&-1!==Ve(Xe,H,0)||2&h&&H!==Fe){if(pr(h))return!1;w=!0}}}}else{if(!w&&!pr(h)&&!pr(O))return!1;if(w&&pr(O))continue;w=!1,h=O|1&h}}return pr(h)||w}function pr(n){return 0==(1&n)}function vs(n,r,u,h){if(null===r)return-1;let f=0;if(h||!u){let y=!1;for(;f<r.length;){const w=r[f];if(w===n)return f;if(3===w||6===w)y=!0;else{if(1===w||2===w){let A=r[++f];for(;"string"==typeof A;)A=r[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=y?1:2}return-1}return function Io(n,r){let u=n.indexOf(4);if(u>-1)for(u++;u<n.length;){const h=n[u];if("number"==typeof h)return-1;if(h===r)return u;u++}return-1}(r,n)}function Pi(n,r,u=!1){for(let h=0;h<r.length;h++)if(Tr(n,r[h],u))return!0;return!1}function uo(n,r){return n?":not("+r.trim()+")":r}function Ys(n){let r=n[0],u=1,h=2,f="",y=!1;for(;u<n.length;){let w=n[u];if("string"==typeof w)if(2&h){const A=n[++u];f+="["+w+(A.length>0?'="'+A+'"':"")+"]"}else 8&h?f+="."+w:4&h&&(f+=" "+w);else""!==f&&!pr(w)&&(r+=uo(y,f),f=""),h=w,y=y||!pr(h);u++}return""!==f&&(r+=uo(y,f)),r}function _i(n){return gt(()=>{const r=ia(n),u={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ut.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Tn.Emulated,styles:n.styles||xt,_:null,schemas:n.schemas||null,tView:null,id:""};xe(u);const h=n.dependencies;return u.directiveDefs=Re(h,!1),u.pipeDefs=Re(h,!0),u.id=function vt(n){let r=0;const u=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const f of u)r=Math.imul(31,r)+f.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(u),u})}function Qs(n){return Fn(n)||xi(n)}function qa(n){return null!==n}function Ui(n){return gt(()=>({type:n.type,bootstrap:n.bootstrap||xt,declarations:n.declarations||xt,imports:n.imports||xt,exports:n.exports||xt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hi(n,r){if(null==n)return Jt;const u={};for(const h in n)if(n.hasOwnProperty(h)){let f=n[h],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),u[f]=h,r&&(r[f]=y)}return u}function Ia(n){return gt(()=>{const r=ia(n);return xe(r),r})}function co(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Fn(n){return n[bn]||null}function xi(n){return n[Hr]||null}function Sr(n){return n[We]||null}function Bo(n){const r=Fn(n)||xi(n)||Sr(n);return null!==r&&r.standalone}function Bi(n,r){const u=n[Te]||null;if(!u&&!0===r)throw new Error(`Type ${Ae(n)} does not have '\u0275mod' property.`);return u}function ia(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:n.inputs||Jt,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||xt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hi(n.inputs,r),outputs:hi(n.outputs)}}function xe(n){n.features?.forEach(r=>r(n))}function Re(n,r){if(!n)return null;const u=r?Sr:Qs;return()=>("function"==typeof n?n():n).map(h=>u(h)).filter(qa)}const Tt=0,ft=1,Xt=2,_n=3,Vn=4,bi=5,fi=6,Vi=7,Zr=8,os=9,Yi=10,Un=11,as=12,ho=13,us=14,Yr=15,Ta=16,Ca=17,ds=18,Vo=19,Xs=20,pi=21,yr=22,jo=23,fo=24,Qn=25,$o=1,Es=2,Si=7,To=9,Wi=11;function ui(n){return Array.isArray(n)&&"object"==typeof n[$o]}function hs(n){return Array.isArray(n)&&!0===n[$o]}function Vs(n){return 0!=(4&n.flags)}function Co(n){return n.componentOffset>-1}function Da(n){return 1==(1&n.flags)}function Qi(n){return!!n.template}function Ai(n){return 0!=(512&n[Xt])}function Hn(n,r){return n.hasOwnProperty(be)?n[be]:null}let aa=Gn.WeakRef??class Ko{constructor(r){this.ref=r}deref(){return this.ref}},ws=0,Oi=null,qo=!1;function vi(n){const r=Oi;return Oi=n,r}class no{constructor(){this.id=ws++,this.ref=function ua(n){return new aa(n)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[r,u]of this.producers){const h=u.producerNode.deref();if(null!=h&&u.atTrackingVersion===this.trackingVersion){if(h.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(r),h?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const r=qo;qo=!0;try{for(const[u,h]of this.consumers){const f=h.consumerNode.deref();null!=f&&f.trackingVersion===h.atTrackingVersion?f.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),f?.producers.delete(this.id))}}finally{qo=r}}producerAccessed(){if(qo)throw new Error("");if(null===Oi)return;let r=Oi.producers.get(this.id);void 0===r?(r={consumerNode:Oi.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Oi.trackingVersion},Oi.producers.set(this.id,r),this.consumers.set(Oi.id,r)):(r.seenValueVersion=this.valueVersion,r.atTrackingVersion=Oi.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Oi?.consumerAllowSignalWrites}producerPollStatus(r){return this.valueVersion!==r||(this.onProducerUpdateValueVersion(),this.valueVersion!==r)}}let Ra=null;function gu(n){const r=vi(null);try{return n()}finally{vi(r)}}const dl=()=>{};class mu extends no{constructor(r,u,h){super(),this.watch=r,this.schedule=u,this.dirty=!1,this.cleanupFn=dl,this.registerOnCleanup=f=>{this.cleanupFn=f},this.consumerAllowSignalWrites=h}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const r=vi(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=dl,this.watch(this.registerOnCleanup)}finally{vi(r)}}cleanup(){this.cleanupFn()}}class ni{constructor(r,u,h){this.previousValue=r,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Kr(){return xs}function xs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Sc),la}function la(){const n=Kl(this),r=n?.current;if(r){const u=n.previous;if(u===Jt)n.previous=r;else for(let h in r)u[h]=r[h];n.current=null,this.ngOnChanges(r)}}function Sc(n,r,u,h){const f=this.declaredInputs[u],y=Kl(n)||function Ma(n,r){return n[Qa]=r}(n,{previous:Jt,current:null}),w=y.current||(y.current={}),A=y.previous,O=A[f];w[f]=new ni(O&&O.currentValue,r,A===Jt),n[h]=r}Kr.ngInherit=!0;const Qa="__ngSimpleChanges__";function Kl(n){return n[Qa]||null}const po=function(n,r,u){};function rr(n){for(;Array.isArray(n);)n=n[Tt];return n}function K(n,r){return rr(r[n.index])}function G(n,r){return n.data[r]}function ge(n,r){return n[r]}function et(n,r){const u=r[n];return ui(u)?u:u[Tt]}function Zn(n,r){return null==r?null:n[r]}function Kn(n){n[Ca]=0}function Sn(n){1024&n[Xt]||(n[Xt]|=1024,qr(n,1))}function Xr(n){1024&n[Xt]&&(n[Xt]&=-1025,qr(n,-1))}function qr(n,r){let u=n[_n];if(null===u)return;u[bi]+=r;let h=u;for(u=u[_n];null!==u&&(1===r&&1===h[bi]||-1===r&&0===h[bi]);)u[bi]+=r,h=u,u=u[_n]}const yn={lFrame:Yl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ac(){return yn.bindingsEnabled}function St(){return yn.lFrame.lView}function Rn(){return yn.lFrame.tView}function _u(n){return yn.lFrame.contextLView=n,n[Zr]}function mo(n){return yn.lFrame.contextLView=null,n}function Ds(){let n=qi();for(;null!==n&&64===n.type;)n=n.parent;return n}function qi(){return yn.lFrame.currentTNode}function Pr(n,r){const u=yn.lFrame;u.currentTNode=n,u.isParent=r}function ps(){return yn.lFrame.isParent}function ri(){return yn.lFrame.bindingIndex++}function ah(n,r){const u=yn.lFrame;u.bindingIndex=u.bindingRootIndex=n,Pa(r)}function Pa(n){yn.lFrame.currentDirectiveIndex=n}function vu(){return yn.lFrame.currentQueryIndex}function Zl(n){yn.lFrame.currentQueryIndex=n}function Mc(n){const r=n[ft];return 2===r.type?r.declTNode:1===r.type?n[fi]:null}function pl(n,r,u){if(u&nn.SkipSelf){let f=r,y=n;for(;!(f=f.parent,null!==f||u&nn.Host||(f=Mc(y),null===f||(y=y[us],10&f.type))););if(null===f)return!1;r=f,n=y}const h=yn.lFrame=Ao();return h.currentTNode=r,h.lView=n,!0}function On(n){const r=Ao(),u=n[ft];yn.lFrame=r,r.currentTNode=u.firstChild,r.lView=n,r.tView=u,r.contextLView=n,r.bindingIndex=u.bindingStartIndex,r.inI18n=!1}function Ao(){const n=yn.lFrame,r=null===n?null:n.child;return null===r?Yl(n):r}function Yl(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ii(){const n=yn.lFrame;return yn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const wn=ii;function io(){const n=ii();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function or(){return yn.lFrame.selectedIndex}function qt(n){yn.lFrame.selectedIndex=n}function si(){const n=yn.lFrame;return G(n.tView,n.selectedIndex)}let Vu=!0;function S(){return Vu}function x(n){Vu=n}function N(n,r){for(let u=r.directiveStart,h=r.directiveEnd;u<h;u++){const y=n.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:A,ngAfterViewInit:O,ngAfterViewChecked:H,ngOnDestroy:ee}=y;w&&(n.contentHooks??=[]).push(-u,w),A&&((n.contentHooks??=[]).push(u,A),(n.contentCheckHooks??=[]).push(u,A)),O&&(n.viewHooks??=[]).push(-u,O),H&&((n.viewHooks??=[]).push(u,H),(n.viewCheckHooks??=[]).push(u,H)),null!=ee&&(n.destroyHooks??=[]).push(u,ee)}}function $(n,r,u){He(n,r,3,u)}function se(n,r,u,h){(3&n[Xt])===u&&He(n,r,u,h)}function ie(n,r){let u=n[Xt];(3&u)===r&&(u&=8191,u+=1,n[Xt]=u)}function He(n,r,u,h){const y=h??-1,w=r.length-1;let A=0;for(let O=void 0!==h?65535&n[Ca]:0;O<w;O++)if("number"==typeof r[O+1]){if(A=r[O],null!=h&&A>=h)break}else r[O]<0&&(n[Ca]+=65536),(A<y||-1==y)&&(hn(n,u,r,O),n[Ca]=(4294901760&n[Ca])+O+2),O++}function pe(n,r){po(4,n,r);const u=vi(null);try{r.call(n)}finally{vi(u),po(5,n,r)}}function hn(n,r,u,h){const f=u[h]<0,y=u[h+1],A=n[f?-u[h]:u[h]];f?n[Xt]>>13<n[Ca]>>16&&(3&n[Xt])===r&&(n[Xt]+=8192,pe(A,y)):pe(A,y)}const tn=-1;class Cr{constructor(r,u,h){this.factory=r,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Ss(n){return n!==tn}function xa(n){return 32767&n}function Nc(n,r){let u=function Ql(n){return n>>16}(n),h=r;for(;u>0;)h=h[us],u--;return h}let As=!0;function ha(n){const r=As;return As=n,r}const Oa=255,vd=5;let Pc=0;const ka={};function Xl(n,r){const u=xc(n,r);if(-1!==u)return u;const h=r[ft];h.firstCreatePass&&(n.injectorIndex=r.length,yl(h.data,n),yl(r,null),yl(h.blueprint,null));const f=Oc(n,r),y=n.injectorIndex;if(Ss(f)){const w=xa(f),A=Nc(f,r),O=A[ft].data;for(let H=0;H<8;H++)r[y+H]=A[w+H]|O[w+H]}return r[y+8]=f,y}function yl(n,r){n.push(0,0,0,0,0,0,0,0,r)}function xc(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Oc(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let u=0,h=null,f=r;for(;null!==f;){if(h=wu(f),null===h)return tn;if(u++,f=f[us],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return tn}function Eu(n,r,u){!function lh(n,r,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(me)&&(h=u[me]),null==h&&(h=u[me]=Pc++);const f=h&Oa;r.data[n+(f>>vd)]|=1<<f}(n,r,u)}function Ed(n,r,u){if(u&nn.Optional||void 0!==n)return n;Ct()}function _l(n,r,u,h){if(u&nn.Optional&&void 0===h&&(h=null),!(u&(nn.Self|nn.Host))){const f=n[os],y=sr(void 0);try{return f?f.get(r,h,u&nn.Optional):Mr(r,h,u&nn.Optional)}finally{sr(y)}}return Ed(h,0,u)}function Jl(n,r,u,h=nn.Default,f){if(null!==n){if(2048&r[Xt]&&!(h&nn.Self)){const w=function $s(n,r,u,h,f){let y=n,w=r;for(;null!==y&&null!==w&&2048&w[Xt]&&!(512&w[Xt]);){const A=ec(y,w,u,h|nn.Self,ka);if(A!==ka)return A;let O=y.parent;if(!O){const H=w[Xs];if(H){const ee=H.get(u,ka,h);if(ee!==ka)return ee}O=wu(w),w=w[us]}y=O}return f}(n,r,u,h,ka);if(w!==ka)return w}const y=ec(n,r,u,h,ka);if(y!==ka)return y}return _l(r,u,h,f)}function ec(n,r,u,h,f){const y=function Xh(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(me)?n[me]:void 0;return"number"==typeof r?r>=0?r&Oa:dh:r}(u);if("function"==typeof y){if(!pl(r,n,h))return h&nn.Host?Ed(f,0,h):_l(r,u,h,f);try{const w=y(h);if(null!=w||h&nn.Optional)return w;Ct()}finally{wn()}}else if("number"==typeof y){let w=null,A=xc(n,r),O=tn,H=h&nn.Host?r[Yr][fi]:null;for((-1===A||h&nn.SkipSelf)&&(O=-1===A?Oc(n,r):r[A+8],O!==tn&&Hu(h,!1)?(w=r[ft],A=xa(O),r=Nc(O,r)):A=-1);-1!==A;){const ee=r[ft];if(Lc(y,A,ee.data)){const le=rp(A,r,u,w,h,H);if(le!==ka)return le}O=r[A+8],O!==tn&&Hu(h,r[ft].data[A+8]===H)&&Lc(y,A,r)?(w=ee,A=xa(O),r=Nc(O,r)):A=-1}}return f}function rp(n,r,u,h,f,y){const w=r[ft],A=w.data[n+8],ee=kc(A,w,u,null==h?Co(A)&&As:h!=w&&0!=(3&A.type),f&nn.Host&&y===A);return null!==ee?$u(r,w,ee,A):ka}function kc(n,r,u,h,f){const y=n.providerIndexes,w=r.data,A=1048575&y,O=n.directiveStart,ee=y>>20,Fe=f?A+ee:n.directiveEnd;for(let Xe=h?A:A+ee;Xe<Fe;Xe++){const Dt=w[Xe];if(Xe<O&&u===Dt||Xe>=O&&Dt.type===u)return Xe}if(f){const Xe=w[O];if(Xe&&Qi(Xe)&&Xe.type===u)return O}return null}function $u(n,r,u,h){let f=n[u];const y=r.data;if(function Ur(n){return n instanceof Cr}(f)){const w=f;w.resolving&&function dt(n,r){const u=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new fe(-200,`Circular dependency in DI detected for ${n}${u}`)}(function st(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ce(n)}(y[u]));const A=ha(w.canSeeViewProviders);w.resolving=!0;const O=w.injectImpl?sr(w.injectImpl):null;pl(n,h,nn.Default);try{f=n[u]=w.factory(void 0,y,n,h),r.firstCreatePass&&u>=h.directiveStart&&function C(n,r,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:y}=r.type.prototype;if(h){const w=xs(r);(u.preOrderHooks??=[]).push(n,w),(u.preOrderCheckHooks??=[]).push(n,w)}f&&(u.preOrderHooks??=[]).push(0-n,f),y&&((u.preOrderHooks??=[]).push(n,y),(u.preOrderCheckHooks??=[]).push(n,y))}(u,y[u],r)}finally{null!==O&&sr(O),ha(A),w.resolving=!1,wn()}}return f}function Lc(n,r,u){return!!(u[r+(n>>vd)]&1<<n)}function Hu(n,r){return!(n&nn.Self||n&nn.Host&&r)}class La{constructor(r,u){this._tNode=r,this._lView=u}get(r,u,h){return Jl(this._tNode,this._lView,r,we(h),u)}}function dh(){return new La(Ds(),St())}function ip(n){return gt(()=>{const r=n.prototype.constructor,u=r[be]||fa(r),h=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==h;){const y=f[be]||fa(f);if(y&&y!==u)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function fa(n){return Pt(n)?()=>{const r=fa(wt(n));return r&&r()}:Hn(n)}function wu(n){const r=n[ft],u=r.type;return 2===u?r.declTNode:1===u?n[fi]:null}function pa(n){return function ch(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const u=n.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const y=u[f];if(Qt(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(y===r)return u[f+1];f+=2}}}return null}(Ds(),n)}const Br="__parameters__";function P(n,r,u){return gt(()=>{const h=function wi(n){return function(...u){if(n){const h=n(...u);for(const f in h)this[f]=h[f]}}}(r);function f(...y){if(this instanceof f)return h.apply(this,y),this;const w=new f(...y);return A.annotation=w,A;function A(O,H,ee){const le=O.hasOwnProperty(Br)?O[Br]:Object.defineProperty(O,Br,{value:[]})[Br];for(;le.length<=ee;)le.push(null);return(le[ee]=le[ee]||[]).push(w),O}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}function Ji(n,r){n.forEach(u=>Array.isArray(u)?Ji(u,r):r(u))}function Ls(n,r,u){r>=n.length?n.push(u):n.splice(r,0,u)}function Ja(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}const Mi=ne(P("Optional"),8),fh=ne(P("SkipSelf"),4);function lc(n){return 128==(128&n.flags)}var yh=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(yh||{});const _h=new Map;let Zu=0;const Hc="__ngContext__";function Ws(n,r){ui(r)?(n[Hc]=r[Vo],function nu(n){_h.set(n[Vo],n)}(r)):n[Hc]=r}let Tl;function ru(n,r){return Tl(n,r)}function Cl(n){const r=n[_n];return hs(r)?r[_n]:r}function Hi(n){return dc(n[as])}function Ks(n){return dc(n[Vn])}function dc(n){for(;null!==n&&!hs(n);)n=n[Vn];return n}function Dl(n,r,u,h,f){if(null!=h){let y,w=!1;hs(h)?y=h:ui(h)&&(w=!0,h=h[Tt]);const A=rr(h);0===n&&null!==u?null==f?Nt(r,u,A):Ke(r,u,A,f||null,!0):1===n&&null!==u?Ke(r,u,A,f||null,!0):2===n?function Qc(n,r,u){const h=Li(n,r);h&&function on(n,r,u,h){n.removeChild(r,u,h)}(n,h,r,u)}(r,A,w):3===n&&r.destroyNode(A),null!=y&&function Va(n,r,u,h,f){const y=u[Si];y!==rr(u)&&Dl(r,n,h,y,f);for(let A=Wi;A<u.length;A++){const O=u[A];kd(O[ft],O,n,r,h,y)}}(r,n,y,u,f)}}function hc(n,r,u){return n.createElement(r,u)}function df(n,r){const u=n[To],h=u.indexOf(r);Xr(r),u.splice(h,1)}function T(n,r){if(n.length<=Wi)return;const u=Wi+r,h=n[u];if(h){const f=h[Ta];null!==f&&f!==n&&df(f,h),r>0&&(n[u-1][Vn]=h[Vn]);const y=Ja(n,Wi+r);!function Kc(n,r){kd(n,r,r[Un],2,null,null),r[Tt]=null,r[fi]=null}(h[ft],h);const w=y[ds];null!==w&&w.detachView(y[ft]),h[_n]=null,h[Vn]=null,h[Xt]&=-129}return h}function m(n,r){if(!(256&r[Xt])){const u=r[Un];r[jo]?.destroy(),r[fo]?.destroy(),u.destroyNode&&kd(n,r,u,3,null,null),function Zc(n){let r=n[as];if(!r)return _(n[ft],n);for(;r;){let u=null;if(ui(r))u=r[as];else{const h=r[Wi];h&&(u=h)}if(!u){for(;r&&!r[Vn]&&r!==n;)ui(r)&&_(r[ft],r),r=r[_n];null===r&&(r=n),ui(r)&&_(r[ft],r),u=r&&r[Vn]}r=u}}(r)}}function _(n,r){if(!(256&r[Xt])){r[Xt]&=-129,r[Xt]|=256,function V(n,r){let u;if(null!=n&&null!=(u=n.destroyHooks))for(let h=0;h<u.length;h+=2){const f=r[u[h]];if(!(f instanceof Cr)){const y=u[h+1];if(Array.isArray(y))for(let w=0;w<y.length;w+=2){const A=f[y[w]],O=y[w+1];po(4,A,O);try{O.call(A)}finally{po(5,A,O)}}else{po(4,f,y);try{y.call(f)}finally{po(5,f,y)}}}}}(n,r),function D(n,r){const u=n.cleanup,h=r[Vi];if(null!==u)for(let y=0;y<u.length-1;y+=2)if("string"==typeof u[y]){const w=u[y+3];w>=0?h[w]():h[-w].unsubscribe(),y+=2}else u[y].call(h[u[y+1]]);null!==h&&(r[Vi]=null);const f=r[pi];if(null!==f){r[pi]=null;for(let y=0;y<f.length;y++)(0,f[y])()}}(n,r),1===r[ft].type&&r[Un].destroy();const u=r[Ta];if(null!==u&&hs(r[_n])){u!==r[_n]&&df(u,r);const h=r[ds];null!==h&&h.detachView(n)}!function Md(n){_h.delete(n[Vo])}(r)}}function Z(n,r,u){return function ye(n,r,u){let h=r;for(;null!==h&&40&h.type;)h=(r=h).parent;if(null===h)return u[Tt];{const{componentOffset:f}=h;if(f>-1){const{encapsulation:y}=n.data[h.directiveStart+f];if(y===Tn.None||y===Tn.Emulated)return null}return K(h,u)}}(n,r.parent,u)}function Ke(n,r,u,h,f){n.insertBefore(r,u,h,f)}function Nt(n,r,u){n.appendChild(r,u)}function Gt(n,r,u,h,f){null!==h?Ke(n,r,u,h,f):Nt(n,r,u)}function Li(n,r){return n.parentNode(r)}let Al,Ud,gp,Sl=function fc(n,r,u){return 40&n.type?K(n,u):null};function _r(n,r,u,h){const f=Z(n,h,r),y=r[Un],A=function Yc(n,r,u){return Sl(n,r,u)}(h.parent||r[fi],h,r);if(null!=f)if(Array.isArray(u))for(let O=0;O<u.length;O++)Gt(y,f,u[O],A,!1);else Gt(y,f,u,A,!1);void 0!==Al&&Al(y,h,r,u,f)}function ir(n,r){if(null!==r){const u=r.type;if(3&u)return K(r,n);if(4&u)return oi(-1,n[r.index]);if(8&u){const h=r.child;if(null!==h)return ir(n,h);{const f=n[r.index];return hs(f)?oi(-1,f):rr(f)}}if(32&u)return ru(r,n)()||rr(n[r.index]);{const h=Cu(n,r);return null!==h?Array.isArray(h)?h[0]:ir(Cl(n[Yr]),h):ir(n,r.next)}}return null}function Cu(n,r){return null!==r?n[Yr][fi].projection[r.projection]:null}function oi(n,r){const u=Wi+n+1;if(u<r.length){const h=r[u],f=h[ft].firstChild;if(null!==f)return ir(h,f)}return r[Si]}function Yu(n,r,u,h,f,y,w){for(;null!=u;){const A=h[u.index],O=u.type;if(w&&0===r&&(A&&Ws(rr(A),h),u.flags|=2),32!=(32&u.flags))if(8&O)Yu(n,r,u.child,h,f,y,!1),Dl(r,n,f,A,y);else if(32&O){const H=ru(u,h);let ee;for(;ee=H();)Dl(r,n,f,ee,y);Dl(r,n,f,A,y)}else 16&O?Ar(n,r,h,u,f,y):Dl(r,n,f,A,y);u=w?u.projectionNext:u.next}}function kd(n,r,u,h,f,y){Yu(u,h,n.firstChild,r,f,y,!1)}function Ar(n,r,u,h,f,y){const w=u[Yr],O=w[fi].projection[h.projection];if(Array.isArray(O))for(let H=0;H<O.length;H++)Dl(r,n,f,O[H],y);else{let H=O;const ee=w[_n];lc(h)&&(H.flags|=128),Yu(n,r,H,ee,f,y,!0)}}function iu(n,r,u){""===u?n.removeAttribute(r,"class"):n.setAttribute(r,"class",u)}function d_(n,r,u){const{mergedAttrs:h,classes:f,styles:y}=u;null!==h&&at(n,r,h),null!==f&&iu(n,r,f),null!==y&&function Ld(n,r,u){n.setAttribute(r,"style",u)}(n,r,y)}function f_(n){Ud=n}function Eh(n){return function Ug(){if(void 0===gp&&(gp=null,Gn.trustedTypes))try{gp=Gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gp}()?.createScriptURL(n)||n}class mp{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mt})`}}function qs(n){return n instanceof mp?n.changingThisBreaksApplicationSecurity:n}function _p(n,r){const u=function Km(n){return n instanceof mp&&n.getTypeName()||null}(n);if(null!=u&&u!==r){if("ResourceURL"===u&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${u} (see ${Mt})`)}return u===r}const Bg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Pl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Pl||{});function E_(n){const r=jd();return r?r.sanitize(Pl.URL,n)||"":_p(n,"URL")?qs(n):function Jc(n){return(n=String(n)).match(Bg)?n:"unsafe:"+n}(Ce(n))}function $g(n){const r=jd();if(r)return Eh(r.sanitize(Pl.RESOURCE_URL,n)||"");if(_p(n,"ResourceURL"))return Eh(qs(n));throw new fe(904,!1)}function Xm(n,r,u){return function Tp(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?$g:E_}(r,u)(n)}function jd(){const n=St();return n&&n[Yi].sanitizer}class Gr{constructor(r,u){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Ht({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Cp=new Gr("ENVIRONMENT_INITIALIZER"),_f=new Gr("INJECTOR",-1),xl=new Gr("INJECTOR_DEF_TYPES");class Th{get(r,u=$r){if(u===$r){const h=new Error(`NullInjectorError: No provider for ${Ae(r)}!`);throw h.name="NullInjectorError",h}return u}}function id(n){return{\u0275providers:n}}function w_(...n){return{\u0275providers:Jm(0,n),\u0275fromNgModule:!0}}function Jm(n,...r){const u=[],h=new Set;let f;return Ji(r,y=>{const w=y;zg(w,u,[],h)&&(f||=[],f.push(w))}),void 0!==f&&Oo(f,u),u}function Oo(n,r){for(let u=0;u<n.length;u++){const{providers:f}=n[u];vf(f,y=>{r.push(y)})}}function zg(n,r,u,h){if(!(n=wt(n)))return!1;let f=null,y=Us(n);const w=!y&&Fn(n);if(y||w){if(w&&!w.standalone)return!1;f=n}else{const O=n.ngModule;if(y=Us(O),!y)return!1;f=O}const A=h.has(f);if(w){if(A)return!1;if(h.add(f),w.dependencies){const O="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const H of O)zg(H,r,u,h)}}else{if(!y)return!1;{if(null!=y.imports&&!A){let H;h.add(f);try{Ji(y.imports,ee=>{zg(ee,r,u,h)&&(H||=[],H.push(ee))})}finally{}void 0!==H&&Oo(H,r)}if(!A){const H=Hn(f)||(()=>new f);r.push({provide:f,useFactory:H,deps:xt},{provide:xl,useValue:f,multi:!0},{provide:Cp,useValue:()=>An(f),multi:!0})}const O=y.providers;null==O||A||vf(O,ee=>{r.push(ee)})}}return f!==n&&void 0!==n.providers}function vf(n,r){for(let u of n)bt(u)&&(u=u.\u0275providers),Array.isArray(u)?vf(u,r):r(u)}const Ol=ae({provide:String,useValue:ae});function Ju(n){return null!==n&&"object"==typeof n&&Ol in n}function _a(n){return"function"==typeof n}const su=new Gr("Set Injector scope."),gc={},$a={};let Gg;function Wg(){return void 0===Gg&&(Gg=new Th),Gg}class el{}class ty extends el{get destroyed(){return this._destroyed}constructor(r,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ai(r,w=>this.processProvider(w)),this.records.set(_f,od(void 0,this)),f.has("environment")&&this.records.set(el,od(void 0,this));const y=this.records.get(su);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(xl.multi,xt,nn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of r)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const u=tr(this),h=sr(void 0);try{return r()}finally{tr(u),sr(h)}}get(r,u=$r,h=nn.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(ve))return r[ve](this);h=we(h);const f=tr(this),y=sr(void 0);try{if(!(h&nn.SkipSelf)){let A=this.records.get(r);if(void 0===A){const O=function I_(n){return"function"==typeof n||"object"==typeof n&&n instanceof Gr}(r)&&Kt(r);A=O&&this.injectableDefInScope(O)?od(Kg(r),gc):null,this.records.set(r,A)}if(null!=A)return this.hydrate(r,A)}return(h&nn.Self?Wg():this.parent).get(r,u=h&nn.Optional&&u===$r?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[Ir]=w[Ir]||[]).unshift(Ae(r)),f)throw w;return function re(n,r,u,h){const f=n[Ir];throw r[br]&&f.unshift(r[br]),n.message=function je(n,r,u,h=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=Ae(r);if(Array.isArray(r))f=r.map(Ae).join(" -> ");else if("object"==typeof r){let y=[];for(let w in r)if(r.hasOwnProperty(w)){let A=r[w];y.push(w+":"+("string"==typeof A?JSON.stringify(A):Ae(A)))}f=`{${y.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${n.replace(yi,"\n  ")}`}("\n"+n.message,f,u,h),n.ngTokenPath=f,n[Ir]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{sr(y),tr(f)}}resolveInjectorInitializers(){const r=tr(this),u=sr(void 0);try{const h=this.get(Cp.multi,xt,nn.Self);for(const f of h)f()}finally{tr(r),sr(u)}}toString(){const r=[],u=this.records;for(const h of u.keys())r.push(Ae(h));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(r){let u=_a(r=wt(r))?r:wt(r&&r.provide);const h=function $d(n){return Ju(n)?od(void 0,n.useValue):od(function Zg(n,r,u){let h;if(_a(n)){const f=wt(n);return Hn(f)||Kg(f)}if(Ju(n))h=()=>wt(n.useValue);else if(function Dp(n){return!(!n||!n.useFactory)}(n))h=()=>n.useFactory(...Q(n.deps||[]));else if(function sd(n){return!(!n||!n.useExisting)}(n))h=()=>An(wt(n.useExisting));else{const f=wt(n&&(n.useClass||n.provide));if(!function Hd(n){return!!n.deps}(n))return Hn(f)||Kg(f);h=()=>new f(...Q(n.deps))}return h}(n),gc)}(r);if(_a(r)||!0!==r.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=od(void 0,gc,!0),f.factory=()=>Q(f.multi),this.records.set(u,f)),u=r,f.multi.push(r)}this.records.set(u,h)}hydrate(r,u){return u.value===gc&&(u.value=$a,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ny(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(r){if(!r.providedIn)return!1;const u=wt(r.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(r){const u=this._onDestroyHooks.indexOf(r);-1!==u&&this._onDestroyHooks.splice(u,1)}}function Kg(n){const r=Kt(n),u=null!==r?r.factory:Hn(n);if(null!==u)return u;if(n instanceof Gr)throw new fe(204,!1);if(n instanceof Function)return function qg(n){const r=n.length;if(r>0)throw function Fa(n,r){const u=[];for(let h=0;h<n;h++)u.push(r);return u}(r,"?"),new fe(204,!1);const u=function cr(n){return n&&(n[Ni]||n[rs])||null}(n);return null!==u?()=>u.factory(n):()=>new n}(n);throw new fe(204,!1)}function od(n,r,u=!1){return{factory:n,value:r,multi:u?[]:void 0}}function ai(n,r){for(const u of n)Array.isArray(u)?ai(u,r):u&&bt(u)?ai(u.\u0275providers,r):r(u)}const va=new Gr("AppId",{providedIn:"root",factory:()=>Ef}),Ef="ng",Sp=new Gr("Platform Initializer"),Yg=new Gr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ch=new Gr("AnimationModuleType"),T_=new Gr("CSP nonce",{providedIn:"root",factory:()=>function ff(){if(void 0!==Ud)return Ud;if(typeof document<"u")return document;throw new fe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let D_=(n,r)=>null;function Lp(n,r){return D_(n,r)}class R_{}class M_{}class oy{resolveComponentFactory(r){throw function nm(n){const r=Error(`No component factory found for ${Ae(n)}.`);return r.ngComponent=n,r}(r)}}let Cf=(()=>{class n{static#e=this.NULL=new oy}return n})();function im(){return kl(Ds(),St())}function kl(n,r){return new ad(K(n,r))}let ad=(()=>{class n{constructor(u){this.nativeElement=u}static#e=this.__NG_ELEMENT_ID__=im}return n})();function sm(n){return n instanceof ad?n.nativeElement:n}class om{}let ay=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function uy(){const n=St(),u=et(Ds().index,n);return(ui(u)?u:n)[Un]}()}return n})(),N_=(()=>{class n{static#e=this.\u0275prov=Ht({token:n,providedIn:"root",factory:()=>null})}return n})();class P_{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const am=new P_("16.1.9"),Df={};function Kd(n){for(;n;){n[Xt]|=64;const r=Cl(n);if(Ai(n)&&!r)return n;n=r}return null}function _o(n){return n.ngOriginalError}class ud{constructor(){this._console=console}handleError(r){const u=this._findOriginalError(r);this._console.error("ERROR",r),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(r){let u=r&&_o(r);for(;u&&_o(u);)u=_o(u);return u||null}}const Sf=new Gr("",{providedIn:"root",factory:()=>!1});function yc(n){return n instanceof Function?n():n}class lm extends no{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(r){this._lView=r}onConsumerDependencyMayHaveChanged(){Kd(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(r,u,h){const f=vi(this);this.trackingVersion++;try{r(u,h)}finally{vi(f)}}destroy(){this.trackingVersion++}}let bu=null;function Su(){return bu??=new lm,bu}function fy(n,r){return n[r]??Su()}function L_(n,r){const u=Su();u.hasReadASignal&&(n[r]=bu,u.lView=n,bu=new lm)}const ar={};function Hp(n){zp(Rn(),St(),or()+n,!1)}function zp(n,r,u,h){if(!h)if(3==(3&r[Xt])){const y=n.preOrderCheckHooks;null!==y&&$(r,y,u)}else{const y=n.preOrderHooks;null!==y&&se(r,y,0,u)}qt(u)}function dm(n,r=null,u=null,h){const f=Rf(n,r,u,h);return f.resolveInjectorInitializers(),f}function Rf(n,r=null,u=null,h,f=new Set){const y=[u||xt,w_(n)];return h=h||("object"==typeof n?void 0:Ae(n)),new ty(y,r||Wg(),h||null,f)}let Yd=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=$r;static#t=this.NULL=new Th;static create(u,h){if(Array.isArray(u))return dm({name:""},h,u,"");{const f=u.name??"";return dm({name:f},u.parent,u.providers,f)}}static#n=this.\u0275prov=Ht({token:n,providedIn:"any",factory:()=>An(_f)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function tl(n,r=nn.Default){const u=St();return null===u?An(n,r):Jl(Ds(),u,wt(n),r)}function F_(){throw new Error("invalid")}function hm(n,r,u,h,f,y,w,A,O,H,ee){const le=r.blueprint.slice();return le[Tt]=f,le[Xt]=140|h,(null!==H||n&&2048&n[Xt])&&(le[Xt]|=2048),Kn(le),le[_n]=le[us]=n,le[Zr]=u,le[Yi]=w||n&&n[Yi],le[Un]=A||n&&n[Un],le[os]=O||n&&n[os]||null,le[fi]=y,le[Vo]=function up(){return Zu++}(),le[yr]=ee,le[Xs]=H,le[Yr]=2==r.type?n[Yr]:le,le}function _c(n,r,u,h,f){let y=n.data[r];if(null===y)y=function Mf(n,r,u,h,f){const y=qi(),w=ps(),O=n.data[r]=function pm(n,r,u,h,f,y){let w=r?r.injectorIndex:-1,A=0;return function ki(){return null!==yn.skipHydrationRootTNode}()&&(A|=128),{type:u,index:h,insertBeforeIndex:null,injectorIndex:w,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:A,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?y:y&&y.parent,u,r,h,f);return null===n.firstChild&&(n.firstChild=O),null!==y&&(w?null==y.child&&null!==O.parent&&(y.child=O):null===y.next&&(y.next=O,O.prev=y)),O}(n,r,u,h,f),function oh(){return yn.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=u,y.value=h,y.attrs=f;const w=function At(){const n=yn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===w?-1:w.injectorIndex}return Pr(y,!0),y}function Mh(n,r,u,h){if(0===u)return-1;const f=r.length;for(let y=0;y<u;y++)r.push(h),n.blueprint.push(h),n.data.push(null);return f}function qp(n,r,u,h,f){const y=fy(r,jo),w=or(),A=2&h;try{if(qt(-1),A&&r.length>Qn&&zp(n,r,Qn,!1),po(A?2:0,f),A)y.runInContext(u,h,f);else{const H=vi(null);try{u(h,f)}finally{vi(H)}}}finally{A&&null===r[jo]&&L_(r,jo),qt(w),po(A?3:1,f)}}function Zp(n,r,u){if(Vs(r)){const h=vi(null);try{const y=r.directiveEnd;for(let w=r.directiveStart;w<y;w++){const A=n.data[w];A.contentQueries&&A.contentQueries(1,u[w],w)}}finally{vi(h)}}}function Qd(n,r,u){Ac()&&(function Xp(n,r,u,h){const f=u.directiveStart,y=u.directiveEnd;Co(u)&&function vv(n,r,u){const h=K(r,n),f=Nf(u);let w=16;u.signals?w=4096:u.onPush&&(w=64);const A=kf(n,hm(n,f,null,w,h,r,null,n[Yi].rendererFactory.createRenderer(h,u),null,null,null));n[r.index]=A}(r,u,n.data[f+u.componentOffset]),n.firstCreatePass||Xl(u,r),Ws(h,r);const w=u.initialInputs;for(let A=f;A<y;A++){const O=n.data[A],H=$u(r,n,A,u);Ws(H,r),null!==w&&Ga(0,A-f,H,O,0,w),Qi(O)&&(et(u.index,r)[Zr]=$u(r,n,A,u))}}(n,r,u,K(u,r)),64==(64&u.flags)&&B_(n,r,u))}function Fl(n,r,u=K){const h=r.localNames;if(null!==h){let f=r.index+1;for(let y=0;y<h.length;y+=2){const w=h[y+1],A=-1===w?u(r,n):n[w];n[f++]=A}}}function Nf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=vc(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):r}function vc(n,r,u,h,f,y,w,A,O,H,ee){const le=Qn+h,Fe=le+f,Xe=function Xd(n,r){const u=[];for(let h=0;h<r;h++)u.push(h<n?null:ar);return u}(le,Fe),Dt="function"==typeof H?H():H;return Xe[ft]={type:n,blueprint:Xe,template:u,queries:null,viewQuery:A,declTNode:r,data:Xe.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:O,consts:Dt,incompleteFirstPass:!1,ssrId:ee}}let fm=n=>null;function gm(n,r,u,h){for(let f in n)if(n.hasOwnProperty(f)){u=null===u?{}:u;const y=n[f];null===h?xf(u,r,f,y):h.hasOwnProperty(f)&&xf(u,r,h[f],y)}return u}function xf(n,r,u,h){n.hasOwnProperty(u)?n[u].push(r,h):n[u]=[r,h]}function Qp(n,r,u,h){if(Ac()){const f=null===h?null:{"":-1},y=function Ty(n,r){const u=n.directiveRegistry;let h=null,f=null;if(u)for(let y=0;y<u.length;y++){const w=u[y];if(Pi(r,w.selectors,!1))if(h||(h=[]),Qi(w))if(null!==w.findHostDirectiveDefs){const A=[];f=f||new Map,w.findHostDirectiveDefs(w,A,f),h.unshift(...A,w),cd(n,r,A.length)}else h.unshift(w),cd(n,r,0);else f=f||new Map,w.findHostDirectiveDefs?.(w,h,f),h.push(w)}return null===h?null:[h,f]}(n,u);let w,A;null===y?w=A=null:[w,A]=y,null!==w&&Iy(n,r,u,w,f,A),f&&function Nh(n,r,u){if(r){const h=n.localNames=[];for(let f=0;f<r.length;f+=2){const y=u[r[f+1]];if(null==y)throw new fe(-301,!1);h.push(r[f],y)}}}(u,h,f)}u.mergedAttrs=mn(u.mergedAttrs,u.attrs)}function Iy(n,r,u,h,f,y){for(let H=0;H<h.length;H++)Eu(Xl(u,r),n,h[H].type);!function rl(n,r,u){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+u,n.providerIndexes=r}(u,n.data.length,h.length);for(let H=0;H<h.length;H++){const ee=h[H];ee.providersResolver&&ee.providersResolver(ee)}let w=!1,A=!1,O=Mh(n,r,h.length,null);for(let H=0;H<h.length;H++){const ee=h[H];u.mergedAttrs=mn(u.mergedAttrs,ee.hostAttrs),ym(n,u,r,O,ee),Cy(O,ee,f),null!==ee.contentQueries&&(u.flags|=4),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(u.flags|=64);const le=ee.type.prototype;!w&&(le.ngOnChanges||le.ngOnInit||le.ngDoCheck)&&((n.preOrderHooks??=[]).push(u.index),w=!0),!A&&(le.ngOnChanges||le.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(u.index),A=!0),O++}!function vy(n,r,u){const f=r.directiveEnd,y=n.data,w=r.attrs,A=[];let O=null,H=null;for(let ee=r.directiveStart;ee<f;ee++){const le=y[ee],Fe=u?u.get(le):null,Dt=Fe?Fe.outputs:null;O=gm(le.inputs,ee,O,Fe?Fe.inputs:null),H=gm(le.outputs,ee,H,Dt);const $t=null===O||null===w||ss(r)?null:Ev(O,ee,w);A.push($t)}null!==O&&(O.hasOwnProperty("class")&&(r.flags|=8),O.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=A,r.inputs=O,r.outputs=H}(n,u,y)}function B_(n,r,u){const h=u.directiveStart,f=u.directiveEnd,y=u.index,w=function $i(){return yn.lFrame.currentDirectiveIndex}();try{qt(y);for(let A=h;A<f;A++){const O=n.data[A],H=r[A];Pa(A),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&V_(O,H)}}finally{qt(-1),Pa(w)}}function V_(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function cd(n,r,u){r.componentOffset=u,(n.components??=[]).push(r.index)}function Cy(n,r,u){if(u){if(r.exportAs)for(let h=0;h<r.exportAs.length;h++)u[r.exportAs[h]]=n;Qi(r)&&(u[""]=n)}}function ym(n,r,u,h,f){n.data[h]=f;const y=f.factory||(f.factory=Hn(f.type)),w=new Cr(y,Qi(f),tl);n.blueprint[h]=w,u[h]=w,function Of(n,r,u,h,f){const y=f.hostBindings;if(y){let w=n.hostBindingOpCodes;null===w&&(w=n.hostBindingOpCodes=[]);const A=~r.index;(function Ul(n){let r=n.length;for(;r>0;){const u=n[--r];if("number"==typeof u&&u<0)return u}return 0})(w)!=A&&w.push(A),w.push(u,h,y)}}(n,r,h,Mh(n,u,f.hostVars,ar),f)}function za(n,r,u,h,f,y){const w=K(n,r);!function Jp(n,r,u,h,f,y,w){if(null==y)n.removeAttribute(r,f,u);else{const A=null==w?Ce(y):w(y,h||"",f);n.setAttribute(r,f,A,u)}}(r[Un],w,y,n.value,u,h,f)}function Ga(n,r,u,h,f,y){const w=y[r];if(null!==w)for(let A=0;A<w.length;)_m(h,u,w[A++],w[A++],w[A++])}function _m(n,r,u,h,f){const y=vi(null);try{const w=n.inputTransforms;null!==w&&w.hasOwnProperty(h)&&(f=w[h].call(r,f)),null!==n.setInput?n.setInput(r,f,u,h):r[h]=f}finally{vi(y)}}function Ev(n,r,u){let h=null,f=0;for(;f<u.length;){const y=u[f];if(0!==y)if(5!==y){if("number"==typeof y)break;if(n.hasOwnProperty(y)){null===h&&(h=[]);const w=n[y];for(let A=0;A<w.length;A+=2)if(w[A]===r){h.push(y,w[A+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return h}function eg(n,r,u,h){return[n,!0,!1,r,null,0,h,u,null,null,null]}function j_(n,r){const u=n.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const y=u[h+1];if(-1!==y){const w=n.data[y];Zl(u[h]),w.contentQueries(2,r[y],y)}}}function kf(n,r){return n[as]?n[ho][Vn]=r:n[as]=r,n[ho]=r,r}function Dy(n,r,u){Zl(0);const h=vi(null);try{r(n,u)}finally{vi(h)}}function Lf(n){return n[Vi]||(n[Vi]=[])}function tg(n){return n.cleanup||(n.cleanup=[])}function vm(n,r){const u=n[os],h=u?u.get(ud,null):null;h&&h.handleError(r)}function Ec(n,r,u,h,f){for(let y=0;y<u.length;){const w=u[y++],A=u[y++];_m(n.data[w],r[w],h,A,f)}}function Au(n,r,u){const h=function R(n,r){return rr(r[n])}(r,n);!function ma(n,r,u){n.setValue(r,u)}(n[Un],h,u)}function Sy(n,r){const u=et(r,n),h=u[ft];!function Ay(n,r){for(let u=r.length;u<n.blueprint.length;u++)r.push(n.blueprint[u])}(h,u);const f=u[Tt];null!==f&&null===u[yr]&&(u[yr]=Lp(f,u[os])),rg(h,u,u[Zr])}function rg(n,r,u){On(r);try{const h=n.viewQuery;null!==h&&Dy(1,h,u);const f=n.template;null!==f&&qp(n,r,f,1,u),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&j_(n,r),n.staticViewQueries&&Dy(2,n.viewQuery,u);const y=n.components;null!==y&&function dd(n,r){for(let u=0;u<r.length;u++)Sy(n,r[u])}(r,y)}catch(h){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),h}finally{r[Xt]&=-5,io()}}let z_=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(u,h,f){const y=typeof Zone>"u"?null:Zone.current,w=new mu(u,H=>{this.all.has(H)&&this.queue.set(H,y)},f);let A;this.all.add(w),w.notify();const O=()=>{w.cleanup(),A?.(),this.all.delete(w),this.queue.delete(w)};return A=h?.onDestroy(O),{destroy:O}}flush(){if(0!==this.queue.size)for(const[u,h]of this.queue)this.queue.delete(u),h?h.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ht({token:n,providedIn:"root",factory:()=>new n})}return n})();function Jd(n,r,u){let h=u?n.styles:null,f=u?n.classes:null,y=0;if(null!==r)for(let w=0;w<r.length;w++){const A=r[w];"number"==typeof A?y=A:1==y?f=mt(f,A):2==y&&(h=mt(h,A+": "+r[++w]+";"))}u?n.styles=h:n.stylesWithoutHost=h,u?n.classes=f:n.classesWithoutHost=f}function Ff(n,r,u,h,f=!1){for(;null!==u;){const y=r[u.index];if(null!==y&&h.push(rr(y)),hs(y)){for(let A=Wi;A<y.length;A++){const O=y[A],H=O[ft].firstChild;null!==H&&Ff(O[ft],O,H,h)}y[Si]!==y[Tt]&&h.push(y[Si])}const w=u.type;if(8&w)Ff(n,r,u.child,h);else if(32&w){const A=ru(u,r);let O;for(;O=A();)h.push(O)}else if(16&w){const A=Cu(r,u);if(Array.isArray(A))h.push(...A);else{const O=Cl(r[Yr]);Ff(O[ft],O,A,h,!0)}}u=f?u.projectionNext:u.next}return h}function Uf(n,r,u,h=!0){const f=r[Yi].rendererFactory;f.begin&&f.begin();try{G_(n,r,n.template,u)}catch(w){throw h&&vm(r,w),w}finally{f.end&&f.end(),r[Yi].effectManager?.flush()}}function G_(n,r,u,h){const f=r[Xt];if(256!=(256&f)){r[Yi].effectManager?.flush(),On(r);try{Kn(r),function Et(n){return yn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==u&&qp(n,r,u,2,h);const w=3==(3&f);if(w){const H=n.preOrderCheckHooks;null!==H&&$(r,H,null)}else{const H=n.preOrderHooks;null!==H&&se(r,H,0,null),ie(r,0)}if(function sg(n){for(let r=Hi(n);null!==r;r=Ks(r)){if(!r[Es])continue;const u=r[To];for(let h=0;h<u.length;h++){Sn(u[h])}}}(r),Bf(r,2),null!==n.contentQueries&&j_(n,r),w){const H=n.contentCheckHooks;null!==H&&$(r,H)}else{const H=n.contentHooks;null!==H&&se(r,H,1),ie(r,1)}!function yy(n,r){const u=n.hostBindingOpCodes;if(null===u)return;const h=fy(r,fo);try{for(let f=0;f<u.length;f++){const y=u[f];if(y<0)qt(~y);else{const w=y,A=u[++f],O=u[++f];ah(A,w),h.runInContext(O,2,r[w])}}}finally{null===r[fo]&&L_(r,fo),qt(-1)}}(n,r);const A=n.components;null!==A&&W_(r,A,0);const O=n.viewQuery;if(null!==O&&Dy(2,O,h),w){const H=n.viewCheckHooks;null!==H&&$(r,H)}else{const H=n.viewHooks;null!==H&&se(r,H,2),ie(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[Xt]&=-73,Xr(r)}finally{io()}}}function Bf(n,r){for(let u=Hi(n);null!==u;u=Ks(u))for(let h=Wi;h<u.length;h++)eh(u[h],r)}function My(n,r,u){eh(et(r,n),u)}function eh(n,r){if(!function rn(n){return 128==(128&n[Xt])}(n))return;const u=n[ft];if(80&n[Xt]&&0===r||1024&n[Xt]||2===r)G_(u,n,u.template,n[Zr]);else if(n[bi]>0){Bf(n,1);const f=n[ft].components;null!==f&&W_(n,f,1)}}function W_(n,r,u){for(let h=0;h<r.length;h++)My(n,r[h],u)}class Vf{get rootNodes(){const r=this._lView,u=r[ft];return Ff(u,r,u.firstChild,[])}constructor(r,u){this._lView=r,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zr]}set context(r){this._lView[Zr]=r}get destroyed(){return 256==(256&this._lView[Xt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[_n];if(hs(r)){const u=r[8],h=u?u.indexOf(this):-1;h>-1&&(T(r,h),Ja(u,h))}this._attachedToViewContainer=!1}m(this._lView[ft],this._lView)}onDestroy(r){!function mi(n,r){if(256==(256&n[Xt]))throw new fe(911,!1);null===n[pi]&&(n[pi]=[]),n[pi].push(r)}(this._lView,r)}markForCheck(){Kd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Xt]&=-129}reattach(){this._lView[Xt]|=128}detectChanges(){Uf(this._lView[ft],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qc(n,r){kd(n,r,r[Un],2,null,null)}(this._lView[ft],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=r}}class Em extends Vf{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Uf(r[ft],r,r[Zr],!1)}checkNoChanges(){}get context(){return null}}class Ny extends Cf{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const u=Fn(r);return new ug(u,this.ngModule)}}function Ph(n){const r=[];for(let u in n)n.hasOwnProperty(u)&&r.push({propName:n[u],templateName:u});return r}class ag{constructor(r,u){this.injector=r,this.parentInjector=u}get(r,u,h){h=we(h);const f=this.injector.get(r,Df,h);return f!==Df||u===Df?f:this.parentInjector.get(r,u,h)}}class ug extends M_{get inputs(){const r=this.componentDef,u=r.inputTransforms,h=Ph(r.inputs);if(null!==u)for(const f of h)u.hasOwnProperty(f.propName)&&(f.transform=u[f.propName]);return h}get outputs(){return Ph(this.componentDef.outputs)}constructor(r,u){super(),this.componentDef=r,this.ngModule=u,this.componentType=r.type,this.selector=function Fo(n){return n.map(Ys).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!u}create(r,u,h,f){let y=(f=f||this.ngModule)instanceof el?f:f?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const w=y?new ag(r,y):r,A=w.get(om,null);if(null===A)throw new fe(407,!1);const ee={rendererFactory:A,sanitizer:w.get(N_,null),effectManager:w.get(z_,null)},le=A.createRenderer(null,this.componentDef),Fe=this.componentDef.selectors[0][0]||"div",Xe=h?function Yp(n,r,u,h){const y=h.get(Sf,!1)||u===Tn.ShadowDom,w=n.selectRootElement(r,y);return function nl(n){fm(n)}(w),w}(le,h,this.componentDef.encapsulation,w):hc(le,Fe,function og(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Fe)),ln=this.componentDef.signals?4608:this.componentDef.onPush?576:528,kn=vc(0,null,null,1,0,null,null,null,null,null,null),Rt=hm(null,kn,null,ln,null,null,ee,le,w,null,null);let Er,di;On(Rt);try{const Ii=this.componentDef;let sl,xE=null;Ii.findHostDirectiveDefs?(sl=[],xE=new Map,Ii.findHostDirectiveDefs(Ii,sl,xE),sl.push(Ii)):sl=[Ii];const UD=function Py(n,r){const u=n[ft],h=Qn;return n[h]=r,_c(u,h,2,"#host",null)}(Rt,Xe),BD=function xy(n,r,u,h,f,y,w){const A=f[ft];!function Oy(n,r,u,h){for(const f of n)r.mergedAttrs=mn(r.mergedAttrs,f.hostAttrs);null!==r.mergedAttrs&&(Jd(r,r.mergedAttrs,!0),null!==u&&d_(h,u,r))}(h,n,r,w);let O=null;null!==r&&(O=Lp(r,f[os]));const H=y.rendererFactory.createRenderer(r,u);let ee=16;u.signals?ee=4096:u.onPush&&(ee=64);const le=hm(f,Nf(u),null,ee,f[n.index],n,y,H,null,null,O);return A.firstCreatePass&&cd(A,n,h.length-1),kf(f,le),f[n.index]=le}(UD,Xe,Ii,sl,Rt,ee,le);di=G(kn,Qn),Xe&&function ky(n,r,u,h){if(h)at(n,u,["ng-version",am.full]);else{const{attrs:f,classes:y}=function lo(n){const r=[],u=[];let h=1,f=2;for(;h<n.length;){let y=n[h];if("string"==typeof y)2===f?""!==y&&r.push(y,n[++h]):8===f&&u.push(y);else{if(!pr(f))break;f=y}h++}return{attrs:r,classes:u}}(r.selectors[0]);f&&at(n,u,f),y&&y.length>0&&iu(n,u,y.join(" "))}}(le,Ii,Xe,h),void 0!==u&&function cg(n,r,u){const h=n.projection=[];for(let f=0;f<r.length;f++){const y=u[f];h.push(null!=y?Array.from(y):null)}}(di,this.ngContentSelectors,u),Er=function jf(n,r,u,h,f,y){const w=Ds(),A=f[ft],O=K(w,f);Iy(A,f,w,u,null,h);for(let ee=0;ee<u.length;ee++)Ws($u(f,A,w.directiveStart+ee,w),f);B_(A,f,w),O&&Ws(O,f);const H=$u(f,A,w.directiveStart+w.componentOffset,w);if(n[Zr]=f[Zr]=H,null!==y)for(const ee of y)ee(H,r);return Zp(A,w,n),H}(BD,Ii,sl,xE,Rt,[Ly]),rg(kn,Rt,null)}finally{io()}return new lg(this.componentType,Er,kl(di,Rt),Rt,di)}}class lg extends R_{constructor(r,u,h,f,y){super(),this.location=h,this._rootLView=f,this._tNode=y,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new Em(f),this.componentType=r}setInput(r,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),u))return;const y=this._rootLView;Ec(y[ft],y,f,r,u),this.previousInputValues.set(r,u),Kd(et(this._tNode.index,y))}}get injector(){return new La(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Ly(){const n=Ds();N(St()[ft],n)}function jy(n){const r=n.inputConfig,u={};for(const h in r)if(r.hasOwnProperty(h)){const f=r[h];Array.isArray(f)&&f[2]&&(u[h]=f[2])}n.inputTransforms=u}function Ic(n){return!!fg(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function fg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ea(n,r,u){return!Object.is(n[r],u)&&(n[r]=u,!0)}function bm(n,r,u,h){const f=St();return ea(f,ri(),r)&&(Rn(),za(si(),f,n,r,u,h)),bm}function Mu(n,r,u,h,f,y,w,A){const O=St(),H=Rn(),ee=n+Qn,le=H.firstCreatePass?function Rm(n,r,u,h,f,y,w,A,O){const H=r.consts,ee=_c(r,n,4,w||null,Zn(H,A));Qp(r,u,ee,Zn(H,O)),N(r,ee);const le=ee.tView=vc(2,ee,h,f,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,H,null);return null!==r.queries&&(r.queries.template(r,ee),le.queries=r.queries.embeddedTView(ee)),ee}(ee,H,O,r,u,h,f,y,w):H.data[ee];Pr(le,!1);const Fe=vo(H,O,le,n);S()&&_r(H,O,Fe,le),Ws(Fe,O),kf(O,O[ee]=eg(Fe,O,Fe,le)),Da(le)&&Qd(H,O,le),null!=w&&Fl(O,le,A)}let vo=function Ea(n,r,u,h){return x(!0),r[Un].createComment("")};function Mm(n){return ge(function Ot(){return yn.lFrame.contextLView}(),Qn+n)}function wg(n,r,u){const h=St();return ea(h,ri(),r)&&function Ha(n,r,u,h,f,y,w,A){const O=K(r,u);let ee,H=r.inputs;!A&&null!=H&&(ee=H[h])?(Ec(n,u,ee,h,f),Co(r)&&function _v(n,r){const u=et(r,n);16&u[Xt]||(u[Xt]|=64)}(u,r.index)):3&r.type&&(h=function Ey(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(h),f=null!=w?w(f,r.value||"",h):f,y.setProperty(O,h,f))}(Rn(),si(),h,n,r,h[Un],u,!1),wg}function Nm(n,r,u,h,f){const w=f?"class":"style";Ec(n,u,r.inputs[w],w,h)}function Kf(n,r,u,h){const f=St(),y=Rn(),w=Qn+n,A=f[Un],O=y.firstCreatePass?function Vh(n,r,u,h,f,y){const w=r.consts,O=_c(r,n,2,h,Zn(w,f));return Qp(r,u,O,Zn(w,y)),null!==O.attrs&&Jd(O,O.attrs,!1),null!==O.mergedAttrs&&Jd(O,O.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,O),O}(w,y,f,r,u,h):y.data[w],H=jh(y,f,O,A,r,n);f[w]=H;const ee=Da(O);return Pr(O,!0),d_(A,H,O),32!=(32&O.flags)&&S()&&_r(y,f,H,O),0===function Ts(){return yn.lFrame.elementDepthCount}()&&Ws(H,f),function Cs(){yn.lFrame.elementDepthCount++}(),ee&&(Qd(y,f,O),Zp(y,O,f)),null!==h&&Fl(f,O),Kf}function qf(){let n=Ds();ps()?function Uu(){yn.lFrame.isParent=!1}():(n=n.parent,Pr(n,!1));const r=n;(function Fu(n){return yn.skipHydrationRootTNode===n})(r)&&function Na(){yn.skipHydrationRootTNode=null}(),function zr(){yn.lFrame.elementDepthCount--}();const u=Rn();return u.firstCreatePass&&(N(u,n),Vs(n)&&u.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ju(n){return 0!=(8&n.flags)}(r)&&Nm(u,r,St(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function ml(n){return 0!=(16&n.flags)}(r)&&Nm(u,r,St(),r.stylesWithoutHost,!1),qf}function Zf(n,r,u,h){return Kf(n,r,u,h),qf(),Zf}let jh=(n,r,u,h,f,y)=>(x(!0),hc(h,f,function gl(){return yn.lFrame.currentNamespace}()));function Qf(){return St()}function Cc(n){return!!n&&"function"==typeof n.then}function Hh(n){return!!n&&"function"==typeof n.subscribe}function Jy(n,r,u,h){const f=St(),y=Rn(),w=Ds();return function xv(n,r,u,h,f,y,w){const A=Da(h),H=n.firstCreatePass&&tg(n),ee=r[Zr],le=Lf(r);let Fe=!0;if(3&h.type||w){const $t=K(h,r),ln=w?w($t):$t,kn=le.length,Rt=w?di=>w(rr(di[h.index])):h.index;let Er=null;if(!w&&A&&(Er=function Pv(n,r,u,h){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const w=f[y];if(w===u&&f[y+1]===h){const A=r[Vi],O=f[y+2];return A.length>O?A[O]:null}"string"==typeof w&&(y+=2)}return null}(n,r,f,h.index)),null!==Er)(Er.__ngLastListenerFn__||Er).__ngNextListenerFn__=y,Er.__ngLastListenerFn__=y,Fe=!1;else{y=J_(h,r,ee,y,!1);const di=u.listen(ln,f,y);le.push(y,di),H&&H.push(f,Rt,kn,kn+1)}}else y=J_(h,r,ee,y,!1);const Xe=h.outputs;let Dt;if(Fe&&null!==Xe&&(Dt=Xe[f])){const $t=Dt.length;if($t)for(let ln=0;ln<$t;ln+=2){const Ii=r[Dt[ln]][Dt[ln+1]].subscribe(y),sl=le.length;le.push(y,Ii),H&&H.push(f,h.index,sl,-(sl+1))}}}(y,f,f[Un],w,n,r,h),Jy}function Om(n,r,u,h){try{return po(6,r,u),!1!==u(h)}catch(f){return vm(n,f),!1}finally{po(7,r,u)}}function J_(n,r,u,h,f){return function y(w){if(w===Function)return h;Kd(n.componentOffset>-1?et(n.index,r):r);let O=Om(r,u,h,w),H=y.__ngNextListenerFn__;for(;H;)O=Om(r,u,H,w)&&O,H=H.__ngNextListenerFn__;return f&&!1===O&&w.preventDefault(),O}}function BE(n,r=""){const u=St(),h=Rn(),f=n+Qn,y=h.firstCreatePass?_c(h,f,1,r,null):h.data[f],w=Fv(h,u,y,r,n);u[f]=w,S()&&_r(h,u,w,y),Pr(y,!1)}let Fv=(n,r,u,h,f)=>(x(!0),function cf(n,r){return n.createText(r)}(r[Un],h));function i_(n){return s_("",n,""),i_}function s_(n,r,u){const h=St(),f=function nh(n,r,u,h){return ea(n,ri(),u)?r+Ce(u)+h:ar}(h,n,r,u);return f!==ar&&Au(h,or(),f),s_}const Zh=void 0;var EE=["en",[["a","p"],["AM","PM"],Zh],[["AM","PM"],Zh,Zh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zh,"{1} 'at' {0}",Zh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function GE(n){const u=Math.floor(Math.abs(n)),h=n.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Ag={};function zv(n){const r=function IE(n){return n.toLowerCase().replace(/_/g,"-")}(n);let u=wE(r);if(u)return u;const h=r.split("-")[0];if(u=wE(h),u)return u;if("en"===h)return EE;throw new fe(701,!1)}function Gv(n){return zv(n)[Rg.PluralCase]}function wE(n){return n in Ag||(Ag[n]=Gn.ng&&Gn.ng.common&&Gn.ng.common.locales&&Gn.ng.common.locales[n]),Ag[n]}var Rg=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Rg||{});const e="en-US";let M=e;class uv{}class X0{}function ET(n,r){return new t0(n,r??null,[])}class t0 extends uv{constructor(r,u,h){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ny(this);const f=Bi(r);this._bootstrapComponents=yc(f.bootstrap),this._r3Injector=Rf(r,u,[{provide:uv,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver},...h],Ae(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class n0 extends X0{constructor(r){super(),this.moduleType=r}create(r){return new t0(this.moduleType,r,[])}}class J0 extends uv{constructor(r){super(),this.componentFactoryResolver=new Ny(this),this.instance=null;const u=new ty([...r.providers,{provide:uv,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver}],r.parent||Wg(),r.debugName,new Set(["environment"]));this.injector=u,r.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function ew(n,r,u=null){return new J0({providers:n,parent:r,debugName:u,runEnvironmentInitializers:!0}).injector}let IT=(()=>{class n{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const h=Jm(0,u.type),f=h.length>0?ew([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,f)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ht({token:n,providedIn:"environment",factory:()=>new n(An(el))})}return n})();function tw(n){n.getStandaloneInjector=r=>r.get(IT).getOrCreateStandaloneInjector(n)}function uw(n,r,u,h,f,y){const w=r+u;return ea(n,w,f)?function Bl(n,r,u){return n[r]=u}(n,w+1,y?h.call(y,f):h(f)):function Yv(n,r){const u=n[r];return u===ar?void 0:u}(n,w+1)}function fw(n,r){const u=Rn();let h;const f=n+Qn;u.firstCreatePass?(h=function jT(n,r){if(r)for(let u=r.length-1;u>=0;u--){const h=r[u];if(n===h.name)return h}}(r,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks??=[]).push(f,h.onDestroy)):h=u.data[f];const y=h.factory||(h.factory=Hn(h.type)),w=sr(tl);try{const A=ha(!1),O=y();return ha(A),function Nv(n,r,u,h){u>=n.data.length&&(n.data[u]=null,n.blueprint[u]=null),r[u]=h}(u,St(),f,O),O}finally{sr(w)}}function pw(n,r,u){const h=n+Qn,f=St(),y=ge(f,h);return function Qv(n,r){return n[ft].data[r].pure}(f,h)?uw(f,function Vt(){const n=yn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}(),r,y.transform,u,y):y.transform(u)}function s0(n){return r=>{setTimeout(n,void 0,r)}}const tp=class WT extends I.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,u,h){let f=r,y=u||(()=>null),w=h;if(r&&"object"==typeof r){const O=r;f=O.next?.bind(O),y=O.error?.bind(O),w=O.complete?.bind(O)}this.__isAsync&&(y=s0(y),f&&(f=s0(f)),w&&(w=s0(w)));const A=super.subscribe({next:f,error:y,complete:w});return r instanceof X.w0&&r.add(A),A}};function KT(){return this._results[Symbol.iterator]()}class o0{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new tp)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=o0.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=KT)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,u){return this._results.reduce(r,u)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,u){const h=this;h.dirty=!1;const f=function Xi(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Xa(n,r,u){if(n.length!==r.length)return!1;for(let h=0;h<n.length;h++){let f=n[h],y=r[h];if(u&&(f=u(f),y=u(y)),y!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function ZT(n,r,u,h=!0){const f=r[ft];if(function hp(n,r,u,h){const f=Wi+h,y=u.length;h>0&&(u[f-1][Vn]=r),h<y-Wi?(r[Vn]=u[f],Ls(u,Wi+h,r)):(u.push(r),r[Vn]=null),r[_n]=u;const w=r[Ta];null!==w&&u!==w&&function Od(n,r){const u=n[To];r[Yr]!==r[_n][_n][Yr]&&(n[Es]=!0),null===u?n[To]=[r]:u.push(r)}(w,r);const A=r[ds];null!==A&&A.insertView(n),r[Xt]|=128}(f,r,n,u),h){const y=oi(u,n),w=r[Un],A=Li(w,n[Si]);null!==A&&function bl(n,r,u,h,f,y){h[Tt]=f,h[fi]=r,kd(n,h,u,1,f,y)}(f,n[fi],w,r,A,y)}}let Xv=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=XT}return n})();const YT=Xv,QT=class extends YT{constructor(r,u,h){super(),this._declarationLView=r,this._declarationTContainer=u,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,u){return this.createEmbeddedViewImpl(r,u)}createEmbeddedViewImpl(r,u,h){const f=function qT(n,r,u,h){const f=r.tView,A=hm(n,f,u,4096&n[Xt]?4096:16,null,r,null,null,null,h?.injector??null,h?.hydrationInfo??null);A[Ta]=n[r.index];const H=n[ds];return null!==H&&(A[ds]=H.createEmbeddedView(f)),rg(f,A,u),A}(this._declarationLView,this._declarationTContainer,r,{injector:u,hydrationInfo:h});return new Vf(f)}};function XT(){return DE(Ds(),St())}function DE(n,r){return 4&n.type?new QT(r,n,kl(n,r)):null}let bE=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=sC}return n})();function sC(){return Ew(Ds(),St())}const oC=bE,_w=class extends oC{constructor(r,u,h){super(),this._lContainer=r,this._hostTNode=u,this._hostLView=h}get element(){return kl(this._hostTNode,this._hostLView)}get injector(){return new La(this._hostTNode,this._hostLView)}get parentInjector(){const r=Oc(this._hostTNode,this._hostLView);if(Ss(r)){const u=Nc(r,this._hostLView),h=xa(r);return new La(u[ft].data[h+8],u)}return new La(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const u=vw(this._lContainer);return null!==u&&u[r]||null}get length(){return this._lContainer.length-Wi}createEmbeddedView(r,u,h){let f,y;"number"==typeof h?f=h:null!=h&&(f=h.index,y=h.injector);const A=r.createEmbeddedViewImpl(u||{},y,null);return this.insertImpl(A,f,false),A}createComponent(r,u,h,f,y){const w=r&&!function so(n){return"function"==typeof n}(r);let A;if(w)A=u;else{const $t=u||{};A=$t.index,h=$t.injector,f=$t.projectableNodes,y=$t.environmentInjector||$t.ngModuleRef}const O=w?r:new ug(Fn(r)),H=h||this.parentInjector;if(!y&&null==O.ngModule){const ln=(w?H:this.parentInjector).get(el,null);ln&&(y=ln)}Fn(O.componentType??{});const Xe=O.create(H,f,null,y);return this.insertImpl(Xe.hostView,A,false),Xe}insert(r,u){return this.insertImpl(r,u,!1)}insertImpl(r,u,h){const f=r._lView;if(function zn(n){return hs(n[_n])}(f)){const O=this.indexOf(r);if(-1!==O)this.detach(O);else{const H=f[_n],ee=new _w(H,H[fi],H[_n]);ee.detach(ee.indexOf(r))}}const w=this._adjustIndex(u),A=this._lContainer;return ZT(A,f,w,!h),r.attachToViewContainerRef(),Ls(u0(A),w,r),r}move(r,u){return this.insert(r,u)}indexOf(r){const u=vw(this._lContainer);return null!==u?u.indexOf(r):-1}remove(r){const u=this._adjustIndex(r,-1),h=T(this._lContainer,u);h&&(Ja(u0(this._lContainer),u),m(h[ft],h))}detach(r){const u=this._adjustIndex(r,-1),h=T(this._lContainer,u);return h&&null!=Ja(u0(this._lContainer),u)?new Vf(h):null}_adjustIndex(r,u=0){return r??this.length+u}};function vw(n){return n[8]}function u0(n){return n[8]||(n[8]=[])}function Ew(n,r){let u;const h=r[n.index];return hs(h)?u=h:(u=eg(h,r,null,n),r[n.index]=u,kf(r,u)),ww(u,r,n,h),new _w(u,n,r)}let ww=function Iw(n,r,u,h){if(n[Si])return;let f;f=8&u.type?rr(h):function aC(n,r){const u=n[Un],h=u.createComment(""),f=K(r,n);return Ke(u,Li(u,f),h,function Ba(n,r){return n.nextSibling(r)}(u,f),!1),h}(r,u),n[Si]=f};class l0{constructor(r){this.queryList=r,this.matches=null}clone(){return new l0(this.queryList)}setDirty(){this.queryList.setDirty()}}class c0{constructor(r=[]){this.queries=r}createEmbeddedView(r){const u=r.queries;if(null!==u){const h=null!==r.contentQueries?r.contentQueries[0]:u.length,f=[];for(let y=0;y<h;y++){const w=u.getByIndex(y);f.push(this.queries[w.indexInDeclarationView].clone())}return new c0(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let u=0;u<this.queries.length;u++)null!==Mw(r,u).matches&&this.queries[u].setDirty()}}class Tw{constructor(r,u,h=null){this.predicate=r,this.flags=u,this.read=h}}class d0{constructor(r=[]){this.queries=r}elementStart(r,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(r,u)}elementEnd(r){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(r)}embeddedTView(r){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,y=this.getByIndex(h).embeddedTView(r,f);y&&(y.indexInDeclarationView=h,null!==u?u.push(y):u=[y])}return null!==u?new d0(u):null}template(r,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(r,u)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class h0{constructor(r,u=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(r,u){this.isApplyingToNode(u)&&this.matchTNode(r,u)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,u){this.elementStart(r,u)}embeddedTView(r,u){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,u),new h0(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=r.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(r,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const y=h[f];this.matchTNodeWithReadOption(r,u,cC(u,y)),this.matchTNodeWithReadOption(r,u,kc(u,r,y,!1,!1))}else h===Xv?4&u.type&&this.matchTNodeWithReadOption(r,u,-1):this.matchTNodeWithReadOption(r,u,kc(u,r,h,!1,!1))}matchTNodeWithReadOption(r,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===ad||f===bE||f===Xv&&4&u.type)this.addMatch(u.index,-2);else{const y=kc(u,r,f,!1,!1);null!==y&&this.addMatch(u.index,y)}else this.addMatch(u.index,h)}}addMatch(r,u){null===this.matches?this.matches=[r,u]:this.matches.push(r,u)}}function cC(n,r){const u=n.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===r)return u[h+1];return null}function hC(n,r,u,h){return-1===u?function dC(n,r){return 11&n.type?kl(n,r):4&n.type?DE(n,r):null}(r,n):-2===u?function fC(n,r,u){return u===ad?kl(r,n):u===Xv?DE(r,n):u===bE?Ew(r,n):void 0}(n,r,h):$u(n,n[ft],u,r)}function Cw(n,r,u,h){const f=r[ds].queries[h];if(null===f.matches){const y=n.data,w=u.matches,A=[];for(let O=0;O<w.length;O+=2){const H=w[O];A.push(H<0?null:hC(r,y[H],w[O+1],u.metadata.read))}f.matches=A}return f.matches}function f0(n,r,u,h){const f=n.queries.getByIndex(u),y=f.matches;if(null!==y){const w=Cw(n,r,f,u);for(let A=0;A<y.length;A+=2){const O=y[A];if(O>0)h.push(w[A/2]);else{const H=y[A+1],ee=r[-O];for(let le=Wi;le<ee.length;le++){const Fe=ee[le];Fe[Ta]===Fe[_n]&&f0(Fe[ft],Fe,H,h)}if(null!==ee[To]){const le=ee[To];for(let Fe=0;Fe<le.length;Fe++){const Xe=le[Fe];f0(Xe[ft],Xe,H,h)}}}}}return h}function Dw(n){const r=St(),u=Rn(),h=vu();Zl(h+1);const f=Mw(u,h);if(n.dirty&&function lt(n){return 4==(4&n[Xt])}(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?f0(u,r,h,[]):Cw(u,r,f,h);n.reset(y,sm),n.notifyOnChanges()}return!0}return!1}function bw(n,r,u,h){const f=Rn();if(f.firstCreatePass){const y=Ds();(function Rw(n,r,u){null===n.queries&&(n.queries=new d0),n.queries.track(new h0(r,u))})(f,new Tw(r,u,h),y.index),function mC(n,r){const u=n.contentQueries||(n.contentQueries=[]);r!==(u.length?u[u.length-1]:-1)&&u.push(n.queries.length-1,r)}(f,n),2==(2&u)&&(f.staticContentQueries=!0)}!function Aw(n,r,u){const h=new o0(4==(4&u));(function Pf(n,r,u,h){const f=Lf(r);f.push(u),n.firstCreatePass&&tg(n).push(h,f.length-1)})(n,r,h,h.destroy),null===r[ds]&&(r[ds]=new c0),r[ds].queries.push(new l0(h))}(f,St(),u)}function Sw(){return function gC(n,r){return n[ds].queries[r].queryList}(St(),vu())}function Mw(n,r){return n.queries.getByIndex(r)}function p0(n){return!!Bi(n)}const Kw=new Gr("Application Initializer");let v0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h}),this.appInits=Ln(Kw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const f of this.appInits){const y=f();if(Cc(y))u.push(y);else if(Hh(y)){const w=new Promise((A,O)=>{y.subscribe({complete:A,error:O})});u.push(w)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qw=(()=>{class n{log(u){console.log(u)}warn(u){console.warn(u)}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const AE=new Gr("LocaleId",{providedIn:"root",factory:()=>Ln(AE,nn.Optional|nn.SkipSelf)||function UC(){return typeof $localize<"u"&&$localize.locale||e}()}),BC=new Gr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Zw=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Y.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class jC{constructor(r,u){this.ngModuleFactory=r,this.componentFactories=u}}let $C=(()=>{class n{compileModuleSync(u){return new n0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),y=yc(Bi(u).declarations).reduce((w,A)=>{const O=Fn(A);return O&&w.push(new ug(O)),w},[]);return new jC(h,y)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xw(...n){}class Hl{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tp(!1),this.onMicrotaskEmpty=new tp(!1),this.onStable=new tp(!1),this.onError=new tp(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function GC(){const n="function"==typeof Gn.requestAnimationFrame;let r=Gn[n?"requestAnimationFrame":"setTimeout"],u=Gn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&u){const h=r[Zone.__symbol__("OriginalDelegate")];h&&(r=h);const f=u[Zone.__symbol__("OriginalDelegate")];f&&(u=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function qC(n){const r=()=>{!function KC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Gn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,w0(n),n.isCheckStableRunning=!0,E0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),w0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,y,w,A)=>{try{return Jw(n),u.invokeTask(f,y,w,A)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),eI(n)}},onInvoke:(u,h,f,y,w,A,O)=>{try{return Jw(n),u.invoke(f,y,w,A,O)}finally{n.shouldCoalesceRunChangeDetection&&r(),eI(n)}},onHasTask:(u,h,f,y)=>{u.hasTask(f,y),h===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,w0(n),E0(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(u,h,f,y)=>(u.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hl.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(Hl.isInAngularZone())throw new fe(909,!1)}run(r,u,h){return this._inner.run(r,u,h)}runTask(r,u,h,f){const y=this._inner,w=y.scheduleEventTask("NgZoneEvent: "+f,r,WC,Xw,Xw);try{return y.runTask(w,u,h)}finally{y.cancelTask(w)}}runGuarded(r,u,h){return this._inner.runGuarded(r,u,h)}runOutsideAngular(r){return this._outer.run(r)}}const WC={};function E0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function w0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Jw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function eI(n){n._nesting--,E0(n)}class ZC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tp,this.onMicrotaskEmpty=new tp,this.onStable=new tp,this.onError=new tp}run(r,u,h){return r.apply(u,h)}runGuarded(r,u,h){return r.apply(u,h)}runOutsideAngular(r){return r()}runTask(r,u,h,f){return r.apply(u,h)}}const tI=new Gr("",{providedIn:"root",factory:nI});function nI(){const n=Ln(Hl);let r=!0;const u=new de.y(f=>{r=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{f.next(r),f.complete()})}),h=new de.y(f=>{let y;n.runOutsideAngular(()=>{y=n.onStable.subscribe(()=>{Hl.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(r=!0,f.next(!0))})})});const w=n.onUnstable.subscribe(()=>{Hl.assertInAngularZone(),r&&(r=!1,n.runOutsideAngular(()=>{f.next(!1)}))});return()=>{y.unsubscribe(),w.unsubscribe()}});return(0,Ie.T)(u,h.pipe((0,Me.B)()))}const rI=new Gr(""),iI=new Gr("");let I0,YC=(()=>{class n{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,I0||(function QC(n){I0=n}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hl.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==y),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}static#e=this.\u0275fac=function(h){return new(h||n)(An(Hl),An(sI),An(iI))};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac})}return n})(),sI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return I0?.findTestabilityInTree(this,u,h)??null}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Vm=null;const oI=new Gr("AllowMultipleToken"),T0=new Gr("PlatformDestroyListeners"),C0=new Gr("appBootstrapListener");class eD{constructor(r,u){this.name=r,this.token=u}}function lI(n,r,u=[]){const h=`Platform: ${r}`,f=new Gr(h);return(y=[])=>{let w=D0();if(!w||w.injector.get(oI,!1)){const A=[...u,...y,{provide:f,useValue:!0}];n?n(A):function tD(n){if(Vm&&!Vm.get(oI,!1))throw new fe(400,!1);(function aI(){!function bo(n){Ra=n}(()=>{throw new fe(600,!1)})})(),Vm=n;const r=n.get(dI);(function uI(n){n.get(Sp,null)?.forEach(u=>u())})(n)}(function cI(n=[],r){return Yd.create({name:r,providers:[{provide:su,useValue:"platform"},{provide:T0,useValue:new Set([()=>Vm=null])},...n]})}(A,h))}return function rD(n){const r=D0();if(!r)throw new fe(401,!1);return r}()}}function D0(){return Vm?.get(dI)??null}let dI=(()=>{class n{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function iD(n="zone.js",r){return"noop"===n?new ZC:"zone.js"===n?new Hl(r):n}(h?.ngZone,function hI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return f.run(()=>{const y=function wT(n,r,u){return new t0(n,r,u)}(u.moduleType,this.injector,function yI(n){return[{provide:Hl,useFactory:n},{provide:Cp,multi:!0,useFactory:()=>{const r=Ln(oD,{optional:!0});return()=>r.initialize()}},{provide:mI,useFactory:sD},{provide:tI,useFactory:nI}]}(()=>f)),w=y.injector.get(ud,null);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:O=>{w.handleError(O)}});y.onDestroy(()=>{RE(this._modules,y),A.unsubscribe()})}),function fI(n,r,u){try{const h=u();return Cc(h)?h.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):h}catch(h){throw r.runOutsideAngular(()=>n.handleError(h)),h}}(w,f,()=>{const A=y.injector.get(v0);return A.runInitializers(),A.donePromise.then(()=>(function U(n){oe(n,"Expected localeId to be defined"),"string"==typeof n&&(M=n.toLowerCase().replace(/_/g,"-"))}(y.injector.get(AE,e)||e),this._moduleDoBootstrap(y),y))})})}bootstrapModule(u,h=[]){const f=pI({},h);return function XC(n,r,u){const h=new n0(u);return Promise.resolve(h)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(u){const h=u.injector.get(dv);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new fe(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(T0,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(h){return new(h||n)(An(Yd))};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function pI(n,r){return Array.isArray(r)?r.reduce(pI,n):{...n,...r}}let dv=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ln(mI),this.zoneIsStable=Ln(tI),this.componentTypes=[],this.components=[],this.isStable=Ln(Zw).hasPendingTasks.pipe((0,Be.w)(u=>u?(0,Ne.of)(!1):this.zoneIsStable),(0,Pe.x)(),(0,Me.B)()),this._injector=Ln(el)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof M_;if(!this._injector.get(v0).done)throw!f&&Bo(u),new fe(405,!1);let w;w=f?u:this._injector.get(Cf).resolveComponentFactory(u),this.componentTypes.push(w.componentType);const A=function JC(n){return n.isBoundToModule}(w)?void 0:this._injector.get(uv),H=w.create(Yd.NULL,[],h||w.selector,A),ee=H.location.nativeElement,le=H.injector.get(rI,null);return le?.registerApplication(ee),H.onDestroy(()=>{this.detachView(H.hostView),RE(this.components,H),le?.unregisterApplication(ee)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;RE(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(C0,[]);h.push(...this._bootstrapListeners),h.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>RE(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new fe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RE(n,r){const u=n.indexOf(r);u>-1&&n.splice(u,1)}const mI=new Gr("",{providedIn:"root",factory:()=>Ln(ud).handleError.bind(void 0)});function sD(){const n=Ln(Hl),r=Ln(ud);return u=>n.runOutsideAngular(()=>r.handleError(u))}let oD=(()=>{class n{constructor(){this.zone=Ln(Hl),this.applicationRef=Ln(dv)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=Ht({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uD(){return!1}function lD(){}let cD=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=dD}return n})();function dD(n){return function hD(n,r,u){if(Co(n)&&!u){const h=et(n.index,r);return new Vf(h,h)}return 47&n.type?new Vf(r[Yr],r):null}(Ds(),St(),16==(16&n))}class wI{constructor(){}supports(r){return Ic(r)}create(r){return new _D(r)}}const yD=(n,r)=>r;class _D{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||yD}forEachItem(r){let u;for(u=this._itHead;null!==u;u=u._next)r(u)}forEachOperation(r){let u=this._itHead,h=this._removalsHead,f=0,y=null;for(;u||h;){const w=!h||u&&u.currentIndex<TI(h,f,y)?u:h,A=TI(w,f,y),O=w.currentIndex;if(w===h)f--,h=h._nextRemoved;else if(u=u._next,null==w.previousIndex)f++;else{y||(y=[]);const H=A-f,ee=O-f;if(H!=ee){for(let Fe=0;Fe<H;Fe++){const Xe=Fe<y.length?y[Fe]:y[Fe]=0,Dt=Xe+Fe;ee<=Dt&&Dt<H&&(y[Fe]=Xe+1)}y[w.previousIndex]=ee-H}}A!==O&&r(w,A,O)}}forEachPreviousItem(r){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)r(u)}forEachAddedItem(r){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)r(u)}forEachMovedItem(r){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)r(u)}forEachRemovedItem(r){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)r(u)}forEachIdentityChange(r){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)r(u)}diff(r){if(null==r&&(r=[]),!Ic(r))throw new fe(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,y,w,u=this._itHead,h=!1;if(Array.isArray(r)){this.length=r.length;for(let A=0;A<this.length;A++)y=r[A],w=this._trackByFn(A,y),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,y,w,A)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,w,A),h=!0),u=u._next}else f=0,function hg(n,r){if(Array.isArray(n))for(let u=0;u<n.length;u++)r(n[u]);else{const u=n[Symbol.iterator]();let h;for(;!(h=u.next()).done;)r(h.value)}}(r,A=>{w=this._trackByFn(f,A),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,A,w,f)),Object.is(u.item,A)||this._addIdentityChange(u,A)):(u=this._mismatch(u,A,w,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,u,h,f){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(r.item,u)||this._addIdentityChange(r,u),this._reinsertAfter(r,y,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(r.item,u)||this._addIdentityChange(r,u),this._moveAfter(r,y,f)):r=this._addAfter(new vD(u,h),y,f),r}_verifyReinsertion(r,u,h,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==y?r=this._reinsertAfter(y,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const u=r._next;this._addToRemovals(this._unlink(r)),r=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,y=r._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(r,u,h),this._addToMoves(r,h),r}_moveAfter(r,u,h){return this._unlink(r),this._insertAfter(r,u,h),this._addToMoves(r,h),r}_addAfter(r,u,h){return this._insertAfter(r,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,u,h){const f=null===u?this._itHead:u._next;return r._next=f,r._prev=u,null===f?this._itTail=r:f._prev=r,null===u?this._itHead=r:u._next=r,null===this._linkedRecords&&(this._linkedRecords=new II),this._linkedRecords.put(r),r.currentIndex=h,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const u=r._prev,h=r._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,r}_addToMoves(r,u){return r.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new II),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,u){return r.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class vD{constructor(r,u){this.item=r,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ED{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,r))return h;return null}remove(r){const u=r._prevDup,h=r._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class II{constructor(){this.map=new Map}put(r){const u=r.trackById;let h=this.map.get(u);h||(h=new ED,this.map.set(u,h)),h.add(r)}get(r,u){const f=this.map.get(r);return f?f.get(r,u):null}remove(r){const u=r.trackById;return this.map.get(u).remove(r)&&this.map.delete(u),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TI(n,r,u){const h=n.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+r+f}class CI{constructor(){}supports(r){return r instanceof Map||fg(r)}create(){return new wD}}class wD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let u;for(u=this._mapHead;null!==u;u=u._next)r(u)}forEachPreviousItem(r){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)r(u)}forEachChangedItem(r){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)r(u)}forEachAddedItem(r){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)r(u)}forEachRemovedItem(r){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)r(u)}diff(r){if(r){if(!(r instanceof Map||fg(r)))throw new fe(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(r,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const y=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,y)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,u){if(r){const h=r._prev;return u._next=r,u._prev=h,r._prev=u,h&&(h._next=u),r===this._mapHead&&(this._mapHead=u),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(r,u){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,u);const y=f._prev,w=f._next;return y&&(y._next=w),w&&(w._prev=y),f._next=null,f._prev=null,f}const h=new ID(r);return this._records.set(r,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,u){Object.is(u,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=u,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,u){r instanceof Map?r.forEach(u):Object.keys(r).forEach(h=>u(r[h],h))}}class ID{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DI(){return new M0([new wI])}let M0=(()=>{class n{static#e=this.\u0275prov=Ht({token:n,providedIn:"root",factory:DI});constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new n(u)}static extend(u){return{provide:n,useFactory:h=>n.create(u,h||DI()),deps:[[n,new fh,new Mi]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new fe(901,!1)}}return n})();function bI(){return new N0([new CI])}let N0=(()=>{class n{static#e=this.\u0275prov=Ht({token:n,providedIn:"root",factory:bI});constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new n(u)}static extend(u){return{provide:n,useFactory:h=>n.create(u,h||bI()),deps:[[n,new fh,new Mi]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new fe(901,!1)}}return n})();const DD=lI(null,"core",[]);let bD=(()=>{class n{constructor(u){}static#e=this.\u0275fac=function(h){return new(h||n)(An(dv))};static#t=this.\u0275mod=Ui({type:n});static#n=this.\u0275inj=Mn({})}return n})();function kD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function FD(n){const r=Fn(n);if(!r)return null;const u=new ug(r);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},6593:(Zt,Je,B)=>{B.d(Je,{Dx:()=>jr,b2:()=>un,q6:()=>Ht,se:()=>$e});var I=B(5879),X=B(6814);class Y extends X.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class de extends Y{static makeCurrent(){(0,X.HT)(new de)}onAndCancel(ne,J,re){return ne.addEventListener(J,re),()=>{ne.removeEventListener(J,re)}}dispatchEvent(ne,J){ne.dispatchEvent(J)}remove(ne){ne.parentNode&&ne.parentNode.removeChild(ne)}createElement(ne,J){return(J=J||this.getDefaultDocument()).createElement(ne)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ne){return ne.nodeType===Node.ELEMENT_NODE}isShadowRoot(ne){return ne instanceof DocumentFragment}getGlobalEventTarget(ne,J){return"window"===J?window:"document"===J?ne:"body"===J?ne.body:null}getBaseHref(ne){const J=function Ne(){return Ie=Ie||document.querySelector("base"),Ie?Ie.getAttribute("href"):null}();return null==J?null:function Be(Q){Me=Me||document.createElement("a"),Me.setAttribute("href",Q);const ne=Me.pathname;return"/"===ne.charAt(0)?ne:`/${ne}`}(J)}resetBaseElement(){Ie=null}getUserAgent(){return window.navigator.userAgent}getCookie(ne){return(0,X.Mx)(document.cookie,ne)}}let Me,Ie=null,ae=(()=>{class Q{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(re){return new(re||Q)};static#t=this.\u0275prov=I.Yz7({token:Q,factory:Q.\u0275fac})}return Q})();const he=new I.OlP("EventManagerPlugins");let Ae=(()=>{class Q{constructor(J,re){this._zone=re,this._eventNameToPlugin=new Map,J.forEach(je=>{je.manager=this}),this._plugins=J.slice().reverse()}addEventListener(J,re,je){return this._findPluginFor(re).addEventListener(J,re,je)}getZone(){return this._zone}_findPluginFor(J){let re=this._eventNameToPlugin.get(J);if(re)return re;if(re=this._plugins.find(gt=>gt.supports(J)),!re)throw new I.vHH(5101,!1);return this._eventNameToPlugin.set(J,re),re}static#e=this.\u0275fac=function(re){return new(re||Q)(I.LFG(he),I.LFG(I.R0b))};static#t=this.\u0275prov=I.Yz7({token:Q,factory:Q.\u0275fac})}return Q})();class mt{constructor(ne){this._doc=ne}}const ut="ng-app-id";let kt=(()=>{class Q{constructor(J,re,je,gt={}){this.doc=J,this.appId=re,this.nonce=je,this.platformId=gt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,X.PM)(gt),this.resetHostNodes()}addStyles(J){for(const re of J)1===this.changeUsageCount(re,1)&&this.onStyleAdded(re)}removeStyles(J){for(const re of J)this.changeUsageCount(re,-1)<=0&&this.onStyleRemoved(re)}ngOnDestroy(){const J=this.styleNodesInDOM;J&&(J.forEach(re=>re.remove()),J.clear());for(const re of this.getAllStyles())this.onStyleRemoved(re);this.resetHostNodes()}addHost(J){this.hostNodes.add(J);for(const re of this.getAllStyles())this.addStyleToHost(J,re)}removeHost(J){this.hostNodes.delete(J)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(J){for(const re of this.hostNodes)this.addStyleToHost(re,J)}onStyleRemoved(J){const re=this.styleRef;re.get(J)?.elements?.forEach(je=>je.remove()),re.delete(J)}collectServerRenderedStyles(){const J=this.doc.head?.querySelectorAll(`style[${ut}="${this.appId}"]`);if(J?.length){const re=new Map;return J.forEach(je=>{null!=je.textContent&&re.set(je.textContent,je)}),re}return null}changeUsageCount(J,re){const je=this.styleRef;if(je.has(J)){const gt=je.get(J);return gt.usage+=re,gt.usage}return je.set(J,{usage:re,elements:[]}),re}getStyleElement(J,re){const je=this.styleNodesInDOM,gt=je?.get(re);if(gt?.parentNode===J)return je.delete(re),gt.removeAttribute(ut),gt;{const Ut=this.doc.createElement("style");return this.nonce&&Ut.setAttribute("nonce",this.nonce),Ut.textContent=re,this.platformIsServer&&Ut.setAttribute(ut,this.appId),Ut}}addStyleToHost(J,re){const je=this.getStyleElement(J,re);J.appendChild(je);const gt=this.styleRef,Ut=gt.get(re)?.elements;Ut?Ut.push(je):gt.set(re,{elements:[je],usage:1})}resetHostNodes(){const J=this.hostNodes;J.clear(),J.add(this.doc.head)}static#e=this.\u0275fac=function(re){return new(re||Q)(I.LFG(X.K0),I.LFG(I.AFp),I.LFG(I.Ojb,8),I.LFG(I.Lbi))};static#t=this.\u0275prov=I.Yz7({token:Q,factory:Q.\u0275fac})}return Q})();const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pt=/%COMP%/g,Ze=new I.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function dt(Q,ne){return ne.map(J=>J.replace(Pt,Q))}let $e=(()=>{class Q{constructor(J,re,je,gt,Ut,Tn,Jt,xt=null){this.eventManager=J,this.sharedStylesHost=re,this.appId=je,this.removeStylesOnCompDestroy=gt,this.doc=Ut,this.platformId=Tn,this.ngZone=Jt,this.nonce=xt,this.rendererByCompId=new Map,this.platformIsServer=(0,X.PM)(Tn),this.defaultRenderer=new qe(J,Ut,Jt,this.platformIsServer)}createRenderer(J,re){if(!J||!re)return this.defaultRenderer;this.platformIsServer&&re.encapsulation===I.ifc.ShadowDom&&(re={...re,encapsulation:I.ifc.Emulated});const je=this.getOrCreateRenderer(J,re);return je instanceof Bn?je.applyToHost(J):je instanceof Xn&&je.applyStyles(),je}getOrCreateRenderer(J,re){const je=this.rendererByCompId;let gt=je.get(re.id);if(!gt){const Ut=this.doc,Tn=this.ngZone,Jt=this.eventManager,xt=this.sharedStylesHost,bn=this.removeStylesOnCompDestroy,Hr=this.platformIsServer;switch(re.encapsulation){case I.ifc.Emulated:gt=new Bn(Jt,xt,re,this.appId,bn,Ut,Tn,Hr);break;case I.ifc.ShadowDom:return new En(Jt,xt,J,re,Ut,Tn,this.nonce,Hr);default:gt=new Xn(Jt,xt,re,bn,Ut,Tn,Hr)}je.set(re.id,gt)}return gt}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(re){return new(re||Q)(I.LFG(Ae),I.LFG(kt),I.LFG(I.AFp),I.LFG(Ze),I.LFG(X.K0),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(I.Ojb))};static#t=this.\u0275prov=I.Yz7({token:Q,factory:Q.\u0275fac})}return Q})();class qe{constructor(ne,J,re,je){this.eventManager=ne,this.doc=J,this.ngZone=re,this.platformIsServer=je,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ne,J){return J?this.doc.createElementNS(wt[J]||J,ne):this.doc.createElement(ne)}createComment(ne){return this.doc.createComment(ne)}createText(ne){return this.doc.createTextNode(ne)}appendChild(ne,J){(pn(ne)?ne.content:ne).appendChild(J)}insertBefore(ne,J,re){ne&&(pn(ne)?ne.content:ne).insertBefore(J,re)}removeChild(ne,J){ne&&ne.removeChild(J)}selectRootElement(ne,J){let re="string"==typeof ne?this.doc.querySelector(ne):ne;if(!re)throw new I.vHH(-5104,!1);return J||(re.textContent=""),re}parentNode(ne){return ne.parentNode}nextSibling(ne){return ne.nextSibling}setAttribute(ne,J,re,je){if(je){J=je+":"+J;const gt=wt[je];gt?ne.setAttributeNS(gt,J,re):ne.setAttribute(J,re)}else ne.setAttribute(J,re)}removeAttribute(ne,J,re){if(re){const je=wt[re];je?ne.removeAttributeNS(je,J):ne.removeAttribute(`${re}:${J}`)}else ne.removeAttribute(J)}addClass(ne,J){ne.classList.add(J)}removeClass(ne,J){ne.classList.remove(J)}setStyle(ne,J,re,je){je&(I.JOm.DashCase|I.JOm.Important)?ne.style.setProperty(J,re,je&I.JOm.Important?"important":""):ne.style[J]=re}removeStyle(ne,J,re){re&I.JOm.DashCase?ne.style.removeProperty(J):ne.style[J]=""}setProperty(ne,J,re){ne[J]=re}setValue(ne,J){ne.nodeValue=J}listen(ne,J,re){if("string"==typeof ne&&!(ne=(0,X.q)().getGlobalEventTarget(this.doc,ne)))throw new Error(`Unsupported event target ${ne} for event ${J}`);return this.eventManager.addEventListener(ne,J,this.decoratePreventDefault(re))}decoratePreventDefault(ne){return J=>{if("__ngUnwrap__"===J)return ne;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ne(J)):ne(J))&&J.preventDefault()}}}function pn(Q){return"TEMPLATE"===Q.tagName&&void 0!==Q.content}class En extends qe{constructor(ne,J,re,je,gt,Ut,Tn,Jt){super(ne,gt,Ut,Jt),this.sharedStylesHost=J,this.hostEl=re,this.shadowRoot=re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const xt=dt(je.id,je.styles);for(const bn of xt){const Hr=document.createElement("style");Tn&&Hr.setAttribute("nonce",Tn),Hr.textContent=bn,this.shadowRoot.appendChild(Hr)}}nodeOrShadowRoot(ne){return ne===this.hostEl?this.shadowRoot:ne}appendChild(ne,J){return super.appendChild(this.nodeOrShadowRoot(ne),J)}insertBefore(ne,J,re){return super.insertBefore(this.nodeOrShadowRoot(ne),J,re)}removeChild(ne,J){return super.removeChild(this.nodeOrShadowRoot(ne),J)}parentNode(ne){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ne)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Xn extends qe{constructor(ne,J,re,je,gt,Ut,Tn,Jt){super(ne,gt,Ut,Tn),this.sharedStylesHost=J,this.removeStylesOnCompDestroy=je,this.styles=Jt?dt(Jt,re.styles):re.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Bn extends Xn{constructor(ne,J,re,je,gt,Ut,Tn,Jt){const xt=je+"-"+re.id;super(ne,J,re,gt,Ut,Tn,Jt,xt),this.contentAttr=function Ce(Q){return"_ngcontent-%COMP%".replace(Pt,Q)}(xt),this.hostAttr=function st(Q){return"_nghost-%COMP%".replace(Pt,Q)}(xt)}applyToHost(ne){this.applyStyles(),this.setAttribute(ne,this.hostAttr,"")}createElement(ne,J){const re=super.createElement(ne,J);return super.setAttribute(re,this.contentAttr,""),re}}let Lr=(()=>{class Q extends mt{constructor(J){super(J)}supports(J){return!0}addEventListener(J,re,je){return J.addEventListener(re,je,!1),()=>this.removeEventListener(J,re,je)}removeEventListener(J,re,je){return J.removeEventListener(re,je)}static#e=this.\u0275fac=function(re){return new(re||Q)(I.LFG(X.K0))};static#t=this.\u0275prov=I.Yz7({token:Q,factory:Q.\u0275fac})}return Q})();const er=["alt","control","meta","shift"],Ue={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tt={alt:Q=>Q.altKey,control:Q=>Q.ctrlKey,meta:Q=>Q.metaKey,shift:Q=>Q.shiftKey};let Qe=(()=>{class Q extends mt{constructor(J){super(J)}supports(J){return null!=Q.parseEventName(J)}addEventListener(J,re,je){const gt=Q.parseEventName(re),Ut=Q.eventCallback(gt.fullKey,je,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,X.q)().onAndCancel(J,gt.domEventName,Ut))}static parseEventName(J){const re=J.toLowerCase().split("."),je=re.shift();if(0===re.length||"keydown"!==je&&"keyup"!==je)return null;const gt=Q._normalizeKey(re.pop());let Ut="",Tn=re.indexOf("code");if(Tn>-1&&(re.splice(Tn,1),Ut="code."),er.forEach(xt=>{const bn=re.indexOf(xt);bn>-1&&(re.splice(bn,1),Ut+=xt+".")}),Ut+=gt,0!=re.length||0===gt.length)return null;const Jt={};return Jt.domEventName=je,Jt.fullKey=Ut,Jt}static matchEventFullKeyCode(J,re){let je=Ue[J.key]||J.key,gt="";return re.indexOf("code.")>-1&&(je=J.code,gt="code."),!(null==je||!je)&&(je=je.toLowerCase()," "===je?je="space":"."===je&&(je="dot"),er.forEach(Ut=>{Ut!==je&&(0,tt[Ut])(J)&&(gt+=Ut+".")}),gt+=je,gt===re)}static eventCallback(J,re,je){return gt=>{Q.matchEventFullKeyCode(gt,J)&&je.runGuarded(()=>re(gt))}}static _normalizeKey(J){return"esc"===J?"escape":J}static#e=this.\u0275fac=function(re){return new(re||Q)(I.LFG(X.K0))};static#t=this.\u0275prov=I.Yz7({token:Q,factory:Q.\u0275fac})}return Q})();const Ht=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:X.bD},{provide:I.g9A,useValue:function ke(){de.makeCurrent()},multi:!0},{provide:X.K0,useFactory:function pt(){return(0,I.RDi)(document),document},deps:[]}]),cn=new I.OlP(""),Mn=[{provide:I.rWj,useClass:class Pe{addToWindow(ne){I.dqk.getAngularTestability=(re,je=!0)=>{const gt=ne.findTestabilityInTree(re,je);if(null==gt)throw new I.vHH(5103,!1);return gt},I.dqk.getAllAngularTestabilities=()=>ne.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>ne.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(re=>{const je=I.dqk.getAllAngularTestabilities();let gt=je.length,Ut=!1;const Tn=function(Jt){Ut=Ut||Jt,gt--,0==gt&&re(Ut)};je.forEach(Jt=>{Jt.whenStable(Tn)})})}findTestabilityInTree(ne,J,re){return null==J?null:ne.getTestability(J)??(re?(0,X.q)().isShadowRoot(J)?this.findTestabilityInTree(ne,J.host,!0):this.findTestabilityInTree(ne,J.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],Kt=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function yt(){return new I.qLn},deps:[]},{provide:he,useClass:Lr,multi:!0,deps:[X.K0,I.R0b,I.Lbi]},{provide:he,useClass:Qe,multi:!0,deps:[X.K0]},$e,kt,Ae,{provide:I.FYo,useExisting:$e},{provide:X.JF,useClass:ae,deps:[]},[]];let un=(()=>{class Q{constructor(J){}static withServerTransition(J){return{ngModule:Q,providers:[{provide:I.AFp,useValue:J.appId}]}}static#e=this.\u0275fac=function(re){return new(re||Q)(I.LFG(cn,12))};static#t=this.\u0275mod=I.oAB({type:Q});static#n=this.\u0275inj=I.cJS({providers:[...Kt,...Mn],imports:[X.ez,I.hGG]})}return Q})(),jr=(()=>{class Q{constructor(J){this._doc=J}getTitle(){return this._doc.title}setTitle(J){this._doc.title=J||""}static#e=this.\u0275fac=function(re){return new(re||Q)(I.LFG(X.K0))};static#t=this.\u0275prov=I.Yz7({token:Q,factory:function(re){let je=null;return je=re?new re:function Ni(){return new jr((0,I.LFG)(X.K0))}(),je},providedIn:"root"})}return Q})();typeof window<"u"&&window},8113:(Zt,Je,B)=>{B.d(Je,{F0:()=>Os,rH:()=>Na,Bz:()=>ii,lC:()=>Vo});var I=B(5879),X=B(2664),Y=B(2459),de=B(2096),Ie=B(5619),Ne=B(5592),Me=B(7453),Be=B(2737),Pe=B(7400),ae=B(4564),he=B(2714),Ae=B(8251),mt=B(7103);function ut(...S){const x=(0,ae.yG)(S),C=(0,ae.jO)(S),{args:N,keys:$}=(0,Me.D)(S);if(0===N.length)return(0,Y.D)([],x);const se=new Ne.y(function kt(S,x,C=Be.y){return N=>{wt(x,()=>{const{length:$}=S,se=new Array($);let ie=$,He=$;for(let pe=0;pe<$;pe++)wt(x,()=>{const hn=(0,Y.D)(S[pe],x);let tn=!1;hn.subscribe((0,Ae.x)(N,Cr=>{se[pe]=Cr,tn||(tn=!0,He--),He||N.next(C(se.slice()))},()=>{--ie||N.complete()}))},N)},N)}}(N,x,$?ie=>(0,he.n)($,ie):Be.y));return C?se.pipe((0,Pe.Z)(C)):se}function wt(S,x,C){S?(0,mt.f)(C,S,x):x()}var Pt=B(6973),bt=B(5211),Le=B(4911),Mt=B(8407),fe=B(4674);function Ze(S,x){const C=(0,fe.m)(S)?S:()=>S,N=$=>$.error(C());return new Ne.y(x?$=>x.schedule(N,0,$):N)}var Ce=B(6232),st=B(7394),dt=B(9360);function $e(){return(0,dt.e)((S,x)=>{let C=null;S._refCount++;const N=(0,Ae.x)(x,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(C=null);const $=S._connection,se=C;C=null,$&&(!se||$===se)&&$.unsubscribe(),x.unsubscribe()});S.subscribe(N),N.closed||(C=S.connect())})}class qe extends Ne.y{constructor(x,C){super(),this.source=x,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,dt.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,x?.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new st.w0;const C=this.getSubject();x.add(this.source.subscribe((0,Ae.x)(C,void 0,()=>{this._teardown(),C.complete()},N=>{this._teardown(),C.error(N)},()=>this._teardown()))),x.closed&&(this._connection=null,x=st.w0.EMPTY)}return x}refCount(){return $e()(this)}}var Ct=B(8645),jt=B(6814),pn=B(7398),En=B(4664),Xn=B(8180),Bn=B(7921),Lr=B(2181),er=B(1631),Ue=B(1374),tt=B(6328),Qe=B(9397),ot=B(4829);function Se(S){return(0,dt.e)((x,C)=>{let se,N=null,$=!1;N=x.subscribe((0,Ae.x)(C,void 0,void 0,ie=>{se=(0,ot.Xf)(S(ie,Se(S)(x))),N?(N.unsubscribe(),N=null,se.subscribe(C)):$=!0})),$&&(N.unsubscribe(),N=null,se.subscribe(C))})}var nt=B(6699),oe=B(3572);function ke(S){return S<=0?()=>Ce.E:(0,dt.e)((x,C)=>{let N=[];x.subscribe((0,Ae.x)(C,$=>{N.push($),S<N.length&&N.shift()},()=>{for(const $ of N)C.next($);C.complete()},void 0,()=>{N=null}))})}var yt=B(3026),Ht=B(4716),cn=B(7537),Mn=B(6593);const Kt="primary",un=Symbol("RouteTitle");class $n{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const C=this.params[x];return Array.isArray(C)?C[0]:C}return null}getAll(x){if(this.has(x)){const C=this.params[x];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function cr(S){return new $n(S)}function Us(S,x,C){const N=C.path.split("/");if(N.length>S.length||"full"===C.pathMatch&&(x.hasChildren()||N.length<S.length))return null;const $={};for(let se=0;se<N.length;se++){const ie=N[se],He=S[se];if(ie.startsWith(":"))$[ie.substring(1)]=He;else if(ie!==He.path)return null}return{consumed:S.slice(0,N.length),posParams:$}}function jr(S,x){const C=S?Object.keys(S):void 0,N=x?Object.keys(x):void 0;if(!C||!N||C.length!=N.length)return!1;let $;for(let se=0;se<C.length;se++)if($=C[se],!rs(S[$],x[$]))return!1;return!0}function rs(S,x){if(Array.isArray(S)&&Array.isArray(x)){if(S.length!==x.length)return!1;const C=[...S].sort(),N=[...x].sort();return C.every(($,se)=>N[se]===$)}return S===x}function Ti(S){return S.length>0?S[S.length-1]:null}function nn(S){return(0,X.b)(S)?S:(0,I.QGY)(S)?(0,Y.D)(Promise.resolve(S)):(0,de.of)(S)}const xn={exact:function Ci(S,x,C){if(!yi(S.segments,x.segments)||!Wn(S.segments,x.segments,C)||S.numberOfChildren!==x.numberOfChildren)return!1;for(const N in x.children)if(!S.children[N]||!Ci(S.children[N],x.children[N],C))return!1;return!0},subset:wr},gn={exact:function Mr(S,x){return jr(S,x)},subset:function Gn(S,x){return Object.keys(x).length<=Object.keys(S).length&&Object.keys(x).every(C=>rs(S[C],x[C]))},ignored:()=>!0};function sr(S,x,C){return xn[C.paths](S.root,x.root,C.matrixParams)&&gn[C.queryParams](S.queryParams,x.queryParams)&&!("exact"===C.fragment&&S.fragment!==x.fragment)}function wr(S,x,C){return Gi(S,x,x.segments,C)}function Gi(S,x,C,N){if(S.segments.length>C.length){const $=S.segments.slice(0,C.length);return!(!yi($,C)||x.hasChildren()||!Wn($,C,N))}if(S.segments.length===C.length){if(!yi(S.segments,C)||!Wn(S.segments,C,N))return!1;for(const $ in x.children)if(!S.children[$]||!wr(S.children[$],x.children[$],N))return!1;return!0}{const $=C.slice(0,S.segments.length),se=C.slice(S.segments.length);return!!(yi(S.segments,$)&&Wn(S.segments,$,N)&&S.children[Kt])&&Gi(S.children[Kt],x,se,N)}}function Wn(S,x,C){return x.every((N,$)=>gn[C](S[$].parameters,N.parameters))}class $r{constructor(x=new Yt([],{}),C={},N=null){this.root=x,this.queryParams=C,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return ei.serialize(this)}}class Yt{constructor(x,C){this.segments=x,this.children=C,this.parent=null,Object.values(C).forEach(N=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tr(this)}}class Ir{constructor(x,C){this.path=x,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=cr(this.parameters)),this._parameterMap}toString(){return J(this)}}function yi(S,x){return S.length===x.length&&S.every((C,N)=>C.path===x[N].path)}let br=(()=>{class S{static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:function(){return new fr},providedIn:"root"})}return S})();class fr{parse(x){const C=new Te(x);return new $r(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(x){const C=`/${Nr(x.root,!0)}`,N=function je(S){const x=Object.keys(S).map(C=>{const N=S[C];return Array.isArray(N)?N.map($=>`${ti(C)}=${ti($)}`).join("&"):`${ti(C)}=${ti(N)}`}).filter(C=>!!C);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${C}${N}${"string"==typeof x.fragment?`#${function Ln(S){return encodeURI(S)}(x.fragment)}`:""}`}}const ei=new fr;function tr(S){return S.segments.map(x=>J(x)).join("/")}function Nr(S,x){if(!S.hasChildren())return tr(S);if(x){const C=S.children[Kt]?Nr(S.children[Kt],!1):"",N=[];return Object.entries(S.children).forEach(([$,se])=>{$!==Kt&&N.push(`${$}:${Nr(se,!1)}`)}),N.length>0?`${C}(${N.join("//")})`:C}{const C=function Fi(S,x){let C=[];return Object.entries(S.children).forEach(([N,$])=>{N===Kt&&(C=C.concat(x($,N)))}),Object.entries(S.children).forEach(([N,$])=>{N!==Kt&&(C=C.concat(x($,N)))}),C}(S,(N,$)=>$===Kt?[Nr(S.children[Kt],!1)]:[`${$}:${Nr(N,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[Kt]?`${tr(S)}/${C[0]}`:`${tr(S)}/(${C.join("//")})`}}function An(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ti(S){return An(S).replace(/%3B/gi,";")}function we(S){return An(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Q(S){return decodeURIComponent(S)}function ne(S){return Q(S.replace(/\+/g,"%20"))}function J(S){return`${we(S.path)}${function re(S){return Object.keys(S).map(x=>`;${we(x)}=${we(S[x])}`).join("")}(S.parameters)}`}const gt=/^[^\/()?;#]+/;function Ut(S){const x=S.match(gt);return x?x[0]:""}const Tn=/^[^\/()?;=#]+/,xt=/^[^=?&#]+/,Hr=/^[^&#]+/;class Te{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(x.length>0||Object.keys(C).length>0)&&(N[Kt]=new Yt(x,C)),N}parseSegment(){const x=Ut(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new I.vHH(4009,!1);return this.capture(x),new Ir(Q(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const C=function Jt(S){const x=S.match(Tn);return x?x[0]:""}(this.remaining);if(!C)return;this.capture(C);let N="";if(this.consumeOptional("=")){const $=Ut(this.remaining);$&&(N=$,this.capture(N))}x[Q(C)]=Q(N)}parseQueryParam(x){const C=function bn(S){const x=S.match(xt);return x?x[0]:""}(this.remaining);if(!C)return;this.capture(C);let N="";if(this.consumeOptional("=")){const ie=function We(S){const x=S.match(Hr);return x?x[0]:""}(this.remaining);ie&&(N=ie,this.capture(N))}const $=ne(C),se=ne(N);if(x.hasOwnProperty($)){let ie=x[$];Array.isArray(ie)||(ie=[ie],x[$]=ie),ie.push(se)}else x[$]=se}parseParens(x){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=Ut(this.remaining),$=this.remaining[N.length];if("/"!==$&&")"!==$&&";"!==$)throw new I.vHH(4010,!1);let se;N.indexOf(":")>-1?(se=N.slice(0,N.indexOf(":")),this.capture(se),this.capture(":")):x&&(se=Kt);const ie=this.parseChildren();C[se]=1===Object.keys(ie).length?ie[Kt]:new Yt([],ie),this.consumeOptional("//")}return C}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new I.vHH(4011,!1)}}function be(S){return S.segments.length>0?new Yt([],{[Kt]:S}):S}function me(S){const x={};for(const N of Object.keys(S.children)){const se=me(S.children[N]);if(N===Kt&&0===se.segments.length&&se.hasChildren())for(const[ie,He]of Object.entries(se.children))x[ie]=He;else(se.segments.length>0||se.hasChildren())&&(x[N]=se)}return function ve(S){if(1===S.numberOfChildren&&S.children[Kt]){const x=S.children[Kt];return new Yt(S.segments.concat(x.segments),x.children)}return S}(new Yt(S.segments,x))}function Ve(S){return S instanceof $r}function Qt(S){let x;const $=be(function C(se){const ie={};for(const pe of se.children){const hn=C(pe);ie[pe.outlet]=hn}const He=new Yt(se.url,ie);return se===S&&(x=He),He}(S.root));return x??$}function Bt(S,x,C,N){let $=S;for(;$.parent;)$=$.parent;if(0===x.length)return nr($,$,$,C,N);const se=function cs(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new ss(!0,0,S);let x=0,C=!1;const N=S.reduce(($,se,ie)=>{if("object"==typeof se&&null!=se){if(se.outlets){const He={};return Object.entries(se.outlets).forEach(([pe,hn])=>{He[pe]="string"==typeof hn?hn.split("/"):hn}),[...$,{outlets:He}]}if(se.segmentPath)return[...$,se.segmentPath]}return"string"!=typeof se?[...$,se]:0===ie?(se.split("/").forEach((He,pe)=>{0==pe&&"."===He||(0==pe&&""===He?C=!0:".."===He?x++:""!=He&&$.push(He))}),$):[...$,se]},[]);return new ss(C,x,N)}(x);if(se.toRoot())return nr($,$,new Yt([],{}),C,N);const ie=function pr(S,x,C){if(S.isAbsolute)return new Tr(x,!0,0);if(!C)return new Tr(x,!1,NaN);if(null===C.parent)return new Tr(C,!0,0);const N=mn(S.commands[0])?0:1;return function vs(S,x,C){let N=S,$=x,se=C;for(;se>$;){if(se-=$,N=N.parent,!N)throw new I.vHH(4005,!1);$=N.segments.length}return new Tr(N,!1,$-se)}(C,C.segments.length-1+N,S.numberOfDoubleDots)}(se,$,S),He=ie.processChildren?Ns(ie.segmentGroup,ie.index,se.commands):Di(ie.segmentGroup,ie.index,se.commands);return nr($,ie.segmentGroup,He,C,N)}function mn(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function dr(S){return"object"==typeof S&&null!=S&&S.outlets}function nr(S,x,C,N,$){let ie,se={};N&&Object.entries(N).forEach(([pe,hn])=>{se[pe]=Array.isArray(hn)?hn.map(tn=>`${tn}`):`${hn}`}),ie=S===x?C:Fr(S,x,C);const He=be(me(ie));return new $r(He,se,$)}function Fr(S,x,C){const N={};return Object.entries(S.children).forEach(([$,se])=>{N[$]=se===x?C:Fr(se,x,C)}),new Yt(S.segments,N)}class ss{constructor(x,C,N){if(this.isAbsolute=x,this.numberOfDoubleDots=C,this.commands=N,x&&N.length>0&&mn(N[0]))throw new I.vHH(4003,!1);const $=N.find(dr);if($&&$!==Ti(N))throw new I.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tr{constructor(x,C,N){this.segmentGroup=x,this.processChildren=C,this.index=N}}function Di(S,x,C){if(S||(S=new Yt([],{})),0===S.segments.length&&S.hasChildren())return Ns(S,x,C);const N=function Io(S,x,C){let N=0,$=x;const se={match:!1,pathIndex:0,commandIndex:0};for(;$<S.segments.length;){if(N>=C.length)return se;const ie=S.segments[$],He=C[N];if(dr(He))break;const pe=`${He}`,hn=N<C.length-1?C[N+1]:null;if($>0&&void 0===pe)break;if(pe&&hn&&"object"==typeof hn&&void 0===hn.outlets){if(!Fo(pe,hn,ie))return se;N+=2}else{if(!Fo(pe,{},ie))return se;N++}$++}return{match:!0,pathIndex:$,commandIndex:N}}(S,x,C),$=C.slice(N.commandIndex);if(N.match&&N.pathIndex<S.segments.length){const se=new Yt(S.segments.slice(0,N.pathIndex),{});return se.children[Kt]=new Yt(S.segments.slice(N.pathIndex),S.children),Ns(se,0,$)}return N.match&&0===$.length?new Yt(S.segments,{}):N.match&&!S.hasChildren()?gr(S,x,C):N.match?Ns(S,0,$):gr(S,x,C)}function Ns(S,x,C){if(0===C.length)return new Yt(S.segments,{});{const N=function Pi(S){return dr(S[0])?S[0].outlets:{[Kt]:S}}(C),$={};if(!N[Kt]&&S.children[Kt]&&1===S.numberOfChildren&&0===S.children[Kt].segments.length){const se=Ns(S.children[Kt],x,C);return new Yt(S.segments,se.children)}return Object.entries(N).forEach(([se,ie])=>{"string"==typeof ie&&(ie=[ie]),null!==ie&&($[se]=Di(S.children[se],x,ie))}),Object.entries(S.children).forEach(([se,ie])=>{void 0===N[se]&&($[se]=ie)}),new Yt(S.segments,$)}}function gr(S,x,C){const N=S.segments.slice(0,x);let $=0;for(;$<C.length;){const se=C[$];if(dr(se)){const pe=uo(se.outlets);return new Yt(N,pe)}if(0===$&&mn(C[0])){N.push(new Ir(S.segments[x].path,Ys(C[0]))),$++;continue}const ie=dr(se)?se.outlets[Kt]:`${se}`,He=$<C.length-1?C[$+1]:null;ie&&He&&mn(He)?(N.push(new Ir(ie,Ys(He))),$+=2):(N.push(new Ir(ie,{})),$++)}return new Yt(N,{})}function uo(S){const x={};return Object.entries(S).forEach(([C,N])=>{"string"==typeof N&&(N=[N]),null!==N&&(x[C]=gr(new Yt([],{}),0,N))}),x}function Ys(S){const x={};return Object.entries(S).forEach(([C,N])=>x[C]=`${N}`),x}function Fo(S,x,C){return S==C.path&&jr(x,C.parameters)}const lo="imperative";class _i{constructor(x,C){this.id=x,this.url=C}}class Uo extends _i{constructor(x,C,N="imperative",$=null){super(x,C),this.type=0,this.navigationTrigger=N,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qs extends _i{constructor(x,C,N){super(x,C),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qa extends _i{constructor(x,C,N,$){super(x,C),this.reason=N,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ui extends _i{constructor(x,C,N,$){super(x,C),this.reason=N,this.code=$,this.type=16}}class Za extends _i{constructor(x,C,N,$){super(x,C),this.error=N,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hi extends _i{constructor(x,C,N,$){super(x,C),this.urlAfterRedirects=N,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ia extends _i{constructor(x,C,N,$){super(x,C),this.urlAfterRedirects=N,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class co extends _i{constructor(x,C,N,$,se){super(x,C),this.urlAfterRedirects=N,this.state=$,this.shouldActivate=se,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fn extends _i{constructor(x,C,N,$){super(x,C),this.urlAfterRedirects=N,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xi extends _i{constructor(x,C,N,$){super(x,C),this.urlAfterRedirects=N,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bo{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bi{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ia{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xe{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Re{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ye{constructor(x,C,N){this.routerEvent=x,this.position=C,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Tt{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ft,this.attachRef=null}}let ft=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(C,N){const $=this.getOrCreateContext(C);$.outlet=N,this.contexts.set(C,$)}onChildOutletDestroyed(C){const N=this.getContext(C);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let N=this.getContext(C);return N||(N=new Tt,this.contexts.set(C,N)),N}getContext(C){return this.contexts.get(C)||null}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();class Xt{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const C=this.pathFromRoot(x);return C.length>1?C[C.length-2]:null}children(x){const C=_n(x,this._root);return C?C.children.map(N=>N.value):[]}firstChild(x){const C=_n(x,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(x){const C=Vn(x,this._root);return C.length<2?[]:C[C.length-2].children.map($=>$.value).filter($=>$!==x)}pathFromRoot(x){return Vn(x,this._root).map(C=>C.value)}}function _n(S,x){if(S===x.value)return x;for(const C of x.children){const N=_n(S,C);if(N)return N}return null}function Vn(S,x){if(S===x.value)return[x];for(const C of x.children){const N=Vn(S,C);if(N.length)return N.unshift(x),N}return[]}class bi{constructor(x,C){this.value=x,this.children=C}toString(){return`TreeNode(${this.value})`}}function fi(S){const x={};return S&&S.children.forEach(C=>x[C.value.outlet]=C),x}class Vi extends Xt{constructor(x,C){super(x),this.snapshot=C,Yr(this,x)}toString(){return this.snapshot.toString()}}function Zr(S,x){const C=function os(S,x){const ie=new ho([],{},{},"",{},Kt,x,null,{});return new us("",new bi(ie,[]))}(0,x),N=new Ie.X([new Ir("",{})]),$=new Ie.X({}),se=new Ie.X({}),ie=new Ie.X({}),He=new Ie.X(""),pe=new Yi(N,$,ie,He,se,Kt,x,C.root);return pe.snapshot=C.root,new Vi(new bi(pe,[]),C)}class Yi{constructor(x,C,N,$,se,ie,He,pe){this.urlSubject=x,this.paramsSubject=C,this.queryParamsSubject=N,this.fragmentSubject=$,this.dataSubject=se,this.outlet=ie,this.component=He,this._futureSnapshot=pe,this.title=this.dataSubject?.pipe((0,pn.U)(hn=>hn[un]))??(0,de.of)(void 0),this.url=x,this.params=C,this.queryParams=N,this.fragment=$,this.data=se}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pn.U)(x=>cr(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pn.U)(x=>cr(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Un(S,x="emptyOnly"){const C=S.pathFromRoot;let N=0;if("always"!==x)for(N=C.length-1;N>=1;){const $=C[N],se=C[N-1];if($.routeConfig&&""===$.routeConfig.path)N--;else{if(se.component)break;N--}}return function as(S){return S.reduce((x,C)=>({params:{...x.params,...C.params},data:{...x.data,...C.data},resolve:{...C.data,...x.resolve,...C.routeConfig?.data,...C._resolvedData}}),{params:{},data:{},resolve:{}})}(C.slice(N))}class ho{get title(){return this.data?.[un]}constructor(x,C,N,$,se,ie,He,pe,hn){this.url=x,this.params=C,this.queryParams=N,this.fragment=$,this.data=se,this.outlet=ie,this.component=He,this.routeConfig=pe,this._resolve=hn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class us extends Xt{constructor(x,C){super(C),this.url=x,Yr(this,C)}toString(){return Ta(this._root)}}function Yr(S,x){x.value._routerState=S,x.children.forEach(C=>Yr(S,C))}function Ta(S){const x=S.children.length>0?` { ${S.children.map(Ta).join(", ")} } `:"";return`${S.value}${x}`}function Ca(S){if(S.snapshot){const x=S.snapshot,C=S._futureSnapshot;S.snapshot=C,jr(x.queryParams,C.queryParams)||S.queryParamsSubject.next(C.queryParams),x.fragment!==C.fragment&&S.fragmentSubject.next(C.fragment),jr(x.params,C.params)||S.paramsSubject.next(C.params),function Ni(S,x){if(S.length!==x.length)return!1;for(let C=0;C<S.length;++C)if(!jr(S[C],x[C]))return!1;return!0}(x.url,C.url)||S.urlSubject.next(C.url),jr(x.data,C.data)||S.dataSubject.next(C.data)}else S.snapshot=S._futureSnapshot,S.dataSubject.next(S._futureSnapshot.data)}function ds(S,x){const C=jr(S.params,x.params)&&function is(S,x){return yi(S,x)&&S.every((C,N)=>jr(C.parameters,x[N].parameters))}(S.url,x.url);return C&&!(!S.parent!=!x.parent)&&(!S.parent||ds(S.parent,x.parent))}let Vo=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=Kt,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.attachEvents=new I.vpe,this.detachEvents=new I.vpe,this.parentContexts=(0,I.f3M)(ft),this.location=(0,I.f3M)(I.s_b),this.changeDetector=(0,I.f3M)(I.sBO),this.environmentInjector=(0,I.f3M)(I.lqb),this.inputBinder=(0,I.f3M)(pi,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(C){if(C.name){const{firstChange:N,previousValue:$}=C.name;if(N)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(C){return this.parentContexts.getContext(C)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const C=this.parentContexts.getContext(this.name);C?.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I.vHH(4012,!1);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,N){this.activated=C,this._activatedRoute=N,this.location.insert(C.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,N){if(this.isActivated)throw new I.vHH(4013,!1);this._activatedRoute=C;const $=this.location,ie=C.snapshot.component,He=this.parentContexts.getOrCreateContext(this.name).children,pe=new Xs(C,He,$.injector);this.activated=$.createComponent(ie,{index:$.length,injector:pe,environmentInjector:N??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275dir=I.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[I.TTD]})}return S})();class Xs{constructor(x,C,N){this.route=x,this.childContexts=C,this.parent=N}get(x,C){return x===Yi?this.route:x===ft?this.childContexts:this.parent.get(x,C)}}const pi=new I.OlP("");let yr=(()=>{class S{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(C){this.unsubscribeFromRouteData(C),this.subscribeToRouteData(C)}unsubscribeFromRouteData(C){this.outletDataSubscriptions.get(C)?.unsubscribe(),this.outletDataSubscriptions.delete(C)}subscribeToRouteData(C){const{activatedRoute:N}=C,$=ut([N.queryParams,N.params,N.data]).pipe((0,En.w)(([se,ie,He],pe)=>(He={...se,...ie,...He},0===pe?(0,de.of)(He):Promise.resolve(He)))).subscribe(se=>{if(!C.isActivated||!C.activatedComponentRef||C.activatedRoute!==N||null===N.component)return void this.unsubscribeFromRouteData(C);const ie=(0,I.qFp)(N.component);if(ie)for(const{templateName:He}of ie.inputs)C.activatedComponentRef.setInput(He,se[He]);else this.unsubscribeFromRouteData(C)});this.outletDataSubscriptions.set(C,$)}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac})}return S})();function fo(S,x,C){if(C&&S.shouldReuseRoute(x.value,C.value.snapshot)){const N=C.value;N._futureSnapshot=x.value;const $=function Qn(S,x,C){return x.children.map(N=>{for(const $ of C.children)if(S.shouldReuseRoute(N.value,$.value.snapshot))return fo(S,N,$);return fo(S,N)})}(S,x,C);return new bi(N,$)}{if(S.shouldAttach(x.value)){const se=S.retrieve(x.value);if(null!==se){const ie=se.route;return ie.value._futureSnapshot=x.value,ie.children=x.children.map(He=>fo(S,He)),ie}}const N=function gi(S){return new Yi(new Ie.X(S.url),new Ie.X(S.params),new Ie.X(S.queryParams),new Ie.X(S.fragment),new Ie.X(S.data),S.outlet,S.component,S)}(x.value),$=x.children.map(se=>fo(S,se));return new bi(N,$)}}const $o="ngNavigationCancelingError";function Es(S,x){const{redirectTo:C,navigationBehaviorOptions:N}=Ve(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,$=Si(!1,0,x);return $.url=C,$.navigationBehaviorOptions=N,$}function Si(S,x,C){const N=new Error("NavigationCancelingError: "+(S||""));return N[$o]=!0,N.cancellationCode=x,C&&(N.url=C),N}function Bs(S){return To(S)&&Ve(S.url)}function To(S){return S&&S[$o]}let Ho=(()=>{class S{static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275cmp=I.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[I.jDz],decls:1,vars:0,template:function(N,$){1&N&&I._UZ(0,"router-outlet")},dependencies:[Vo],encapsulation:2})}return S})();function Ya(S){const x=S.children&&S.children.map(Ya),C=x?{...S,children:x}:{...S};return!C.component&&!C.loadComponent&&(x||C.loadChildren)&&C.outlet&&C.outlet!==Kt&&(C.component=Ho),C}function Ki(S){return S.outlet||Kt}function Go(S){if(!S)return null;if(S.routeConfig?._injector)return S.routeConfig._injector;for(let x=S.parent;x;x=x.parent){const C=x.routeConfig;if(C?._loadedInjector)return C._loadedInjector;if(C?._injector)return C._injector}return null}class al{constructor(x,C,N,$,se){this.routeReuseStrategy=x,this.futureState=C,this.currState=N,this.forwardEvent=$,this.inputBindingEnabled=se}activate(x){const C=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,N,x),Ca(this.futureState.root),this.activateChildRoutes(C,N,x)}deactivateChildRoutes(x,C,N){const $=fi(C);x.children.forEach(se=>{const ie=se.value.outlet;this.deactivateRoutes(se,$[ie],N),delete $[ie]}),Object.values($).forEach(se=>{this.deactivateRouteAndItsChildren(se,N)})}deactivateRoutes(x,C,N){const $=x.value,se=C?C.value:null;if($===se)if($.component){const ie=N.getContext($.outlet);ie&&this.deactivateChildRoutes(x,C,ie.children)}else this.deactivateChildRoutes(x,C,N);else se&&this.deactivateRouteAndItsChildren(C,N)}deactivateRouteAndItsChildren(x,C){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,C):this.deactivateRouteAndOutlet(x,C)}detachAndStoreRouteSubtree(x,C){const N=C.getContext(x.value.outlet),$=N&&x.value.component?N.children:C,se=fi(x);for(const ie of Object.keys(se))this.deactivateRouteAndItsChildren(se[ie],$);if(N&&N.outlet){const ie=N.outlet.detach(),He=N.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:ie,route:x,contexts:He})}}deactivateRouteAndOutlet(x,C){const N=C.getContext(x.value.outlet),$=N&&x.value.component?N.children:C,se=fi(x);for(const ie of Object.keys(se))this.deactivateRouteAndItsChildren(se[ie],$);N&&(N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated()),N.attachRef=null,N.route=null)}activateChildRoutes(x,C,N){const $=fi(C);x.children.forEach(se=>{this.activateRoutes(se,$[se.value.outlet],N),this.forwardEvent(new Re(se.value.snapshot))}),x.children.length&&this.forwardEvent(new ia(x.value.snapshot))}activateRoutes(x,C,N){const $=x.value,se=C?C.value:null;if(Ca($),$===se)if($.component){const ie=N.getOrCreateContext($.outlet);this.activateChildRoutes(x,C,ie.children)}else this.activateChildRoutes(x,C,N);else if($.component){const ie=N.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const He=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),ie.children.onOutletReAttached(He.contexts),ie.attachRef=He.componentRef,ie.route=He.route.value,ie.outlet&&ie.outlet.attach(He.componentRef,He.route.value),Ca(He.route.value),this.activateChildRoutes(x,null,ie.children)}else{const He=Go($.snapshot);ie.attachRef=null,ie.route=$,ie.injector=He,ie.outlet&&ie.outlet.activateWith($,ie.injector),this.activateChildRoutes(x,null,ie.children)}}else this.activateChildRoutes(x,null,N)}}class ba{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class du{constructor(x,C){this.component=x,this.route=C}}function Gl(S,x,C){const N=S._root;return sa(N,x?x._root:null,C,[N.value])}function fs(S,x){const C=Symbol(),N=x.get(S,C);return N===C?"function"!=typeof S||(0,I.Z0I)(S)?x.get(S):S:N}function sa(S,x,C,N,$={canDeactivateChecks:[],canActivateChecks:[]}){const se=fi(x);return S.children.forEach(ie=>{(function ul(S,x,C,N,$={canDeactivateChecks:[],canActivateChecks:[]}){const se=S.value,ie=x?x.value:null,He=C?C.getContext(S.value.outlet):null;if(ie&&se.routeConfig===ie.routeConfig){const pe=function hu(S,x,C){if("function"==typeof C)return C(S,x);switch(C){case"pathParamsChange":return!yi(S.url,x.url);case"pathParamsOrQueryParamsChange":return!yi(S.url,x.url)||!jr(S.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ds(S,x)||!jr(S.queryParams,x.queryParams);default:return!ds(S,x)}}(ie,se,se.routeConfig.runGuardsAndResolvers);pe?$.canActivateChecks.push(new ba(N)):(se.data=ie.data,se._resolvedData=ie._resolvedData),sa(S,x,se.component?He?He.children:null:C,N,$),pe&&He&&He.outlet&&He.outlet.isActivated&&$.canDeactivateChecks.push(new du(He.outlet.component,ie))}else ie&&Js(x,He,$),$.canActivateChecks.push(new ba(N)),sa(S,null,se.component?He?He.children:null:C,N,$)})(ie,se[ie.value.outlet],C,N.concat([ie.value]),$),delete se[ie.value.outlet]}),Object.entries(se).forEach(([ie,He])=>Js(He,C.getContext(ie),$)),$}function Js(S,x,C){const N=fi(S),$=S.value;Object.entries(N).forEach(([se,ie])=>{Js(ie,$.component?x?x.children.getContext(se):null:x,C)}),C.canDeactivateChecks.push(new du($.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,$))}function eo(S){return"function"==typeof S}function ku(S){return S instanceof Pt.K||"EmptyError"===S?.name}const Wo=Symbol("INITIAL_VALUE");function Ko(){return(0,En.w)(S=>ut(S.map(x=>x.pipe((0,Xn.q)(1),(0,Bn.O)(Wo)))).pipe((0,pn.U)(x=>{for(const C of x)if(!0!==C){if(C===Wo)return Wo;if(!1===C||C instanceof $r)return C}return!0}),(0,Lr.h)(x=>x!==Wo),(0,Xn.q)(1)))}function Ps(S){return(0,Mt.z)((0,Qe.b)(x=>{if(Ve(x))throw Es(0,x)}),(0,pn.U)(x=>!0===x))}class ji{constructor(x){this.segmentGroup=x||null}}class Aa{constructor(x){this.urlTree=x}}function Ri(S){return Ze(new ji(S))}function Ra(S){return Ze(new Aa(S))}class ue{constructor(x,C){this.urlSerializer=x,this.urlTree=C}noMatchError(x){return new I.vHH(4002,!1)}lineralizeSegments(x,C){let N=[],$=C.root;for(;;){if(N=N.concat($.segments),0===$.numberOfChildren)return(0,de.of)(N);if($.numberOfChildren>1||!$.children[Kt])return Ze(new I.vHH(4e3,!1));$=$.children[Kt]}}applyRedirectCommands(x,C,N){return this.applyRedirectCreateUrlTree(C,this.urlSerializer.parse(C),x,N)}applyRedirectCreateUrlTree(x,C,N,$){const se=this.createSegmentGroup(x,C.root,N,$);return new $r(se,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(x,C){const N={};return Object.entries(x).forEach(([$,se])=>{if("string"==typeof se&&se.startsWith(":")){const He=se.substring(1);N[$]=C[He]}else N[$]=se}),N}createSegmentGroup(x,C,N,$){const se=this.createSegments(x,C.segments,N,$);let ie={};return Object.entries(C.children).forEach(([He,pe])=>{ie[He]=this.createSegmentGroup(x,pe,N,$)}),new Yt(se,ie)}createSegments(x,C,N,$){return C.map(se=>se.path.startsWith(":")?this.findPosParam(x,se,$):this.findOrReturn(se,N))}findPosParam(x,C,N){const $=N[C.path.substring(1)];if(!$)throw new I.vHH(4001,!1);return $}findOrReturn(x,C){let N=0;for(const $ of C){if($.path===x.path)return C.splice(N),$;N++}return x}}const Zo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cl(S,x,C,N,$){const se=Lu(S,x,C);return se.matched?(N=function Wi(S,x){return S.providers&&!S._injector&&(S._injector=(0,I.MMx)(S.providers,x,`Route: ${S.path}`)),S._injector??x}(x,N),function pu(S,x,C,N){const $=x.canMatch;if(!$||0===$.length)return(0,de.of)(!0);const se=$.map(ie=>{const He=fs(ie,S);return nn(function Hn(S){return S&&eo(S.canMatch)}(He)?He.canMatch(x,C):S.runInContext(()=>He(x,C)))});return(0,de.of)(se).pipe(Ko(),Ps())}(N,x,C).pipe((0,pn.U)(ie=>!0===ie?se:{...Zo}))):(0,de.of)(se)}function Lu(S,x,C){if(""===x.path)return"full"===x.pathMatch&&(S.hasChildren()||C.length>0)?{...Zo}:{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const $=(x.matcher||Us)(C,S,x);if(!$)return{...Zo};const se={};Object.entries($.posParams??{}).forEach(([He,pe])=>{se[He]=pe.path});const ie=$.consumed.length>0?{...se,...$.consumed[$.consumed.length-1].parameters}:se;return{matched:!0,consumedSegments:$.consumed,remainingSegments:C.slice($.consumed.length),parameters:ie,positionalParamSegments:$.posParams??{}}}function gu(S,x,C,N){return C.length>0&&function ni(S,x,C){return C.some(N=>xs(S,x,N)&&Ki(N)!==Kt)}(S,C,N)?{segmentGroup:new Yt(x,mu(N,new Yt(C,S.children))),slicedSegments:[]}:0===C.length&&function Kr(S,x,C){return C.some(N=>xs(S,x,N))}(S,C,N)?{segmentGroup:new Yt(S.segments,dl(S,0,C,N,S.children)),slicedSegments:C}:{segmentGroup:new Yt(S.segments,S.children),slicedSegments:C}}function dl(S,x,C,N,$){const se={};for(const ie of N)if(xs(S,C,ie)&&!$[Ki(ie)]){const He=new Yt([],{});se[Ki(ie)]=He}return{...$,...se}}function mu(S,x){const C={};C[Kt]=x;for(const N of S)if(""===N.path&&Ki(N)!==Kt){const $=new Yt([],{});C[Ki(N)]=$}return C}function xs(S,x,C){return(!(S.hasChildren()||x.length>0)||"full"!==C.pathMatch)&&""===C.path}class Kl{constructor(x,C,N,$,se,ie,He){this.injector=x,this.configLoader=C,this.rootComponentType=N,this.config=$,this.urlTree=se,this.paramsInheritanceStrategy=ie,this.urlSerializer=He,this.allowRedirects=!0,this.applyRedirects=new ue(this.urlSerializer,this.urlTree)}noMatchError(x){return new I.vHH(4002,!1)}recognize(){const x=gu(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,Kt).pipe(Se(C=>{if(C instanceof Aa)return this.allowRedirects=!1,this.urlTree=C.urlTree,this.match(C.urlTree);throw C instanceof ji?this.noMatchError(C):C}),(0,pn.U)(C=>{const N=new ho([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Kt,this.rootComponentType,null,{}),$=new bi(N,C),se=new us("",$),ie=function at(S,x,C=null,N=null){return Bt(Qt(S),x,C,N)}(N,[],this.urlTree.queryParams,this.urlTree.fragment);return ie.queryParams=this.urlTree.queryParams,se.url=this.urlSerializer.serialize(ie),this.inheritParamsAndData(se._root),{state:se,tree:ie}}))}match(x){return this.processSegmentGroup(this.injector,this.config,x.root,Kt).pipe(Se(N=>{throw N instanceof ji?this.noMatchError(N):N}))}inheritParamsAndData(x){const C=x.value,N=Un(C,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data),x.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(x,C,N,$){return 0===N.segments.length&&N.hasChildren()?this.processChildren(x,C,N):this.processSegment(x,C,N,N.segments,$,!0)}processChildren(x,C,N){const $=[];for(const se of Object.keys(N.children))"primary"===se?$.unshift(se):$.push(se);return(0,Y.D)($).pipe((0,tt.b)(se=>{const ie=N.children[se],He=function cu(S,x){const C=S.filter(N=>Ki(N)===x);return C.push(...S.filter(N=>Ki(N)!==x)),C}(C,se);return this.processSegmentGroup(x,He,ie,se)}),(0,nt.R)((se,ie)=>(se.push(...ie),se)),(0,oe.d)(null),function pt(S,x){const C=arguments.length>=2;return N=>N.pipe(S?(0,Lr.h)(($,se)=>S($,se,N)):Be.y,ke(1),C?(0,oe.d)(x):(0,yt.T)(()=>new Pt.K))}(),(0,er.z)(se=>{if(null===se)return Ri(N);const ie=yu(se);return function Ma(S){S.sort((x,C)=>x.value.outlet===Kt?-1:C.value.outlet===Kt?1:x.value.outlet.localeCompare(C.value.outlet))}(ie),(0,de.of)(ie)}))}processSegment(x,C,N,$,se,ie){return(0,Y.D)(C).pipe((0,tt.b)(He=>this.processSegmentAgainstRoute(He._injector??x,C,He,N,$,se,ie).pipe(Se(pe=>{if(pe instanceof ji)return(0,de.of)(null);throw pe}))),(0,Ue.P)(He=>!!He),Se(He=>{if(ku(He))return function Sc(S,x,C){return 0===x.length&&!S.children[C]}(N,$,se)?(0,de.of)([]):Ri(N);throw He}))}processSegmentAgainstRoute(x,C,N,$,se,ie,He){return function la(S,x,C,N){return!!(Ki(S)===N||N!==Kt&&xs(x,C,S))&&("**"===S.path||Lu(x,S,C).matched)}(N,$,se,ie)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(x,$,N,se,ie,He):He&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,$,C,N,se,ie):Ri($):Ri($)}expandSegmentAgainstRouteUsingRedirect(x,C,N,$,se,ie){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,N,$,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(x,C,N,$,se,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,C,N,$){const se=this.applyRedirects.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?Ra(se):this.applyRedirects.lineralizeSegments(N,se).pipe((0,er.z)(ie=>{const He=new Yt(ie,{});return this.processSegment(x,C,He,ie,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,C,N,$,se,ie){const{matched:He,consumedSegments:pe,remainingSegments:hn,positionalParamSegments:tn}=Lu(C,$,se);if(!He)return Ri(C);const Cr=this.applyRedirects.applyRedirectCommands(pe,$.redirectTo,tn);return $.redirectTo.startsWith("/")?Ra(Cr):this.applyRedirects.lineralizeSegments($,Cr).pipe((0,er.z)(Ur=>this.processSegment(x,N,C,Ur.concat(hn),ie,!1)))}matchSegmentAgainstRoute(x,C,N,$,se,ie){let He;if("**"===N.path){const pe=$.length>0?Ti($).parameters:{},hn=new ho($,pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,go(N),Ki(N),N.component??N._loadedComponent??null,N,ql(N));He=(0,de.of)({snapshot:hn,consumedSegments:[],remainingSegments:[]}),C.children={}}else He=cl(C,N,$,x).pipe((0,pn.U)(({matched:pe,consumedSegments:hn,remainingSegments:tn,parameters:Cr})=>pe?{snapshot:new ho(hn,Cr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,go(N),Ki(N),N.component??N._loadedComponent??null,N,ql(N)),consumedSegments:hn,remainingSegments:tn}:null));return He.pipe((0,En.w)(pe=>null===pe?Ri(C):this.getChildConfig(x=N._injector??x,N,$).pipe((0,En.w)(({routes:hn})=>{const tn=N._loadedInjector??x,{snapshot:Cr,consumedSegments:Ur,remainingSegments:da}=pe,{segmentGroup:Qo,slicedSegments:bs}=gu(C,Ur,da,hn);if(0===bs.length&&Qo.hasChildren())return this.processChildren(tn,hn,Qo).pipe((0,pn.U)(ml=>null===ml?null:[new bi(Cr,ml)]));if(0===hn.length&&0===bs.length)return(0,de.of)([new bi(Cr,[])]);const ju=Ki(N)===se;return this.processSegment(tn,hn,Qo,bs,ju?Kt:se,!0).pipe((0,pn.U)(ml=>[new bi(Cr,ml)]))}))))}getChildConfig(x,C,N){return C.children?(0,de.of)({routes:C.children,injector:x}):C.loadChildren?void 0!==C._loadedRoutes?(0,de.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):function fu(S,x,C,N){const $=x.canLoad;if(void 0===$||0===$.length)return(0,de.of)(!0);const se=$.map(ie=>{const He=fs(ie,S);return nn(function ll(S){return S&&eo(S.canLoad)}(He)?He.canLoad(x,C):S.runInContext(()=>He(x,C)))});return(0,de.of)(se).pipe(Ko(),Ps())}(x,C,N).pipe((0,er.z)($=>$?this.configLoader.loadChildren(x,C).pipe((0,Qe.b)(se=>{C._loadedRoutes=se.routes,C._loadedInjector=se.injector})):function bo(S){return Ze(Si(!1,3))}())):(0,de.of)({routes:[],injector:x})}}function Is(S){const x=S.value.routeConfig;return x&&""===x.path}function yu(S){const x=[],C=new Set;for(const N of S){if(!Is(N)){x.push(N);continue}const $=x.find(se=>N.value.routeConfig===se.value.routeConfig);void 0!==$?($.children.push(...N.children),C.add($)):x.push(N)}for(const N of C){const $=yu(N.children);x.push(new bi(N.value,$))}return x.filter(N=>!C.has(N))}function go(S){return S.data||{}}function ql(S){return S.resolve||{}}function ge(S){return"string"==typeof S.title||null===S.title}function et(S){return(0,En.w)(x=>{const C=S(x);return C?(0,Y.D)(C).pipe((0,pn.U)(()=>x)):(0,de.of)(x)})}const lt=new I.OlP("ROUTES");let rn=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,I.f3M)(I.Sil)}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return(0,de.of)(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const N=nn(C.loadComponent()).pipe((0,pn.U)(Zn),(0,Qe.b)(se=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=se}),(0,Ht.x)(()=>{this.componentLoaders.delete(C)})),$=new qe(N,()=>new Ct.x).pipe($e());return this.componentLoaders.set(C,$),$}loadChildren(C,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,de.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const se=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,pn.U)(He=>{this.onLoadEndListener&&this.onLoadEndListener(N);let pe,hn;return Array.isArray(He)?hn=He:(pe=He.create(C).injector,hn=pe.get(lt,[],I.XFs.Self|I.XFs.Optional).flat()),{routes:hn.map(Ya),injector:pe}}),(0,Ht.x)(()=>{this.childrenLoaders.delete(N)})),ie=new qe(se,()=>new Ct.x).pipe($e());return this.childrenLoaders.set(N,ie),ie}loadModuleFactoryOrRoutes(C){return nn(C()).pipe((0,pn.U)(Zn),(0,er.z)(N=>N instanceof I.YKP||Array.isArray(N)?(0,de.of)(N):(0,Y.D)(this.compiler.compileModuleAsync(N))))}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Zn(S){return function zn(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let Kn=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ct.x,this.configLoader=(0,I.f3M)(rn),this.environmentInjector=(0,I.f3M)(I.lqb),this.urlSerializer=(0,I.f3M)(br),this.rootContexts=(0,I.f3M)(ft),this.inputBindingEnabled=null!==(0,I.f3M)(pi,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,de.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new Bo($)),this.configLoader.onLoadStartListener=$=>this.events.next(new Sr($))}complete(){this.transitions?.complete()}handleNavigationRequest(C){const N=++this.navigationId;this.transitions?.next({...this.transitions.value,...C,id:N})}setupNavigations(C){return this.transitions=new Ie.X({id:0,currentUrlTree:C.currentUrlTree,currentRawUrl:C.currentUrlTree,extractedUrl:C.urlHandlingStrategy.extract(C.currentUrlTree),urlAfterRedirects:C.urlHandlingStrategy.extract(C.currentUrlTree),rawUrl:C.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:lo,restoredState:null,currentSnapshot:C.routerState.snapshot,targetSnapshot:null,currentRouterState:C.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Lr.h)(N=>0!==N.id),(0,pn.U)(N=>({...N,extractedUrl:C.urlHandlingStrategy.extract(N.rawUrl)})),(0,En.w)(N=>{let $=!1,se=!1;return(0,de.of)(N).pipe((0,Qe.b)(ie=>{this.currentNavigation={id:ie.id,initialUrl:ie.rawUrl,extractedUrl:ie.extractedUrl,trigger:ie.source,extras:ie.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,En.w)(ie=>{const He=C.browserUrlTree.toString(),pe=!C.navigated||ie.extractedUrl.toString()!==He||He!==C.currentUrlTree.toString();if(!pe&&"reload"!==(ie.extras.onSameUrlNavigation??C.onSameUrlNavigation)){const tn="";return this.events.next(new Ui(ie.id,C.serializeUrl(N.rawUrl),tn,0)),C.rawUrlTree=ie.rawUrl,ie.resolve(null),Ce.E}if(C.urlHandlingStrategy.shouldProcessUrl(ie.rawUrl))return Sn(ie.source)&&(C.browserUrlTree=ie.extractedUrl),(0,de.of)(ie).pipe((0,En.w)(tn=>{const Cr=this.transitions?.getValue();return this.events.next(new Uo(tn.id,this.urlSerializer.serialize(tn.extractedUrl),tn.source,tn.restoredState)),Cr!==this.transitions?.getValue()?Ce.E:Promise.resolve(tn)}),function rr(S,x,C,N,$,se){return(0,er.z)(ie=>function Qa(S,x,C,N,$,se,ie="emptyOnly"){return new Kl(S,x,C,N,$,ie,se).recognize()}(S,x,C,N,ie.extractedUrl,$,se).pipe((0,pn.U)(({state:He,tree:pe})=>({...ie,targetSnapshot:He,urlAfterRedirects:pe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,C.config,this.urlSerializer,C.paramsInheritanceStrategy),(0,Qe.b)(tn=>{if(N.targetSnapshot=tn.targetSnapshot,N.urlAfterRedirects=tn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:tn.urlAfterRedirects},"eager"===C.urlUpdateStrategy){if(!tn.extras.skipLocationChange){const Ur=C.urlHandlingStrategy.merge(tn.urlAfterRedirects,tn.rawUrl);C.setBrowserUrl(Ur,tn)}C.browserUrlTree=tn.urlAfterRedirects}const Cr=new hi(tn.id,this.urlSerializer.serialize(tn.extractedUrl),this.urlSerializer.serialize(tn.urlAfterRedirects),tn.targetSnapshot);this.events.next(Cr)}));if(pe&&C.urlHandlingStrategy.shouldProcessUrl(C.rawUrlTree)){const{id:tn,extractedUrl:Cr,source:Ur,restoredState:da,extras:Qo}=ie,bs=new Uo(tn,this.urlSerializer.serialize(Cr),Ur,da);this.events.next(bs);const ju=Zr(0,this.rootComponentType).snapshot;return N={...ie,targetSnapshot:ju,urlAfterRedirects:Cr,extras:{...Qo,skipLocationChange:!1,replaceUrl:!1}},(0,de.of)(N)}{const tn="";return this.events.next(new Ui(ie.id,C.serializeUrl(N.extractedUrl),tn,1)),C.rawUrlTree=ie.rawUrl,ie.resolve(null),Ce.E}}),(0,Qe.b)(ie=>{const He=new Ia(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(ie.urlAfterRedirects),ie.targetSnapshot);this.events.next(He)}),(0,pn.U)(ie=>N={...ie,guards:Gl(ie.targetSnapshot,ie.currentSnapshot,this.rootContexts)}),function aa(S,x){return(0,er.z)(C=>{const{targetSnapshot:N,currentSnapshot:$,guards:{canActivateChecks:se,canDeactivateChecks:ie}}=C;return 0===ie.length&&0===se.length?(0,de.of)({...C,guardsResult:!0}):function ua(S,x,C,N){return(0,Y.D)(S).pipe((0,er.z)($=>function no(S,x,C,N,$){const se=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!se||0===se.length)return(0,de.of)(!0);const ie=se.map(He=>{const pe=Go(x)??$,hn=fs(He,pe);return nn(function Wl(S){return S&&eo(S.canDeactivate)}(hn)?hn.canDeactivate(S,x,C,N):pe.runInContext(()=>hn(S,x,C,N))).pipe((0,Ue.P)())});return(0,de.of)(ie).pipe(Ko())}($.component,$.route,C,x,N)),(0,Ue.P)($=>!0!==$,!0))}(ie,N,$,S).pipe((0,er.z)(He=>He&&function oa(S){return"boolean"==typeof S}(He)?function to(S,x,C,N){return(0,Y.D)(x).pipe((0,tt.b)($=>(0,bt.z)(function Oi(S,x){return null!==S&&x&&x(new Bi(S)),(0,de.of)(!0)}($.route.parent,N),function ws(S,x){return null!==S&&x&&x(new xe(S)),(0,de.of)(!0)}($.route,N),function vi(S,x,C){const N=x[x.length-1],se=x.slice(0,x.length-1).reverse().map(ie=>function xu(S){const x=S.routeConfig?S.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:S,guards:x}:null}(ie)).filter(ie=>null!==ie).map(ie=>(0,Le.P)(()=>{const He=ie.guards.map(pe=>{const hn=Go(ie.node)??C,tn=fs(pe,hn);return nn(function Qr(S){return S&&eo(S.canActivateChild)}(tn)?tn.canActivateChild(N,S):hn.runInContext(()=>tn(N,S))).pipe((0,Ue.P)())});return(0,de.of)(He).pipe(Ko())}));return(0,de.of)(se).pipe(Ko())}(S,$.path,C),function qo(S,x,C){const N=x.routeConfig?x.routeConfig.canActivate:null;if(!N||0===N.length)return(0,de.of)(!0);const $=N.map(se=>(0,Le.P)(()=>{const ie=Go(x)??C,He=fs(se,ie);return nn(function Sa(S){return S&&eo(S.canActivate)}(He)?He.canActivate(x,S):ie.runInContext(()=>He(x,S))).pipe((0,Ue.P)())}));return(0,de.of)($).pipe(Ko())}(S,$.route,C))),(0,Ue.P)($=>!0!==$,!0))}(N,se,S,x):(0,de.of)(He)),(0,pn.U)(He=>({...C,guardsResult:He})))})}(this.environmentInjector,ie=>this.events.next(ie)),(0,Qe.b)(ie=>{if(N.guardsResult=ie.guardsResult,Ve(ie.guardsResult))throw Es(0,ie.guardsResult);const He=new co(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(ie.urlAfterRedirects),ie.targetSnapshot,!!ie.guardsResult);this.events.next(He)}),(0,Lr.h)(ie=>!!ie.guardsResult||(C.restoreHistory(ie),this.cancelNavigationTransition(ie,"",3),!1)),et(ie=>{if(ie.guards.canActivateChecks.length)return(0,de.of)(ie).pipe((0,Qe.b)(He=>{const pe=new Fn(He.id,this.urlSerializer.serialize(He.extractedUrl),this.urlSerializer.serialize(He.urlAfterRedirects),He.targetSnapshot);this.events.next(pe)}),(0,En.w)(He=>{let pe=!1;return(0,de.of)(He).pipe(function So(S,x){return(0,er.z)(C=>{const{targetSnapshot:N,guards:{canActivateChecks:$}}=C;if(!$.length)return(0,de.of)(C);let se=0;return(0,Y.D)($).pipe((0,tt.b)(ie=>function R(S,x,C,N){const $=S.routeConfig,se=S._resolve;return void 0!==$?.title&&!ge($)&&(se[un]=$.title),function K(S,x,C,N){const $=function F(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===$.length)return(0,de.of)({});const se={};return(0,Y.D)($).pipe((0,er.z)(ie=>function G(S,x,C,N){const $=Go(x)??N,se=fs(S,$);return nn(se.resolve?se.resolve(x,C):$.runInContext(()=>se(x,C)))}(S[ie],x,C,N).pipe((0,Ue.P)(),(0,Qe.b)(He=>{se[ie]=He}))),ke(1),function Lt(S){return(0,pn.U)(()=>S)}(se),Se(ie=>ku(ie)?Ce.E:Ze(ie)))}(se,S,x,N).pipe((0,pn.U)(ie=>(S._resolvedData=ie,S.data=Un(S,C).resolve,$&&ge($)&&(S.data[un]=$.title),null)))}(ie.route,N,S,x)),(0,Qe.b)(()=>se++),ke(1),(0,er.z)(ie=>se===$.length?(0,de.of)(C):Ce.E))})}(C.paramsInheritanceStrategy,this.environmentInjector),(0,Qe.b)({next:()=>pe=!0,complete:()=>{pe||(C.restoreHistory(He),this.cancelNavigationTransition(He,"",2))}}))}),(0,Qe.b)(He=>{const pe=new xi(He.id,this.urlSerializer.serialize(He.extractedUrl),this.urlSerializer.serialize(He.urlAfterRedirects),He.targetSnapshot);this.events.next(pe)}))}),et(ie=>{const He=pe=>{const hn=[];pe.routeConfig?.loadComponent&&!pe.routeConfig._loadedComponent&&hn.push(this.configLoader.loadComponent(pe.routeConfig).pipe((0,Qe.b)(tn=>{pe.component=tn}),(0,pn.U)(()=>{})));for(const tn of pe.children)hn.push(...He(tn));return hn};return ut(He(ie.targetSnapshot.root)).pipe((0,oe.d)(),(0,Xn.q)(1))}),et(()=>this.afterPreactivation()),(0,pn.U)(ie=>{const He=function jo(S,x,C){const N=fo(S,x._root,C?C._root:void 0);return new Vi(N,x)}(C.routeReuseStrategy,ie.targetSnapshot,ie.currentRouterState);return N={...ie,targetRouterState:He}}),(0,Qe.b)(ie=>{C.currentUrlTree=ie.urlAfterRedirects,C.rawUrlTree=C.urlHandlingStrategy.merge(ie.urlAfterRedirects,ie.rawUrl),C.routerState=ie.targetRouterState,"deferred"===C.urlUpdateStrategy&&(ie.extras.skipLocationChange||C.setBrowserUrl(C.rawUrlTree,ie),C.browserUrlTree=ie.urlAfterRedirects)}),((S,x,C,N)=>(0,pn.U)($=>(new al(x,$.targetRouterState,$.currentRouterState,C,N).activate(S),$)))(this.rootContexts,C.routeReuseStrategy,ie=>this.events.next(ie),this.inputBindingEnabled),(0,Xn.q)(1),(0,Qe.b)({next:ie=>{$=!0,this.lastSuccessfulNavigation=this.currentNavigation,C.navigated=!0,this.events.next(new Qs(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(C.currentUrlTree))),C.titleStrategy?.updateTitle(ie.targetRouterState.snapshot),ie.resolve(!0)},complete:()=>{$=!0}}),(0,Ht.x)(()=>{$||se||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),Se(ie=>{if(se=!0,To(ie)){Bs(ie)||(C.navigated=!0,C.restoreHistory(N,!0));const He=new qa(N.id,this.urlSerializer.serialize(N.extractedUrl),ie.message,ie.cancellationCode);if(this.events.next(He),Bs(ie)){const pe=C.urlHandlingStrategy.merge(ie.url,C.rawUrlTree),hn={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===C.urlUpdateStrategy||Sn(N.source)};C.scheduleNavigation(pe,lo,null,hn,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{C.restoreHistory(N,!0);const He=new Za(N.id,this.urlSerializer.serialize(N.extractedUrl),ie,N.targetSnapshot??void 0);this.events.next(He);try{N.resolve(C.errorHandler(ie))}catch(pe){N.reject(pe)}}return Ce.E}))}))}cancelNavigationTransition(C,N,$){const se=new qa(C.id,this.urlSerializer.serialize(C.extractedUrl),N,$);this.events.next(se),C.resolve(!1)}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Sn(S){return S!==lo}let Xr=(()=>{class S{buildTitle(C){let N,$=C.root;for(;void 0!==$;)N=this.getResolvedTitleForRoute($)??N,$=$.children.find(se=>se.outlet===Kt);return N}getResolvedTitleForRoute(C){return C.data[un]}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:function(){return(0,I.f3M)(qr)},providedIn:"root"})}return S})(),qr=(()=>{class S extends Xr{constructor(C){super(),this.title=C}updateTitle(C){const N=this.buildTitle(C);void 0!==N&&this.title.setTitle(N)}static#e=this.\u0275fac=function(N){return new(N||S)(I.LFG(Mn.Dx))};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),mi=(()=>{class S{static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:function(){return(0,I.f3M)(yn)},providedIn:"root"})}return S})();class Ei{shouldDetach(x){return!1}store(x,C){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,C){return x.routeConfig===C.routeConfig}}let yn=(()=>{class S extends Ei{static#e=this.\u0275fac=function(){let C;return function($){return(C||(C=I.n5z(S)))($||S)}}();static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const ls=new I.OlP("",{providedIn:"root",factory:()=>({})});let ro=(()=>{class S{static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:function(){return(0,I.f3M)(Ts)},providedIn:"root"})}return S})(),Ts=(()=>{class S{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,N){return C}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();var Cs=function(S){return S[S.COMPLETE=0]="COMPLETE",S[S.FAILED=1]="FAILED",S[S.REDIRECTING=2]="REDIRECTING",S}(Cs||{});function zr(S,x){S.events.pipe((0,Lr.h)(C=>C instanceof Qs||C instanceof qa||C instanceof Za||C instanceof Ui),(0,pn.U)(C=>C instanceof Qs||C instanceof Ui?Cs.COMPLETE:C instanceof qa&&(0===C.code||1===C.code)?Cs.REDIRECTING:Cs.FAILED),(0,Lr.h)(C=>C!==Cs.REDIRECTING),(0,Xn.q)(1)).subscribe(()=>{x()})}function Ac(S){throw S}function ki(S,x,C){return x.parse("/")}const Fu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Os=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,I.f3M)(I.c2e),this.isNgZoneEnabled=!1,this.options=(0,I.f3M)(ls,{optional:!0})||{},this.pendingTasks=(0,I.f3M)(I.HDt),this.errorHandler=this.options.errorHandler||Ac,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ki,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,I.f3M)(ro),this.routeReuseStrategy=(0,I.f3M)(mi),this.titleStrategy=(0,I.f3M)(Xr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,I.f3M)(lt,{optional:!0})?.flat()??[],this.navigationTransitions=(0,I.f3M)(Kn),this.urlSerializer=(0,I.f3M)(br),this.location=(0,I.f3M)(jt.Ye),this.componentInputBindingEnabled=!!(0,I.f3M)(pi,{optional:!0}),this.isNgZoneEnabled=(0,I.f3M)(I.R0b)instanceof I.R0b&&I.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new $r,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Zr(0,null),this.navigationTransitions.setupNavigations(this).subscribe(C=>{this.lastSuccessfulId=C.id,this.currentPageId=this.browserPageId??0},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}resetRootComponentType(C){this.routerState.root.component=C,this.navigationTransitions.rootComponentType=C}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const C=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),lo,C)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const N="popstate"===C.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{this.navigateToSyncWithBrowser(C.url,N,C.state)},0)}))}navigateToSyncWithBrowser(C,N,$){const se={replaceUrl:!0},ie=$?.navigationId?$:null;if($){const pe={...$};delete pe.navigationId,delete pe.\u0275routerPageId,0!==Object.keys(pe).length&&(se.state=pe)}const He=this.parseUrl(C);this.scheduleNavigation(He,N,ie,se)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(C){this.config=C.map(Ya),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,N={}){const{relativeTo:$,queryParams:se,fragment:ie,queryParamsHandling:He,preserveFragment:pe}=N,hn=pe?this.currentUrlTree.fragment:ie;let Cr,tn=null;switch(He){case"merge":tn={...this.currentUrlTree.queryParams,...se};break;case"preserve":tn=this.currentUrlTree.queryParams;break;default:tn=se||null}null!==tn&&(tn=this.removeEmptyProps(tn));try{Cr=Qt($?$.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof C[0]||!C[0].startsWith("/"))&&(C=[]),Cr=this.currentUrlTree.root}return Bt(Cr,C,tn,hn??null)}navigateByUrl(C,N={skipLocationChange:!1}){const $=Ve(C)?C:this.parseUrl(C),se=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(se,lo,null,N)}navigate(C,N={skipLocationChange:!1}){return function _d(S){for(let x=0;x<S.length;x++)if(null==S[x])throw new I.vHH(4008,!1)}(C),this.navigateByUrl(this.createUrlTree(C,N),N)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let N;try{N=this.urlSerializer.parse(C)}catch($){N=this.malformedUriErrorHandler($,this.urlSerializer,C)}return N}isActive(C,N){let $;if($=!0===N?{...Fu}:!1===N?{...hl}:N,Ve(C))return sr(this.currentUrlTree,C,$);const se=this.parseUrl(C);return sr(this.currentUrlTree,se,$)}removeEmptyProps(C){return Object.keys(C).reduce((N,$)=>{const se=C[$];return null!=se&&(N[$]=se),N},{})}scheduleNavigation(C,N,$,se,ie){if(this.disposed)return Promise.resolve(!1);let He,pe,hn;ie?(He=ie.resolve,pe=ie.reject,hn=ie.promise):hn=new Promise((Cr,Ur)=>{He=Cr,pe=Ur});const tn=this.pendingTasks.add();return zr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(tn))}),this.navigationTransitions.handleNavigationRequest({source:N,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:C,extras:se,resolve:He,reject:pe,promise:hn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),hn.catch(Cr=>Promise.reject(Cr))}setBrowserUrl(C,N){const $=this.urlSerializer.serialize(C);if(this.location.isCurrentPathEqualTo($)||N.extras.replaceUrl){const ie={...N.extras.state,...this.generateNgRouterState(N.id,this.browserPageId)};this.location.replaceState($,"",ie)}else{const se={...N.extras.state,...this.generateNgRouterState(N.id,(this.browserPageId??0)+1)};this.location.go($,"",se)}}restoreHistory(C,N=!1){if("computed"===this.canceledNavigationResolution){const se=this.currentPageId-(this.browserPageId??this.currentPageId);0!==se?this.location.historyGo(se):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===se&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(C,N){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:N}:{navigationId:C}}static#e=this.\u0275fac=function(N){return new(N||S)};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),Na=(()=>{class S{constructor(C,N,$,se,ie,He){this.router=C,this.route=N,this.tabIndexAttribute=$,this.renderer=se,this.el=ie,this.locationStrategy=He,this.href=null,this.commands=null,this.onChanges=new Ct.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const pe=ie.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===pe||"area"===pe,this.isAnchorElement?this.subscription=C.events.subscribe(hn=>{hn instanceof Qs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(C){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",C)}ngOnChanges(C){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(C){null!=C?(this.commands=Array.isArray(C)?C:[C],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(C,N,$,se,ie){return!!(null===this.urlTree||this.isAnchorElement&&(0!==C||N||$||se||ie||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const C=null===this.href?null:(0,I.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",C)}applyAttributeValue(C,N){const $=this.renderer,se=this.el.nativeElement;null!==N?$.setAttribute(se,C,N):$.removeAttribute(se,C)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(N){return new(N||S)(I.Y36(Os),I.Y36(Yi),I.$8M("tabindex"),I.Y36(I.Qsj),I.Y36(I.SBq),I.Y36(jt.S$))};static#t=this.\u0275dir=I.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(N,$){1&N&&I.NdJ("click",function(ie){return $.onClick(ie.button,ie.ctrlKey,ie.shiftKey,ie.altKey,ie.metaKey)}),2&N&&I.uIk("target",$.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",I.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",I.VuI],replaceUrl:["replaceUrl","replaceUrl",I.VuI],routerLink:"routerLink"},standalone:!0,features:[I.Xq5,I.TTD]})}return S})();class _u{}let qi=(()=>{class S{constructor(C,N,$,se,ie){this.router=C,this.injector=$,this.preloadingStrategy=se,this.loader=ie}setUpPreloading(){this.subscription=this.router.events.pipe((0,Lr.h)(C=>C instanceof Qs),(0,tt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,N){const $=[];for(const se of N){se.providers&&!se._injector&&(se._injector=(0,I.MMx)(se.providers,C,`Route: ${se.path}`));const ie=se._injector??C,He=se._loadedInjector??ie;(se.loadChildren&&!se._loadedRoutes&&void 0===se.canLoad||se.loadComponent&&!se._loadedComponent)&&$.push(this.preloadConfig(ie,se)),(se.children||se._loadedRoutes)&&$.push(this.processRoutes(He,se.children??se._loadedRoutes))}return(0,Y.D)($).pipe((0,cn.J)())}preloadConfig(C,N){return this.preloadingStrategy.preload(N,()=>{let $;$=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(C,N):(0,de.of)(null);const se=$.pipe((0,er.z)(ie=>null===ie?(0,de.of)(void 0):(N._loadedRoutes=ie.routes,N._loadedInjector=ie.injector,this.processRoutes(ie.injector??C,ie.routes))));if(N.loadComponent&&!N._loadedComponent){const ie=this.loader.loadComponent(N);return(0,Y.D)([se,ie]).pipe((0,cn.J)())}return se})}static#e=this.\u0275fac=function(N){return new(N||S)(I.LFG(Os),I.LFG(I.Sil),I.LFG(I.lqb),I.LFG(_u),I.LFG(rn))};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const At=new I.OlP("");let Pr=(()=>{class S{constructor(C,N,$,se,ie={}){this.urlSerializer=C,this.transitions=N,this.viewportScroller=$,this.zone=se,this.options=ie,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ie.scrollPositionRestoration=ie.scrollPositionRestoration||"disabled",ie.anchorScrolling=ie.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof Uo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof Qs?(this.lastId=C.id,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.urlAfterRedirects).fragment)):C instanceof Ui&&0===C.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof Ye&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,N){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ye(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(N){I.$Z()};static#t=this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac})}return S})();function Ot(S,x){return{\u0275kind:S,\u0275providers:x}}function Et(){const S=(0,I.f3M)(I.zs3);return x=>{const C=S.get(I.z2F);if(x!==C.components[0])return;const N=S.get(Os),$=S.get(ri);1===S.get(js)&&N.initialNavigation(),S.get($i,null,I.XFs.Optional)?.setUpPreloading(),S.get(At,null,I.XFs.Optional)?.init(),N.resetRootComponentType(C.componentTypes[0]),$.closed||($.next(),$.complete(),$.unsubscribe())}}const ri=new I.OlP("",{factory:()=>new Ct.x}),js=new I.OlP("",{providedIn:"root",factory:()=>1}),$i=new I.OlP("");function Pa(S){return Ot(0,[{provide:$i,useExisting:qi},{provide:_u,useExisting:S}])}const On=new I.OlP("ROUTER_FORROOT_GUARD"),Ao=[jt.Ye,{provide:br,useClass:fr},Os,ft,{provide:Yi,useFactory:function Uu(S){return S.routerState.root},deps:[Os]},rn,[]];function Yl(){return new I.PXZ("Router",Os)}let ii=(()=>{class S{constructor(C){}static forRoot(C,N){return{ngModule:S,providers:[Ao,[],{provide:lt,multi:!0,useValue:C},{provide:On,useFactory:Yo,deps:[[Os,new I.FiY,new I.tp0]]},{provide:ls,useValue:N||{}},N?.useHash?{provide:jt.S$,useClass:jt.Do}:{provide:jt.S$,useClass:jt.b0},{provide:At,useFactory:()=>{const S=(0,I.f3M)(jt.EM),x=(0,I.f3M)(I.R0b),C=(0,I.f3M)(ls),N=(0,I.f3M)(Kn),$=(0,I.f3M)(br);return C.scrollOffset&&S.setOffset(C.scrollOffset),new Pr($,N,S,x,C)}},N?.preloadingStrategy?Pa(N.preloadingStrategy).\u0275providers:[],{provide:I.PXZ,multi:!0,useFactory:Yl},N?.initialNavigation?or(N):[],N?.bindToComponentInputs?Ot(8,[yr,{provide:pi,useExisting:yr}]).\u0275providers:[],[{provide:qt,useFactory:Et},{provide:I.tb,multi:!0,useExisting:qt}]]}}static forChild(C){return{ngModule:S,providers:[{provide:lt,multi:!0,useValue:C}]}}static#e=this.\u0275fac=function(N){return new(N||S)(I.LFG(On,8))};static#t=this.\u0275mod=I.oAB({type:S});static#n=this.\u0275inj=I.cJS({})}return S})();function Yo(S){return"guarded"}function or(S){return["disabled"===S.initialNavigation?Ot(3,[{provide:I.ip1,multi:!0,useFactory:()=>{const x=(0,I.f3M)(Os);return()=>{x.setUpLocationChangeListener()}}},{provide:js,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?Ot(2,[{provide:js,useValue:0},{provide:I.ip1,multi:!0,deps:[I.zs3],useFactory:x=>{const C=x.get(jt.V_,Promise.resolve());return()=>C.then(()=>new Promise(N=>{const $=x.get(Os),se=x.get(ri);zr($,()=>{N(!0)}),x.get(Kn).afterPreactivation=()=>(N(!0),se.closed?(0,de.of)(void 0):se),$.initialNavigation()}))}}]).\u0275providers:[]]}const qt=new I.OlP("")},3106:(Zt,Je,B)=>{B.d(Je,{Z:()=>kt});var I=B(9058),X=B(4537),Y=B(6122),de=B(7879);class Ie{constructor(Pt,bt){this._delegate=Pt,this.firebase=bt,(0,Y._addComponent)(Pt,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=Pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pt){this._delegate.automaticDataCollectionEnabled=Pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Pt=>{this._delegate.checkDestroyed(),Pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Pt,bt=Y._DEFAULT_ENTRY_NAME){var Le;this._delegate.checkDestroyed();const Mt=this._delegate.container.getProvider(Pt);return!Mt.isInitialized()&&"EXPLICIT"===(null===(Le=Mt.getComponent())||void 0===Le?void 0:Le.instantiationMode)&&Mt.initialize(),Mt.getImmediate({identifier:bt})}_removeServiceInstance(Pt,bt=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Pt).clearInstance(bt)}_addComponent(Pt){(0,Y._addComponent)(this._delegate,Pt)}_addOrOverwriteComponent(Pt){(0,Y._addOrOverwriteComponent)(this._delegate,Pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Me=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function Pe(){const wt=function Be(wt){const Pt={},bt={__esModule:!0,initializeApp:function fe(dt,$e={}){const qe=Y.initializeApp(dt,$e);if((0,I.r3)(Pt,qe.name))return Pt[qe.name];const Ct=new wt(qe,bt);return Pt[qe.name]=Ct,Ct},app:Mt,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function Ce(dt){const $e=dt.name,qe=$e.replace("-compat","");if(Y._registerComponent(dt)&&"PUBLIC"===dt.type){const Ct=(jt=Mt())=>{if("function"!=typeof jt[qe])throw Me.create("invalid-app-argument",{appName:$e});return jt[qe]()};void 0!==dt.serviceProps&&(0,I.ZB)(Ct,dt.serviceProps),bt[qe]=Ct,wt.prototype[qe]=function(...jt){return this._getService.bind(this,$e).apply(this,dt.multipleInstances?jt:[])}}return"PUBLIC"===dt.type?bt[qe]:null},removeApp:function Le(dt){delete Pt[dt]},useAsService:function st(dt,$e){return"serverAuth"===$e?null:$e},modularAPIs:Y}};function Mt(dt){if(!(0,I.r3)(Pt,dt=dt||Y._DEFAULT_ENTRY_NAME))throw Me.create("no-app",{appName:dt});return Pt[dt]}return bt.default=bt,Object.defineProperty(bt,"apps",{get:function Ze(){return Object.keys(Pt).map(dt=>Pt[dt])}}),Mt.App=wt,bt}(Ie);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function Pt(bt){(0,I.ZB)(wt,bt)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),wt}(),he=new de.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){he.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&he.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const kt=ae;!function ut(wt){(0,Y.registerVersion)("@firebase/app-compat","0.2.13",wt)}()},6122:(Zt,Je,B)=>{B.r(Je),B.d(Je,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>is,_DEFAULT_ENTRY_NAME:()=>nn,_addComponent:()=>Mr,_addOrOverwriteComponent:()=>Ci,_apps:()=>gn,_clearComponents:()=>Wn,_components:()=>sr,_getProvider:()=>wr,_registerComponent:()=>Gn,_removeServiceInstance:()=>Gi,deleteApp:()=>fr,getApp:()=>Fi,getApps:()=>br,initializeApp:()=>yi,onLog:()=>Nr,registerVersion:()=>tr,setLogLevel:()=>An});var I=B(5861),X=B(4537),Y=B(7879),de=B(9058);const Ie=(me,ve)=>ve.some(Ve=>me instanceof Ve);let Ne,Me;const ae=new WeakMap,he=new WeakMap,Ae=new WeakMap,mt=new WeakMap,ut=new WeakMap;let Pt={get(me,ve,Ve){if(me instanceof IDBTransaction){if("done"===ve)return he.get(me);if("objectStoreNames"===ve)return me.objectStoreNames||Ae.get(me);if("store"===ve)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return fe(me[ve])},set:(me,ve,Ve)=>(me[ve]=Ve,!0),has:(me,ve)=>me instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in me};function Mt(me){return"function"==typeof me?function Le(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pe(){return Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...ve){return me.apply(Ze(this),ve),fe(ae.get(this))}:function(...ve){return fe(me.apply(Ze(this),ve))}:function(ve,...Ve){const at=me.call(Ze(this),ve,...Ve);return Ae.set(at,ve.sort?ve.sort():[ve]),fe(at)}}(me):(me instanceof IDBTransaction&&function wt(me){if(he.has(me))return;const ve=new Promise((Ve,at)=>{const Qt=()=>{me.removeEventListener("complete",Bt),me.removeEventListener("error",mn),me.removeEventListener("abort",mn)},Bt=()=>{Ve(),Qt()},mn=()=>{at(me.error||new DOMException("AbortError","AbortError")),Qt()};me.addEventListener("complete",Bt),me.addEventListener("error",mn),me.addEventListener("abort",mn)});he.set(me,ve)}(me),Ie(me,function Be(){return Ne||(Ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,Pt):me)}function fe(me){if(me instanceof IDBRequest)return function kt(me){const ve=new Promise((Ve,at)=>{const Qt=()=>{me.removeEventListener("success",Bt),me.removeEventListener("error",mn)},Bt=()=>{Ve(fe(me.result)),Qt()},mn=()=>{at(me.error),Qt()};me.addEventListener("success",Bt),me.addEventListener("error",mn)});return ve.then(Ve=>{Ve instanceof IDBCursor&&ae.set(Ve,me)}).catch(()=>{}),ut.set(ve,me),ve}(me);if(mt.has(me))return mt.get(me);const ve=Mt(me);return ve!==me&&(mt.set(me,ve),ut.set(ve,me)),ve}const Ze=me=>ut.get(me),dt=["get","getKey","getAll","getAllKeys","count"],$e=["put","add","delete","clear"],qe=new Map;function Ct(me,ve){if(!(me instanceof IDBDatabase)||ve in me||"string"!=typeof ve)return;if(qe.get(ve))return qe.get(ve);const Ve=ve.replace(/FromIndex$/,""),at=ve!==Ve,Qt=$e.includes(Ve);if(!(Ve in(at?IDBIndex:IDBObjectStore).prototype)||!Qt&&!dt.includes(Ve))return;const Bt=function(){var mn=(0,I.Z)(function*(dr,...nr){const Fr=this.transaction(dr,Qt?"readwrite":"readonly");let ss=Fr.store;return at&&(ss=ss.index(nr.shift())),(yield Promise.all([ss[Ve](...nr),Qt&&Fr.done]))[0]});return function(nr){return mn.apply(this,arguments)}}();return qe.set(ve,Bt),Bt}!function bt(me){Pt=me(Pt)}(me=>({...me,get:(ve,Ve,at)=>Ct(ve,Ve)||me.get(ve,Ve,at),has:(ve,Ve)=>!!Ct(ve,Ve)||me.has(ve,Ve)}));class jt{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(Ve=>{if(function pn(me){const ve=me.getComponent();return"VERSION"===ve?.type}(Ve)){const at=Ve.getImmediate();return`${at.library}/${at.version}`}return null}).filter(Ve=>Ve).join(" ")}}const En="@firebase/app",Bn=new Y.Yd("@firebase/app"),nn="[DEFAULT]",xn={[En]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gn=new Map,sr=new Map;function Mr(me,ve){try{me.container.addComponent(ve)}catch(Ve){Bn.debug(`Component ${ve.name} failed to register with FirebaseApp ${me.name}`,Ve)}}function Ci(me,ve){me.container.addOrOverwriteComponent(ve)}function Gn(me){const ve=me.name;if(sr.has(ve))return Bn.debug(`There were multiple attempts to register component ${ve}.`),!1;sr.set(ve,me);for(const Ve of gn.values())Mr(Ve,me);return!0}function wr(me,ve){const Ve=me.container.getProvider("heartbeat").getImmediate({optional:!0});return Ve&&Ve.triggerHeartbeat(),me.container.getProvider(ve)}function Gi(me,ve,Ve=nn){wr(me,ve).clearInstance(Ve)}function Wn(){sr.clear()}const Yt=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ir{constructor(ve,Ve,at){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},Ve),this._name=Ve.name,this._automaticDataCollectionEnabled=Ve.automaticDataCollectionEnabled,this._container=at,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}const is="9.23.0";function yi(me,ve={}){let Ve=me;"object"!=typeof ve&&(ve={name:ve});const at=Object.assign({name:nn,automaticDataCollectionEnabled:!1},ve),Qt=at.name;if("string"!=typeof Qt||!Qt)throw Yt.create("bad-app-name",{appName:String(Qt)});if(Ve||(Ve=(0,de.aH)()),!Ve)throw Yt.create("no-options");const Bt=gn.get(Qt);if(Bt){if((0,de.vZ)(Ve,Bt.options)&&(0,de.vZ)(at,Bt.config))return Bt;throw Yt.create("duplicate-app",{appName:Qt})}const mn=new X.H0(Qt);for(const nr of sr.values())mn.addComponent(nr);const dr=new Ir(Ve,at,mn);return gn.set(Qt,dr),dr}function Fi(me=nn){const ve=gn.get(me);if(!ve&&me===nn&&(0,de.aH)())return yi();if(!ve)throw Yt.create("no-app",{appName:me});return ve}function br(){return Array.from(gn.values())}function fr(me){return ei.apply(this,arguments)}function ei(){return(ei=(0,I.Z)(function*(me){const ve=me.name;gn.has(ve)&&(gn.delete(ve),yield Promise.all(me.container.getProviders().map(Ve=>Ve.delete())),me.isDeleted=!0)})).apply(this,arguments)}function tr(me,ve,Ve){var at;let Qt=null!==(at=xn[me])&&void 0!==at?at:me;Ve&&(Qt+=`-${Ve}`);const Bt=Qt.match(/\s|\//),mn=ve.match(/\s|\//);if(Bt||mn){const dr=[`Unable to register library "${Qt}" with version "${ve}":`];return Bt&&dr.push(`library name "${Qt}" contains illegal characters (whitespace or "/")`),Bt&&mn&&dr.push("and"),mn&&dr.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void Bn.warn(dr.join(" "))}Gn(new X.wA(`${Qt}-version`,()=>({library:Qt,version:ve}),"VERSION"))}function Nr(me,ve){if(null!==me&&"function"!=typeof me)throw Yt.create("invalid-log-argument");(0,Y.Am)(me,ve)}function An(me){(0,Y.Ub)(me)}const ti="firebase-heartbeat-database",Ln=1,we="firebase-heartbeat-store";let Q=null;function ne(){return Q||(Q=function Ce(me,ve,{blocked:Ve,upgrade:at,blocking:Qt,terminated:Bt}={}){const mn=indexedDB.open(me,ve),dr=fe(mn);return at&&mn.addEventListener("upgradeneeded",nr=>{at(fe(mn.result),nr.oldVersion,nr.newVersion,fe(mn.transaction),nr)}),Ve&&mn.addEventListener("blocked",nr=>Ve(nr.oldVersion,nr.newVersion,nr)),dr.then(nr=>{Bt&&nr.addEventListener("close",()=>Bt()),Qt&&nr.addEventListener("versionchange",Fr=>Qt(Fr.oldVersion,Fr.newVersion,Fr))}).catch(()=>{}),dr}(ti,Ln,{upgrade:(me,ve)=>{0===ve&&me.createObjectStore(we)}}).catch(me=>{throw Yt.create("idb-open",{originalErrorMessage:me.message})})),Q}function re(){return(re=(0,I.Z)(function*(me){try{return yield(yield ne()).transaction(we).objectStore(we).get(Ut(me))}catch(ve){if(ve instanceof de.ZR)Bn.warn(ve.message);else{const Ve=Yt.create("idb-get",{originalErrorMessage:ve?.message});Bn.warn(Ve.message)}}})).apply(this,arguments)}function je(me,ve){return gt.apply(this,arguments)}function gt(){return(gt=(0,I.Z)(function*(me,ve){try{const at=(yield ne()).transaction(we,"readwrite");yield at.objectStore(we).put(ve,Ut(me)),yield at.done}catch(Ve){if(Ve instanceof de.ZR)Bn.warn(Ve.message);else{const at=Yt.create("idb-set",{originalErrorMessage:Ve?.message});Bn.warn(at.message)}}})).apply(this,arguments)}function Ut(me){return`${me.name}!${me.options.appId}`}class xt{constructor(ve){this.container=ve,this._heartbeatsCache=null;const Ve=this.container.getProvider("app").getImmediate();this._storage=new We(Ve),this._heartbeatsCachePromise=this._storage.read().then(at=>(this._heartbeatsCache=at,at))}triggerHeartbeat(){var ve=this;return(0,I.Z)(function*(){const at=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qt=bn();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==Qt&&!ve._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Qt))return ve._heartbeatsCache.heartbeats.push({date:Qt,agent:at}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(Bt=>{const mn=new Date(Bt.date).valueOf();return Date.now()-mn<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,I.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const Ve=bn(),{heartbeatsToSend:at,unsentEntries:Qt}=function Hr(me,ve=1024){const Ve=[];let at=me.slice();for(const Qt of me){const Bt=Ve.find(mn=>mn.agent===Qt.agent);if(Bt){if(Bt.dates.push(Qt.date),Te(Ve)>ve){Bt.dates.pop();break}}else if(Ve.push({agent:Qt.agent,dates:[Qt.date]}),Te(Ve)>ve){Ve.pop();break}at=at.slice(1)}return{heartbeatsToSend:Ve,unsentEntries:at}}(ve._heartbeatsCache.heartbeats),Bt=(0,de.L)(JSON.stringify({version:2,heartbeats:at}));return ve._heartbeatsCache.lastSentHeartbeatDate=Ve,Qt.length>0?(ve._heartbeatsCache.heartbeats=Qt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),Bt})()}}function bn(){return(new Date).toISOString().substring(0,10)}class We{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,I.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function J(me){return re.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var Ve=this;return(0,I.Z)(function*(){var at;if(yield Ve._canUseIndexedDBPromise){const Bt=yield Ve.read();return je(Ve.app,{lastSentHeartbeatDate:null!==(at=ve.lastSentHeartbeatDate)&&void 0!==at?at:Bt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var Ve=this;return(0,I.Z)(function*(){var at;if(yield Ve._canUseIndexedDBPromise){const Bt=yield Ve.read();return je(Ve.app,{lastSentHeartbeatDate:null!==(at=ve.lastSentHeartbeatDate)&&void 0!==at?at:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...ve.heartbeats]})}})()}}function Te(me){return(0,de.L)(JSON.stringify({version:2,heartbeats:me})).length}!function be(me){Gn(new X.wA("platform-logger",ve=>new jt(ve),"PRIVATE")),Gn(new X.wA("heartbeat",ve=>new xt(ve),"PRIVATE")),tr(En,"0.9.13",me),tr(En,"0.9.13","esm2017"),tr("fire-js","")}("")},4537:(Zt,Je,B)=>{B.d(Je,{H0:()=>Be,wA:()=>Y,zt:()=>Ie});var I=B(5861),X=B(9058);class Y{constructor(ae,he,Ae){this.name=ae,this.instanceFactory=he,this.type=Ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const de="[DEFAULT]";class Ie{constructor(ae,he){this.name=ae,this.container=he,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const he=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(he)){const Ae=new X.BH;if(this.instancesDeferred.set(he,Ae),this.isInitialized(he)||this.shouldAutoInitialize())try{const mt=this.getOrInitializeService({instanceIdentifier:he});mt&&Ae.resolve(mt)}catch{}}return this.instancesDeferred.get(he).promise}getImmediate(ae){var he;const Ae=this.normalizeInstanceIdentifier(ae?.identifier),mt=null!==(he=ae?.optional)&&void 0!==he&&he;if(!this.isInitialized(Ae)&&!this.shouldAutoInitialize()){if(mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ae})}catch(ut){if(mt)return null;throw ut}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function Me(Pe){return"EAGER"===Pe.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:de})}catch{}for(const[he,Ae]of this.instancesDeferred.entries()){const mt=this.normalizeInstanceIdentifier(he);try{const ut=this.getOrInitializeService({instanceIdentifier:mt});Ae.resolve(ut)}catch{}}}}clearInstance(ae=de){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,I.Z)(function*(){const he=Array.from(ae.instances.values());yield Promise.all([...he.filter(Ae=>"INTERNAL"in Ae).map(Ae=>Ae.INTERNAL.delete()),...he.filter(Ae=>"_delete"in Ae).map(Ae=>Ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=de){return this.instances.has(ae)}getOptions(ae=de){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:he={}}=ae,Ae=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(Ae))throw Error(`${this.name}(${Ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const mt=this.getOrInitializeService({instanceIdentifier:Ae,options:he});for(const[ut,kt]of this.instancesDeferred.entries())Ae===this.normalizeInstanceIdentifier(ut)&&kt.resolve(mt);return mt}onInit(ae,he){var Ae;const mt=this.normalizeInstanceIdentifier(he),ut=null!==(Ae=this.onInitCallbacks.get(mt))&&void 0!==Ae?Ae:new Set;ut.add(ae),this.onInitCallbacks.set(mt,ut);const kt=this.instances.get(mt);return kt&&ae(kt,mt),()=>{ut.delete(ae)}}invokeOnInitCallbacks(ae,he){const Ae=this.onInitCallbacks.get(he);if(Ae)for(const mt of Ae)try{mt(ae,he)}catch{}}getOrInitializeService({instanceIdentifier:ae,options:he={}}){let Ae=this.instances.get(ae);if(!Ae&&this.component&&(Ae=this.component.instanceFactory(this.container,{instanceIdentifier:(Pe=ae,Pe===de?void 0:Pe),options:he}),this.instances.set(ae,Ae),this.instancesOptions.set(ae,he),this.invokeOnInitCallbacks(Ae,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,Ae)}catch{}var Pe;return Ae||null}normalizeInstanceIdentifier(ae=de){return this.component?this.component.multipleInstances?ae:de:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Be{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const he=this.getProvider(ae.name);if(he.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);he.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const he=new Ie(ae,this);return this.providers.set(ae,he),he}getProviders(){return Array.from(this.providers.values())}}},7879:(Zt,Je,B)=>{B.d(Je,{Am:()=>Pe,Ub:()=>Be,Yd:()=>Me,in:()=>X});const I=[];var X=function(ae){return ae[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",ae}(X||{});const Y={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},de=X.INFO,Ie={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},Ne=(ae,he,...Ae)=>{if(he<ae.logLevel)return;const mt=(new Date).toISOString(),ut=Ie[he];if(!ut)throw new Error(`Attempted to log a message with an invalid logType (value: ${he})`);console[ut](`[${mt}]  ${ae.name}:`,...Ae)};class Me{constructor(he){this.name=he,this._logLevel=de,this._logHandler=Ne,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(he){if(!(he in X))throw new TypeError(`Invalid value "${he}" assigned to \`logLevel\``);this._logLevel=he}setLogLevel(he){this._logLevel="string"==typeof he?Y[he]:he}get logHandler(){return this._logHandler}set logHandler(he){if("function"!=typeof he)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=he}get userLogHandler(){return this._userLogHandler}set userLogHandler(he){this._userLogHandler=he}debug(...he){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...he),this._logHandler(this,X.DEBUG,...he)}log(...he){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...he),this._logHandler(this,X.VERBOSE,...he)}info(...he){this._userLogHandler&&this._userLogHandler(this,X.INFO,...he),this._logHandler(this,X.INFO,...he)}warn(...he){this._userLogHandler&&this._userLogHandler(this,X.WARN,...he),this._logHandler(this,X.WARN,...he)}error(...he){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...he),this._logHandler(this,X.ERROR,...he)}}function Be(ae){I.forEach(he=>{he.setLogLevel(ae)})}function Pe(ae,he){for(const Ae of I){let mt=null;he&&he.level&&(mt=Y[he.level]),Ae.userLogHandler=null===ae?null:(ut,kt,...wt)=>{const Pt=wt.map(bt=>{if(null==bt)return null;if("string"==typeof bt)return bt;if("number"==typeof bt||"boolean"==typeof bt)return bt.toString();if(bt instanceof Error)return bt.message;try{return JSON.stringify(bt)}catch{return null}}).filter(bt=>bt).join(" ");kt>=(mt??ut.logLevel)&&ae({level:X[kt].toLowerCase(),message:Pt,args:wt,type:ut.name})}}}},3754:(Zt,Je,B)=>{B.d(Je,{Zw:()=>Le,aw:()=>ot,X$:()=>Qe,sK:()=>Ue});var I=B(5879),X=B(2096),Y=B(2664),de=B(5592),Ie=B(7453),Ne=B(4829),Me=B(4564),Be=B(8251),Pe=B(7400),ae=B(2714),Ae=B(5211),mt=B(4911),ut=B(8180),kt=B(940),wt=B(7398),Pt=B(6328),bt=B(4664);class Le{}let Mt=(()=>{class Se extends Le{getTranslation(oe){return(0,X.of)({})}static \u0275fac=function(){let oe;return function(yt){return(oe||(oe=I.n5z(Se)))(yt||Se)}}();static \u0275prov=I.Yz7({token:Se,factory:Se.\u0275fac})}return Se})();class fe{}let Ze=(()=>{class Se{handle(oe){return oe.key}static \u0275fac=function(ke){return new(ke||Se)};static \u0275prov=I.Yz7({token:Se,factory:Se.\u0275fac})}return Se})();function Ce(Se,nt){if(Se===nt)return!0;if(null===Se||null===nt)return!1;if(Se!=Se&&nt!=nt)return!0;let yt,pt,Lt,oe=typeof Se;if(oe==typeof nt&&"object"==oe){if(!Array.isArray(Se)){if(Array.isArray(nt))return!1;for(pt in Lt=Object.create(null),Se){if(!Ce(Se[pt],nt[pt]))return!1;Lt[pt]=!0}for(pt in nt)if(!(pt in Lt)&&typeof nt[pt]<"u")return!1;return!0}if(!Array.isArray(nt))return!1;if((yt=Se.length)==nt.length){for(pt=0;pt<yt;pt++)if(!Ce(Se[pt],nt[pt]))return!1;return!0}}return!1}function st(Se){return typeof Se<"u"&&null!==Se}function dt(Se){return Se&&"object"==typeof Se&&!Array.isArray(Se)}function $e(Se,nt){let oe=Object.assign({},Se);return dt(Se)&&dt(nt)&&Object.keys(nt).forEach(ke=>{dt(nt[ke])?ke in Se?oe[ke]=$e(Se[ke],nt[ke]):Object.assign(oe,{[ke]:nt[ke]}):Object.assign(oe,{[ke]:nt[ke]})}),oe}class qe{}let Ct=(()=>{class Se extends qe{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(oe,ke){let yt;return yt="string"==typeof oe?this.interpolateString(oe,ke):"function"==typeof oe?this.interpolateFunction(oe,ke):oe,yt}getValue(oe,ke){let yt="string"==typeof ke?ke.split("."):[ke];ke="";do{ke+=yt.shift(),!st(oe)||!st(oe[ke])||"object"!=typeof oe[ke]&&yt.length?yt.length?ke+=".":oe=void 0:(oe=oe[ke],ke="")}while(yt.length);return oe}interpolateFunction(oe,ke){return oe(ke)}interpolateString(oe,ke){return ke?oe.replace(this.templateMatcher,(yt,pt)=>{let Lt=this.getValue(ke,pt);return st(Lt)?Lt:yt}):oe}static \u0275fac=function(){let oe;return function(yt){return(oe||(oe=I.n5z(Se)))(yt||Se)}}();static \u0275prov=I.Yz7({token:Se,factory:Se.\u0275fac})}return Se})();class jt{}let pn=(()=>{class Se extends jt{compile(oe,ke){return oe}compileTranslations(oe,ke){return oe}static \u0275fac=function(){let oe;return function(yt){return(oe||(oe=I.n5z(Se)))(yt||Se)}}();static \u0275prov=I.Yz7({token:Se,factory:Se.\u0275fac})}return Se})();class En{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new I.vpe;onLangChange=new I.vpe;onDefaultLangChange=new I.vpe}const Xn=new I.OlP("USE_STORE"),Bn=new I.OlP("USE_DEFAULT_LANG"),Lr=new I.OlP("DEFAULT_LANGUAGE"),er=new I.OlP("USE_EXTEND");let Ue=(()=>{class Se{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new I.vpe;_onLangChange=new I.vpe;_onDefaultLangChange=new I.vpe;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(oe){this.isolate?this._defaultLang=oe:this.store.defaultLang=oe}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(oe){this.isolate?this._currentLang=oe:this.store.currentLang=oe}get langs(){return this.isolate?this._langs:this.store.langs}set langs(oe){this.isolate?this._langs=oe:this.store.langs=oe}get translations(){return this.isolate?this._translations:this.store.translations}set translations(oe){this.isolate?this._translations=oe:this.store.translations=oe}constructor(oe,ke,yt,pt,Lt,Ht=!0,cn=!1,Mn=!1,Kt){this.store=oe,this.currentLoader=ke,this.compiler=yt,this.parser=pt,this.missingTranslationHandler=Lt,this.useDefaultLang=Ht,this.isolate=cn,this.extend=Mn,Kt&&this.setDefaultLang(Kt)}setDefaultLang(oe){if(oe===this.defaultLang)return;let ke=this.retrieveTranslations(oe);typeof ke<"u"?(null==this.defaultLang&&(this.defaultLang=oe),ke.pipe((0,ut.q)(1)).subscribe(yt=>{this.changeDefaultLang(oe)})):this.changeDefaultLang(oe)}getDefaultLang(){return this.defaultLang}use(oe){if(oe===this.currentLang)return(0,X.of)(this.translations[oe]);let ke=this.retrieveTranslations(oe);return typeof ke<"u"?(this.currentLang||(this.currentLang=oe),ke.pipe((0,ut.q)(1)).subscribe(yt=>{this.changeLang(oe)}),ke):(this.changeLang(oe),(0,X.of)(this.translations[oe]))}retrieveTranslations(oe){let ke;return(typeof this.translations[oe]>"u"||this.extend)&&(this._translationRequests[oe]=this._translationRequests[oe]||this.getTranslation(oe),ke=this._translationRequests[oe]),ke}getTranslation(oe){this.pending=!0;const ke=this.currentLoader.getTranslation(oe).pipe((0,kt.d)(1),(0,ut.q)(1));return this.loadingTranslations=ke.pipe((0,wt.U)(yt=>this.compiler.compileTranslations(yt,oe)),(0,kt.d)(1),(0,ut.q)(1)),this.loadingTranslations.subscribe({next:yt=>{this.translations[oe]=this.extend&&this.translations[oe]?{...yt,...this.translations[oe]}:yt,this.updateLangs(),this.pending=!1},error:yt=>{this.pending=!1}}),ke}setTranslation(oe,ke,yt=!1){ke=this.compiler.compileTranslations(ke,oe),this.translations[oe]=(yt||this.extend)&&this.translations[oe]?$e(this.translations[oe],ke):ke,this.updateLangs(),this.onTranslationChange.emit({lang:oe,translations:this.translations[oe]})}getLangs(){return this.langs}addLangs(oe){oe.forEach(ke=>{-1===this.langs.indexOf(ke)&&this.langs.push(ke)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(oe,ke,yt){let pt;if(ke instanceof Array){let Lt={},Ht=!1;for(let cn of ke)Lt[cn]=this.getParsedResult(oe,cn,yt),(0,Y.b)(Lt[cn])&&(Ht=!0);return Ht?function he(...Se){const nt=(0,Me.jO)(Se),{args:oe,keys:ke}=(0,Ie.D)(Se),yt=new de.y(pt=>{const{length:Lt}=oe;if(!Lt)return void pt.complete();const Ht=new Array(Lt);let cn=Lt,Mn=Lt;for(let Kt=0;Kt<Lt;Kt++){let un=!1;(0,Ne.Xf)(oe[Kt]).subscribe((0,Be.x)(pt,$n=>{un||(un=!0,Mn--),Ht[Kt]=$n},()=>cn--,void 0,()=>{(!cn||!un)&&(Mn||pt.next(ke?(0,ae.n)(ke,Ht):Ht),pt.complete())}))}});return nt?yt.pipe((0,Pe.Z)(nt)):yt}(ke.map(Mn=>(0,Y.b)(Lt[Mn])?Lt[Mn]:(0,X.of)(Lt[Mn]))).pipe((0,wt.U)(Mn=>{let Kt={};return Mn.forEach((un,$n)=>{Kt[ke[$n]]=un}),Kt})):Lt}if(oe&&(pt=this.parser.interpolate(this.parser.getValue(oe,ke),yt)),typeof pt>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(pt=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],ke),yt)),typeof pt>"u"){let Lt={key:ke,translateService:this};typeof yt<"u"&&(Lt.interpolateParams=yt),pt=this.missingTranslationHandler.handle(Lt)}return typeof pt<"u"?pt:ke}get(oe,ke){if(!st(oe)||!oe.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,Pt.b)(yt=>(yt=this.getParsedResult(yt,oe,ke),(0,Y.b)(yt)?yt:(0,X.of)(yt))));{let yt=this.getParsedResult(this.translations[this.currentLang],oe,ke);return(0,Y.b)(yt)?yt:(0,X.of)(yt)}}getStreamOnTranslationChange(oe,ke){if(!st(oe)||!oe.length)throw new Error('Parameter "key" required');return(0,Ae.z)((0,mt.P)(()=>this.get(oe,ke)),this.onTranslationChange.pipe((0,bt.w)(yt=>{const pt=this.getParsedResult(yt.translations,oe,ke);return"function"==typeof pt.subscribe?pt:(0,X.of)(pt)})))}stream(oe,ke){if(!st(oe)||!oe.length)throw new Error('Parameter "key" required');return(0,Ae.z)((0,mt.P)(()=>this.get(oe,ke)),this.onLangChange.pipe((0,bt.w)(yt=>{const pt=this.getParsedResult(yt.translations,oe,ke);return(0,Y.b)(pt)?pt:(0,X.of)(pt)})))}instant(oe,ke){if(!st(oe)||!oe.length)throw new Error('Parameter "key" required');let yt=this.getParsedResult(this.translations[this.currentLang],oe,ke);if((0,Y.b)(yt)){if(oe instanceof Array){let pt={};return oe.forEach((Lt,Ht)=>{pt[oe[Ht]]=oe[Ht]}),pt}return oe}return yt}set(oe,ke,yt=this.currentLang){this.translations[yt][oe]=this.compiler.compile(ke,yt),this.updateLangs(),this.onTranslationChange.emit({lang:yt,translations:this.translations[yt]})}changeLang(oe){this.currentLang=oe,this.onLangChange.emit({lang:oe,translations:this.translations[oe]}),null==this.defaultLang&&this.changeDefaultLang(oe)}changeDefaultLang(oe){this.defaultLang=oe,this.onDefaultLangChange.emit({lang:oe,translations:this.translations[oe]})}reloadLang(oe){return this.resetLang(oe),this.getTranslation(oe)}resetLang(oe){this._translationRequests[oe]=void 0,this.translations[oe]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let oe=window.navigator.languages?window.navigator.languages[0]:null;return oe=oe||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof oe>"u"?void 0:(-1!==oe.indexOf("-")&&(oe=oe.split("-")[0]),-1!==oe.indexOf("_")&&(oe=oe.split("_")[0]),oe)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let oe=window.navigator.languages?window.navigator.languages[0]:null;return oe=oe||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,oe}static \u0275fac=function(ke){return new(ke||Se)(I.LFG(En),I.LFG(Le),I.LFG(jt),I.LFG(qe),I.LFG(fe),I.LFG(Bn),I.LFG(Xn),I.LFG(er),I.LFG(Lr))};static \u0275prov=I.Yz7({token:Se,factory:Se.\u0275fac})}return Se})(),Qe=(()=>{class Se{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(oe,ke){this.translate=oe,this._ref=ke}updateValue(oe,ke,yt){let pt=Lt=>{this.value=void 0!==Lt?Lt:oe,this.lastKey=oe,this._ref.markForCheck()};if(yt){let Lt=this.translate.getParsedResult(yt,oe,ke);(0,Y.b)(Lt.subscribe)?Lt.subscribe(pt):pt(Lt)}this.translate.get(oe,ke).subscribe(pt)}transform(oe,...ke){if(!oe||!oe.length)return oe;if(Ce(oe,this.lastKey)&&Ce(ke,this.lastParams))return this.value;let yt;if(st(ke[0])&&ke.length)if("string"==typeof ke[0]&&ke[0].length){let pt=ke[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{yt=JSON.parse(pt)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${ke[0]}`)}}else"object"==typeof ke[0]&&!Array.isArray(ke[0])&&(yt=ke[0]);return this.lastKey=oe,this.lastParams=ke,this.updateValue(oe,yt),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(pt=>{this.lastKey&&pt.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(oe,yt,pt.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(pt=>{this.lastKey&&(this.lastKey=null,this.updateValue(oe,yt,pt.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(oe,yt))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(ke){return new(ke||Se)(I.Y36(Ue,16),I.Y36(I.sBO,16))};static \u0275pipe=I.Yjl({name:"translate",type:Se,pure:!1});static \u0275prov=I.Yz7({token:Se,factory:Se.\u0275fac})}return Se})(),ot=(()=>{class Se{static forRoot(oe={}){return{ngModule:Se,providers:[oe.loader||{provide:Le,useClass:Mt},oe.compiler||{provide:jt,useClass:pn},oe.parser||{provide:qe,useClass:Ct},oe.missingTranslationHandler||{provide:fe,useClass:Ze},En,{provide:Xn,useValue:oe.isolate},{provide:Bn,useValue:oe.useDefaultLang},{provide:er,useValue:oe.extend},{provide:Lr,useValue:oe.defaultLanguage},Ue]}}static forChild(oe={}){return{ngModule:Se,providers:[oe.loader||{provide:Le,useClass:Mt},oe.compiler||{provide:jt,useClass:pn},oe.parser||{provide:qe,useClass:Ct},oe.missingTranslationHandler||{provide:fe,useClass:Ze},{provide:Xn,useValue:oe.isolate},{provide:Bn,useValue:oe.useDefaultLang},{provide:er,useValue:oe.extend},{provide:Lr,useValue:oe.defaultLanguage},Ue]}}static \u0275fac=function(ke){return new(ke||Se)};static \u0275mod=I.oAB({type:Se});static \u0275inj=I.cJS({})}return Se})()},5061:(Zt,Je,B)=>{B.d(Je,{w:()=>I});class I{http;prefix;suffix;constructor(Y,de="/assets/i18n/",Ie=".json"){this.http=Y,this.prefix=de,this.suffix=Ie}getTranslation(Y){return this.http.get(`${this.prefix}${Y}${this.suffix}`)}}},3182:(Zt,Je,B)=>{B.d(Je,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=B(6122);(0,I.registerVersion)("firebase","9.23.0","app")},7142:(Zt,Je,B)=>{B.d(Je,{Z:()=>I.Z});var I=B(3106);I.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(Zt,Je,B)=>{B.r(Je);var I=B(5861),X=B(3106),Y=B(9058),de=B(6122),Ie=B(7582),Ne=B(7879),Me=B(4537);const Pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const kt=function mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},wt=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Pt=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Le=new Ne.Yd("@firebase/auth");function fe(T,...m){Le.logLevel<=Ne.in.ERROR&&Le.error(`Auth (${de.SDK_VERSION}): ${T}`,...m)}function Ze(T,...m){throw $e(T,...m)}function Ce(T,...m){return $e(T,...m)}function st(T,m,_){const D=Object.assign(Object.assign({},wt()),{[m]:_});return new Y.LL("auth","Firebase",D).create(m,{appName:T.name})}function dt(T,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Ze(T,"argument-error"),st(T,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(T,...m){if("string"!=typeof T){const _=m[0],D=[...m.slice(1)];return D[0]&&(D[0].appName=T.name),T._errorFactory.create(_,...D)}return Pt.create(T,...m)}function qe(T,m,..._){if(!T)throw $e(m,..._)}function Ct(T){const m="INTERNAL ASSERTION FAILED: "+T;throw fe(m),new Error(m)}function jt(T,m){T||Ct(m)}function pn(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function En(){return"http:"===Xn()||"https:"===Xn()}function Xn(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class er{constructor(m,_){this.shortDelay=m,this.longDelay=_,jt(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function Bn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(En()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ue(T,m){jt(T.emulator,"Emulator should always be set here");const{url:_}=T.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class tt{static initialize(m,_,D){this.fetchImpl=m,_&&(this.headersImpl=_),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ot=new er(3e4,6e4);function Se(T,m){return T.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:T.tenantId}):m}function nt(T,m,_,D){return oe.apply(this,arguments)}function oe(){return(oe=(0,I.Z)(function*(T,m,_,D,V={}){return ke(T,V,(0,I.Z)(function*(){let Z={},ye={};D&&("GET"===m?ye=D:Z={body:JSON.stringify(D)});const Ke=(0,Y.xO)(Object.assign({key:T.config.apiKey},ye)).slice(1),Nt=yield T._getAdditionalHeaders();return Nt["Content-Type"]="application/json",T.languageCode&&(Nt["X-Firebase-Locale"]=T.languageCode),tt.fetch()(Ht(T,T.config.apiHost,_,Ke),Object.assign({method:m,headers:Nt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function ke(T,m,_){return yt.apply(this,arguments)}function yt(){return(yt=(0,I.Z)(function*(T,m,_){T._canInitEmulator=!1;const D=Object.assign(Object.assign({},Qe),m);try{const V=new cn(T),Z=yield Promise.race([_(),V.promise]);V.clearNetworkTimeout();const ye=yield Z.json();if("needConfirmation"in ye)throw Mn(T,"account-exists-with-different-credential",ye);if(Z.ok&&!("errorMessage"in ye))return ye;{const Ke=Z.ok?ye.errorMessage:ye.error.message,[Nt,Gt]=Ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Nt)throw Mn(T,"credential-already-in-use",ye);if("EMAIL_EXISTS"===Nt)throw Mn(T,"email-already-in-use",ye);if("USER_DISABLED"===Nt)throw Mn(T,"user-disabled",ye);const on=D[Nt]||Nt.toLowerCase().replace(/[_\s]+/g,"-");if(Gt)throw st(T,on,Gt);Ze(T,on)}}catch(V){if(V instanceof Y.ZR)throw V;Ze(T,"network-request-failed",{message:String(V)})}})).apply(this,arguments)}function pt(T,m,_,D){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,I.Z)(function*(T,m,_,D,V={}){const Z=yield nt(T,m,_,D,V);return"mfaPendingCredential"in Z&&Ze(T,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function Ht(T,m,_,D){const V=`${m}${_}?${D}`;return T.config.emulator?Ue(T.config,V):`${T.config.apiScheme}://${V}`}class cn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,D)=>{this.timer=setTimeout(()=>D(Ce(this.auth,"network-request-failed")),ot.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mn(T,m,_){const D={appName:T.name};_.email&&(D.email=_.email),_.phoneNumber&&(D.phoneNumber=_.phoneNumber);const V=Ce(T,m,D);return V.customData._tokenResponse=_,V}function un(){return(un=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function cr(){return(cr=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ni(){return(Ni=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function jr(T){if(T)try{const m=new Date(Number(T));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function nn(){return(nn=(0,I.Z)(function*(T,m=!1){const _=(0,Y.m9)(T),D=yield _.getIdToken(m),V=gn(D);qe(V&&V.exp&&V.auth_time&&V.iat,_.auth,"internal-error");const Z="object"==typeof V.firebase?V.firebase:void 0,ye=Z?.sign_in_provider;return{claims:V,token:D,authTime:jr(xn(V.auth_time)),issuedAtTime:jr(xn(V.iat)),expirationTime:jr(xn(V.exp)),signInProvider:ye||null,signInSecondFactor:Z?.sign_in_second_factor||null}})).apply(this,arguments)}function xn(T){return 1e3*Number(T)}function gn(T){const[m,_,D]=T.split(".");if(void 0===m||void 0===_||void 0===D)return fe("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,Y.tV)(_);return V?JSON.parse(V):(fe("Failed to decode base64 JWT payload"),null)}catch(V){return fe("Caught error parsing JWT payload as JSON",V?.toString()),null}}function Mr(T,m){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,I.Z)(function*(T,m,_=!1){if(_)return m;try{return yield m}catch(D){throw D instanceof Y.ZR&&function Gn({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}(D)&&T.auth.currentUser===T&&(yield T.auth.signOut()),D}})).apply(this,arguments)}class wr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const V=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const D=this.getInterval(m);this.timerId=setTimeout((0,I.Z)(function*(){yield _.iteration()}),D)}iteration(){var m=this;return(0,I.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class Gi{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=jr(this.lastLoginAt),this.creationTime=jr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wn(T){return $r.apply(this,arguments)}function $r(){return $r=(0,I.Z)(function*(T){var m;const _=T.auth,D=yield T.getIdToken(),V=yield Mr(T,function Us(T,m){return Ni.apply(this,arguments)}(_,{idToken:D}));qe(V?.users.length,_,"internal-error");const Z=V.users[0];T._notifyReloadListener(Z);const ye=null!==(m=Z.providerUserInfo)&&void 0!==m&&m.length?function yi(T){return T.map(m=>{var{providerId:_}=m,D=(0,Ie._T)(m,["providerId"]);return{providerId:_,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(Z.providerUserInfo):[],Ke=function is(T,m){return[...T.filter(D=>!m.some(V=>V.providerId===D.providerId)),...m]}(T.providerData,ye),on=!!T.isAnonymous&&!(T.email&&Z.passwordHash||Ke?.length),fn={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:Ke,metadata:new Gi(Z.createdAt,Z.lastLoginAt),isAnonymous:on};Object.assign(T,fn)}),$r.apply(this,arguments)}function Ir(){return(Ir=(0,I.Z)(function*(T){const m=(0,Y.m9)(T);yield Wn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(T,m){const _=yield ke(T,{},(0,I.Z)(function*(){const D=(0,Y.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:V,apiKey:Z}=T.config,ye=Ht(T,V,"/v1/token",`key=${Z}`),Ke=yield T._getAdditionalHeaders();return Ke["Content-Type"]="application/x-www-form-urlencoded",tt.fetch()(ye,{method:"POST",headers:Ke,body:D})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class fr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){qe(m.idToken,"internal-error"),qe(typeof m.idToken<"u","internal-error"),qe(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function sr(T){const m=gn(T);return qe(m,"internal-error"),qe(typeof m.exp<"u","internal-error"),qe(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var D=this;return(0,I.Z)(function*(){return qe(!D.accessToken||D.refreshToken,m,"user-token-expired"),_||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(m,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var D=this;return(0,I.Z)(function*(){const{accessToken:V,refreshToken:Z,expiresIn:ye}=yield function Fi(T,m){return br.apply(this,arguments)}(m,_);D.updateTokensAndExpiration(V,Z,Number(ye))})()}updateTokensAndExpiration(m,_,D){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(m,_){const{refreshToken:D,accessToken:V,expirationTime:Z}=_,ye=new fr;return D&&(qe("string"==typeof D,"internal-error",{appName:m}),ye.refreshToken=D),V&&(qe("string"==typeof V,"internal-error",{appName:m}),ye.accessToken=V),Z&&(qe("number"==typeof Z,"internal-error",{appName:m}),ye.expirationTime=Z),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new fr,this.toJSON())}_performRefresh(){return Ct("not implemented")}}function ei(T,m){qe("string"==typeof T||typeof T>"u","internal-error",{appName:m})}class tr{constructor(m){var{uid:_,auth:D,stsTokenManager:V}=m,Z=(0,Ie._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=D,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new Gi(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,I.Z)(function*(){const D=yield Mr(_,_.stsTokenManager.getToken(_.auth,m));return qe(D,_.auth,"internal-error"),_.accessToken!==D&&(_.accessToken=D,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),D})()}getIdTokenResult(m){return function Ti(T){return nn.apply(this,arguments)}(this,m)}reload(){return function Yt(T){return Ir.apply(this,arguments)}(this)}_assign(m){this!==m&&(qe(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new tr(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var D=this;return(0,I.Z)(function*(){let V=!1;m.idToken&&m.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(m),V=!0),_&&(yield Wn(D)),yield D.auth._persistUserIfCurrent(D),V&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var m=this;return(0,I.Z)(function*(){const _=yield m.getIdToken();return yield Mr(m,function Kt(T,m){return un.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var D,V,Z,ye,Ke,Nt,Gt,on;const fn=null!==(D=_.displayName)&&void 0!==D?D:void 0,Li=null!==(V=_.email)&&void 0!==V?V:void 0,Ba=null!==(Z=_.phoneNumber)&&void 0!==Z?Z:void 0,Yc=null!==(ye=_.photoURL)&&void 0!==ye?ye:void 0,fc=null!==(Ke=_.tenantId)&&void 0!==Ke?Ke:void 0,Sl=null!==(Nt=_._redirectEventId)&&void 0!==Nt?Nt:void 0,Al=null!==(Gt=_.createdAt)&&void 0!==Gt?Gt:void 0,Vr=null!==(on=_.lastLoginAt)&&void 0!==on?on:void 0,{uid:_r,emailVerified:ir,isAnonymous:Cu,providerData:oi,stsTokenManager:Qc}=_;qe(_r&&Qc,m,"internal-error");const fp=fr.fromJSON(this.name,Qc);qe("string"==typeof _r,m,"internal-error"),ei(fn,m.name),ei(Li,m.name),qe("boolean"==typeof ir,m,"internal-error"),qe("boolean"==typeof Cu,m,"internal-error"),ei(Ba,m.name),ei(Yc,m.name),ei(fc,m.name),ei(Sl,m.name),ei(Al,m.name),ei(Vr,m.name);const Yu=new tr({uid:_r,auth:m,email:Li,emailVerified:ir,displayName:fn,isAnonymous:Cu,photoURL:Yc,phoneNumber:Ba,tenantId:fc,stsTokenManager:fp,createdAt:Al,lastLoginAt:Vr});return oi&&Array.isArray(oi)&&(Yu.providerData=oi.map(kd=>Object.assign({},kd))),Sl&&(Yu._redirectEventId=Sl),Yu}static _fromIdTokenResponse(m,_,D=!1){return(0,I.Z)(function*(){const V=new fr;V.updateFromServerResponse(_);const Z=new tr({uid:_.localId,auth:m,stsTokenManager:V,isAnonymous:D});return yield Wn(Z),Z})()}}const Nr=new Map;function An(T){jt(T instanceof Function,"Expected a class definition");let m=Nr.get(T);return m?(jt(m instanceof T,"Instance stored in cache mismatched with class"),m):(m=new T,Nr.set(T,m),m)}const Ln=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(_,D){var V=this;return(0,I.Z)(function*(){V.storage[_]=D})()}_get(_){var D=this;return(0,I.Z)(function*(){const V=D.storage[_];return void 0===V?null:V})()}_remove(_){var D=this;return(0,I.Z)(function*(){delete D.storage[_]})()}_addListener(_,D){}_removeListener(_,D){}}return T.type="NONE",T})();function we(T,m,_){return`firebase:${T}:${m}:${_}`}class Q{constructor(m,_,D){this.persistence=m,this.auth=_,this.userKey=D;const{config:V,name:Z}=this.auth;this.fullUserKey=we(this.userKey,V.apiKey,Z),this.fullPersistenceKey=we("persistence",V.apiKey,Z),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,I.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?tr._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,I.Z)(function*(){if(_.persistence===m)return;const D=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,D?_.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,D="authUser"){return(0,I.Z)(function*(){if(!_.length)return new Q(An(Ln),m,D);const V=(yield Promise.all(_.map(function(){var Gt=(0,I.Z)(function*(on){if(yield on._isAvailable())return on});return function(on){return Gt.apply(this,arguments)}}()))).filter(Gt=>Gt);let Z=V[0]||An(Ln);const ye=we(D,m.config.apiKey,m.name);let Ke=null;for(const Gt of _)try{const on=yield Gt._get(ye);if(on){const fn=tr._fromJSON(m,on);Gt!==Z&&(Ke=fn),Z=Gt;break}}catch{}const Nt=V.filter(Gt=>Gt._shouldAllowMigration);return Z._shouldAllowMigration&&Nt.length?(Z=Nt[0],Ke&&(yield Z._set(ye,Ke.toJSON())),yield Promise.all(_.map(function(){var Gt=(0,I.Z)(function*(on){if(on!==Z)try{yield on._remove(ye)}catch{}});return function(on){return Gt.apply(this,arguments)}}())),new Q(Z,m,D)):new Q(Z,m,D)})()}}function ne(T){const m=T.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(gt(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(J(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Tn(m))return"Blackberry";if(Jt(m))return"Webos";if(re(m))return"Safari";if((m.includes("chrome/")||je(m))&&!m.includes("edge/"))return"Chrome";if(Ut(m))return"Android";{const D=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function J(T=(0,Y.z$)()){return/firefox\//i.test(T)}function re(T=(0,Y.z$)()){const m=T.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function je(T=(0,Y.z$)()){return/crios\//i.test(T)}function gt(T=(0,Y.z$)()){return/iemobile/i.test(T)}function Ut(T=(0,Y.z$)()){return/android/i.test(T)}function Tn(T=(0,Y.z$)()){return/blackberry/i.test(T)}function Jt(T=(0,Y.z$)()){return/webos/i.test(T)}function xt(T=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function Te(T=(0,Y.z$)()){return xt(T)||Ut(T)||Jt(T)||Tn(T)||/windows phone/i.test(T)||gt(T)}function me(T,m=[]){let _;switch(T){case"Browser":_=ne((0,Y.z$)());break;case"Worker":_=`${ne((0,Y.z$)())}-${T}`;break;default:_=T}const D=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${de.SDK_VERSION}/${D}`}function Ve(){return(Ve=(0,I.Z)(function*(T){return(yield nt(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function at(T,m){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,I.Z)(function*(T,m){return nt(T,"GET","/v2/recaptchaConfig",Se(T,m))})).apply(this,arguments)}function Bt(T){return void 0!==T&&void 0!==T.getResponse}function mn(T){return void 0!==T&&void 0!==T.enterprise}class dr{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Fr(T){return new Promise((m,_)=>{const D=document.createElement("script");D.setAttribute("src",T),D.onload=m,D.onerror=V=>{const Z=Ce("internal-error");Z.customData=V,_(Z)},D.type="text/javascript",D.charset="UTF-8",function nr(){var T,m;return null!==(m=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==m?m:document}().appendChild(D)})}function ss(T){return`__${T}${Math.floor(1e6*Math.random())}`}class vs{constructor(m){this.type="recaptcha-enterprise",this.auth=gr(m)}verify(m="verify",_=!1){var D=this;return(0,I.Z)(function*(){function Z(){return Z=(0,I.Z)(function*(Ke){if(!_){if(null==Ke.tenantId&&null!=Ke._agentRecaptchaConfig)return Ke._agentRecaptchaConfig.siteKey;if(null!=Ke.tenantId&&void 0!==Ke._tenantRecaptchaConfigs[Ke.tenantId])return Ke._tenantRecaptchaConfigs[Ke.tenantId].siteKey}return new Promise(function(){var Nt=(0,I.Z)(function*(Gt,on){at(Ke,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(fn=>{if(void 0!==fn.recaptchaKey){const Li=new dr(fn);return null==Ke.tenantId?Ke._agentRecaptchaConfig=Li:Ke._tenantRecaptchaConfigs[Ke.tenantId]=Li,Gt(Li.siteKey)}on(new Error("recaptcha Enterprise site key undefined"))}).catch(fn=>{on(fn)})});return function(Gt,on){return Nt.apply(this,arguments)}}())}),Z.apply(this,arguments)}function ye(Ke,Nt,Gt){const on=window.grecaptcha;mn(on)?on.enterprise.ready(()=>{on.enterprise.execute(Ke,{action:m}).then(fn=>{Nt(fn)}).catch(()=>{Nt("NO_RECAPTCHA")})}):Gt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ke,Nt)=>{(function V(Ke){return Z.apply(this,arguments)})(D.auth).then(Gt=>{if(!_&&mn(window.grecaptcha))ye(Gt,Ke,Nt);else{if(typeof window>"u")return void Nt(new Error("RecaptchaVerifier is only supported in browser"));Fr("https://www.google.com/recaptcha/enterprise.js?render="+Gt).then(()=>{ye(Gt,Ke,Nt)}).catch(on=>{Nt(on)})}}).catch(Gt=>{Nt(Gt)})})})()}}function Pi(T,m,_){return Di.apply(this,arguments)}function Di(){return(Di=(0,I.Z)(function*(T,m,_,D=!1){const V=new vs(T);let Z;try{Z=yield V.verify(_)}catch{Z=yield V.verify(_,!0)}const ye=Object.assign({},m);return Object.assign(ye,D?{captchaResp:Z}:{captchaResponse:Z}),Object.assign(ye,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ye,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ye})).apply(this,arguments)}class Ns{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const D=Z=>new Promise((ye,Ke)=>{try{ye(m(Z))}catch(Nt){Ke(Nt)}});D.onAbort=_,this.queue.push(D);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,I.Z)(function*(){if(_.auth.currentUser===m)return;const D=[];try{for(const V of _.queue)yield V(m),V.onAbort&&D.push(V.onAbort)}catch(V){D.reverse();for(const Z of D)try{Z()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:V?.message})}})()}}class Io{constructor(m,_,D,V){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=D,this.config=V,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uo(this),this.idTokenSubscription=new uo(this),this.beforeStateQueue=new Ns(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=V.sdkClientVersion}_initializeWithPersistence(m,_){var D=this;return _&&(this._popupRedirectResolver=An(_)),this._initializationPromise=this.queue((0,I.Z)(function*(){var V,Z;if(!D._deleted&&(D.persistenceManager=yield Q.create(D,m),!D._deleted)){if(null!==(V=D._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(_),D.lastNotifiedUid=(null===(Z=D.currentUser)||void 0===Z?void 0:Z.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,I.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,I.Z)(function*(){var D;const V=yield _.assertedPersistence.getCurrentUser();let Z=V,ye=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ke=null===(D=_.redirectUser)||void 0===D?void 0:D._redirectEventId,Nt=Z?._redirectEventId,Gt=yield _.tryRedirectSignIn(m);(!Ke||Ke===Nt)&&Gt?.user&&(Z=Gt.user,ye=!0)}if(!Z)return _.directlySetCurrentUser(null);if(!Z._redirectEventId){if(ye)try{yield _.beforeStateQueue.runMiddleware(Z)}catch(Ke){Z=V,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ke))}return Z?_.reloadAndSetCurrentUserOrClear(Z):_.directlySetCurrentUser(null)}return qe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===Z._redirectEventId?_.directlySetCurrentUser(Z):_.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(m){var _=this;return(0,I.Z)(function*(){let D=null;try{D=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,I.Z)(function*(){try{yield Wn(m)}catch(D){if("auth/network-request-failed"!==D?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Lr(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var m=this;return(0,I.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,I.Z)(function*(){const D=m?(0,Y.m9)(m):null;return D&&qe(D.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(D&&D._clone(_))})()}_updateCurrentUser(m,_=!1){var D=this;return(0,I.Z)(function*(){if(!D._deleted)return m&&qe(D.tenantId===m.tenantId,D,"tenant-id-mismatch"),_||(yield D.beforeStateQueue.runMiddleware(m)),D.queue((0,I.Z)(function*(){yield D.directlySetCurrentUser(m),D.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,I.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,I.Z)(function*(){yield _.assertedPersistence.setPersistence(An(m))}))}initializeRecaptchaConfig(){var m=this;return(0,I.Z)(function*(){const _=yield at(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),D=new dr(_);null==m.tenantId?m._agentRecaptchaConfig=D:m._tenantRecaptchaConfigs[m.tenantId]=D,D.emailPasswordEnabled&&new vs(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new Y.LL("auth","Firebase",m())}onAuthStateChanged(m,_,D){return this.registerStateListener(this.authStateSubscription,m,_,D)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,D){return this.registerStateListener(this.idTokenSubscription,m,_,D)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var D=this;return(0,I.Z)(function*(){const V=yield D.getOrInitRedirectPersistenceManager(_);return null===m?V.removeCurrentUser():V.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,I.Z)(function*(){if(!_.redirectPersistenceManager){const D=m&&An(m)||_._popupRedirectResolver;qe(D,_,"argument-error"),_.redirectPersistenceManager=yield Q.create(_,[An(D._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,I.Z)(function*(){var D,V;return _._isInitialized&&(yield _.queue((0,I.Z)(function*(){}))),(null===(D=_._currentUser)||void 0===D?void 0:D._redirectEventId)===m?_._currentUser:(null===(V=_.redirectUser)||void 0===V?void 0:V._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,I.Z)(function*(){if(m===_.currentUser)return _.queue((0,I.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,D,V){if(this._deleted)return()=>{};const Z="function"==typeof _?_:_.next.bind(_),ye=this._isInitialized?Promise.resolve():this._initializationPromise;return qe(ye,this,"internal-error"),ye.then(()=>Z(this.currentUser)),"function"==typeof _?m.addObserver(_,D,V):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,I.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=me(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,I.Z)(function*(){var _;const D={"X-Client-Version":m.clientVersion};m.app.options.appId&&(D["X-Firebase-gmpid"]=m.app.options.appId);const V=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();V&&(D["X-Firebase-Client"]=V);const Z=yield m._getAppCheckToken();return Z&&(D["X-Firebase-AppCheck"]=Z),D})()}_getAppCheckToken(){var m=this;return(0,I.Z)(function*(){var _;const D=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return D?.error&&function Mt(T,...m){Le.logLevel<=Ne.in.WARN&&Le.warn(`Auth (${de.SDK_VERSION}): ${T}`,...m)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function gr(T){return(0,Y.m9)(T)}class uo{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,Y.ne)(_=>this.observer=_)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _i(T){const m=T.indexOf(":");return m<0?"":T.substr(0,m+1)}function Qs(T){if(!T)return null;const m=Number(T);return isNaN(m)?null:m}class Ui{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return Ct("not implemented")}_getIdTokenResponse(m){return Ct("not implemented")}_linkToIdToken(m,_){return Ct("not implemented")}_getReauthenticationResolver(m){return Ct("not implemented")}}function Za(T,m){return hi.apply(this,arguments)}function hi(){return(hi=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:resetPassword",Se(T,m))})).apply(this,arguments)}function Ia(T,m){return co.apply(this,arguments)}function co(){return(co=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function xi(){return(xi=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:update",Se(T,m))})).apply(this,arguments)}function Sr(T,m){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,I.Z)(function*(T,m){return pt(T,"POST","/v1/accounts:signInWithPassword",Se(T,m))})).apply(this,arguments)}function Bi(T,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:sendOobCode",Se(T,m))})).apply(this,arguments)}function Re(){return(Re=(0,I.Z)(function*(T,m){return Bi(T,m)})).apply(this,arguments)}function Ye(T,m){return vt.apply(this,arguments)}function vt(){return(vt=(0,I.Z)(function*(T,m){return Bi(T,m)})).apply(this,arguments)}function Tt(T,m){return ft.apply(this,arguments)}function ft(){return(ft=(0,I.Z)(function*(T,m){return Bi(T,m)})).apply(this,arguments)}function _n(){return(_n=(0,I.Z)(function*(T,m){return Bi(T,m)})).apply(this,arguments)}function bi(){return(bi=(0,I.Z)(function*(T,m){return pt(T,"POST","/v1/accounts:signInWithEmailLink",Se(T,m))})).apply(this,arguments)}function Vi(){return(Vi=(0,I.Z)(function*(T,m){return pt(T,"POST","/v1/accounts:signInWithEmailLink",Se(T,m))})).apply(this,arguments)}class Zr extends Ui{constructor(m,_,D,V=null){super("password",D),this._email=m,this._password=_,this._tenantId=V}static _fromEmailAndPassword(m,_){return new Zr(m,_,"password")}static _fromEmailAndCode(m,_,D=null){return new Zr(m,_,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,I.Z)(function*(){var D;switch(_.signInMethod){case"password":const V={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=m._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const Z=yield Pi(m,V,"signInWithPassword");return Sr(m,Z)}return Sr(m,V).catch(function(){var Z=(0,I.Z)(function*(ye){if("auth/missing-recaptcha-token"===ye.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ke=yield Pi(m,V,"signInWithPassword");return Sr(m,Ke)}return Promise.reject(ye)});return function(ye){return Z.apply(this,arguments)}}());case"emailLink":return function Vn(T,m){return bi.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Ze(m,"internal-error")}})()}_linkToIdToken(m,_){var D=this;return(0,I.Z)(function*(){switch(D.signInMethod){case"password":return Ia(m,{idToken:_,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function fi(T,m){return Vi.apply(this,arguments)}(m,{idToken:_,email:D._email,oobCode:D._password});default:Ze(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function os(T,m){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,I.Z)(function*(T,m){return pt(T,"POST","/v1/accounts:signInWithIdp",Se(T,m))})).apply(this,arguments)}class as extends Ui{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new as(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Ze("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:V}=_,Z=(0,Ie._T)(_,["providerId","signInMethod"]);if(!D||!V)return null;const ye=new as(D,V);return ye.idToken=Z.idToken||void 0,ye.accessToken=Z.accessToken||void 0,ye.secret=Z.secret,ye.nonce=Z.nonce,ye.pendingToken=Z.pendingToken||null,ye}_getIdTokenResponse(m){return os(m,this.buildRequest())}_linkToIdToken(m,_){const D=this.buildRequest();return D.idToken=_,os(m,D)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,os(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,Y.xO)(_)}return m}}function us(){return(us=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:sendVerificationCode",Se(T,m))})).apply(this,arguments)}function Ta(){return(Ta=(0,I.Z)(function*(T,m){return pt(T,"POST","/v1/accounts:signInWithPhoneNumber",Se(T,m))})).apply(this,arguments)}function ds(){return(ds=(0,I.Z)(function*(T,m){const _=yield pt(T,"POST","/v1/accounts:signInWithPhoneNumber",Se(T,m));if(_.temporaryProof)throw Mn(T,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Vo={USER_NOT_FOUND:"user-not-found"};function pi(){return(pi=(0,I.Z)(function*(T,m){return pt(T,"POST","/v1/accounts:signInWithPhoneNumber",Se(T,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Vo)})).apply(this,arguments)}class yr extends Ui{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new yr({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new yr({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Yr(T,m){return Ta.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Ca(T,m){return ds.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Xs(T,m){return pi.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:D,verificationCode:V}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:D,code:V}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:D,phoneNumber:V,temporaryProof:Z}=m;return D||_||V||Z?new yr({verificationId:_,verificationCode:D,phoneNumber:V,temporaryProof:Z}):null}}class Qn{constructor(m){var _,D,V,Z,ye,Ke;const Nt=(0,Y.zd)((0,Y.pd)(m)),Gt=null!==(_=Nt.apiKey)&&void 0!==_?_:null,on=null!==(D=Nt.oobCode)&&void 0!==D?D:null,fn=function jo(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=Nt.mode)&&void 0!==V?V:null);qe(Gt&&on&&fn,"argument-error"),this.apiKey=Gt,this.operation=fn,this.code=on,this.continueUrl=null!==(Z=Nt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(ye=Nt.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Ke=Nt.tenantId)&&void 0!==Ke?Ke:null}static parseLink(m){const _=function fo(T){const m=(0,Y.zd)((0,Y.pd)(T)).link,_=m?(0,Y.zd)((0,Y.pd)(m)).deep_link_id:null,D=(0,Y.zd)((0,Y.pd)(T)).deep_link_id;return(D?(0,Y.zd)((0,Y.pd)(D)).link:null)||D||_||m||T}(m);try{return new Qn(_)}catch{return null}}}let $o=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(_,D){return Zr._fromEmailAndPassword(_,D)}static credentialWithLink(_,D){const V=Qn.parseLink(D);return qe(V,"argument-error"),Zr._fromEmailAndCode(_,V.code,V.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Es{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Si extends Es{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Bs extends Si{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return qe("providerId"in _&&"signInMethod"in _,"argument-error"),as._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return qe(m.idToken||m.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Bs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Bs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:D,oauthTokenSecret:V,pendingToken:Z,nonce:ye,providerId:Ke}=m;if(!D&&!V&&!_&&!Z||!Ke)return null;try{return new Bs(Ke)._credential({idToken:_,accessToken:D,nonce:ye,pendingToken:Z})}catch{return null}}}let To=(()=>{class T extends Si{constructor(){super("facebook.com")}static credential(_){return as._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return T.credential(_.oauthAccessToken)}catch{return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),Ho=(()=>{class T extends Si{constructor(){super("google.com"),this.addScope("profile")}static credential(_,D){return as._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:D})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:D,oauthAccessToken:V}=_;if(!D&&!V)return null;try{return T.credential(D,V)}catch{return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),Wi=(()=>{class T extends Si{constructor(){super("github.com")}static credential(_){return as._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return T.credential(_.oauthAccessToken)}catch{return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class ui extends Ui{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return os(m,this.buildRequest())}_linkToIdToken(m,_){const D=this.buildRequest();return D.idToken=_,os(m,D)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,os(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:V,pendingToken:Z}=_;return D&&V&&Z&&D===V?new ui(D,Z):null}static _create(m,_){return new ui(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vs extends Es{constructor(m){qe(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Vs.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Vs.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=ui.fromJSON(m);return qe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:D}=m;if(!_||!D)return null;try{return ui._create(D,_)}catch{return null}}}let Co=(()=>{class T extends Si{constructor(){super("twitter.com")}static credential(_,D){return as._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:D})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:D,oauthTokenSecret:V}=_;if(!D||!V)return null;try{return T.credential(D,V)}catch{return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Da(T,m){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,I.Z)(function*(T,m){return pt(T,"POST","/v1/accounts:signUp",Se(T,m))})).apply(this,arguments)}class Ai{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,D,V=!1){return(0,I.Z)(function*(){const Z=yield tr._fromIdTokenResponse(m,D,V),ye=Ya(D);return new Ai({user:Z,providerId:ye,_tokenResponse:D,operationType:_})})()}static _forOperation(m,_,D){return(0,I.Z)(function*(){yield m._updateTokensIfNecessary(D,!0);const V=Ya(D);return new Ai({user:m,providerId:V,_tokenResponse:D,operationType:_})})()}}function Ya(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function cu(){return(cu=(0,I.Z)(function*(T){var m;const _=gr(T);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Ai({user:_.currentUser,providerId:null,operationType:"signIn"});const D=yield Da(_,{returnSecureToken:!0}),V=yield Ai._fromIdTokenResponse(_,"signIn",D,!0);return yield _._updateCurrentUser(V.user),V})).apply(this,arguments)}class Go extends Y.ZR{constructor(m,_,D,V){var Z;super(_.code,_.message),this.operationType=D,this.user=V,Object.setPrototypeOf(this,Go.prototype),this.customData={appName:m.name,tenantId:null!==(Z=m.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:_.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(m,_,D,V){return new Go(m,_,D,V)}}function zl(T,m,_,D){return("reauthenticate"===m?_._getReauthenticationResolver(T):_._getIdTokenResponse(T)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?Go._fromErrorAndOperation(T,Z,m,D):Z})}function ol(T){return new Set(T.map(({providerId:m})=>m).filter(m=>!!m))}function ba(){return ba=(0,I.Z)(function*(T,m){const _=(0,Y.m9)(T);yield xu(!0,_,m);const{providerUserInfo:D}=yield function $n(T,m){return cr.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),V=ol(D||[]);return _.providerData=_.providerData.filter(Z=>V.has(Z.providerId)),V.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),ba.apply(this,arguments)}function du(T,m){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,I.Z)(function*(T,m,_=!1){const D=yield Mr(T,m._linkToIdToken(T.auth,yield T.getIdToken()),_);return Ai._forOperation(T,"link",D)})).apply(this,arguments)}function xu(T,m,_){return fs.apply(this,arguments)}function fs(){return(fs=(0,I.Z)(function*(T,m,_){yield Wn(m);const V=!1===T?"provider-already-linked":"no-such-provider";qe(ol(m.providerData).has(_)===T,m.auth,V)})).apply(this,arguments)}function sa(T,m){return ul.apply(this,arguments)}function ul(){return(ul=(0,I.Z)(function*(T,m,_=!1){const{auth:D}=T,V="reauthenticate";try{const Z=yield Mr(T,zl(D,V,m,T),_);qe(Z.idToken,D,"internal-error");const ye=gn(Z.idToken);qe(ye,D,"internal-error");const{sub:Ke}=ye;return qe(T.uid===Ke,D,"user-mismatch"),Ai._forOperation(T,V,Z)}catch(Z){throw"auth/user-not-found"===Z?.code&&Ze(D,"user-mismatch"),Z}})).apply(this,arguments)}function hu(T,m){return Js.apply(this,arguments)}function Js(){return(Js=(0,I.Z)(function*(T,m,_=!1){const D="signIn",V=yield zl(T,D,m),Z=yield Ai._fromIdTokenResponse(T,D,V);return _||(yield T._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function eo(T,m){return oa.apply(this,arguments)}function oa(){return(oa=(0,I.Z)(function*(T,m){return hu(gr(T),m)})).apply(this,arguments)}function ll(T,m){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,I.Z)(function*(T,m){const _=(0,Y.m9)(T);return yield xu(!1,_,m.providerId),du(_,m)})).apply(this,arguments)}function Qr(T,m){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,I.Z)(function*(T,m){return sa((0,Y.m9)(T),m)})).apply(this,arguments)}function Ou(){return(Ou=(0,I.Z)(function*(T,m){return pt(T,"POST","/v1/accounts:signInWithCustomToken",Se(T,m))})).apply(this,arguments)}function ku(){return ku=(0,I.Z)(function*(T,m){const _=gr(T),D=yield function Hn(T,m){return Ou.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),V=yield Ai._fromIdTokenResponse(_,"signIn",D);return yield _._updateCurrentUser(V.user),V}),ku.apply(this,arguments)}class Wo{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ko._fromServerResponse(m,_):"totpInfo"in _?aa._fromServerResponse(m,_):Ze(m,"internal-error")}}class Ko extends Wo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ko(_)}}class aa extends Wo{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new aa(_)}}function ua(T,m,_){var D;qe((null===(D=_.url)||void 0===D?void 0:D.length)>0,T,"invalid-continue-uri"),qe(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(qe(_.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(qe(_.android.packageName.length>0,T,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function ws(){return ws=(0,I.Z)(function*(T,m,_){var D;const V=gr(T),Z={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=V._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const ye=yield Pi(V,Z,"getOobCode",!0);_&&ua(V,ye,_),yield Ye(V,ye)}else _&&ua(V,Z,_),yield Ye(V,Z).catch(function(){var ye=(0,I.Z)(function*(Ke){if("auth/missing-recaptcha-token"!==Ke.code)return Promise.reject(Ke);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Nt=yield Pi(V,Z,"getOobCode",!0);_&&ua(V,Nt,_),yield Ye(V,Nt)}});return function(Ke){return ye.apply(this,arguments)}}())}),ws.apply(this,arguments)}function qo(){return(qo=(0,I.Z)(function*(T,m,_){yield Za((0,Y.m9)(T),{oobCode:m,newPassword:_})})).apply(this,arguments)}function no(){return no=(0,I.Z)(function*(T,m){yield function Fn(T,m){return xi.apply(this,arguments)}((0,Y.m9)(T),{oobCode:m})}),no.apply(this,arguments)}function fu(T,m){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,I.Z)(function*(T,m){const _=(0,Y.m9)(T),D=yield Za(_,{oobCode:m}),V=D.requestType;switch(qe(V,_,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":qe(D.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":qe(D.mfaInfo,_,"internal-error");default:qe(D.email,_,"internal-error")}let Z=null;return D.mfaInfo&&(Z=Wo._fromServerResponse(gr(_),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:Z},operation:V}})).apply(this,arguments)}function ji(){return(ji=(0,I.Z)(function*(T,m){const{data:_}=yield fu((0,Y.m9)(T),m);return _.email})).apply(this,arguments)}function Ri(){return Ri=(0,I.Z)(function*(T,m,_){var D;const V=gr(T),Z={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let ye;if(null!==(D=V._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const Gt=yield Pi(V,Z,"signUpPassword");ye=Da(V,Gt)}else ye=Da(V,Z).catch(function(){var Gt=(0,I.Z)(function*(on){if("auth/missing-recaptcha-token"===on.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const fn=yield Pi(V,Z,"signUpPassword");return Da(V,fn)}return Promise.reject(on)});return function(on){return Gt.apply(this,arguments)}}());const Ke=yield ye.catch(Gt=>Promise.reject(Gt)),Nt=yield Ai._fromIdTokenResponse(V,"signIn",Ke);return yield V._updateCurrentUser(Nt.user),Nt}),Ri.apply(this,arguments)}function bo(){return bo=(0,I.Z)(function*(T,m,_){var D;const V=gr(T),Z={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function ye(Ke,Nt){qe(Nt.handleCodeInApp,V,"argument-error"),Nt&&ua(V,Ke,Nt)}if(null!==(D=V._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const Ke=yield Pi(V,Z,"getOobCode",!0);ye(Ke,_),yield Tt(V,Ke)}else ye(Z,_),yield Tt(V,Z).catch(function(){var Ke=(0,I.Z)(function*(Nt){if("auth/missing-recaptcha-token"!==Nt.code)return Promise.reject(Nt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Gt=yield Pi(V,Z,"getOobCode",!0);ye(Gt,_),yield Tt(V,Gt)}});return function(Nt){return Ke.apply(this,arguments)}}())}),bo.apply(this,arguments)}function cl(){return(cl=(0,I.Z)(function*(T,m,_){const D=(0,Y.m9)(T),V=$o.credentialWithLink(m,_||pn());return qe(V._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),eo(D,V)})).apply(this,arguments)}function gu(){return(gu=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:createAuthUri",Se(T,m))})).apply(this,arguments)}function mu(){return mu=(0,I.Z)(function*(T,m){const D={identifier:m,continueUri:En()?pn():"http://localhost"},{signinMethods:V}=yield function Lu(T,m){return gu.apply(this,arguments)}((0,Y.m9)(T),D);return V||[]}),mu.apply(this,arguments)}function Kr(){return Kr=(0,I.Z)(function*(T,m){const _=(0,Y.m9)(T),V={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};m&&ua(_.auth,V,m);const{email:Z}=yield function xe(T,m){return Re.apply(this,arguments)}(_.auth,V);Z!==T.email&&(yield T.reload())}),Kr.apply(this,arguments)}function la(){return la=(0,I.Z)(function*(T,m,_){const D=(0,Y.m9)(T),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:m};_&&ua(D.auth,Z,_);const{email:ye}=yield function Xt(T,m){return _n.apply(this,arguments)}(D.auth,Z);ye!==T.email&&(yield T.reload())}),la.apply(this,arguments)}function Qa(){return(Qa=(0,I.Z)(function*(T,m){return nt(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ma(){return Ma=(0,I.Z)(function*(T,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const D=(0,Y.m9)(T),Z={idToken:yield D.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},ye=yield Mr(D,function Sc(T,m){return Qa.apply(this,arguments)}(D.auth,Z));D.displayName=ye.displayName||null,D.photoURL=ye.photoUrl||null;const Ke=D.providerData.find(({providerId:Nt})=>"password"===Nt);Ke&&(Ke.displayName=D.displayName,Ke.photoURL=D.photoURL),yield D._updateTokensIfNecessary(ye)}),Ma.apply(this,arguments)}function po(T,m,_){return go.apply(this,arguments)}function go(){return(go=(0,I.Z)(function*(T,m,_){const{auth:D}=T,Z={idToken:yield T.getIdToken(),returnSecureToken:!0};m&&(Z.email=m),_&&(Z.password=_);const ye=yield Mr(T,Ia(D,Z));yield T._updateTokensIfNecessary(ye,!0)})).apply(this,arguments)}class rr{constructor(m,_,D={}){this.isNewUser=m,this.providerId=_,this.profile=D}}class So extends rr{constructor(m,_,D,V){super(m,_,D),this.username=V}}class R extends rr{constructor(m,_){super(m,"facebook.com",_)}}class K extends So{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class F extends rr{constructor(m,_){super(m,"google.com",_)}}class G extends So{constructor(m,_,D){super(m,"twitter.com",_,D)}}function ge(T){const{user:m,_tokenResponse:_}=T;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ql(T){var m,_;if(!T)return null;const{providerId:D}=T,V=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},Z=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!D&&T?.idToken){const ye=null===(_=null===(m=gn(T.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(ye)return new rr(Z,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!D)return null;switch(D){case"facebook.com":return new R(Z,V);case"github.com":return new K(Z,V);case"google.com":return new F(Z,V);case"twitter.com":return new G(Z,V,T.screenName||null);case"custom":case"anonymous":return new rr(Z,null);default:return new rr(Z,D,V)}}(_)}class Ei{constructor(m,_,D){this.type=m,this.credential=_,this.auth=D}static _fromIdtoken(m,_){return new Ei("enroll",m,_)}static _fromMfaPendingCredential(m){return new Ei("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,D;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ei._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(D=m.multiFactorSession)&&void 0!==D&&D.idToken)return Ei._fromIdtoken(m.multiFactorSession.idToken)}return null}}class yn{constructor(m,_,D){this.session=m,this.hints=_,this.signInResolver=D}static _fromError(m,_){const D=gr(m),V=_.customData._serverResponse,Z=(V.mfaInfo||[]).map(Ke=>Wo._fromServerResponse(D,Ke));qe(V.mfaPendingCredential,D,"internal-error");const ye=Ei._fromMfaPendingCredential(V.mfaPendingCredential);return new yn(ye,Z,function(){var Ke=(0,I.Z)(function*(Nt){const Gt=yield Nt._process(D,ye);delete V.mfaInfo,delete V.mfaPendingCredential;const on=Object.assign(Object.assign({},V),{idToken:Gt.idToken,refreshToken:Gt.refreshToken});switch(_.operationType){case"signIn":const fn=yield Ai._fromIdTokenResponse(D,_.operationType,on);return yield D._updateCurrentUser(fn.user),fn;case"reauthenticate":return qe(_.user,D,"internal-error"),Ai._forOperation(_.user,_.operationType,on);default:Ze(D,"internal-error")}});return function(Nt){return Ke.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,I.Z)(function*(){return _.signInResolver(m)})()}}class ki{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(D=>Wo._fromServerResponse(m.auth,D)))})}static _fromUser(m){return new ki(m)}getSession(){var m=this;return(0,I.Z)(function*(){return Ei._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var D=this;return(0,I.Z)(function*(){const V=m,Z=yield D.getSession(),ye=yield Mr(D.user,V._process(D.user.auth,Z,_));return yield D.user._updateTokensIfNecessary(ye),D.user.reload()})()}unenroll(m){var _=this;return(0,I.Z)(function*(){const D="string"==typeof m?m:m.uid,V=yield _.user.getIdToken();try{const Z=yield Mr(_.user,function Ac(T,m){return nt(T,"POST","/v2/accounts/mfaEnrollment:withdraw",Se(T,m))}(_.user.auth,{idToken:V,mfaEnrollmentId:D}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ye})=>ye!==D),yield _.user._updateTokensIfNecessary(Z),yield _.user.reload()}catch(Z){throw Z}})()}}const Fu=new WeakMap,Os="__sak";class _d{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Os,"1"),this.storage.removeItem(Os),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const mo=(()=>{class T extends _d{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,D)=>this.onStorageEvent(_,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Na(){const T=(0,Y.z$)();return re(T)||xt(T)}()&&function be(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Te(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const D of Object.keys(this.listeners)){const V=this.storage.getItem(D),Z=this.localCache[D];V!==Z&&_(D,Z,V)}}onStorageEvent(_,D=!1){if(!_.key)return void this.forAllChangedKeys((Ke,Nt,Gt)=>{this.notifyListeners(Ke,Gt)});const V=_.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ke=this.storage.getItem(V);if(_.newValue!==Ke)null!==_.newValue?this.storage.setItem(V,_.newValue):this.storage.removeItem(V);else if(this.localCache[V]===_.newValue&&!D)return}const Z=()=>{const Ke=this.storage.getItem(V);!D&&this.localCache[V]===Ke||this.notifyListeners(V,Ke)},ye=this.storage.getItem(V);!function We(){return(0,Y.w1)()&&10===document.documentMode}()||ye===_.newValue||_.newValue===_.oldValue?Z():setTimeout(Z,10)}notifyListeners(_,D){this.localCache[_]=D;const V=this.listeners[_];if(V)for(const Z of Array.from(V))Z(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,D,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:D,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,D){var V=()=>super._set,Z=this;return(0,I.Z)(function*(){yield V().call(Z,_,D),Z.localCache[_]=JSON.stringify(D)})()}_get(_){var D=()=>super._get,V=this;return(0,I.Z)(function*(){const Z=yield D().call(V,_);return V.localCache[_]=JSON.stringify(Z),Z})()}_remove(_){var D=()=>super._remove,V=this;return(0,I.Z)(function*(){yield D().call(V,_),delete V.localCache[_]})()}}return T.type="LOCAL",T})(),qi=(()=>{class T extends _d{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,D){}_removeListener(_,D){}}return T.type="SESSION",T})();let Pr=(()=>{class T{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const D=this.receivers.find(Z=>Z.isListeningto(_));if(D)return D;const V=new T(_);return this.receivers.push(V),V}isListeningto(_){return this.eventTarget===_}handleEvent(_){var D=this;return(0,I.Z)(function*(){const V=_,{eventId:Z,eventType:ye,data:Ke}=V.data,Nt=D.handlersMap[ye];if(!Nt?.size)return;V.ports[0].postMessage({status:"ack",eventId:Z,eventType:ye});const Gt=Array.from(Nt).map(function(){var fn=(0,I.Z)(function*(Li){return Li(V.origin,Ke)});return function(Li){return fn.apply(this,arguments)}}()),on=yield function At(T){return Promise.all(T.map(function(){var m=(0,I.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(D){return{fulfilled:!1,reason:D}}});return function(_){return m.apply(this,arguments)}}()))}(Gt);V.ports[0].postMessage({status:"done",eventId:Z,eventType:ye,response:on})})()}_subscribe(_,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(D)}_unsubscribe(_,D){this.handlersMap[_]&&D&&this.handlersMap[_].delete(D),(!D||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function ps(T="",m=10){let _="";for(let D=0;D<m;D++)_+=Math.floor(10*Math.random());return T+_}class Uu{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,D=50){var V=this;return(0,I.Z)(function*(){const Z=typeof MessageChannel<"u"?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let ye,Ke;return new Promise((Nt,Gt)=>{const on=ps("",20);Z.port1.start();const fn=setTimeout(()=>{Gt(new Error("unsupported_event"))},D);Ke={messageChannel:Z,onMessage(Li){const Ba=Li;if(Ba.data.eventId===on)switch(Ba.data.status){case"ack":clearTimeout(fn),ye=setTimeout(()=>{Gt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),Nt(Ba.data.response);break;default:clearTimeout(fn),clearTimeout(ye),Gt(new Error("invalid_response"))}}},V.handlers.add(Ke),Z.port1.addEventListener("message",Ke.onMessage),V.target.postMessage({eventType:m,eventId:on,data:_},[Z.port2])}).finally(()=>{Ke&&V.removeMessageHandler(Ke)})})()}}function Ot(){return window}function Rc(){return typeof Ot().WorkerGlobalScope<"u"&&"function"==typeof Ot().importScripts}function it(){return(it=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const js="firebaseLocalStorageDb",Bu="firebaseLocalStorage",ah="fbase_key";class $i{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Pa(T,m){return T.transaction([Bu],m?"readwrite":"readonly").objectStore(Bu)}function vu(){const T=indexedDB.open(js,1);return new Promise((m,_)=>{T.addEventListener("error",()=>{_(T.error)}),T.addEventListener("upgradeneeded",()=>{const D=T.result;try{D.createObjectStore(Bu,{keyPath:ah})}catch(V){_(V)}}),T.addEventListener("success",(0,I.Z)(function*(){const D=T.result;D.objectStoreNames.contains(Bu)?m(D):(D.close(),yield function fl(){const T=indexedDB.deleteDatabase(js);return new $i(T).toPromise()}(),m(yield vu()))}))})}function Zl(T,m,_){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,I.Z)(function*(T,m,_){const D=Pa(T,!0).put({[ah]:m,value:_});return new $i(D).toPromise()})).apply(this,arguments)}function On(){return(On=(0,I.Z)(function*(T,m){const _=Pa(T,!1).get(m),D=yield new $i(_).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Ao(T,m){const _=Pa(T,!0).delete(m);return new $i(_).toPromise()}const io=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,I.Z)(function*(){return _.db||(_.db=yield vu()),_.db})()}_withRetries(_){var D=this;return(0,I.Z)(function*(){let V=0;for(;;)try{const Z=yield D._openDb();return yield _(Z)}catch(Z){if(V++>3)throw Z;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,I.Z)(function*(){return Rc()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,I.Z)(function*(){_.receiver=Pr._getInstance(function ri(){return Rc()?self:null}()),_.receiver._subscribe("keyChanged",function(){var D=(0,I.Z)(function*(V,Z){return{keyProcessed:(yield _._poll()).includes(Z.key)}});return function(V,Z){return D.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var D=(0,I.Z)(function*(V,Z){return["keyChanged"]});return function(V,Z){return D.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,I.Z)(function*(){var D,V;if(_.activeServiceWorker=yield function Vt(){return it.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Uu(_.activeServiceWorker);const Z=yield _.sender._send("ping",{},800);Z&&null!==(D=Z[0])&&void 0!==D&&D.fulfilled&&null!==(V=Z[0])&&void 0!==V&&V.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var D=this;return(0,I.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Et(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:_},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const _=yield vu();return yield Zl(_,Os,"1"),yield Ao(_,Os),!0}catch{}return!1})()}_withPendingWrite(_){var D=this;return(0,I.Z)(function*(){D.pendingWrites++;try{yield _()}finally{D.pendingWrites--}})()}_set(_,D){var V=this;return(0,I.Z)(function*(){return V._withPendingWrite((0,I.Z)(function*(){return yield V._withRetries(Z=>Zl(Z,_,D)),V.localCache[_]=D,V.notifyServiceWorker(_)}))})()}_get(_){var D=this;return(0,I.Z)(function*(){const V=yield D._withRetries(Z=>function pl(T,m){return On.apply(this,arguments)}(Z,_));return D.localCache[_]=V,V})()}_remove(_){var D=this;return(0,I.Z)(function*(){return D._withPendingWrite((0,I.Z)(function*(){return yield D._withRetries(V=>Ao(V,_)),delete D.localCache[_],D.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,I.Z)(function*(){const D=yield _._withRetries(ye=>{const Ke=Pa(ye,!1).getAll();return new $i(Ke).toPromise()});if(!D)return[];if(0!==_.pendingWrites)return[];const V=[],Z=new Set;for(const{fbase_key:ye,value:Ke}of D)Z.add(ye),JSON.stringify(_.localCache[ye])!==JSON.stringify(Ke)&&(_.notifyListeners(ye,Ke),V.push(ye));for(const ye of Object.keys(_.localCache))_.localCache[ye]&&!Z.has(ye)&&(_.notifyListeners(ye,null),V.push(ye));return V})()}notifyListeners(_,D){this.localCache[_]=D;const V=this.listeners[_];if(V)for(const Z of Array.from(V))Z(D)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})(),ca=1e12;class Ro{constructor(m){this.auth=m,this.counter=ca,this._widgets=new Map}render(m,_){const D=this.counter;return this._widgets.set(D,new uh(m,this.auth.name,_||{})),this.counter++,D}reset(m){var _;const D=m||ca;null===(_=this._widgets.get(D))||void 0===_||_.delete(),this._widgets.delete(D)}getResponse(m){var _;return(null===(_=this._widgets.get(m||ca))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,I.Z)(function*(){var D;return null===(D=_._widgets.get(m||ca))||void 0===D||D.execute(),""})()}}class uh{constructor(m,_,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof m?document.getElementById(m):m;qe(V,"argument-error",{appName:_}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Mo(T){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<T;D++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gl=ss("rcb"),Vu=new er(3e4,6e4);class x{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Ot().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return qe(function C(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Bt(Ot().grecaptcha)?Promise.resolve(Ot().grecaptcha):new Promise((D,V)=>{const Z=Ot().setTimeout(()=>{V(Ce(m,"network-request-failed"))},Vu.get());Ot()[gl]=()=>{Ot().clearTimeout(Z),delete Ot()[gl];const Ke=Ot().grecaptcha;if(!Ke||!Bt(Ke))return void V(Ce(m,"internal-error"));const Nt=Ke.render;Ke.render=(Gt,on)=>{const fn=Nt(Gt,on);return this.counter++,fn},this.hostLanguage=_,D(Ke)},Fr(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:gl,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(Z),V(Ce(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Ot().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class N{load(m){return(0,I.Z)(function*(){return new Ro(m)})()}clearedOneInstance(){}}const $="recaptcha",se={theme:"light",type:"image"};class ie{constructor(m,_=Object.assign({},se),D){this.parameters=_,this.type=$,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gr(D),this.isInvisible="invisible"===this.parameters.size,qe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof m?document.getElementById(m):m;qe(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new N:new x,this.validateStartingState()}verify(){var m=this;return(0,I.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),D=m.getAssertedRecaptcha();return D.getResponse(_)||new Promise(Z=>{const ye=Ke=>{Ke&&(m.tokenChangeListeners.delete(ye),Z(Ke))};m.tokenChangeListeners.add(ye),m.isInvisible&&D.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){qe(!this.parameters.sitekey,this.auth,"argument-error"),qe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(D=>D(_)),"function"==typeof m)m(_);else if("string"==typeof m){const D=Ot()[m];"function"==typeof D&&D(_)}}}assertNotDestroyed(){qe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,I.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const D=document.createElement("div");_.appendChild(D),_=D}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,I.Z)(function*(){qe(En()&&!Rc(),m.auth,"internal-error"),yield function He(){let T=null;return new Promise(m=>{"complete"!==document.readyState?(T=()=>m(),window.addEventListener("load",T)):m()}).catch(m=>{throw T&&window.removeEventListener("load",T),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function ve(T){return Ve.apply(this,arguments)}(m.auth);qe(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return qe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class pe{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=yr._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function tn(){return(tn=(0,I.Z)(function*(T,m,_){const D=gr(T),V=yield bs(D,m,(0,Y.m9)(_));return new pe(V,Z=>eo(D,Z))})).apply(this,arguments)}function Ur(){return(Ur=(0,I.Z)(function*(T,m,_){const D=(0,Y.m9)(T);yield xu(!1,D,"phone");const V=yield bs(D.auth,m,(0,Y.m9)(_));return new pe(V,Z=>ll(D,Z))})).apply(this,arguments)}function Qo(){return(Qo=(0,I.Z)(function*(T,m,_){const D=(0,Y.m9)(T),V=yield bs(D.auth,m,(0,Y.m9)(_));return new pe(V,Z=>Qr(D,Z))})).apply(this,arguments)}function bs(T,m,_){return ju.apply(this,arguments)}function ju(){return ju=(0,I.Z)(function*(T,m,_){var D;const V=yield _.verify();try{let Z;if(qe("string"==typeof V,T,"argument-error"),qe(_.type===$,T,"argument-error"),Z="string"==typeof m?{phoneNumber:m}:m,"session"in Z){const ye=Z.session;if("phoneNumber"in Z)return qe("enroll"===ye.type,T,"internal-error"),(yield function ro(T,m){return nt(T,"POST","/v2/accounts/mfaEnrollment:start",Se(T,m))}(T,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{qe("signin"===ye.type,T,"internal-error");const Ke=(null===(D=Z.multiFactorHint)||void 0===D?void 0:D.uid)||Z.multiFactorUid;return qe(Ke,T,"missing-multi-factor-info"),(yield function qn(T,m){return nt(T,"POST","/v2/accounts/mfaSignIn:start",Se(T,m))}(T,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Ke,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield function ho(T,m){return us.apply(this,arguments)}(T,{phoneNumber:Z.phoneNumber,recaptchaToken:V});return ye}}finally{_._reset()}}),ju.apply(this,arguments)}function np(){return(np=(0,I.Z)(function*(T,m){yield du((0,Y.m9)(T),m)})).apply(this,arguments)}let No=(()=>{class T{constructor(_){this.providerId=T.PROVIDER_ID,this.auth=gr(_)}verifyPhoneNumber(_,D){return bs(this.auth,_,(0,Y.m9)(D))}static credential(_,D){return yr._fromVerification(_,D)}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:D,temporaryProof:V}=_;return D&&V?yr._fromTokenResponse(D,V):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Ss(T,m){return m?An(m):(qe(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class xa extends Ui{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return os(m,this._buildIdpRequest())}_linkToIdToken(m,_){return os(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return os(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Ql(T){return hu(T.auth,new xa(T),T.bypassAuthState)}function Nc(T){const{auth:m,user:_}=T;return qe(_,m,"internal-error"),sa(_,new xa(T),T.bypassAuthState)}function As(T){return ha.apply(this,arguments)}function ha(){return(ha=(0,I.Z)(function*(T){const{auth:m,user:_}=T;return qe(_,m,"internal-error"),du(_,new xa(T),T.bypassAuthState)})).apply(this,arguments)}class Qh{constructor(m,_,D,V,Z=!1){this.auth=m,this.resolver=D,this.user=V,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,I.Z)(function*(D,V){m.pendingPromise={resolve:D,reject:V};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(Z){m.reject(Z)}});return function(D,V){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,I.Z)(function*(){const{urlResponse:D,sessionId:V,postBody:Z,tenantId:ye,error:Ke,type:Nt}=m;if(Ke)return void _.reject(Ke);const Gt={auth:_.auth,requestUri:D,sessionId:V,tenantId:ye||void 0,postBody:Z||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Nt)(Gt))}catch(on){_.reject(on)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ql;case"linkViaPopup":case"linkViaRedirect":return As;case"reauthViaPopup":case"reauthViaRedirect":return Nc;default:Ze(this.auth,"internal-error")}}resolve(m){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oa=new er(2e3,1e4);function Pc(){return(Pc=(0,I.Z)(function*(T,m,_){const D=gr(T);dt(T,m,Es);const V=Ss(D,_);return new xc(D,"signInViaPopup",m,V).executeNotNull()})).apply(this,arguments)}function lh(){return(lh=(0,I.Z)(function*(T,m,_){const D=(0,Y.m9)(T);dt(D.auth,m,Es);const V=Ss(D.auth,_);return new xc(D.auth,"reauthViaPopup",m,V,D).executeNotNull()})).apply(this,arguments)}function yl(){return(yl=(0,I.Z)(function*(T,m,_){const D=(0,Y.m9)(T);dt(D.auth,m,Es);const V=Ss(D.auth,_);return new xc(D.auth,"linkViaPopup",m,V,D).executeNotNull()})).apply(this,arguments)}let xc=(()=>{class T extends Qh{constructor(_,D,V,Z,ye){super(_,D,Z,ye),this.provider=V,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var _=this;return(0,I.Z)(function*(){const D=yield _.execute();return qe(D,_.auth,"internal-error"),D})()}onExecution(){var _=this;return(0,I.Z)(function*(){jt(1===_.filter.length,"Popup operations only handle one event");const D=ps();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],D),_.authWindow.associatedEvent=D,_.resolver._originValidation(_.auth).catch(V=>{_.reject(V)}),_.resolver._isIframeWebStorageSupported(_.auth,V=>{V||_.reject(Ce(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const _=()=>{var D,V;this.pollId=null!==(V=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Oa.get())};_()}}return T.currentPopupAction=null,T})();const Oc="pendingRedirect",Eu=new Map;class ch extends Qh{constructor(m,_,D=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,D),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,I.Z)(function*(){let D=Eu.get(_.auth._key());if(!D){try{const Z=(yield function Ed(T,m){return _l.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;D=()=>Promise.resolve(Z)}catch(V){D=()=>Promise.reject(V)}Eu.set(_.auth._key(),D)}return _.bypassAuthState||Eu.set(_.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,D=this;return(0,I.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(D,m);if("unknown"!==m.type){if(m.eventId){const V=yield D.auth._redirectUserForId(m.eventId);if(V)return D.user=V,_().call(D,m);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function _l(){return(_l=(0,I.Z)(function*(T,m){const _=Xh(m),D=$u(T);if(!(yield D._isAvailable()))return!1;const V="true"===(yield D._get(_));return yield D._remove(_),V})).apply(this,arguments)}function Jl(T,m){return ec.apply(this,arguments)}function ec(){return(ec=(0,I.Z)(function*(T,m){return $u(T)._set(Xh(m),"true")})).apply(this,arguments)}function kc(T,m){Eu.set(T._key(),m)}function $u(T){return An(T._redirectPersistence)}function Xh(T){return we(Oc,T.config.apiKey,T.name)}function Lc(T,m,_){return function Hu(T,m,_){return La.apply(this,arguments)}(T,m,_)}function La(){return(La=(0,I.Z)(function*(T,m,_){const D=gr(T);dt(T,m,Es),yield D._initializationPromise;const V=Ss(D,_);return yield Jl(V,D),V._openRedirect(D,m,"signInViaRedirect")})).apply(this,arguments)}function dh(T,m,_){return function ip(T,m,_){return fa.apply(this,arguments)}(T,m,_)}function fa(){return(fa=(0,I.Z)(function*(T,m,_){const D=(0,Y.m9)(T);dt(D.auth,m,Es),yield D.auth._initializationPromise;const V=Ss(D.auth,_);yield Jl(V,D.auth);const Z=yield wi(D);return V._openRedirect(D.auth,m,"reauthViaRedirect",Z)})).apply(this,arguments)}function $s(T,m,_){return function wu(T,m,_){return pa.apply(this,arguments)}(T,m,_)}function pa(){return(pa=(0,I.Z)(function*(T,m,_){const D=(0,Y.m9)(T);dt(D.auth,m,Es),yield D.auth._initializationPromise;const V=Ss(D.auth,_);yield xu(!1,D,m.providerId),yield Jl(V,D.auth);const Z=yield wi(D);return V._openRedirect(D.auth,m,"linkViaRedirect",Z)})).apply(this,arguments)}function Br(){return(Br=(0,I.Z)(function*(T,m){return yield gr(T)._initializationPromise,ga(T,m,!1)})).apply(this,arguments)}function ga(T,m){return gs.apply(this,arguments)}function gs(){return(gs=(0,I.Z)(function*(T,m,_=!1){const D=gr(T),V=Ss(D,m),ye=yield new ch(D,V,_).execute();return ye&&!_&&(delete ye.user._redirectEventId,yield D._persistUserIfCurrent(ye.user),yield D._setRedirectUser(null,m)),ye})).apply(this,arguments)}function wi(T){return P.apply(this,arguments)}function P(){return(P=(0,I.Z)(function*(T){const m=ps(`${T.uid}:::`);return T._redirectEventId=m,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),m})).apply(this,arguments)}class W{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(m,D)&&(_=!0,this.sendToConsumer(m,D),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function ze(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oe(T);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var D;if(m.error&&!Oe(m)){const V=(null===(D=m.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";_.onError(Ce(this.auth,V))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const D=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&D}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ce(m))}saveEventToCache(m){this.cachedEventUids.add(ce(m)),this.lastProcessedEventTime=Date.now()}}function ce(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(m=>m).join("-")}function Oe({type:T,error:m}){return"unknown"===T&&"auth/no-auth-event"===m?.code}function It(T){return en.apply(this,arguments)}function en(){return(en=(0,I.Z)(function*(T,m={}){return nt(T,"GET","/v1/projects",m)})).apply(this,arguments)}const Ft=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sn=/^https?/;function Cn(){return(Cn=(0,I.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:m}=yield It(T);for(const _ of m)try{if(xr(_))return}catch{}Ze(T,"unauthorized-domain")})).apply(this,arguments)}function xr(T){const m=pn(),{protocol:_,hostname:D}=new URL(m);if(T.startsWith("chrome-extension://")){const ye=new URL(T);return""===ye.hostname&&""===D?"chrome-extension:"===_&&T.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&ye.hostname===D}if(!sn.test(_))return!1;if(Ft.test(T))return D===T;const V=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(D)}const ks=new er(3e4,6e4);function so(){const T=Ot().___jsl;if(T?.H)for(const m of Object.keys(T.H))if(T.H[m].r=T.H[m].r||[],T.H[m].L=T.H[m].L||[],T.H[m].r=[...T.H[m].L],T.CP)for(let _=0;_<T.CP.length;_++)T.CP[_]=null}let Xi=null;const Ls=new er(5e3,15e3),Ja="__/auth/iframe",Fa="emulator/auth/iframe",Mg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Id(T){const m=T.config;qe(m.authDomain,T,"auth-domain-config-required");const _=m.emulator?Ue(m,Fa):`https://${T.config.authDomain}/${Ja}`,D={apiKey:m.apiKey,appName:T.name,v:de.SDK_VERSION},V=wd.get(T.config.apiHost);V&&(D.eid=V);const Z=T._getFrameworks();return Z.length&&(D.fw=Z.join(",")),`${_}?${(0,Y.xO)(D).slice(1)}`}function Rs(){return Rs=(0,I.Z)(function*(T){const m=yield function Ji(T){return Xi=Xi||function Xa(T){return new Promise((m,_)=>{var D,V,Z;function ye(){so(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{so(),_(Ce(T,"network-request-failed"))},timeout:ks.get()})}if(null!==(V=null===(D=Ot().gapi)||void 0===D?void 0:D.iframes)&&void 0!==V&&V.Iframe)m(gapi.iframes.getContext());else{if(null===(Z=Ot().gapi)||void 0===Z||!Z.load){const Ke=ss("iframefcb");return Ot()[Ke]=()=>{gapi.load?ye():_(Ce(T,"network-request-failed"))},Fr(`https://apis.google.com/js/api.js?onload=${Ke}`).catch(Nt=>_(Nt))}ye()}}).catch(m=>{throw Xi=null,m})}(T),Xi}(T),_=Ot().gapi;return qe(_,T,"internal-error"),m.open({where:document.body,url:Id(T),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mg,dontclear:!0},D=>new Promise(function(){var V=(0,I.Z)(function*(Z,ye){yield D.restyle({setHideOnLeave:!1});const Ke=Ce(T,"network-request-failed"),Nt=Ot().setTimeout(()=>{ye(Ke)},Ls.get());function Gt(){Ot().clearTimeout(Nt),Z(D)}D.ping(Gt).then(Gt,()=>{ye(Ke)})});return function(Z,ye){return V.apply(this,arguments)}}()))}),Rs.apply(this,arguments)}const hh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Td{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const $m="__/auth/handler",op="emulator/auth/handler",ef=encodeURIComponent("fac");function ms(T,m,_,D,V,Z){return tf.apply(this,arguments)}function tf(){return(tf=(0,I.Z)(function*(T,m,_,D,V,Z){qe(T.config.authDomain,T,"auth-domain-config-required"),qe(T.config.apiKey,T,"invalid-api-key");const ye={apiKey:T.config.apiKey,appName:T.name,authType:_,redirectUrl:D,v:de.SDK_VERSION,eventId:V};if(m instanceof Es){m.setDefaultLanguage(T.languageCode),ye.providerId=m.providerId||"",(0,Y.xb)(m.getCustomParameters())||(ye.customParameters=JSON.stringify(m.getCustomParameters()));for(const[on,fn]of Object.entries(Z||{}))ye[on]=fn}if(m instanceof Si){const on=m.getScopes().filter(fn=>""!==fn);on.length>0&&(ye.scopes=on.join(","))}T.tenantId&&(ye.tid=T.tenantId);const Ke=ye;for(const on of Object.keys(Ke))void 0===Ke[on]&&delete Ke[on];const Nt=yield T._getAppCheckToken(),Gt=Nt?`#${ef}=${encodeURIComponent(Nt)}`:"";return`${function Mi({config:T}){return T.emulator?Ue(T,op):`https://${T.authDomain}/${$m}`}(T)}?${(0,Y.xO)(Ke).slice(1)}${Gt}`})).apply(this,arguments)}const Gu="webStorageSupport",ap=class fh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qi,this._completeRedirectFn=ga,this._overrideRedirectResult=kc}_openPopup(m,_,D,V){var Z=this;return(0,I.Z)(function*(){var ye;jt(null===(ye=Z.eventManagers[m._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Ke=yield ms(m,_,D,pn(),V);return function Pg(T,m,_,D=500,V=600){const Z=Math.max((window.screen.availHeight-V)/2,0).toString(),ye=Math.max((window.screen.availWidth-D)/2,0).toString();let Ke="";const Nt=Object.assign(Object.assign({},hh),{width:D.toString(),height:V.toString(),top:Z,left:ye}),Gt=(0,Y.z$)().toLowerCase();_&&(Ke=je(Gt)?"_blank":_),J(Gt)&&(m=m||"http://localhost",Nt.scrollbars="yes");const on=Object.entries(Nt).reduce((Li,[Ba,Yc])=>`${Li}${Ba}=${Yc},`,"");if(function Hr(T=(0,Y.z$)()){var m;return xt(T)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Gt)&&"_self"!==Ke)return function xg(T,m){const _=document.createElement("a");_.href=T,_.target=m;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(D)}(m||"",Ke),new Td(null);const fn=window.open(m||"",Ke,on);qe(fn,T,"popup-blocked");try{fn.focus()}catch{}return new Td(fn)}(m,Ke,ps())})()}_openRedirect(m,_,D,V){var Z=this;return(0,I.Z)(function*(){return yield Z._originValidation(m),function vn(T){Ot().location.href=T}(yield ms(m,_,D,pn(),V)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:V,promise:Z}=this.eventManagers[_];return V?Promise.resolve(V):(jt(Z,"If manager is not set, promise should be"),Z)}const D=this.initAndGetManager(m);return this.eventManagers[_]={promise:D},D.catch(()=>{delete this.eventManagers[_]}),D}initAndGetManager(m){var _=this;return(0,I.Z)(function*(){const D=yield function sp(T){return Rs.apply(this,arguments)}(m),V=new W(m);return D.register("authEvent",Z=>(qe(Z?.authEvent,m,"invalid-auth-event"),{status:V.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:V},_.iframes[m._key()]=D,V})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Gu,{type:Gu},V=>{var Z;const ye=null===(Z=V?.[0])||void 0===Z?void 0:Z[Gu];void 0!==ye&&_(!!ye),Ze(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Yn(T){return Cn.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return Te()||re()||xt()}};class Cd{constructor(m){this.factorId=m}_process(m,_,D){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,D);case"signin":return this._finalizeSignIn(m,_.credential);default:return Ct("unexpected MultiFactorSessionType")}}}class Fc extends Cd{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Fc(m)}_finalizeEnroll(m,_,D){return function Ts(T,m){return nt(T,"POST","/v2/accounts/mfaEnrollment:finalize",Se(T,m))}(m,{idToken:_,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Yo(T,m){return nt(T,"POST","/v2/accounts/mfaSignIn:finalize",Se(T,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dd=(()=>{class T{constructor(){}static assertion(_){return Fc._fromCredential(_)}}return T.FACTOR_ID="phone",T})();var rc="@firebase/auth";class ic{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,I.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(D=>{m(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vl(){return window}(0,Y.Pz)("authIdTokenMaxAge"),function Uc(T){(0,de._registerComponent)(new Me.wA("auth",(m,{options:_})=>{const D=m.getProvider("app").getImmediate(),V=m.getProvider("heartbeat"),Z=m.getProvider("app-check-internal"),{apiKey:ye,authDomain:Ke}=D.options;qe(ye&&!ye.includes(":"),"invalid-api-key",{appName:D.name});const Nt={apiKey:ye,authDomain:Ke,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:me(T)},Gt=new Io(D,V,Z,Nt);return function Fo(T,m){const _=m?.persistence||[],D=(Array.isArray(_)?_:[_]).map(An);m?.errorMap&&T._updateErrorMap(m.errorMap),T._initializeWithPersistence(D,m?.popupRedirectResolver)}(Gt,_),Gt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,D)=>{m.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new Me.wA("auth-internal",m=>{const _=gr(m.getProvider("auth").getImmediate());return new ic(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(rc,"0.23.2",function ph(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,de.registerVersion)(rc,"0.23.2","esm2017")}("Browser");function rf(){return rf=(0,I.Z)(function*(T,m,_){var D;const{BuildInfo:V}=vl();jt(m.sessionId,"AuthEvent did not contain a session ID");const Z=yield function El(T){return eu.apply(this,arguments)}(m.sessionId),ye={};return xt()?ye.ibi=V.packageName:Ut()?ye.apn=V.packageName:Ze(T,"operation-not-supported-in-this-environment"),V.displayName&&(ye.appDisplayName=V.displayName),ye.sessionId=Z,ms(T,_,m.type,void 0,null!==(D=m.eventId)&&void 0!==D?D:void 0,ye)}),rf.apply(this,arguments)}function zs(){return(zs=(0,I.Z)(function*(T){const{BuildInfo:m}=vl(),_={};xt()?_.iosBundleId=m.packageName:Ut()?_.androidPackageName=m.packageName:Ze(T,"operation-not-supported-in-this-environment"),yield It(T,_)})).apply(this,arguments)}function oc(){return(oc=(0,I.Z)(function*(T,m,_){const{cordova:D}=vl();let V=()=>{};try{yield new Promise((Z,ye)=>{let Ke=null;function Nt(){var fn;Z();const Li=null===(fn=D.plugins.browsertab)||void 0===fn?void 0:fn.close;"function"==typeof Li&&Li(),"function"==typeof _?.close&&_.close()}function Gt(){Ke||(Ke=window.setTimeout(()=>{ye(Ce(T,"redirect-cancelled-by-user"))},2e3))}function on(){"visible"===document?.visibilityState&&Gt()}m.addPassiveListener(Nt),document.addEventListener("resume",Gt,!1),Ut()&&document.addEventListener("visibilitychange",on,!1),V=()=>{m.removePassiveListener(Nt),document.removeEventListener("resume",Gt,!1),document.removeEventListener("visibilitychange",on,!1),Ke&&window.clearTimeout(Ke)}})}finally{V()}})).apply(this,arguments)}function eu(){return(eu=(0,I.Z)(function*(T){const m=function ac(T){if(jt(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(T);const m=new ArrayBuffer(T.length),_=new Uint8Array(m);for(let D=0;D<T.length;D++)_[D]=T.charCodeAt(D);return _}(T),_=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(_)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class jc extends W{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(m)),super.onEvent(m)}initialized(){var m=this;return(0,I.Z)(function*(){yield m.initPromise})()}}function Ad(T){return uc.apply(this,arguments)}function uc(){return(uc=(0,I.Z)(function*(T){const m=yield Rd()._get($c(T));return m&&(yield Rd()._remove($c(T))),m})).apply(this,arguments)}function Po(){const T=[];for(let _=0;_<20;_++){const D=Math.floor(62*Math.random());T.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(D))}return T.join("")}function Rd(){return An(mo)}function $c(T){return we("authEvent",T.config.apiKey,T.name)}function tu(T){if(!T?.includes("?"))return{};const[m,..._]=T.split("?");return(0,Y.zd)(_.join("?"))}const yh=class wl{constructor(){this._redirectPersistence=qi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ga,this._overrideRedirectResult=kc}_initialize(m){var _=this;return(0,I.Z)(function*(){const D=m._key();let V=_.eventManagers.get(D);return V||(V=new jc(m),_.eventManagers.set(D,V),_.attachCallbackListeners(m,V)),V})()}_openPopup(m){Ze(m,"operation-not-supported-in-this-environment")}_openRedirect(m,_,D,V){var Z=this;return(0,I.Z)(function*(){!function Wu(T){var m,_,D,V,Z,ye,Ke,Nt,Gt,on;const fn=vl();qe("function"==typeof(null===(m=fn?.universalLinks)||void 0===m?void 0:m.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),qe(typeof(null===(_=fn?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),qe("function"==typeof(null===(Z=null===(V=null===(D=fn?.cordova)||void 0===D?void 0:D.plugins)||void 0===V?void 0:V.browsertab)||void 0===Z?void 0:Z.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qe("function"==typeof(null===(Nt=null===(Ke=null===(ye=fn?.cordova)||void 0===ye?void 0:ye.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Nt?void 0:Nt.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qe("function"==typeof(null===(on=null===(Gt=fn?.cordova)||void 0===Gt?void 0:Gt.InAppBrowser)||void 0===on?void 0:on.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const ye=yield Z._initialize(m);yield ye.initialized(),ye.resetRedirect(),function rp(){Eu.clear()}(),yield Z._originValidation(m);const Ke=function Lg(T,m,_=null){return{type:m,eventId:_,urlResponse:null,sessionId:Po(),postBody:null,tenantId:T.tenantId,error:Ce(T,"no-auth-event")}}(m,D,V);yield function Gs(T,m){return Rd()._set($c(T),m)}(m,Ke);const Nt=yield function Sd(T,m,_){return rf.apply(this,arguments)}(m,Ke,_),Gt=yield function Vc(T){const{cordova:m}=vl();return new Promise(_=>{m.plugins.browsertab.isAvailable(D=>{let V=null;D?m.plugins.browsertab.openUrl(T):V=m.InAppBrowser.open(T,function bn(T=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}()?"_blank":"_system","location=yes"),_(V)})})}(Nt);return function sc(T,m,_){return oc.apply(this,arguments)}(m,ye,Gt)})()}_isIframeWebStorageSupported(m,_){throw new Error("Method not implemented.")}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Tu(T){return zs.apply(this,arguments)}(m)),this.originValidationPromises[_]}attachCallbackListeners(m,_){const{universalLinks:D,handleOpenURL:V,BuildInfo:Z}=vl(),ye=setTimeout((0,I.Z)(function*(){yield Ad(m),_.onEvent(Fg())}),500),Ke=function(){var on=(0,I.Z)(function*(fn){clearTimeout(ye);const Li=yield Ad(m);let Ba=null;Li&&fn?.url&&(Ba=function Ku(T,m){var _,D;const V=function sf(T){const m=tu(T),_=m.link?decodeURIComponent(m.link):void 0,D=tu(_).link,V=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return tu(V).link||V||D||_||T}(m);if(V.includes("/__/auth/callback")){const Z=tu(V),ye=Z.firebaseError?function qu(T){try{return JSON.parse(T)}catch{return null}}(decodeURIComponent(Z.firebaseError)):null,Ke=null===(D=null===(_=ye?.code)||void 0===_?void 0:_.split("auth/"))||void 0===D?void 0:D[1],Nt=Ke?Ce(Ke):null;return Nt?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:Nt,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:V,postBody:null}}return null}(Li,fn.url)),_.onEvent(Ba||Fg())});return function(Li){return on.apply(this,arguments)}}();typeof D<"u"&&"function"==typeof D.subscribe&&D.subscribe(null,Ke);const Nt=V,Gt=`${Z.packageName.toLowerCase()}://`;vl().handleOpenURL=function(){var on=(0,I.Z)(function*(fn){if(fn.toLowerCase().startsWith(Gt)&&Ke({url:fn}),"function"==typeof Nt)try{Nt(fn)}catch(Li){console.error(Li)}});return function(fn){return on.apply(this,arguments)}}()}};function Fg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function Zu(){var T;return(null===(T=self?.location)||void 0===T?void 0:T.protocol)||null}function nu(T=(0,Y.z$)()){return!("file:"!==Zu()&&"ionic:"!==Zu()&&"capacitor:"!==Zu()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jn(){try{const T=self.localStorage,m=ps();if(T)return T.setItem(m,"1"),T.removeItem(m),!function Xo(T=(0,Y.z$)()){return function Md(){return(0,Y.w1)()&&11===document?.documentMode}()||function lp(T=(0,Y.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,Y.hl)()}catch{return Nd()&&(0,Y.hl)()}return!1}function Nd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hc(){return(function up(){return"http:"===Zu()||"https:"===Zu()}()||(0,Y.ru)()||nu())&&!function uf(){return(0,Y.b$)()||(0,Y.UG)()}()&&Jn()&&!Nd()}function Ws(){return nu()&&typeof document<"u"}function zc(){return(zc=(0,I.Z)(function*(){return!!Ws()&&new Promise(T=>{const m=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),T(!0)})})})).apply(this,arguments)}const Jo={LOCAL:"local",NONE:"none",SESSION:"session"},xd=qe,cp="persistence";function Il(T){return vh.apply(this,arguments)}function vh(){return(vh=(0,I.Z)(function*(T){yield T._initializationPromise;const m=lf(),_=we(cp,T.config.apiKey,T.name);m&&m.setItem(_,T._getPersistence())})).apply(this,arguments)}function lf(){var T;try{return(null===(T=function Gc(){return typeof window<"u"?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch{return null}}const Tl=qe;class ru{constructor(){this.browserResolver=An(ap),this.cordovaResolver=An(yh),this.underlyingResolver=null,this._redirectPersistence=qi,this._completeRedirectFn=ga,this._overrideRedirectResult=kc}_initialize(m){var _=this;return(0,I.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,_,D,V){var Z=this;return(0,I.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(m,_,D,V)})()}_openRedirect(m,_,D,V){var Z=this;return(0,I.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(m,_,D,V)})()}_isIframeWebStorageSupported(m,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,_)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return Ws()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,I.Z)(function*(){if(m.underlyingResolver)return;const _=yield function Pd(){return zc.apply(this,arguments)}();m.underlyingResolver=_?m.cordovaResolver:m.browserResolver})()}}function dp(T){return T.unwrap()}function Hm(T){return Hi(T)}function Hi(T){const{_tokenResponse:m}=T instanceof Y.ZR?T.customData:T;if(!m)return null;if(!(T instanceof Y.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return No.credentialFromResult(T);const _=m.providerId;if(!_||_===Pe.PASSWORD)return null;let D;switch(_){case Pe.GOOGLE:D=Ho;break;case Pe.FACEBOOK:D=To;break;case Pe.GITHUB:D=Wi;break;case Pe.TWITTER:D=Co;break;default:const{oauthIdToken:V,oauthAccessToken:Z,oauthTokenSecret:ye,pendingToken:Ke,nonce:Nt}=m;return Z||ye||V||Ke?Ke?_.startsWith("saml.")?ui._create(_,Ke):as._fromParams({providerId:_,signInMethod:_,pendingToken:Ke,idToken:V,accessToken:Z}):new Bs(_).credential({idToken:V,accessToken:Z,rawNonce:Nt}):null}return T instanceof Y.ZR?D.credentialFromError(T):D.credentialFromResult(T)}function Ks(T,m){return m.catch(_=>{throw _ instanceof Y.ZR&&function zm(T,m){var _;const D=null===(_=m.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===m?.code)m.resolver=new cf(T,function ls(T,m){var _;const D=(0,Y.m9)(T),V=m;return qe(m.customData.operationType,D,"argument-error"),qe(null===(_=V.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,D,"argument-error"),yn._fromError(D,V)}(T,m));else if(D){const V=Hi(m),Z=m;V&&(Z.credential=V,Z.tenantId=D.tenantId||void 0,Z.email=D.email||void 0,Z.phoneNumber=D.phoneNumber||void 0)}}(T,_),_}).then(_=>{const V=_.user;return{operationType:_.operationType,credential:Hm(_),additionalUserInfo:ge(_),user:ma.getOrCreate(V)}})}function dc(T,m){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,I.Z)(function*(T,m){const _=yield m;return{verificationId:_.verificationId,confirm:D=>Ks(T,_.confirm(D))}})).apply(this,arguments)}class cf{constructor(m,_){this.resolver=_,this.auth=function Cl(T){return T.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Ks(dp(this.auth),this.resolver.resolveSignIn(m))}}class ma{constructor(m){this._delegate=m,this.multiFactor=function hl(T){const m=(0,Y.m9)(T);return Fu.has(m)||Fu.set(m,ki._fromUser(m)),Fu.get(m)}(m)}static getOrCreate(m){return ma.USER_MAP.has(m)||ma.USER_MAP.set(m,new ma(m)),ma.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var _=this;return(0,I.Z)(function*(){return Ks(_.auth,ll(_._delegate,m))})()}linkWithPhoneNumber(m,_){var D=this;return(0,I.Z)(function*(){return dc(D.auth,function Cr(T,m,_){return Ur.apply(this,arguments)}(D._delegate,m,_))})()}linkWithPopup(m){var _=this;return(0,I.Z)(function*(){return Ks(_.auth,function Xl(T,m,_){return yl.apply(this,arguments)}(_._delegate,m,ru))})()}linkWithRedirect(m){var _=this;return(0,I.Z)(function*(){return yield Il(gr(_.auth)),$s(_._delegate,m,ru)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var _=this;return(0,I.Z)(function*(){return Ks(_.auth,Qr(_._delegate,m))})()}reauthenticateWithPhoneNumber(m,_){return dc(this.auth,function da(T,m,_){return Qo.apply(this,arguments)}(this._delegate,m,_))}reauthenticateWithPopup(m){return Ks(this.auth,function ka(T,m,_){return lh.apply(this,arguments)}(this._delegate,m,ru))}reauthenticateWithRedirect(m){var _=this;return(0,I.Z)(function*(){return yield Il(gr(_.auth)),dh(_._delegate,m,ru)})()}sendEmailVerification(m){return function ni(T,m){return Kr.apply(this,arguments)}(this._delegate,m)}unlink(m){var _=this;return(0,I.Z)(function*(){return yield function al(T,m){return ba.apply(this,arguments)}(_._delegate,m),_})()}updateEmail(m){return function Is(T,m){return po((0,Y.m9)(T),m,null)}(this._delegate,m)}updatePassword(m){return function yu(T,m){return po((0,Y.m9)(T),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function ml(T,m){return np.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function Kl(T,m){return Ma.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,_){return function xs(T,m,_){return la.apply(this,arguments)}(this._delegate,m,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ma.USER_MAP=new WeakMap;const ya=qe;let hc=(()=>{class T{constructor(_,D){if(this.app=_,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=_.options;ya(V,"invalid-api-key",{appName:_.name}),ya(V,"invalid-api-key",{appName:_.name});const Z=typeof window<"u"?ru:void 0;this._delegate=D.initialize({options:{persistence:bl(V,_.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(kt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ma.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,D){!function lo(T,m,_){const D=gr(T);qe(D._canInitEmulator,D,"emulator-config-failed"),qe(/^https?:\/\//.test(m),D,"invalid-emulator-scheme");const V=!!_?.disableWarnings,Z=_i(m),{host:ye,port:Ke}=function Uo(T){const m=_i(T),_=/(\/\/)?([^?#/]+)/.exec(T.substr(m.length));if(!_)return{host:"",port:null};const D=_[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(D);if(V){const Z=V[1];return{host:Z,port:Qs(D.substr(Z.length+1))}}{const[Z,ye]=D.split(":");return{host:Z,port:Qs(ye)}}}(m);D.config.emulator={url:`${Z}//${ye}${null===Ke?"":`:${Ke}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:ye,port:Ke,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function qa(){function T(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}(this._delegate,_,D)}applyActionCode(_){return function vi(T,m){return no.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return fu(this._delegate,_)}confirmPasswordReset(_,D){return function Oi(T,m,_){return qo.apply(this,arguments)}(this._delegate,_,D)}createUserWithEmailAndPassword(_,D){var V=this;return(0,I.Z)(function*(){return Ks(V._delegate,function Aa(T,m,_){return Ri.apply(this,arguments)}(V._delegate,_,D))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function dl(T,m){return mu.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function ue(T,m){const _=Qn.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,I.Z)(function*(){ya(Hc(),_._delegate,"operation-not-supported-in-this-environment");const D=yield function tc(T,m){return Br.apply(this,arguments)}(_._delegate,ru);return D?Ks(_._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Ua(T,m){gr(T)._logFramework(m)}(this._delegate,_)}onAuthStateChanged(_,D,V){const{next:Z,error:ye,complete:Ke}=Kc(_,D,V);return this._delegate.onAuthStateChanged(Z,ye,Ke)}onIdTokenChanged(_,D,V){const{next:Z,error:ye,complete:Ke}=Kc(_,D,V);return this._delegate.onIdTokenChanged(Z,ye,Ke)}sendSignInLinkToEmail(_,D){return function Do(T,m,_){return bo.apply(this,arguments)}(this._delegate,_,D)}sendPasswordResetEmail(_,D){return function to(T,m,_){return ws.apply(this,arguments)}(this._delegate,_,D||void 0)}setPersistence(_){var D=this;return(0,I.Z)(function*(){let V;switch(function cc(T,m){xd(Object.values(Jo).includes(m),T,"invalid-persistence-type"),(0,Y.b$)()?xd(m!==Jo.SESSION,T,"unsupported-persistence-type"):(0,Y.UG)()?xd(m===Jo.NONE,T,"unsupported-persistence-type"):Nd()?xd(m===Jo.NONE||m===Jo.LOCAL&&(0,Y.hl)(),T,"unsupported-persistence-type"):xd(m===Jo.NONE||Jn(),T,"unsupported-persistence-type")}(D._delegate,_),_){case Jo.SESSION:V=qi;break;case Jo.LOCAL:V=(yield An(io)._isAvailable())?io:mo;break;case Jo.NONE:V=Ln;break;default:return Ze("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Ks(this._delegate,function Ki(T){return cu.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Ks(this._delegate,eo(this._delegate,_))}signInWithCustomToken(_){return Ks(this._delegate,function bc(T,m){return ku.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,D){return Ks(this._delegate,function Ra(T,m,_){return eo((0,Y.m9)(T),$o.credential(m,_))}(this._delegate,_,D))}signInWithEmailLink(_,D){return Ks(this._delegate,function Zo(T,m,_){return cl.apply(this,arguments)}(this._delegate,_,D))}signInWithPhoneNumber(_,D){return dc(this._delegate,function hn(T,m,_){return tn.apply(this,arguments)}(this._delegate,_,D))}signInWithPopup(_){var D=this;return(0,I.Z)(function*(){return ya(Hc(),D._delegate,"operation-not-supported-in-this-environment"),Ks(D._delegate,function vd(T,m,_){return Pc.apply(this,arguments)}(D._delegate,_,ru))})()}signInWithRedirect(_){var D=this;return(0,I.Z)(function*(){return ya(Hc(),D._delegate,"operation-not-supported-in-this-environment"),yield Il(D._delegate),Lc(D._delegate,_,ru)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function pu(T,m){return ji.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=Jo,T})();function Kc(T,m,_){let D=T;"function"!=typeof T&&({next:D,error:m,complete:_}=T);const V=D;return{next:ye=>V(ye&&ma.getOrCreate(ye)),error:m,complete:_}}function bl(T,m){const _=function Wc(T,m){const _=lf();if(!_)return[];const D=we(cp,T,m);switch(_.getItem(D)){case Jo.NONE:return[Ln];case Jo.LOCAL:return[io,qi];case Jo.SESSION:return[qi];default:return[]}}(T,m);if(typeof self<"u"&&!_.includes(io)&&_.push(io),typeof window<"u")for(const D of[mo,qi])_.includes(D)||_.push(D);return _.includes(Ln)||_.push(Ln),_}class qc{constructor(){this.providerId="phone",this._delegate=new No(dp(X.Z.auth()))}static credential(m,_){return No.credential(m,_)}verifyPhoneNumber(m,_){return this._delegate.verifyPhoneNumber(m,_)}unwrap(){return this._delegate}}qc.PHONE_SIGN_IN_METHOD=No.PHONE_SIGN_IN_METHOD,qc.PROVIDER_ID=No.PROVIDER_ID;const Zc=qe;class hp{constructor(m,_,D=X.Z.app()){var V;Zc(null===(V=D.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new ie(m,_,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function df(T){T.INTERNAL.registerComponent(new Me.wA("auth-compat",m=>{const _=m.getProvider("app-compat").getImmediate(),D=m.getProvider("auth");return new hc(_,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:$o,FacebookAuthProvider:To,GithubAuthProvider:Wi,GoogleAuthProvider:Ho,OAuthProvider:Bs,SAMLAuthProvider:Vs,PhoneAuthProvider:qc,PhoneMultiFactorGenerator:Dd,RecaptchaVerifier:hp,TwitterAuthProvider:Co,Auth:hc,AuthCredential:Ui,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.4.2")}(X.Z)},5861:(Zt,Je,B)=>{function I(Y,de,Ie,Ne,Me,Be,Pe){try{var ae=Y[Be](Pe),he=ae.value}catch(Ae){return void Ie(Ae)}ae.done?de(he):Promise.resolve(he).then(Ne,Me)}function X(Y){return function(){var de=this,Ie=arguments;return new Promise(function(Ne,Me){var Be=Y.apply(de,Ie);function Pe(he){I(Be,Ne,Me,Pe,ae,"next",he)}function ae(he){I(Be,Ne,Me,Pe,ae,"throw",he)}Pe(void 0)})}}B.d(Je,{Z:()=>X})},7582:(Zt,Je,B)=>{function de(Ue,tt){var Qe={};for(var ot in Ue)Object.prototype.hasOwnProperty.call(Ue,ot)&&tt.indexOf(ot)<0&&(Qe[ot]=Ue[ot]);if(null!=Ue&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(ot=Object.getOwnPropertySymbols(Ue);Se<ot.length;Se++)tt.indexOf(ot[Se])<0&&Object.prototype.propertyIsEnumerable.call(Ue,ot[Se])&&(Qe[ot[Se]]=Ue[ot[Se]])}return Qe}function Ae(Ue,tt,Qe,ot){return new(Qe||(Qe=Promise))(function(nt,oe){function ke(Lt){try{pt(ot.next(Lt))}catch(Ht){oe(Ht)}}function yt(Lt){try{pt(ot.throw(Lt))}catch(Ht){oe(Ht)}}function pt(Lt){Lt.done?nt(Lt.value):function Se(nt){return nt instanceof Qe?nt:new Qe(function(oe){oe(nt)})}(Lt.value).then(ke,yt)}pt((ot=ot.apply(Ue,tt||[])).next())})}function fe(Ue){return this instanceof fe?(this.v=Ue,this):new fe(Ue)}function Ze(Ue,tt,Qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,ot=Qe.apply(Ue,tt||[]),nt=[];return Se={},oe("next"),oe("throw"),oe("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function oe(cn){ot[cn]&&(Se[cn]=function(Mn){return new Promise(function(Kt,un){nt.push([cn,Mn,Kt,un])>1||ke(cn,Mn)})})}function ke(cn,Mn){try{!function yt(cn){cn.value instanceof fe?Promise.resolve(cn.value.v).then(pt,Lt):Ht(nt[0][2],cn)}(ot[cn](Mn))}catch(Kt){Ht(nt[0][3],Kt)}}function pt(cn){ke("next",cn)}function Lt(cn){ke("throw",cn)}function Ht(cn,Mn){cn(Mn),nt.shift(),nt.length&&ke(nt[0][0],nt[0][1])}}function st(Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,tt=Ue[Symbol.asyncIterator];return tt?tt.call(Ue):(Ue=function wt(Ue){var tt="function"==typeof Symbol&&Symbol.iterator,Qe=tt&&Ue[tt],ot=0;if(Qe)return Qe.call(Ue);if(Ue&&"number"==typeof Ue.length)return{next:function(){return Ue&&ot>=Ue.length&&(Ue=void 0),{value:Ue&&Ue[ot++],done:!Ue}}};throw new TypeError(tt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ue),Qe={},ot("next"),ot("throw"),ot("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe);function ot(nt){Qe[nt]=Ue[nt]&&function(oe){return new Promise(function(ke,yt){!function Se(nt,oe,ke,yt){Promise.resolve(yt).then(function(pt){nt({value:pt,done:ke})},oe)}(ke,yt,(oe=Ue[nt](oe)).done,oe.value)})}}}B.d(Je,{FC:()=>Ze,KL:()=>st,_T:()=>de,mG:()=>Ae,qq:()=>fe}),"function"==typeof SuppressedError&&SuppressedError}},Zt=>{Zt(Zt.s=2281)}]);