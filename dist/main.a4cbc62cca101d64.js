"use strict";(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{8697:(nn,it,U)=>{U.d(it,{nm:()=>js});var w=U(1966);U(5879),U(3182);var _e=U(5861),et=U(6122),Be=U(4537),gt=U(9058),vt=U(7879);const Xe=new Map,ot={activated:!1,tokenObservers:[]},Ot={initialized:!1,enabled:!1};function Yt(we){return Xe.get(we)||Object.assign({},ot)}function kn(){return Ot}const pr="https://content-firebaseappcheck.googleapis.com/v1",xe="exchangeDebugToken",ge={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class He{constructor(Ce,We,_t,bt,pt){if(this.operation=Ce,this.retryPolicy=We,this.getWaitDuration=_t,this.lowerBound=bt,this.upperBound=pt,this.pending=null,this.nextErrorWaitInterval=bt,bt>pt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ce){var We=this;return(0,_e.Z)(function*(){We.stop();try{We.pending=new gt.BH,yield function rt(we){return new Promise(Ce=>{setTimeout(Ce,we)})}(We.getNextRun(Ce)),We.pending.resolve(),yield We.pending.promise,We.pending=new gt.BH,yield We.operation(),We.pending.resolve(),yield We.pending.promise,We.process(!0).catch(()=>{})}catch(_t){We.retryPolicy(_t)?We.process(!1).catch(()=>{}):We.stop()}})()}getNextRun(Ce){if(Ce)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const We=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),We}}}const ht=new gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Jt(we){if(!Yt(we).activated)throw ht.create("use-before-activation",{appName:we.name})}function Vn(we,Ce){return dn.apply(this,arguments)}function dn(){return(dn=(0,_e.Z)(function*({url:we,body:Ce},We){const _t={"Content-Type":"application/json"},bt=We.getImmediate({optional:!0});if(bt){const Wi=yield bt.getHeartbeatsHeader();Wi&&(_t["X-Firebase-Client"]=Wi)}const pt={method:"POST",body:JSON.stringify(Ce),headers:_t};let Qt,vn;try{Qt=yield fetch(we,pt)}catch(Wi){throw ht.create("fetch-network-error",{originalErrorMessage:Wi?.message})}if(200!==Qt.status)throw ht.create("fetch-status-error",{httpStatus:Qt.status});try{vn=yield Qt.json()}catch(Wi){throw ht.create("fetch-parse-error",{originalErrorMessage:Wi?.message})}const qn=vn.ttl.match(/^([\d.]+)(s)$/);if(!qn||!qn[2]||isNaN(Number(qn[1])))throw ht.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${vn.ttl}`});const Hr=1e3*Number(qn[1]),ai=Date.now();return{token:vn.token,expireTimeMillis:ai+Hr,issuedAtTimeMillis:ai}})).apply(this,arguments)}function fn(we,Ce){const{projectId:We,appId:_t,apiKey:bt}=we.options;return{url:`${pr}/projects/${We}/apps/${_t}:${xe}?key=${bt}`,body:{debug_token:Ce}}}const Sn="firebase-app-check-database",jn=1,or="firebase-app-check-store";let ji=null;function cr(){return(cr=(0,_e.Z)(function*(we,Ce){const _t=(yield function Kr(){return ji||(ji=new Promise((we,Ce)=>{try{const We=indexedDB.open(Sn,jn);We.onsuccess=_t=>{we(_t.target.result)},We.onerror=_t=>{var bt;Ce(ht.create("storage-open",{originalErrorMessage:null===(bt=_t.target.error)||void 0===bt?void 0:bt.message}))},We.onupgradeneeded=_t=>{0===_t.oldVersion&&_t.target.result.createObjectStore(or,{keyPath:"compositeKey"})}}catch(We){Ce(ht.create("storage-open",{originalErrorMessage:We?.message}))}}),ji)}()).transaction(or,"readwrite"),pt=_t.objectStore(or).put({compositeKey:we,value:Ce});return new Promise((Qt,vn)=>{pt.onsuccess=qn=>{Qt()},_t.onerror=qn=>{var Hr;vn(ht.create("storage-set",{originalErrorMessage:null===(Hr=qn.target.error)||void 0===Hr?void 0:Hr.message}))}})})).apply(this,arguments)}const Sr=new vt.Yd("@firebase/app-check");function Fr(we,Ce){return(0,gt.hl)()?function yi(we,Ce){return function An(we,Ce){return cr.apply(this,arguments)}(function Yn(we){return`${we.options.appId}-${we.name}`}(we),Ce)}(we,Ce).catch(We=>{Sr.warn(`Failed to write token to IndexedDB. Error: ${We}`)}):Promise.resolve()}function zi(){return kn().enabled}function vi(){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,_e.Z)(function*(){const we=kn();if(we.enabled&&we.token)return we.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Dn={error:"UNKNOWN_ERROR"};function Br(we){return gt.US.encodeString(JSON.stringify(we),!1)}function nr(we){return vr.apply(this,arguments)}function vr(){return(vr=(0,_e.Z)(function*(we,Ce=!1){const We=we.app;Jt(We);const _t=Yt(We);let pt,bt=_t.token;if(bt&&!le(bt)&&(_t.token=void 0,bt=void 0),!bt){const qn=yield _t.cachedTokenPromise;qn&&(le(qn)?bt=qn:yield Fr(We,void 0))}if(!Ce&&bt&&le(bt))return{token:bt.token};let vn,Qt=!1;if(zi()){_t.exchangeTokenPromise||(_t.exchangeTokenPromise=Vn(fn(We,yield vi()),we.heartbeatServiceProvider).finally(()=>{_t.exchangeTokenPromise=void 0}),Qt=!0);const qn=yield _t.exchangeTokenPromise;return yield Fr(We,qn),_t.token=qn,{token:qn.token}}try{_t.exchangeTokenPromise||(_t.exchangeTokenPromise=_t.provider.getToken().finally(()=>{_t.exchangeTokenPromise=void 0}),Qt=!0),bt=yield Yt(We).exchangeTokenPromise}catch(qn){"appCheck/throttled"===qn.code?Sr.warn(qn.message):Sr.error(qn),pt=qn}return bt?pt?vn=le(bt)?{token:bt.token,internalError:pt}:Ze(pt):(vn={token:bt.token},_t.token=bt,yield Fr(We,bt)):vn=Ze(pt),Qt&&function ie(we,Ce){const We=Yt(we).tokenObservers;for(const _t of We)try{"EXTERNAL"===_t.type&&null!=Ce.error?_t.error(Ce.error):_t.next(Ce)}catch{}}(We,vn),vn})).apply(this,arguments)}function Hn(we){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,_e.Z)(function*(we){const Ce=we.app;Jt(Ce);const{provider:We}=Yt(Ce);if(zi()){const _t=yield vi(),{token:bt}=yield Vn(fn(Ce,_t),we.heartbeatServiceProvider);return{token:bt}}{const{token:_t}=yield We.getToken();return{token:_t}}})).apply(this,arguments)}function Oe(we,Ce){const We=Yt(we),_t=We.tokenObservers.filter(bt=>bt.next!==Ce);0===_t.length&&We.tokenRefresher&&We.tokenRefresher.isRunning()&&We.tokenRefresher.stop(),We.tokenObservers=_t}function re(we){const{app:Ce}=we,We=Yt(Ce);let _t=We.tokenRefresher;_t||(_t=function ae(we){const{app:Ce}=we;return new He((0,_e.Z)(function*(){let _t;if(_t=Yt(Ce).token?yield nr(we,!0):yield nr(we),_t.error)throw _t.error;if(_t.internalError)throw _t.internalError}),()=>!0,()=>{const We=Yt(Ce);if(We.token){let _t=We.token.issuedAtTimeMillis+.5*(We.token.expireTimeMillis-We.token.issuedAtTimeMillis)+3e5;return _t=Math.min(_t,We.token.expireTimeMillis-3e5),Math.max(0,_t-Date.now())}return 0},ge.RETRIAL_MIN_WAIT,ge.RETRIAL_MAX_WAIT)}(we),We.tokenRefresher=_t),!_t.isRunning()&&We.isTokenAutoRefreshEnabled&&_t.start()}function le(we){return we.expireTimeMillis-Date.now()>0}function Ze(we){return{token:Br(Dn),error:we}}class Dt{constructor(Ce,We){this.app=Ce,this.heartbeatServiceProvider=We}_delete(){const{tokenObservers:Ce}=Yt(this.app);for(const We of Ce)Oe(this.app,We.next);return Promise.resolve()}}const Mr="app-check-internal";!function Bs(){(0,et._registerComponent)(new Be.wA("app-check",we=>function qt(we,Ce){return new Dt(we,Ce)}(we.getProvider("app").getImmediate(),we.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((we,Ce,We)=>{we.getProvider(Mr).initialize()})),(0,et._registerComponent)(new Be.wA(Mr,we=>function Pn(we){return{getToken:Ce=>nr(we,Ce),getLimitedUseToken:()=>Hn(we),addTokenListener:Ce=>function Qn(we,Ce,We,_t){const{app:bt}=we,pt=Yt(bt);if(pt.tokenObservers=[...pt.tokenObservers,{next:We,error:_t,type:Ce}],pt.token&&le(pt.token)){const vn=pt.token;Promise.resolve().then(()=>{We({token:vn.token}),re(we)}).catch(()=>{})}pt.cachedTokenPromise.then(()=>re(we))}(we,"INTERNAL",Ce),removeTokenListener:Ce=>Oe(we.app,Ce)}}(we.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,et.registerVersion)("@firebase/app-check","0.8.0")}();class js{constructor(){return(0,w.vb)("app-check")}}typeof window<"u"&&window},7046:(nn,it,U)=>{U.d(it,{zQ:()=>Yt,ww:()=>Cn,rT:()=>vt,f7:()=>ot,L6:()=>Be,_Q:()=>gt,lh:()=>Xe,Qv:()=>et,nw:()=>Ot});var w=U(5879),ne=U(8645),S=U(2096),fe=U(5592),Pe=U(2459),Ge=U(3019),Ve=U(3093),Ke=U(4664),$e=U(7398),pe=U(940),ye=U(1374),Re=U(4674);function It(kn,pr){return(0,Re.m)(pr)?(0,Ke.w)(()=>kn,pr):(0,Ke.w)(()=>kn)}var yt=U(5137),$t=U(2181),Tt=U(1966),Vt=U(6304),xt=U(6814),ze=U(8697),Lt=U(7142);const et=new w.OlP("angularfire2.auth.use-emulator"),Be=new w.OlP("angularfire2.auth.settings"),gt=new w.OlP("angularfire2.auth.tenant-id"),vt=new w.OlP("angularfire2.auth.langugage-code"),Xe=new w.OlP("angularfire2.auth.use-device-language"),ot=new w.OlP("angularfire.auth.persistence"),Ot=(kn,pr,Nt,Jn,xe,ge,Le,He)=>(0,Vt.cc)(`${kn.name}.auth`,"AngularFireAuth",kn.name,()=>{const rt=pr.runOutsideAngular(()=>kn.auth());if(Nt&&rt.useEmulator(...Nt),Jn&&(rt.tenantId=Jn),rt.languageCode=xe,ge&&rt.useDeviceLanguage(),Le)for(const[mt,ht]of Object.entries(Le))rt.settings[mt]=ht;return He&&rt.setPersistence(He),rt},[Nt,Jn,xe,ge,Le,He]);let Yt=(()=>{class kn{constructor(Nt,Jn,xe,ge,Le,He,rt,mt,ht,jt,Jt,Nn){const pn=new ne.x,Vn=(0,S.of)(void 0).pipe((0,Ve.Q)(Le.outsideAngular),(0,Ke.w)(()=>ge.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5967)))),(0,$e.U)(()=>(0,Vt.on)(Nt,ge,Jn)),(0,$e.U)(dn=>Ot(dn,ge,He,mt,ht,jt,rt,Jt)),(0,pe.d)({bufferSize:1,refCount:!1}));if((0,xt.PM)(xe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,S.of)(null);else{Vn.pipe((0,ye.P)()).subscribe();const Bn=Vn.pipe((0,Ke.w)(Sn=>Sn.getRedirectResult().then(jn=>jn,()=>null)),Tt.iC,(0,pe.d)({bufferSize:1,refCount:!1})),ur=Vn.pipe((0,Ke.w)(Sn=>new fe.y(jn=>({unsubscribe:ge.runOutsideAngular(()=>Sn.onAuthStateChanged(or=>jn.next(or),or=>jn.error(or),()=>jn.complete()))})))),fn=Vn.pipe((0,Ke.w)(Sn=>new fe.y(jn=>({unsubscribe:ge.runOutsideAngular(()=>Sn.onIdTokenChanged(or=>jn.next(or),or=>jn.error(or),()=>jn.complete()))}))));this.authState=Bn.pipe(It(ur),(0,yt.R)(Le.outsideAngular),(0,Ve.Q)(Le.insideAngular)),this.user=Bn.pipe(It(fn),(0,yt.R)(Le.outsideAngular),(0,Ve.Q)(Le.insideAngular)),this.idToken=this.user.pipe((0,Ke.w)(Sn=>Sn?(0,Pe.D)(Sn.getIdToken()):(0,S.of)(null))),this.idTokenResult=this.user.pipe((0,Ke.w)(Sn=>Sn?(0,Pe.D)(Sn.getIdTokenResult()):(0,S.of)(null))),this.credential=(0,Ge.T)(Bn,pn,this.authState.pipe((0,$t.h)(Sn=>!Sn))).pipe((0,$e.U)(Sn=>Sn?.user?Sn:null),(0,yt.R)(Le.outsideAngular),(0,Ve.Q)(Le.insideAngular))}return(0,Vt.pX)(this,Vn,ge,{spy:{apply:(dn,Bn,ur)=>{(dn.startsWith("signIn")||dn.startsWith("createUser"))&&ur.then(fn=>pn.next(fn))}}})}}return kn.\u0275fac=function(Nt){return new(Nt||kn)(w.LFG(Vt.Dh),w.LFG(Vt.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Tt.HU),w.LFG(et,8),w.LFG(Be,8),w.LFG(gt,8),w.LFG(vt,8),w.LFG(Xe,8),w.LFG(ot,8),w.LFG(ze.nm,8))},kn.\u0275prov=w.Yz7({token:kn,factory:kn.\u0275fac,providedIn:"any"}),kn})(),Cn=(()=>{class kn{constructor(){Lt.Z.registerVersion("angularfire",Tt.q4.full,"auth-compat")}}return kn.\u0275fac=function(Nt){return new(Nt||kn)},kn.\u0275mod=w.oAB({type:kn}),kn.\u0275inj=w.cJS({providers:[Yt]}),kn})()},8330:(nn,it,U)=>{U.d(it,{ST:()=>CE,yb:()=>KE});var w=U(5879),ne=U(6321),S=U(5592),fe=U(2459),Pe=U(2096),Ge=U(1966),Ve=U(7921),Ke=U(9360),$e=U(8251);function pe(){return(0,Ke.e)((i,e)=>{let t,a=!1;i.subscribe((0,$e.x)(e,d=>{const p=t;t=d,a&&e.next([p,d]),a=!0}))})}var Xe,ye=U(7398),Re=U(6699),It=U(3997),yt=U(2181),$t=U(6304),Tt=U(6814),xt=(U(5967),U(3106)),ze=U(5861),Lt=U(6122),_e=U(4537),et=U(7879),Be=U(9058),gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vt={},ot=ot||{},Ot=gt||self;function Yt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Cn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var pr="closure_uid_"+(1e9*Math.random()>>>0),Nt=0;function Jn(i,e,t){return i.call.apply(i.bind,arguments)}function xe(i,e,t){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,a),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function ge(i,e,t){return(ge=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jn:xe).apply(null,arguments)}function Le(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function He(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(a,d,p){for(var v=Array(arguments.length-2),N=2;N<arguments.length;N++)v[N-2]=arguments[N];return e.prototype[d].apply(a,v)}}function rt(){this.s=this.s,this.o=this.o}rt.prototype.s=!1,rt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function kn(i){Object.prototype.hasOwnProperty.call(i,pr)&&i[pr]||(i[pr]=++Nt)}(this)},rt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ht=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function jt(i){const e=i.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=i[a];return t}return[]}function Jt(i,e){for(let t=1;t<arguments.length;t++){const a=arguments[t];if(Yt(a)){const d=i.length||0,p=a.length||0;i.length=d+p;for(let v=0;v<p;v++)i[d+v]=a[v]}else i.push(a)}}function Nn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Nn.prototype.h=function(){this.defaultPrevented=!0};var pn=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Ot.addEventListener("test",()=>{},e),Ot.removeEventListener("test",()=>{},e)}catch{}return i}();function Vn(i){return/^[\s\xa0]*$/.test(i)}function dn(){var i=Ot.navigator;return i&&(i=i.userAgent)?i:""}function Bn(i){return-1!=dn().indexOf(i)}function ur(i){return ur[" "](i),i}ur[" "]=function(){};var yi,i,Sn=Bn("Opera"),jn=Bn("Trident")||Bn("MSIE"),or=Bn("Edge"),ws=or||jn,ji=Bn("Gecko")&&!(-1!=dn().toLowerCase().indexOf("webkit")&&!Bn("Edge"))&&!(Bn("Trident")||Bn("MSIE"))&&!Bn("Edge"),Kr=-1!=dn().toLowerCase().indexOf("webkit")&&!Bn("Edge");function Ai(){var i=Ot.document;return i?i.documentMode:void 0}e:{var gn="",zn=(i=dn(),ji?/rv:([^\);]+)(\)|;)/.exec(i):or?/Edge\/([\d\.]+)/.exec(i):jn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Kr?/WebKit\/(\S+)/.exec(i):Sn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(zn&&(gn=zn?zn[1]:""),jn){var An=Ai();if(null!=An&&An>parseFloat(gn)){yi=String(An);break e}}yi=gn}var _i=Ot.document&&jn&&(Ai()||parseInt(yi,10))||void 0;function Yn(i,e){if(Nn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(ji){e:{try{ur(e.nodeName);var d=!0;break e}catch{}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Sr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Yn.$.h.call(this)}}He(Yn,Nn);var Sr={2:"touch",3:"pen",4:"mouse"};Yn.prototype.h=function(){Yn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Yi="closure_listenable_"+(1e6*Math.random()|0),rr=0;function Fr(i,e,t,a,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.la=d,this.key=++rr,this.fa=this.ia=!1}function an(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Ar(i,e,t){for(const a in i)e.call(t,i[a],a,i)}function vi(i){const e={};for(const t in i)e[t]=i[t];return e}const Ei="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vr(i,e){let t,a;for(let d=1;d<arguments.length;d++){for(t in a=arguments[d],a)i[t]=a[t];for(let p=0;p<Ei.length;p++)t=Ei[p],Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t])}}function Dn(i){this.src=i,this.g={},this.h=0}function Br(i,e){var t=e.type;if(t in i.g){var p,a=i.g[t],d=ht(a,e);(p=0<=d)&&Array.prototype.splice.call(a,d,1),p&&(an(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function nr(i,e,t,a){for(var d=0;d<i.length;++d){var p=i[d];if(!p.fa&&p.listener==e&&p.capture==!!t&&p.la==a)return d}return-1}Dn.prototype.add=function(i,e,t,a,d){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var v=nr(i,e,a,d);return-1<v?(e=i[v],t||(e.ia=!1)):((e=new Fr(e,this.src,p,!!a,d)).ia=t,i.push(e)),e};var vr="closure_lm_"+(1e6*Math.random()|0),Hn={};function Qr(i,e,t,a,d){if(a&&a.once)return re(i,e,t,a,d);if(Array.isArray(e)){for(var p=0;p<e.length;p++)Qr(i,e[p],t,a,d);return null}return t=Pn(t),i&&i[Yi]?i.O(e,t,Cn(a)?!!a.capture:!!a,d):Qn(i,e,t,!1,a,d)}function Qn(i,e,t,a,d,p){if(!e)throw Error("Invalid event type");var v=Cn(d)?!!d.capture:!!d,N=Dt(i);if(N||(i[vr]=N=new Dn(i)),(t=N.add(e,t,a,v,p)).proxy)return t;if(a=function Oe(){const e=Ze;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=a,a.src=i,a.listener=t,i.addEventListener)pn||(d=v),void 0===d&&(d=!1),i.addEventListener(e.toString(),a,d);else if(i.attachEvent)i.attachEvent(le(e.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return t}function re(i,e,t,a,d){if(Array.isArray(e)){for(var p=0;p<e.length;p++)re(i,e[p],t,a,d);return null}return t=Pn(t),i&&i[Yi]?i.P(e,t,Cn(a)?!!a.capture:!!a,d):Qn(i,e,t,!0,a,d)}function ae(i,e,t,a,d){if(Array.isArray(e))for(var p=0;p<e.length;p++)ae(i,e[p],t,a,d);else a=Cn(a)?!!a.capture:!!a,t=Pn(t),i&&i[Yi]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=nr(p=i.g[e],t,a,d))&&(an(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=Dt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=nr(e,t,a,d)),(t=-1<i?e[i]:null)&&ie(t))}function ie(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Yi])Br(e.i,i);else{var t=i.type,a=i.proxy;e.removeEventListener?e.removeEventListener(t,a,i.capture):e.detachEvent?e.detachEvent(le(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=Dt(e))?(Br(t,i),0==t.h&&(t.src=null,e[vr]=null)):an(i)}}}function le(i){return i in Hn?Hn[i]:Hn[i]="on"+i}function Ze(i,e){if(i.fa)i=!0;else{e=new Yn(e,this);var t=i.listener,a=i.la||i.src;i.ia&&ie(i),i=t.call(a,e)}return i}function Dt(i){return(i=i[vr])instanceof Dn?i:null}var qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pn(i){return"function"==typeof i?i:(i[qt]||(i[qt]=function(e){return i.handleEvent(e)}),i[qt])}function hn(){rt.call(this),this.i=new Dn(this),this.S=this,this.J=null}function Ut(i,e){var t,a=i.J;if(a)for(t=[];a;a=a.J)t.push(a);if(i=i.S,a=e.type||e,"string"==typeof e)e=new Nn(e,i);else if(e instanceof Nn)e.target=e.target||i;else{var d=e;Vr(e=new Nn(a,i),d)}if(d=!0,t)for(var p=t.length-1;0<=p;p--){var v=e.g=t[p];d=Ln(v,a,!0,e)&&d}if(d=Ln(v=e.g=i,a,!0,e)&&d,d=Ln(v,a,!1,e)&&d,t)for(p=0;p<t.length;p++)d=Ln(v=e.g=t[p],a,!1,e)&&d}function Ln(i,e,t,a){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,p=0;p<e.length;++p){var v=e[p];if(v&&!v.fa&&v.capture==t){var N=v.listener,j=v.la||v.src;v.ia&&Br(i.i,v),d=!1!==N.call(j,a)&&d}}return d&&!a.defaultPrevented}He(hn,rt),hn.prototype[Yi]=!0,hn.prototype.removeEventListener=function(i,e,t,a){ae(this,i,e,t,a)},hn.prototype.N=function(){if(hn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],a=0;a<t.length;a++)an(t[a]);delete i.g[e],i.h--}}this.J=null},hn.prototype.O=function(i,e,t,a){return this.i.add(String(i),e,!1,t,a)},hn.prototype.P=function(i,e,t,a){return this.i.add(String(i),e,!0,t,a)};var kr=Ot.JSON.stringify;function Fe(){var i=Mn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Te=new class Je{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ne,i=>i.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ye(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function Et(i){Ot.setTimeout(()=>{throw i},0)}let ln,Zt=!1,Mn=new class je{constructor(){this.h=this.g=null}add(e,t){const a=Te.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}},gr=()=>{const i=Ot.Promise.resolve(void 0);ln=()=>{i.then(dr)}};var dr=()=>{for(var i;i=Fe();){try{i.h.call(i.g)}catch(t){Et(t)}var e=Te;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Zt=!1};function jr(i,e){hn.call(this),this.h=i||1,this.g=e||Ot,this.j=ge(this.qb,this),this.l=Date.now()}function Hi(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function es(i,e,t){if("function"==typeof i)t&&(i=ge(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=ge(i.handleEvent,i)}return 2147483647<Number(e)?-1:Ot.setTimeout(i,e||0)}function wr(i){i.g=es(()=>{i.g=null,i.i&&(i.i=!1,wr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}He(jr,hn),(Xe=jr.prototype).ga=!1,Xe.T=null,Xe.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ut(this,"tick"),this.ga&&(Hi(this),this.start()))}},Xe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.N=function(){jr.$.N.call(this),Hi(this),delete this.g};class Cr extends rt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wr(this)}N(){super.N(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(i){rt.call(this),this.h=i,this.g={}}He(ts,rt);var wi=[];function Mi(i,e,t,a){Array.isArray(t)||(t&&(wi[0]=t.toString()),t=wi);for(var d=0;d<t.length;d++){var p=Qr(e,t[d],a||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function ls(i){Ar(i.g,function(e,t){this.g.hasOwnProperty(t)&&ie(e)},i),i.g={}}function so(){this.g=!0}function gs(i,e,t,a){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function js(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var a=t[i];if(!(2>a.length)){var d=a[1];if(Array.isArray(d)&&!(1>d.length)){var p=d[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var v=1;v<d.length;v++)d[v]=""}}}return kr(t)}catch{return e}}(i,t)+(a?" "+a:"")})}ts.prototype.N=function(){ts.$.N.call(this),ls(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},so.prototype.Ea=function(){this.g=!1},so.prototype.info=function(){};var Ci={},xs=null;function Os(){return xs=xs||new hn}function Co(i){Nn.call(this,Ci.Ta,i)}function Fi(i){const e=Os();Ut(e,new Co(e))}function aa(i,e){Nn.call(this,Ci.STAT_EVENT,i),this.stat=e}function Ii(i){const e=Os();Ut(e,new aa(e,i))}function ee(i,e){Nn.call(this,Ci.Ua,i),this.size=e}function he(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){i()},e)}Ci.Ta="serverreachability",He(Co,Nn),Ci.STAT_EVENT="statevent",He(aa,Nn),Ci.Ua="timingevent",He(ee,Nn);var se={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ie={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ct(){}function Rt(){}ct.prototype.h=null;var We,zt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function we(){Nn.call(this,"d")}function Ce(){Nn.call(this,"c")}function _t(){}function bt(i,e,t,a){this.l=i,this.j=e,this.m=t,this.W=a||1,this.U=new ts(this),this.P=Qt,this.V=new jr(i=ws?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}He(we,Nn),He(Ce,Nn),He(_t,ct),_t.prototype.g=function(){return new XMLHttpRequest},_t.prototype.i=function(){return{}},We=new _t;var Qt=45e3,vn={},qn={};function Hr(i,e,t){i.L=1,i.v=bo(Lr(e)),i.s=t,i.S=!0,ai(i,null)}function ai(i,e){i.G=Date.now(),cs(i),i.A=Lr(i.v);var t=i.A,a=i.W;Array.isArray(a)||(a=[String(a)]),is(t.i,"t",a),i.C=0,t=i.l.J,i.h=new pt,i.g=nu(i.l,t?e:null,!i.s),0<i.O&&(i.M=new Cr(ge(i.Pa,i,i.g),i.O)),Mi(i.U,i.g,"readystatechange",i.nb),e=i.I?vi(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Fi(),function Mr(i,e,t,a,d,p){i.info(function(){if(i.g)if(p)for(var v="",N=p.split("&"),j=0;j<N.length;j++){var q=N[j].split("=");if(1<q.length){var ue=q[0];q=q[1];var ke=ue.split("_");v=2<=ke.length&&"type"==ke[1]?v+(ue+"=")+q+"&":v+(ue+"=redacted&")}}else v=null;else v=p;return"XMLHTTP REQ ("+a+") [attempt "+d+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Wi(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function ui(i,e,t){let d,a=!0;for(;!i.J&&i.C<t.length;){if(d=Qi(i,t),d==qn){4==e&&(i.o=4,Ii(14),a=!1),gs(i.j,i.m,null,"[Incomplete Response]");break}if(d==vn){i.o=4,Ii(15),gs(i.j,i.m,t,"[Invalid Chunk]"),a=!1;break}gs(i.j,i.m,d,null),li(i,d)}Wi(i)&&d!=qn&&d!=vn&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ii(16),a=!1),i.i=i.i&&a,a?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Eu(e),e.M=!0,Ii(11))):(gs(i.j,i.m,t,"[Invalid Chunked Response]"),ds(i),Hs(i))}function Qi(i,e){var t=i.C,a=e.indexOf("\n",t);return-1==a?qn:(t=Number(e.substring(t,a)),isNaN(t)?vn:(a+=1)+t>e.length?qn:(e=e.slice(a,a+t),i.C=a+t,e))}function cs(i){i.Y=Date.now()+i.P,er(i,i.P)}function er(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=he(ge(i.lb,i),e)}function ms(i){i.B&&(Ot.clearTimeout(i.B),i.B=null)}function Hs(i){0==i.l.H||i.J||Ri(i.l,i)}function ds(i){ms(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Hi(i.V),ls(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function li(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||Hu(t.i,i)))if(!i.K&&Hu(t.i,i)&&3==t.H){try{var a=t.Ja.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var d=a;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;wu(t),Fo(t)}Gu(t),Ii(18)}}else t.Fa=d[1],0<t.Fa-t.V&&37500>d[2]&&t.G&&0==t.A&&!t.v&&(t.v=he(ge(t.ib,t),6e3));if(1>=ju(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else eo(t,11)}else if((i.K||t.g==i)&&wu(t),!Vn(e))for(d=t.Ja.g.parse(e),e=0;e<d.length;e++){let q=d[e];if(t.V=q[0],q=q[1],2==t.H)if("c"==q[0]){t.K=q[1],t.pa=q[2];const ue=q[3];null!=ue&&(t.ra=ue,t.l.info("VER="+t.ra));const ke=q[4];null!=ke&&(t.Ga=ke,t.l.info("SVER="+t.Ga));const dt=q[5];null!=dt&&"number"==typeof dt&&0<dt&&(t.L=a=1.5*dt,t.l.info("backChannelRequestTimeoutMs_="+a)),a=t;const Mt=i.g;if(Mt){const rn=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rn){var p=a.i;p.g||-1==rn.indexOf("spdy")&&-1==rn.indexOf("quic")&&-1==rn.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(va(p,p.h),p.h=null))}if(a.F){const bn=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;bn&&(a.Da=bn,pi(a.I,a.F,bn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var v=i;if((a=t).wa=Ac(a,a.J?a.pa:null,a.Y),v.K){Oa(a.i,v);var N=v,j=a.L;j&&N.setTimeout(j),N.B&&(ms(N),cs(N)),a.g=v}else gl(a);0<t.j.length&&ka(t)}else"stop"!=q[0]&&"close"!=q[0]||eo(t,7);else 3==t.H&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?eo(t,7):di(t):"noop"!=q[0]&&t.h&&t.h.Aa(q),t.A=0)}Fi()}catch{}}function ys(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Yt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ua(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Yt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const a in i)e[t++]=a;return e}}}(i),a=function Po(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Yt(i)){for(var e=[],t=i.length,a=0;a<t;a++)e.push(i[a]);return e}for(a in e=[],t=0,i)e[t++]=i[a];return e}(i),d=a.length,p=0;p<d;p++)e.call(void 0,a[p],t&&t[p],i)}(Xe=bt.prototype).setTimeout=function(i){this.P=i},Xe.nb=function(i){i=i.target;const e=this.M;e&&3==K(i)?e.l():this.Pa(i)},Xe.Pa=function(i){try{if(i==this.g)e:{const ue=K(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ue)&&(3!=ue||ws||this.g&&(this.h.h||this.g.ja()||L(this.g)))){this.J||4!=ue||7==e||Fi(),ms(this);var t=this.g.da();this.ca=t;t:if(Wi(this)){var a=L(this.g);i="";var d=a.length,p=4==K(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ds(this),Hs(this);var v="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(a[e],{stream:p&&e==d-1});a.splice(0,d),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ja();if(this.i=200==t,function Bs(i,e,t,a,d,p,v){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+p+" "+v})}(this.j,this.u,this.A,this.m,this.W,ue,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var N,j=this.g;if((N=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vn(N)){var q=N;break t}}q=null}if(!(t=q)){this.i=!1,this.o=3,Ii(12),ds(this),Hs(this);break e}gs(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,li(this,t)}this.S?(ui(this,ue,v),ws&&this.i&&3==ue&&(Mi(this.U,this.V,"tick",this.mb),this.V.start())):(gs(this.j,this.m,v,null),li(this,v)),4==ue&&ds(this),this.i&&!this.J&&(4==ue?Ri(this.l,this):(this.i=!1,cs(this)))}else(function Q(i){const e={};i=(i.g&&2<=K(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let a=0;a<i.length;a++){if(Vn(i[a]))continue;var t=Ye(i[a]);const d=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const p=e[d]||[];e[d]=p,p.push(t)}!function zi(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(a){return a.join(", ")})})(this.g),400==t&&0<v.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),ds(this),Hs(this)}}}catch{}},Xe.mb=function(){if(this.g){var i=K(this.g),e=this.g.ja();this.C<e.length&&(ms(this),ui(this,i,e),this.i&&4!=i&&cs(this))}},Xe.cancel=function(){this.J=!0,ds(this)},Xe.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Xs(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Fi(),Ii(17)),ds(this),this.o=2,Hs(this)):er(this,this.Y-i)};var xo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bi(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof bi){this.h=i.h,Io(this,i.j),this.s=i.s,this.g=i.g,oo(this,i.m),this.l=i.l;var e=i.i,t=new Is;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),mr(this,t),this.o=i.o}else i&&(e=String(i).match(xo))?(this.h=!1,Io(this,e[1]||"",!0),this.s=Cs(e[2]||""),this.g=Cs(e[3]||"",!0),oo(this,e[4]),this.l=Cs(e[5]||"",!0),mr(this,e[6]||"",!0),this.o=Cs(e[7]||"")):(this.h=!1,this.i=new Is(null,this.h))}function Lr(i){return new bi(i)}function Io(i,e,t){i.j=t?Cs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function oo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function mr(i,e,t){e instanceof Is?(i.i=e,function ca(i,e){e&&!i.j&&(bs(i),i.i=null,i.g.forEach(function(t,a){var d=a.toLowerCase();a!=d&&(ao(this,a),is(this,d,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Vi(e,So)),i.i=new Is(e,i.h))}function pi(i,e,t){i.i.set(e,t)}function bo(i){return pi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Cs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Vi(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ns),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ns(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}bi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Vi(e,Do,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Vi(e,Do,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Vi(t,"/"==t.charAt(0)?rs:To,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Vi(t,Di)),i.join("")};var Do=/[#\/\?@]/g,To=/[#\?:]/g,rs=/[#\?]/g,So=/[#\?@]/g,Di=/#/g;function Is(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function bs(i){i.g||(i.g=new Map,i.h=0,i.i&&function Rs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var a=i[t].indexOf("="),d=null;if(0<=a){var p=i[t].substring(0,a);d=i[t].substring(a+1)}else p=i[t];e(p,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ao(i,e){bs(i),e=$i(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function la(i,e){return bs(i),e=$i(i,e),i.g.has(e)}function is(i,e,t){ao(i,e),0<t.length&&(i.i=null,i.g.set($i(i,e),jt(t)),i.h+=t.length)}function $i(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function _a(i){this.l=i||Oo,i=Ot.PerformanceNavigationTiming?0<(i=Ot.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ka&&Ot.g.Ka()&&Ot.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=Is.prototype).add=function(i,e){bs(this),this.i=null,i=$i(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(i,e){bs(this),this.g.forEach(function(t,a){t.forEach(function(d){i.call(e,d,a,this)},this)},this)},Xe.ta=function(){bs(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let a=0;a<e.length;a++){const d=i[a];for(let p=0;p<d.length;p++)t.push(e[a])}return t},Xe.Z=function(i){bs(this);let e=[];if("string"==typeof i)la(this,i)&&(e=e.concat(this.g.get($i(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Xe.set=function(i,e){return bs(this),this.i=null,la(this,i=$i(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Xe.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var a=e[t];const p=encodeURIComponent(String(a)),v=this.Z(a);for(a=0;a<v.length;a++){var d=p;""!==v[a]&&(d+="="+encodeURIComponent(String(v[a]))),i.push(d)}}return this.i=i.join("&")};var Oo=10;function gu(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ju(i){return i.h?1:i.g?i.g.size:0}function Hu(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function va(i,e){i.g?i.g.add(e):i.h=e}function Oa(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function mu(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return jt(i.i)}_a.prototype.cancel=function(){if(this.i=mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var yu=class{stringify(i){return Ot.JSON.stringify(i,void 0)}parse(i){return Ot.JSON.parse(i,void 0)}};function Ns(){this.g=new yu}function ko(i,e,t){const a=t||"";try{ys(i,function(d,p){let v=d;Cn(d)&&(v=kr(d)),e.push(a+p+"="+encodeURIComponent(v))})}catch(d){throw e.push(a+"type="+encodeURIComponent("_badmap")),d}}function Ja(i,e,t,a,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(a)}catch{}}function uo(i){this.l=i.fc||null,this.j=i.ob||!1}function lo(i,e){hn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}He(uo,ct),uo.prototype.g=function(){return new lo(this.l,this.j)},uo.prototype.i=function(i){return function(){return i}}({}),He(lo,hn);var da=0;function vu(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function zo(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ci(i)}function ci(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Xe=lo.prototype).open=function(i,e){if(this.readyState!=da)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ci(this)},Xe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Ot).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zo(this)),this.readyState=da},Xe.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ot.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vu(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},Xe.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?zo(this):ci(this),3==this.readyState&&vu(this)}},Xe.Za=function(i){this.g&&(this.response=this.responseText=i,zo(this))},Xe.Ya=function(i){this.g&&(this.response=i,zo(this))},Xe.ka=function(){this.g&&zo(this)},Xe.setRequestHeader=function(i,e){this.v.append(i,e)},Xe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(lo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var $u=Ot.JSON.parse;function ar(i){hn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eu,this.L=this.M=!1}He(ar,hn);var eu="",pl=/^https?$/i,tu=["POST","PUT"];function Lo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,qo(i),Js(i)}function qo(i){i.F||(i.F=!0,Ut(i,"complete"),Ut(i,"error"))}function Ko(i){if(i.h&&typeof ot<"u"&&(!i.C[1]||4!=K(i)||2!=i.da()))if(i.v&&4==K(i))es(i.La,0,i);else if(Ut(i,"readystatechange"),4==K(i)){i.h=!1;try{const v=i.da();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===v){var d=String(i.I).match(xo)[1]||null;!d&&Ot.self&&Ot.self.location&&(d=Ot.self.location.protocol.slice(0,-1)),a=!pl.test(d?d.toLowerCase():"")}t=a}if(t)Ut(i,"complete"),Ut(i,"success");else{i.m=6;try{var p=2<K(i)?i.g.statusText:""}catch{p=""}i.j=p+" ["+i.da()+"]",qo(i)}}finally{Js(i)}}}function Js(i,e){if(i.g){H(i);const t=i.g,a=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Ut(i,"ready");try{t.onreadystatechange=a}catch{}}}function H(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Ot.clearTimeout(i.A),i.A=null)}function K(i){return i.g?i.g.readyState:0}function L(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case eu:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Me(i){let e="";return Ar(i,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}function cn(i,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=Me(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):pi(i,e,t))}function Fn(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function os(i){this.Ga=0,this.j=[],this.l=new so,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fn("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fn("baseRetryDelayMs",5e3,i),this.hb=Fn("retryDelaySeedMs",1e4,i),this.eb=Fn("forwardChannelMaxRetries",2,i),this.xa=Fn("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new _a(i&&i.concurrentRequestLimit),this.Ja=new Ns,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function di(i){if(Xi(i),3==i.H){var e=i.W++,t=Lr(i.I);if(pi(t,"SID",i.K),pi(t,"RID",e),pi(t,"TYPE","terminate"),me(i,t),(e=new bt(i,i.l,e)).L=2,e.v=bo(Lr(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon)try{t=Ot.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=nu(e.l,null),e.g.ha(e.v)),e.G=Date.now(),cs(e)}Ea(i)}function Fo(i){i.g&&(Eu(i),i.g.cancel(),i.g=null)}function Xi(i){Fo(i),i.u&&(Ot.clearTimeout(i.u),i.u=null),wu(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Ot.clearTimeout(i.m),i.m=null)}function ka(i){if(!gu(i.i)&&!i.m){i.m=!0;var e=i.Na;ln||gr(),Zt||(ln(),Zt=!0),Mn.add(e,i),i.C=0}}function Yo(i,e){var t;t=e?e.m:i.W++;const a=Lr(i.I);pi(a,"SID",i.K),pi(a,"RID",t),pi(a,"AID",i.V),me(i,a),i.o&&i.s&&cn(a,i.o,i.s),t=new bt(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=ha(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),va(i.i,t),Hr(t,a,e)}function me(i,e){i.na&&Ar(i.na,function(t,a){pi(e,a,t)}),i.h&&ys({},function(t,a){pi(e,a,t)})}function ha(i,e,t){t=Math.min(i.j.length,t);var a=i.h?ge(i.h.Va,i.h,i):null;e:{var d=i.j;let p=-1;for(;;){const v=["count="+t];-1==p?0<t?(p=d[0].g,v.push("ofs="+p)):p=0:v.push("ofs="+p);let N=!0;for(let j=0;j<t;j++){let q=d[j].g;const ue=d[j].map;if(q-=p,0>q)p=Math.max(0,d[j].g-100),N=!1;else try{ko(ue,v,"req"+q+"_")}catch{a&&a(ue)}}if(N){a=v.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,a}function gl(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;ln||gr(),Zt||(ln(),Zt=!0),Mn.add(e,i),i.A=0}}function Gu(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=he(ge(i.Ma,i),gi(i,i.A)),i.A++,0))}function Eu(i){null!=i.B&&(Ot.clearTimeout(i.B),i.B=null)}function ml(i){i.g=new bt(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Lr(i.wa);pi(e,"RID","rpc"),pi(e,"SID",i.K),pi(e,"AID",i.V),pi(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&pi(e,"TO",i.qa),pi(e,"TYPE","xmlhttp"),me(i,e),i.o&&i.s&&cn(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=bo(Lr(e)),t.s=null,t.S=!0,ai(t,i)}function wu(i){null!=i.v&&(Ot.clearTimeout(i.v),i.v=null)}function Ri(i,e){var t=null;if(i.g==e){wu(i),Eu(i),i.g=null;var a=2}else{if(!Hu(i.i,e))return;t=e.F,Oa(i.i,e),a=1}if(0!=i.H)if(e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.G;var d=i.C;Ut(a=Os(),new ee(a,t)),ka(i)}else gl(i);else if(3==(d=e.o)||0==d&&0<e.ca||!(1==a&&function Zo(i,e){return!(ju(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=he(ge(i.Na,i,e),gi(i,i.C)),i.C++,0)))}(i,e)||2==a&&Gu(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:eo(i,5);break;case 4:eo(i,10);break;case 3:eo(i,6);break;default:eo(i,2)}}function gi(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function eo(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var a=ge(i.pb,i);t||(t=new bi("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||Io(t,"https"),bo(t)),function _u(i,e){const t=new so;if(Ot.Image){const a=new Image;a.onload=Le(Ja,t,a,"TestLoadImage: loaded",!0,e),a.onerror=Le(Ja,t,a,"TestLoadImage: error",!1,e),a.onabort=Le(Ja,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=Le(Ja,t,a,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else e(!1)}(t.toString(),a)}else Ii(2);i.H=0,i.h&&i.h.za(e),Ea(i),Xi(i)}function Ea(i){if(i.H=0,i.ma=[],i.h){const e=mu(i.i);(0!=e.length||0!=i.j.length)&&(Jt(i.ma,e),Jt(i.ma,i.j),i.i.i.length=0,jt(i.j),i.j.length=0),i.h.ya()}}function Ac(i,e,t){var a=t instanceof bi?Lr(t):new bi(t);if(""!=a.g)e&&(a.g=e+"."+a.g),oo(a,a.m);else{var d=Ot.location;a=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var p=new bi(null);a&&Io(p,a),e&&(p.g=e),d&&oo(p,d),t&&(p.l=t),a=p}return e=i.Da,(t=i.F)&&e&&pi(a,t,e),pi(a,"VER",i.ra),me(i,a),a}function nu(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&i.Ha&&!i.va?new uo({ob:!0}):i.va)).Oa(i.J),e}function Kl(){}function La(){if(jn&&!(10<=Number(_i)))throw Error("Environmental error: no available transport.")}function $s(i,e){hn.call(this),this.g=new os(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Vn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Uo(this)}function Cu(i){we.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Vo(){Ce.call(this),this.status=1}function Uo(i){this.g=i}function Dr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Qo(i,e,t){t||(t=0);var a=Array(16);if("string"==typeof e)for(var d=0;16>d;++d)a[d]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(d=0;16>d;++d)a[d]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var p=i.g[3],v=(e=i.g[0])+(p^(t=i.g[1])&((d=i.g[2])^p))+a[0]+3614090360&4294967295;v=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=(t=(d=(p=(e=t+(v<<7&4294967295|v>>>25))+((v=p+(d^e&(t^d))+a[1]+3905402710&4294967295)<<12&4294967295|v>>>20))+((v=d+(t^p&(e^t))+a[2]+606105819&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^d&(p^e))+a[3]+3250441966&4294967295)<<22&4294967295|v>>>10))+((v=e+(p^t&(d^p))+a[4]+4118548399&4294967295)<<7&4294967295|v>>>25))+((v=p+(d^e&(t^d))+a[5]+1200080426&4294967295)<<12&4294967295|v>>>20))+((v=d+(t^p&(e^t))+a[6]+2821735955&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^d&(p^e))+a[7]+4249261313&4294967295)<<22&4294967295|v>>>10))+((v=e+(p^t&(d^p))+a[8]+1770035416&4294967295)<<7&4294967295|v>>>25))+((v=p+(d^e&(t^d))+a[9]+2336552879&4294967295)<<12&4294967295|v>>>20))+((v=d+(t^p&(e^t))+a[10]+4294925233&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^d&(p^e))+a[11]+2304563134&4294967295)<<22&4294967295|v>>>10))+((v=e+(p^t&(d^p))+a[12]+1804603682&4294967295)<<7&4294967295|v>>>25))+((v=p+(d^e&(t^d))+a[13]+4254626195&4294967295)<<12&4294967295|v>>>20))+((v=d+(t^p&(e^t))+a[14]+2792965006&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^d&(p^e))+a[15]+1236535329&4294967295)<<22&4294967295|v>>>10))+((v=e+(d^p&(t^d))+a[1]+4129170786&4294967295)<<5&4294967295|v>>>27))+((v=p+(t^d&(e^t))+a[6]+3225465664&4294967295)<<9&4294967295|v>>>23))+((v=d+(e^t&(p^e))+a[11]+643717713&4294967295)<<14&4294967295|v>>>18))+((v=t+(p^e&(d^p))+a[0]+3921069994&4294967295)<<20&4294967295|v>>>12))+((v=e+(d^p&(t^d))+a[5]+3593408605&4294967295)<<5&4294967295|v>>>27))+((v=p+(t^d&(e^t))+a[10]+38016083&4294967295)<<9&4294967295|v>>>23))+((v=d+(e^t&(p^e))+a[15]+3634488961&4294967295)<<14&4294967295|v>>>18))+((v=t+(p^e&(d^p))+a[4]+3889429448&4294967295)<<20&4294967295|v>>>12))+((v=e+(d^p&(t^d))+a[9]+568446438&4294967295)<<5&4294967295|v>>>27))+((v=p+(t^d&(e^t))+a[14]+3275163606&4294967295)<<9&4294967295|v>>>23))+((v=d+(e^t&(p^e))+a[3]+4107603335&4294967295)<<14&4294967295|v>>>18))+((v=t+(p^e&(d^p))+a[8]+1163531501&4294967295)<<20&4294967295|v>>>12))+((v=e+(d^p&(t^d))+a[13]+2850285829&4294967295)<<5&4294967295|v>>>27))+((v=p+(t^d&(e^t))+a[2]+4243563512&4294967295)<<9&4294967295|v>>>23))+((v=d+(e^t&(p^e))+a[7]+1735328473&4294967295)<<14&4294967295|v>>>18))+((v=t+(p^e&(d^p))+a[12]+2368359562&4294967295)<<20&4294967295|v>>>12))+((v=e+(t^d^p)+a[5]+4294588738&4294967295)<<4&4294967295|v>>>28))+((v=p+(e^t^d)+a[8]+2272392833&4294967295)<<11&4294967295|v>>>21))+((v=d+(p^e^t)+a[11]+1839030562&4294967295)<<16&4294967295|v>>>16))+((v=t+(d^p^e)+a[14]+4259657740&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^d^p)+a[1]+2763975236&4294967295)<<4&4294967295|v>>>28))+((v=p+(e^t^d)+a[4]+1272893353&4294967295)<<11&4294967295|v>>>21))+((v=d+(p^e^t)+a[7]+4139469664&4294967295)<<16&4294967295|v>>>16))+((v=t+(d^p^e)+a[10]+3200236656&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^d^p)+a[13]+681279174&4294967295)<<4&4294967295|v>>>28))+((v=p+(e^t^d)+a[0]+3936430074&4294967295)<<11&4294967295|v>>>21))+((v=d+(p^e^t)+a[3]+3572445317&4294967295)<<16&4294967295|v>>>16))+((v=t+(d^p^e)+a[6]+76029189&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^d^p)+a[9]+3654602809&4294967295)<<4&4294967295|v>>>28))+((v=p+(e^t^d)+a[12]+3873151461&4294967295)<<11&4294967295|v>>>21))+((v=d+(p^e^t)+a[15]+530742520&4294967295)<<16&4294967295|v>>>16))+((v=t+(d^p^e)+a[2]+3299628645&4294967295)<<23&4294967295|v>>>9))+((v=e+(d^(t|~p))+a[0]+4096336452&4294967295)<<6&4294967295|v>>>26))+((v=p+(t^(e|~d))+a[7]+1126891415&4294967295)<<10&4294967295|v>>>22))+((v=d+(e^(p|~t))+a[14]+2878612391&4294967295)<<15&4294967295|v>>>17))+((v=t+(p^(d|~e))+a[5]+4237533241&4294967295)<<21&4294967295|v>>>11))+((v=e+(d^(t|~p))+a[12]+1700485571&4294967295)<<6&4294967295|v>>>26))+((v=p+(t^(e|~d))+a[3]+2399980690&4294967295)<<10&4294967295|v>>>22))+((v=d+(e^(p|~t))+a[10]+4293915773&4294967295)<<15&4294967295|v>>>17))+((v=t+(p^(d|~e))+a[1]+2240044497&4294967295)<<21&4294967295|v>>>11))+((v=e+(d^(t|~p))+a[8]+1873313359&4294967295)<<6&4294967295|v>>>26))+((v=p+(t^(e|~d))+a[15]+4264355552&4294967295)<<10&4294967295|v>>>22))+((v=d+(e^(p|~t))+a[6]+2734768916&4294967295)<<15&4294967295|v>>>17))+((v=t+(p^(d|~e))+a[13]+1309151649&4294967295)<<21&4294967295|v>>>11))+((p=(e=t+((v=e+(d^(t|~p))+a[4]+4149444226&4294967295)<<6&4294967295|v>>>26))+((v=p+(t^(e|~d))+a[11]+3174756917&4294967295)<<10&4294967295|v>>>22))^((d=p+((v=d+(e^(p|~t))+a[2]+718787259&4294967295)<<15&4294967295|v>>>17))|~e))+a[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(d+(v<<21&4294967295|v>>>11))&4294967295,i.g[2]=i.g[2]+d&4294967295,i.g[3]=i.g[3]+p&4294967295}function R(i,e){this.h=e;for(var t=[],a=!0,d=i.length-1;0<=d;d--){var p=0|i[d];a&&p==e||(t[d]=p,a=!1)}this.g=t}(Xe=ar.prototype).Oa=function(i){this.M=i},Xe.ha=function(i,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():We.g(),this.C=function St(i){return i.h||(i.h=i.i())}(this.u?this.u:We),this.g.onreadystatechange=ge(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(p){return void Lo(this,p)}if(i=t||"",t=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var d in a)t.set(d,a[d]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const p of a.keys())t.set(p,a.get(p))}a=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),d=Ot.FormData&&i instanceof Ot.FormData,!(0<=ht(tu,e))||a||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,v]of t)this.g.setRequestHeader(p,v);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{H(this),0<this.B&&((this.L=function Wo(i){return jn&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ge(this.ua,this)):this.A=es(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){Lo(this,p)}},Xe.ua=function(){typeof ot<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ut(this,"timeout"),this.abort(8))},Xe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ut(this,"complete"),Ut(this,"abort"),Js(this))},Xe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Js(this,!0)),ar.$.N.call(this)},Xe.La=function(){this.s||(this.G||this.v||this.l?Ko(this):this.kb())},Xe.kb=function(){Ko(this)},Xe.isActive=function(){return!!this.g},Xe.da=function(){try{return 2<K(this)?this.g.status:-1}catch{return-1}},Xe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),$u(e)}},Xe.Ia=function(){return this.m},Xe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=os.prototype).ra=8,Xe.H=1,Xe.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const d=new bt(this,this.l,i);let p=this.s;if(this.U&&(p?(p=vi(p),Vr(p,this.U)):p=this.U),null!==this.o||this.O||(d.I=p,p=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var a=this.j[t];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ha(this,d,e),pi(t=Lr(this.I),"RID",i),pi(t,"CVER",22),this.F&&pi(t,"X-HTTP-Session-Id",this.F),me(this,t),p&&(this.O?e="headers="+encodeURIComponent(String(Me(p)))+"&"+e:this.o&&cn(t,this.o,p)),va(this.i,d),this.bb&&pi(t,"TYPE","init"),this.P?(pi(t,"$req",e),pi(t,"SID","null"),d.aa=!0,Hr(d,t,null)):Hr(d,t,e),this.H=2}}else 3==this.H&&(i?Yo(this,i):0==this.j.length||gu(this.i)||Yo(this))},Xe.Ma=function(){if(this.u=null,ml(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=he(ge(this.jb,this),i)}},Xe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ii(10),Fo(this),ml(this))},Xe.ib=function(){null!=this.v&&(this.v=null,Fo(this),Gu(this),Ii(19))},Xe.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Ii(2)):(this.l.info("Failed to ping google.com"),Ii(1))},Xe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xe=Kl.prototype).Ba=function(){},Xe.Aa=function(){},Xe.za=function(){},Xe.ya=function(){},Xe.isActive=function(){return!0},Xe.Va=function(){},La.prototype.g=function(i,e){return new $s(i,e)},He($s,hn),$s.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;Ii(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=Ac(i,null,i.Y),ka(i)},$s.prototype.close=function(){di(this.g)},$s.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=kr(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&ka(e)},$s.prototype.N=function(){this.g.h=null,delete this.j,di(this.g),delete this.g,$s.$.N.call(this)},He(Cu,we),He(Vo,Ce),He(Uo,Kl),Uo.prototype.Ba=function(){Ut(this.g,"a")},Uo.prototype.Aa=function(i){Ut(this.g,new Cu(i))},Uo.prototype.za=function(i){Ut(this.g,new Vo)},Uo.prototype.ya=function(){Ut(this.g,"b")},He(Dr,function Zl(){this.blockSize=-1}),Dr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Dr.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,a=this.m,d=this.h,p=0;p<e;){if(0==d)for(;p<=t;)Qo(this,i,p),p+=this.blockSize;if("string"==typeof i){for(;p<e;)if(a[d++]=i.charCodeAt(p++),d==this.blockSize){Qo(this,a),d=0;break}}else for(;p<e;)if(a[d++]=i[p++],d==this.blockSize){Qo(this,a),d=0;break}}this.h=d,this.i+=e},Dr.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var a=0;32>a;a+=8)i[t++]=this.g[e]>>>a&255;return i};var J={};function B(i){return-128<=i&&128>i?function fn(i,e){var t=J;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new R([0|e],0>e?-1:0)}):new R([0|i],0>i?-1:0)}function Z(i){if(isNaN(i)||!isFinite(i))return Ct;if(0>i)return Xn(Z(-i));for(var e=[],t=1,a=0;i>=t;a++)e[a]=i/t|0,t*=lt;return new R(e,0)}var lt=4294967296,Ct=B(0),En=B(1),lr=B(16777216);function yr(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function hr(i){return-1==i.h}function Xn(i){for(var e=i.g.length,t=[],a=0;a<e;a++)t[a]=~i.g[a];return new R(t,~i.h).add(En)}function Ti(i,e){return i.add(Xn(e))}function mi(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Gi(i,e){this.g=i,this.h=e}function qi(i,e){if(yr(e))throw Error("division by zero");if(yr(i))return new Gi(Ct,Ct);if(hr(i))return e=qi(Xn(i),e),new Gi(Xn(e.g),Xn(e.h));if(hr(e))return e=qi(i,Xn(e)),new Gi(Xn(e.g),e.h);if(30<i.g.length){if(hr(i)||hr(e))throw Error("slowDivide_ only works with positive integers.");for(var t=En,a=e;0>=a.X(i);)t=Un(t),a=Un(a);var d=Ps(t,1),p=Ps(a,1);for(a=Ps(a,2),t=Ps(t,2);!yr(a);){var v=p.add(a);0>=v.X(i)&&(d=d.add(t),p=v),a=Ps(a,1),t=Ps(t,1)}return e=Ti(i,d.R(e)),new Gi(d,e)}for(d=Ct;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),a=48>=(a=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,a-48),v=(p=Z(t)).R(e);hr(v)||0<v.X(i);)v=(p=Z(t-=a)).R(e);yr(p)&&(p=En),d=d.add(p),i=Ti(i,v)}return new Gi(d,i)}function Un(i){for(var e=i.g.length+1,t=[],a=0;a<e;a++)t[a]=i.D(a)<<1|i.D(a-1)>>>31;return new R(t,i.h)}function Ps(i,e){var t=e>>5;e%=32;for(var a=i.g.length-t,d=[],p=0;p<a;p++)d[p]=0<e?i.D(p+t)>>>e|i.D(p+t+1)<<32-e:i.D(p+t);return new R(d,i.h)}(Xe=R.prototype).ea=function(){if(hr(this))return-Xn(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var a=this.D(t);i+=(0<=a?a:lt+a)*e,e*=lt}return i},Xe.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(yr(this))return"0";if(hr(this))return"-"+Xn(this).toString(i);for(var e=Z(Math.pow(i,6)),t=this,a="";;){var d=qi(t,e).g,p=((0<(t=Ti(t,d.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(yr(t=d))return p+a;for(;6>p.length;)p="0"+p;a=p+a}},Xe.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},Xe.X=function(i){return hr(i=Ti(this,i))?-1:yr(i)?0:1},Xe.abs=function(){return hr(this)?Xn(this):this},Xe.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],a=0,d=0;d<=e;d++){var p=a+(65535&this.D(d))+(65535&i.D(d)),v=(p>>>16)+(this.D(d)>>>16)+(i.D(d)>>>16);a=v>>>16,t[d]=(v&=65535)<<16|(p&=65535)}return new R(t,-2147483648&t[t.length-1]?-1:0)},Xe.R=function(i){if(yr(this)||yr(i))return Ct;if(hr(this))return hr(i)?Xn(this).R(Xn(i)):Xn(Xn(this).R(i));if(hr(i))return Xn(this.R(Xn(i)));if(0>this.X(lr)&&0>i.X(lr))return Z(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],a=0;a<2*e;a++)t[a]=0;for(a=0;a<this.g.length;a++)for(var d=0;d<i.g.length;d++){var p=this.D(a)>>>16,v=65535&this.D(a),N=i.D(d)>>>16,j=65535&i.D(d);t[2*a+2*d]+=v*j,mi(t,2*a+2*d),t[2*a+2*d+1]+=p*j,mi(t,2*a+2*d+1),t[2*a+2*d+1]+=v*N,mi(t,2*a+2*d+1),t[2*a+2*d+2]+=p*N,mi(t,2*a+2*d+2)}for(a=0;a<e;a++)t[a]=t[2*a+1]<<16|t[2*a];for(a=e;a<2*e;a++)t[a]=0;return new R(t,0)},Xe.gb=function(i){return qi(this,i).h},Xe.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)&i.D(a);return new R(t,this.h&i.h)},Xe.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)|i.D(a);return new R(t,this.h|i.h)},Xe.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)^i.D(a);return new R(t,this.h^i.h)},La.prototype.createWebChannel=La.prototype.g,$s.prototype.send=$s.prototype.u,$s.prototype.open=$s.prototype.m,$s.prototype.close=$s.prototype.close,se.NO_ERROR=0,se.TIMEOUT=8,se.HTTP_ERROR=6,Ie.COMPLETE="complete",Rt.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",hn.prototype.listen=hn.prototype.O,ar.prototype.listenOnce=ar.prototype.P,ar.prototype.getLastError=ar.prototype.Sa,ar.prototype.getLastErrorCode=ar.prototype.Ia,ar.prototype.getStatus=ar.prototype.da,ar.prototype.getResponseJson=ar.prototype.Wa,ar.prototype.getResponseText=ar.prototype.ja,ar.prototype.send=ar.prototype.ha,ar.prototype.setWithCredentials=ar.prototype.Oa,Dr.prototype.digest=Dr.prototype.l,Dr.prototype.reset=Dr.prototype.reset,Dr.prototype.update=Dr.prototype.j,R.prototype.add=R.prototype.add,R.prototype.multiply=R.prototype.R,R.prototype.modulo=R.prototype.gb,R.prototype.compare=R.prototype.X,R.prototype.toNumber=R.prototype.ea,R.prototype.toString=R.prototype.toString,R.prototype.getBits=R.prototype.D,R.fromNumber=Z,R.fromString=function De(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Xn(De(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Z(Math.pow(e,8)),a=Ct,d=0;d<i.length;d+=8){var p=Math.min(8,i.length-d),v=parseInt(i.substring(d,d+p),e);8>p?(p=Z(Math.pow(e,p)),a=a.R(p).add(Z(v))):a=(a=a.R(t)).add(Z(v))}return a};var Ao=vt.createWebChannelTransport=function(){return new La},Gs=vt.getStatEventTarget=function(){return Os()},zs=vt.ErrorCode=se,hi=vt.EventType=Ie,Mc=vt.Event=Ci,as=vt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zu=vt.FetchXmlHttpFactory=uo,yl=vt.WebChannel=Rt,to=vt.XhrIo=ar,Ed=vt.Md5=Dr,Fa=vt.Integer=R;const Bt="@firebase/firestore";class tr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tr.UNAUTHENTICATED=new tr(null),tr.GOOGLE_CREDENTIALS=new tr("google-credentials-uid"),tr.FIRST_PARTY=new tr("first-party-uid"),tr.MOCK_USER=new tr("mock-user");let Iu="9.23.0";const Bo=new et.Yd("@firebase/firestore");function Ws(){return Bo.logLevel}function Ht(i,...e){if(Bo.logLevel<=et.in.DEBUG){const t=e.map(Wu);Bo.debug(`Firestore (${Iu}): ${i}`,...t)}}function Xr(i,...e){if(Bo.logLevel<=et.in.ERROR){const t=e.map(Wu);Bo.error(`Firestore (${Iu}): ${i}`,...t)}}function ks(i,...e){if(Bo.logLevel<=et.in.WARN){const t=e.map(Wu);Bo.warn(`Firestore (${Iu}): ${i}`,...t)}}function Wu(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Kt(i="Unexpected state"){const e=`FIRESTORE (${Iu}) INTERNAL ASSERTION FAILED: `+i;throw Xr(e),new Error(e)}function $n(i,e){i||Kt()}function en(i,e){return i}const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pt extends Be.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class co{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ah{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tr.UNAUTHENTICATED))}shutdown(){}}class qu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class uh{constructor(e){this.t=e,this.currentUser=tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let d=this.i;const p=q=>this.i!==d?(d=this.i,t(q)):Promise.resolve();let v=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new Ni,e.enqueueRetryable(()=>p(this.currentUser))};const N=()=>{const q=v;e.enqueueRetryable((0,ze.Z)(function*(){yield q.promise,yield p(a.currentUser)}))},j=q=>{Ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(q=>j(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?j(q):(Ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new Ni)}},0),N()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(Ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?($n("string"==typeof a.accessToken),new co(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $n(null===e||"string"==typeof e),new tr(e)}}class hs{constructor(e,t,a){this.h=e,this.l=t,this.m=a,this.type="FirstParty",this.user=tr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Va{constructor(e,t,a){this.h=e,this.l=t,this.m=a}getToken(){return Promise.resolve(new hs(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _l{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const a=p=>{null!=p.error&&Ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const v=p.token!==this.T;return this.T=p.token,Ht("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>a(p))};const d=p=>{Ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.I.onInit(p=>d(p)),setTimeout(()=>{if(!this.appCheck){const p=this.I.getImmediate({optional:!0});p?d(p):Ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($n("string"==typeof t.token),this.T=t.token,new _l(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Nc(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}class vl{static A(){const t=62*Math.floor(256/62);let a="";for(;a.length<20;){const d=Nc(40);for(let p=0;p<d.length;++p)a.length<20&&d[p]<t&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(d[p]%62))}return a}}function ir(i,e){return i<e?-1:i>e?1:0}function Xo(i,e,t){return i.length===e.length&&i.every((a,d)=>t(a,e[d]))}function Ql(i){return i+"\0"}class Pi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pi.fromMillis(Date.now())}static fromDate(e){return Pi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new Pi(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ir(this.nanoseconds,e.nanoseconds):ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new Pi(0,0))}static max(){return new Gn(new Pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mo{constructor(e,t,a){void 0===t?t=0:t>e.length&&Kt(),void 0===a?a=e.length-t:a>e.length-t&&Kt(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===Mo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mo?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let d=0;d<a;d++){const p=e.get(d),v=t.get(d);if(p<v)return-1;if(p>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fr extends Mo{construct(e,t,a){return new fr(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Pt(ft.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(d=>d.length>0))}return new fr(t)}static emptyPath(){return new fr([])}}const fa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends Mo{construct(e,t,a){return new Rr(e,t,a)}static isValidIdentifier(e){return fa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const t=[];let a="",d=0;const p=()=>{if(0===a.length)throw new Pt(ft.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let v=!1;for(;d<e.length;){const N=e[d];if("\\"===N){if(d+1===e.length)throw new Pt(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const j=e[d+1];if("\\"!==j&&"."!==j&&"`"!==j)throw new Pt(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=j,d+=2}else"`"===N?(v=!v,d++):"."!==N||v?(a+=N,d++):(p(),d++)}if(p(),v)throw new Pt(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(t)}static emptyPath(){return new Rr([])}}class un{constructor(e){this.path=e}static fromPath(e){return new un(fr.fromString(e))}static fromName(e){return new un(fr.fromString(e).popFirst(5))}static empty(){return new un(fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new un(new fr(e.slice()))}}class xi{constructor(e,t,a,d){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=d}}function wa(i){return i.fields.find(e=>2===e.kind)}function Jo(i){return i.fields.filter(e=>2!==e.kind)}xi.UNKNOWN_ID=-1;class ea{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ku{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ku(0,b.min())}}function A(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,d=Gn.fromTimestamp(1e9===a?new Pi(t+1,0):new Pi(t,a));return new b(d,un.empty(),e)}function O(i){return new b(i.readTime,i.key,-1)}class b{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new b(Gn.min(),un.empty(),-1)}static max(){return new b(Gn.max(),un.empty(),-1)}}function P(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=un.comparator(i.documentKey,e.documentKey),0!==t?t:ir(i.largestBatchId,e.largestBatchId))}const z="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class de{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ce(i){return tt.apply(this,arguments)}function tt(){return tt=(0,ze.Z)(function*(i){if(i.code!==ft.FAILED_PRECONDITION||i.message!==z)throw i;Ht("LocalStore","Unexpectedly lost primary lease")}),tt.apply(this,arguments)}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be((a,d)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(a,d)},this.catchCallback=p=>{this.wrapFailure(t,p).next(a,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):be.reject(t)}static resolve(e){return new be((t,a)=>{t(e)})}static reject(e){return new be((t,a)=>{a(e)})}static waitFor(e){return new be((t,a)=>{let d=0,p=0,v=!1;e.forEach(N=>{++d,N.next(()=>{++p,v&&p===d&&t()},j=>a(j))}),v=!0,p===d&&t()})}static or(e){let t=be.resolve(!1);for(const a of e)t=t.next(d=>d?be.resolve(d):a());return t}static forEach(e,t){const a=[];return e.forEach((d,p)=>{a.push(t.call(this,d,p))}),this.waitFor(a)}static mapArray(e,t){return new be((a,d)=>{const p=e.length,v=new Array(p);let N=0;for(let j=0;j<p;j++){const q=j;t(e[q]).next(ue=>{v[q]=ue,++N,N===p&&a(v)},ue=>d(ue))}})}static doWhile(e,t){return new be((a,d)=>{const p=()=>{!0===e()?t().next(()=>{p()},d):a()};p()})}}class xn{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ni,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new ni(e,t.error)):this.v.resolve()},this.transaction.onerror=a=>{const d=wl(a.target.error);this.v.reject(new ni(e,d))}}static open(e,t,a,d){try{return new xn(t,e.transaction(d,a))}catch(p){throw new ni(t,p)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ht("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pa(t)}}class _n{constructor(e,t,a){this.name=e,this.version=t,this.V=a,12.2===_n.S((0,Be.z$)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ht("SimpleDb","Removing database:",e),qs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Be.hl)())return!1;if(_n.C())return!0;const e=(0,Be.z$)(),t=_n.S(e),a=0<t&&t<10,d=_n.N(e),p=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||p)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static N(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}$(e){var t=this;return(0,ze.Z)(function*(){return t.db||(Ht("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,d)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=v=>{a(v.target.result)},p.onblocked=()=>{d(new ni(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=v=>{const N=v.target.error;d("VersionError"===N.name?new Pt(ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new Pt(ft.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new ni(e,N))},p.onupgradeneeded=v=>{Ht("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.V.O(v.target.result,p.transaction,v.oldVersion,t.version).next(()=>{Ht("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=a=>t.F(a)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,d){var p=this;return(0,ze.Z)(function*(){const v="readonly"===t;let N=0;for(;;){++N;try{p.db=yield p.$(e);const j=xn.open(p.db,e,v?"readonly":"readwrite",a),q=d(j).next(ue=>(j.P(),ue)).catch(ue=>(j.abort(ue),be.reject(ue))).toPromise();return q.catch(()=>{}),yield j.R,q}catch(j){const q=j,ue="FirebaseError"!==q.name&&N<3;if(Ht("SimpleDb","Transaction failed with error:",q.message,"Retrying:",ue),p.close(),!ue)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Wr{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return qs(this.L.delete())}}class ni extends Pt{constructor(e,t){super(ft.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ca(i){return"IndexedDbTransactionError"===i.name}class pa{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(Ht("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(Ht("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),qs(a)}add(e){return Ht("SimpleDb","ADD",this.store.name,e,e),qs(this.store.add(e))}get(e){return qs(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ht("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ht("SimpleDb","DELETE",this.store.name,e),qs(this.store.delete(e))}count(){return Ht("SimpleDb","COUNT",this.store.name),qs(this.store.count())}j(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const d=this.cursor(a),p=[];return this.W(d,(v,N)=>{p.push(N)}).next(()=>p)}{const d=this.store.getAll(a.range);return new be((p,v)=>{d.onerror=N=>{v(N.target.error)},d.onsuccess=N=>{p(N.target.result)}})}}H(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new be((d,p)=>{a.onerror=v=>{p(v.target.error)},a.onsuccess=v=>{d(v.target.result)}})}J(e,t){Ht("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.Y=!1;const d=this.cursor(a);return this.W(d,(p,v,N)=>N.delete())}X(e,t){let a;t?a=e:(a={},t=e);const d=this.cursor(a);return this.W(d,t)}Z(e){const t=this.cursor({});return new be((a,d)=>{t.onerror=p=>{const v=wl(p.target.error);d(v)},t.onsuccess=p=>{const v=p.target.result;v?e(v.primaryKey,v.value).next(N=>{N?v.continue():a()}):a()}})}W(e,t){const a=[];return new be((d,p)=>{e.onerror=v=>{p(v.target.error)},e.onsuccess=v=>{const N=v.target.result;if(!N)return void d();const j=new Wr(N),q=t(N.primaryKey,N.value,j);if(q instanceof be){const ue=q.catch(ke=>(j.done(),be.reject(ke)));a.push(ue)}j.isDone?d():null===j.K?N.continue():N.continue(j.K)}}).next(()=>be.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.Y?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qs(i){return new be((e,t)=>{i.onsuccess=a=>{e(a.target.result)},i.onerror=a=>{const d=wl(a.target.error);t(d)}})}let Zu=!1;function wl(i){const e=_n.S((0,Be.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const a=new Pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zu||(Zu=!0,setTimeout(()=>{throw a},0)),a}}return i}class Jf{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ht("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ze.Z)(function*(){t.task=null;try{Ht("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(a){Ca(a)?Ht("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield ce(a)}yield t.et(6e4)}))}}class ta{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ze.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.st(a,e))})()}st(e,t){const a=new Set;let d=t,p=!0;return be.doWhile(()=>!0===p&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!a.has(v))return Ht("IndexBackiller",`Processing collection: ${v}`),this.it(e,v,d).next(N=>{d-=N,a.add(v)});p=!1})).next(()=>t-d)}it(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,a).next(p=>{const v=p.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.rt(d,p)).next(N=>(Ht("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,t,N))).next(()=>v.size)}))}rt(e,t){let a=e;return t.changes.forEach((d,p)=>{const v=O(p);P(v,a)>0&&(a=v)}),new b(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ks=(()=>{class i{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=d=>this.ot(d),this.ut=d=>a.writeSequenceNumber(d))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function Ua(i){return null==i}function Xl(i){return 0===i&&1/i==-1/0}function Pc(i){return"number"==typeof i&&Number.isInteger(i)&&!Xl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Zs(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Zh(e)),e=Ia(i.get(t),e);return Zh(e)}function Ia(i,e){let t=e;const a=i.length;for(let d=0;d<a;d++){const p=i.charAt(d);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function Zh(i){return i+"\x01\x01"}function Ba(i){const e=i.length;if($n(e>=2),2===e)return $n("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),fr.emptyPath();const t=e-2,a=[];let d="";for(let p=0;p<e;){const v=i.indexOf("\x01",p);switch((v<0||v>t)&&Kt(),i.charAt(v+1)){case"\x01":const N=i.substring(p,v);let j;0===d.length?j=N:(d+=N,j=d,d=""),a.push(j);break;case"\x10":d+=i.substring(p,v),d+="\0";break;case"\x11":d+=i.substring(p,v+1);break;default:Kt()}p=v+2}return new fr(a)}const wd=["userId","batchId"];function xc(i,e){return[i,Zs(e)]}function ja(i,e,t){return[i,Zs(e),t]}const ch={},Jl=["prefixPath","collectionGroup","readTime","documentId"],Cl=["prefixPath","collectionGroup","documentId"],Oc=["collectionGroup","readTime","prefixPath","documentId"],kc=["canonicalId","targetId"],Du=["targetId","path"],dh=["path","targetId"],Cd=["collectionId","parent"],Il=["indexId","uid"],ec=["uid","sequenceNumber"],tc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ep=["indexId","uid","orderedDocumentKey"],Lc=["userId","collectionPath","documentId"],Yu=["userId","collectionPath","largestBatchId"],Yh=["userId","collectionGroup","largestBatchId"],Fc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qu=[...Fc,"documentOverlays"],Ha=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hh=Ha,tp=[...hh,"indexConfiguration","indexState","indexEntries"];class ba extends de{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ho(i,e){const t=en(i);return _n.M(t.ht,e)}function Tu(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Da(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function nc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class ri{constructor(e,t){this.comparator=e,this.root=t||Ls.EMPTY}insert(e,t){return new ri(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ls.BLACK,null,null))}remove(e){return new ri(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ls.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const d=this.comparator(e,a.key);if(0===d)return t+a.left.size;d<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ta(this.root,e,this.comparator,!0)}}class Ta{constructor(e,t,a,d){this.isReverse=d,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?a(e.key,t):1,t&&d&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ls{constructor(e,t,a,d,p){this.key=e,this.value=t,this.color=a??Ls.RED,this.left=d??Ls.EMPTY,this.right=p??Ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,d,p){return new Ls(e??this.key,t??this.value,a??this.color,d??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let d=this;const p=a(e,d.key);return d=p<0?d.copy(null,null,null,d.left.insert(e,t,a),null):0===p?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,a)),d.fixUp()}removeMin(){if(this.left.isEmpty())return Ls.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return Ls.EMPTY;a=d.right.min(),d=d.copy(a.key,a.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Kt();const e=this.left.check();if(e!==this.right.check())throw Kt();return e+(this.isRed()?0:1)}}Ls.EMPTY=null,Ls.RED=!0,Ls.BLACK=!1,Ls.EMPTY=new class{constructor(){this.size=0}get key(){throw Kt()}get value(){throw Kt()}get color(){throw Kt()}get left(){throw Kt()}get right(){throw Kt()}copy(i,e,t,a,d){return this}insert(i,e,t){return new Ls(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ki{constructor(e){this.comparator=e,this.data=new ri(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const d=a.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new x(this.data.getIterator())}getIteratorFrom(e){return new x(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,p=a.getNext().key;if(0!==this.comparator(d,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ki(this.comparator);return t.data=e,t}}class x{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function V(i){return i.hasNext()?i.getNext():void 0}class Y{constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new Y([])}unionWith(e){let t=new Ki(Rr.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Y(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class Ee extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Ee("Invalid base64 string: "+d):d}}(e);return new nt(t)}static fromUint8Array(e){const t=function(a){let d="";for(let p=0;p<a.length;++p)d+=String.fromCharCode(a[p]);return d}(e);return new nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const kt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mn(i){if($n(!!i),"string"==typeof i){let e=0;const t=kt.exec(i);if($n(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Xt(i.seconds),nanos:Xt(i.nanos)}}function Xt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function wn(i){return"string"==typeof i?nt.fromBase64String(i):nt.fromUint8Array(i)}function _r(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kn(i){const e=i.mapValue.fields.__previous_value__;return _r(e)?Kn(e):e}function Jr(i){const e=mn(i.mapValue.fields.__local_write_time__.timestampValue);return new Pi(e.seconds,e.nanos)}class no{constructor(e,t,a,d,p,v,N,j,q){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=d,this.ssl=p,this.forceLongPolling=v,this.autoDetectLongPolling=N,this.longPollingOptions=j,this.useFetchStreams=q}}class Ro{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ro("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ro&&e.projectId===this.projectId&&e.database===this.database}}const ru={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ds={nullValue:"NULL_VALUE"};function Ts(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_r(i)?4:Ng(i)?9007199254740991:10:Kt()}function ro(i,e){if(i===e)return!0;const t=Ts(i);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Jr(i).isEqual(Jr(e));case 3:return function(a,d){if("string"==typeof a.timestampValue&&"string"==typeof d.timestampValue&&a.timestampValue.length===d.timestampValue.length)return a.timestampValue===d.timestampValue;const p=mn(a.timestampValue),v=mn(d.timestampValue);return p.seconds===v.seconds&&p.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,wn(i.bytesValue).isEqual(wn(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,d){return Xt(a.geoPointValue.latitude)===Xt(d.geoPointValue.latitude)&&Xt(a.geoPointValue.longitude)===Xt(d.geoPointValue.longitude)}(i,e);case 2:return function(a,d){if("integerValue"in a&&"integerValue"in d)return Xt(a.integerValue)===Xt(d.integerValue);if("doubleValue"in a&&"doubleValue"in d){const p=Xt(a.doubleValue),v=Xt(d.doubleValue);return p===v?Xl(p)===Xl(v):isNaN(p)&&isNaN(v)}return!1}(i,e);case 9:return Xo(i.arrayValue.values||[],e.arrayValue.values||[],ro);case 10:return function(a,d){const p=a.mapValue.fields||{},v=d.mapValue.fields||{};if(Tu(p)!==Tu(v))return!1;for(const N in p)if(p.hasOwnProperty(N)&&(void 0===v[N]||!ro(p[N],v[N])))return!1;return!0}(i,e);default:return Kt()}var d}function iu(i,e){return void 0!==(i.values||[]).find(t=>ro(t,e))}function $a(i,e){if(i===e)return 0;const t=Ts(i),a=Ts(e);if(t!==a)return ir(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return ir(i.booleanValue,e.booleanValue);case 2:return function(d,p){const v=Xt(d.integerValue||d.doubleValue),N=Xt(p.integerValue||p.doubleValue);return v<N?-1:v>N?1:v===N?0:isNaN(v)?isNaN(N)?0:-1:1}(i,e);case 3:return Mg(i.timestampValue,e.timestampValue);case 4:return Mg(Jr(i),Jr(e));case 5:return ir(i.stringValue,e.stringValue);case 6:return function(d,p){const v=wn(d),N=wn(p);return v.compareTo(N)}(i.bytesValue,e.bytesValue);case 7:return function(d,p){const v=d.split("/"),N=p.split("/");for(let j=0;j<v.length&&j<N.length;j++){const q=ir(v[j],N[j]);if(0!==q)return q}return ir(v.length,N.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,p){const v=ir(Xt(d.latitude),Xt(p.latitude));return 0!==v?v:ir(Xt(d.longitude),Xt(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,p){const v=d.values||[],N=p.values||[];for(let j=0;j<v.length&&j<N.length;++j){const q=$a(v[j],N[j]);if(q)return q}return ir(v.length,N.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,p){if(d===ru.mapValue&&p===ru.mapValue)return 0;if(d===ru.mapValue)return 1;if(p===ru.mapValue)return-1;const v=d.fields||{},N=Object.keys(v),j=p.fields||{},q=Object.keys(j);N.sort(),q.sort();for(let ue=0;ue<N.length&&ue<q.length;++ue){const ke=ir(N[ue],q[ue]);if(0!==ke)return ke;const dt=$a(v[N[ue]],j[q[ue]]);if(0!==dt)return dt}return ir(N.length,q.length)}(i.mapValue,e.mapValue);default:throw Kt()}}function Mg(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return ir(i,e);const t=mn(i),a=mn(e),d=ir(t.seconds,a.seconds);return 0!==d?d:ir(t.nanos,a.nanos)}function Id(i){return bd(i)}function bd(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const d=mn(a);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?wn(i.bytesValue).toBase64():"referenceValue"in i?un.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(a){let d="[",p=!0;for(const v of a.values||[])p?p=!1:d+=",",d+=bd(v);return d+"]"}(i.arrayValue):"mapValue"in i?function(a){const d=Object.keys(a.fields||{}).sort();let p="{",v=!0;for(const N of d)v?v=!1:p+=",",p+=`${N}:${bd(a.fields[N])}`;return p+"}"}(i.mapValue):Kt();var e}function Ys(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function fh(i){return!!i&&"integerValue"in i}function Xu(i){return!!i&&"arrayValue"in i}function Bm(i){return!!i&&"nullValue"in i}function Rg(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Qh(i){return!!i&&"mapValue"in i}function Dd(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Da(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Dd(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dd(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Ng(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pg(i){return"nullValue"in i?Ds:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ys(Ro.empty(),un.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Kt()}function jm(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ys(Ro.empty(),un.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ru:Kt()}function rp(i,e){const t=$a(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Xh(i,e){const t=$a(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Fs{constructor(e){this.value=e}static empty(){return new Fs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dd(t)}setAll(e){let t=Rr.emptyPath(),a={},d=[];e.forEach((v,N)=>{if(!t.isImmediateParentOf(N)){const j=this.getFieldsMap(t);this.applyChanges(j,a,d),a={},d=[],t=N.popLast()}v?a[N.lastSegment()]=Dd(v):d.push(N.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,a,d)}delete(e){const t=this.field(e.popLast());Qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ro(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let d=t.mapValue.fields[e.get(a)];Qh(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,a){Da(t,(d,p)=>e[d]=p);for(const d of a)delete e[d]}clone(){return new Fs(Dd(this.value))}}function Jh(i){const e=[];return Da(i.fields,(t,a)=>{const d=new Rr([t]);if(Qh(a)){const p=Jh(a.mapValue).fields;if(0===p.length)e.push(d);else for(const v of p)e.push(d.child(v))}else e.push(d)}),new Y(e)}class Ji{constructor(e,t,a,d,p,v,N){this.key=e,this.documentType=t,this.version=a,this.readTime=d,this.createTime=p,this.data=v,this.documentState=N}static newInvalidDocument(e){return new Ji(e,0,Gn.min(),Gn.min(),Gn.min(),Fs.empty(),0)}static newFoundDocument(e,t,a,d){return new Ji(e,1,t,Gn.min(),a,d,0)}static newNoDocument(e,t){return new Ji(e,2,t,Gn.min(),Gn.min(),Fs.empty(),0)}static newUnknownDocument(e,t){return new Ji(e,3,t,Gn.min(),Gn.min(),Fs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ju{constructor(e,t){this.position=e,this.inclusive=t}}function ph(i,e,t){let a=0;for(let d=0;d<i.position.length;d++){const p=e[d],v=i.position[d];if(a=p.field.isKeyField()?un.comparator(un.fromName(v.referenceValue),t.key):$a(v,t.data.field(p.field)),"desc"===p.dir&&(a*=-1),0!==a)break}return a}function ip(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ro(i.position[t],e.position[t]))return!1;return!0}class Td{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Sd{}class ei extends Sd{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,a):new Og(e,t,a):"array-contains"===t?new bl(e,a):"in"===t?new fo(e,a):"not-in"===t?new Md(e,a):"array-contains-any"===t?new tf(e,a):new ei(e,t,a)}static createKeyFieldInFilter(e,t,a){return"in"===t?new Ad(e,a):new Bc(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($a(t,this.value)):null!==t&&Ts(this.value)===Ts(t)&&this.matchesComparison($a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Si extends Sd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Si(e,t)}matches(e){return rc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rc(i){return"and"===i.op}function Su(i){return"or"===i.op}function ic(i){return ef(i)&&rc(i)}function ef(i){for(const e of i.filters)if(e instanceof Si)return!1;return!0}function sc(i){if(i instanceof ei)return i.field.canonicalString()+i.op.toString()+Id(i.value);if(ic(i))return i.filters.map(e=>sc(e)).join(",");{const e=i.filters.map(t=>sc(t)).join(",");return`${i.op}(${e})`}}function gh(i,e){return i instanceof ei?(t=i,(a=e)instanceof ei&&t.op===a.op&&t.field.isEqual(a.field)&&ro(t.value,a.value)):i instanceof Si?function(t,a){return a instanceof Si&&t.op===a.op&&t.filters.length===a.filters.length&&t.filters.reduce((d,p,v)=>d&&gh(p,a.filters[v]),!0)}(i,e):void Kt();var t,a}function Uc(i,e){const t=i.filters.concat(e);return Si.create(t,i.op)}function xg(i){return i instanceof ei?`${(e=i).field.canonicalString()} ${e.op} ${Id(e.value)}`:i instanceof Si?function(e){return e.op.toString()+" {"+e.getFilters().map(xg).join(" ,")+"}"}(i):"Filter";var e}class Og extends ei{constructor(e,t,a){super(e,t,a),this.key=un.fromName(a.referenceValue)}matches(e){const t=un.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ad extends ei{constructor(e,t){super(e,"in",t),this.keys=mh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bc extends ei{constructor(e,t){super(e,"not-in",t),this.keys=mh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mh(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>un.fromName(a.referenceValue))}class bl extends ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xu(t)&&iu(t.arrayValue,this.value)}}class fo extends ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&iu(this.value.arrayValue,t)}}class Md extends ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!iu(this.value.arrayValue,t)}}class tf extends ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>iu(this.value.arrayValue,a))}}class Au{constructor(e,t=null,a=[],d=[],p=null,v=null,N=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=d,this.limit=p,this.startAt=v,this.endAt=N,this.dt=null}}function po(i,e=null,t=[],a=[],d=null,p=null,v=null){return new Au(i,e,t,a,d,p,v)}function jc(i){const e=en(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>sc(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(d=a).field.canonicalString()+d.dir;var d}).join(","),Ua(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Id(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Id(a)).join(",")),e.dt=t}return e.dt}function oc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Vc(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!gh(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ip(i.startAt,e.startAt)&&ip(i.endAt,e.endAt)}function ac(i){return un.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function el(i,e){return i.filters.filter(t=>t instanceof ei&&t.field.isEqual(e))}function Dl(i,e,t){let a=Ds,d=!0;for(const p of el(i,e)){let v=Ds,N=!0;switch(p.op){case"<":case"<=":v=Pg(p.value);break;case"==":case"in":case">=":v=p.value;break;case">":v=p.value,N=!1;break;case"!=":case"not-in":v=Ds}rp({value:a,inclusive:d},{value:v,inclusive:N})<0&&(a=v,d=N)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];rp({value:a,inclusive:d},{value:v,inclusive:t.inclusive})<0&&(a=v,d=t.inclusive);break}return{value:a,inclusive:d}}function su(i,e,t){let a=ru,d=!0;for(const p of el(i,e)){let v=ru,N=!0;switch(p.op){case">=":case">":v=jm(p.value),N=!1;break;case"==":case"in":case"<=":v=p.value;break;case"<":v=p.value,N=!1;break;case"!=":case"not-in":v=ru}Xh({value:a,inclusive:d},{value:v,inclusive:N})>0&&(a=v,d=N)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];Xh({value:a,inclusive:d},{value:v,inclusive:t.inclusive})>0&&(a=v,d=t.inclusive);break}return{value:a,inclusive:d}}class uc{constructor(e,t=null,a=[],d=[],p=null,v="F",N=null,j=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=d,this.limit=p,this.limitType=v,this.startAt=N,this.endAt=j,this.wt=null,this._t=null}}function yh(i,e,t,a,d,p,v,N){return new uc(i,e,t,a,d,p,v,N)}function Hc(i){return new uc(i)}function kg(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function go(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Rd(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function lc(i){return null!==i.collectionGroup}function tl(i){const e=en(i);if(null===e.wt){e.wt=[];const t=Rd(e),a=go(e);if(null!==t&&null===a)t.isKeyField()||e.wt.push(new Td(t)),e.wt.push(new Td(Rr.keyField(),"asc"));else{let d=!1;for(const p of e.explicitOrderBy)e.wt.push(p),p.field.isKeyField()&&(d=!0);if(!d){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Td(Rr.keyField(),p))}}}return e.wt}function na(i){const e=en(i);if(!e._t)if("F"===e.limitType)e._t=po(e.path,e.collectionGroup,tl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of tl(e))t.push(new Td(p.field,"desc"===p.dir?"asc":"desc"));const a=e.endAt?new Ju(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Ju(e.startAt.position,e.startAt.inclusive):null;e._t=po(e.path,e.collectionGroup,t,e.filters,e.limit,a,d)}return e._t}function Nd(i,e){e.getFirstInequalityField(),Rd(i);const t=i.filters.concat([e]);return new uc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function $c(i,e,t){return new uc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function nl(i,e){return oc(na(i),na(e))&&i.limitType===e.limitType}function nf(i){return`${jc(na(i))}|lt:${i.limitType}`}function ou(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(a=>xg(a)).join(", ")}]`),Ua(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(a=>{return`${(d=a).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Id(a)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Id(a)).join(",")),`Target(${t})`}(na(i))}; limitType=${i.limitType})`}function cc(i,e){return e.isFoundDocument()&&function(t,a){const d=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):un.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,a){for(const d of tl(t))if(!d.field.isKeyField()&&null===a.data.field(d.field))return!1;return!0}(i,e)&&function(t,a){for(const d of t.filters)if(!d.matches(a))return!1;return!0}(i,e)&&(a=e,!((t=i).startAt&&!function(d,p,v){const N=ph(d,p,v);return d.inclusive?N<=0:N<0}(t.startAt,tl(t),a)||t.endAt&&!function(d,p,v){const N=ph(d,p,v);return d.inclusive?N>=0:N>0}(t.endAt,tl(t),a)));var t,a}function Tl(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function _h(i){return(e,t)=>{let a=!1;for(const d of tl(i)){const p=Lg(d,e,t);if(0!==p)return p;a=a||d.field.isKeyField()}return 0}}function Lg(i,e,t){const a=i.field.isKeyField()?un.comparator(e.key,t.key):function(d,p,v){const N=p.data.field(d),j=v.data.field(d);return null!==N&&null!==j?$a(N,j):Kt()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Kt()}}class Ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[d,p]of a)if(this.equalsFn(d,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),d=this.inner[a];if(void 0===d)return this.inner[a]=[[e,t]],void this.innerSize++;for(let p=0;p<d.length;p++)if(this.equalsFn(d[p][0],e))return void(d[p]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return 1===a.length?delete this.inner[t]:a.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,(t,a)=>{for(const[d,p]of a)e(d,p)})}isEmpty(){return nc(this.inner)}size(){return this.innerSize}}const rf=new ri(un.comparator);function ra(){return rf}const vh=new ri(un.comparator);function rl(...i){let e=vh;for(const t of i)e=e.insert(t.key,t);return e}function sp(i){let e=vh;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function au(){return Pd()}function sf(){return Pd()}function Pd(){return new Ga(i=>i.toString(),(i,e)=>i.isEqual(e))}const op=new ri(un.comparator),ga=new Ki(un.comparator);function Ir(...i){let e=ga;for(const t of i)e=e.add(t);return e}const xd=new Ki(ir);function Gc(){return xd}function mo(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function Od(i){return{integerValue:""+i}}function zc(i,e){return Pc(e)?Od(e):mo(i,e)}class Wc{constructor(){this._=void 0}}function ma(i,e,t){return i instanceof dc?function(a,d){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return d&&_r(d)&&(d=Kn(d)),d&&(p.fields.__previous_value__=d),{mapValue:p}}(t,e):i instanceof Sl?Eh(i,e):i instanceof qc?af(i,e):function(a,d){const p=ap(a,d),v=uu(p)+uu(a.gt);return fh(p)&&fh(a.gt)?Od(v):mo(a.serializer,v)}(i,e)}function kd(i,e,t){return i instanceof Sl?Eh(i,e):i instanceof qc?af(i,e):t}function ap(i,e){return i instanceof Al?fh(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class dc extends Wc{}class Sl extends Wc{constructor(e){super(),this.elements=e}}function Eh(i,e){const t=up(e);for(const a of i.elements)t.some(d=>ro(d,a))||t.push(a);return{arrayValue:{values:t}}}class qc extends Wc{constructor(e){super(),this.elements=e}}function af(i,e){let t=up(e);for(const a of i.elements)t=t.filter(d=>!ro(d,a));return{arrayValue:{values:t}}}class Al extends Wc{constructor(e,t){super(),this.serializer=e,this.gt=t}}function uu(i){return Xt(i.integerValue||i.doubleValue)}function up(i){return Xu(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ml{constructor(e,t){this.field=e,this.transform=t}}class $m{constructor(e,t){this.version=e,this.transformResults=t}}class fs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fs}static exists(e){return new fs(void 0,e)}static updateTime(e){return new fs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yo(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class hc{}function Rl(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ld(i.key,fs.none()):new Kc(i.key,i.data,fs.none());{const t=i.data,a=Fs.empty();let d=new Ki(Rr.comparator);for(let p of e.fields)if(!d.has(p)){let v=t.field(p);null===v&&p.length>1&&(p=p.popLast(),v=t.field(p)),null===v?a.delete(p):a.set(p,v),d=d.add(p)}return new Nl(i.key,a,new Y(d.toArray()),fs.none())}}function uf(i,e,t){i instanceof Kc?function(a,d,p){const v=a.value.clone(),N=Yc(a.fieldTransforms,d,p.transformResults);v.setAll(N),d.convertToFoundDocument(p.version,v).setHasCommittedMutations()}(i,e,t):i instanceof Nl?function(a,d,p){if(!yo(a.precondition,d))return void d.convertToUnknownDocument(p.version);const v=Yc(a.fieldTransforms,d,p.transformResults),N=d.data;N.setAll(Zc(a)),N.setAll(v),d.convertToFoundDocument(p.version,N).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sa(i,e,t,a){return i instanceof Kc?function(d,p,v,N){if(!yo(d.precondition,p))return v;const j=d.value.clone(),q=lp(d.fieldTransforms,N,p);return j.setAll(q),p.convertToFoundDocument(p.version,j).setHasLocalMutations(),null}(i,e,t,a):i instanceof Nl?function(d,p,v,N){if(!yo(d.precondition,p))return v;const j=lp(d.fieldTransforms,N,p),q=p.data;return q.setAll(Zc(d)),q.setAll(j),p.convertToFoundDocument(p.version,q).setHasLocalMutations(),null===v?null:v.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ue=>ue.field))}(i,e,t,a):(v=t,yo(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):v);var p,v}function Aa(i,e){let t=null;for(const a of i.fieldTransforms){const d=e.data.field(a.field),p=ap(a.transform,d||null);null!=p&&(null===t&&(t=Fs.empty()),t.set(a.field,p))}return t||null}function fc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===a||t&&a&&Xo(t,a,(d,p)=>function Hm(i,e){return i.field.isEqual(e.field)&&(a=e.transform,(t=i.transform)instanceof Sl&&a instanceof Sl||t instanceof qc&&a instanceof qc?Xo(t.elements,a.elements,ro):t instanceof Al&&a instanceof Al?ro(t.gt,a.gt):t instanceof dc&&a instanceof dc);var t,a}(d,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,a}class Kc extends hc{constructor(e,t,a,d=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Nl extends hc{constructor(e,t,a,d,p=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=d,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Zc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function Yc(i,e,t){const a=new Map;$n(i.length===t.length);for(let d=0;d<t.length;d++){const p=i[d],v=p.transform,N=e.data.field(p.field);a.set(p.field,kd(v,N,t[d]))}return a}function lp(i,e,t){const a=new Map;for(const d of i){const p=d.transform,v=t.data.field(d.field);a.set(d.field,ma(p,v,e))}return a}class Ld extends hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lf extends hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class I{constructor(e,t,a,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=d}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const p=this.mutations[d];p.key.isEqual(e.key)&&uf(p,e,a[d])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Sa(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Sa(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=sf();return this.mutations.forEach(d=>{const p=e.get(d.key),v=p.overlayedDocument;let N=this.applyToLocalView(v,p.mutatedFields);N=t.has(d.key)?null:N;const j=Rl(v,N);null!==j&&a.set(d.key,j),v.isValidDocument()||v.convertToNoDocument(Gn.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ir())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,a)=>fc(t,a))&&Xo(this.baseMutations,e.baseMutations,(t,a)=>fc(t,a))}}class m{constructor(e,t,a,d){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=d}static from(e,t,a){$n(e.mutations.length===a.length);let d=op;const p=e.mutations;for(let v=0;v<p.length;v++)d=d.insert(p[v].key,a[v].version);return new m(e,t,a,d)}}class _{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ${constructor(e,t){this.count=e,this.unchangedNames=t}}var te,Se;function at(i){switch(i){default:return Kt();case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0}}function Wt(i){if(void 0===i)return Xr("GRPC error has no .code"),ft.UNKNOWN;switch(i){case te.OK:return ft.OK;case te.CANCELLED:return ft.CANCELLED;case te.UNKNOWN:return ft.UNKNOWN;case te.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case te.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case te.INTERNAL:return ft.INTERNAL;case te.UNAVAILABLE:return ft.UNAVAILABLE;case te.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case te.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case te.NOT_FOUND:return ft.NOT_FOUND;case te.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case te.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case te.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case te.ABORTED:return ft.ABORTED;case te.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case te.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case te.DATA_LOSS:return ft.DATA_LOSS;default:return Kt()}}(Se=te||(te={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";class sn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return In}static getOrCreateInstance(){return null===In&&(In=new sn),In}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let In=null;function On(){return new TextEncoder}const us=new Fa([4294967295,4294967295],0);function za(i){const e=On().encode(i),t=new Ed;return t.update(e),new Uint8Array(t.digest())}function Qc(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),d=e.getUint32(8,!0),p=e.getUint32(12,!0);return[new Fa([t,a],0),new Fa([d,p],0)]}class pc{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Pl(`Invalid padding: ${t}`);if(a<0)throw new Pl(`Invalid hash count: ${a}`);if(e.length>0&&0===this.hashCount)throw new Pl(`Invalid hash count: ${a}`);if(0===e.length&&0!==t)throw new Pl(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Fa.fromNumber(this.It)}Et(e,t,a){let d=e.add(t.multiply(Fa.fromNumber(a)));return 1===d.compare(us)&&(d=new Fa([d.getBits(0),d.getBits(1)],0)),d.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=za(e),[a,d]=Qc(t);for(let p=0;p<this.hashCount;p++){const v=this.Et(a,d,p);if(!this.At(v))return!1}return!0}static create(e,t,a){const d=e%8==0?0:8-e%8,p=new Uint8Array(Math.ceil(e/8)),v=new pc(p,d,t);return a.forEach(N=>v.insert(N)),v}insert(e){if(0===this.It)return;const t=za(e),[a,d]=Qc(t);for(let p=0;p<this.hashCount;p++){const v=this.Et(a,d,p);this.Rt(v)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xl{constructor(e,t,a,d,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=d,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const d=new Map;return d.set(e,ii.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new xl(Gn.min(),d,new ri(ir),ra(),Ir())}}class ii{constructor(e,t,a,d,p){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=d,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new ii(a,t,Ir(),Ir(),Ir())}}class $r{constructor(e,t,a,d){this.Pt=e,this.removedTargetIds=t,this.key=a,this.bt=d}}class Tr{constructor(e,t){this.targetId=e,this.Vt=t}}class Mu{constructor(e,t,a=nt.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=d}}class Oi{constructor(){this.St=0,this.Dt=il(),this.Ct=nt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ir(),t=Ir(),a=Ir();return this.Dt.forEach((d,p)=>{switch(p){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:a=a.add(d);break;default:Kt()}}),new ii(this.Ct,this.xt,e,t,a)}Ft(){this.Nt=!1,this.Dt=il()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Xc{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ra(),this.zt=cp(),this.Wt=new ri(ir)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const a=this.Zt(t);switch(e.state){case 0:this.te(t)&&a.$t(e.resumeToken);break;case 1:a.Ut(),a.kt||a.Ft(),a.$t(e.resumeToken);break;case 2:a.Ut(),a.kt||this.removeTarget(t);break;case 3:this.te(t)&&(a.Kt(),a.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),a.$t(e.resumeToken));break;default:Kt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((a,d)=>{this.te(d)&&t(d)})}ne(e){var t;const a=e.targetId,d=e.Vt.count,p=this.se(a);if(p){const v=p.target;if(ac(v))if(0===d){const N=new un(v.path);this.Yt(a,N,Ji.newNoDocument(N,Gn.min()))}else $n(1===d);else{const N=this.ie(a);if(N!==d){const j=this.re(e,N);0!==j&&(this.ee(a),this.Wt=this.Wt.insert(a,2===j?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=sn.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(q,ue,ke){var dt,Mt,rn,bn,Rn,Pr;const Ui={localCacheCount:ue,existenceFilterCount:ke.count},Gr=ke.unchangedNames;return Gr&&(Ui.bloomFilter={applied:0===q,hashCount:null!==(dt=Gr?.hashCount)&&void 0!==dt?dt:0,bitmapLength:null!==(bn=null===(rn=null===(Mt=Gr?.bits)||void 0===Mt?void 0:Mt.bitmap)||void 0===rn?void 0:rn.length)&&void 0!==bn?bn:0,padding:null!==(Pr=null===(Rn=Gr?.bits)||void 0===Rn?void 0:Rn.padding)&&void 0!==Pr?Pr:0}),Ui}(j,N,e.Vt))}}}}re(e,t){const{unchangedNames:a,count:d}=e.Vt;if(!a||!a.bits)return 1;const{bits:{bitmap:p="",padding:v=0},hashCount:N=0}=a;let j,q;try{j=wn(p).toUint8Array()}catch(ue){if(ue instanceof Ee)return ks("Decoding the base64 bloom filter in existence filter failed ("+ue.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ue}try{q=new pc(j,v,N)}catch(ue){return ks(ue instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",ue),1}return 0===q.It?1:d!==t-this.oe(e.targetId,q)?2:0}oe(e,t){const a=this.Gt.getRemoteKeysForTarget(e);let d=0;return a.forEach(p=>{const v=this.Gt.ue(),N=`projects/${v.projectId}/databases/${v.database}/documents/${p.path.canonicalString()}`;t.vt(N)||(this.Yt(e,p,null),d++)}),d}ce(e){const t=new Map;this.Qt.forEach((p,v)=>{const N=this.se(v);if(N){if(p.current&&ac(N.target)){const j=new un(N.target.path);null!==this.jt.get(j)||this.ae(v,j)||this.Yt(v,j,Ji.newNoDocument(j,e))}p.Mt&&(t.set(v,p.Ot()),p.Ft())}});let a=Ir();this.zt.forEach((p,v)=>{let N=!0;v.forEachWhile(j=>{const q=this.se(j);return!q||"TargetPurposeLimboResolution"===q.purpose||(N=!1,!1)}),N&&(a=a.add(p))}),this.jt.forEach((p,v)=>v.setReadTime(e));const d=new xl(e,t,this.Wt,this.jt,a);return this.jt=ra(),this.zt=cp(),this.Wt=new ri(ir),d}Jt(e,t){if(!this.te(e))return;const a=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,a),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,a){if(!this.te(e))return;const d=this.Zt(e);this.ae(e,t)?d.Bt(t,1):d.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),a&&(this.jt=this.jt.insert(t,a))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Oi,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ki(ir),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ht("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Oi),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function cp(){return new ri(un.comparator)}function il(){return new ri(un.comparator)}const Fd={asc:"ASCENDING",desc:"DESCENDING"},Vs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zr={and:"AND",or:"OR"};class Wa{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gm(i,e){return i.useProto3Json||Ua(e)?e:{value:e}}function Vd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lu(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function f_(i,e){return Vd(i,e.toTimestamp())}function Us(i){return $n(!!i),Gn.fromTimestamp(function(e){const t=mn(e);return new Pi(t.seconds,t.nanos)}(i))}function dp(i,e){return(t=i,new fr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ud(i){const e=fr.fromString(i);return $n(__(e)),e}function Ol(i,e){return dp(i.databaseId,e.path)}function sl(i,e){const t=Ud(e);if(t.get(1)!==i.databaseId.projectId)throw new Pt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Pt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new un(g_(t))}function cf(i,e){return dp(i.databaseId,e)}function p_(i){const e=Ud(i);return 4===e.length?fr.emptyPath():g_(e)}function Bd(i){return new fr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function g_(i){return $n(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function df(i,e,t){return{name:Ol(i,e),fields:t.value.mapValue.fields}}function hp(i,e,t){const a=sl(i,e.name),d=Us(e.updateTime),p=e.createTime?Us(e.createTime):Gn.min(),v=new Fs({mapValue:{fields:e.fields}}),N=Ji.newFoundDocument(a,d,p,v);return t&&N.setHasCommittedMutations(),t?N.setHasCommittedMutations():N}function Ur(i,e){let t;if(e instanceof Kc)t={update:df(i,e.key,e.value)};else if(e instanceof Ld)t={delete:Ol(i,e.key)};else if(e instanceof Nl)t={update:df(i,e.key,e.data),updateMask:fv(e.fieldMask)};else{if(!(e instanceof lf))return Kt();t={verify:Ol(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(d,p){const v=p.transform;if(v instanceof dc)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Sl)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof qc)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Al)return{fieldPath:p.field.canonicalString(),increment:v.gt};throw Kt()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:f_(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:Kt()),t;var d}function wh(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?fs.updateTime(Us(d.updateTime)):void 0!==d.exists?fs.exists(d.exists):fs.none():fs.none(),a=e.updateTransforms?e.updateTransforms.map(d=>function(p,v){let N=null;"setToServerValue"in v?($n("REQUEST_TIME"===v.setToServerValue),N=new dc):"appendMissingElements"in v?N=new Sl(v.appendMissingElements.values||[]):"removeAllFromArray"in v?N=new qc(v.removeAllFromArray.values||[]):"increment"in v?N=new Al(p,v.increment):Kt();const j=Rr.fromServerFormat(v.fieldPath);return new Ml(j,N)}(i,d)):[];var d;if(e.update){const d=sl(i,e.update.name),p=new Fs({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new Y((e.updateMask.fieldPaths||[]).map(q=>Rr.fromServerFormat(q)));return new Nl(d,p,v,t,a)}return new Kc(d,p,t,a)}if(e.delete){const d=sl(i,e.delete);return new Ld(d,t)}if(e.verify){const d=sl(i,e.verify);return new lf(d,t)}return Kt()}function zm(i,e){return{documents:[cf(i,e.path)]}}function ol(i,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=cf(i,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=cf(i,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const d=function(j){if(0!==j.length)return y_(Si.create(j,"and"))}(e.filters);d&&(t.structuredQuery.where=d);const p=function(j){if(0!==j.length)return j.map(q=>{return{field:Jc((ue=q).field),direction:_o(ue.dir)};var ue})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const v=Gm(i,e.limit);var N,j;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(t.structuredQuery.endAt={before:!(j=e.endAt).inclusive,values:j.position}),t}function pp(i){let e=p_(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let d=null;if(a>0){$n(1===a);const ue=t.from[0];ue.allDescendants?d=ue.collectionId:e=e.child(ue.collectionId)}let p=[];t.where&&(p=function(ue){const ke=m_(ue);return ke instanceof Si&&ic(ke)?ke.getFilters():[ke]}(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(ue=>{return new Td(mp((ke=ue).field),function(dt){switch(dt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ke.direction));var ke}));let N=null;t.limit&&(N=function(ue){let ke;return ke="object"==typeof ue?ue.value:ue,Ua(ke)?null:ke}(t.limit));let j=null;var ue;t.startAt&&(j=new Ju((ue=t.startAt).values||[],!!ue.before));let q=null;return t.endAt&&(q=function(ue){return new Ju(ue.values||[],!ue.before)}(t.endAt)),yh(e,d,v,p,N,"F",j,q)}function m_(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=mp(e.unaryFilter.field);return ei.create(t,"==",{doubleValue:NaN});case"IS_NULL":const a=mp(e.unaryFilter.field);return ei.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=mp(e.unaryFilter.field);return ei.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=mp(e.unaryFilter.field);return ei.create(p,"!=",{nullValue:"NULL_VALUE"});default:return Kt()}}(i):void 0!==i.fieldFilter?ei.create(mp((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return Si.create(e.compositeFilter.filters.map(t=>m_(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Kt()}}(e.compositeFilter.op))}(i):Kt();var e}function _o(i){return Fd[i]}function gp(i){return Vs[i]}function Wm(i){return Zr[i]}function Jc(i){return{fieldPath:i.canonicalString()}}function mp(i){return Rr.fromServerFormat(i.fieldPath)}function y_(i){return i instanceof ei?function(e){if("=="===e.op){if(Rg(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NAN"}};if(Bm(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Rg(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NOT_NAN"}};if(Bm(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jc(e.field),op:gp(e.op),value:e.value}}}(i):i instanceof Si?function(e){const t=e.getFilters().map(a=>y_(a));return 1===t.length?t[0]:{compositeFilter:{op:Wm(e.op),filters:t}}}(i):Kt()}function fv(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function __(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class qa{constructor(e,t,a,d,p=Gn.min(),v=Gn.min(),N=nt.EMPTY_BYTE_STRING,j=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=d,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=N,this.expectedCount=j}withSequenceNumber(e){return new qa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qm{constructor(e){this.fe=e}}function E_(i,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Ol(d=i.fe,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Vd(d,p.version.toTimestamp()),createTime:Vd(d,p.createTime.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:ed(e.version)};else{if(!e.isUnknownDocument())return Kt();a.unknownDocument={path:t.path.toArray(),version:ed(e.version)}}var d,p;return a}function Vg(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function ed(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yr(i){const e=new Pi(i.seconds,i.nanoseconds);return Gn.fromTimestamp(e)}function Ll(i,e){const t=(e.baseMutations||[]).map(p=>wh(i.fe,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const a=e.mutations.map(p=>wh(i.fe,p)),d=Pi.fromMillis(e.localWriteTimeMs);return new I(e.batchId,d,t,a)}function hf(i){const e=Yr(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Yr(i.lastLimboFreeSnapshotVersion):Gn.min();let a;var d;return void 0!==i.query.documents?($n(1===(d=i.query).documents.length),a=na(Hc(p_(d.documents[0])))):a=na(pp(i.query)),new qa(a,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,nt.fromBase64String(i.resumeToken))}function ff(i,e){const t=ed(e.snapshotVersion),a=ed(e.lastLimboFreeSnapshotVersion);let d;d=ac(e.target)?zm(i.fe,e.target):ol(i.fe,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jc(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:d}}function pf(i){const e=pp({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?$c(e,e.limit,"L"):e}function Ch(i,e){return new _(e.largestBatchId,wh(i.fe,e.overlayMutation))}function td(i,e){const t=e.path.lastSegment();return[i,Zs(e.path.popLast()),t]}function yp(i,e,t,a){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:ed(a.readTime),documentKey:Zs(a.documentKey.path),largestBatchId:a.largestBatchId}}class xr{getBundleMetadata(e,t){return Ug(e).get(t).next(a=>{if(a)return{id:(d=a).bundleId,createTime:Yr(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Ug(e).put({bundleId:(a=t).id,createTime:ed(Us(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return _p(e).get(t).next(a=>{if(a)return{name:(d=a).name,query:pf(d.bundledQuery),readTime:Yr(d.readTime)};var d})}saveNamedQuery(e,t){return _p(e).put({name:(a=t).name,readTime:ed(Us(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Ug(i){return ho(i,"bundles")}function _p(i){return ho(i,"namedQueries")}class Km{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Km(e,t.uid||"")}getOverlay(e,t){return ps(e).get(td(this.userId,t)).next(a=>a?Ch(this.serializer,a):null)}getOverlays(e,t){const a=au();return be.forEach(t,d=>this.getOverlay(e,d).next(p=>{null!==p&&a.set(d,p)})).next(()=>a)}saveOverlays(e,t,a){const d=[];return a.forEach((p,v)=>{const N=new _(t,v);d.push(this.we(e,N))}),be.waitFor(d)}removeOverlaysForBatchId(e,t,a){const d=new Set;t.forEach(v=>d.add(Zs(v.getCollectionPath())));const p=[];return d.forEach(v=>{const N=IDBKeyRange.bound([this.userId,v,a],[this.userId,v,a+1],!1,!0);p.push(ps(e).J("collectionPathOverlayIndex",N))}),be.waitFor(p)}getOverlaysForCollection(e,t,a){const d=au(),p=Zs(t),v=IDBKeyRange.bound([this.userId,p,a],[this.userId,p,Number.POSITIVE_INFINITY],!0);return ps(e).j("collectionPathOverlayIndex",v).next(N=>{for(const j of N){const q=Ch(this.serializer,j);d.set(q.getKey(),q)}return d})}getOverlaysForCollectionGroup(e,t,a,d){const p=au();let v;const N=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ps(e).X({index:"collectionGroupOverlayIndex",range:N},(j,q,ue)=>{const ke=Ch(this.serializer,q);p.size()<d||ke.largestBatchId===v?(p.set(ke.getKey(),ke),v=ke.largestBatchId):ue.done()}).next(()=>p)}we(e,t){return ps(e).put(function(a,d,p){const[v,N,j]=td(d,p.mutation.key);return{userId:d,collectionPath:N,documentId:j,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:Ur(a.fe,p.mutation)}}(this.serializer,this.userId,t))}}function ps(i){return ho(i,"documentOverlays")}class nd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Xt(e.integerValue));else if("doubleValue"in e){const a=Xt(e.doubleValue);isNaN(a)?this.ye(t,13):(this.ye(t,15),Xl(a)?t.pe(0):t.pe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ye(t,20),"string"==typeof a?t.Ie(a):(t.Ie(`${a.seconds||""}`),t.pe(a.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(wn(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.ye(t,45),t.pe(a.latitude||0),t.pe(a.longitude||0)}else"mapValue"in e?Ng(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Kt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const a=e.fields||{};this.ye(t,55);for(const d of Object.keys(a))this.Te(d,t),this.me(a[d],t)}Pe(e,t){const a=e.values||[];this.ye(t,50);for(const d of a)this.me(d,t)}ve(e,t){this.ye(t,37),un.fromName(e).path.forEach(a=>{this.ye(t,60),this.be(a,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function pv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Bg(i){const e=64-function(t){let a=0;for(let d=0;d<8;++d){const p=pv(255&t[d]);if(a+=p,8!==p)break}return a}(i);return Math.ceil(e/8)}nd.Ve=new nd;class w_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.De(a.value),a=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Ne(a.value),a=t.next();this.ke()}Me(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.De(a);else if(a<2048)this.De(960|a>>>6),this.De(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.De(480|a>>>12),this.De(128|63&a>>>6),this.De(128|63&a);else{const d=t.codePointAt(0);this.De(240|d>>>18),this.De(128|63&d>>>12),this.De(128|63&d>>>6),this.De(128|63&d)}}this.Ce()}$e(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Ne(a);else if(a<2048)this.Ne(960|a>>>6),this.Ne(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a);else{const d=t.codePointAt(0);this.Ne(240|d>>>18),this.Ne(128|63&d>>>12),this.Ne(128|63&d>>>6),this.Ne(128|63&d)}}this.ke()}Oe(e){const t=this.Fe(e),a=Bg(t);this.Be(1+a),this.buffer[this.position++]=255&a;for(let d=t.length-a;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Le(e){const t=this.Fe(e),a=Bg(t);this.Be(1+a),this.buffer[this.position++]=~(255&a);for(let d=t.length-a;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(d){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,d,!1),new Uint8Array(p.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let d=1;d<t.length;++d)t[d]^=a?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const d=new Uint8Array(a);d.set(this.buffer),this.buffer=d}}class Ih{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Hd{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class rd{constructor(){this.je=new w_,this.ze=new Ih(this.je),this.We=new Hd(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class id{constructor(e,t,a,d){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=d}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new id(this.indexId,this.documentKey,this.arrayValue,a)}}function gc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Fl(i.arrayValue,e.arrayValue),0!==t?t:(t=Fl(i.directionalValue,e.directionalValue),0!==t?t:un.comparator(i.documentKey,e.documentKey)))}function Fl(i,e){for(let t=0;t<i.length&&t<e.length;++t){const a=i[t]-e[t];if(0!==a)return a}return i.length-e.length}class gv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const a=t;a.isInequality()?this.Ze=a:this.Xe.push(a)}}tn(e){$n(e.collectionGroup===this.collectionId);const t=wa(e);if(void 0!==t&&!this.en(t))return!1;const a=Jo(e);let d=new Set,p=0,v=0;for(;p<a.length&&this.en(a[p]);++p)d=d.add(a[p].fieldPath.canonicalString());if(p===a.length)return!0;if(void 0!==this.Ze){if(!d.has(this.Ze.field.canonicalString())){const N=a[p];if(!this.nn(this.Ze,N)||!this.sn(this.Ye[v++],N))return!1}++p}for(;p<a.length;++p)if(v>=this.Ye.length||!this.sn(this.Ye[v++],a[p]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function vp(i){var e,t;if($n(i instanceof ei||i instanceof Si),i instanceof ei){if(i instanceof fo){const d=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(p=>ei.create(i.field,"==",p)))||[];return Si.create(d,"or")}return i}const a=i.filters.map(d=>vp(d));return Si.create(a,i.op)}function Zm(i){if(0===i.getFilters().length)return[];const e=Qm(vp(i));return $n(Hg(e)),jg(e)||Ym(e)?[e]:e.getFilters()}function jg(i){return i instanceof ei}function Ym(i){return i instanceof Si&&ic(i)}function Hg(i){return jg(i)||Ym(i)||function(e){if(e instanceof Si&&Su(e)){for(const t of e.getFilters())if(!jg(t)&&!Ym(t))return!1;return!0}return!1}(i)}function Qm(i){if($n(i instanceof ei||i instanceof Si),i instanceof ei)return i;if(1===i.filters.length)return Qm(i.filters[0]);const e=i.filters.map(a=>Qm(a));let t=Si.create(e,i.op);return t=gf(t),Hg(t)?t:($n(t instanceof Si),$n(rc(t)),$n(t.filters.length>1),t.filters.reduce((a,d)=>Ep(a,d)))}function Ep(i,e){let t;return $n(i instanceof ei||i instanceof Si),$n(e instanceof ei||e instanceof Si),t=i instanceof ei?e instanceof ei?Si.create([i,e],"and"):Xm(i,e):e instanceof ei?Xm(e,i):function(a,d){if($n(a.filters.length>0&&d.filters.length>0),rc(a)&&rc(d))return Uc(a,d.getFilters());const p=Su(a)?a:d,v=Su(a)?d:a,N=p.filters.map(j=>Ep(j,v));return Si.create(N,"or")}(i,e),gf(t)}function Xm(i,e){if(rc(e))return Uc(e,i.getFilters());{const t=e.filters.map(a=>Ep(i,a));return Si.create(t,"or")}}function gf(i){if($n(i instanceof ei||i instanceof Si),i instanceof ei)return i;const e=i.getFilters();if(1===e.length)return gf(e[0]);if(ef(i))return i;const t=e.map(d=>gf(d)),a=[];return t.forEach(d=>{d instanceof ei?a.push(d):d instanceof Si&&(d.op===i.op?a.push(...d.filters):a.push(d))}),1===a.length?a[0]:Si.create(a,i.op)}class mv{constructor(){this.rn=new $d}addToCollectionParentIndex(e,t){return this.rn.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(b.min())}getMinOffsetFromCollectionGroup(e,t){return be.resolve(b.min())}updateCollectionGroup(e,t,a){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class $d{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),d=this.index[t]||new Ki(fr.comparator),p=!d.has(a);return this.index[t]=d.add(a),p}has(e){const t=e.lastSegment(),a=e.popLast(),d=this.index[t];return d&&d.has(a)}getEntries(e){return(this.index[e]||new Ki(fr.comparator)).toArray()}}const fi=new Uint8Array(0);class wp{constructor(e,t){this.user=e,this.databaseId=t,this.on=new $d,this.un=new Ga(a=>jc(a),(a,d)=>oc(a,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const a=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const p={collectionId:a,parent:Zs(d)};return mf(e).put(p)}return be.resolve()}getCollectionParents(e,t){const a=[],d=IDBKeyRange.bound([t,""],[Ql(t),""],!1,!0);return mf(e).j(d).next(p=>{for(const v of p){if(v.collectionId!==t)break;a.push(Ba(v.parent))}return a})}addFieldIndex(e,t){const a=bh(e),d={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var v;delete d.indexId;const p=a.add(d);if(t.indexState){const v=sd(e);return p.next(N=>{v.put(yp(N,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const a=bh(e),d=sd(e),p=Vl(e);return a.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=Vl(e);let d=!0;const p=new Map;return be.forEach(this.cn(t),v=>this.an(e,v).next(N=>{d&&(d=!!N),p.set(v,N)})).next(()=>{if(d){let v=Ir();const N=[];return be.forEach(p,(j,q)=>{var ue;Ht("IndexedDbIndexManager",`Using index ${ue=j,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(Gr=>`${Gr.fieldPath}:${Gr.kind}`).join(",")}`} to execute ${jc(t)}`);const ke=function(Gr,wo){const Es=wa(wo);if(void 0===Es)return null;for(const Ms of el(Gr,Es.fieldPath))switch(Ms.op){case"array-contains-any":return Ms.value.arrayValue.values||[];case"array-contains":return[Ms.value]}return null}(q,j),dt=function(Gr,wo){const Es=new Map;for(const Ms of Jo(wo))for(const Xa of el(Gr,Ms.fieldPath))switch(Xa.op){case"==":case"in":Es.set(Ms.fieldPath.canonicalString(),Xa.value);break;case"not-in":case"!=":return Es.set(Ms.fieldPath.canonicalString(),Xa.value),Array.from(Es.values())}return null}(q,j),Mt=function(Gr,wo){const Es=[];let Ms=!0;for(const Xa of Jo(wo)){const Qf=0===Xa.kind?Dl(Gr,Xa.fieldPath,Gr.startAt):su(Gr,Xa.fieldPath,Gr.startAt);Es.push(Qf.value),Ms&&(Ms=Qf.inclusive)}return new Ju(Es,Ms)}(q,j),rn=function(Gr,wo){const Es=[];let Ms=!0;for(const Xa of Jo(wo)){const Qf=0===Xa.kind?su(Gr,Xa.fieldPath,Gr.endAt):Dl(Gr,Xa.fieldPath,Gr.endAt);Es.push(Qf.value),Ms&&(Ms=Qf.inclusive)}return new Ju(Es,Ms)}(q,j),bn=this.hn(j,q,Mt),Rn=this.hn(j,q,rn),Pr=this.ln(j,q,dt),Ui=this.fn(j.indexId,ke,bn,Mt.inclusive,Rn,rn.inclusive,Pr);return be.forEach(Ui,Gr=>a.H(Gr,t.limit).next(wo=>{wo.forEach(Es=>{const Ms=un.fromSegments(Es.documentKey);v.has(Ms)||(v=v.add(Ms),N.push(Ms))})}))}).next(()=>N)}return be.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Zm(Si.create(e.filters,"and")).map(a=>po(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,a,d,p,v,N){const j=(null!=t?t.length:1)*Math.max(a.length,p.length),q=j/(null!=t?t.length:1),ue=[];for(let ke=0;ke<j;++ke){const dt=t?this.dn(t[ke/q]):fi,Mt=this.wn(e,dt,a[ke%q],d),rn=this._n(e,dt,p[ke%q],v),bn=N.map(Rn=>this.wn(e,dt,Rn,!0));ue.push(...this.createRange(Mt,rn,bn))}return ue}wn(e,t,a,d){const p=new id(e,un.empty(),t,a);return d?p:p.Je()}_n(e,t,a,d){const p=new id(e,un.empty(),t,a);return d?p.Je():p}an(e,t){const a=new gv(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(p=>{let v=null;for(const N of p)a.tn(N)&&(!v||N.fields.length>v.fields.length)&&(v=N);return v})}getIndexType(e,t){let a=2;const d=this.cn(t);return be.forEach(d,p=>this.an(e,p).next(v=>{v?0!==a&&v.fields.length<function(N){let j=new Ki(Rr.comparator),q=!1;for(const ue of N.filters)for(const ke of ue.getFlattenedFilters())ke.field.isKeyField()||("array-contains"===ke.op||"array-contains-any"===ke.op?q=!0:j=j.add(ke.field));for(const ue of N.orderBy)ue.field.isKeyField()||(j=j.add(ue.field));return j.size+(q?1:0)}(p)&&(a=1):a=0})).next(()=>null!==t.limit&&d.length>1&&2===a?1:a)}mn(e,t){const a=new rd;for(const d of Jo(e)){const p=t.data.field(d.fieldPath);if(null==p)return null;const v=a.He(d.kind);nd.Ve._e(p,v)}return a.Qe()}dn(e){const t=new rd;return nd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const a=new rd;return nd.Ve._e(Ys(this.databaseId,t),a.He(function(d){const p=Jo(d);return 0===p.length?0:p[p.length-1].kind}(e))),a.Qe()}ln(e,t,a){if(null===a)return[];let d=[];d.push(new rd);let p=0;for(const v of Jo(e)){const N=a[p++];for(const j of d)if(this.yn(t,v.fieldPath)&&Xu(N))d=this.pn(d,v,N);else{const q=j.He(v.kind);nd.Ve._e(N,q)}}return this.In(d)}hn(e,t,a){return this.ln(e,t,a.position)}In(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].Qe();return t}pn(e,t,a){const d=[...e],p=[];for(const v of a.arrayValue.values||[])for(const N of d){const j=new rd;j.seed(N.Qe()),nd.Ve._e(v,j.He(t.kind)),p.push(j)}return p}yn(e,t){return!!e.filters.find(a=>a instanceof ei&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=bh(e),d=sd(e);return(t?a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.j()).next(p=>{const v=[];return be.forEach(p,N=>d.get([N.indexId,this.uid]).next(j=>{v.push(function(q,ue){const ke=ue?new Ku(ue.sequenceNumber,new b(Yr(ue.readTime),new un(Ba(ue.documentKey)),ue.largestBatchId)):Ku.empty(),dt=q.fields.map(([Mt,rn])=>new ea(Rr.fromServerFormat(Mt),rn));return new xi(q.indexId,q.collectionGroup,dt,ke)}(N,j))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,d)=>{const p=a.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==p?p:ir(a.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const d=bh(e),p=sd(e);return this.Tn(e).next(v=>d.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(N=>be.forEach(N,j=>p.put(yp(j.indexId,this.user,v,a)))))}updateIndexEntries(e,t){const a=new Map;return be.forEach(t,(d,p)=>{const v=a.get(d.collectionGroup);return(v?be.resolve(v):this.getFieldIndexes(e,d.collectionGroup)).next(N=>(a.set(d.collectionGroup,N),be.forEach(N,j=>this.En(e,d,j).next(q=>{const ue=this.An(p,j);return q.isEqual(ue)?be.resolve():this.vn(e,p,j,q,ue)}))))})}Rn(e,t,a,d){return Vl(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.gn(a,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,a,d){return Vl(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.gn(a,t.key),t.key.path.toArray()])}En(e,t,a){const d=Vl(e);let p=new Ki(gc);return d.X({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.gn(a,t)])},(v,N)=>{p=p.add(new id(a.indexId,t,N.arrayValue,N.directionalValue))}).next(()=>p)}An(e,t){let a=new Ki(gc);const d=this.mn(t,e);if(null==d)return a;const p=wa(t);if(null!=p){const v=e.data.field(p.fieldPath);if(Xu(v))for(const N of v.arrayValue.values||[])a=a.add(new id(t.indexId,e.key,this.dn(N),d))}else a=a.add(new id(t.indexId,e.key,fi,d));return a}vn(e,t,a,d,p){Ht("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(N,j,q,ue,ke){const dt=N.getIterator(),Mt=j.getIterator();let rn=V(dt),bn=V(Mt);for(;rn||bn;){let Rn=!1,Pr=!1;if(rn&&bn){const Ui=q(rn,bn);Ui<0?Pr=!0:Ui>0&&(Rn=!0)}else null!=rn?Pr=!0:Rn=!0;Rn?(ue(bn),bn=V(Mt)):Pr?(ke(rn),rn=V(dt)):(rn=V(dt),bn=V(Mt))}}(d,p,gc,N=>{v.push(this.Rn(e,t,a,N))},N=>{v.push(this.Pn(e,t,a,N))}),be.waitFor(v)}Tn(e){let t=1;return sd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,d,p)=>{p.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((v,N)=>gc(v,N)).filter((v,N,j)=>!N||0!==gc(v,j[N-1]));const d=[];d.push(e);for(const v of a){const N=gc(v,e),j=gc(v,t);if(0===N)d[0]=e.Je();else if(N>0&&j<0)d.push(v),d.push(v.Je());else if(j>0)break}d.push(t);const p=[];for(let v=0;v<d.length;v+=2){if(this.bn(d[v],d[v+1]))return[];p.push(IDBKeyRange.bound([d[v].indexId,this.uid,d[v].arrayValue,d[v].directionalValue,fi,[]],[d[v+1].indexId,this.uid,d[v+1].arrayValue,d[v+1].directionalValue,fi,[]]))}return p}bn(e,t){return gc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(C_)}getMinOffset(e,t){return be.mapArray(this.cn(t),a=>this.an(e,a).next(d=>d||Kt())).next(C_)}}function mf(i){return ho(i,"collectionParents")}function Vl(i){return ho(i,"indexEntries")}function bh(i){return ho(i,"indexConfiguration")}function sd(i){return ho(i,"indexState")}function C_(i){$n(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<i.length;a++){const d=i[a].indexState.offset;P(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new b(e.readTime,e.documentKey,t)}const Jm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ia{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new ia(e,ia.DEFAULT_COLLECTION_PERCENTILE,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $g(i,e,t){const a=i.store("mutations"),d=i.store("documentMutations"),p=[],v=IDBKeyRange.only(t.batchId);let N=0;const j=a.X({range:v},(ue,ke,dt)=>(N++,dt.delete()));p.push(j.next(()=>{$n(1===N)}));const q=[];for(const ue of t.mutations){const ke=ja(e,ue.key.path,t.batchId);p.push(d.delete(ke)),q.push(ue.key)}return be.waitFor(p).next(()=>q)}function ey(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Kt();e=i.noDocument}return JSON.stringify(e).length}ia.DEFAULT_COLLECTION_PERCENTILE=10,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ia.DEFAULT=new ia(41943040,ia.DEFAULT_COLLECTION_PERCENTILE,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ia.DISABLED=new ia(-1,0,0);class yf{constructor(e,t,a,d){this.userId=e,this.serializer=t,this.indexManager=a,this.referenceDelegate=d,this.Vn={}}static de(e,t,a,d){$n(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new yf(p,t,a,d)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return al(e).X({index:"userMutationsIndex",range:a},(d,p,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,a,d){const p=od(e),v=al(e);return v.add({}).next(N=>{$n("number"==typeof N);const j=new I(N,t,a,d),q=function(dt,Mt,rn){const bn=rn.baseMutations.map(Pr=>Ur(dt.fe,Pr)),Rn=rn.mutations.map(Pr=>Ur(dt.fe,Pr));return{userId:Mt,batchId:rn.batchId,localWriteTimeMs:rn.localWriteTime.toMillis(),baseMutations:bn,mutations:Rn}}(this.serializer,this.userId,j),ue=[];let ke=new Ki((dt,Mt)=>ir(dt.canonicalString(),Mt.canonicalString()));for(const dt of d){const Mt=ja(this.userId,dt.key.path,N);ke=ke.add(dt.key.path.popLast()),ue.push(v.put(q)),ue.push(p.put(Mt,ch))}return ke.forEach(dt=>{ue.push(this.indexManager.addToCollectionParentIndex(e,dt))}),e.addOnCommittedListener(()=>{this.Vn[N]=j.keys()}),be.waitFor(ue).next(()=>j)})}lookupMutationBatch(e,t){return al(e).get(t).next(a=>a?($n(a.userId===this.userId),Ll(this.serializer,a)):null)}Sn(e,t){return this.Vn[t]?be.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const d=a.keys();return this.Vn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,d=IDBKeyRange.lowerBound([this.userId,a]);let p=null;return al(e).X({index:"userMutationsIndex",range:d},(v,N,j)=>{N.userId===this.userId&&($n(N.batchId>=a),p=Ll(this.serializer,N)),j.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return al(e).X({index:"userMutationsIndex",range:t,reverse:!0},(d,p,v)=>{a=p.batchId,v.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return al(e).j("userMutationsIndex",t).next(a=>a.map(d=>Ll(this.serializer,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=xc(this.userId,t.path),d=IDBKeyRange.lowerBound(a),p=[];return od(e).X({range:d},(v,N,j)=>{const[q,ue,ke]=v,dt=Ba(ue);if(q===this.userId&&t.path.isEqual(dt))return al(e).get(ke).next(Mt=>{if(!Mt)throw Kt();$n(Mt.userId===this.userId),p.push(Ll(this.serializer,Mt))});j.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Ki(ir);const d=[];return t.forEach(p=>{const v=xc(this.userId,p.path),N=IDBKeyRange.lowerBound(v),j=od(e).X({range:N},(q,ue,ke)=>{const[dt,Mt,rn]=q,bn=Ba(Mt);dt===this.userId&&p.path.isEqual(bn)?a=a.add(rn):ke.done()});d.push(j)}),be.waitFor(d).next(()=>this.Dn(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,d=a.length+1,p=xc(this.userId,a),v=IDBKeyRange.lowerBound(p);let N=new Ki(ir);return od(e).X({range:v},(j,q,ue)=>{const[ke,dt,Mt]=j,rn=Ba(dt);ke===this.userId&&a.isPrefixOf(rn)?rn.length===d&&(N=N.add(Mt)):ue.done()}).next(()=>this.Dn(e,N))}Dn(e,t){const a=[],d=[];return t.forEach(p=>{d.push(al(e).get(p).next(v=>{if(null===v)throw Kt();$n(v.userId===this.userId),a.push(Ll(this.serializer,v))}))}),be.waitFor(d).next(()=>a)}removeMutationBatch(e,t){return $g(e.ht,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),be.forEach(a,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return be.resolve();const a=IDBKeyRange.lowerBound([this.userId]),d=[];return od(e).X({range:a},(p,v,N)=>{if(p[0]===this.userId){const j=Ba(p[1]);d.push(j)}else N.done()}).next(()=>{$n(0===d.length)})})}containsKey(e,t){return Ul(e,this.userId,t)}xn(e){return Cp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ul(i,e,t){const a=xc(e,t.path),d=a[1],p=IDBKeyRange.lowerBound(a);let v=!1;return od(i).X({range:p,Y:!0},(N,j,q)=>{const[ue,ke,dt]=N;ue===e&&ke===d&&(v=!0),q.done()}).next(()=>v)}function al(i){return ho(i,"mutations")}function od(i){return ho(i,"documentMutations")}function Cp(i){return ho(i,"mutationQueues")}class Ma{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ma(0)}static Mn(){return new Ma(-1)}}class Ip{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const a=new Ma(t.highestTargetId);return t.highestTargetId=a.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Gn.fromTimestamp(new Pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.$n(e).next(d=>(d.highestListenSequenceNumber=t,a&&(d.lastRemoteSnapshotVersion=a.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.On(e,d)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(a=>(a.targetCount+=1,this.Bn(t,a),this.On(e,a))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cu(e).delete(t.targetId)).next(()=>this.$n(e)).next(a=>($n(a.targetCount>0),a.targetCount-=1,this.On(e,a)))}removeTargets(e,t,a){let d=0;const p=[];return cu(e).X((v,N)=>{const j=hf(N);j.sequenceNumber<=t&&null===a.get(j.targetId)&&(d++,p.push(this.removeTargetData(e,j)))}).next(()=>be.waitFor(p)).next(()=>d)}forEachTarget(e,t){return cu(e).X((a,d)=>{const p=hf(d);t(p)})}$n(e){return mc(e).get("targetGlobalKey").next(t=>($n(null!==t),t))}On(e,t){return mc(e).put("targetGlobalKey",t)}Fn(e,t){return cu(e).put(ff(this.serializer,t))}Bn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const a=jc(t),d=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let p=null;return cu(e).X({range:d,index:"queryTargetsIndex"},(v,N,j)=>{const q=hf(N);oc(t,q.target)&&(p=q,j.done())}).next(()=>p)}addMatchingKeys(e,t,a){const d=[],p=Ka(e);return t.forEach(v=>{const N=Zs(v.path);d.push(p.put({targetId:a,path:N})),d.push(this.referenceDelegate.addReference(e,a,v))}),be.waitFor(d)}removeMatchingKeys(e,t,a){const d=Ka(e);return be.forEach(t,p=>{const v=Zs(p.path);return be.waitFor([d.delete([a,v]),this.referenceDelegate.removeReference(e,a,p)])})}removeMatchingKeysForTargetId(e,t){const a=Ka(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(d)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),d=Ka(e);let p=Ir();return d.X({range:a,Y:!0},(v,N,j)=>{const q=Ba(v[1]),ue=new un(q);p=p.add(ue)}).next(()=>p)}containsKey(e,t){const a=Zs(t.path),d=IDBKeyRange.bound([a],[Ql(a)],!1,!0);let p=0;return Ka(e).X({index:"documentTargetsIndex",Y:!0,range:d},([v,N],j,q)=>{0!==v&&(p++,q.done())}).next(()=>p>0)}le(e,t){return cu(e).get(t).next(a=>a?hf(a):null)}}function cu(i){return ho(i,"targets")}function mc(i){return ho(i,"targetGlobal")}function Ka(i){return ho(i,"targetDocuments")}function Gg([i,e],[t,a]){const d=ir(i,t);return 0===d?ir(e,a):d}class zg{constructor(e){this.Ln=e,this.buffer=new Ki(Gg),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Gg(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ul{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ht("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ze.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){Ca(a)?Ht("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ce(a)}yield t.Qn(3e5)}))}}class ty{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return be.resolve(Ks.ct);const a=new zg(t);return this.jn.forEachTarget(e,d=>a.Kn(d.sequenceNumber)).next(()=>this.jn.Wn(e,d=>a.Kn(d))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.jn.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ht("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(Jm)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jm):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let a,d,p,v,N,j,q;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ke=>(ke>this.params.maximumSequenceNumbersToCollect?(Ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ke}`),d=this.params.maximumSequenceNumbersToCollect):d=ke,v=Date.now(),this.nthSequenceNumber(e,d))).next(ke=>(a=ke,N=Date.now(),this.removeTargets(e,a,t))).next(ke=>(p=ke,j=Date.now(),this.removeOrphanedDocuments(e,a))).next(ke=>(q=Date.now(),Ws()<=et.in.DEBUG&&Ht("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-ue}ms\n\tDetermined least recently used ${d} in `+(N-v)+`ms\n\tRemoved ${p} targets in `+(j-N)+`ms\n\tRemoved ${ke} documents in `+(q-j)+`ms\nTotal Duration: ${q-ue}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:p,documentsRemoved:ke})))}}class qg{constructor(e,t){this.db=e,this.garbageCollector=function Wg(i,e){return new ty(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(d=>a+d))}Jn(e){let t=0;return this.Wn(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(a,d)=>t(d))}addReference(e,t,a){return Gd(e,a)}removeReference(e,t,a){return Gd(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return Gd(e,t)}Xn(e,t){return function(a,d){let p=!1;return Cp(a).Z(v=>Ul(a,v,d).next(N=>(N&&(p=!0),be.resolve(!N)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let p=0;return this.Yn(e,(v,N)=>{if(N<=t){const j=this.Xn(e,v).next(q=>{if(!q)return p++,a.getEntry(e,v).next(()=>(a.removeEntry(v,Gn.min()),Ka(e).delete([0,Zs(v.path)])))});d.push(j)}}).next(()=>be.waitFor(d)).next(()=>a.apply(e)).next(()=>p)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return Gd(e,t)}Yn(e,t){const a=Ka(e);let d,p=Ks.ct;return a.X({index:"documentTargetsIndex"},([v,N],{path:j,sequenceNumber:q})=>{0===v?(p!==Ks.ct&&t(new un(Ba(d)),p),p=q,d=j):p=Ks.ct}).next(()=>{p!==Ks.ct&&t(new un(Ba(d)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gd(i,e){return Ka(i).put((a=i.currentSequenceNumber,{targetId:0,path:Zs(e.path),sequenceNumber:a}));var a}class Kg{constructor(){this.changes=new Ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?be.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ad{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return ki(e).put(a)}removeEntry(e,t,a){return ki(e).delete(function(d,p){const v=d.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Vg(p),v[v.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Zn(e,a)))}getEntry(e,t){let a=Ji.newInvalidDocument(t);return ki(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ra(t))},(d,p)=>{a=this.ts(t,p)}).next(()=>a)}es(e,t){let a={size:0,document:Ji.newInvalidDocument(t)};return ki(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ra(t))},(d,p)=>{a={document:this.ts(t,p),size:ey(p)}}).next(()=>a)}getEntries(e,t){let a=ra();return this.ns(e,t,(d,p)=>{const v=this.ts(d,p);a=a.insert(d,v)}).next(()=>a)}ss(e,t){let a=ra(),d=new ri(un.comparator);return this.ns(e,t,(p,v)=>{const N=this.ts(p,v);a=a.insert(p,N),d=d.insert(p,ey(v))}).next(()=>({documents:a,rs:d}))}ns(e,t,a){if(t.isEmpty())return be.resolve();let d=new Ki(bp);t.forEach(j=>d=d.add(j));const p=IDBKeyRange.bound(Ra(d.first()),Ra(d.last())),v=d.getIterator();let N=v.getNext();return ki(e).X({index:"documentKeyIndex",range:p},(j,q,ue)=>{const ke=un.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;N&&bp(N,ke)<0;)a(N,null),N=v.getNext();N&&N.isEqual(ke)&&(a(N,q),N=v.hasNext()?v.getNext():null),N?ue.G(Ra(N)):ue.done()}).next(()=>{for(;N;)a(N,null),N=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,t,a,d){const p=t.path,v=[p.popLast().toArray(),p.lastSegment(),Vg(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],N=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ki(e).j(IDBKeyRange.bound(v,N,!0)).next(j=>{let q=ra();for(const ue of j){const ke=this.ts(un.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);ke.isFoundDocument()&&(cc(t,ke)||d.has(ke.key))&&(q=q.insert(ke.key,ke))}return q})}getAllFromCollectionGroup(e,t,a,d){let p=ra();const v=_f(t,a),N=_f(t,b.max());return ki(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,N,!0)},(j,q,ue)=>{const ke=this.ts(un.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);p=p.insert(ke.key,ke),p.size===d&&ue.done()}).next(()=>p)}newChangeBuffer(e){return new ny(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return I_(e).get("remoteDocumentGlobalKey").next(t=>($n(!!t),t))}Zn(e,t){return I_(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const a=function v_(i,e){let t;if(e.document)t=hp(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=un.fromSegments(e.noDocument.path),d=Yr(e.noDocument.readTime);t=Ji.newNoDocument(a,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Kt();{const a=un.fromSegments(e.unknownDocument.path),d=Yr(e.unknownDocument.version);t=Ji.newUnknownDocument(a,d)}}return e.readTime&&t.setReadTime(function(a){const d=new Pi(a[0],a[1]);return Gn.fromTimestamp(d)}(e.readTime)),t}(this.serializer,t);if(!a.isNoDocument()||!a.version.isEqual(Gn.min()))return a}return Ji.newInvalidDocument(e)}}function zd(i){return new ad(i)}class ny extends Kg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ga(a=>a.toString(),(a,d)=>a.isEqual(d))}applyChanges(e){const t=[];let a=0,d=new Ki((p,v)=>ir(p.canonicalString(),v.canonicalString()));return this.changes.forEach((p,v)=>{const N=this.us.get(p);if(t.push(this.os.removeEntry(e,p,N.readTime)),v.isValidDocument()){const j=E_(this.os.serializer,v);d=d.add(p.path.popLast());const q=ey(j);a+=q-N.size,t.push(this.os.addEntry(e,p,j))}else if(a-=N.size,this.trackRemovals){const j=E_(this.os.serializer,v.convertToNoDocument(Gn.min()));t.push(this.os.addEntry(e,p,j))}}),d.forEach(p=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.os.updateMetadata(e,a)),be.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(a=>(this.us.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:a,rs:d})=>(d.forEach((p,v)=>{this.us.set(p,{size:v,readTime:a.get(p).readTime})}),a))}}function I_(i){return ho(i,"remoteDocumentGlobal")}function ki(i){return ho(i,"remoteDocumentsV14")}function Ra(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _f(i,e){const t=e.documentKey.path.toArray();return[i,Vg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bp(i,e){const t=i.path.toArray(),a=e.path.toArray();let d=0;for(let p=0;p<t.length-2&&p<a.length-2;++p)if(d=ir(t[p],a[p]),d)return d;return d=ir(t.length,a.length),d||(d=ir(t[t.length-2],a[a.length-2]),d||ir(t[t.length-1],a[a.length-1]))}class Zg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ry{constructor(e,t,a,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=d}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(a=d,this.remoteDocumentCache.getEntry(e,t))).next(d=>(null!==a&&Sa(a.mutation,d,Y.empty(),Pi.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Ir()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Ir()){const d=au();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,a).next(p=>{let v=rl();return p.forEach((N,j)=>{v=v.insert(N,j.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const a=au();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Ir()))}populateOverlays(e,t,a){const d=[];return a.forEach(p=>{t.has(p)||d.push(p)}),this.documentOverlayCache.getOverlays(e,d).next(p=>{p.forEach((v,N)=>{t.set(v,N)})})}computeViews(e,t,a,d){let p=ra();const v=Pd(),N=Pd();return t.forEach((j,q)=>{const ue=a.get(q.key);d.has(q.key)&&(void 0===ue||ue.mutation instanceof Nl)?p=p.insert(q.key,q):void 0!==ue?(v.set(q.key,ue.mutation.getFieldMask()),Sa(ue.mutation,q,ue.mutation.getFieldMask(),Pi.now())):v.set(q.key,Y.empty())}),this.recalculateAndSaveOverlays(e,p).next(j=>(j.forEach((q,ue)=>v.set(q,ue)),t.forEach((q,ue)=>{var ke;return N.set(q,new Zg(ue,null!==(ke=v.get(q))&&void 0!==ke?ke:null))}),N))}recalculateAndSaveOverlays(e,t){const a=Pd();let d=new ri((v,N)=>v-N),p=Ir();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const N of v)N.keys().forEach(j=>{const q=t.get(j);if(null===q)return;let ue=a.get(j)||Y.empty();ue=N.applyToLocalView(q,ue),a.set(j,ue);const ke=(d.get(N.batchId)||Ir()).add(j);d=d.insert(N.batchId,ke)})}).next(()=>{const v=[],N=d.getReverseIterator();for(;N.hasNext();){const j=N.getNext(),q=j.key,ue=j.value,ke=sf();ue.forEach(dt=>{if(!p.has(dt)){const Mt=Rl(t.get(dt),a.get(dt));null!==Mt&&ke.set(dt,Mt),p=p.add(dt)}}),v.push(this.documentOverlayCache.saveOverlays(e,q,ke))}return be.waitFor(v)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return un.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):lc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var d}getNextDocuments(e,t,a,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,d).next(p=>{const v=d-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,d-p.size):be.resolve(au());let N=-1,j=p;return v.next(q=>be.forEach(q,(ue,ke)=>(N<ke.largestBatchId&&(N=ke.largestBatchId),p.get(ue)?be.resolve():this.remoteDocumentCache.getEntry(e,ue).next(dt=>{j=j.insert(ue,dt)}))).next(()=>this.populateOverlays(e,q,p)).next(()=>this.computeViews(e,j,q,Ir())).next(ue=>({batchId:N,changes:sp(ue)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new un(t)).next(a=>{let d=rl();return a.isFoundDocument()&&(d=d.insert(a.key,a)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const d=t.collectionGroup;let p=rl();return this.indexManager.getCollectionParents(e,d).next(v=>be.forEach(v,N=>{const j=(q=t,ue=N.child(d),new uc(ue,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ue;return this.getDocumentsMatchingCollectionQuery(e,j,a).next(q=>{q.forEach((ue,ke)=>{p=p.insert(ue,ke)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,a){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(p=>(d=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,d))).next(p=>{d.forEach((N,j)=>{const q=j.getKey();null===p.get(q)&&(p=p.insert(q,Ji.newInvalidDocument(q)))});let v=rl();return p.forEach((N,j)=>{const q=d.get(N);void 0!==q&&Sa(q.mutation,j,Y.empty(),Pi.now()),cc(t,j)&&(v=v.insert(N,j))}),v})}}class Dh{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return be.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var a;return this.cs.set(t.id,{id:(a=t).id,version:a.version,createTime:Us(a.createTime)}),be.resolve()}getNamedQuery(e,t){return be.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(a=t).name,query:pf(a.bundledQuery),readTime:Us(a.readTime)}),be.resolve();var a}}class b_{constructor(){this.overlays=new ri(un.comparator),this.ls=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}getOverlays(e,t){const a=au();return be.forEach(t,d=>this.getOverlay(e,d).next(p=>{null!==p&&a.set(d,p)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((d,p)=>{this.we(e,t,p)}),be.resolve()}removeOverlaysForBatchId(e,t,a){const d=this.ls.get(a);return void 0!==d&&(d.forEach(p=>this.overlays=this.overlays.remove(p)),this.ls.delete(a)),be.resolve()}getOverlaysForCollection(e,t,a){const d=au(),p=t.length+1,v=new un(t.child("")),N=this.overlays.getIteratorFrom(v);for(;N.hasNext();){const j=N.getNext().value,q=j.getKey();if(!t.isPrefixOf(q.path))break;q.path.length===p&&j.largestBatchId>a&&d.set(j.getKey(),j)}return be.resolve(d)}getOverlaysForCollectionGroup(e,t,a,d){let p=new ri((q,ue)=>q-ue);const v=this.overlays.getIterator();for(;v.hasNext();){const q=v.getNext().value;if(q.getKey().getCollectionGroup()===t&&q.largestBatchId>a){let ue=p.get(q.largestBatchId);null===ue&&(ue=au(),p=p.insert(q.largestBatchId,ue)),ue.set(q.getKey(),q)}}const N=au(),j=p.getIterator();for(;j.hasNext()&&(j.getNext().value.forEach((q,ue)=>N.set(q,ue)),!(N.size()>=d)););return be.resolve(N)}we(e,t,a){const d=this.overlays.get(a.key);if(null!==d){const v=this.ls.get(d.largestBatchId).delete(a.key);this.ls.set(d.largestBatchId,v)}this.overlays=this.overlays.insert(a.key,new _(t,a));let p=this.ls.get(t);void 0===p&&(p=Ir(),this.ls.set(t,p)),this.ls.set(t,p.add(a.key))}}class yc{constructor(){this.fs=new Ki(jo.ds),this.ws=new Ki(jo._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const a=new jo(e,t);this.fs=this.fs.add(a),this.ws=this.ws.add(a)}gs(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.ys(new jo(e,t))}ps(e,t){e.forEach(a=>this.removeReference(a,t))}Is(e){const t=new un(new fr([])),a=new jo(t,e),d=new jo(t,e+1),p=[];return this.ws.forEachInRange([a,d],v=>{this.ys(v),p.push(v.key)}),p}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new un(new fr([])),a=new jo(t,e),d=new jo(t,e+1);let p=Ir();return this.ws.forEachInRange([a,d],v=>{p=p.add(v.key)}),p}containsKey(e){const t=new jo(e,0),a=this.fs.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class jo{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return un.comparator(e.key,t.key)||ir(e.As,t.As)}static _s(e,t){return ir(e.As,t.As)||un.comparator(e.key,t.key)}}class Dp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ki(jo.ds)}checkEmpty(e){return be.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,d){const p=this.vs;this.vs++;const v=new I(p,t,a,d);this.mutationQueue.push(v);for(const N of d)this.Rs=this.Rs.add(new jo(N.key,p)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return be.resolve(v)}lookupMutationBatch(e,t){return be.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.bs(t+1),p=d<0?0:d;return be.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new jo(t,0),d=new jo(t,Number.POSITIVE_INFINITY),p=[];return this.Rs.forEachInRange([a,d],v=>{const N=this.Ps(v.As);p.push(N)}),be.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Ki(ir);return t.forEach(d=>{const p=new jo(d,0),v=new jo(d,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([p,v],N=>{a=a.add(N.As)})}),be.resolve(this.Vs(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,d=a.length+1;let p=a;un.isDocumentKey(p)||(p=p.child(""));const v=new jo(new un(p),0);let N=new Ki(ir);return this.Rs.forEachWhile(j=>{const q=j.key.path;return!!a.isPrefixOf(q)&&(q.length===d&&(N=N.add(j.As)),!0)},v),be.resolve(this.Vs(N))}Vs(e){const t=[];return e.forEach(a=>{const d=this.Ps(a);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){$n(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let a=this.Rs;return be.forEach(t.mutations,d=>{const p=new jo(d.key,t.batchId);return a=a.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Rs=a})}Cn(e){}containsKey(e,t){const a=new jo(t,0),d=this.Rs.firstAfterOrEqual(a);return be.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return be.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Tp{constructor(e){this.Ds=e,this.docs=new ri(un.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,d=this.docs.get(a),p=d?d.size:0,v=this.Ds(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:v}),this.size+=v-p,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return be.resolve(a?a.document.mutableCopy():Ji.newInvalidDocument(t))}getEntries(e,t){let a=ra();return t.forEach(d=>{const p=this.docs.get(d);a=a.insert(d,p?p.document.mutableCopy():Ji.newInvalidDocument(d))}),be.resolve(a)}getDocumentsMatchingQuery(e,t,a,d){let p=ra();const v=t.path,N=new un(v.child("")),j=this.docs.getIteratorFrom(N);for(;j.hasNext();){const{key:q,value:{document:ue}}=j.getNext();if(!v.isPrefixOf(q.path))break;q.path.length>v.length+1||P(O(ue),a)<=0||(d.has(ue.key)||cc(t,ue))&&(p=p.insert(ue.key,ue.mutableCopy()))}return be.resolve(p)}getAllFromCollectionGroup(e,t,a,d){Kt()}Cs(e,t){return be.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new Yg(this)}getSize(e){return be.resolve(this.size)}}class Yg extends Kg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((a,d)=>{d.isValidDocument()?t.push(this.os.addEntry(e,d)):this.os.removeEntry(a)}),be.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class iy{constructor(e){this.persistence=e,this.xs=new Ga(t=>jc(t),oc),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new yc,this.targetCount=0,this.Ms=Ma.kn()}forEachTarget(e,t){return this.xs.forEach((a,d)=>t(d)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.Ns&&(this.Ns=t),be.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ma(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.Fn(t),be.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,a){let d=0;const p=[];return this.xs.forEach((v,N)=>{N.sequenceNumber<=t&&null===a.get(N.targetId)&&(this.xs.delete(v),p.push(this.removeMatchingKeysForTargetId(e,N.targetId)),d++)}),be.waitFor(p).next(()=>d)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const a=this.xs.get(t)||null;return be.resolve(a)}addMatchingKeys(e,t,a){return this.ks.gs(t,a),be.resolve()}removeMatchingKeys(e,t,a){this.ks.ps(t,a);const d=this.persistence.referenceDelegate,p=[];return d&&t.forEach(v=>{p.push(d.markPotentiallyOrphaned(e,v))}),be.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),be.resolve()}getMatchingKeysForTargetId(e,t){const a=this.ks.Es(t);return be.resolve(a)}containsKey(e,t){return be.resolve(this.ks.containsKey(t))}}class Sp{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ks(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new iy(this),this.indexManager=new mv,this.remoteDocumentCache=new Tp(a=>this.referenceDelegate.Ls(a)),this.serializer=new qm(t),this.qs=new Dh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.$s[e.toKey()];return a||(a=new Dp(t,this.referenceDelegate),this.$s[e.toKey()]=a),a}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,a){Ht("MemoryPersistence","Starting transaction:",e);const d=new vf(this.Os.next());return this.referenceDelegate.Us(),a(d).next(p=>this.referenceDelegate.Ks(d).next(()=>p)).toPromise().then(p=>(d.raiseOnCommittedEvent(),p))}Gs(e,t){return be.or(Object.values(this.$s).map(a=>()=>a.containsKey(e,t)))}}class vf extends de{constructor(e){super(),this.currentSequenceNumber=e}}class Ef{constructor(e){this.persistence=e,this.Qs=new yc,this.js=null}static zs(e){return new Ef(e)}get Ws(){if(this.js)return this.js;throw Kt()}addReference(e,t,a){return this.Qs.addReference(a,t),this.Ws.delete(a.toString()),be.resolve()}removeReference(e,t,a){return this.Qs.removeReference(a,t),this.Ws.add(a.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),be.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(d=>this.Ws.add(d.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(p=>this.Ws.add(p.toString()))}).next(()=>a.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Ws,a=>{const d=un.fromPath(a);return this.Hs(e,d).next(p=>{p||t.removeEntry(d,Gn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(a=>{a?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return be.or([()=>be.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Ap{constructor(e){this.serializer=e}O(e,t,a,d){const p=new xn("createOrUpgrade",t);var N;a<1&&d>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wd,{unique:!0}),N.createObjectStore("documentMutations"),Mp(e),function(N){N.createObjectStore("remoteDocuments")}(e));let v=be.resolve();return a<3&&d>=3&&(0!==a&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Mp(e)),v=v.next(()=>function(N){const j=N.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gn.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",q)}(p))),a<4&&d>=4&&(0!==a&&(v=v.next(()=>function(N,j){return j.store("mutations").j().next(q=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wd,{unique:!0});const ue=j.store("mutations"),ke=q.map(dt=>ue.put(dt));return be.waitFor(ke)})}(e,p))),v=v.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&d>=5&&(v=v.next(()=>this.Ys(p))),a<6&&d>=6&&(v=v.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(p)))),a<7&&d>=7&&(v=v.next(()=>this.Zs(p))),a<8&&d>=8&&(v=v.next(()=>this.ti(e,p))),a<9&&d>=9&&(v=v.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&d>=10&&(v=v.next(()=>this.ei(p))),a<11&&d>=11&&(v=v.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&d>=12&&(v=v.next(()=>{!function(N){const j=N.createObjectStore("documentOverlays",{keyPath:Lc});j.createIndex("collectionPathOverlayIndex",Yu,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",Yh,{unique:!1})}(e)})),a<13&&d>=13&&(v=v.next(()=>function(N){const j=N.createObjectStore("remoteDocumentsV14",{keyPath:Jl});j.createIndex("documentKeyIndex",Cl),j.createIndex("collectionGroupIndex",Oc)}(e)).next(()=>this.ni(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&d>=14&&(v=v.next(()=>this.si(e,p))),a<15&&d>=15&&(v=v.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:Il}).createIndex("sequenceNumberIndex",ec,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:tc}).createIndex("documentKeyIndex",ep,{unique:!1})}(e))),v}Xs(e){let t=0;return e.store("remoteDocuments").X((a,d)=>{t+=ey(d)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Ys(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.j().next(d=>be.forEach(d,p=>{const v=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return a.j("userMutationsIndex",v).next(N=>be.forEach(N,j=>{$n(j.userId===p.userId);const q=Ll(this.serializer,j);return $g(e,p.userId,q).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const p=[];return a.X((v,N)=>{const j=new fr(v),q=[0,Zs(j)];p.push(t.get(q).next(ue=>ue?be.resolve():t.put({targetId:0,path:Zs(j),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>be.waitFor(p))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Cd});const a=t.store("collectionParents"),d=new $d,p=v=>{if(d.add(v)){const N=v.lastSegment(),j=v.popLast();return a.put({collectionId:N,parent:Zs(j)})}};return t.store("remoteDocuments").X({Y:!0},(v,N)=>{const j=new fr(v);return p(j.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([v,N,j],q)=>{const ue=Ba(N);return p(ue.popLast())}))}ei(e){const t=e.store("targets");return t.X((a,d)=>{const p=hf(d),v=ff(this.serializer,p);return t.put(v)})}ni(e,t){const a=t.store("remoteDocuments"),d=[];return a.X((p,v)=>{const N=t.store("remoteDocumentsV14"),j=(q=v,q.document?new un(fr.fromString(q.document.name).popFirst(5)):q.noDocument?un.fromSegments(q.noDocument.path):q.unknownDocument?un.fromSegments(q.unknownDocument.path):Kt()).path.toArray();var q;const ue={prefixPath:j.slice(0,j.length-2),collectionGroup:j[j.length-2],documentId:j[j.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};d.push(N.put(ue))}).next(()=>be.waitFor(d))}si(e,t){const a=t.store("mutations"),d=zd(this.serializer),p=new Sp(Ef.zs,this.serializer.fe);return a.j().next(v=>{const N=new Map;return v.forEach(j=>{var q;let ue=null!==(q=N.get(j.userId))&&void 0!==q?q:Ir();Ll(this.serializer,j).keys().forEach(ke=>ue=ue.add(ke)),N.set(j.userId,ue)}),be.forEach(N,(j,q)=>{const ue=new tr(q),ke=Km.de(this.serializer,ue),dt=p.getIndexManager(ue),Mt=yf.de(ue,this.serializer,dt,p.referenceDelegate);return new ry(d,Mt,ke,dt).recalculateAndSaveOverlaysForDocumentKeys(new ba(t,Ks.ct),j).next()})})}}function Mp(i){i.createObjectStore("targetDocuments",{keyPath:Du}).createIndex("documentTargetsIndex",dh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kc,{unique:!0}),i.createObjectStore("targetGlobal")}const Wd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rp{constructor(e,t,a,d,p,v,N,j,q,ue,ke=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.ii=p,this.window=v,this.document=N,this.ri=q,this.oi=ue,this.ui=ke,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=dt=>Promise.resolve(),!Rp.D())throw new Pt(ft.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qg(this,d),this.di=t+"main",this.serializer=new qm(j),this.wi=new _n(this.di,this.ui,new Ap(this.serializer)),this.Bs=new Ip(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zd(this.serializer),this.qs=new xr,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ue&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pt(ft.FAILED_PRECONDITION,Wd);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ks(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var a=(0,ze.Z)(function*(d){if(t.started)return e(d)});return function(d){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ze.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ze.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ca(e))return Ht("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ht("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Th(e).get("owner").next(t=>be.resolve(this.Ri(t)))}Pi(e){return Sh(e).delete(this.clientId)}bi(){var e=this;return(0,ze.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const d=ho(a,"clientMetadata");return d.j().next(p=>{const v=e.Si(p,18e5),N=p.filter(j=>-1===v.indexOf(j));return be.forEach(N,j=>d.delete(j.clientId)).next(()=>N)})}).catch(()=>[]);if(e._i)for(const a of t)e._i.removeItem(e.Di(a.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?be.resolve(!0):Th(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Pt(ft.FAILED_PRECONDITION,Wd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sh(e).j().next(a=>void 0===this.Si(a,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ht("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ze.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new ba(t,Ks.ct);return e.Ai(a).next(()=>e.Pi(a))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(a=>this.Vi(a.updateTimeMs,t)&&!this.Ci(a.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Sh(e).j().next(t=>this.Si(t,18e5).map(a=>a.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return yf.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wp(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Km.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,a){Ht("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",p=15===(v=this.ui)?tp:14===v?hh:13===v?Ha:12===v?Qu:11===v?Fc:void Kt();var v;let N;return this.wi.runTransaction(e,d,p,j=>(N=new ba(j,this.Os?this.Os.next():Ks.ct),"readwrite-primary"===t?this.Ti(N).next(q=>!!q||this.Ei(N)).next(q=>{if(!q)throw Xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Pt(ft.FAILED_PRECONDITION,z);return a(N)}).next(q=>this.vi(N).next(()=>q)):this.Oi(N).next(()=>a(N)))).then(j=>(N.raiseOnCommittedEvent(),j))}Oi(e){return Th(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pt(ft.FAILED_PRECONDITION,Wd)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Th(e).put("owner",t)}static D(){return _n.D()}Ai(e){const t=Th(e);return t.get("owner").next(a=>this.Ri(a)?(Ht("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):be.resolve())}Vi(e,t){const a=Date.now();return!(e<a-t||e>a&&(Xr(`Detected an update time that is in the future: ${e} > ${a}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Be.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const a=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ht("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Xr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Xr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Th(i){return ho(i,"owner")}function Sh(i){return ho(i,"clientMetadata")}function D_(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Np{constructor(e,t,a,d){this.targetId=e,this.fromCache=t,this.Fi=a,this.Bi=d}static Li(e,t){let a=Ir(),d=Ir();for(const p of t.docChanges)switch(p.type){case 0:a=a.add(p.doc.key);break;case 1:d=d.add(p.doc.key)}return new Np(e,t.fromCache,a,d)}}class Qg{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,a,d){return this.Ki(e,t).next(p=>p||this.Gi(e,t,d,a)).next(p=>p||this.Qi(e,t))}Ki(e,t){if(kg(t))return be.resolve(null);let a=na(t);return this.indexManager.getIndexType(e,a).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=$c(t,null,"F"),a=na(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(p=>{const v=Ir(...p);return this.Ui.getDocuments(e,v).next(N=>this.indexManager.getMinOffset(e,a).next(j=>{const q=this.ji(t,N);return this.zi(t,q,v,j.readTime)?this.Ki(e,$c(t,null,"F")):this.Wi(e,q,t,j)}))})))}Gi(e,t,a,d){return kg(t)||d.isEqual(Gn.min())?this.Qi(e,t):this.Ui.getDocuments(e,a).next(p=>{const v=this.ji(t,p);return this.zi(t,v,a,d)?this.Qi(e,t):(Ws()<=et.in.DEBUG&&Ht("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),ou(t)),this.Wi(e,v,t,A(d,-1)))})}ji(e,t){let a=new Ki(_h(e));return t.forEach((d,p)=>{cc(e,p)&&(a=a.add(p))}),a}zi(e,t,a,d){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(d)>0)}Qi(e,t){return Ws()<=et.in.DEBUG&&Ht("QueryEngine","Using full collection scan to execute query:",ou(t)),this.Ui.getDocumentsMatchingQuery(e,t,b.min())}Wi(e,t,a,d){return this.Ui.getDocumentsMatchingQuery(e,a,d).next(p=>(t.forEach(v=>{p=p.insert(v.key,v)}),p))}}class T_{constructor(e,t,a,d){this.persistence=e,this.Hi=t,this.serializer=d,this.Ji=new ri(ir),this.Yi=new Ga(p=>jc(p),oc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(a)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ry(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Pp(i,e,t,a){return new T_(i,e,t,a)}function Xg(i,e){return xp.apply(this,arguments)}function xp(){return xp=(0,ze.Z)(function*(i,e){const t=en(i);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let d;return t.mutationQueue.getAllMutationBatches(a).next(p=>(d=p,t.tr(e),t.mutationQueue.getAllMutationBatches(a))).next(p=>{const v=[],N=[];let j=Ir();for(const q of d){v.push(q.batchId);for(const ue of q.mutations)j=j.add(ue.key)}for(const q of p){N.push(q.batchId);for(const ue of q.mutations)j=j.add(ue.key)}return t.localDocuments.getDocuments(a,j).next(q=>({er:q,removedBatchIds:v,addedBatchIds:N}))})})}),xp.apply(this,arguments)}function S_(i){const e=en(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function A_(i,e,t){let a=Ir(),d=Ir();return t.forEach(p=>a=a.add(p)),e.getEntries(i,a).next(p=>{let v=ra();return t.forEach((N,j)=>{const q=p.get(N);j.isFoundDocument()!==q.isFoundDocument()&&(d=d.add(N)),j.isNoDocument()&&j.version.isEqual(Gn.min())?(e.removeEntry(N,j.readTime),v=v.insert(N,j)):!q.isValidDocument()||j.version.compareTo(q.version)>0||0===j.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(j),v=v.insert(N,j)):Ht("LocalStore","Ignoring outdated watch update for ",N,". Current version:",q.version," Watch version:",j.version)}),{nr:v,sr:d}})}function M_(i,e){const t=en(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function qd(i,e){const t=en(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let d;return t.Bs.getTargetData(a,e).next(p=>p?(d=p,be.resolve(d)):t.Bs.allocateTargetId(a).next(v=>(d=new qa(e,v,"TargetPurposeListen",a.currentSequenceNumber),t.Bs.addTargetData(a,d).next(()=>d))))}).then(a=>{const d=t.Ji.get(a.targetId);return(null===d||a.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(a.targetId,a),t.Yi.set(e,a.targetId)),a})}function Kd(i,e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,ze.Z)(function*(i,e,t){const a=en(i),d=a.Ji.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",p,v=>a.persistence.referenceDelegate.removeTarget(v,d)))}catch(v){if(!Ca(v))throw v;Ht("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}a.Ji=a.Ji.remove(e),a.Yi.delete(d.target)}),Jg.apply(this,arguments)}function Ah(i,e,t){const a=en(i);let d=Gn.min(),p=Ir();return a.persistence.runTransaction("Execute query","readonly",v=>function(N,j,q){const ue=en(N),ke=ue.Yi.get(q);return void 0!==ke?be.resolve(ue.Ji.get(ke)):ue.Bs.getTargetData(j,q)}(a,v,na(e)).next(N=>{if(N)return d=N.lastLimboFreeSnapshotVersion,a.Bs.getMatchingKeysForTargetId(v,N.targetId).next(j=>{p=j})}).next(()=>a.Hi.getDocumentsMatchingQuery(v,e,t?d:Gn.min(),t?p:Ir())).next(N=>(R_(a,Tl(e),N),{documents:N,ir:p})))}function em(i,e){const t=en(i),a=en(t.Bs),d=t.Ji.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",p=>a.le(p,e).next(v=>v?v.target:null))}function kp(i,e){const t=en(i),a=t.Xi.get(e)||Gn.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Zi.getAllFromCollectionGroup(d,e,A(a,-1),Number.MAX_SAFE_INTEGER)).then(d=>(R_(t,e,d),d))}function R_(i,e,t){let a=i.Xi.get(e)||Gn.min();t.forEach((d,p)=>{p.readTime.compareTo(a)>0&&(a=p.readTime)}),i.Xi.set(e,a)}function tm(){return tm=(0,ze.Z)(function*(i,e,t,a){const d=en(i);let p=Ir(),v=ra();for(const q of t){const ue=e.rr(q.metadata.name);q.document&&(p=p.add(ue));const ke=e.ur(q);ke.setReadTime(e.cr(q.metadata.readTime)),v=v.insert(ue,ke)}const N=d.Zi.newChangeBuffer({trackRemovals:!0}),j=yield qd(d,(q=a,na(Hc(fr.fromString(`__bundle__/docs/${q}`)))));var q;return d.persistence.runTransaction("Apply bundle documents","readwrite",q=>A_(q,N,v).next(ue=>(N.apply(q),ue)).next(ue=>d.Bs.removeMatchingKeysForTargetId(q,j.targetId).next(()=>d.Bs.addMatchingKeys(q,p,j.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(q,ue.nr,ue.sr)).next(()=>ue.nr)))}),tm.apply(this,arguments)}function Lp(i,e){return nm.apply(this,arguments)}function nm(){return nm=(0,ze.Z)(function*(i,e,t=Ir()){const a=yield qd(i,na(pf(e.bundledQuery))),d=en(i);return d.persistence.runTransaction("Save named query","readwrite",p=>{const v=Us(e.readTime);if(a.snapshotVersion.compareTo(v)>=0)return d.qs.saveNamedQuery(p,e);const N=a.withResumeToken(nt.EMPTY_BYTE_STRING,v);return d.Ji=d.Ji.insert(N.targetId,N),d.Bs.updateTargetData(p,N).next(()=>d.Bs.removeMatchingKeysForTargetId(p,a.targetId)).next(()=>d.Bs.addMatchingKeys(p,t,a.targetId)).next(()=>d.qs.saveNamedQuery(p,e))})}),nm.apply(this,arguments)}function oy(i,e){return`firestore_clients_${i}_${e}`}function Cf(i,e,t){let a=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function rm(i,e){return`firestore_targets_${i}_${e}`}class Bl{constructor(e,t,a,d){this.user=e,this.batchId=t,this.state=a,this.error=d}static ar(e,t,a){const d=JSON.parse(a);let p,v="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return v&&d.error&&(v="string"==typeof d.error.message&&"string"==typeof d.error.code,v&&(p=new Pt(d.error.code,d.error.message))),v?new Bl(e,t,d.state,p):(Xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ud{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static ar(e,t){const a=JSON.parse(t);let d,p="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(d=new Pt(a.error.code,a.error.message))),p?new ud(e,a.state,d):(Xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class im{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const a=JSON.parse(t);let d="object"==typeof a&&a.activeTargetIds instanceof Array,p=Gc();for(let v=0;d&&v<a.activeTargetIds.length;++v)d=Pc(a.activeTargetIds[v]),p=p.add(a.activeTargetIds[v]);return d?new im(e,p):(Xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sm{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sm(t.clientId,t.onlineState):(Xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ay{constructor(){this.activeTargetIds=Gc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uy{constructor(e,t,a,d,p){this.window=e,this.ii=t,this.persistenceKey=a,this.wr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ri(ir),this.started=!1,this.yr=[];const v=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.pr=oy(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new ay),this.Tr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ze.Z)(function*(){const t=yield e.syncEngine.$i();for(const d of t){if(d===e.wr)continue;const p=e.getItem(oy(e.persistenceKey,d));if(p){const v=im.ar(d,p);v&&(e.gr=e.gr.insert(v.clientId,v))}}e.Pr();const a=e.storage.getItem(e.vr);if(a){const d=e.br(a);d&&e.Vr(d)}for(const d of e.yr)e.mr(d);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((a,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,a){this.Dr(e,t,a),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(rm(this.persistenceKey,e));if(a){const d=ud.ar(e,a);d&&(t=d.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rm(this.persistenceKey,e))}updateQueryState(e,t,a){this.kr(e,t,a)}handleUserChange(e,t,a){t.forEach(d=>{this.Cr(d)}),this.currentUser=e,a.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ht("SharedClientState","READ",e,t),t}setItem(e,t){Ht("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ht("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const a=e;if(a.storageArea===this.storage){if(Ht("SharedClientState","EVENT",a.key,a.newValue),a.key===this.pr)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ze.Z)(function*(){if(t.started){if(null!==a.key)if(t.Tr.test(a.key)){if(null==a.newValue){const d=t.Or(a.key);return t.Fr(d,null)}{const d=t.Br(a.key,a.newValue);if(d)return t.Fr(d.clientId,d)}}else if(t.Er.test(a.key)){if(null!==a.newValue){const d=t.Lr(a.key,a.newValue);if(d)return t.qr(d)}}else if(t.Ar.test(a.key)){if(null!==a.newValue){const d=t.Ur(a.key,a.newValue);if(d)return t.Kr(d)}}else if(a.key===t.vr){if(null!==a.newValue){const d=t.br(a.newValue);if(d)return t.Vr(d)}}else if(a.key===t.Ir){const d=function(p){let v=Ks.ct;if(null!=p)try{const N=JSON.parse(p);$n("number"==typeof N),v=N}catch(N){Xr("SharedClientState","Failed to read sequence number from WebStorage",N)}return v}(a.newValue);d!==Ks.ct&&t.sequenceNumberHandler(d)}else if(a.key===t.Rr){const d=t.Gr(a.newValue);yield Promise.all(d.map(p=>t.syncEngine.Qr(p)))}}else t.yr.push(a)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,a){const d=new Bl(this.currentUser,e,t,a),p=Cf(this.persistenceKey,this.currentUser,e);this.setItem(p,d.hr())}Cr(e){const t=Cf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,a){const d=rm(this.persistenceKey,e),p=new ud(e,t,a);this.setItem(d,p.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const a=this.Or(e);return im.ar(a,t)}Lr(e,t){const a=this.Er.exec(e),d=Number(a[1]);return Bl.ar(new tr(void 0!==a[2]?a[2]:null),d,t)}Ur(e,t){const a=this.Ar.exec(e),d=Number(a[1]);return ud.ar(d,t)}br(e){return sm.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ze.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ht("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const a=t?this.gr.insert(e,t):this.gr.remove(e),d=this.Sr(this.gr),p=this.Sr(a),v=[],N=[];return p.forEach(j=>{d.has(j)||v.push(j)}),d.forEach(j=>{p.has(j)||N.push(j)}),this.syncEngine.Wr(v,N).then(()=>{this.gr=a})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Gc();return e.forEach((a,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class P_{constructor(){this.Hr=new ay,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,a){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ay,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class x_{Yr(e){}shutdown(){}}class om{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let If=null;function Zd(){return null===If?If=268435456+Math.round(2147483648*Math.random()):If++,"0x"+If.toString(16)}const ly={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eE{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ho="WebChannelConnection";class ld extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,a,d,p){const v=Zd(),N=this.To(e,t);Ht("RestConnection",`Sending RPC '${e}' ${v}:`,N,a);const j={};return this.Eo(j,d,p),this.Ao(e,N,j,a).then(q=>(Ht("RestConnection",`Received RPC '${e}' ${v}: `,q),q),q=>{throw ks("RestConnection",`RPC '${e}' ${v} failed with error: `,q,"url: ",N,"request:",a),q})}vo(e,t,a,d,p,v){return this.Io(e,t,a,d,p)}Eo(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Iu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,p)=>e[p]=d),a&&a.headers.forEach((d,p)=>e[p]=d)}To(e,t){return`${this.mo}/v1/${t}:${ly[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,a,d){const p=Zd();return new Promise((v,N)=>{const j=new to;j.setWithCredentials(!0),j.listenOnce(hi.COMPLETE,()=>{try{switch(j.getLastErrorCode()){case zs.NO_ERROR:const ue=j.getResponseJson();Ht(Ho,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(ue)),v(ue);break;case zs.TIMEOUT:Ht(Ho,`RPC '${e}' ${p} timed out`),N(new Pt(ft.DEADLINE_EXCEEDED,"Request time out"));break;case zs.HTTP_ERROR:const ke=j.getStatus();if(Ht(Ho,`RPC '${e}' ${p} failed with status:`,ke,"response text:",j.getResponseText()),ke>0){let dt=j.getResponseJson();Array.isArray(dt)&&(dt=dt[0]);const Mt=dt?.error;if(Mt&&Mt.status&&Mt.message){const rn=function(bn){const Rn=bn.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(Rn)>=0?Rn:ft.UNKNOWN}(Mt.status);N(new Pt(rn,Mt.message))}else N(new Pt(ft.UNKNOWN,"Server responded with status "+j.getStatus()))}else N(new Pt(ft.UNAVAILABLE,"Connection failed."));break;default:Kt()}}finally{Ht(Ho,`RPC '${e}' ${p} completed.`)}});const q=JSON.stringify(d);Ht(Ho,`RPC '${e}' ${p} sending request:`,d),j.send(t,"POST",q,a,15)})}Ro(e,t,a){const d=Zd(),p=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=Ao(),N=Gs(),j={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},q=this.longPollingOptions.timeoutSeconds;void 0!==q&&(j.longPollingTimeout=Math.round(1e3*q)),this.useFetchStreams&&(j.xmlHttpFactory=new zu({})),this.Eo(j.initMessageHeaders,t,a),j.encodeInitMessageHeaders=!0;const ue=p.join("");Ht(Ho,`Creating RPC '${e}' stream ${d}: ${ue}`,j);const ke=v.createWebChannel(ue,j);let dt=!1,Mt=!1;const rn=new eE({ro:Rn=>{Mt?Ht(Ho,`Not sending because RPC '${e}' stream ${d} is closed:`,Rn):(dt||(Ht(Ho,`Opening RPC '${e}' stream ${d} transport.`),ke.open(),dt=!0),Ht(Ho,`RPC '${e}' stream ${d} sending:`,Rn),ke.send(Rn))},oo:()=>ke.close()}),bn=(Rn,Pr,Ui)=>{Rn.listen(Pr,Gr=>{try{Ui(Gr)}catch(wo){setTimeout(()=>{throw wo},0)}})};return bn(ke,yl.EventType.OPEN,()=>{Mt||Ht(Ho,`RPC '${e}' stream ${d} transport opened.`)}),bn(ke,yl.EventType.CLOSE,()=>{Mt||(Mt=!0,Ht(Ho,`RPC '${e}' stream ${d} transport closed`),rn.wo())}),bn(ke,yl.EventType.ERROR,Rn=>{Mt||(Mt=!0,ks(Ho,`RPC '${e}' stream ${d} transport errored:`,Rn),rn.wo(new Pt(ft.UNAVAILABLE,"The operation could not be completed")))}),bn(ke,yl.EventType.MESSAGE,Rn=>{var Pr;if(!Mt){const Ui=Rn.data[0];$n(!!Ui);const wo=Ui.error||(null===(Pr=Ui[0])||void 0===Pr?void 0:Pr.error);if(wo){Ht(Ho,`RPC '${e}' stream ${d} received error:`,wo);const Es=wo.status;let Ms=function(Qf){const IE=te[Qf];if(void 0!==IE)return Wt(IE)}(Es),Xa=wo.message;void 0===Ms&&(Ms=ft.INTERNAL,Xa="Unknown error status: "+Es+" with message "+wo.message),Mt=!0,rn.wo(new Pt(Ms,Xa)),ke.close()}else Ht(Ho,`RPC '${e}' stream ${d} received:`,Ui),rn._o(Ui)}}),bn(N,Mc.STAT_EVENT,Rn=>{Rn.stat===as.PROXY?Ht(Ho,`RPC '${e}' stream ${d} detected buffering proxy`):Rn.stat===as.NOPROXY&&Ht(Ho,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{rn.fo()},0),rn}}function bf(){return typeof window<"u"?window:null}function Fp(){return typeof document<"u"?document:null}function Df(i){return new Wa(i,!0)}class cy{constructor(e,t,a=1e3,d=1.5,p=6e4){this.ii=e,this.timerId=t,this.Po=a,this.bo=d,this.Vo=p,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),a=Math.max(0,Date.now()-this.Co),d=Math.max(0,t-a);d>0&&Ht("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,d,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class am{constructor(e,t,a,d,p,v,N,j){this.ii=e,this.$o=a,this.Oo=d,this.connection=p,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=N,this.listener=j,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new cy(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ze.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ze.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var a=this;return(0,ze.Z)(function*(){a.Ho(),a.Jo(),a.qo.cancel(),a.Fo++,4!==e?a.qo.reset():t&&t.code===ft.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),a.qo.xo()):t&&t.code===ft.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Yo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,d])=>{this.Fo===t&&this.Zo(a,d)},a=>{e(()=>{const d=new Pt(ft.UNKNOWN,"Fetching auth token failed: "+a.message);return this.tu(d)})})}Zo(e,t){const a=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{a(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(d=>{a(()=>this.tu(d))}),this.stream.onMessage(d=>{a(()=>this.onMessage(d))})}Go(){var e=this;this.state=5,this.qo.No((0,ze.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ht("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O_ extends am{constructor(e,t,a,d,p,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,d,v),this.serializer=p}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function jd(i,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:Kt(),d=e.targetChange.targetIds||[],p=function(j,q){return j.useProto3Json?($n(void 0===q||"string"==typeof q),nt.fromBase64String(q||"")):($n(void 0===q||q instanceof Uint8Array),nt.fromUint8Array(q||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,N=v&&function(j){const q=void 0===j.code?ft.UNKNOWN:Wt(j.code);return new Pt(q,j.message||"")}(v);t=new Mu(a,d,p,N||null)}else if("documentChange"in e){const a=e.documentChange,d=sl(i,a.document.name),p=Us(a.document.updateTime),v=a.document.createTime?Us(a.document.createTime):Gn.min(),N=new Fs({mapValue:{fields:a.document.fields}}),j=Ji.newFoundDocument(d,p,v,N);t=new $r(a.targetIds||[],a.removedTargetIds||[],j.key,j)}else if("documentDelete"in e){const a=e.documentDelete,d=sl(i,a.document),p=a.readTime?Us(a.readTime):Gn.min(),v=Ji.newNoDocument(d,p);t=new $r([],a.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const a=e.documentRemove,d=sl(i,a.document);t=new $r([],a.removedTargetIds||[],d,null)}else{if(!("filter"in e))return Kt();{const a=e.filter,{count:d=0,unchangedNames:p}=a,v=new $(d,p);t=new Tr(a.targetId,v)}}var j;return t}(this.serializer,e),a=function(d){if(!("targetChange"in d))return Gn.min();const p=d.targetChange;return p.targetIds&&p.targetIds.length?Gn.min():p.readTime?Us(p.readTime):Gn.min()}(e);return this.listener.nu(t,a)}su(e){const t={};t.database=Bd(this.serializer),t.addTarget=function(d,p){let v;const N=p.target;if(v=ac(N)?{documents:zm(d,N)}:{query:ol(d,N)},v.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){v.resumeToken=lu(d,p.resumeToken);const j=Gm(d,p.expectedCount);null!==j&&(v.expectedCount=j)}else if(p.snapshotVersion.compareTo(Gn.min())>0){v.readTime=Vd(d,p.snapshotVersion.toTimestamp());const j=Gm(d,p.expectedCount);null!==j&&(v.expectedCount=j)}return v}(this.serializer,e);const a=function kl(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Wo(t)}iu(e){const t={};t.database=Bd(this.serializer),t.removeTarget=e,this.Wo(t)}}class yv extends am{constructor(e,t,a,d,p,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,d,v),this.serializer=p,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if($n(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function fp(i,e){return i&&i.length>0?($n(void 0!==e),i.map(t=>function(a,d){let p=Us(a.updateTime?a.updateTime:d);return p.isEqual(Gn.min())&&(p=Us(d)),new $m(p,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=Us(e.commitTime);return this.listener.cu(a,t)}return $n(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Bd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>Ur(this.serializer,a))};this.Wo(t)}}class _v extends class{}{constructor(e,t,a,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=d,this.lu=!1}fu(){if(this.lu)throw new Pt(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,p])=>this.connection.Io(e,t,a,d,p)).catch(d=>{throw"FirebaseError"===d.name?(d.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Pt(ft.UNKNOWN,d.toString())})}vo(e,t,a,d){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,v])=>this.connection.vo(e,t,a,p,v,d)).catch(p=>{throw"FirebaseError"===p.name?(p.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Pt(ft.UNKNOWN,p.toString())})}terminate(){this.lu=!0}}class Mh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Xr(t),this.mu=!1):Ht("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class _c{constructor(e,t,a,d,p){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=p,this.Pu.Yr(N=>{a.enqueueAndForget((0,ze.Z)(function*(){var j;Pu(v)&&(Ht("RemoteStore","Restarting streams for network reachability change."),yield(j=(0,ze.Z)(function*(q){const ue=en(q);ue.vu.add(4),yield cd(ue),ue.bu.set("Unknown"),ue.vu.delete(4),yield Ru(ue)}),function(q){return j.apply(this,arguments)})(v))}))}),this.bu=new Mh(a,d)}}function Ru(i){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,ze.Z)(function*(i){if(Pu(i))for(const e of i.Ru)yield e(!0)}),Vp.apply(this,arguments)}function cd(i){return L_.apply(this,arguments)}function L_(){return L_=(0,ze.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),L_.apply(this,arguments)}function dy(i,e){const t=en(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Nu(t)?um(t):Jd(t).Ko()&&Up(t,e))}function Tf(i,e){const t=en(i),a=Jd(t);t.Au.delete(e),a.Ko()&&hy(t,e),0===t.Au.size&&(a.Ko()?a.jo():Pu(t)&&t.bu.set("Unknown"))}function Up(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jd(i).su(e)}function hy(i,e){i.Vu.qt(e),Jd(i).iu(e)}function um(i){i.Vu=new Xc({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),Jd(i).start(),i.bu.gu()}function Nu(i){return Pu(i)&&!Jd(i).Uo()&&i.Au.size>0}function Pu(i){return 0===en(i).vu.size}function fy(i){i.Vu=void 0}function F_(i){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,ze.Z)(function*(i){i.Au.forEach((e,t)=>{Up(i,e)})}),Nr.apply(this,arguments)}function Bp(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,ze.Z)(function*(i,e){fy(i),Nu(i)?(i.bu.Iu(e),um(i)):i.bu.set("Unknown")}),jp.apply(this,arguments)}function tE(i,e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,ze.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof Mu&&2===e.state&&e.cause)try{yield(a=(0,ze.Z)(function*(d,p){const v=p.cause;for(const N of p.targetIds)d.Au.has(N)&&(yield d.remoteSyncer.rejectListen(N,v),d.Au.delete(N),d.Vu.removeTarget(N))}),function(d,p){return a.apply(this,arguments)})(i,e)}catch(a){Ht("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Yd(i,a)}else if(e instanceof $r?i.Vu.Ht(e):e instanceof Tr?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(Gn.min()))try{const a=yield S_(i.localStore);t.compareTo(a)>=0&&(yield function(d,p){const v=d.Vu.ce(p);return v.targetChanges.forEach((N,j)=>{if(N.resumeToken.approximateByteSize()>0){const q=d.Au.get(j);q&&d.Au.set(j,q.withResumeToken(N.resumeToken,p))}}),v.targetMismatches.forEach((N,j)=>{const q=d.Au.get(N);if(!q)return;d.Au.set(N,q.withResumeToken(nt.EMPTY_BYTE_STRING,q.snapshotVersion)),hy(d,N);const ue=new qa(q.target,N,j,q.sequenceNumber);Up(d,ue)}),d.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(a){Ht("RemoteStore","Failed to raise snapshot:",a),yield Yd(i,a)}var a}),Hp.apply(this,arguments)}function Yd(i,e,t){return py.apply(this,arguments)}function py(){return py=(0,ze.Z)(function*(i,e,t){if(!Ca(e))throw e;i.vu.add(1),yield cd(i),i.bu.set("Offline"),t||(t=()=>S_(i.localStore)),i.asyncQueue.enqueueRetryable((0,ze.Z)(function*(){Ht("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield Ru(i)}))}),py.apply(this,arguments)}function Rh(i,e){return e().catch(t=>Yd(i,t,e))}function Qd(i){return lm.apply(this,arguments)}function lm(){return lm=(0,ze.Z)(function*(i){const e=en(i),t=Hl(e);let a=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;gy(e);)try{const d=yield M_(e.localStore,a);if(null===d){0===e.Eu.length&&t.jo();break}a=d.batchId,$p(e,d)}catch(d){yield Yd(e,d)}Gp(e)&&my(e)}),lm.apply(this,arguments)}function gy(i){return Pu(i)&&i.Eu.length<10}function $p(i,e){i.Eu.push(e);const t=Hl(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function Gp(i){return Pu(i)&&!Hl(i).Uo()&&i.Eu.length>0}function my(i){Hl(i).start()}function cm(i){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,ze.Z)(function*(i){Hl(i).hu()}),Sf.apply(this,arguments)}function Xd(i){return ll.apply(this,arguments)}function ll(){return ll=(0,ze.Z)(function*(i){const e=Hl(i);for(const t of i.Eu)e.uu(t.mutations)}),ll.apply(this,arguments)}function V_(i,e,t){return yy.apply(this,arguments)}function yy(){return yy=(0,ze.Z)(function*(i,e,t){const a=i.Eu.shift(),d=m.from(a,e,t);yield Rh(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield Qd(i)}),yy.apply(this,arguments)}function dm(i,e){return vc.apply(this,arguments)}function vc(){return vc=(0,ze.Z)(function*(i,e){var t;e&&Hl(i).ou&&(yield(t=(0,ze.Z)(function*(a,d){if(at(p=d.code)&&p!==ft.ABORTED){const v=a.Eu.shift();Hl(a).Qo(),yield Rh(a,()=>a.remoteSyncer.rejectFailedWrite(v.batchId,d)),yield Qd(a)}var p}),function(a,d){return t.apply(this,arguments)})(i,e)),Gp(i)&&my(i)}),vc.apply(this,arguments)}function Af(i,e){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,ze.Z)(function*(i,e){const t=en(i);t.asyncQueue.verifyOperationInProgress(),Ht("RemoteStore","RemoteStore received new credentials");const a=Pu(t);t.vu.add(3),yield cd(t),a&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Ru(t)}),Nh.apply(this,arguments)}function zp(i,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,ze.Z)(function*(i,e){const t=en(i);e?(t.vu.delete(2),yield Ru(t)):e||(t.vu.add(2),yield cd(t),t.bu.set("Unknown"))}),Wp.apply(this,arguments)}function Jd(i){return i.Su||(i.Su=function(e,t,a){const d=en(e);return d.fu(),new O_(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,a)}(i.datastore,i.asyncQueue,{uo:F_.bind(null,i),ao:Bp.bind(null,i),nu:tE.bind(null,i)}),i.Ru.push(function(){var e=(0,ze.Z)(function*(t){t?(i.Su.Qo(),Nu(i)?um(i):i.bu.set("Unknown")):(yield i.Su.stop(),fy(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function Hl(i){return i.Du||(i.Du=function(e,t,a){const d=en(e);return d.fu(),new yv(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,a)}(i.datastore,i.asyncQueue,{uo:cm.bind(null,i),ao:dm.bind(null,i),au:Xd.bind(null,i),cu:V_.bind(null,i)}),i.Ru.push(function(){var e=(0,ze.Z)(function*(t){t?(i.Du.Qo(),yield Qd(i)):(yield i.Du.stop(),i.Eu.length>0&&(Ht("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class Mf{constructor(e,t,a,d,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=d,this.removalCallback=p,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,a,d,p){const v=Date.now()+a,N=new Mf(e,t,v,d,p);return N.start(a),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pt(ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ec(i,e){if(Xr("AsyncQueue",`${e}: ${i}`),Ca(i))return new Pt(ft.UNAVAILABLE,`${e}: ${i}`);throw i}class eh{constructor(e){this.comparator=e?(t,a)=>e(t,a)||un.comparator(t.key,a.key):(t,a)=>un.comparator(t.key,a.key),this.keyedMap=rl(),this.sortedSet=new ri(this.comparator)}static emptySet(e){return new eh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,p=a.getNext().key;if(!d.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new eh;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class qp{constructor(){this.Cu=new ri(un.comparator)}track(e){const t=e.doc.key,a=this.Cu.get(t);a?0!==e.type&&3===a.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==a.type?this.Cu=this.Cu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Cu=this.Cu.remove(t):1===e.type&&2===a.type?this.Cu=this.Cu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Kt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,a)=>{e.push(a)}),e}}class cl{constructor(e,t,a,d,p,v,N,j,q){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=d,this.mutatedKeys=p,this.fromCache=v,this.syncStateChanged=N,this.excludesMetadataChanges=j,this.hasCachedResults=q}static fromInitialDocuments(e,t,a,d,p){const v=[];return t.forEach(N=>{v.push({type:0,doc:N})}),new cl(e,t,eh.emptySet(t),v,a,d,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==a[d].type||!t[d].doc.isEqual(a[d].doc))return!1;return!0}}class hm{constructor(){this.Nu=void 0,this.listeners=[]}}class U_{constructor(){this.queries=new Ga(e=>nf(e),nl),this.onlineState="Unknown",this.ku=new Set}}function _y(i,e){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,ze.Z)(function*(i,e){const t=en(i),a=e.query;let d=!1,p=t.queries.get(a);if(p||(d=!0,p=new hm),d)try{p.Nu=yield t.onListen(a)}catch(v){const N=Ec(v,`Initialization of query '${ou(e.query)}' failed`);return void e.onError(N)}t.queries.set(a,p),p.listeners.push(e),e.Mu(t.onlineState),p.Nu&&e.$u(p.Nu)&&Ey(t)}),Rf.apply(this,arguments)}function fm(i,e){return pm.apply(this,arguments)}function pm(){return pm=(0,ze.Z)(function*(i,e){const t=en(i),a=e.query;let d=!1;const p=t.queries.get(a);if(p){const v=p.listeners.indexOf(e);v>=0&&(p.listeners.splice(v,1),d=0===p.listeners.length)}if(d)return t.queries.delete(a),t.onUnlisten(a)}),pm.apply(this,arguments)}function Nf(i,e){const t=en(i);let a=!1;for(const d of e){const v=t.queries.get(d.query);if(v){for(const N of v.listeners)N.$u(d)&&(a=!0);v.Nu=d}}a&&Ey(t)}function vy(i,e,t){const a=en(i),d=a.queries.get(e);if(d)for(const p of d.listeners)p.onError(t);a.queries.delete(e)}function Ey(i){i.ku.forEach(e=>{e.next()})}class Za{constructor(e,t,a){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=a||{}}$u(e){if(!this.options.includeMetadataChanges){const a=[];for(const d of e.docChanges)3!==d.type&&a.push(d);e=new cl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class vv{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class gm{constructor(e){this.serializer=e}rr(e){return sl(this.serializer,e)}ur(e){return e.metadata.exists?hp(this.serializer,e.document,!1):Ji.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Us(e)}}class wy{constructor(e,t,a){this.ju=e,this.localStore=t,this.serializer=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kp(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const a=fr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,a=new gm(this.serializer);for(const d of e)if(d.metadata.queries){const p=a.rr(d.metadata.name);for(const v of d.metadata.queries){const N=(t.get(v)||Ir()).add(p);t.set(v,N)}}return t}complete(){var e=this;return(0,ze.Z)(function*(){const t=yield function N_(i,e,t,a){return tm.apply(this,arguments)}(e.localStore,new gm(e.serializer),e.documents,e.ju.id),a=e.Wu(e.documents);for(const d of e.queries)yield Lp(e.localStore,d,a.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Kp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Cy{constructor(e){this.key=e}}class Pf{constructor(e){this.key=e}}class $l{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ir(),this.mutatedKeys=Ir(),this.tc=_h(e),this.ec=new eh(this.tc)}get nc(){return this.Yu}sc(e,t){const a=t?t.ic:new qp,d=t?t.ec:this.ec;let p=t?t.mutatedKeys:this.mutatedKeys,v=d,N=!1;const j="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,q="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((ue,ke)=>{const dt=d.get(ue),Mt=cc(this.query,ke)?ke:null,rn=!!dt&&this.mutatedKeys.has(dt.key),bn=!!Mt&&(Mt.hasLocalMutations||this.mutatedKeys.has(Mt.key)&&Mt.hasCommittedMutations);let Rn=!1;dt&&Mt?dt.data.isEqual(Mt.data)?rn!==bn&&(a.track({type:3,doc:Mt}),Rn=!0):this.rc(dt,Mt)||(a.track({type:2,doc:Mt}),Rn=!0,(j&&this.tc(Mt,j)>0||q&&this.tc(Mt,q)<0)&&(N=!0)):!dt&&Mt?(a.track({type:0,doc:Mt}),Rn=!0):dt&&!Mt&&(a.track({type:1,doc:dt}),Rn=!0,(j||q)&&(N=!0)),Rn&&(Mt?(v=v.add(Mt),p=bn?p.add(ue):p.delete(ue)):(v=v.delete(ue),p=p.delete(ue)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const ue="F"===this.query.limitType?v.last():v.first();v=v.delete(ue.key),p=p.delete(ue.key),a.track({type:1,doc:ue})}return{ec:v,ic:a,zi:N,mutatedKeys:p}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const d=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const p=e.ic.xu();p.sort((q,ue)=>function(ke,dt){const Mt=rn=>{switch(rn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kt()}};return Mt(ke)-Mt(dt)}(q.type,ue.type)||this.tc(q.doc,ue.doc)),this.oc(a);const v=t?this.uc():[],N=0===this.Zu.size&&this.current?1:0,j=N!==this.Xu;return this.Xu=N,0!==p.length||j?{snapshot:new cl(this.query,e.ec,d,p,e.mutatedKeys,0===N,j,!1,!!a&&a.resumeToken.approximateByteSize()>0),cc:v}:{cc:v}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new qp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ir(),this.ec.forEach(a=>{this.ac(a.key)&&(this.Zu=this.Zu.add(a.key))});const t=[];return e.forEach(a=>{this.Zu.has(a)||t.push(new Pf(a))}),this.Zu.forEach(a=>{e.has(a)||t.push(new Cy(a))}),t}hc(e){this.Yu=e.ir,this.Zu=Ir();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return cl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Zp{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class B_{constructor(e){this.key=e,this.fc=!1}}class j_{constructor(e,t,a,d,p,v){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=d,this.currentUser=p,this.maxConcurrentLimboResolutions=v,this.dc={},this.wc=new Ga(N=>nf(N),nl),this._c=new Map,this.mc=new Set,this.gc=new ri(un.comparator),this.yc=new Map,this.Ic=new yc,this.Tc={},this.Ec=new Map,this.Ac=Ma.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Iy(i,e){return dd.apply(this,arguments)}function dd(){return dd=(0,ze.Z)(function*(i,e){const t=rg(i);let a,d;const p=t.wc.get(e);if(p)a=p.targetId,t.sharedClientState.addLocalQueryTarget(a),d=p.view.lc();else{const v=yield qd(t.localStore,na(e)),N=t.sharedClientState.addLocalQueryTarget(v.targetId);a=v.targetId,d=yield Ph(t,e,a,"current"===N,v.resumeToken),t.isPrimaryClient&&dy(t.remoteStore,v)}return d}),dd.apply(this,arguments)}function Ph(i,e,t,a,d){return by.apply(this,arguments)}function by(){return by=(0,ze.Z)(function*(i,e,t,a,d){i.Rc=(ke,dt,Mt)=>{return(rn=(0,ze.Z)(function*(bn,Rn,Pr,Ui){let Gr=Rn.view.sc(Pr);Gr.zi&&(Gr=yield Ah(bn.localStore,Rn.query,!1).then(({documents:Ms})=>Rn.view.sc(Ms,Gr)));const wo=Ui&&Ui.targetChanges.get(Rn.targetId),Es=Rn.view.applyChanges(Gr,bn.isPrimaryClient,wo);return Sy(bn,Rn.targetId,Es.cc),Es.snapshot}),function(bn,Rn,Pr,Ui){return rn.apply(this,arguments)})(i,ke,dt,Mt);var rn};const p=yield Ah(i.localStore,e,!0),v=new $l(e,p.ir),N=v.sc(p.documents),j=ii.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==i.onlineState,d),q=v.applyChanges(N,i.isPrimaryClient,j);Sy(i,t,q.cc);const ue=new Zp(e,t,v);return i.wc.set(e,ue),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),q.snapshot}),by.apply(this,arguments)}function dl(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,ze.Z)(function*(i,e){const t=en(i),a=t.wc.get(e),d=t._c.get(a.targetId);if(d.length>1)return t._c.set(a.targetId,d.filter(p=>!nl(p,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Kd(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),Tf(t.remoteStore,a.targetId),wc(t,a.targetId)}).catch(ce))):(wc(t,a.targetId),yield Kd(t.localStore,a.targetId,!0))}),mm.apply(this,arguments)}function Ya(){return Ya=(0,ze.Z)(function*(i,e,t){const a=ig(i);try{const d=yield function(p,v){const N=en(p),j=Pi.now(),q=v.reduce((dt,Mt)=>dt.add(Mt.key),Ir());let ue,ke;return N.persistence.runTransaction("Locally write mutations","readwrite",dt=>{let Mt=ra(),rn=Ir();return N.Zi.getEntries(dt,q).next(bn=>{Mt=bn,Mt.forEach((Rn,Pr)=>{Pr.isValidDocument()||(rn=rn.add(Rn))})}).next(()=>N.localDocuments.getOverlayedDocuments(dt,Mt)).next(bn=>{ue=bn;const Rn=[];for(const Pr of v){const Ui=Aa(Pr,ue.get(Pr.key).overlayedDocument);null!=Ui&&Rn.push(new Nl(Pr.key,Ui,Jh(Ui.value.mapValue),fs.exists(!0)))}return N.mutationQueue.addMutationBatch(dt,j,Rn,v)}).next(bn=>{ke=bn;const Rn=bn.applyToLocalDocumentSet(ue,rn);return N.documentOverlayCache.saveOverlays(dt,bn.batchId,Rn)})}).then(()=>({batchId:ke.batchId,changes:sp(ue)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(d.batchId),function(p,v,N){let j=p.Tc[p.currentUser.toKey()];j||(j=new ri(ir)),j=j.insert(v,N),p.Tc[p.currentUser.toKey()]=j}(a,d.batchId,t),yield hd(a,d.changes),yield Qd(a.remoteStore)}catch(d){const p=Ec(d,"Failed to persist write");t.reject(p)}}),Ya.apply(this,arguments)}function Yp(i,e){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,ze.Z)(function*(i,e){const t=en(i);try{const a=yield function sy(i,e){const t=en(i),a=e.snapshotVersion;let d=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const v=t.Zi.newChangeBuffer({trackRemovals:!0});d=t.Ji;const N=[];e.targetChanges.forEach((ue,ke)=>{const dt=d.get(ke);if(!dt)return;N.push(t.Bs.removeMatchingKeys(p,ue.removedDocuments,ke).next(()=>t.Bs.addMatchingKeys(p,ue.addedDocuments,ke)));let Mt=dt.withSequenceNumber(p.currentSequenceNumber);var rn,bn,Rn;null!==e.targetMismatches.get(ke)?Mt=Mt.withResumeToken(nt.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):ue.resumeToken.approximateByteSize()>0&&(Mt=Mt.withResumeToken(ue.resumeToken,a)),d=d.insert(ke,Mt),bn=Mt,Rn=ue,(0===(rn=dt).resumeToken.approximateByteSize()||bn.snapshotVersion.toMicroseconds()-rn.snapshotVersion.toMicroseconds()>=3e8||Rn.addedDocuments.size+Rn.modifiedDocuments.size+Rn.removedDocuments.size>0)&&N.push(t.Bs.updateTargetData(p,Mt))});let j=ra(),q=Ir();if(e.documentUpdates.forEach(ue=>{e.resolvedLimboDocuments.has(ue)&&N.push(t.persistence.referenceDelegate.updateLimboDocument(p,ue))}),N.push(A_(p,v,e.documentUpdates).next(ue=>{j=ue.nr,q=ue.sr})),!a.isEqual(Gn.min())){const ue=t.Bs.getLastRemoteSnapshotVersion(p).next(ke=>t.Bs.setTargetsMetadata(p,p.currentSequenceNumber,a));N.push(ue)}return be.waitFor(N).next(()=>v.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,j,q)).next(()=>j)}).then(p=>(t.Ji=d,p))}(t.localStore,e);e.targetChanges.forEach((d,p)=>{const v=t.yc.get(p);v&&($n(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?v.fc=!0:d.modifiedDocuments.size>0?$n(v.fc):d.removedDocuments.size>0&&($n(v.fc),v.fc=!1))}),yield hd(t,a,e)}catch(a){yield ce(a)}}),Qa.apply(this,arguments)}function ym(i,e,t){const a=en(i);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const d=[];a.wc.forEach((p,v)=>{const N=v.view.Mu(e);N.snapshot&&d.push(N.snapshot)}),function(p,v){const N=en(p);N.onlineState=v;let j=!1;N.queries.forEach((q,ue)=>{for(const ke of ue.listeners)ke.Mu(v)&&(j=!0)}),j&&Ey(N)}(a.eventManager,e),d.length&&a.dc.nu(d),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function wv(i,e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ze.Z)(function*(i,e,t){const a=en(i);a.sharedClientState.updateQueryState(e,"rejected",t);const d=a.yc.get(e),p=d&&d.key;if(p){let v=new ri(un.comparator);v=v.insert(p,Ji.newNoDocument(p,Gn.min()));const N=Ir().add(p),j=new xl(Gn.min(),new Map,new ri(ir),v,N);yield Yp(a,j),a.gc=a.gc.remove(p),a.yc.delete(e),eg(a)}else yield Kd(a.localStore,e,!1).then(()=>wc(a,e,t)).catch(ce)}),Qp.apply(this,arguments)}function H_(i,e){return xf.apply(this,arguments)}function xf(){return xf=(0,ze.Z)(function*(i,e){const t=en(i),a=e.batch.batchId;try{const d=yield function Op(i,e){const t=en(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const d=e.batch.keys(),p=t.Zi.newChangeBuffer({trackRemovals:!0});return function(v,N,j,q){const ue=j.batch,ke=ue.keys();let dt=be.resolve();return ke.forEach(Mt=>{dt=dt.next(()=>q.getEntry(N,Mt)).next(rn=>{const bn=j.docVersions.get(Mt);$n(null!==bn),rn.version.compareTo(bn)<0&&(ue.applyToRemoteDocument(rn,j),rn.isValidDocument()&&(rn.setReadTime(j.commitVersion),q.addEntry(rn)))})}),dt.next(()=>v.mutationQueue.removeMutationBatch(N,ue))}(t,a,e,p).next(()=>p.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(v){let N=Ir();for(let j=0;j<v.mutationResults.length;++j)v.mutationResults[j].transformResults.length>0&&(N=N.add(v.batch.mutations[j].key));return N}(e))).next(()=>t.localDocuments.getDocuments(a,d))})}(t.localStore,e);_m(t,a,null),Jp(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield hd(t,d)}catch(d){yield ce(d)}}),xf.apply(this,arguments)}function Dy(i,e,t){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,ze.Z)(function*(i,e,t){const a=en(i);try{const d=yield function(p,v){const N=en(p);return N.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let q;return N.mutationQueue.lookupMutationBatch(j,v).next(ue=>($n(null!==ue),q=ue.keys(),N.mutationQueue.removeMutationBatch(j,ue))).next(()=>N.mutationQueue.performConsistencyCheck(j)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(j,q,v)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,q)).next(()=>N.localDocuments.getDocuments(j,q))})}(a.localStore,e);_m(a,e,t),Jp(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield hd(a,d)}catch(d){yield ce(d)}}),Ty.apply(this,arguments)}function Xp(){return Xp=(0,ze.Z)(function*(i,e){const t=en(i);Pu(t.remoteStore)||Ht("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(p){const v=en(p);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>v.mutationQueue.getHighestUnacknowledgedBatchId(N))}(t.localStore);if(-1===a)return void e.resolve();const d=t.Ec.get(a)||[];d.push(e),t.Ec.set(a,d)}catch(a){const d=Ec(a,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),Xp.apply(this,arguments)}function Jp(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function _m(i,e,t){const a=en(i);let d=a.Tc[a.currentUser.toKey()];if(d){const p=d.get(e);p&&(t?p.reject(t):p.resolve(),d=d.remove(e)),a.Tc[a.currentUser.toKey()]=d}}function wc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i._c.get(e))i.wc.delete(a),t&&i.dc.Pc(a,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(a=>{i.Ic.containsKey(a)||xu(i,a)})}function xu(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Tf(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),eg(i))}function Sy(i,e,t){for(const a of t)a instanceof Cy?(i.Ic.addReference(a.key,e),Ay(i,a)):a instanceof Pf?(Ht("SyncEngine","Document no longer in limbo: "+a.key),i.Ic.removeReference(a.key,e),i.Ic.containsKey(a.key)||xu(i,a.key)):Kt()}function Ay(i,e){const t=e.key,a=t.path.canonicalString();i.gc.get(t)||i.mc.has(a)||(Ht("SyncEngine","New document in limbo: "+t),i.mc.add(a),eg(i))}function eg(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new un(fr.fromString(e)),a=i.Ac.next();i.yc.set(a,new B_(t)),i.gc=i.gc.insert(t,a),dy(i.remoteStore,new qa(na(Hc(t.path)),a,"TargetPurposeLimboResolution",Ks.ct))}}function hd(i,e,t){return My.apply(this,arguments)}function My(){return My=(0,ze.Z)(function*(i,e,t){const a=en(i),d=[],p=[],v=[];var N;a.wc.isEmpty()||(a.wc.forEach((N,j)=>{v.push(a.Rc(j,e,t).then(q=>{if((q||t)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(j.targetId,q?.fromCache?"not-current":"current"),q){d.push(q);const ue=Np.Li(j.targetId,q);p.push(ue)}}))}),yield Promise.all(v),a.dc.nu(d),yield(N=(0,ze.Z)(function*(j,q){const ue=en(j);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",ke=>be.forEach(q,dt=>be.forEach(dt.Fi,Mt=>ue.persistence.referenceDelegate.addReference(ke,dt.targetId,Mt)).next(()=>be.forEach(dt.Bi,Mt=>ue.persistence.referenceDelegate.removeReference(ke,dt.targetId,Mt)))))}catch(ke){if(!Ca(ke))throw ke;Ht("LocalStore","Failed to update sequence numbers: "+ke)}for(const ke of q){const dt=ke.targetId;if(!ke.fromCache){const Mt=ue.Ji.get(dt),bn=Mt.withLastLimboFreeSnapshotVersion(Mt.snapshotVersion);ue.Ji=ue.Ji.insert(dt,bn)}}}),function(j,q){return N.apply(this,arguments)})(a.localStore,p))}),My.apply(this,arguments)}function $_(i,e){return G_.apply(this,arguments)}function G_(){return G_=(0,ze.Z)(function*(i,e){const t=en(i);if(!t.currentUser.isEqual(e)){Ht("SyncEngine","User change. New user:",e.toKey());const a=yield Xg(t.localStore,e);t.currentUser=e,(d=t).Ec.forEach(v=>{v.forEach(N=>{N.reject(new Pt(ft.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.Ec.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield hd(t,a.er)}var d}),G_.apply(this,arguments)}function z_(i,e){const t=en(i),a=t.yc.get(e);if(a&&a.fc)return Ir().add(a.key);{let d=Ir();const p=t._c.get(e);if(!p)return d;for(const v of p){const N=t.wc.get(v);d=d.unionWith(N.view.nc)}return d}}function Cv(i,e){return th.apply(this,arguments)}function th(){return th=(0,ze.Z)(function*(i,e){const t=en(i),a=yield Ah(t.localStore,e.query,!0),d=e.view.hc(a);return t.isPrimaryClient&&Sy(t,e.targetId,d.cc),d}),th.apply(this,arguments)}function kf(i,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,ze.Z)(function*(i,e){const t=en(i);return kp(t.localStore,e).then(a=>hd(t,a))}),Lf.apply(this,arguments)}function tg(i,e,t,a){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,ze.Z)(function*(i,e,t,a){const d=en(i),p=yield function(v,N){const j=en(v),q=en(j.mutationQueue);return j.persistence.runTransaction("Lookup mutation documents","readonly",ue=>q.Sn(ue,N).next(ke=>ke?j.localDocuments.getDocuments(ue,ke):be.resolve(null)))}(d.localStore,e);var N;null!==p?("pending"===t?yield Qd(d.remoteStore):"acknowledged"===t||"rejected"===t?(_m(d,e,a||null),Jp(d,e),N=e,en(en(d.localStore).mutationQueue).Cn(N)):Kt(),yield hd(d,p)):Ht("SyncEngine","Cannot apply mutation batch with id: "+e)}),Cc.apply(this,arguments)}function Ff(){return Ff=(0,ze.Z)(function*(i,e){const t=en(i);if(rg(t),ig(t),!0===e&&!0!==t.vc){const a=t.sharedClientState.getAllActiveQueryTargets(),d=yield ng(t,a.toArray());t.vc=!0,yield zp(t.remoteStore,!0);for(const p of d)dy(t.remoteStore,p)}else if(!1===e&&!1!==t.vc){const a=[];let d=Promise.resolve();t._c.forEach((p,v)=>{t.sharedClientState.isLocalQueryTarget(v)?a.push(v):d=d.then(()=>(wc(t,v),Kd(t.localStore,v,!0))),Tf(t.remoteStore,v)}),yield d,yield ng(t,a),function(p){const v=en(p);v.yc.forEach((N,j)=>{Tf(v.remoteStore,j)}),v.Ic.Ts(),v.yc=new Map,v.gc=new ri(un.comparator)}(t),t.vc=!1,yield zp(t.remoteStore,!1)}}),Ff.apply(this,arguments)}function ng(i,e,t){return Ry.apply(this,arguments)}function Ry(){return Ry=(0,ze.Z)(function*(i,e,t){const a=en(i),d=[],p=[];for(const v of e){let N;const j=a._c.get(v);if(j&&0!==j.length){N=yield qd(a.localStore,na(j[0]));for(const q of j){const ue=a.wc.get(q),ke=yield Cv(a,ue);ke.snapshot&&p.push(ke.snapshot)}}else{const q=yield em(a.localStore,v);N=yield qd(a.localStore,q),yield Ph(a,nh(q),v,!1,N.resumeToken)}d.push(N)}return a.dc.nu(p),d}),Ry.apply(this,arguments)}function nh(i){return yh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function q_(i){const e=en(i);return en(en(e.localStore).persistence).$i()}function Vf(i,e,t,a){return vm.apply(this,arguments)}function vm(){return vm=(0,ze.Z)(function*(i,e,t,a){const d=en(i);if(d.vc)return void Ht("SyncEngine","Ignoring unexpected query state notification.");const p=d._c.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const v=yield kp(d.localStore,Tl(p[0])),N=xl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,nt.EMPTY_BYTE_STRING);yield hd(d,v,N);break}case"rejected":yield Kd(d.localStore,e,!0),wc(d,e,a);break;default:Kt()}}),vm.apply(this,arguments)}function Ny(i,e,t){return xh.apply(this,arguments)}function xh(){return xh=(0,ze.Z)(function*(i,e,t){const a=rg(i);if(a.vc){for(const d of e){if(a._c.has(d)){Ht("SyncEngine","Adding an already active target "+d);continue}const p=yield em(a.localStore,d),v=yield qd(a.localStore,p);yield Ph(a,nh(p),v.targetId,!1,v.resumeToken),dy(a.remoteStore,v)}for(const d of t)a._c.has(d)&&(yield Kd(a.localStore,d,!1).then(()=>{Tf(a.remoteStore,d),wc(a,d)}).catch(ce))}}),xh.apply(this,arguments)}function rg(i){const e=en(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wv.bind(null,e),e.dc.nu=Nf.bind(null,e.eventManager),e.dc.Pc=vy.bind(null,e.eventManager),e}function ig(i){const e=en(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dy.bind(null,e),e}class og{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ze.Z)(function*(){t.serializer=Df(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Pp(this.persistence,new Qg,e.initialUser,this.serializer)}createPersistence(e){return new Sp(Ef.zs,this.serializer)}createSharedClientState(e){return new P_}terminate(){var e=this;return(0,ze.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xy extends og{constructor(e,t,a){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,ze.Z)(function*(){yield t().call(a,e),yield a.Vc.initialize(a,e),yield ig(a.Vc.syncEngine),yield Qd(a.Vc.remoteStore),yield a.persistence.Ii(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Pp(this.persistence,new Qg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new ul(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const a=new ta(t,this.persistence);return new Jf(e.asyncQueue,a)}createPersistence(e){const t=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?ia.withCacheSize(this.cacheSizeBytes):ia.DEFAULT;return new Rp(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,bf(),Fp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new P_}}class Oy extends xy{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,ze.Z)(function*(){yield t().call(a,e);const d=a.Vc.syncEngine;a.sharedClientState instanceof uy&&(a.sharedClientState.syncEngine={jr:tg.bind(null,d),zr:Vf.bind(null,d),Wr:Ny.bind(null,d),$i:q_.bind(null,d),Qr:kf.bind(null,d)},yield a.sharedClientState.start()),yield a.persistence.Ii(function(){var p=(0,ze.Z)(function*(v){yield function W_(i,e){return Ff.apply(this,arguments)}(a.Vc.syncEngine,v),a.gcScheduler&&(v&&!a.gcScheduler.started?a.gcScheduler.start():v||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(v&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():v||a.indexBackfillerScheduler.stop())});return function(v){return p.apply(this,arguments)}}())})()}createSharedClientState(e){const t=bf();if(!uy.D(t))throw new Pt(ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uy(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class Uf{initialize(e,t){var a=this;return(0,ze.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=d=>ym(a.syncEngine,d,1),a.remoteStore.remoteSyncer.handleCredentialChange=$_.bind(null,a.syncEngine),yield zp(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new U_}createDatastore(e){const t=Df(e.databaseInfo.databaseId),a=new ld(e.databaseInfo);return new _v(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,d=e.asyncQueue,p=N=>ym(this.syncEngine,N,0),v=om.D()?new om:new x_,new _c(t,a,d,p,v);var t,a,d,p,v}createSyncEngine(e,t){return function(a,d,p,v,N,j,q){const ue=new j_(a,d,p,v,N,j);return q&&(ue.vc=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ze.Z)(function*(t){const a=en(t);Ht("RemoteStore","RemoteStore shutting down."),a.vu.add(5),yield cd(a),a.Pu.shutdown(),a.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ky(i,e=10240){let t=0;return{read:()=>(0,ze.Z)(function*(){if(t<i.byteLength){const a={value:i.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,ze.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ag{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ly{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ni,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(a=>{a&&a.Qu()?this.metadata.resolve(a.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(a?.Gu)}`))},a=>this.metadata.reject(a))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ze.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ze.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ze.Z)(function*(){const t=yield e.kc();if(null===t)return null;const a=e.xc.decode(t),d=Number(a);isNaN(d)&&e.Mc(`length string (${a}) is not valid number`);const p=yield e.$c(d);return new vv(JSON.parse(p),t.length+d)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ze.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}$c(e){var t=this;return(0,ze.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const a=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ze.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class Fy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ze.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pt(ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(d=(0,ze.Z)(function*(p,v){const N=en(p),j=Bd(N.serializer)+"/documents",q={documents:v.map(Mt=>Ol(N.serializer,Mt))},ue=yield N.vo("BatchGetDocuments",j,q,v.length),ke=new Map;ue.forEach(Mt=>{const rn=function Fg(i,e){return"found"in e?function(t,a){$n(!!a.found);const d=sl(t,a.found.name),p=Us(a.found.updateTime),v=a.found.createTime?Us(a.found.createTime):Gn.min(),N=new Fs({mapValue:{fields:a.found.fields}});return Ji.newFoundDocument(d,p,v,N)}(i,e):"missing"in e?function(t,a){$n(!!a.missing),$n(!!a.readTime);const d=sl(t,a.missing),p=Us(a.readTime);return Ji.newNoDocument(d,p)}(i,e):Kt()}(N.serializer,Mt);ke.set(rn.key.toString(),rn)});const dt=[];return v.forEach(Mt=>{const rn=ke.get(Mt.toString());$n(!!rn),dt.push(rn)}),dt}),function(p,v){return d.apply(this,arguments)})(t.datastore,e);var d;return a.forEach(d=>t.recordVersion(d)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ld(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ze.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,d)=>{const p=un.fromPath(d);e.mutations.push(new lf(p,e.precondition(p)))}),yield(a=(0,ze.Z)(function*(d,p){const v=en(d),N=Bd(v.serializer)+"/documents",j={writes:p.map(q=>Ur(v.serializer,q))};yield v.Io("Commit",N,j)}),function(d,p){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kt();t=Gn.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new Pt(ft.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gn.min())?fs.exists(!1):fs.updateTime(t):fs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gn.min()))throw new Pt(ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fs.updateTime(t)}return fs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Na{constructor(e,t,a,d,p){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=d,this.deferred=p,this.Bc=a.maxAttempts,this.qo=new cy(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ze.Z)(function*(){const t=new Fy(e.datastore),a=e.qc(t);a&&a.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(p=>{e.Uc(p)}))}).catch(d=>{e.Uc(d)})}))}qc(e){try{const t=this.updateFunction(e);return!Ua(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!at(t)}return!1}}class Em{constructor(e,t,a,d){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=d,this.user=tr.UNAUTHENTICATED,this.clientId=vl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var v=(0,ze.Z)(function*(N){Ht("FirestoreClient","Received user=",N.uid),yield p.authCredentialListener(N),p.user=N});return function(N){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(a,v=>(Ht("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,ze.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pt(ft.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ze.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const d=Ec(a,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function du(i,e){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,ze.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ht("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,ze.Z)(function*(p){a.isEqual(p)||(yield Xg(e.localStore,p),a=p)});return function(p){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),Bf.apply(this,arguments)}function hu(i,e){return fd.apply(this,arguments)}function fd(){return fd=(0,ze.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield wm(i);Ht("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield e.initialize(t,a),i.setCredentialChangeListener(d=>Af(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,p)=>Af(e.remoteStore,p)),i._onlineComponents=e}),fd.apply(this,arguments)}function Vy(i){return"FirebaseError"===i.name?i.code===ft.FAILED_PRECONDITION||i.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function wm(i){return pd.apply(this,arguments)}function pd(){return pd=(0,ze.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ht("FirestoreClient","Using user provided OfflineComponentProvider");try{yield du(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Vy(t))throw t;ks("Error using user provided cache. Falling back to memory cache: "+t),yield du(i,new og)}}else Ht("FirestoreClient","Using default OfflineComponentProvider"),yield du(i,new og);return i._offlineComponents}),pd.apply(this,arguments)}function Uy(i){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ze.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ht("FirestoreClient","Using user provided OnlineComponentProvider"),yield hu(i,i._uninitializedComponentsProvider._online)):(Ht("FirestoreClient","Using default OnlineComponentProvider"),yield hu(i,new Uf))),i._onlineComponents}),Cm.apply(this,arguments)}function By(i){return wm(i).then(e=>e.persistence)}function jf(i){return wm(i).then(e=>e.localStore)}function Iv(i){return Uy(i).then(e=>e.remoteStore)}function Im(i){return Uy(i).then(e=>e.syncEngine)}function ug(i){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,ze.Z)(function*(i){const e=yield Uy(i),t=e.eventManager;return t.onListen=Iy.bind(null,e.syncEngine),t.onUnlisten=dl.bind(null,e.syncEngine),t}),Ic.apply(this,arguments)}function Hy(i,e,t={}){const a=new Ni;return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return function(d,p,v,N,j){const q=new ag({next:ke=>{p.enqueueAndForget(()=>fm(d,ue));const dt=ke.docs.has(v);!dt&&ke.fromCache?j.reject(new Pt(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):dt&&ke.fromCache&&N&&"server"===N.source?j.reject(new Pt(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(ke)},error:ke=>j.reject(ke)}),ue=new Za(Hc(v.path),q,{includeMetadataChanges:!0,Ku:!0});return _y(d,ue)}(yield ug(i),i.asyncQueue,e,t,a)})),a.promise}function Oh(i,e,t={}){const a=new Ni;return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return function(d,p,v,N,j){const q=new ag({next:ke=>{p.enqueueAndForget(()=>fm(d,ue)),ke.fromCache&&"server"===N.source?j.reject(new Pt(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(ke)},error:ke=>j.reject(ke)}),ue=new Za(v,q,{includeMetadataChanges:!0,Ku:!0});return _y(d,ue)}(yield ug(i),i.asyncQueue,e,t,a)})),a.promise}function Dm(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const kh=new Map;function ih(i,e,t){if(!t)throw new Pt(ft.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function sh(i,e,t,a){if(!0===e&&!0===a)throw new Pt(ft.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Lh(i){if(!un.isDocumentKey(i))throw new Pt(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Fh(i){if(un.isDocumentKey(i))throw new Pt(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function gd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Kt()}function qr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Pt(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gd(i);throw new Pt(ft.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Vh(i,e){if(e<=0)throw new Pt(ft.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Uh{constructor(e){var t,a;if(void 0===e.host){if(void 0!==e.ssl)throw new Pt(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pt(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Dm(null!==(a=e.experimentalLongPollingOptions)&&void 0!==a?a:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Pt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Pt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Pt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,a,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pt(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pt(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uh(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ah;switch(t.type){case"firstParty":return new Va(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pt(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kh.get(e);t&&(Ht("ComponentProvider","Removing Datastore"),kh.delete(e),t.terminate())}(this),Promise.resolve()}}class Ss{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ss(this.firestore,e,this._key)}}class sa{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class zl extends sa{constructor(e,t,a){super(e,t,Hc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ss(this.firestore,null,new un(e))}withConverter(e){return new zl(this.firestore,e,this._path)}}function Gy(i,e,...t){if(i=(0,Be.m9)(i),ih("collection","path",e),i instanceof Hf){const a=fr.fromString(e,...t);return Fh(a),new zl(i,null,a)}{if(!(i instanceof Ss||i instanceof zl))throw new Pt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(fr.fromString(e,...t));return Fh(a),new zl(i.firestore,null,a)}}function dg(i,e,...t){if(i=(0,Be.m9)(i),1===arguments.length&&(e=vl.A()),ih("doc","path",e),i instanceof Hf){const a=fr.fromString(e,...t);return Lh(a),new Ss(i,null,new un(a))}{if(!(i instanceof Ss||i instanceof zl))throw new Pt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(fr.fromString(e,...t));return Lh(a),new Ss(i.firestore,i instanceof zl?i.converter:null,new un(a))}}function zy(i,e){return i=(0,Be.m9)(i),e=(0,Be.m9)(e),(i instanceof Ss||i instanceof zl)&&(e instanceof Ss||e instanceof zl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hg(i,e){return i=(0,Be.m9)(i),e=(0,Be.m9)(e),i instanceof sa&&e instanceof sa&&i.firestore===e.firestore&&nl(i._query,e._query)&&i.converter===e.converter}class bv{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new cy(this,"async_queue_retry"),this.Xc=()=>{const t=Fp();t&&Ht("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Fp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Fp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ni;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ze.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ca(t))throw t;Ht("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(a=>{throw this.Wc=a,this.Hc=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(p){let v=p.message||"";return p.stack&&(v=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),v}(a)),a}).then(a=>(this.Hc=!1,a))));return this.Gc=t,t}enqueueAfterDelay(e,t,a){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const d=Mf.createAndSchedule(this,e,t,a,p=>this.na(p));return this.zc.push(d),d}Zc(){this.Wc&&Kt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ze.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function hl(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const d of["next","error","complete"])if(d in a&&"function"==typeof a[d])return!0;return!1}(i)}class nE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ni,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class As extends Hf{constructor(e,t,a,d){super(e,t,a,d),this.type="firestore",this._queue=new bv,this._persistenceKey=d?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Z_(this),this._firestoreClient.terminate()}}function No(i){return i._firestoreClient||Z_(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Z_(i){var e,t,a;const d=i._freezeSettings(),p=(N=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new no(i._databaseId,N,i._persistenceKey,(q=d).host,q.ssl,q.experimentalForceLongPolling,q.experimentalAutoDetectLongPolling,Dm(q.experimentalLongPollingOptions),q.useFetchStreams));var N,q;i._firestoreClient=new Em(i._authCredentials,i._appCheckCredentials,i._queue,p),null!==(t=d.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(a=d.cache)&&void 0!==a&&a._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:d.cache.kind,_offline:d.cache._offlineComponentProvider,_online:d.cache._onlineComponentProvider})}function fg(i,e,t){const a=new Ni;return i.asyncQueue.enqueue((0,ze.Z)(function*(){try{yield du(i,t),yield hu(i,e),a.resolve()}catch(d){const p=d;if(!Vy(p))throw p;ks("Error enabling indexeddb cache. Falling back to memory cache: "+p),a.reject(p)}})).then(()=>a.promise)}function $f(i){if(i._initialized||i._terminated)throw new Pt(ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(nt.fromBase64String(e))}catch(t){throw new Pt(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class md{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pt(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yd{constructor(e){this._methodName=e}}class Gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pt(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pt(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ir(this._lat,e._lat)||ir(this._long,e._long)}}const rE=/^__.*__$/;class Rv{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kc(e,this.data,t,this.fieldTransforms)}}class X_{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kt()}}class Sm{constructor(e,t,a,d,p,v){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=d,void 0===p&&this.ua(),this.fieldTransforms=p||[],this.fieldMask=v||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Sm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.aa({path:a,la:!1});return d.fa(e),d}da(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.aa({path:a,la:!1});return d.ua(),d}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Eg(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(mg(this.ca)&&rE.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class J_{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Df(e)}ya(e,t,a,d=!1){return new Sm({ca:e,methodName:t,ga:a,path:Rr.emptyPath(),la:!1,ma:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bh(i){const e=i._freezeSettings(),t=Df(i._databaseId);return new J_(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Am(i,e,t,a,d,p={}){const v=i.ya(p.merge||p.mergeFields?2:0,e,t,d);qf("Data must be an object, but it was:",v,a);const N=zf(a,v);let j,q;if(p.merge)j=new Y(v.fieldMask),q=v.fieldTransforms;else if(p.mergeFields){const ue=[];for(const ke of p.mergeFields){const dt=Hh(e,ke,t);if(!v.contains(dt))throw new Pt(ft.INVALID_ARGUMENT,`Field '${dt}' is specified in your field mask but missing from your input data.`);Pm(ue,dt)||ue.push(dt)}j=new Y(ue),q=v.fieldTransforms.filter(ke=>j.covers(ke.field))}else j=null,q=v.fieldTransforms;return new Rv(new Fs(N),j,q)}class ku extends yd{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ku}}function $o(i,e,t){return new Sm({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Pa extends yd{_toFieldTransform(e){return new Ml(e.path,new dc)}isEqual(e){return e instanceof Pa}}class yg extends yd{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=$o(this,e,!0),a=this.pa.map(p=>jh(p,t)),d=new Sl(a);return new Ml(e.path,d)}isEqual(e){return this===e}}class Nv extends yd{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=$o(this,e,!0),a=this.pa.map(p=>jh(p,t)),d=new qc(a);return new Ml(e.path,d)}isEqual(e){return this===e}}class Pv extends yd{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Al(e.serializer,zc(e.serializer,this.Ia));return new Ml(e.path,t)}isEqual(e){return this===e}}function Mm(i,e,t,a){const d=i.ya(1,e,t);qf("Data must be an object, but it was:",d,a);const p=[],v=Fs.empty();Da(a,(j,q)=>{const ue=Nm(e,j,t);q=(0,Be.m9)(q);const ke=d.da(ue);if(q instanceof ku)p.push(ue);else{const dt=jh(q,ke);null!=dt&&(p.push(ue),v.set(ue,dt))}});const N=new Y(p);return new X_(v,N,d.fieldTransforms)}function _g(i,e,t,a,d,p){const v=i.ya(1,e,t),N=[Hh(e,a,t)],j=[d];if(p.length%2!=0)throw new Pt(ft.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let dt=0;dt<p.length;dt+=2)N.push(Hh(e,p[dt])),j.push(p[dt+1]);const q=[],ue=Fs.empty();for(let dt=N.length-1;dt>=0;--dt)if(!Pm(q,N[dt])){const Mt=N[dt];let rn=j[dt];rn=(0,Be.m9)(rn);const bn=v.da(Mt);if(rn instanceof ku)q.push(Mt);else{const Rn=jh(rn,bn);null!=Rn&&(q.push(Mt),ue.set(Mt,Rn))}}const ke=new Y(q);return new X_(ue,ke,v.fieldTransforms)}function Rm(i,e,t,a=!1){return jh(t,i.ya(a?4:3,e))}function jh(i,e){if(Wf(i=(0,Be.m9)(i)))return qf("Unsupported field value:",e,i),zf(i,e);if(i instanceof yd)return function(t,a){if(!mg(a.ca))throw a._a(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a._a(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(a);d&&a.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,a){const d=[];let p=0;for(const v of t){let N=jh(v,a.wa(p));null==N&&(N={nullValue:"NULL_VALUE"}),d.push(N),p++}return{arrayValue:{values:d}}}(i,e)}return function(t,a){if(null===(t=(0,Be.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zc(a.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Pi.fromDate(t);return{timestampValue:Vd(a.serializer,d)}}if(t instanceof Pi){const d=new Pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vd(a.serializer,d)}}if(t instanceof Gf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bc)return{bytesValue:lu(a.serializer,t._byteString)};if(t instanceof Ss){const d=a.databaseId,p=t.firestore._databaseId;if(!p.isEqual(d))throw a._a(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:dp(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a._a(`Unsupported field value: ${gd(t)}`)}(i,e)}function zf(i,e){const t={};return nc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(i,(a,d)=>{const p=jh(d,e.ha(a));null!=p&&(t[a]=p)}),{mapValue:{fields:t}}}function Wf(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Pi||i instanceof Gf||i instanceof bc||i instanceof Ss||i instanceof yd)}function qf(i,e,t){if(!Wf(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=gd(t);throw e._a("an object"===a?i+" a custom object":i+" "+a)}var a}function Hh(i,e,t){if((e=(0,Be.m9)(e))instanceof md)return e._internalPath;if("string"==typeof e)return Nm(i,e);throw Eg("Field path arguments must be of type string or ",i,!1,void 0,t)}const vg=new RegExp("[~\\*/\\[\\]]");function Nm(i,e,t){if(e.search(vg)>=0)throw Eg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new md(...e.split("."))._internalPath}catch{throw Eg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Eg(i,e,t,a,d){const p=a&&!a.isEmpty(),v=void 0!==d;let N=`Function ${e}() called with invalid data`;t&&(N+=" (via `toFirestore()`)"),N+=". ";let j="";return(p||v)&&(j+=" (found",p&&(j+=` in field ${a}`),v&&(j+=` in document ${d}`),j+=")"),new Pt(ft.INVALID_ARGUMENT,N+i+j)}function Pm(i,e){return i.some(t=>t.isEqual(e))}class $h{constructor(e,t,a,d,p){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=d,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new Ss(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yy extends $h{data(){return super.data()}}function Kf(i,e){return"string"==typeof e?Nm(i,e):e instanceof md?e._internalPath:e._delegate._internalPath}function Qy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Pt(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class Zf extends Xy{}function Dc(i,e,...t){let a=[];e instanceof Xy&&a.push(e),a=a.concat(t),function(d){const p=d.filter(N=>N instanceof zh).length,v=d.filter(N=>N instanceof Gh).length;if(p>1||p>0&&v>0)throw new Pt(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const d of a)i=d._apply(i);return i}class Gh extends Zf{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Gh(e,t,a)}_apply(e){const t=this._parse(e);return i_(e._query,t),new sa(e.firestore,e.converter,Nd(e._query,t))}_parse(e){const t=Bh(e.firestore);return function(d,p,v,N,j,q,ue){let ke;if(j.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new Pt(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){r_(ue,q);const dt=[];for(const Mt of ue)dt.push(n_(N,d,Mt));ke={arrayValue:{values:dt}}}else ke=n_(N,d,ue)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||r_(ue,q),ke=Rm(v,"where",ue,"in"===q||"not-in"===q);return ei.create(j,q,ke)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class zh extends Xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zh(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return 1===t.length?t[0]:Si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,d){let p=a;const v=d.getFlattenedFilters();for(const N of v)i_(p,N),p=Nd(p,N)}(e._query,t),new sa(e.firestore,e.converter,Nd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xm extends Zf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xm(e,t)}_apply(e){const t=function(a,d,p){if(null!==a.startAt)throw new Pt(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Pt(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Td(d,p);return function(N,j){if(null===go(N)){const q=Rd(N);null!==q&&l(0,q,j.field)}}(a,v),v}(e._query,this._field,this._direction);return new sa(e.firestore,e.converter,function(a,d){const p=a.explicitOrderBy.concat([d]);return new uc(a.path,a.collectionGroup,p,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class wg extends Zf{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new wg(e,t,a)}_apply(e){return new sa(e.firestore,e.converter,$c(e._query,this._limit,this._limitType))}}class Om extends Zf{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new Om(e,t,a)}_apply(e){const t=t_(e,this.type,this._docOrFields,this._inclusive);return new sa(e.firestore,e.converter,(d=t,new uc((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,d,a.endAt)));var a,d}}class Cg extends Zf{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new Cg(e,t,a)}_apply(e){const t=t_(e,this.type,this._docOrFields,this._inclusive);return new sa(e.firestore,e.converter,(d=t,new uc((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,d)));var a,d}}function t_(i,e,t,a){if(t[0]=(0,Be.m9)(t[0]),t[0]instanceof $h)return function(d,p,v,N,j){if(!N)throw new Pt(ft.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const q=[];for(const ue of tl(d))if(ue.field.isKeyField())q.push(Ys(p,N.key));else{const ke=N.data.field(ue.field);if(_r(ke))throw new Pt(ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ke){const dt=ue.field.canonicalString();throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${dt}' (used as the orderBy) does not exist.`)}q.push(ke)}return new Ju(q,j)}(i._query,i.firestore._databaseId,e,t[0]._document,a);{const d=Bh(i.firestore);return function(p,v,N,j,q,ue){const ke=p.explicitOrderBy;if(q.length>ke.length)throw new Pt(ft.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const dt=[];for(let Mt=0;Mt<q.length;Mt++){const rn=q[Mt];if(ke[Mt].field.isKeyField()){if("string"!=typeof rn)throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof rn}`);if(!lc(p)&&-1!==rn.indexOf("/"))throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${rn}' contains a slash.`);const bn=p.path.child(fr.fromString(rn));if(!un.isDocumentKey(bn))throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${bn}' is not because it contains an odd number of segments.`);const Rn=new un(bn);dt.push(Ys(v,Rn))}else{const bn=Rm(N,j,rn);dt.push(bn)}}return new Ju(dt,ue)}(i._query,i.firestore._databaseId,d,e,t,a)}}function n_(i,e,t){if("string"==typeof(t=(0,Be.m9)(t))){if(""===t)throw new Pt(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lc(e)&&-1!==t.indexOf("/"))throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(fr.fromString(t));if(!un.isDocumentKey(a))throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Ys(i,new un(a))}if(t instanceof Ss)return Ys(i,t._key);throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(t)}.`)}function r_(i,e){if(!Array.isArray(i)||0===i.length)throw new Pt(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function i_(i,e){if(e.isInequality()){const a=Rd(i),d=e.field;if(null!==a&&!a.isEqual(d))throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${a.toString()}' and '${d.toString()}'`);const p=go(i);null!==p&&l(0,d,p)}const t=function(a,d){for(const p of a)for(const v of p.getFlattenedFilters())if(d.indexOf(v.op)>=0)return v.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pt(ft.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function l(i,e,t){if(!t.isEqual(e))throw new Pt(ft.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class o{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Da(e,(d,p)=>{a[d]=this.convertValue(p,t)}),a}convertGeoPoint(e){return new Gf(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Kn(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Jr(e));default:return null}}convertTimestamp(e){const t=mn(e);return new Pi(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=fr.fromString(e);$n(__(a));const d=new Ro(a.get(1),a.get(3)),p=new un(a.popFirst(5));return d.isEqual(t)||Xr(`Document ${p} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function c(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}class g extends o{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ss(this.firestore,null,t)}}class Ae{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ue extends $h{constructor(e,t,a,d,p,v){super(e,t,a,d,v),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new st(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Kf("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class st extends Ue{data(e={}){return super.data(e)}}class wt{constructor(e,t,a,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Ae(d.hasPendingWrites,d.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new st(this._firestore,this._userDataWriter,a.key,a,new Ae(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pt(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,d){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map(v=>({type:"added",doc:new st(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Ae(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:p++}))}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(v=>d||3!==v.type).map(v=>{const N=new st(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Ae(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let j=-1,q=-1;return 0!==v.type&&(j=p.indexOf(v.doc.key),p=p.delete(v.doc.key)),1!==v.type&&(p=p.add(v.doc),q=p.indexOf(v.doc.key)),{type:At(v.type),doc:N,oldIndex:j,newIndex:q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function At(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kt()}}function on(i,e){return i instanceof Ue&&e instanceof Ue?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof wt&&e instanceof wt&&i._firestore===e._firestore&&hg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class br extends o{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ss(this.firestore,null,t)}}function vo(i,e,t){i=qr(i,Ss);const a=qr(i.firestore,As),d=c(i.converter,e,t);return Vu(a,[Am(Bh(a),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,fs.none())])}function Eo(i,e,t,...a){i=qr(i,Ss);const d=qr(i.firestore,As),p=Bh(d);let v;return v="string"==typeof(e=(0,Be.m9)(e))||e instanceof md?_g(p,"updateDoc",i._key,e,t,a):Mm(p,"updateDoc",i._key,e),Vu(d,[v.toMutation(i._key,fs.exists(!0))])}function Lm(i,...e){var t,a,d;i=(0,Be.m9)(i);let p={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||hl(e[v])||(p=e[v],v++);const N={includeMetadataChanges:p.includeMetadataChanges};if(hl(e[v])){const ke=e[v];e[v]=null===(t=ke.next)||void 0===t?void 0:t.bind(ke),e[v+1]=null===(a=ke.error)||void 0===a?void 0:a.bind(ke),e[v+2]=null===(d=ke.complete)||void 0===d?void 0:d.bind(ke)}let j,q,ue;if(i instanceof Ss)q=qr(i.firestore,As),ue=Hc(i._key.path),j={next:ke=>{e[v]&&e[v](s_(q,i,ke))},error:e[v+1],complete:e[v+2]};else{const ke=qr(i,sa);q=qr(ke.firestore,As),ue=ke._query;const dt=new br(q);j={next:Mt=>{e[v]&&e[v](new wt(q,dt,ke,Mt))},error:e[v+1],complete:e[v+2]},Qy(i._query)}return function(ke,dt,Mt,rn){const bn=new ag(rn),Rn=new Za(dt,bn,Mt);return ke.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return _y(yield ug(ke),Rn)})),()=>{bn.Dc(),ke.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return fm(yield ug(ke),Rn)}))}}(No(q),ue,N,j)}function Vu(i,e){return function(t,a){const d=new Ni;return t.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return function Ev(i,e,t){return Ya.apply(this,arguments)}(yield Im(t),a,d)})),d.promise}(No(i),e)}function s_(i,e,t){const a=t.docs.get(e._key),d=new br(i);return new Ue(i,d,e._key,a,new Ae(t.hasPendingWrites,t.fromCache),e.converter)}const pu={maxAttempts:5};class vd{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bh(e)}set(e,t,a){this._verifyNotCommitted();const d=Tc(e,this._firestore),p=c(d.converter,t,a),v=Am(this._dataReader,"WriteBatch.set",d._key,p,null!==d.converter,a);return this._mutations.push(v.toMutation(d._key,fs.none())),this}update(e,t,a,...d){this._verifyNotCommitted();const p=Tc(e,this._firestore);let v;return v="string"==typeof(t=(0,Be.m9)(t))||t instanceof md?_g(this._dataReader,"WriteBatch.update",p._key,t,a,d):Mm(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(v.toMutation(p._key,fs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tc(e,this._firestore);return this._mutations=this._mutations.concat(new Ld(t._key,fs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pt(ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tc(i,e){if((i=(0,Be.m9)(i)).firestore!==e)throw new Pt(ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class iE extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bh(e)}get(e){const t=Tc(e,this._firestore),a=new g(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return Kt();const p=d[0];if(p.isFoundDocument())return new $h(this._firestore,a,p.key,p,t.converter);if(p.isNoDocument())return new $h(this._firestore,a,t._key,null,t.converter);throw Kt()})}set(e,t,a){const d=Tc(e,this._firestore),p=c(d.converter,t,a),v=Am(this._dataReader,"Transaction.set",d._key,p,null!==d.converter,a);return this._transaction.set(d._key,v),this}update(e,t,a,...d){const p=Tc(e,this._firestore);let v;return v="string"==typeof(t=(0,Be.m9)(t))||t instanceof md?_g(this._dataReader,"Transaction.update",p._key,t,a,d):Mm(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,v),this}delete(e){const t=Tc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Tc(e,this._firestore),a=new br(this._firestore);return super.get(e).then(d=>new Ue(this._firestore,a,t._key,d._document,new Ae(!1,!1),t.converter))}}function o_(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function a_(){if(typeof Uint8Array>"u")throw new Pt("unimplemented","Uint8Arrays are not available in this environment.")}function ov(){if(!function qe(){return typeof atob<"u"}())throw new Pt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Iu=Lt.SDK_VERSION,(0,Lt._registerComponent)(new _e.wA("firestore",(t,{instanceIdentifier:a,options:d})=>{const p=t.getProvider("app").getImmediate(),v=new As(new uh(t.getProvider("auth-internal")),new bu(t.getProvider("app-check-internal")),function(N,j){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new Pt(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(N.options.projectId,j)}(p,a),p);return d=Object.assign({useFetchStreams:e},d),v._setSettings(d),v},"PUBLIC").setMultipleInstances(!0)),(0,Lt.registerVersion)(Bt,"3.13.0",i),(0,Lt.registerVersion)(Bt,"3.13.0","esm2017")}();class Fm{constructor(e){this._delegate=e}static fromBase64String(e){return ov(),new Fm(bc.fromBase64String(e))}static fromUint8Array(e){return a_(),new Fm(bc.fromUint8Array(e))}toBase64(){return ov(),this._delegate.toBase64()}toUint8Array(){return a_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function av(i){return function aE(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(i,["next","error","complete"])}class uE{enableIndexedDbPersistence(e,t){return function Tv(i,e){$f(i=qr(i,As));const t=No(i);if(t._uninitializedComponentsProvider)throw new Pt(ft.FAILED_PRECONDITION,"SDK cache is already specified.");ks("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const a=i._freezeSettings(),d=new Uf;return fg(t,d,new xy(d,a.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Sv(i){$f(i=qr(i,As));const e=No(i);if(e._uninitializedComponentsProvider)throw new Pt(ft.FAILED_PRECONDITION,"SDK cache is already specified.");ks("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),a=new Uf;return fg(e,a,new Oy(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function pg(i){if(i._initialized&&!i._terminated)throw new Pt(ft.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ni;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ze.Z)(function*(){try{yield(t=(0,ze.Z)(function*(a){if(!_n.D())return Promise.resolve();const d=a+"main";yield _n.delete(d)}),function(a){return t.apply(this,arguments)})(D_(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Uv{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ro||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ks("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function $y(i,e,t,a={}){var d;const p=(i=qr(i,Hf))._getSettings(),v=`${e}:${t}`;if("firestore.googleapis.com"!==p.host&&p.host!==v&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},p),{host:v,ssl:!1})),a.mockUserToken){let N,j;if("string"==typeof a.mockUserToken)N=a.mockUserToken,j=tr.MOCK_USER;else{N=(0,Be.Sg)(a.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const q=a.mockUserToken.sub||a.mockUserToken.user_id;if(!q)throw new Pt(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");j=new tr(q)}i._authCredentials=new qu(new co(N,j))}}(this._delegate,e,t,a)}enableNetwork(){return function Ky(i){return function bm(i){return i.asyncQueue.enqueue((0,ze.Z)(function*(){const e=yield By(i),t=yield Iv(i);return e.setNetworkEnabled(!0),function(a){const d=en(a);return d.vu.delete(0),Ru(d)}(t)}))}(No(i=qr(i,As)))}(this._delegate)}disableNetwork(){return function Zy(i){return function lg(i){return i.asyncQueue.enqueue((0,ze.Z)(function*(){const e=yield By(i),t=yield Iv(i);return e.setNetworkEnabled(!1),(a=(0,ze.Z)(function*(d){const p=en(d);p.vu.add(0),yield cd(p),p.bu.set("Offline")}),function(d){return a.apply(this,arguments)})(t);var a}))}(No(i=qr(i,As)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,sh("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function qy(i){return function(e){const t=new Ni;return e.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return function Of(i,e){return Xp.apply(this,arguments)}(yield Im(e),t)})),t.promise}(No(i=qr(i,As)))}(this._delegate)}onSnapshotsInSync(e){return function Ig(i,e){return function ya(i,e){const t=new ag(e);return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return a=yield ug(i),d=t,en(a).ku.add(d),void d.next();var a,d})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return a=yield ug(i),d=t,void en(a).ku.delete(d);var a,d}))}}(No(i=qr(i,As)),hl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vm(this,Gy(this._delegate,e))}catch(t){throw Uu(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sc(this,dg(this._delegate,e))}catch(t){throw Uu(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bu(this,function K_(i,e){if(i=qr(i,Hf),ih("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pt(ft.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new sa(i,null,(t=e,new uc(fr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Uu(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function kE(i,e,t){i=qr(i,As);const a=Object.assign(Object.assign({},pu),t);return function(d){if(d.maxAttempts<1)throw new Pt(ft.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(d,p,v){const N=new Ni;return d.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){const j=yield function jy(i){return Uy(i).then(e=>e.datastore)}(d);new Na(d.asyncQueue,j,v,p,N).run()})),N.promise}(No(i),d=>e(new iE(i,d)),a)}(this._delegate,t=>e(new cE(this,t)))}batch(){return No(this._delegate),new dE(new vd(this._delegate,e=>Vu(this._delegate,e)))}loadBundle(e){return function Y_(i,e){const t=No(i=qr(i,As)),a=new nE;return function rh(i,e,t,a){const d=function(p,v){let N;return N="string"==typeof p?On().encode(p):p,j=function(j,q){if(j instanceof Uint8Array)return ky(j,q);if(j instanceof ArrayBuffer)return ky(new Uint8Array(j),q);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new Ly(j,v);var j}(t,Df(e));i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){!function sg(i,e,t){const a=en(i);var d;(d=(0,ze.Z)(function*(p,v,N){try{const j=yield v.getMetadata();if(yield function(dt,Mt){const rn=en(dt),bn=Us(Mt.createTime);return rn.persistence.runTransaction("hasNewerBundle","readonly",Rn=>rn.qs.getBundleMetadata(Rn,Mt.id)).then(Rn=>!!Rn&&Rn.createTime.compareTo(bn)>=0)}(p.localStore,j))return yield v.close(),N._completeWith({taskState:"Success",documentsLoaded:(dt=j).totalDocuments,bytesLoaded:dt.totalBytes,totalDocuments:dt.totalDocuments,totalBytes:dt.totalBytes}),Promise.resolve(new Set);N._updateProgress(Kp(j));const q=new wy(j,p.localStore,v.serializer);let ue=yield v.bc();for(;ue;){const dt=yield q.zu(ue);dt&&N._updateProgress(dt),ue=yield v.bc()}const ke=yield q.complete();return yield hd(p,ke.Ju,void 0),yield function(dt,Mt){const rn=en(dt);return rn.persistence.runTransaction("Save bundle","readwrite",bn=>rn.qs.saveBundleMetadata(bn,Mt))}(p.localStore,j),N._completeWith(ke.progress),Promise.resolve(ke.Hu)}catch(j){return ks("SyncEngine",`Loading bundle failed with ${j}`),N._failWith(j),Promise.resolve(new Set)}var dt}),function(p,v,N){return d.apply(this,arguments)})(a,e,t).then(d=>{a.sharedClientState.notifyBundleLoaded(d)})}(yield Im(i),d,a)}))}(t,i._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function Av(i,e){return function fu(i,e){return i.asyncQueue.enqueue((0,ze.Z)(function*(){return function(t,a){const d=en(t);return d.persistence.runTransaction("Get named query","readonly",p=>d.qs.getNamedQuery(p,a))}(yield jf(i),e)}))}(No(i=qr(i,As)),e).then(t=>t?new sa(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Bu(this,t):null)}}class u_ extends o{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fm(new bc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sc.forKey(t,this.firestore,null)}}class cE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new u_(e)}get(e){const t=Dg(e);return this._delegate.get(t).then(a=>new l_(this._firestore,new Ue(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const d=Dg(e);return a?(o_("Transaction.set",a),this._delegate.set(d,t,a)):this._delegate.set(d,t),this}update(e,t,a,...d){const p=Dg(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,a,...d),this}delete(e){const t=Dg(e);return this._delegate.delete(t),this}}class dE{constructor(e){this._delegate=e}set(e,t,a){const d=Dg(e);return a?(o_("WriteBatch.set",a),this._delegate.set(d,t,a)):this._delegate.set(d,t),this}update(e,t,a,...d){const p=Dg(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,a,...d),this}delete(e){const t=Dg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bg{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new st(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new c_(this._firestore,a),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=bg.INSTANCES;let d=a.get(e);d||(d=new WeakMap,a.set(e,d));let p=d.get(t);return p||(p=new bg(e,new u_(e),t),d.set(t,p)),p}}bg.INSTANCES=new WeakMap;class Sc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new u_(e)}static forPath(e,t,a){if(e.length%2!=0)throw new Pt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sc(t,new Ss(t._delegate,a,new un(e)))}static forKey(e,t,a){return new Sc(t,new Ss(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new Vm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vm(this.firestore,Gy(this._delegate,e))}catch(t){throw Uu(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Be.m9)(e))instanceof Ss&&zy(this._delegate,e)}set(e,t){t=o_("DocumentReference.set",t);try{return t?vo(this._delegate,e,t):vo(this._delegate,e)}catch(a){throw Uu(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?Eo(this._delegate,e):Eo(this._delegate,e,t,...a)}catch(d){throw Uu(d,"updateDoc()","DocumentReference.update()")}}delete(){return function Fu(i){return Vu(qr(i.firestore,As),[new Ld(i._key,fs.none())])}(this._delegate)}onSnapshot(...e){const t=hE(e),a=fE(e,d=>new l_(this.firestore,new Ue(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Lm(this._delegate,t,a)}get(e){let t;return t="cache"===e?.source?function si(i){i=qr(i,Ss);const e=qr(i.firestore,As),t=No(e),a=new br(e);return function cg(i,e){const t=new Ni;return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return(a=(0,ze.Z)(function*(d,p,v){try{const N=yield function(j,q){const ue=en(j);return ue.persistence.runTransaction("read document","readonly",ke=>ue.localDocuments.getDocument(ke,q))}(d,p);N.isFoundDocument()?v.resolve(N):N.isNoDocument()?v.resolve(null):v.reject(new Pt(ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const j=Ec(N,`Failed to get document '${p} from cache`);v.reject(j)}}),function(d,p,v){return a.apply(this,arguments)})(yield jf(i),e,t);var a})),t.promise}(t,i._key).then(d=>new Ue(e,a,i._key,d,new Ae(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function ti(i){i=qr(i,Ss);const e=qr(i.firestore,As);return Hy(No(e),i._key,{source:"server"}).then(t=>s_(e,i,t))}(this._delegate):function yn(i){i=qr(i,Ss);const e=qr(i.firestore,As);return Hy(No(e),i._key).then(t=>s_(e,i,t))}(this._delegate),t.then(a=>new l_(this.firestore,new Ue(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new Sc(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}function Uu(i,e,t){return i.message=i.message.replace(e,t),i}function hE(i){for(const e of i)if("object"==typeof e&&!av(e))return e;return{}}function fE(i,e){var t,a;let d;return d=av(i[0])?i[0]:av(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{d.next&&d.next(e(p))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(a=d.complete)||void 0===a?void 0:a.bind(d)}}class l_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return on(this._delegate,e._delegate)}}class c_ extends l_{data(e){const t=this._delegate.data(e);return function Rc(i,e){i||Kt()}(void 0!==t),t}}class Bu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new u_(e)}where(e,t,a){try{return new Bu(this.firestore,Dc(this._delegate,function Jy(i,e,t){const a=e,d=Kf("where",i);return Gh._create(d,a,t)}(e,t,a)))}catch(d){throw Uu(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Bu(this.firestore,Dc(this._delegate,function ev(i,e="asc"){const t=e,a=Kf("orderBy",i);return xm._create(a,t)}(e,t)))}catch(a){throw Uu(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Bu(this.firestore,Dc(this._delegate,function kv(i){return Vh("limit",i),wg._create("limit",i,"F")}(e)))}catch(t){throw Uu(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Bu(this.firestore,Dc(this._delegate,function tv(i){return Vh("limitToLast",i),wg._create("limitToLast",i,"L")}(e)))}catch(t){throw Uu(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Bu(this.firestore,Dc(this._delegate,function e_(...i){return Om._create("startAt",i,!0)}(...e)))}catch(t){throw Uu(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Bu(this.firestore,Dc(this._delegate,function km(...i){return Om._create("startAfter",i,!1)}(...e)))}catch(t){throw Uu(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Bu(this.firestore,Dc(this._delegate,function Lv(...i){return Cg._create("endBefore",i,!1)}(...e)))}catch(t){throw Uu(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Bu(this.firestore,Dc(this._delegate,function nv(...i){return Cg._create("endAt",i,!0)}(...e)))}catch(t){throw Uu(t,"endAt()","Query.endAt()")}}isEqual(e){return hg(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Lu(i){i=qr(i,sa);const e=qr(i.firestore,As),t=No(e),a=new br(e);return function Gl(i,e){const t=new Ni;return i.asyncQueue.enqueueAndForget((0,ze.Z)(function*(){return(a=(0,ze.Z)(function*(d,p,v){try{const N=yield Ah(d,p,!0),j=new $l(p,N.ir),q=j.sc(N.documents),ue=j.applyChanges(q,!1);v.resolve(ue.snapshot)}catch(N){const j=Ec(N,`Failed to execute query '${p} against cache`);v.reject(j)}}),function(d,p,v){return a.apply(this,arguments)})(yield jf(i),e,t);var a})),t.promise}(t,i._query).then(d=>new wt(e,a,i,d))}(this._delegate):"server"===e?.source?function oa(i){i=qr(i,sa);const e=qr(i.firestore,As),t=No(e),a=new br(e);return Oh(t,i._query,{source:"server"}).then(d=>new wt(e,a,i,d))}(this._delegate):function oi(i){i=qr(i,sa);const e=qr(i.firestore,As),t=No(e),a=new br(e);return Qy(i._query),Oh(t,i._query).then(d=>new wt(e,a,i,d))}(this._delegate),t.then(a=>new Bv(this.firestore,new wt(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=hE(e),a=fE(e,d=>new Bv(this.firestore,new wt(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Lm(this._delegate,t,a)}withConverter(e){return new Bu(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}class HE{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new c_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Bv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new c_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new HE(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new c_(this._firestore,a))})}isEqual(e){return on(this._delegate,e._delegate)}}class Vm extends Bu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sc(this.firestore,e):null}doc(e){try{return new Sc(this.firestore,void 0===e?dg(this._delegate):dg(this._delegate,e))}catch(t){throw Uu(t,"doc()","CollectionReference.doc()")}}add(e){return function _d(i,e){const t=qr(i.firestore,As),a=dg(i),d=c(i.converter,e);return Vu(t,[Am(Bh(i.firestore),"addDoc",a._key,d,null!==i.converter,{}).toMutation(a._key,fs.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new Sc(this.firestore,t))}isEqual(e){return zy(this._delegate,e._delegate)}withConverter(e){return new Vm(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}function Dg(i){return qr(i,Ss)}class jv{constructor(...e){this._delegate=new md(...e)}static documentId(){return new jv(Rr.keyField().canonicalString())}isEqual(e){return(e=(0,Be.m9)(e))instanceof md&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sE(){return new Pa("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tg(e)}static delete(){const e=function LE(){return new ku("deleteField")}();return e._methodName="FieldValue.delete",new Tg(e)}static arrayUnion(...e){const t=function oE(...i){return new yg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Tg(t)}static arrayRemove(...e){const t=function sv(...i){return new Nv("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Tg(t)}static increment(e){const t=function FE(i){return new Pv("increment",i)}(e);return t._methodName="FieldValue.increment",new Tg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $E={Firestore:Uv,GeoPoint:Gf,Timestamp:Pi,Blob:Fm,Transaction:cE,WriteBatch:dE,DocumentReference:Sc,DocumentSnapshot:l_,Query:Bu,QueryDocumentSnapshot:c_,QuerySnapshot:Bv,CollectionReference:Vm,FieldPath:jv,FieldValue:Tg,setLogLevel:function lE(i){!function _s(i){Bo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function pE(i){(function GE(i,e){i.INTERNAL.registerComponent(new _e.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(a,d)},"PUBLIC").setServiceProps(Object.assign({},$E)))})(i,(e,t)=>new Uv(e,t,new uE)),i.registerVersion("@firebase/firestore-compat","0.3.12")}(xt.Z);var Wh=U(7046),gE=U(8697),mE=U(7142);function Hv(i,e){return function yE(i,e=ne.z){return new S.y(t=>{let a;return null!=e?e.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},t)}):a=i.onSnapshot({includeMetadataChanges:!0},t),()=>{a?.()}})}(i,e)}function uv(i,e){return Hv(i,e).pipe((0,ye.U)(t=>({payload:t,type:"query"})))}function d_(i,e){return uv(i,e).pipe((0,Ve.O)(void 0),pe(),(0,ye.U)(([t,a])=>{const d=a.payload.docChanges(),p=d.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((v,N)=>{const j=d.find(ue=>ue.doc.ref.isEqual(v.ref)),q=t?.payload.docs.find(ue=>ue.ref.isEqual(v.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(v.metadata)||!j&&q&&JSON.stringify(q.metadata)===JSON.stringify(v.metadata)||p.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:v}})}),p}))}function $v(i,e,t){return d_(i,t).pipe((0,Re.R)((a,d)=>function vE(i,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(i=function zE(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return qh(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qh(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qh(i,e.oldIndex,1)}return i}(i,a))}),i}(a,d.map(p=>p.payload),e),[]),(0,It.x)(),(0,ye.U)(a=>a.map(d=>({type:d.type,payload:d}))))}function qh(i,e,t,...a){const d=i.slice();return d.splice(e,t,...a),d}function EE(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Sg{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=d_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ye.U)(a=>a.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,Ve.O)(void 0),pe(),(0,yt.h)(([a,d])=>d.length>0||!a),(0,ye.U)(([a,d])=>d),Ge.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Re.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=EE(e);return $v(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ge.iC)}valueChanges(e={}){return uv(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Ge.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(Ge.iC)}add(e){return this.ref.add(e)}doc(e){return new WE(this.ref.doc(e),this.afs)}}class WE{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:d,query:p}=Ag(a,t);return new Sg(d,p,this.afs)}snapshotChanges(){return function _E(i,e){return Hv(i,e).pipe((0,Ve.O)(void 0),pe(),(0,ye.U)(([t,a])=>a.exists?t?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ge.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ye.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fe.D)(this.ref.get(e)).pipe(Ge.iC)}}class Gv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?d_(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,yt.h)(t=>t.length>0),Ge.iC):d_(this.query,this.afs.schedulers.outsideAngular).pipe(Ge.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Re.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=EE(e);return $v(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ge.iC)}valueChanges(e={}){return uv(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(a=>a.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),Ge.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(Ge.iC)}}const qE=new w.OlP("angularfire2.enableFirestorePersistence"),zv=new w.OlP("angularfire2.firestore.persistenceSettings"),wE=new w.OlP("angularfire2.firestore.settings"),xw=new w.OlP("angularfire2.firestore.use-emulator");function Ag(i,e=(t=>t)){return{query:e(i),ref:i}}let CE=(()=>{class i{constructor(t,a,d,p,v,N,j,q,ue,ke,dt,Mt,rn,bn,Rn,Pr,Ui){this.schedulers=j;const Gr=(0,$t.on)(t,N,a),wo=ue;ke&&(0,Wh.nw)(Gr,N,dt,rn,bn,Rn,Mt,Pr),[this.firestore,this.persistenceEnabled$]=(0,$t.cc)(`${Gr.name}.firestore`,"AngularFirestore",Gr.name,()=>{const Es=N.runOutsideAngular(()=>Gr.firestore());if(p&&Es.settings(p),wo&&Es.useEmulator(...wo),d&&!(0,Tt.PM)(v)){const Ms=()=>{try{return(0,fe.D)(Es.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(Xa){return typeof console<"u"&&console.warn(Xa),(0,Pe.of)(!1)}};return[Es,N.runOutsideAngular(Ms)]}return[Es,(0,Pe.of)(!1)]},[p,wo,d])}collection(t,a){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:v}=Ag(d,a),N=this.schedulers.ngZone.run(()=>p);return new Sg(N,v,this)}collectionGroup(t,a){const d=a||(v=>v),p=this.firestore.collectionGroup(t);return new Gv(d(p),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>a);return new WE(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(w.LFG($t.Dh),w.LFG($t.xv,8),w.LFG(qE,8),w.LFG(wE,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Ge.HU),w.LFG(zv,8),w.LFG(xw,8),w.LFG(Wh.zQ,8),w.LFG(Wh.Qv,8),w.LFG(Wh.L6,8),w.LFG(Wh._Q,8),w.LFG(Wh.rT,8),w.LFG(Wh.lh,8),w.LFG(Wh.f7,8),w.LFG(gE.nm,8))},i.\u0275prov=w.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),KE=(()=>{class i{constructor(){mE.Z.registerVersion("angularfire",Ge.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:qE,useValue:!0},{provide:zv,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=w.oAB({type:i}),i.\u0275inj=w.cJS({providers:[CE]}),i})()},6304:(nn,it,U)=>{U.d(it,{Dh:()=>Ke,GT:()=>Ge,cc:()=>yt,hO:()=>It,on:()=>pe,pX:()=>Pe,xv:()=>$e});var w=U(5879),ne=U(7142),S=U(1966);nn=U.hmd(nn);const fe=["ngOnDestroy"],Pe=(xt,ze,Lt,_e={})=>new Proxy(xt,{get:(et,Be)=>Lt.runOutsideAngular(()=>{var gt;if(xt[Be])return!(null===(gt=_e?.spy)||void 0===gt)&&gt.get&&_e.spy.get(Be,xt[Be]),xt[Be];if(fe.indexOf(Be)>-1)return()=>{};const vt=ze.toPromise().then(Xe=>{const ot=Xe&&Xe[Be];return"function"==typeof ot?ot.bind(Xe):ot&&ot.then?ot.then(Ot=>Lt.run(()=>Ot)):Lt.run(()=>ot)});return new Proxy(()=>{},{get:(Xe,ot)=>vt[ot],apply:(Xe,ot,Ot)=>vt.then(Yt=>{var Cn;const kn=Yt&&Yt(...Ot);return!(null===(Cn=_e?.spy)||void 0===Cn)&&Cn.apply&&_e.spy.apply(Be,Ot,kn),kn})})})}),Ge=(xt,ze)=>{ze.forEach(Lt=>{Object.getOwnPropertyNames(Lt.prototype||Lt).forEach(_e=>{Object.defineProperty(xt.prototype,_e,Object.getOwnPropertyDescriptor(Lt.prototype||Lt,_e))})})};class Ve{constructor(ze){return ze}}const Ke=new w.OlP("angularfire2.app.options"),$e=new w.OlP("angularfire2.app.name");function pe(xt,ze,Lt){const et="object"==typeof Lt&&Lt||{};et.name=et.name||"string"==typeof Lt&&Lt||"[DEFAULT]";const gt=ne.Z.apps.filter(vt=>vt&&vt.name===et.name)[0]||ze.runOutsideAngular(()=>ne.Z.initializeApp(xt,et));try{JSON.stringify(xt)!==JSON.stringify(gt.options)&&ye("error",`${gt.name} Firebase App already initialized with different options${nn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ve(gt)}const ye=(xt,...ze)=>{(0,w.X6Q)()&&typeof console<"u"&&console[xt](...ze)},Re={provide:Ve,useFactory:pe,deps:[Ke,w.R0b,[new w.FiY,$e]]};let It=(()=>{class xt{constructor(Lt){ne.Z.registerVersion("angularfire",S.q4.full,"core"),ne.Z.registerVersion("angularfire",S.q4.full,"app-compat"),ne.Z.registerVersion("angular",w.q4F.full,Lt.toString())}static initializeApp(Lt,_e){return{ngModule:xt,providers:[{provide:Ke,useValue:Lt},{provide:$e,useValue:_e}]}}}return xt.\u0275fac=function(Lt){return new(Lt||xt)(w.LFG(w.Lbi))},xt.\u0275mod=w.oAB({type:xt}),xt.\u0275inj=w.cJS({providers:[Re]}),xt})();function yt(xt,ze,Lt,_e,et){const[,Be,gt]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===xt)||[];if(Be)return function $t(xt,ze){try{return xt.toString()===ze.toString()}catch{return xt===ze}}(et,gt)||(Vt("error",`${ze} was already initialized on the ${Lt} Firebase App with different settings.${Tt?" You may need to reload as Firebase is not HMR aware.":""}`),Vt("warn",{is:et,was:gt})),Be;{const vt=_e();return globalThis.\u0275AngularfireInstanceCache.push([xt,vt,et]),vt}}const Tt=!!nn.hot,Vt=(xt,...ze)=>{(0,w.X6Q)()&&typeof console<"u"&&console[xt](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},1966:(nn,it,U)=>{U.d(it,{q4:()=>Oc,iC:()=>ri,fc:()=>Da,HU:()=>tp,vb:()=>Fc,JM:()=>Yh});var w=U(5879),ne=U(3182),S=U(5861),fe=U(6122),Pe=U(9058),Ge=U(4537),Ve=U(7879);const Ke=(x,V)=>V.some(Y=>x instanceof Y);let $e,pe;const It=new WeakMap,yt=new WeakMap,$t=new WeakMap,Tt=new WeakMap,Vt=new WeakMap;let Lt={get(x,V,Y){if(x instanceof IDBTransaction){if("done"===V)return yt.get(x);if("objectStoreNames"===V)return x.objectStoreNames||$t.get(x);if("store"===V)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return gt(x[V])},set:(x,V,Y)=>(x[V]=Y,!0),has:(x,V)=>x instanceof IDBTransaction&&("done"===V||"store"===V)||V in x};function Be(x){return"function"==typeof x?function et(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Re(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...V){return x.apply(vt(this),V),gt(It.get(this))}:function(...V){return gt(x.apply(vt(this),V))}:function(V,...Y){const Ee=x.call(vt(this),V,...Y);return $t.set(Ee,V.sort?V.sort():[V]),gt(Ee)}}(x):(x instanceof IDBTransaction&&function ze(x){if(yt.has(x))return;const V=new Promise((Y,Ee)=>{const qe=()=>{x.removeEventListener("complete",nt),x.removeEventListener("error",kt),x.removeEventListener("abort",kt)},nt=()=>{Y(),qe()},kt=()=>{Ee(x.error||new DOMException("AbortError","AbortError")),qe()};x.addEventListener("complete",nt),x.addEventListener("error",kt),x.addEventListener("abort",kt)});yt.set(x,V)}(x),Ke(x,function ye(){return $e||($e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,Lt):x)}function gt(x){if(x instanceof IDBRequest)return function xt(x){const V=new Promise((Y,Ee)=>{const qe=()=>{x.removeEventListener("success",nt),x.removeEventListener("error",kt)},nt=()=>{Y(gt(x.result)),qe()},kt=()=>{Ee(x.error),qe()};x.addEventListener("success",nt),x.addEventListener("error",kt)});return V.then(Y=>{Y instanceof IDBCursor&&It.set(Y,x)}).catch(()=>{}),Vt.set(V,x),V}(x);if(Tt.has(x))return Tt.get(x);const V=Be(x);return V!==x&&(Tt.set(x,V),Vt.set(V,x)),V}const vt=x=>Vt.get(x);function Xe(x,V,{blocked:Y,upgrade:Ee,blocking:qe,terminated:nt}={}){const kt=indexedDB.open(x,V),mn=gt(kt);return Ee&&kt.addEventListener("upgradeneeded",Xt=>{Ee(gt(kt.result),Xt.oldVersion,Xt.newVersion,gt(kt.transaction))}),Y&&kt.addEventListener("blocked",()=>Y()),mn.then(Xt=>{nt&&Xt.addEventListener("close",()=>nt()),qe&&Xt.addEventListener("versionchange",()=>qe())}).catch(()=>{}),mn}function ot(x,{blocked:V}={}){const Y=indexedDB.deleteDatabase(x);return V&&Y.addEventListener("blocked",()=>V()),gt(Y).then(()=>{})}const Ot=["get","getKey","getAll","getAllKeys","count"],Yt=["put","add","delete","clear"],Cn=new Map;function kn(x,V){if(!(x instanceof IDBDatabase)||V in x||"string"!=typeof V)return;if(Cn.get(V))return Cn.get(V);const Y=V.replace(/FromIndex$/,""),Ee=V!==Y,qe=Yt.includes(Y);if(!(Y in(Ee?IDBIndex:IDBObjectStore).prototype)||!qe&&!Ot.includes(Y))return;const nt=function(){var kt=(0,S.Z)(function*(mn,...Xt){const wn=this.transaction(mn,qe?"readwrite":"readonly");let _r=wn.store;return Ee&&(_r=_r.index(Xt.shift())),(yield Promise.all([_r[Y](...Xt),qe&&wn.done]))[0]});return function(Xt){return kt.apply(this,arguments)}}();return Cn.set(V,nt),nt}!function _e(x){Lt=x(Lt)}(x=>({...x,get:(V,Y,Ee)=>kn(V,Y)||x.get(V,Y,Ee),has:(V,Y)=>!!kn(V,Y)||x.has(V,Y)}));const pr="@firebase/installations",Nt="0.6.4",Jn=1e4,xe=`w:${Nt}`,ge="FIS_v2",Le="https://firebaseinstallations.googleapis.com/v1",He=36e5,jt=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Jt(x){return x instanceof Pe.ZR&&x.code.includes("request-failed")}function Nn({projectId:x}){return`${Le}/projects/${x}/installations`}function pn(x){return{token:x.token,requestStatus:2,expiresIn:jn(x.expiresIn),creationTime:Date.now()}}function Vn(x,V){return dn.apply(this,arguments)}function dn(){return(dn=(0,S.Z)(function*(x,V){const Ee=(yield V.json()).error;return jt.create("request-failed",{requestName:x,serverCode:Ee.code,serverMessage:Ee.message,serverStatus:Ee.status})})).apply(this,arguments)}function Bn({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function fn(x){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,S.Z)(function*(x){const V=yield x();return V.status>=500&&V.status<600?x():V})).apply(this,arguments)}function jn(x){return Number(x.replace("s","000"))}function ji(){return(ji=(0,S.Z)(function*({appConfig:x,heartbeatServiceProvider:V},{fid:Y}){const Ee=Nn(x),qe=Bn(x),nt=V.getImmediate({optional:!0});if(nt){const wn=yield nt.getHeartbeatsHeader();wn&&qe.append("x-firebase-client",wn)}const mn={method:"POST",headers:qe,body:JSON.stringify({fid:Y,authVersion:ge,appId:x.appId,sdkVersion:xe})},Xt=yield fn(()=>fetch(Ee,mn));if(Xt.ok){const wn=yield Xt.json();return{fid:wn.fid||Y,registrationStatus:2,refreshToken:wn.refreshToken,authToken:pn(wn.authToken)}}throw yield Vn("Create Installation",Xt)})).apply(this,arguments)}function Kr(x){return new Promise(V=>{setTimeout(V,x)})}const yi=/^[cdef][\w-]{21}$/,gn="";function zn(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const Y=function An(x){return function Ai(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return yi.test(Y)?Y:gn}catch{return gn}}function cr(x){return`${x.appName}!${x.appId}`}const Or=new Map;function _i(x,V){const Y=cr(x);Yi(Y,V),function rr(x,V){const Y=function an(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=x=>{Yi(x.data.key,x.data.fid)}),Fr}();Y&&Y.postMessage({key:x,fid:V}),function Ar(){0===Or.size&&Fr&&(Fr.close(),Fr=null)}()}(Y,V)}function Yi(x,V){const Y=Or.get(x);if(Y)for(const Ee of Y)Ee(V)}let Fr=null;const zi="firebase-installations-database",vi=1,Ei="firebase-installations-store";let Vr=null;function Dn(){return Vr||(Vr=Xe(zi,vi,{upgrade:(x,V)=>{0===V&&x.createObjectStore(Ei)}})),Vr}function Br(x,V){return nr.apply(this,arguments)}function nr(){return(nr=(0,S.Z)(function*(x,V){const Y=cr(x),qe=(yield Dn()).transaction(Ei,"readwrite"),nt=qe.objectStore(Ei),kt=yield nt.get(Y);return yield nt.put(V,Y),yield qe.done,(!kt||kt.fid!==V.fid)&&_i(x,V.fid),V})).apply(this,arguments)}function vr(x){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,S.Z)(function*(x){const V=cr(x),Ee=(yield Dn()).transaction(Ei,"readwrite");yield Ee.objectStore(Ei).delete(V),yield Ee.done})).apply(this,arguments)}function Qr(x,V){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,S.Z)(function*(x,V){const Y=cr(x),qe=(yield Dn()).transaction(Ei,"readwrite"),nt=qe.objectStore(Ei),kt=yield nt.get(Y),mn=V(kt);return void 0===mn?yield nt.delete(Y):yield nt.put(mn,Y),yield qe.done,mn&&(!kt||kt.fid!==mn.fid)&&_i(x,mn.fid),mn})).apply(this,arguments)}function Oe(x){return re.apply(this,arguments)}function re(){return re=(0,S.Z)(function*(x){let V;const Y=yield Qr(x.appConfig,Ee=>{const qe=function ae(x){return hn(x||{fid:zn(),registrationStatus:0})}(Ee),nt=function ie(x,V){if(0===V.registrationStatus){if(!navigator.onLine)return{installationEntry:V,registrationPromise:Promise.reject(jt.create("app-offline"))};const Y={fid:V.fid,registrationStatus:1,registrationTime:Date.now()},Ee=function le(x,V){return Ze.apply(this,arguments)}(x,Y);return{installationEntry:Y,registrationPromise:Ee}}return 1===V.registrationStatus?{installationEntry:V,registrationPromise:Dt(x)}:{installationEntry:V}}(x,qe);return V=nt.registrationPromise,nt.installationEntry});return Y.fid===gn?{installationEntry:yield V}:{installationEntry:Y,registrationPromise:V}}),re.apply(this,arguments)}function Ze(){return Ze=(0,S.Z)(function*(x,V){try{const Y=yield function ws(x,V){return ji.apply(this,arguments)}(x,V);return Br(x.appConfig,Y)}catch(Y){throw Jt(Y)&&409===Y.customData.serverCode?yield vr(x.appConfig):yield Br(x.appConfig,{fid:V.fid,registrationStatus:0}),Y}}),Ze.apply(this,arguments)}function Dt(x){return qt.apply(this,arguments)}function qt(){return(qt=(0,S.Z)(function*(x){let V=yield Pn(x.appConfig);for(;1===V.registrationStatus;)yield Kr(100),V=yield Pn(x.appConfig);if(0===V.registrationStatus){const{installationEntry:Y,registrationPromise:Ee}=yield Oe(x);return Ee||Y}return V})).apply(this,arguments)}function Pn(x){return Qr(x,V=>{if(!V)throw jt.create("installation-not-found");return hn(V)})}function hn(x){return function Ut(x){return 1===x.registrationStatus&&x.registrationTime+Jn<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function kr(){return(kr=(0,S.Z)(function*({appConfig:x,heartbeatServiceProvider:V},Y){const Ee=function Je(x,{fid:V}){return`${Nn(x)}/${V}/authTokens:generate`}(x,Y),qe=function ur(x,{refreshToken:V}){const Y=Bn(x);return Y.append("Authorization",function or(x){return`${ge} ${x}`}(V)),Y}(x,Y),nt=V.getImmediate({optional:!0});if(nt){const wn=yield nt.getHeartbeatsHeader();wn&&qe.append("x-firebase-client",wn)}const mn={method:"POST",headers:qe,body:JSON.stringify({installation:{sdkVersion:xe,appId:x.appId}})},Xt=yield fn(()=>fetch(Ee,mn));if(Xt.ok)return pn(yield Xt.json());throw yield Vn("Generate Auth Token",Xt)})).apply(this,arguments)}function Fe(x){return je.apply(this,arguments)}function je(){return je=(0,S.Z)(function*(x,V=!1){let Y;const Ee=yield Qr(x.appConfig,nt=>{if(!Zt(nt))throw jt.create("not-registered");const kt=nt.authToken;if(!V&&function Mn(x){return 2===x.requestStatus&&!function gr(x){const V=Date.now();return V<x.creationTime||x.creationTime+x.expiresIn<V+He}(x)}(kt))return nt;if(1===kt.requestStatus)return Y=function Te(x,V){return Ne.apply(this,arguments)}(x,V),nt;{if(!navigator.onLine)throw jt.create("app-offline");const mn=function dr(x){const V={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:V})}(nt);return Y=function Et(x,V){return ln.apply(this,arguments)}(x,mn),mn}});return Y?yield Y:Ee.authToken}),je.apply(this,arguments)}function Ne(){return(Ne=(0,S.Z)(function*(x,V){let Y=yield Ye(x.appConfig);for(;1===Y.authToken.requestStatus;)yield Kr(100),Y=yield Ye(x.appConfig);const Ee=Y.authToken;return 0===Ee.requestStatus?Fe(x,V):Ee})).apply(this,arguments)}function Ye(x){return Qr(x,V=>{if(!Zt(V))throw jt.create("not-registered");return function jr(x){return 1===x.requestStatus&&x.requestTime+Jn<Date.now()}(V.authToken)?Object.assign(Object.assign({},V),{authToken:{requestStatus:0}}):V})}function ln(){return ln=(0,S.Z)(function*(x,V){try{const Y=yield function Ln(x,V){return kr.apply(this,arguments)}(x,V),Ee=Object.assign(Object.assign({},V),{authToken:Y});return yield Br(x.appConfig,Ee),Y}catch(Y){if(!Jt(Y)||401!==Y.customData.serverCode&&404!==Y.customData.serverCode){const Ee=Object.assign(Object.assign({},V),{authToken:{requestStatus:0}});yield Br(x.appConfig,Ee)}else yield vr(x.appConfig);throw Y}}),ln.apply(this,arguments)}function Zt(x){return void 0!==x&&2===x.registrationStatus}function es(){return(es=(0,S.Z)(function*(x){const V=x,{installationEntry:Y,registrationPromise:Ee}=yield Oe(V);return Ee?Ee.catch(console.error):Fe(V).catch(console.error),Y.fid})).apply(this,arguments)}function Cr(){return Cr=(0,S.Z)(function*(x,V=!1){const Y=x;return yield function ts(x){return wi.apply(this,arguments)}(Y),(yield Fe(Y,V)).token}),Cr.apply(this,arguments)}function wi(){return(wi=(0,S.Z)(function*(x){const{registrationPromise:V}=yield Oe(x);V&&(yield V)})).apply(this,arguments)}function Ci(x){return jt.create("missing-app-config-values",{valueName:x})}const xs="installations",Co=x=>{const V=x.getProvider("app").getImmediate(),Y=function js(x){if(!x||!x.options)throw Ci("App Configuration");if(!x.name)throw Ci("App Name");const V=["projectId","apiKey","appId"];for(const Y of V)if(!x.options[Y])throw Ci(Y);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(V);return{app:V,appConfig:Y,heartbeatServiceProvider:(0,fe._getProvider)(V,"heartbeat"),_delete:()=>Promise.resolve()}},Fi=x=>{const V=x.getProvider("app").getImmediate(),Y=(0,fe._getProvider)(V,xs).getImmediate();return{getId:()=>function Hi(x){return es.apply(this,arguments)}(Y),getToken:qe=>function wr(x){return Cr.apply(this,arguments)}(Y,qe)}};(function aa(){(0,fe._registerComponent)(new Ge.wA(xs,Co,"PUBLIC")),(0,fe._registerComponent)(new Ge.wA("installations-internal",Fi,"PRIVATE"))})(),(0,fe.registerVersion)(pr,Nt),(0,fe.registerVersion)(pr,Nt,"esm2017");const Ii="@firebase/remote-config",ct=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ms{constructor(V,Y,Ee,qe){this.client=V,this.storage=Y,this.storageCache=Ee,this.logger=qe}isCachedDataFresh(V,Y){if(!Y)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ee=Date.now()-Y,qe=Ee<=V;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ee}. Cache max age millis (minimumFetchIntervalMillis setting): ${V}. Is cache hit: ${qe}.`),qe}fetch(V){var Y=this;return(0,S.Z)(function*(){const[Ee,qe]=yield Promise.all([Y.storage.getLastSuccessfulFetchTimestampMillis(),Y.storage.getLastSuccessfulFetchResponse()]);if(qe&&Y.isCachedDataFresh(V.cacheMaxAgeMillis,Ee))return qe;V.eTag=qe&&qe.eTag;const nt=yield Y.client.fetch(V),kt=[Y.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===nt.status&&kt.push(Y.storage.setLastSuccessfulFetchResponse(nt)),yield Promise.all(kt),nt})()}}function Hs(x=navigator){return x.languages&&x.languages[0]||x.language}class ds{constructor(V,Y,Ee,qe,nt,kt){this.firebaseInstallations=V,this.sdkVersion=Y,this.namespace=Ee,this.projectId=qe,this.apiKey=nt,this.appId=kt}fetch(V){var Y=this;return(0,S.Z)(function*(){const[Ee,qe]=yield Promise.all([Y.firebaseInstallations.getId(),Y.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Y.projectId}/namespaces/${Y.namespace}:fetch?key=${Y.apiKey}`,mn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":V.eTag||"*"},Xt={sdk_version:Y.sdkVersion,app_instance_id:Ee,app_instance_id_token:qe,app_id:Y.appId,language_code:Hs()},wn={method:"POST",headers:mn,body:JSON.stringify(Xt)},_r=fetch(kt,wn),Kn=new Promise((Ts,ro)=>{V.signal.addEventListener(()=>{const iu=new Error("The operation was aborted.");iu.name="AbortError",ro(iu)})});let Jr;try{yield Promise.race([_r,Kn]),Jr=yield _r}catch(Ts){let ro="fetch-client-network";throw"AbortError"===Ts?.name&&(ro="fetch-timeout"),ct.create(ro,{originalErrorMessage:Ts?.message})}let no=Jr.status;const Ro=Jr.headers.get("ETag")||void 0;let ru,Ds;if(200===Jr.status){let Ts;try{Ts=yield Jr.json()}catch(ro){throw ct.create("fetch-client-parse",{originalErrorMessage:ro?.message})}ru=Ts.entries,Ds=Ts.state}if("INSTANCE_STATE_UNSPECIFIED"===Ds?no=500:"NO_CHANGE"===Ds?no=304:("NO_TEMPLATE"===Ds||"EMPTY_CONFIG"===Ds)&&(ru={}),304!==no&&200!==no)throw ct.create("fetch-status",{httpStatus:no});return{status:no,eTag:Ro,config:ru}})()}}class ua{constructor(V,Y){this.client=V,this.storage=Y}fetch(V){var Y=this;return(0,S.Z)(function*(){const Ee=(yield Y.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Y.attemptFetch(V,Ee)})()}attemptFetch(V,{throttleEndTimeMillis:Y,backoffCount:Ee}){var qe=this;return(0,S.Z)(function*(){yield function li(x,V){return new Promise((Y,Ee)=>{const qe=Math.max(V-Date.now(),0),nt=setTimeout(Y,qe);x.addEventListener(()=>{clearTimeout(nt),Ee(ct.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}(V.signal,Y);try{const nt=yield qe.client.fetch(V);return yield qe.storage.deleteThrottleMetadata(),nt}catch(nt){if(!function Po(x){if(!(x instanceof Pe.ZR&&x.customData))return!1;const V=Number(x.customData.httpStatus);return 429===V||500===V||503===V||504===V}(nt))throw nt;const kt={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(Ee),backoffCount:Ee+1};return yield qe.storage.setThrottleMetadata(kt),qe.attemptFetch(V,kt)}})()}}class Rs{constructor(V,Y,Ee,qe,nt){this.app=V,this._client=Y,this._storageCache=Ee,this._storage=qe,this._logger=nt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bi(x,V){const Y=x.target.error||void 0;return ct.create(V,{originalErrorMessage:Y&&Y?.message})}const Lr="app_namespace_store";class pi{constructor(V,Y,Ee,qe=function mr(){return new Promise((x,V)=>{try{const Y=indexedDB.open("firebase_remote_config",1);Y.onerror=Ee=>{V(bi(Ee,"storage-open"))},Y.onsuccess=Ee=>{x(Ee.target.result)},Y.onupgradeneeded=Ee=>{0===Ee.oldVersion&&Ee.target.result.createObjectStore(Lr,{keyPath:"compositeKey"})}}catch(Y){V(ct.create("storage-open",{originalErrorMessage:Y?.message}))}})}()){this.appId=V,this.appName=Y,this.namespace=Ee,this.openDbPromise=qe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(V){return this.set("last_fetch_status",V)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(V){return this.set("last_successful_fetch_timestamp_millis",V)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(V){return this.set("last_successful_fetch_response",V)}getActiveConfig(){return this.get("active_config")}setActiveConfig(V){return this.set("active_config",V)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(V){return this.set("active_config_etag",V)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(V){return this.set("throttle_metadata",V)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(V){var Y=this;return(0,S.Z)(function*(){const Ee=yield Y.openDbPromise;return new Promise((qe,nt)=>{const mn=Ee.transaction([Lr],"readonly").objectStore(Lr),Xt=Y.createCompositeKey(V);try{const wn=mn.get(Xt);wn.onerror=_r=>{nt(bi(_r,"storage-get"))},wn.onsuccess=_r=>{const Kn=_r.target.result;qe(Kn?Kn.value:void 0)}}catch(wn){nt(ct.create("storage-get",{originalErrorMessage:wn?.message}))}})})()}set(V,Y){var Ee=this;return(0,S.Z)(function*(){const qe=yield Ee.openDbPromise;return new Promise((nt,kt)=>{const Xt=qe.transaction([Lr],"readwrite").objectStore(Lr),wn=Ee.createCompositeKey(V);try{const _r=Xt.put({compositeKey:wn,value:Y});_r.onerror=Kn=>{kt(bi(Kn,"storage-set"))},_r.onsuccess=()=>{nt()}}catch(_r){kt(ct.create("storage-set",{originalErrorMessage:_r?.message}))}})})()}delete(V){var Y=this;return(0,S.Z)(function*(){const Ee=yield Y.openDbPromise;return new Promise((qe,nt)=>{const mn=Ee.transaction([Lr],"readwrite").objectStore(Lr),Xt=Y.createCompositeKey(V);try{const wn=mn.delete(Xt);wn.onerror=_r=>{nt(bi(_r,"storage-delete"))},wn.onsuccess=()=>{qe()}}catch(wn){nt(ct.create("storage-delete",{originalErrorMessage:wn?.message}))}})})()}createCompositeKey(V){return[this.appId,this.appName,this.namespace,V].join()}}class bo{constructor(V){this.storage=V}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var V=this;return(0,S.Z)(function*(){const Y=V.storage.getLastFetchStatus(),Ee=V.storage.getLastSuccessfulFetchTimestampMillis(),qe=V.storage.getActiveConfig(),nt=yield Y;nt&&(V.lastFetchStatus=nt);const kt=yield Ee;kt&&(V.lastSuccessfulFetchTimestampMillis=kt);const mn=yield qe;mn&&(V.activeConfig=mn)})()}setLastFetchStatus(V){return this.lastFetchStatus=V,this.storage.setLastFetchStatus(V)}setLastSuccessfulFetchTimestampMillis(V){return this.lastSuccessfulFetchTimestampMillis=V,this.storage.setLastSuccessfulFetchTimestampMillis(V)}setActiveConfig(V){return this.activeConfig=V,this.storage.setActiveConfig(V)}}function Do(){return To.apply(this,arguments)}function To(){return(To=(0,S.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}!function Cs(){(0,fe._registerComponent)(new Ge.wA("remote-config",function x(V,{instanceIdentifier:Y}){const Ee=V.getProvider("app").getImmediate(),qe=V.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ct.create("registration-window");if(!(0,Pe.hl)())throw ct.create("indexed-db-unavailable");const{projectId:nt,apiKey:kt,appId:mn}=Ee.options;if(!nt)throw ct.create("registration-project-id");if(!kt)throw ct.create("registration-api-key");if(!mn)throw ct.create("registration-app-id");const Xt=new pi(mn,Ee.name,Y=Y||"firebase"),wn=new bo(Xt),_r=new Ve.Yd(Ii);_r.logLevel=Ve.in.ERROR;const Kn=new ds(qe,fe.SDK_VERSION,Y,nt,kt,mn),Jr=new ua(Kn,Xt),no=new ms(Jr,Xt,wn,_r),Ro=new Rs(Ee,no,wn,Xt,_r);return function Qt(x){const V=(0,Pe.m9)(x);V._initializePromise||(V._initializePromise=V._storageCache.loadFromStorage().then(()=>{V._isInitializationComplete=!0}))}(Ro),Ro},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(Ii,"0.4.4"),(0,fe.registerVersion)(Ii,"0.4.4","esm2017")}();const rs="/firebase-messaging-sw.js",So="/firebase-cloud-messaging-push-scope",Di="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Is="https://fcmregistrations.googleapis.com/v1",bs="google.c.a.c_id",ao="google.c.a.c_l",la="google.c.a.ts";var ca=function(x){return x.PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",x}(ca||{});function ss(x){const V=new Uint8Array(x);return btoa(String.fromCharCode(...V)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _a(x){const Y=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ee=atob(Y),qe=new Uint8Array(Ee.length);for(let nt=0;nt<Ee.length;++nt)qe[nt]=Ee.charCodeAt(nt);return qe}const Oo="fcm_token_details_db",gu=5,ju="fcm_token_object_Store";function va(){return va=(0,S.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(nt=>nt.name).includes(Oo))return null;let V=null;return(yield Xe(Oo,gu,{upgrade:(Ee=(0,S.Z)(function*(qe,nt,kt,mn){var Xt;if(nt<2||!qe.objectStoreNames.contains(ju))return;const wn=mn.objectStore(ju),_r=yield wn.index("fcmSenderId").get(x);if(yield wn.clear(),_r)if(2===nt){const Kn=_r;if(!Kn.auth||!Kn.p256dh||!Kn.endpoint)return;V={token:Kn.fcmToken,createTime:null!==(Xt=Kn.createTime)&&void 0!==Xt?Xt:Date.now(),subscriptionOptions:{auth:Kn.auth,p256dh:Kn.p256dh,endpoint:Kn.endpoint,swScope:Kn.swScope,vapidKey:"string"==typeof Kn.vapidKey?Kn.vapidKey:ss(Kn.vapidKey)}}}else if(3===nt){const Kn=_r;V={token:Kn.fcmToken,createTime:Kn.createTime,subscriptionOptions:{auth:ss(Kn.auth),p256dh:ss(Kn.p256dh),endpoint:Kn.endpoint,swScope:Kn.swScope,vapidKey:ss(Kn.vapidKey)}}}else if(4===nt){const Kn=_r;V={token:Kn.fcmToken,createTime:Kn.createTime,subscriptionOptions:{auth:ss(Kn.auth),p256dh:ss(Kn.p256dh),endpoint:Kn.endpoint,swScope:Kn.swScope,vapidKey:ss(Kn.vapidKey)}}}}),function(nt,kt,mn,Xt){return Ee.apply(this,arguments)})})).close(),yield ot(Oo),yield ot("fcm_vapid_details_db"),yield ot("undefined"),function Oa(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:V}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof V.auth&&V.auth.length>0&&"string"==typeof V.p256dh&&V.p256dh.length>0&&"string"==typeof V.endpoint&&V.endpoint.length>0&&"string"==typeof V.swScope&&V.swScope.length>0&&"string"==typeof V.vapidKey&&V.vapidKey.length>0}(V)?V:null;var Ee}),va.apply(this,arguments)}const mu="firebase-messaging-database",yu=1,Ns="firebase-messaging-store";let ko=null;function _u(){return ko||(ko=Xe(mu,yu,{upgrade:(x,V)=>{0===V&&x.createObjectStore(Ns)}})),ko}function Ja(x){return uo.apply(this,arguments)}function uo(){return uo=(0,S.Z)(function*(x){const V=ci(x),Ee=yield(yield _u()).transaction(Ns).objectStore(Ns).get(V);if(Ee)return Ee;{const qe=yield function Hu(x){return va.apply(this,arguments)}(x.appConfig.senderId);if(qe)return yield lo(x,qe),qe}}),uo.apply(this,arguments)}function lo(x,V){return da.apply(this,arguments)}function da(){return(da=(0,S.Z)(function*(x,V){const Y=ci(x),qe=(yield _u()).transaction(Ns,"readwrite");return yield qe.objectStore(Ns).put(V,Y),yield qe.done,V})).apply(this,arguments)}function zo(){return(zo=(0,S.Z)(function*(x){const V=ci(x),Ee=(yield _u()).transaction(Ns,"readwrite");yield Ee.objectStore(Ns).delete(V),yield Ee.done})).apply(this,arguments)}function ci({appConfig:x}){return x.appId}const ar=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function eu(x,V){return pl.apply(this,arguments)}function pl(){return(pl=(0,S.Z)(function*(x,V){const Y=yield Js(x),Ee=K(V),qe={method:"POST",headers:Y,body:JSON.stringify(Ee)};let nt;try{nt=yield(yield fetch(Ko(x.appConfig),qe)).json()}catch(kt){throw ar.create("token-subscribe-failed",{errorInfo:kt?.toString()})}if(nt.error)throw ar.create("token-subscribe-failed",{errorInfo:nt.error.message});if(!nt.token)throw ar.create("token-subscribe-no-token");return nt.token})).apply(this,arguments)}function Wo(){return(Wo=(0,S.Z)(function*(x,V){const Y=yield Js(x),Ee=K(V.subscriptionOptions),qe={method:"PATCH",headers:Y,body:JSON.stringify(Ee)};let nt;try{nt=yield(yield fetch(`${Ko(x.appConfig)}/${V.token}`,qe)).json()}catch(kt){throw ar.create("token-update-failed",{errorInfo:kt?.toString()})}if(nt.error)throw ar.create("token-update-failed",{errorInfo:nt.error.message});if(!nt.token)throw ar.create("token-update-no-token");return nt.token})).apply(this,arguments)}function Lo(x,V){return qo.apply(this,arguments)}function qo(){return(qo=(0,S.Z)(function*(x,V){const Ee={method:"DELETE",headers:yield Js(x)};try{const nt=yield(yield fetch(`${Ko(x.appConfig)}/${V}`,Ee)).json();if(nt.error)throw ar.create("token-unsubscribe-failed",{errorInfo:nt.error.message})}catch(qe){throw ar.create("token-unsubscribe-failed",{errorInfo:qe?.toString()})}})).apply(this,arguments)}function Ko({projectId:x}){return`${Is}/projects/${x}/registrations`}function Js(x){return H.apply(this,arguments)}function H(){return(H=(0,S.Z)(function*({appConfig:x,installations:V}){const Y=yield V.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${Y}`})})).apply(this,arguments)}function K({p256dh:x,auth:V,endpoint:Y,vapidKey:Ee}){const qe={web:{endpoint:Y,auth:V,p256dh:x}};return Ee!==Di&&(qe.web.applicationPubKey=Ee),qe}const L=6048e5;function Me(){return Me=(0,S.Z)(function*(x){const V=yield function ka(x,V){return Zo.apply(this,arguments)}(x.swRegistration,x.vapidKey),Y={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:V.endpoint,auth:ss(V.getKey("auth")),p256dh:ss(V.getKey("p256dh"))},Ee=yield Ja(x.firebaseDependencies);if(Ee){if(function Yo(x,V){return V.vapidKey===x.vapidKey&&V.endpoint===x.endpoint&&V.auth===x.auth&&V.p256dh===x.p256dh}(Ee.subscriptionOptions,Y))return Date.now()>=Ee.createTime+L?function os(x,V){return di.apply(this,arguments)}(x,{token:Ee.token,createTime:Date.now(),subscriptionOptions:Y}):Ee.token;try{yield Lo(x.firebaseDependencies,Ee.token)}catch(qe){console.warn(qe)}return Fo(x.firebaseDependencies,Y)}return Fo(x.firebaseDependencies,Y)}),Me.apply(this,arguments)}function Fn(){return Fn=(0,S.Z)(function*(x){const V=yield Ja(x.firebaseDependencies);V&&(yield Lo(x.firebaseDependencies,V.token),yield function vu(x){return zo.apply(this,arguments)}(x.firebaseDependencies));const Y=yield x.swRegistration.pushManager.getSubscription();return!Y||Y.unsubscribe()}),Fn.apply(this,arguments)}function di(){return di=(0,S.Z)(function*(x,V){try{const Y=yield function tu(x,V){return Wo.apply(this,arguments)}(x.firebaseDependencies,V),Ee=Object.assign(Object.assign({},V),{token:Y,createTime:Date.now()});return yield lo(x.firebaseDependencies,Ee),Y}catch(Y){throw yield function cn(x){return Fn.apply(this,arguments)}(x),Y}}),di.apply(this,arguments)}function Fo(x,V){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,S.Z)(function*(x,V){const Ee={token:yield eu(x,V),createTime:Date.now(),subscriptionOptions:V};return yield lo(x,Ee),Ee.token})).apply(this,arguments)}function Zo(){return(Zo=(0,S.Z)(function*(x,V){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_a(V)})})).apply(this,arguments)}function me(x){const V={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function ha(x,V){if(!V.notification)return;x.notification={};const Y=V.notification.title;Y&&(x.notification.title=Y);const Ee=V.notification.body;Ee&&(x.notification.body=Ee);const qe=V.notification.image;qe&&(x.notification.image=qe);const nt=V.notification.icon;nt&&(x.notification.icon=nt)}(V,x),function gl(x,V){V.data&&(x.data=V.data)}(V,x),function Gu(x,V){var Y,Ee,qe,nt,kt;if(!(V.fcmOptions||null!==(Y=V.notification)&&void 0!==Y&&Y.click_action))return;x.fcmOptions={};const mn=null!==(qe=null===(Ee=V.fcmOptions)||void 0===Ee?void 0:Ee.link)&&void 0!==qe?qe:null===(nt=V.notification)||void 0===nt?void 0:nt.click_action;mn&&(x.fcmOptions.link=mn);const Xt=null===(kt=V.fcmOptions)||void 0===kt?void 0:kt.analytics_label;Xt&&(x.fcmOptions.analyticsLabel=Xt)}(V,x),V}function ml(x,V){const Y=[];for(let Ee=0;Ee<x.length;Ee++)Y.push(x.charAt(Ee)),Ee<V.length&&Y.push(V.charAt(Ee));return Y.join("")}function Ri(x){return ar.create("missing-app-config-values",{valueName:x})}ml("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ml("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gi{constructor(V,Y,Ee){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const qe=function wu(x){if(!x||!x.options)throw Ri("App Configuration Object");if(!x.name)throw Ri("App Name");const V=["projectId","apiKey","appId","messagingSenderId"],{options:Y}=x;for(const Ee of V)if(!Y[Ee])throw Ri(Ee);return{appName:x.name,projectId:Y.projectId,apiKey:Y.apiKey,appId:Y.appId,senderId:Y.messagingSenderId}}(V);this.firebaseDependencies={app:V,appConfig:qe,installations:Y,analyticsProvider:Ee}}_delete(){return Promise.resolve()}}function Ea(){return(Ea=(0,S.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(rs,{scope:So}),x.swRegistration.update().catch(()=>{})}catch(V){throw ar.create("failed-service-worker-registration",{browserErrorMessage:V?.message})}})).apply(this,arguments)}function nu(){return(nu=(0,S.Z)(function*(x,V){if(!V&&!x.swRegistration&&(yield function eo(x){return Ea.apply(this,arguments)}(x)),V||!x.swRegistration){if(!(V instanceof ServiceWorkerRegistration))throw ar.create("invalid-sw-registration");x.swRegistration=V}})).apply(this,arguments)}function La(){return(La=(0,S.Z)(function*(x,V){V?x.vapidKey=V:x.vapidKey||(x.vapidKey=Di)})).apply(this,arguments)}function Cu(){return Cu=(0,S.Z)(function*(x,V){if(!navigator)throw ar.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ar.create("permission-blocked");return yield function Kl(x,V){return La.apply(this,arguments)}(x,V?.vapidKey),yield function Ac(x,V){return nu.apply(this,arguments)}(x,V?.serviceWorkerRegistration),function Q(x){return Me.apply(this,arguments)}(x)}),Cu.apply(this,arguments)}function Uo(){return(Uo=(0,S.Z)(function*(x,V,Y){const Ee=function Zl(x){switch(x){case ca.NOTIFICATION_CLICKED:return"notification_open";case ca.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(V);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(Ee,{message_id:Y[bs],message_name:Y[ao],message_time:Y[la],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qo(){return Qo=(0,S.Z)(function*(x,V){const Y=V.data;if(!Y.isFirebaseMessaging)return;x.onMessageHandler&&Y.messageType===ca.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(me(Y)):x.onMessageHandler.next(me(Y)));const Ee=Y.data;(function Eu(x){return"object"==typeof x&&!!x&&bs in x})(Ee)&&"1"===Ee["google.c.a.e"]&&(yield function Vo(x,V,Y){return Uo.apply(this,arguments)}(x,Y.messageType,Ee))}),Qo.apply(this,arguments)}const R="@firebase/messaging",J="0.12.4",B=x=>{const V=new gi(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Y=>function Dr(x,V){return Qo.apply(this,arguments)}(V,Y)),V},Z=x=>{const V=x.getProvider("messaging").getImmediate();return{getToken:Ee=>function $s(x,V){return Cu.apply(this,arguments)}(V,Ee)}};function lt(){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,S.Z)(function*(){try{yield(0,Pe.eu)()}catch{return!1}return typeof window<"u"&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function De(){(0,fe._registerComponent)(new Ge.wA("messaging",B,"PUBLIC")),(0,fe._registerComponent)(new Ge.wA("messaging-internal",Z,"PRIVATE")),(0,fe.registerVersion)(R,J),(0,fe.registerVersion)(R,J,"esm2017")}();const qi="analytics",Un="firebase_id",Ps="origin",Ao=6e4,Gs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zs="https://www.googletagmanager.com/gtag/js",hi=new Ve.Yd("@firebase/analytics"),as=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function zu(x){if(!x.startsWith(zs)){const V=as.create("invalid-gtag-resource",{gtagURL:x});return hi.warn(V.message),""}return x}function yl(x){return Promise.all(x.map(V=>V.catch(Y=>Y)))}function tr(){return(tr=(0,S.Z)(function*(x,V,Y,Ee,qe,nt){const kt=Ee[qe];try{if(kt)yield V[kt];else{const Xt=(yield yl(Y)).find(wn=>wn.measurementId===qe);Xt&&(yield V[Xt.appId])}}catch(mn){hi.error(mn)}x("config",qe,nt)})).apply(this,arguments)}function Bo(){return(Bo=(0,S.Z)(function*(x,V,Y,Ee,qe){try{let nt=[];if(qe&&qe.send_to){let kt=qe.send_to;Array.isArray(kt)||(kt=[kt]);const mn=yield yl(Y);for(const Xt of kt){const wn=mn.find(Kn=>Kn.measurementId===Xt),_r=wn&&V[wn.appId];if(!_r){nt=[];break}nt.push(_r)}}0===nt.length&&(nt=Object.values(V)),yield Promise.all(nt),x("event",Ee,qe||{})}catch(nt){hi.error(nt)}})).apply(this,arguments)}const Xr=30,Kt=new class Wu{constructor(V={},Y=1e3){this.throttleMetadata=V,this.intervalMillis=Y}getThrottleMetadata(V){return this.throttleMetadata[V]}setThrottleMetadata(V,Y){this.throttleMetadata[V]=Y}deleteThrottleMetadata(V){delete this.throttleMetadata[V]}};function $n(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function en(){return(en=(0,S.Z)(function*(x){var V;const{appId:Y,apiKey:Ee}=x,qe={method:"GET",headers:$n(Ee)},nt=Gs.replace("{app-id}",Y),kt=yield fetch(nt,qe);if(200!==kt.status&&304!==kt.status){let mn="";try{const Xt=yield kt.json();null!==(V=Xt.error)&&void 0!==V&&V.message&&(mn=Xt.error.message)}catch{}throw as.create("config-fetch-failed",{httpStatus:kt.status,responseMessage:mn})}return kt.json()})).apply(this,arguments)}function Pt(){return(Pt=(0,S.Z)(function*(x,V=Kt,Y){const{appId:Ee,apiKey:qe,measurementId:nt}=x.options;if(!Ee)throw as.create("no-app-id");if(!qe){if(nt)return{measurementId:nt,appId:Ee};throw as.create("no-api-key")}const kt=V.getThrottleMetadata(Ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mn=new uh;return setTimeout((0,S.Z)(function*(){mn.abort()}),void 0!==Y?Y:Ao),Ni({appId:Ee,apiKey:qe,measurementId:nt},kt,mn,V)})).apply(this,arguments)}function Ni(x,V,Y){return co.apply(this,arguments)}function co(){return co=(0,S.Z)(function*(x,{throttleEndTimeMillis:V,backoffCount:Y},Ee,qe=Kt){var nt;const{appId:kt,measurementId:mn}=x;try{yield function ah(x,V){return new Promise((Y,Ee)=>{const qe=Math.max(V-Date.now(),0),nt=setTimeout(Y,qe);x.addEventListener(()=>{clearTimeout(nt),Ee(as.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}(Ee,V)}catch(Xt){if(mn)return hi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${Xt?.message}]`),{appId:kt,measurementId:mn};throw Xt}try{const Xt=yield function Rc(x){return en.apply(this,arguments)}(x);return qe.deleteThrottleMetadata(kt),Xt}catch(Xt){const wn=Xt;if(!function qu(x){if(!(x instanceof Pe.ZR&&x.customData))return!1;const V=Number(x.customData.httpStatus);return 429===V||500===V||503===V||504===V}(wn)){if(qe.deleteThrottleMetadata(kt),mn)return hi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${wn?.message}]`),{appId:kt,measurementId:mn};throw Xt}const _r=503===Number(null===(nt=wn?.customData)||void 0===nt?void 0:nt.httpStatus)?(0,Pe.$s)(Y,qe.intervalMillis,Xr):(0,Pe.$s)(Y,qe.intervalMillis),Kn={throttleEndTimeMillis:Date.now()+_r,backoffCount:Y+1};return qe.setThrottleMetadata(kt,Kn),hi.debug(`Calling attemptFetch again in ${_r} millis`),Ni(x,Kn,Ee,qe)}}),co.apply(this,arguments)}class uh{constructor(){this.listeners=[]}addEventListener(V){this.listeners.push(V)}abort(){this.listeners.forEach(V=>V())}}let hs,fr;function _l(){return(_l=(0,S.Z)(function*(x,V,Y,Ee,qe){if(qe&&qe.global)x("event",Y,Ee);else{const nt=yield V;x("event",Y,Object.assign(Object.assign({},Ee),{send_to:nt}))}})).apply(this,arguments)}function xi(){return(xi=(0,S.Z)(function*(){if(!(0,Pe.hl)())return hi.warn(as.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(x){return hi.warn(as.create("indexeddb-unavailable",{errorInfo:x?.toString()}).message),!1}return!0})).apply(this,arguments)}function Jo(){return Jo=(0,S.Z)(function*(x,V,Y,Ee,qe,nt,kt){var mn;const Xt=function ft(x){return Pt.apply(this,arguments)}(x);Xt.then(no=>{Y[no.measurementId]=no.appId,x.options.measurementId&&no.measurementId!==x.options.measurementId&&hi.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${no.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(no=>hi.error(no)),V.push(Xt);const wn=function un(){return xi.apply(this,arguments)}().then(no=>{if(no)return Ee.getId()}),[_r,Kn]=yield Promise.all([Xt,wn]);(function Ht(x){const V=window.document.getElementsByTagName("script");for(const Y of Object.values(V))if(Y.src&&Y.src.includes(zs)&&Y.src.includes(x))return Y;return null})(nt)||function Ed(x,V){const Y=function to(x,V){let Y;return window.trustedTypes&&(Y=window.trustedTypes.createPolicy(x,V)),Y}("firebase-js-sdk-policy",{createScriptURL:zu}),Ee=document.createElement("script"),qe=`${zs}?l=${x}&id=${V}`;Ee.src=Y?Y?.createScriptURL(qe):qe,Ee.async=!0,document.head.appendChild(Ee)}(nt,_r.measurementId),fr&&(qe("consent","default",fr),function fa(x){fr=x}(void 0)),qe("js",new Date);const Jr=null!==(mn=kt?.config)&&void 0!==mn?mn:{};return Jr[Ps]="firebase",Jr.update=!0,null!=Kn&&(Jr[Un]=Kn),qe("config",_r.measurementId,Jr),hs&&(qe("set",hs),function Rr(x){hs=x}(void 0)),_r.measurementId}),Jo.apply(this,arguments)}class lh{constructor(V){this.app=V}_delete(){return delete ea[this.app.options.appId],Promise.resolve()}}let ea={},El=[];const Ku={};let b,P,A="dataLayer",z=!1;function tt(x,V,Y){!function ce(){const x=[];if((0,Pe.ru)()&&x.push("This is a browser extension environment."),(0,Pe.zI)()||x.push("Cookies are not available."),x.length>0){const V=x.map((Ee,qe)=>`(${qe+1}) ${Ee}`).join(" "),Y=as.create("invalid-analytics-context",{errorInfo:V});hi.warn(Y.message)}}();const Ee=x.options.appId;if(!Ee)throw as.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw as.create("no-api-key");hi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ea[Ee])throw as.create("already-exists",{id:Ee});if(!z){!function Fa(x){let V=[];Array.isArray(window[x])?V=window[x]:window[x]=V}(A);const{wrappedGtag:nt,gtagCore:kt}=function _s(x,V,Y,Ee,qe){let nt=function(...kt){window[Ee].push(arguments)};return window[qe]&&"function"==typeof window[qe]&&(nt=window[qe]),window[qe]=function Ws(x,V,Y,Ee){function nt(){return nt=(0,S.Z)(function*(kt,...mn){try{if("event"===kt){const[Xt,wn]=mn;yield function Iu(x,V,Y,Ee,qe){return Bo.apply(this,arguments)}(x,V,Y,Xt,wn)}else if("config"===kt){const[Xt,wn]=mn;yield function Bt(x,V,Y,Ee,qe,nt){return tr.apply(this,arguments)}(x,V,Y,Ee,Xt,wn)}else if("consent"===kt){const[Xt]=mn;x("consent","update",Xt)}else if("get"===kt){const[Xt,wn,_r]=mn;x("get",Xt,wn,_r)}else if("set"===kt){const[Xt]=mn;x("set",Xt)}else x(kt,...mn)}catch(Xt){hi.error(Xt)}}),nt.apply(this,arguments)}return function qe(kt){return nt.apply(this,arguments)}}(nt,x,V,Y),{gtagCore:nt,wrappedGtag:window[qe]}}(ea,El,Ku,A,"gtag");P=nt,b=kt,z=!0}return ea[Ee]=function wa(x,V,Y,Ee,qe,nt,kt){return Jo.apply(this,arguments)}(x,El,Ku,V,b,A,Y),new lh(x)}function _n(){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,S.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}const Ua="@firebase/analytics";!function Pc(){(0,fe._registerComponent)(new Ge.wA(qi,(V,{options:Y})=>tt(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),Y),"PUBLIC")),(0,fe._registerComponent)(new Ge.wA("analytics-internal",function x(V){try{const Y=V.getProvider(qi).getImmediate();return{logEvent:(Ee,qe,nt)=>function ta(x,V,Y,Ee){x=(0,Pe.m9)(x),function Va(x,V,Y,Ee,qe){return _l.apply(this,arguments)}(P,ea[x.app.options.appId],V,Y,Ee).catch(qe=>hi.error(qe))}(Y,Ee,qe,nt)}}catch(Y){throw as.create("interop-component-reg-failed",{reason:Y})}},"PRIVATE")),(0,fe.registerVersion)(Ua,"0.10.0"),(0,fe.registerVersion)(Ua,"0.10.0","esm2017")}();var Zs=U(1954),Zh=U(2631);const wd=new class Ba extends Zh.v{}(class Ia extends Zs.o{constructor(V,Y){super(V,Y),this.scheduler=V,this.work=Y}schedule(V,Y=0){return Y>0?super.schedule(V,Y):(this.delay=Y,this.state=V,this.scheduler.flush(this),this)}execute(V,Y){return Y>0||this.closed?super.execute(V,Y):this._execute(V,Y)}requestAsyncId(V,Y,Ee=0){return null!=Ee&&Ee>0||null==Ee&&this.delay>0?super.requestAsyncId(V,Y,Ee):(V.flush(this),0)}});var ja=U(6321),ch=U(9397),Jl=U(3093),Cl=U(5137);const Oc=new w.GfV("7.6.1"),kc="__angularfire_symbol__analyticsIsSupportedValue",Du="__angularfire_symbol__analyticsIsSupported",dh="__angularfire_symbol__remoteConfigIsSupportedValue",Cd="__angularfire_symbol__remoteConfigIsSupported",Il="__angularfire_symbol__messagingIsSupportedValue",ec="__angularfire_symbol__messagingIsSupported";function Yh(x,V,Y){if(V){if(1===V.length)return V[0];const nt=V.filter(kt=>kt.app===Y);if(1===nt.length)return nt[0]}return Y.container.getProvider(x).getImmediate({optional:!0})}globalThis[Du]||(globalThis[Du]=_n().then(x=>globalThis[kc]=x).catch(()=>globalThis[kc]=!1)),globalThis[ec]||(globalThis[ec]=lt().then(x=>globalThis[Il]=x).catch(()=>globalThis[Il]=!1)),globalThis[Cd]||(globalThis[Cd]=Do().then(x=>globalThis[dh]=x).catch(()=>globalThis[dh]=!1));const Fc=(x,V)=>{const Y=V?[V]:(0,ne.C6)(),Ee=[];return Y.forEach(qe=>{qe.container.getProvider(x).instances.forEach(kt=>{Ee.includes(kt)||Ee.push(kt)})}),Ee};function Qu(){}class Ha{constructor(V,Y=wd){this.zone=V,this.delegate=Y}now(){return this.delegate.now()}schedule(V,Y,Ee){const qe=this.zone;return this.delegate.schedule(function(kt){qe.runGuarded(()=>{V.apply(this,[kt])})},Y,Ee)}}class hh{constructor(V){this.zone=V,this.task=null}call(V,Y){const Ee=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qu,{},Qu,Qu)),Y.pipe((0,ch.b)({next:Ee,complete:Ee,error:Ee})).subscribe(V).add(Ee)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let tp=(()=>{class x{constructor(Y){this.ngZone=Y,this.outsideAngular=Y.runOutsideAngular(()=>new Ha(Zone.current)),this.insideAngular=Y.run(()=>new Ha(Zone.current,ja.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(Y){return new(Y||x)(w.LFG(w.R0b))},x.\u0275prov=w.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ba(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Da(x){return x.pipe((0,Jl.Q)(ba().outsideAngular))}function ri(x){return ba(),function Ta(x){return function(Y){return(Y=Y.lift(new hh(x.ngZone))).pipe((0,Cl.R)(x.outsideAngular),(0,Jl.Q)(x.insideAngular))}}(ba())(x)}},9058:(nn,it,U)=>{U.d(it,{$s:()=>vr,BH:()=>Be,DV:()=>jn,Dv:()=>Yi,G6:()=>xe,GJ:()=>fn,L:()=>$e,LL:()=>ht,Pz:()=>et,Sg:()=>gt,UG:()=>ot,UI:()=>ws,US:()=>Ge,Wj:()=>an,Wl:()=>pn,Yr:()=>Jn,ZB:()=>Re,ZR:()=>mt,aH:()=>_e,b$:()=>Cn,cI:()=>Nn,dS:()=>zi,eu:()=>Le,g5:()=>S,gK:()=>rr,gQ:()=>An,h$:()=>Ke,hl:()=>ge,hu:()=>ne,jU:()=>Ot,lb:()=>Ar,m9:()=>Qn,ne:()=>cr,p$:()=>ye,pd:()=>zn,r3:()=>Sn,ru:()=>Yt,tV:()=>pe,uI:()=>Xe,ug:()=>vi,vZ:()=>ji,w1:()=>pr,w9:()=>ur,xO:()=>yi,xb:()=>or,z$:()=>vt,zI:()=>He,zd:()=>gn});const w={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ne=function(Oe,re){if(!Oe)throw S(re)},S=function(Oe){return new Error("Firebase Database ("+w.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Oe)},fe=function(Oe){const re=[];let ae=0;for(let ie=0;ie<Oe.length;ie++){let le=Oe.charCodeAt(ie);le<128?re[ae++]=le:le<2048?(re[ae++]=le>>6|192,re[ae++]=63&le|128):55296==(64512&le)&&ie+1<Oe.length&&56320==(64512&Oe.charCodeAt(ie+1))?(le=65536+((1023&le)<<10)+(1023&Oe.charCodeAt(++ie)),re[ae++]=le>>18|240,re[ae++]=le>>12&63|128,re[ae++]=le>>6&63|128,re[ae++]=63&le|128):(re[ae++]=le>>12|224,re[ae++]=le>>6&63|128,re[ae++]=63&le|128)}return re},Ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Oe,re){if(!Array.isArray(Oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ae=re?this.byteToCharMapWebSafe_:this.byteToCharMap_,ie=[];for(let le=0;le<Oe.length;le+=3){const Ze=Oe[le],Dt=le+1<Oe.length,qt=Dt?Oe[le+1]:0,Pn=le+2<Oe.length,hn=Pn?Oe[le+2]:0;let kr=(15&qt)<<2|hn>>6,Je=63&hn;Pn||(Je=64,Dt||(kr=64)),ie.push(ae[Ze>>2],ae[(3&Ze)<<4|qt>>4],ae[kr],ae[Je])}return ie.join("")},encodeString(Oe,re){return this.HAS_NATIVE_SUPPORT&&!re?btoa(Oe):this.encodeByteArray(fe(Oe),re)},decodeString(Oe,re){return this.HAS_NATIVE_SUPPORT&&!re?atob(Oe):function(Oe){const re=[];let ae=0,ie=0;for(;ae<Oe.length;){const le=Oe[ae++];if(le<128)re[ie++]=String.fromCharCode(le);else if(le>191&&le<224){const Ze=Oe[ae++];re[ie++]=String.fromCharCode((31&le)<<6|63&Ze)}else if(le>239&&le<365){const Pn=((7&le)<<18|(63&Oe[ae++])<<12|(63&Oe[ae++])<<6|63&Oe[ae++])-65536;re[ie++]=String.fromCharCode(55296+(Pn>>10)),re[ie++]=String.fromCharCode(56320+(1023&Pn))}else{const Ze=Oe[ae++],Dt=Oe[ae++];re[ie++]=String.fromCharCode((15&le)<<12|(63&Ze)<<6|63&Dt)}}return re.join("")}(this.decodeStringToByteArray(Oe,re))},decodeStringToByteArray(Oe,re){this.init_();const ae=re?this.charToByteMapWebSafe_:this.charToByteMap_,ie=[];for(let le=0;le<Oe.length;){const Ze=ae[Oe.charAt(le++)],qt=le<Oe.length?ae[Oe.charAt(le)]:0;++le;const hn=le<Oe.length?ae[Oe.charAt(le)]:64;++le;const Ln=le<Oe.length?ae[Oe.charAt(le)]:64;if(++le,null==Ze||null==qt||null==hn||null==Ln)throw new Ve;ie.push(Ze<<2|qt>>4),64!==hn&&(ie.push(qt<<4&240|hn>>2),64!==Ln&&ie.push(hn<<6&192|Ln))}return ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Oe=0;Oe<this.ENCODED_VALS.length;Oe++)this.byteToCharMap_[Oe]=this.ENCODED_VALS.charAt(Oe),this.charToByteMap_[this.byteToCharMap_[Oe]]=Oe,this.byteToCharMapWebSafe_[Oe]=this.ENCODED_VALS_WEBSAFE.charAt(Oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Oe]]=Oe,Oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Oe)]=Oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Oe)]=Oe)}}};class Ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ke=function(Oe){const re=fe(Oe);return Ge.encodeByteArray(re,!0)},$e=function(Oe){return Ke(Oe).replace(/\./g,"")},pe=function(Oe){try{return Ge.decodeString(Oe,!0)}catch(re){console.error("base64Decode failed: ",re)}return null};function ye(Oe){return Re(void 0,Oe)}function Re(Oe,re){if(!(re instanceof Object))return re;switch(re.constructor){case Date:return new Date(re.getTime());case Object:void 0===Oe&&(Oe={});break;case Array:Oe=[];break;default:return re}for(const ae in re)!re.hasOwnProperty(ae)||!It(ae)||(Oe[ae]=Re(Oe[ae],re[ae]));return Oe}function It(Oe){return"__proto__"!==Oe}const xt=()=>{try{return function yt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Oe=process.env.__FIREBASE_DEFAULTS__;return Oe?JSON.parse(Oe):void 0})()||(()=>{if(typeof document>"u")return;let Oe;try{Oe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const re=Oe&&pe(Oe[1]);return re&&JSON.parse(re)})()}catch(Oe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Oe}`)}},_e=()=>{var Oe;return null===(Oe=xt())||void 0===Oe?void 0:Oe.config},et=Oe=>{var re;return null===(re=xt())||void 0===re?void 0:re[`_${Oe}`]};class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((re,ae)=>{this.resolve=re,this.reject=ae})}wrapCallback(re){return(ae,ie)=>{ae?this.reject(ae):this.resolve(ie),"function"==typeof re&&(this.promise.catch(()=>{}),1===re.length?re(ae):re(ae,ie))}}}function gt(Oe,re){if(Oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ie=re||"demo-project",le=Oe.iat||0,Ze=Oe.sub||Oe.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Dt=Object.assign({iss:`https://securetoken.google.com/${ie}`,aud:ie,iat:le,exp:le+3600,auth_time:le,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},Oe);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(Dt)),""].join(".")}function vt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function ot(){var Oe;const re=null===(Oe=xt())||void 0===Oe?void 0:Oe.forceEnvironment;if("node"===re)return!0;if("browser"===re)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ot(){return"object"==typeof self&&self.self===self}function Yt(){const Oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Oe&&void 0!==Oe.id}function Cn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pr(){const Oe=vt();return Oe.indexOf("MSIE ")>=0||Oe.indexOf("Trident/")>=0}function Jn(){return!0===w.NODE_CLIENT||!0===w.NODE_ADMIN}function xe(){return!ot()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ge(){try{return"object"==typeof indexedDB}catch{return!1}}function Le(){return new Promise((Oe,re)=>{try{let ae=!0;const ie="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(ie);le.onsuccess=()=>{le.result.close(),ae||self.indexedDB.deleteDatabase(ie),Oe(!0)},le.onupgradeneeded=()=>{ae=!1},le.onerror=()=>{var Ze;re((null===(Ze=le.error)||void 0===Ze?void 0:Ze.message)||"")}}catch(ae){re(ae)}})}function He(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class mt extends Error{constructor(re,ae,ie){super(ae),this.code=re,this.customData=ie,this.name="FirebaseError",Object.setPrototypeOf(this,mt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ht.prototype.create)}}class ht{constructor(re,ae,ie){this.service=re,this.serviceName=ae,this.errors=ie}create(re,...ae){const ie=ae[0]||{},le=`${this.service}/${re}`,Ze=this.errors[re],Dt=Ze?function jt(Oe,re){return Oe.replace(Jt,(ae,ie)=>{const le=re[ie];return null!=le?String(le):`<${ie}?>`})}(Ze,ie):"Error";return new mt(le,`${this.serviceName}: ${Dt} (${le}).`,ie)}}const Jt=/\{\$([^}]+)}/g;function Nn(Oe){return JSON.parse(Oe)}function pn(Oe){return JSON.stringify(Oe)}const Vn=function(Oe){let re={},ae={},ie={},le="";try{const Ze=Oe.split(".");re=Nn(pe(Ze[0])||""),ae=Nn(pe(Ze[1])||""),le=Ze[2],ie=ae.d||{},delete ae.d}catch{}return{header:re,claims:ae,data:ie,signature:le}},ur=function(Oe){const ae=Vn(Oe).claims;return!!ae&&"object"==typeof ae&&ae.hasOwnProperty("iat")},fn=function(Oe){const re=Vn(Oe).claims;return"object"==typeof re&&!0===re.admin};function Sn(Oe,re){return Object.prototype.hasOwnProperty.call(Oe,re)}function jn(Oe,re){if(Object.prototype.hasOwnProperty.call(Oe,re))return Oe[re]}function or(Oe){for(const re in Oe)if(Object.prototype.hasOwnProperty.call(Oe,re))return!1;return!0}function ws(Oe,re,ae){const ie={};for(const le in Oe)Object.prototype.hasOwnProperty.call(Oe,le)&&(ie[le]=re.call(ae,Oe[le],le,Oe));return ie}function ji(Oe,re){if(Oe===re)return!0;const ae=Object.keys(Oe),ie=Object.keys(re);for(const le of ae){if(!ie.includes(le))return!1;const Ze=Oe[le],Dt=re[le];if(Kr(Ze)&&Kr(Dt)){if(!ji(Ze,Dt))return!1}else if(Ze!==Dt)return!1}for(const le of ie)if(!ae.includes(le))return!1;return!0}function Kr(Oe){return null!==Oe&&"object"==typeof Oe}function yi(Oe){const re=[];for(const[ae,ie]of Object.entries(Oe))Array.isArray(ie)?ie.forEach(le=>{re.push(encodeURIComponent(ae)+"="+encodeURIComponent(le))}):re.push(encodeURIComponent(ae)+"="+encodeURIComponent(ie));return re.length?"&"+re.join("&"):""}function gn(Oe){const re={};return Oe.replace(/^\?/,"").split("&").forEach(ie=>{if(ie){const[le,Ze]=ie.split("=");re[decodeURIComponent(le)]=decodeURIComponent(Ze)}}),re}function zn(Oe){const re=Oe.indexOf("?");if(!re)return"";const ae=Oe.indexOf("#",re);return Oe.substring(re,ae>0?ae:void 0)}class An{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let re=1;re<this.blockSize;++re)this.pad_[re]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(re,ae){ae||(ae=0);const ie=this.W_;if("string"==typeof re)for(let Ln=0;Ln<16;Ln++)ie[Ln]=re.charCodeAt(ae)<<24|re.charCodeAt(ae+1)<<16|re.charCodeAt(ae+2)<<8|re.charCodeAt(ae+3),ae+=4;else for(let Ln=0;Ln<16;Ln++)ie[Ln]=re[ae]<<24|re[ae+1]<<16|re[ae+2]<<8|re[ae+3],ae+=4;for(let Ln=16;Ln<80;Ln++){const kr=ie[Ln-3]^ie[Ln-8]^ie[Ln-14]^ie[Ln-16];ie[Ln]=4294967295&(kr<<1|kr>>>31)}let hn,Ut,le=this.chain_[0],Ze=this.chain_[1],Dt=this.chain_[2],qt=this.chain_[3],Pn=this.chain_[4];for(let Ln=0;Ln<80;Ln++){Ln<40?Ln<20?(hn=qt^Ze&(Dt^qt),Ut=1518500249):(hn=Ze^Dt^qt,Ut=1859775393):Ln<60?(hn=Ze&Dt|qt&(Ze|Dt),Ut=2400959708):(hn=Ze^Dt^qt,Ut=3395469782);const kr=(le<<5|le>>>27)+hn+Pn+Ut+ie[Ln]&4294967295;Pn=qt,qt=Dt,Dt=4294967295&(Ze<<30|Ze>>>2),Ze=le,le=kr}this.chain_[0]=this.chain_[0]+le&4294967295,this.chain_[1]=this.chain_[1]+Ze&4294967295,this.chain_[2]=this.chain_[2]+Dt&4294967295,this.chain_[3]=this.chain_[3]+qt&4294967295,this.chain_[4]=this.chain_[4]+Pn&4294967295}update(re,ae){if(null==re)return;void 0===ae&&(ae=re.length);const ie=ae-this.blockSize;let le=0;const Ze=this.buf_;let Dt=this.inbuf_;for(;le<ae;){if(0===Dt)for(;le<=ie;)this.compress_(re,le),le+=this.blockSize;if("string"==typeof re){for(;le<ae;)if(Ze[Dt]=re.charCodeAt(le),++Dt,++le,Dt===this.blockSize){this.compress_(Ze),Dt=0;break}}else for(;le<ae;)if(Ze[Dt]=re[le],++Dt,++le,Dt===this.blockSize){this.compress_(Ze),Dt=0;break}}this.inbuf_=Dt,this.total_+=ae}digest(){const re=[];let ae=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let le=this.blockSize-1;le>=56;le--)this.buf_[le]=255&ae,ae/=256;this.compress_(this.buf_);let ie=0;for(let le=0;le<5;le++)for(let Ze=24;Ze>=0;Ze-=8)re[ie]=this.chain_[le]>>Ze&255,++ie;return re}}function cr(Oe,re){const ae=new Or(Oe,re);return ae.subscribe.bind(ae)}class Or{constructor(re,ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ae,this.task.then(()=>{re(this)}).catch(ie=>{this.error(ie)})}next(re){this.forEachObserver(ae=>{ae.next(re)})}error(re){this.forEachObserver(ae=>{ae.error(re)}),this.close(re)}complete(){this.forEachObserver(re=>{re.complete()}),this.close()}subscribe(re,ae,ie){let le;if(void 0===re&&void 0===ae&&void 0===ie)throw new Error("Missing Observer.");le=function Yn(Oe,re){if("object"!=typeof Oe||null===Oe)return!1;for(const ae of re)if(ae in Oe&&"function"==typeof Oe[ae])return!0;return!1}(re,["next","error","complete"])?re:{next:re,error:ae,complete:ie},void 0===le.next&&(le.next=Sr),void 0===le.error&&(le.error=Sr),void 0===le.complete&&(le.complete=Sr);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch{}}),this.observers.push(le),Ze}unsubscribeOne(re){void 0===this.observers||void 0===this.observers[re]||(delete this.observers[re],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(re){if(!this.finalized)for(let ae=0;ae<this.observers.length;ae++)this.sendOne(ae,re)}sendOne(re,ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[re])try{ae(this.observers[re])}catch(ie){typeof console<"u"&&console.error&&console.error(ie)}})}close(re){this.finalized||(this.finalized=!0,void 0!==re&&(this.finalError=re),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sr(){}const Yi=function(Oe,re,ae,ie){let le;if(ie<re?le="at least "+re:ie>ae&&(le=0===ae?"none":"no more than "+ae),le)throw new Error(Oe+" failed: Was called with "+ie+(1===ie?" argument.":" arguments.")+" Expects "+le+".")};function rr(Oe,re){return`${Oe} failed: ${re} argument `}function an(Oe,re,ae,ie){if((!ie||ae)&&"function"!=typeof ae)throw new Error(rr(Oe,re)+"must be a valid function.")}function Ar(Oe,re,ae,ie){if((!ie||ae)&&("object"!=typeof ae||null===ae))throw new Error(rr(Oe,re)+"must be a valid context object.")}const zi=function(Oe){const re=[];let ae=0;for(let ie=0;ie<Oe.length;ie++){let le=Oe.charCodeAt(ie);if(le>=55296&&le<=56319){const Ze=le-55296;ie++,ne(ie<Oe.length,"Surrogate pair missing trail surrogate."),le=65536+(Ze<<10)+(Oe.charCodeAt(ie)-56320)}le<128?re[ae++]=le:le<2048?(re[ae++]=le>>6|192,re[ae++]=63&le|128):le<65536?(re[ae++]=le>>12|224,re[ae++]=le>>6&63|128,re[ae++]=63&le|128):(re[ae++]=le>>18|240,re[ae++]=le>>12&63|128,re[ae++]=le>>6&63|128,re[ae++]=63&le|128)}return re},vi=function(Oe){let re=0;for(let ae=0;ae<Oe.length;ae++){const ie=Oe.charCodeAt(ae);ie<128?re++:ie<2048?re+=2:ie>=55296&&ie<=56319?(re+=4,ae++):re+=3}return re},Vr=1e3,Dn=2,Br=144e5,nr=.5;function vr(Oe,re=Vr,ae=Dn){const ie=re*Math.pow(ae,Oe),le=Math.round(nr*ie*(Math.random()-.5)*2);return Math.min(Br,ie+le)}function Qn(Oe){return Oe&&Oe._delegate?Oe._delegate:Oe}},7764:(nn,it,U)=>{U.r(it),U.d(it,{AuthModule:()=>Js});var w=U(6814),ne=U(8113),S=U(5879),fe=U(5148);let Pe=(()=>{class H{authService;constructor(L){this.authService=L}static \u0275fac=function(Q){return new(Q||H)(S.Y36(fe.e))};static \u0275cmp=S.Xpm({type:H,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/auth/login",1,"redirect"]],template:function(Q,Me){if(1&Q){const cn=S.EpF();S.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),S._uU(4,"Reset Password"),S.qZA(),S.TgZ(5,"p",3),S._uU(6," Please enter your email address to request a password reset. "),S.qZA(),S.TgZ(7,"div",4),S._UZ(8,"input",5,6),S.qZA(),S.TgZ(10,"div",4)(11,"input",7),S.NdJ("click",function(){S.CHM(cn);const os=S.MAs(9);return S.KtG(Me.authService.ForgotPassword(os.value))}),S.qZA()()(),S.TgZ(12,"div",8)(13,"span"),S._uU(14,"Go back to ? "),S.TgZ(15,"span",9),S._uU(16,"Log In"),S.qZA()()()()()}},dependencies:[ne.rH]})}return H})(),Ge=(()=>{class H{authService;constructor(L){this.authService=L}static \u0275fac=function(Q){return new(Q||H)(S.Y36(fe.e))};static \u0275cmp=S.Xpm({type:H,selectors:[["app-login"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Email Address","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/auth/forgot-password"],[1,"redirectToLogin"],["routerLink","/auth/register",1,"redirect"]],template:function(Q,Me){if(1&Q){const cn=S.EpF();S.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),S._uU(4,"Sign In"),S.qZA(),S.TgZ(5,"div",3),S._UZ(6,"input",4,5),S.qZA(),S.TgZ(8,"div",3),S._UZ(9,"input",6,7),S.qZA(),S.TgZ(11,"div",3)(12,"input",8),S.NdJ("click",function(){S.CHM(cn);const os=S.MAs(7),di=S.MAs(10);return S.KtG(Me.authService.SignIn(os.value,di.value))}),S.qZA()(),S.TgZ(13,"div",3)(14,"span",9)(15,"span",10),S._uU(16,"Or"),S.qZA()()(),S.TgZ(17,"div",11)(18,"span",12),S._uU(19,"Forgot Password?"),S.qZA()()(),S.TgZ(20,"div",13)(21,"span"),S._uU(22,"Don't have an account?"),S.TgZ(23,"span",14),S._uU(24," Sign Up"),S.qZA()()()()()}},dependencies:[ne.rH]})}return H})();var Ve=U(2459),Ke=U(9315),$e=U(7398);let pe=(()=>{class H{constructor(L,Q){this._renderer=L,this._elementRef=Q,this.onChange=Me=>{},this.onTouched=()=>{}}setProperty(L,Q){this._renderer.setProperty(this._elementRef.nativeElement,L,Q)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}static#e=this.\u0275fac=function(Q){return new(Q||H)(S.Y36(S.Qsj),S.Y36(S.SBq))};static#t=this.\u0275dir=S.lG2({type:H})}return H})(),ye=(()=>{class H extends pe{static#e=this.\u0275fac=function(){let L;return function(Me){return(L||(L=S.n5z(H)))(Me||H)}}();static#t=this.\u0275dir=S.lG2({type:H,features:[S.qOj]})}return H})();const Re=new S.OlP("NgValueAccessor"),$t={provide:Re,useExisting:(0,S.Gpc)(()=>xt),multi:!0},Vt=new S.OlP("CompositionEventMode");let xt=(()=>{class H extends pe{constructor(L,Q,Me){super(L,Q),this._compositionMode=Me,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Tt(){const H=(0,w.q)()?(0,w.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(L){this.setProperty("value",L??"")}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}static#e=this.\u0275fac=function(Q){return new(Q||H)(S.Y36(S.Qsj),S.Y36(S.SBq),S.Y36(Vt,8))};static#t=this.\u0275dir=S.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Q,Me){1&Q&&S.NdJ("input",function(Fn){return Me._handleInput(Fn.target.value)})("blur",function(){return Me.onTouched()})("compositionstart",function(){return Me._compositionStart()})("compositionend",function(Fn){return Me._compositionEnd(Fn.target.value)})},features:[S._Bn([$t]),S.qOj]})}return H})();function ze(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}function Lt(H){return null!=H&&"number"==typeof H.length}const _e=new S.OlP("NgValidators"),et=new S.OlP("NgAsyncValidators"),Be=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gt{static min(K){return function vt(H){return K=>{if(ze(K.value)||ze(H))return null;const L=parseFloat(K.value);return!isNaN(L)&&L<H?{min:{min:H,actual:K.value}}:null}}(K)}static max(K){return function Xe(H){return K=>{if(ze(K.value)||ze(H))return null;const L=parseFloat(K.value);return!isNaN(L)&&L>H?{max:{max:H,actual:K.value}}:null}}(K)}static required(K){return ot(K)}static requiredTrue(K){return function Ot(H){return!0===H.value?null:{required:!0}}(K)}static email(K){return function Yt(H){return ze(H.value)||Be.test(H.value)?null:{email:!0}}(K)}static minLength(K){return function Cn(H){return K=>ze(K.value)||!Lt(K.value)?null:K.value.length<H?{minlength:{requiredLength:H,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function kn(H){return K=>Lt(K.value)&&K.value.length>H?{maxlength:{requiredLength:H,actualLength:K.value.length}}:null}(K)}static pattern(K){return function pr(H){if(!H)return Nt;let K,L;return"string"==typeof H?(L="","^"!==H.charAt(0)&&(L+="^"),L+=H,"$"!==H.charAt(H.length-1)&&(L+="$"),K=new RegExp(L)):(L=H.toString(),K=H),Q=>{if(ze(Q.value))return null;const Me=Q.value;return K.test(Me)?null:{pattern:{requiredPattern:L,actualValue:Me}}}}(K)}static nullValidator(K){return null}static compose(K){return mt(K)}static composeAsync(K){return jt(K)}}function ot(H){return ze(H.value)?{required:!0}:null}function Nt(H){return null}function Jn(H){return null!=H}function xe(H){return(0,S.QGY)(H)?(0,Ve.D)(H):H}function ge(H){let K={};return H.forEach(L=>{K=null!=L?{...K,...L}:K}),0===Object.keys(K).length?null:K}function Le(H,K){return K.map(L=>L(H))}function rt(H){return H.map(K=>function He(H){return!H.validate}(K)?K:L=>K.validate(L))}function mt(H){if(!H)return null;const K=H.filter(Jn);return 0==K.length?null:function(L){return ge(Le(L,K))}}function ht(H){return null!=H?mt(rt(H)):null}function jt(H){if(!H)return null;const K=H.filter(Jn);return 0==K.length?null:function(L){const Q=Le(L,K).map(xe);return(0,Ke.D)(Q).pipe((0,$e.U)(ge))}}function Jt(H){return null!=H?jt(rt(H)):null}function Nn(H,K){return null===H?[K]:Array.isArray(H)?[...H,K]:[H,K]}function pn(H){return H._rawValidators}function Vn(H){return H._rawAsyncValidators}function dn(H){return H?Array.isArray(H)?H:[H]:[]}function Bn(H,K){return Array.isArray(H)?H.includes(K):H===K}function ur(H,K){const L=dn(K);return dn(H).forEach(Me=>{Bn(L,Me)||L.push(Me)}),L}function fn(H,K){return dn(K).filter(L=>!Bn(H,L))}class Sn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=ht(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=Jt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K=void 0){this.control&&this.control.reset(K)}hasError(K,L){return!!this.control&&this.control.hasError(K,L)}getError(K,L){return this.control?this.control.getError(K,L):null}}class jn extends Sn{get formDirective(){return null}get path(){return null}}class or extends Sn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ws{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ai=(()=>{class H extends ws{constructor(L){super(L)}static#e=this.\u0275fac=function(Q){return new(Q||H)(S.Y36(or,2))};static#t=this.\u0275dir=S.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Q,Me){2&Q&&S.ekj("ng-untouched",Me.isUntouched)("ng-touched",Me.isTouched)("ng-pristine",Me.isPristine)("ng-dirty",Me.isDirty)("ng-valid",Me.isValid)("ng-invalid",Me.isInvalid)("ng-pending",Me.isPending)},features:[S.qOj]})}return H})(),yi=(()=>{class H extends ws{constructor(L){super(L)}static#e=this.\u0275fac=function(Q){return new(Q||H)(S.Y36(jn,10))};static#t=this.\u0275dir=S.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Q,Me){2&Q&&S.ekj("ng-untouched",Me.isUntouched)("ng-touched",Me.isTouched)("ng-pristine",Me.isPristine)("ng-dirty",Me.isDirty)("ng-valid",Me.isValid)("ng-invalid",Me.isInvalid)("ng-pending",Me.isPending)("ng-submitted",Me.isSubmitted)},features:[S.qOj]})}return H})();const Dn="VALID",Br="INVALID",nr="PENDING",vr="DISABLED";function Hn(H){return(re(H)?H.validators:H)||null}function Qn(H,K){return(re(K)?K.asyncValidators:H)||null}function re(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}function ae(H,K,L){const Q=H.controls;if(!(K?Object.keys(Q):Q).length)throw new S.vHH(1e3,"");if(!Q[L])throw new S.vHH(1001,"")}function ie(H,K,L){H._forEachChild((Q,Me)=>{if(void 0===L[Me])throw new S.vHH(1002,"")})}class le{constructor(K,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(K),this._assignAsyncValidators(L)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===Dn}get invalid(){return this.status===Br}get pending(){return this.status==nr}get disabled(){return this.status===vr}get enabled(){return this.status!==vr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._assignValidators(K)}setAsyncValidators(K){this._assignAsyncValidators(K)}addValidators(K){this.setValidators(ur(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(ur(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(fn(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(fn(K,this._rawAsyncValidators))}hasValidator(K){return Bn(this._rawValidators,K)}hasAsyncValidator(K){return Bn(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=nr,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const L=this._parentMarkedDirty(K.onlySelf);this.status=vr,this.errors=null,this._forEachChild(Q=>{Q.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:L}),this._onDisabledChange.forEach(Q=>Q(!0))}enable(K={}){const L=this._parentMarkedDirty(K.onlySelf);this.status=Dn,this._forEachChild(Q=>{Q.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:L}),this._onDisabledChange.forEach(Q=>Q(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dn||this.status===nr)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vr:Dn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=nr,this._hasOwnPendingAsyncValidator=!0;const L=xe(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(Q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Q,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,L={}){this.errors=K,this._updateControlsErrors(!1!==L.emitEvent)}get(K){let L=K;return null==L||(Array.isArray(L)||(L=L.split(".")),0===L.length)?null:L.reduce((Q,Me)=>Q&&Q._find(Me),this)}getError(K,L){const Q=L?this.get(L):this;return Q&&Q.errors?Q.errors[K]:null}hasError(K,L){return!!this.getError(K,L)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new S.vpe,this.statusChanges=new S.vpe}_calculateStatus(){return this._allControlsDisabled()?vr:this.errors?Br:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nr)?nr:this._anyControlsHaveStatus(Br)?Br:Dn}_anyControlsHaveStatus(K){return this._anyControls(L=>L.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){re(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}_assignValidators(K){this._rawValidators=Array.isArray(K)?K.slice():K,this._composedValidatorFn=function Qr(H){return Array.isArray(H)?ht(H):H||null}(this._rawValidators)}_assignAsyncValidators(K){this._rawAsyncValidators=Array.isArray(K)?K.slice():K,this._composedAsyncValidatorFn=function Oe(H){return Array.isArray(H)?Jt(H):H||null}(this._rawAsyncValidators)}}class Ze extends le{constructor(K,L,Q){super(Hn(L),Qn(Q,L)),this.controls=K,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,L){return this.controls[K]?this.controls[K]:(this.controls[K]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(K,L,Q={}){this.registerControl(K,L),this.updateValueAndValidity({emitEvent:Q.emitEvent}),this._onCollectionChange()}removeControl(K,L={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(K,L,Q={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],L&&this.registerControl(K,L),this.updateValueAndValidity({emitEvent:Q.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,L={}){ie(this,0,K),Object.keys(K).forEach(Q=>{ae(this,!0,Q),this.controls[Q].setValue(K[Q],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(K,L={}){null!=K&&(Object.keys(K).forEach(Q=>{const Me=this.controls[Q];Me&&Me.patchValue(K[Q],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(K={},L={}){this._forEachChild((Q,Me)=>{Q.reset(K[Me],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(K,L,Q)=>(K[Q]=L.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(L,Q)=>!!Q._syncPendingControls()||L);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(L=>{const Q=this.controls[L];Q&&K(Q,L)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[L,Q]of Object.entries(this.controls))if(this.contains(L)&&K(Q))return!0;return!1}_reduceValue(){return this._reduceChildren({},(L,Q,Me)=>((Q.enabled||this.disabled)&&(L[Me]=Q.value),L))}_reduceChildren(K,L){let Q=K;return this._forEachChild((Me,cn)=>{Q=L(Q,Me,cn)}),Q}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}class Pn extends Ze{}const Ut=new S.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ln}),Ln="always";function Je(H,K,L=Ln){Ne(H,K),K.valueAccessor.writeValue(H.value),(H.disabled||"always"===L)&&K.valueAccessor.setDisabledState?.(H.disabled),function Et(H,K){K.valueAccessor.registerOnChange(L=>{H._pendingValue=L,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&Zt(H,K)})}(H,K),function Mn(H,K){const L=(Q,Me)=>{K.valueAccessor.writeValue(Q),Me&&K.viewToModelUpdate(Q)};H.registerOnChange(L),K._registerOnDestroy(()=>{H._unregisterOnChange(L)})}(H,K),function ln(H,K){K.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&Zt(H,K),"submit"!==H.updateOn&&H.markAsTouched()})}(H,K),function Te(H,K){if(K.valueAccessor.setDisabledState){const L=Q=>{K.valueAccessor.setDisabledState(Q)};H.registerOnDisabledChange(L),K._registerOnDestroy(()=>{H._unregisterOnDisabledChange(L)})}}(H,K)}function Fe(H,K,L=!0){const Q=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(Q),K.valueAccessor.registerOnTouched(Q)),Ye(H,K),H&&(K._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function je(H,K){H.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(K)})}function Ne(H,K){const L=pn(H);null!==K.validator?H.setValidators(Nn(L,K.validator)):"function"==typeof L&&H.setValidators([L]);const Q=Vn(H);null!==K.asyncValidator?H.setAsyncValidators(Nn(Q,K.asyncValidator)):"function"==typeof Q&&H.setAsyncValidators([Q]);const Me=()=>H.updateValueAndValidity();je(K._rawValidators,Me),je(K._rawAsyncValidators,Me)}function Ye(H,K){let L=!1;if(null!==H){if(null!==K.validator){const Me=pn(H);if(Array.isArray(Me)&&Me.length>0){const cn=Me.filter(Fn=>Fn!==K.validator);cn.length!==Me.length&&(L=!0,H.setValidators(cn))}}if(null!==K.asyncValidator){const Me=Vn(H);if(Array.isArray(Me)&&Me.length>0){const cn=Me.filter(Fn=>Fn!==K.asyncValidator);cn.length!==Me.length&&(L=!0,H.setAsyncValidators(cn))}}}const Q=()=>{};return je(K._rawValidators,Q),je(K._rawAsyncValidators,Q),L}function Zt(H,K){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function js(H,K){const L=H.indexOf(K);L>-1&&H.splice(L,1)}function Ci(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}const xs=class extends le{constructor(K=null,L,Q){super(Hn(L),Qn(Q,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),re(L)&&(L.nonNullable||L.initialValueIsDefault)&&(this.defaultValue=Ci(K)?K.value:K)}setValue(K,L={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(Q=>Q(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(K,L={}){this.setValue(K,L)}reset(K=this.defaultValue,L={}){this._applyFormState(K),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){js(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){js(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){Ci(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}};let zt=(()=>{class H{static#e=this.\u0275fac=function(Q){return new(Q||H)};static#t=this.\u0275dir=S.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return H})(),bt=(()=>{class H{static#e=this.\u0275fac=function(Q){return new(Q||H)};static#t=this.\u0275mod=S.oAB({type:H});static#n=this.\u0275inj=S.cJS({})}return H})();const Hr=new S.OlP("NgModelWithFormControlWarning"),ui={provide:jn,useExisting:(0,S.Gpc)(()=>Qi)};let Qi=(()=>{class H extends jn{constructor(L,Q,Me){super(),this.callSetDisabledState=Me,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new S.vpe,this._setValidators(L),this._setAsyncValidators(Q)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ye(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const Q=this.form.get(L.path);return Je(Q,L,this.callSetDisabledState),Q.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),Q}getControl(L){return this.form.get(L.path)}removeControl(L){Fe(L.control||null,L,!1),function so(H,K){const L=H.indexOf(K);L>-1&&H.splice(L,1)}(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,Q){this.form.get(L.path).setValue(Q)}onSubmit(L){return this.submitted=!0,function Mi(H,K){H._syncPendingControls(),K.forEach(L=>{const Q=L.control;"submit"===Q.updateOn&&Q._pendingChange&&(L.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(L),"dialog"===L?.target?.method}onReset(){this.resetForm()}resetForm(L=void 0){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const Q=L.control,Me=this.form.get(L.path);Q!==Me&&(Fe(Q||null,L),(H=>H instanceof xs)(Me)&&(Je(Me,L,this.callSetDisabledState),L.control=Me))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const Q=this.form.get(L.path);(function gr(H,K){Ne(H,K)})(Q,L),Q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const Q=this.form.get(L.path);Q&&function dr(H,K){return Ye(H,K)}(Q,L)&&Q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ne(this.form,this),this._oldForm&&Ye(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(Q){return new(Q||H)(S.Y36(_e,10),S.Y36(et,10),S.Y36(Ut,8))};static#t=this.\u0275dir=S.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(Q,Me){1&Q&&S.NdJ("submit",function(Fn){return Me.onSubmit(Fn)})("reset",function(){return Me.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[S._Bn([ui]),S.qOj,S.TTD]})}return H})();const li={provide:or,useExisting:(0,S.Gpc)(()=>Po)};let Po=(()=>{class H extends or{set isDisabled(L){}static#e=this._ngModelWarningSentOnce=!1;constructor(L,Q,Me,cn,Fn){super(),this._ngModelWarningConfig=Fn,this._added=!1,this.name=null,this.update=new S.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(Q),this._setAsyncValidators(Me),this.valueAccessor=function ls(H,K){if(!K)return null;let L,Q,Me;return Array.isArray(K),K.forEach(cn=>{cn.constructor===xt?L=cn:function wi(H){return Object.getPrototypeOf(H.constructor)===ye}(cn)?Q=cn:Me=cn}),Me||Q||L||null}(0,cn)}ngOnChanges(L){this._added||this._setUpControl(),function ts(H,K){if(!H.hasOwnProperty("model"))return!1;const L=H.model;return!!L.isFirstChange()||!Object.is(K,L.currentValue)}(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return function kr(H,K){return[...K.path,H]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(Q){return new(Q||H)(S.Y36(jn,13),S.Y36(_e,10),S.Y36(et,10),S.Y36(Re,10),S.Y36(Hr,8))};static#n=this.\u0275dir=S.lG2({type:H,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[S._Bn([li]),S.qOj,S.TTD]})}return H})();const ua={provide:Re,useExisting:(0,S.Gpc)(()=>Rs),multi:!0};function ys(H,K){return null==H?`${K}`:(K&&"object"==typeof K&&(K="Object"),`${H}: ${K}`.slice(0,50))}let Rs=(()=>{class H extends ye{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(L){this._compareWith=L}writeValue(L){this.value=L;const Me=ys(this._getOptionId(L),L);this.setProperty("value",Me)}registerOnChange(L){this.onChange=Q=>{this.value=this._getOptionValue(Q),L(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(L){for(const Q of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Q),L))return Q;return null}_getOptionValue(L){const Q=function xo(H){return H.split(":")[0]}(L);return this._optionMap.has(Q)?this._optionMap.get(Q):L}static#e=this.\u0275fac=function(){let L;return function(Me){return(L||(L=S.n5z(H)))(Me||H)}}();static#t=this.\u0275dir=S.lG2({type:H,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Q,Me){1&Q&&S.NdJ("change",function(Fn){return Me.onChange(Fn.target.value)})("blur",function(){return Me.onTouched()})},inputs:{compareWith:"compareWith"},features:[S._Bn([ua]),S.qOj]})}return H})(),bi=(()=>{class H{constructor(L,Q,Me){this._element=L,this._renderer=Q,this._select=Me,this._select&&(this.id=this._select._registerOption())}set ngValue(L){null!=this._select&&(this._select._optionMap.set(this.id,L),this._setElementValue(ys(this.id,L)),this._select.writeValue(this._select.value))}set value(L){this._setElementValue(L),this._select&&this._select.writeValue(this._select.value)}_setElementValue(L){this._renderer.setProperty(this._element.nativeElement,"value",L)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Q){return new(Q||H)(S.Y36(S.SBq),S.Y36(S.Qsj),S.Y36(Rs,9))};static#t=this.\u0275dir=S.lG2({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})();const Lr={provide:Re,useExisting:(0,S.Gpc)(()=>pi),multi:!0};function Io(H,K){return null==H?`${K}`:("string"==typeof K&&(K=`'${K}'`),K&&"object"==typeof K&&(K="Object"),`${H}: ${K}`.slice(0,50))}let pi=(()=>{class H extends ye{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(L){this._compareWith=L}writeValue(L){let Q;if(this.value=L,Array.isArray(L)){const Me=L.map(cn=>this._getOptionId(cn));Q=(cn,Fn)=>{cn._setSelected(Me.indexOf(Fn.toString())>-1)}}else Q=(Me,cn)=>{Me._setSelected(!1)};this._optionMap.forEach(Q)}registerOnChange(L){this.onChange=Q=>{const Me=[],cn=Q.selectedOptions;if(void 0!==cn){const Fn=cn;for(let os=0;os<Fn.length;os++){const Fo=this._getOptionValue(Fn[os].value);Me.push(Fo)}}else{const Fn=Q.options;for(let os=0;os<Fn.length;os++){const di=Fn[os];if(di.selected){const Fo=this._getOptionValue(di.value);Me.push(Fo)}}}this.value=Me,L(Me)}}_registerOption(L){const Q=(this._idCounter++).toString();return this._optionMap.set(Q,L),Q}_getOptionId(L){for(const Q of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Q)._value,L))return Q;return null}_getOptionValue(L){const Q=function oo(H){return H.split(":")[0]}(L);return this._optionMap.has(Q)?this._optionMap.get(Q)._value:L}static#e=this.\u0275fac=function(){let L;return function(Me){return(L||(L=S.n5z(H)))(Me||H)}}();static#t=this.\u0275dir=S.lG2({type:H,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Q,Me){1&Q&&S.NdJ("change",function(Fn){return Me.onChange(Fn.target)})("blur",function(){return Me.onTouched()})},inputs:{compareWith:"compareWith"},features:[S._Bn([Lr]),S.qOj]})}return H})(),bo=(()=>{class H{constructor(L,Q,Me){this._element=L,this._renderer=Q,this._select=Me,this._select&&(this.id=this._select._registerOption(this))}set ngValue(L){null!=this._select&&(this._value=L,this._setElementValue(Io(this.id,L)),this._select.writeValue(this._select.value))}set value(L){this._select?(this._value=L,this._setElementValue(Io(this.id,L)),this._select.writeValue(this._select.value)):this._setElementValue(L)}_setElementValue(L){this._renderer.setProperty(this._element.nativeElement,"value",L)}_setSelected(L){this._renderer.setProperty(this._element.nativeElement,"selected",L)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Q){return new(Q||H)(S.Y36(S.SBq),S.Y36(S.Qsj),S.Y36(pi,9))};static#t=this.\u0275dir=S.lG2({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})(),ns=(()=>{class H{constructor(){this._validator=Nt}ngOnChanges(L){if(this.inputName in L){const Q=this.normalizeInput(L[this.inputName].currentValue);this._enabled=this.enabled(Q),this._validator=this._enabled?this.createValidator(Q):Nt,this._onChange&&this._onChange()}}validate(L){return this._validator(L)}registerOnValidatorChange(L){this._onChange=L}enabled(L){return null!=L}static#e=this.\u0275fac=function(Q){return new(Q||H)};static#t=this.\u0275dir=S.lG2({type:H,features:[S.TTD]})}return H})();const Di={provide:_e,useExisting:(0,S.Gpc)(()=>bs),multi:!0};let bs=(()=>{class H extends ns{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=S.VuI,this.createValidator=L=>ot}enabled(L){return L}static#e=this.\u0275fac=function(){let L;return function(Me){return(L||(L=S.n5z(H)))(Me||H)}}();static#t=this.\u0275dir=S.lG2({type:H,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(Q,Me){2&Q&&S.uIk("required",Me._enabled?"":null)},inputs:{required:"required"},features:[S._Bn([Di]),S.qOj]})}return H})(),Oa=(()=>{class H{static#e=this.\u0275fac=function(Q){return new(Q||H)};static#t=this.\u0275mod=S.oAB({type:H});static#n=this.\u0275inj=S.cJS({imports:[bt]})}return H})();class mu extends le{constructor(K,L,Q){super(Hn(L),Qn(Q,L)),this.controls=K,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(K){return this.controls[this._adjustIndex(K)]}push(K,L={}){this.controls.push(K),this._registerControl(K),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(K,L,Q={}){this.controls.splice(K,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:Q.emitEvent})}removeAt(K,L={}){let Q=this._adjustIndex(K);Q<0&&(Q=0),this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),this.controls.splice(Q,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(K,L,Q={}){let Me=this._adjustIndex(K);Me<0&&(Me=0),this.controls[Me]&&this.controls[Me]._registerOnCollectionChange(()=>{}),this.controls.splice(Me,1),L&&(this.controls.splice(Me,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:Q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(K,L={}){ie(this,0,K),K.forEach((Q,Me)=>{ae(this,!1,Me),this.at(Me).setValue(Q,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(K,L={}){null!=K&&(K.forEach((Q,Me)=>{this.at(Me)&&this.at(Me).patchValue(Q,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(K=[],L={}){this._forEachChild((Q,Me)=>{Q.reset(K[Me],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(K=>K.getRawValue())}clear(K={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:K.emitEvent}))}_adjustIndex(K){return K<0?K+this.length:K}_syncPendingControls(){let K=this.controls.reduce((L,Q)=>!!Q._syncPendingControls()||L,!1);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){this.controls.forEach((L,Q)=>{K(L,Q)})}_updateValue(){this.value=this.controls.filter(K=>K.enabled||this.disabled).map(K=>K.value)}_anyControls(K){return this.controls.some(L=>L.enabled&&K(L))}_setUpControls(){this._forEachChild(K=>this._registerControl(K))}_allControlsDisabled(){for(const K of this.controls)if(K.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(K){K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)}_find(K){return this.at(K)??null}}function ko(H){return!!H&&(void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn)}let _u=(()=>{class H{constructor(){this.useNonNullable=!1}get nonNullable(){const L=new H;return L.useNonNullable=!0,L}group(L,Q=null){const Me=this._reduceControls(L);let cn={};return ko(Q)?cn=Q:null!==Q&&(cn.validators=Q.validator,cn.asyncValidators=Q.asyncValidator),new Ze(Me,cn)}record(L,Q=null){const Me=this._reduceControls(L);return new Pn(Me,Q)}control(L,Q,Me){let cn={};return this.useNonNullable?(ko(Q)?cn=Q:(cn.validators=Q,cn.asyncValidators=Me),new xs(L,{...cn,nonNullable:!0})):new xs(L,Q,Me)}array(L,Q,Me){const cn=L.map(Fn=>this._createControl(Fn));return new mu(cn,Q,Me)}_reduceControls(L){const Q={};return Object.keys(L).forEach(Me=>{Q[Me]=this._createControl(L[Me])}),Q}_createControl(L){return L instanceof xs||L instanceof le?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}static#e=this.\u0275fac=function(Q){return new(Q||H)};static#t=this.\u0275prov=S.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})(),vu=(()=>{class H{static withConfig(L){return{ngModule:H,providers:[{provide:Hr,useValue:L.warnOnNgModelWithFormControl??"always"},{provide:Ut,useValue:L.callSetDisabledState??Ln}]}}static#e=this.\u0275fac=function(Q){return new(Q||H)};static#t=this.\u0275mod=S.oAB({type:H});static#n=this.\u0275inj=S.cJS({imports:[Oa]})}return H})();var zo=U(9862);let ci=(()=>{class H{http;phoneCodesUrl="assets/countries/countries_phone_code.json";vatCodesUrl="assets/countries/countries_vat_code.json";constructor(L){this.http=L}getPhoneCodes(){return this.http.get(this.phoneCodesUrl)}getVATCodes(){return this.http.get(this.vatCodesUrl)}static \u0275fac=function(Q){return new(Q||H)(S.LFG(zo.eN))};static \u0275prov=S.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})();var $u=U(2496);function ar(H,K){if(1&H&&(S.TgZ(0,"option",23),S._uU(1),S.qZA()),2&H){const L=K.$implicit;S.Q6J("value",L.dial_code),S.xp6(1),S.AsE("",L.emoji," ",L.name,"")}}let eu=(()=>{class H{countriesService;fb;customerService;router;countriesPhone=[];countriesVAT=[];profileForm;user;constructor(L,Q,Me,cn){this.countriesService=L,this.fb=Q,this.customerService=Me,this.router=cn,this.profileForm=this.fb.group({displayName:["",gt.required],email:["",gt.required],countryCodePhone:["",gt.required],phone:["",gt.required],id_number:["",gt.required],address:["",gt.required],profilePicture:[null],idPicture:[null]})}ngOnInit(){this.loadUser(),this.getCodes()}loadUser(){const L=localStorage.getItem("user");L&&(this.user=JSON.parse(L),this.profileForm.patchValue({email:this.user.email}))}getCodes(){this.countriesService.getPhoneCodes().subscribe(L=>{this.countriesPhone=L}),this.countriesService.getVATCodes().subscribe(L=>{this.countriesVAT=L})}onSubmit(){if(this.profileForm.valid){console.log(this.profileForm.value);const Q={display_name:this.profileForm.get("displayName").value,email:this.profileForm.get("email").value,phone_number:this.profileForm.get("countryCodePhone").value+this.profileForm.get("phone").value,id_number:this.profileForm.get("id_number").value,billing_address:this.profileForm.get("address").value,shipping_address:this.profileForm.get("address").value,profile_picture:this.profileForm.get("profilePicture").value,id_file:this.profileForm.get("idPicture").value};this.customerService.createCustomer(Q).subscribe(Me=>{console.log(Me),alert("Customer Created Successfully"),this.router.navigate(["dashboard"])})}else alert("Something went wrong")}onProfilePictureChange(L){const Q=L.target.files[0];console.log(Q),this.profileForm.patchValue({profilePicture:Q})}onIdPictureChange(L){const Q=L.target.files[0];console.log(Q),this.profileForm.patchValue({idPicture:Q})}static \u0275fac=function(Q){return new(Q||H)(S.Y36(ci),S.Y36(_u),S.Y36($u.v),S.Y36(ne.F0))};static \u0275cmp=S.Xpm({type:H,selectors:[["app-onboarding"]],decls:41,vars:3,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6","mt-5","p-4","bg-light"],[3,"formGroup","submit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","placeholder","Your Name","formControlName","displayName","required","",1,"form-control"],["for","email",1,"form-label"],["id","email","readonly","",1,"form-control",2,"background-color","#e9ecef"],["for","phone",1,"form-label"],[1,"input-group"],["id","countryCodePhone","formControlName","countryCodePhone","required","",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["type","text","id","phone","placeholder","Your Phone Number","formControlName","phone","required","",1,"form-control"],["for","vat",1,"form-label"],["type","text","id","vat","placeholder","Your ID Number","formControlName","id_number","required","",1,"form-control"],["for","profilePicture",1,"form-label"],["type","file","id","profilePicture","accept","image/*",1,"form-control",3,"change"],["for","idPicture",1,"form-label"],["type","file","id","idPicture","accept","image/*",1,"form-control",3,"change"],["for","message",1,"form-label"],["id","message","rows","2","placeholder","Your Address","formControlName","address","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(Q,Me){1&Q&&(S.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),S._uU(4,"Let's build your customer or seller profile"),S.qZA(),S.TgZ(5,"form",3),S.NdJ("submit",function(){return Me.onSubmit()}),S.TgZ(6,"div",4)(7,"label",5),S._uU(8,"Name"),S.qZA(),S._UZ(9,"input",6),S.qZA(),S.TgZ(10,"div",4)(11,"label",7),S._uU(12,"Email"),S.qZA(),S.TgZ(13,"div",8),S._uU(14),S.qZA()(),S.TgZ(15,"div",4)(16,"label",9),S._uU(17,"Phone number"),S.qZA(),S.TgZ(18,"div",10)(19,"select",11),S.YNc(20,ar,2,3,"option",12),S.qZA(),S._UZ(21,"input",13),S.qZA()(),S.TgZ(22,"div",4)(23,"label",14),S._uU(24,"ID number"),S.qZA(),S.TgZ(25,"div",10),S._UZ(26,"input",15),S.qZA()(),S.TgZ(27,"div",4)(28,"label",16),S._uU(29,"Profile Picture"),S.qZA(),S.TgZ(30,"input",17),S.NdJ("change",function(Fn){return Me.onProfilePictureChange(Fn)}),S.qZA()(),S.TgZ(31,"div",4)(32,"label",18),S._uU(33,"Please upload your ID"),S.qZA(),S.TgZ(34,"input",19),S.NdJ("change",function(Fn){return Me.onIdPictureChange(Fn)}),S.qZA()(),S.TgZ(35,"div",4)(36,"label",20),S._uU(37,"Address"),S.qZA(),S._UZ(38,"textarea",21),S.qZA(),S.TgZ(39,"button",22),S._uU(40,"Submit"),S.qZA()()()()()),2&Q&&(S.xp6(5),S.Q6J("formGroup",Me.profileForm),S.xp6(9),S.Oqu(Me.user.email),S.xp6(6),S.Q6J("ngForOf",Me.countriesPhone))},dependencies:[w.sg,zt,bi,bo,xt,Rs,Ai,yi,bs,Qi,Po]})}return H})();function tu(H,K){if(1&H&&(S.TgZ(0,"div",4)(1,"p",9),S._uU(2," We have sent a confirmation email to "),S.TgZ(3,"strong"),S._uU(4),S.qZA(),S._uU(5,". "),S.qZA(),S.TgZ(6,"p",9),S._uU(7," Please check your email and click on the link to verfiy your email address. "),S.qZA()()),2&H){const L=K.ngIf;S.xp6(4),S.Oqu(L.email)}}const Lo=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Ge},{path:"register",component:(()=>{class H{authService;constructor(L){this.authService=L}static \u0275fac=function(Q){return new(Q||H)(S.Y36(fe.e))};static \u0275cmp=S.Xpm({type:H,selectors:[["app-register"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"]],template:function(Q,Me){if(1&Q){const cn=S.EpF();S.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),S._uU(4,"Sign Up"),S.qZA(),S.TgZ(5,"div",3),S._UZ(6,"input",4,5),S.qZA(),S.TgZ(8,"div",3),S._UZ(9,"input",6,7),S.qZA(),S.TgZ(11,"div",3)(12,"input",8),S.NdJ("click",function(){S.CHM(cn);const os=S.MAs(7),di=S.MAs(10);return S.KtG(Me.authService.SignUp(os.value,di.value))}),S.qZA()(),S.TgZ(13,"div",3)(14,"span",9)(15,"span",10),S._uU(16,"Or"),S.qZA()()(),S.TgZ(17,"div",11)(18,"span"),S._uU(19,"Already have an account? "),S.TgZ(20,"span",12),S._uU(21,"Log In"),S.qZA()()()()()()}},dependencies:[ne.rH]})}return H})()},{path:"forgot-password",component:Pe},{path:"verify-email-address",component:(()=>{class H{authService;constructor(L){this.authService=L}static \u0275fac=function(Q){return new(Q||H)(S.Y36(fe.e))};static \u0275cmp=S.Xpm({type:H,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"],[1,"text-center"]],template:function(Q,Me){1&Q&&(S.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),S._uU(4,"Thank You for Registering"),S.qZA(),S.YNc(5,tu,8,1,"div",3),S.TgZ(6,"div",4)(7,"button",5),S.NdJ("click",function(){return Me.authService.SendVerificationMail()}),S._UZ(8,"i",6),S._uU(9," Resend Verification Email "),S.qZA()()(),S.TgZ(10,"div",7)(11,"span"),S._uU(12,"Go back to?"),S.TgZ(13,"span",8),S._uU(14," Sign in"),S.qZA()()()()()),2&Q&&(S.xp6(5),S.Q6J("ngIf",Me.authService.userData))},dependencies:[w.O5,ne.rH]})}return H})()},{path:"onboarding",component:eu}];let qo=(()=>{class H{static \u0275fac=function(Q){return new(Q||H)};static \u0275mod=S.oAB({type:H});static \u0275inj=S.cJS({imports:[ne.Bz.forChild(Lo),ne.Bz]})}return H})();var Ko=U(507);let Js=(()=>{class H{static \u0275fac=function(Q){return new(Q||H)};static \u0275mod=S.oAB({type:H});static \u0275inj=S.cJS({imports:[w.ez,qo,zo.JF,Ko.m,vu]})}return H})()},5148:(nn,it,U)=>{U.d(it,{e:()=>Ge});var w=U(5879),ne=U(8330),S=U(7046),fe=U(8113),Pe=U(2496);let Ge=(()=>{class Ve{afs;afAuth;router;ngZone;customerService;userData;constructor($e,pe,ye,Re,It){this.afs=$e,this.afAuth=pe,this.router=ye,this.ngZone=Re,this.customerService=It,this.afAuth.authState.subscribe(yt=>{yt?(this.userData=yt,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.removeItem("user"),JSON.parse(localStorage.getItem("user")))})}SignIn($e,pe){return this.afAuth.signInWithEmailAndPassword($e,pe).then(ye=>{this.SetUserData(ye.user),this.afAuth.authState.subscribe(Re=>{Re&&Re.emailVerified?(this.customerService.setCustomer($e),this.router.navigate(["dashboard"])):(alert("Please verify email"),this.router.navigate(["auth/verify-email-address"]))})}).catch(ye=>{window.alert(ye.message)})}SignUp($e,pe){return this.afAuth.createUserWithEmailAndPassword($e,pe).then(ye=>{this.SendVerificationMail(),this.SetUserData(ye.user)}).catch(ye=>{window.alert(ye.message)})}SendVerificationMail(){return this.afAuth.currentUser.then($e=>$e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword($e){return this.afAuth.sendPasswordResetEmail($e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(pe=>{window.alert(pe)})}get isLoggedIn(){const $e=JSON.parse(localStorage.getItem("user"));return null!==$e&&!1!==$e.emailVerified}SetUserData($e){return this.afs.doc(`users/${$e.uid}`).set({uid:$e.uid,email:$e.email,displayName:$e.displayName,photoURL:$e.photoURL,emailVerified:$e.emailVerified,created:new Date},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["auth/login"])})}static \u0275fac=function(pe){return new(pe||Ve)(w.LFG(ne.ST),w.LFG(S.zQ),w.LFG(fe.F0),w.LFG(w.R0b),w.LFG(Pe.v))};static \u0275prov=w.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"})}return Ve})()},2496:(nn,it,U)=>{U.d(it,{v:()=>fe});var w=U(5879),ne=U(9862),S=U(8113);let fe=(()=>{class Pe{http;router;apiUrl="http://127.0.0.1:8000/api/";constructor(Ve,Ke){this.http=Ve,this.router=Ke}createCustomer(Ve){const Ke=new FormData;return Ke.append("display_name",Ve.display_name),Ke.append("email",Ve.email),Ke.append("id_number",Ve.id_number),Ke.append("phone_number",Ve.phone_number),Ke.append("billing_address",Ve.billing_address),Ke.append("shipping_address",Ve.shipping_address),Ke.append("profile_picture",Ve.profile_picture),Ke.append("id_file",Ve.id_file),this.http.post(this.apiUrl+"create-customer",Ke)}getCustomer(Ve){return this.http.get(this.apiUrl+"customer/"+Ve)}setCustomer(Ve){localStorage.removeItem("customer"),this.http.get(`${this.apiUrl}get-customer/${Ve}`).subscribe(Ke=>{console.log(Ke),localStorage.setItem("customer",JSON.stringify(Ke))},Ke=>{404===Ke.status&&(console.log("customer not enrolled",Ke),this.router.navigate(["onboarding"]))})}static \u0275fac=function(Ke){return new(Ke||Pe)(w.LFG(ne.eN),w.LFG(S.F0))};static \u0275prov=w.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"})}return Pe})()},958:(nn,it,U)=>{U.d(it,{F:()=>S});var w=U(5879),ne=U(9862);let S=(()=>{class fe{http;apiUrl="http://127.0.0.1:8000/api/products/";constructor(Ge){this.http=Ge}getListings(){return this.http.get(this.apiUrl)}static \u0275fac=function(Ve){return new(Ve||fe)(w.LFG(ne.eN))};static \u0275prov=w.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"})}return fe})()},507:(nn,it,U)=>{U.d(it,{m:()=>Ii});var w=U(6814),ne=U(9862),S=U(958),fe=U(5879);class Pe{constructor(he,se){this.open=he,this.close=se||he}isManual(){return"manual"===this.open||"manual"===this.close}}const Ge={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const Re=typeof window<"u"&&window||{};let vt;function Xe(){const ee=Re.document.createElement("span");ee.innerText="testing bs version",ee.classList.add("d-none"),ee.classList.add("pl-1"),Re.document.head.appendChild(ee);const he=Re.getComputedStyle(ee).paddingLeft;return he&&parseFloat(he)?(Re.document.head.removeChild(ee),"bs4"):(Re.document.head.removeChild(ee),"bs5")}function Cn(){return{isBs4:(vt||(vt=Xe()),"bs4"===vt),isBs5:(vt||(vt=Xe()),"bs5"===vt)}}typeof console>"u"||console;var He=U(8645),rt=U(3019),mt=U(4829),ht=U(5592),jt=U(1631),Jt=U(4266),Nn=U(4674),pn=U(7400);const Vn=["addListener","removeListener"],dn=["addEventListener","removeEventListener"],Bn=["on","off"];function ur(ee,he,se,Ie){if((0,Nn.m)(se)&&(Ie=se,se=void 0),Ie)return ur(ee,he,se).pipe((0,pn.Z)(Ie));const[ct,St]=function or(ee){return(0,Nn.m)(ee.addEventListener)&&(0,Nn.m)(ee.removeEventListener)}(ee)?dn.map(Rt=>zt=>ee[Rt](he,zt,se)):function Sn(ee){return(0,Nn.m)(ee.addListener)&&(0,Nn.m)(ee.removeListener)}(ee)?Vn.map(fn(ee,he)):function jn(ee){return(0,Nn.m)(ee.on)&&(0,Nn.m)(ee.off)}(ee)?Bn.map(fn(ee,he)):[];if(!ct&&(0,Jt.z)(ee))return(0,jt.z)(Rt=>ur(Rt,he,se))((0,mt.Xf)(ee));if(!ct)throw new TypeError("Invalid event target");return new ht.y(Rt=>{const zt=(...we)=>Rt.next(1<we.length?we:we[0]);return ct(zt),()=>St(zt)})}function fn(ee,he){return se=>Ie=>ee[se](he,Ie)}var ws=U(2096),ji=U(1954),Kr=U(7394);const Ai={schedule(ee){let he=requestAnimationFrame,se=cancelAnimationFrame;const{delegate:Ie}=Ai;Ie&&(he=Ie.requestAnimationFrame,se=Ie.cancelAnimationFrame);const ct=he(St=>{se=void 0,ee(St)});return new Kr.w0(()=>se?.(ct))},requestAnimationFrame(...ee){const{delegate:he}=Ai;return(he?.requestAnimationFrame||requestAnimationFrame)(...ee)},cancelAnimationFrame(...ee){const{delegate:he}=Ai;return(he?.cancelAnimationFrame||cancelAnimationFrame)(...ee)},delegate:void 0};var gn=U(2631);const An=new class zn extends gn.v{flush(he){this._active=!0;const se=this._scheduled;this._scheduled=void 0;const{actions:Ie}=this;let ct;he=he||Ie.shift();do{if(ct=he.execute(he.state,he.delay))break}while((he=Ie[0])&&he.id===se&&Ie.shift());if(this._active=!1,ct){for(;(he=Ie[0])&&he.id===se&&Ie.shift();)he.unsubscribe();throw ct}}}(class yi extends ji.o{constructor(he,se){super(he,se),this.scheduler=he,this.work=se}requestAsyncId(he,se,Ie=0){return null!==Ie&&Ie>0?super.requestAsyncId(he,se,Ie):(he.actions.push(this),he._scheduled||(he._scheduled=Ai.requestAnimationFrame(()=>he.flush(void 0))))}recycleAsyncId(he,se,Ie=0){var ct;if(null!=Ie?Ie>0:this.delay>0)return super.recycleAsyncId(he,se,Ie);const{actions:St}=he;null!=se&&(null===(ct=St[St.length-1])||void 0===ct?void 0:ct.id)!==se&&(Ai.cancelAnimationFrame(se),he._scheduled=void 0)}});var Or=function(ee){return ee.top="top",ee.bottom="bottom",ee.left="left",ee.right="right",ee.auto="auto",ee.end="right",ee.start="left",ee["top left"]="top left",ee["top right"]="top right",ee["right top"]="right top",ee["right bottom"]="right bottom",ee["bottom right"]="bottom right",ee["bottom left"]="bottom left",ee["left bottom"]="left bottom",ee["left top"]="left top",ee["top start"]="top left",ee["top end"]="top right",ee["end top"]="right top",ee["end bottom"]="right bottom",ee["bottom end"]="bottom right",ee["bottom start"]="bottom left",ee["start bottom"]="start bottom",ee["start top"]="left top",ee}(Or||{}),_i=function(ee){return ee.top="top",ee.bottom="bottom",ee.left="start",ee.right="end",ee.auto="auto",ee.end="end",ee.start="start",ee["top left"]="top start",ee["top right"]="top end",ee["right top"]="end top",ee["right bottom"]="end bottom",ee["bottom right"]="bottom end",ee["bottom left"]="bottom start",ee["left bottom"]="start bottom",ee["left top"]="start top",ee["top start"]="top start",ee["top end"]="top end",ee["end top"]="end top",ee["end bottom"]="end bottom",ee["bottom end"]="bottom end",ee["bottom start"]="bottom start",ee["start bottom"]="start bottom",ee["start top"]="start top",ee}(_i||{});function Yn(ee,he){if(1!==ee.nodeType)return[];const Ie=ee.ownerDocument.defaultView?.getComputedStyle(ee,null);return he?Ie&&Ie[he]:Ie}function Sr(ee){if(!ee)return document.documentElement;let Ie,se=ee?.offsetParent;for(;null===se&&ee.nextElementSibling&&Ie!==ee.nextElementSibling;)Ie=ee.nextElementSibling,se=Ie.offsetParent;const ct=se&&se.nodeName;return ct&&"BODY"!==ct&&"HTML"!==ct?se&&-1!==["TH","TD","TABLE"].indexOf(se.nodeName)&&"static"===Yn(se,"position")?Sr(se):se:Ie?Ie.ownerDocument.documentElement:document.documentElement}function rr(ee){return null!==ee.parentNode?rr(ee.parentNode):ee}function Fr(ee,he){if(!(ee&&ee.nodeType&&he&&he.nodeType))return document.documentElement;const se=ee.compareDocumentPosition(he)&Node.DOCUMENT_POSITION_FOLLOWING,Ie=se?ee:he,ct=se?he:ee,St=document.createRange();St.setStart(Ie,0),St.setEnd(ct,0);const Rt=St.commonAncestorContainer;if(ee!==Rt&&he!==Rt||Ie.contains(ct))return function Yi(ee){const{nodeName:he}=ee;return"BODY"!==he&&("HTML"===he||Sr(ee.firstElementChild)===ee)}(Rt)?Rt:Sr(Rt);const zt=rr(ee);return zt.host?Fr(zt.host,he):Fr(ee,rr(he).host)}function an(ee){if(!ee||!ee.parentElement)return document.documentElement;let he=ee.parentElement;for(;he?.parentElement&&"none"===Yn(he,"transform");)he=he.parentElement;return he||document.documentElement}function Ar(ee,he){const se="x"===he?"Left":"Top",Ie="Left"===se?"Right":"Bottom";return parseFloat(ee[`border${se}Width`])+parseFloat(ee[`border${Ie}Width`])}function zi(ee,he,se){return Math.max(he[`offset${ee}`],he[`scroll${ee}`],se[`client${ee}`],se[`offset${ee}`],se[`scroll${ee}`],0)}function vi(ee){const he=ee.body,se=ee.documentElement;return{height:zi("Height",he,se),width:zi("Width",he,se)}}function Ei(ee){return{...ee,right:(ee.left||0)+ee.width,bottom:(ee.top||0)+ee.height}}function Dn(ee){return"number"==typeof ee||"[object Number]"===Object.prototype.toString.call(ee)}function Br(ee){const he=ee.getBoundingClientRect();if(!(he&&Dn(he.top)&&Dn(he.left)&&Dn(he.bottom)&&Dn(he.right)))return he;const se={left:he.left,top:he.top,width:he.right-he.left,height:he.bottom-he.top},Ie="HTML"===ee.nodeName?vi(ee.ownerDocument):void 0,ct=Ie?.width||ee.clientWidth||Dn(he.right)&&Dn(se.left)&&he.right-se.left||0,St=Ie?.height||ee.clientHeight||Dn(he.bottom)&&Dn(se.top)&&he.bottom-se.top||0;let Rt=ee.offsetWidth-ct,zt=ee.offsetHeight-St;if(Rt||zt){const we=Yn(ee);Rt-=Ar(we,"x"),zt-=Ar(we,"y"),se.width-=Rt,se.height-=zt}return Ei(se)}function nr(ee,he,se=!1){const Ie="HTML"===he.nodeName,ct=Br(ee),St=Br(he),Rt=Yn(he),zt=parseFloat(Rt.borderTopWidth),we=parseFloat(Rt.borderLeftWidth);se&&Ie&&(St.top=Math.max(St.top??0,0),St.left=Math.max(St.left??0,0));const Ce=Ei({top:(ct.top??0)-(St.top??0)-zt,left:(ct.left??0)-(St.left??0)-we,width:ct.width,height:ct.height});if(Ce.marginTop=0,Ce.marginLeft=0,Ie){const We=parseFloat(Rt.marginTop),_t=parseFloat(Rt.marginLeft);Dn(Ce.top)&&(Ce.top-=zt-We),Dn(Ce.bottom)&&(Ce.bottom-=zt-We),Dn(Ce.left)&&(Ce.left-=we-_t),Dn(Ce.right)&&(Ce.right-=we-_t),Ce.marginTop=We,Ce.marginLeft=_t}return Ce}function vr(ee){return"HTML"===ee.nodeName?ee:ee.parentNode||ee.host}function Hn(ee){if(!ee)return document.body;switch(ee.nodeName){case"HTML":case"BODY":return ee.ownerDocument.body;case"#document":return ee.body}const{overflow:he,overflowX:se,overflowY:Ie}=Yn(ee);return/(auto|scroll|overlay)/.test(String(he)+String(Ie)+String(se))?ee:Hn(vr(ee))}function Qr(ee,he="top"){const se="top"===he?"scrollTop":"scrollLeft",Ie=ee.nodeName;return"BODY"===Ie||"HTML"===Ie?(ee.ownerDocument.scrollingElement||ee.ownerDocument.documentElement)[se]:ee[se]}function Oe(ee){const he=ee.nodeName;return"BODY"!==he&&"HTML"!==he&&("fixed"===Yn(ee,"position")||Oe(vr(ee)))}function re(ee,he,se=0,Ie,ct=!1){let St={top:0,left:0};const Rt=ct?an(ee):Fr(ee,he);if("viewport"===Ie)St=function Qn(ee,he=!1){const se=ee.ownerDocument.documentElement,Ie=nr(ee,se),ct=Math.max(se.clientWidth,window.innerWidth||0),St=Math.max(se.clientHeight,window.innerHeight||0),Rt=he?0:Qr(se),zt=he?0:Qr(se,"left");return Ei({top:Rt-Number(Ie?.top)+Number(Ie?.marginTop),left:zt-Number(Ie?.left)+Number(Ie?.marginLeft),width:ct,height:St})}(Rt,ct);else{let zt;"scrollParent"===Ie?(zt=Hn(vr(he)),"BODY"===zt.nodeName&&(zt=ee.ownerDocument.documentElement)):zt="window"===Ie?ee.ownerDocument.documentElement:Ie;const we=nr(zt,Rt,ct);if(we&&"HTML"===zt.nodeName&&!Oe(Rt)){const{height:Ce,width:We}=vi(ee.ownerDocument);Dn(St.top)&&Dn(we.top)&&Dn(we.marginTop)&&(St.top+=we.top-we.marginTop),Dn(St.top)&&(St.bottom=Number(Ce)+Number(we.top)),Dn(St.left)&&Dn(we.left)&&Dn(we.marginLeft)&&(St.left+=we.left-we.marginLeft),Dn(St.top)&&(St.right=Number(We)+Number(we.left))}else we&&(St=we)}return Dn(St.left)&&(St.left+=se),Dn(St.top)&&(St.top+=se),Dn(St.right)&&(St.right-=se),Dn(St.bottom)&&(St.bottom-=se),St}function ae({width:ee,height:he}){return ee*he}function ie(ee,he,se,Ie,ct=["top","bottom","right","left"],St="viewport",Rt=0){if(-1===ee.indexOf("auto"))return ee;const zt=re(se,Ie,Rt,St),we={top:{width:zt?.width??0,height:(he?.top??0)-(zt?.top??0)},right:{width:(zt?.right??0)-(he?.right??0),height:zt?.height??0},bottom:{width:zt?.width??0,height:(zt?.bottom??0)-(he?.bottom??0)},left:{width:(he.left??0)-(zt?.left??0),height:zt?.height??0}},Ce=Object.keys(we).map(pt=>({position:pt,...we[pt],area:ae(we[pt])})).sort((pt,Qt)=>Qt.area-pt.area);let We=Ce.filter(({width:pt,height:Qt})=>pt>=se.clientWidth&&Qt>=se.clientHeight);We=We.filter(({position:pt})=>ct.some(Qt=>Qt===pt));const _t=We.length>0?We[0].position:Ce[0].position,bt=ee.split(" ")[1];return se.className=se.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Cn().isBs5?_i[_t]:_t}`),_t+(bt?`-${bt}`:"")}const qt=(ee,he=0)=>ee?parseFloat(ee):he;function Pn(ee){const se=ee.ownerDocument.defaultView?.getComputedStyle(ee),Ie=qt(se?.marginTop)+qt(se?.marginBottom),ct=qt(se?.marginLeft)+qt(se?.marginRight);return{width:Number(ee.offsetWidth)+ct,height:Number(ee.offsetHeight)+Ie}}function hn(ee,he,se){return nr(he,se?an(ee):Fr(ee,he),se)}function Ut(ee,he,se){const Ie=se.split(" ")[0],ct=Pn(ee),St={width:ct.width,height:ct.height},Rt=-1!==["right","left"].indexOf(Ie),zt=Rt?"top":"left",we=Rt?"left":"top",Ce=Rt?"height":"width",We=Rt?"width":"height";return St[zt]=(he[zt]??0)+he[Ce]/2-ct[Ce]/2,St[we]=Ie===we?(he[we]??0)-ct[We]:he[function Ze(ee){const he={left:"right",right:"left",bottom:"top",top:"bottom"};return ee.replace(/left|right|bottom|top/g,se=>he[se])}(we)]??0,St}function Ln(ee,he){return!!ee.modifiers[he]?.enabled}const kr={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function Je(ee,he){return!!Cn().isBs5&&kr[he].includes(ee)}function Te(ee,he,se){!ee||!he||Object.keys(he).forEach(Ie=>{let ct="";-1!==["width","height","top","right","bottom","left"].indexOf(Ie)&&function Vr(ee){return""!==ee&&!isNaN(parseFloat(ee))&&isFinite(Number(ee))}(he[Ie])&&(ct="px"),se?se.setStyle(ee,Ie,`${String(he[Ie])}${ct}`):ee.style[Ie]=String(he[Ie])+ct})}function Ne(ee){let he=ee.offsets.target;const se=ee.instance.target.querySelector(".arrow");if(!se)return ee;const Ie=-1!==["left","right"].indexOf(ee.placement.split(" ")[0]),ct=Ie?"height":"width",St=Ie?"Top":"Left",Rt=St.toLowerCase(),zt=Ie?"left":"top",we=Ie?"bottom":"right",Ce=Pn(se)[ct],We=ee.placement.split(" ")[1];(ee.offsets.host[we]??0)-Ce<(he[Rt]??0)&&(he[Rt]-=(he[Rt]??0)-((ee.offsets.host[we]??0)-Ce)),Number(ee.offsets.host[Rt])+Number(Ce)>(he[we]??0)&&(he[Rt]+=Number(ee.offsets.host[Rt])+Number(Ce)-Number(he[we])),he=Ei(he);const _t=Yn(ee.instance.target),bt=parseFloat(_t[`margin${St}`])||0,pt=parseFloat(_t[`border${St}Width`])||0;let Qt;if(We){const qn=parseFloat(_t.borderRadius)||0,Hr=Number(bt+pt+qn);Qt=Rt===We?Number(ee.offsets.host[Rt])+Hr:Number(ee.offsets.host[Rt])+Number(ee.offsets.host[ct]-Hr)}else Qt=Number(ee.offsets.host[Rt])+Number(ee.offsets.host[ct]/2-Ce/2);let vn=Qt-(he[Rt]??0)-bt-pt;return vn=Math.max(Math.min(he[ct]-(Ce+5),vn),0),ee.offsets.arrow={[Rt]:Math.round(vn),[zt]:""},ee.instance.arrow=se,ee}function Ye(ee){if(ee.offsets.target=Ei(ee.offsets.target),!Ln(ee.options,"flip"))return ee.offsets.target={...ee.offsets.target,...Ut(ee.instance.target,ee.offsets.host,ee.placement)},ee;const he=re(ee.instance.target,ee.instance.host,0,"viewport",!1);let se=ee.placement.split(" ")[0],Ie=ee.placement.split(" ")[1]||"";const zt=ie("auto",ee.offsets.host,ee.instance.target,ee.instance.host,ee.options.allowedPositions),we=[se,zt];return we.forEach((Ce,We)=>{if(se!==Ce||we.length===We+1)return;se=ee.placement.split(" ")[0];const _t="left"===se&&Math.floor(ee.offsets.target.right??0)>Math.floor(ee.offsets.host.left??0)||"right"===se&&Math.floor(ee.offsets.target.left??0)<Math.floor(ee.offsets.host.right??0)||"top"===se&&Math.floor(ee.offsets.target.bottom??0)>Math.floor(ee.offsets.host.top??0)||"bottom"===se&&Math.floor(ee.offsets.target.top??0)<Math.floor(ee.offsets.host.bottom??0),bt=Math.floor(ee.offsets.target.left??0)<Math.floor(he.left??0),pt=Math.floor(ee.offsets.target.right??0)>Math.floor(he.right??0),Qt=Math.floor(ee.offsets.target.top??0)<Math.floor(he.top??0),vn=Math.floor(ee.offsets.target.bottom??0)>Math.floor(he.bottom??0),qn="left"===se&&bt||"right"===se&&pt||"top"===se&&Qt||"bottom"===se&&vn,Hr=-1!==["top","bottom"].indexOf(se),ai=Hr&&"left"===Ie&&bt||Hr&&"right"===Ie&&pt||!Hr&&"left"===Ie&&Qt||!Hr&&"right"===Ie&&vn;(_t||qn||ai)&&((_t||qn)&&(se=we[We+1]),ai&&(Ie=function Dt(ee){return"right"===ee?"left":"left"===ee?"right":ee}(Ie)),ee.placement=se+(Ie?` ${Ie}`:""),ee.offsets.target={...ee.offsets.target,...Ut(ee.instance.target,ee.offsets.host,ee.placement)})}),ee}function ln(ee){if(!Ln(ee.options,"preventOverflow"))return ee;const he="transform",se=ee.instance.target.style,{top:Ie,left:ct,[he]:St}=se;se.top="",se.left="",se[he]="";const Rt=re(ee.instance.target,ee.instance.host,0,ee.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);se.top=Ie,se.left=ct,se[he]=St;const we={primary(Ce){let We=ee.offsets.target[Ce];return(ee.offsets.target[Ce]??0)<(Rt[Ce]??0)&&(We=Math.max(ee.offsets.target[Ce]??0,Rt[Ce]??0)),{[Ce]:We}},secondary(Ce){const We="right"===Ce,_t=We?"left":"top";let pt=ee.offsets.target[_t];return(ee.offsets.target[Ce]??0)>(Rt[Ce]??0)&&(pt=Math.min(ee.offsets.target[_t]??0,(Rt[Ce]??0)-ee.offsets.target[We?"width":"height"])),{[_t]:pt}}};return["left","right","top","bottom"].forEach(Ce=>{const We=-1!==["left","top","start"].indexOf(Ce)?we.primary:we.secondary;ee.offsets.target={...ee.offsets.target,...We(Ce)}}),ee}function Zt(ee){const he=ee.placement,se=he.split(" ")[0],Ie=he.split(" ")[1];if(Ie){const{host:ct,target:St}=ee.offsets,Rt=-1!==["bottom","top"].indexOf(se),zt=Rt?"left":"top",we=Rt?"width":"height",Ce={start:{[zt]:ct[zt]},end:{[zt]:(ct[zt]??0)+ct[we]-St[we]}};ee.offsets.target={...St,[zt]:zt===Ie?Ce.start[zt]:Ce.end[zt]}}return ee}const gr=new class Mn{position(he,se){return this.offset(he,se)}offset(he,se){return hn(se,he)}positionElements(he,se,Ie,ct,St){const Rt=[Ye,Zt,ln,Ne],we=function Et(ee,he,se,Ie){if(!ee||!he)return;const ct=hn(ee,he);!se.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!se.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(se="auto");const St=!!se.match(/auto/g);let Rt=se.match(/auto\s(left|right|top|bottom|start|end)/)?se.split(" ")[1]||"auto":se;const zt=Rt.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return zt&&(Rt=zt[1]+(zt[2]?` ${zt[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(Rt)&&(Rt="auto"),Rt=ie(Rt,ct,ee,he,Ie?Ie.allowedPositions:void 0),{options:Ie||{modifiers:{}},instance:{target:ee,host:he,arrow:void 0},offsets:{target:Ut(ee,ct,Rt),host:ct,arrow:void 0},positionFixed:!1,placement:Rt,placementAuto:St}}(se,he,Or[Ie],St);if(we)return Rt.reduce((Ce,We)=>We(Ce),we)}};function dr(ee,he,se,Ie,ct,St){const Rt=gr.positionElements(ee,he,se,Ie,ct);if(!Rt)return;const zt=function le(ee){return{width:ee.offsets.target.width,height:ee.offsets.target.height,left:Math.floor(ee.offsets.target.left??0),top:Math.round(ee.offsets.target.top??0),bottom:Math.round(ee.offsets.target.bottom??0),right:Math.floor(ee.offsets.target.right??0)}}(Rt);Te(he,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${zt.left}px, ${zt.top}px, 0px)`},St),Rt.instance.arrow&&Te(Rt.instance.arrow,Rt.offsets.arrow,St),function je(ee,he){const se=ee.instance.target;let Ie=se.className;const ct=Cn().isBs5?_i[ee.placement]:ee.placement;ee.placementAuto&&(Ie=Ie.replace(/bs-popover-auto/g,`bs-popover-${ct}`),Ie=Ie.replace(/ms-2|me-2|mb-2|mt-2/g,""),Ie=Ie.replace(/bs-tooltip-auto/g,`bs-tooltip-${ct}`),Ie=Ie.replace(/\sauto/g,` ${ct}`),-1!==Ie.indexOf("popover")&&(Ie=Ie+" "+function Fe(ee){return Cn().isBs5?Je(ee,"end")?"ms-2":Je(ee,"start")?"me-2":Je(ee,"top")?"mb-2":Je(ee,"bottom")?"mt-2":"":""}(ct)),-1!==Ie.indexOf("popover")&&-1===Ie.indexOf("popover-auto")&&(Ie+=" popover-auto"),-1!==Ie.indexOf("tooltip")&&-1===Ie.indexOf("tooltip-auto")&&(Ie+=" tooltip-auto")),Ie=Ie.replace(/left|right|top|bottom|end|start/g,`${ct.split(" ")[0]}`),he?he.setAttribute(se,"class",Ie):se.className=Ie}(Rt,St)}let jr=(()=>{class ee{constructor(se,Ie,ct){this.update$$=new He.x,this.positionElements=new Map,this.isDisabled=!1,(0,w.NF)(ct)&&se.runOutsideAngular(()=>{this.triggerEvent$=(0,rt.T)(ur(window,"scroll",{passive:!0}),ur(window,"resize",{passive:!0}),(0,ws.of)(0,An),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(St=>{dr(Hi(St.target),Hi(St.element),St.attachment,St.appendToBody,this.options,Ie.createRenderer(null,null))})})})}position(se){this.addPositionElement(se)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(se){this.positionElements.set(Hi(se.element),se)}calcPosition(){this.update$$.next(null)}deletePositionElement(se){this.positionElements.delete(Hi(se))}setOptions(se){this.options=se}static#e=this.\u0275fac=function(Ie){return new(Ie||ee)(fe.LFG(fe.R0b),fe.LFG(fe.FYo),fe.LFG(fe.Lbi))};static#t=this.\u0275prov=fe.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"})}return ee})();function Hi(ee){return"string"==typeof ee?document.querySelector(ee):ee instanceof fe.SBq?ee.nativeElement:ee??null}class wr{constructor(he,se,Ie){this.nodes=he,this.viewRef=se,this.componentRef=Ie}}class Cr{constructor(he,se,Ie,ct,St,Rt,zt,we,Ce){this._viewContainerRef=he,this._renderer=se,this._elementRef=Ie,this._injector=ct,this._componentFactoryResolver=St,this._ngZone=Rt,this._applicationRef=zt,this._posService=we,this._document=Ce,this.onBeforeShow=new fe.vpe,this.onShown=new fe.vpe,this.onBeforeHide=new fe.vpe,this.onHidden=new fe.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(he){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(he),this}to(he){return this.container=he||this.container,this}position(he){return he?(this.attachment=he.attachment||this.attachment,this._elementRef=he.target||this._elementRef,this):this}provide(he){return this._providers.push(he),this}show(he={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(he.content,he.context,he.initialState);const se=fe.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(se,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,he),this.container instanceof fe.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&typeof this._document<"u"){const Ie=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!Ie)return;Ie.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(he.id?{id:he.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(he){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const se=this._componentRef.location.nativeElement;return se.parentNode?.removeChild(se),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(he?{id:he}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(he){this.triggers=he.triggers||this.triggers,this._listenOpts.outsideClick=he.outsideClick,this._listenOpts.outsideEsc=he.outsideEsc,he.target=he.target||this._elementRef?.nativeElement;const se=this._listenOpts.hide=()=>he.hide?he.hide():void this.hide(),Ie=this._listenOpts.show=St=>{he.show?he.show(St):this.show(St),St()};return this._renderer&&(this._unregisterListenersFn=function $e(ee,he){const se=function Ve(ee,he=Ge){const se=(ee||"").trim();if(0===se.length)return[];const Ie=se.split(/\s+/).map(St=>St.split(":")).map(St=>{const Rt=he[St[0]]||St;return new Pe(Rt[0],Rt[1])}),ct=Ie.filter(St=>St.isManual());if(ct.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===ct.length&&Ie.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return Ie}(he.triggers),Ie=he.target;if(1===se.length&&se[0].isManual())return Function.prototype;const ct=[],St=[],Rt=()=>{St.forEach(zt=>ct.push(zt())),St.length=0};return se.forEach(zt=>{const we=zt.open===zt.close,Ce=we?he.toggle:he.show;if(!we&&zt.close&&he.hide){const We=zt.close,_t=he.hide;St.push(()=>ee.listen(Ie,We,_t))}Ce&&ct.push(ee.listen(Ie,zt.open,()=>Ce(Rt)))}),()=>{ct.forEach(zt=>zt())}}(this._renderer,{target:he.target,triggers:he.triggers,show:Ie,hide:se,toggle:St=>{this.isShown?se():Ie(St)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(he,se){return he&&se&&(this._inlineViewRef=he.createEmbeddedView(se)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const he=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function pe(ee,he){return he.outsideClick?ee.listen("document","click",se=>{he.target&&he.target.contains(se.target)||he.targets&&he.targets.some(Ie=>Ie.contains(se.target))||he.hide&&he.hide()}):Function.prototype}(this._renderer,{targets:[he,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function ye(ee,he){return he.outsideEsc?ee.listen("document","keyup.esc",se=>{he.target&&he.target.contains(se.target)||he.targets&&he.targets.some(Ie=>Ie.contains(se.target))||he.hide&&he.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(he,se,Ie){if(!he)return new wr([]);if(he instanceof fe.Rgc){if(this._viewContainerRef){const Rt=this._viewContainerRef.createEmbeddedView(he,se);return Rt.markForCheck(),new wr([Rt.rootNodes],Rt)}const St=he.createEmbeddedView({});return this._applicationRef.attachView(St),new wr([St.rootNodes],St)}if("function"==typeof he){const St=this._componentFactoryResolver.resolveComponentFactory(he),Rt=fe.zs3.create({providers:this._providers,parent:this._injector}),zt=St.create(Rt);return Object.assign(zt.instance,Ie),this._applicationRef.attachView(zt.hostView),new wr([[zt.location.nativeElement]],zt.hostView,zt)}const ct=this._renderer?[this._renderer.createText(`${he}`)]:[];return new wr([ct])}}let ts=(()=>{class ee{constructor(se,Ie,ct,St,Rt,zt){this._componentFactoryResolver=se,this._ngZone=Ie,this._injector=ct,this._posService=St,this._applicationRef=Rt,this._document=zt}createLoader(se,Ie,ct){return new Cr(Ie,ct,se,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}static#e=this.\u0275fac=function(Ie){return new(Ie||ee)(fe.LFG(fe._Vd),fe.LFG(fe.R0b),fe.LFG(fe.zs3),fe.LFG(jr),fe.LFG(fe.z2F),fe.LFG(w.K0))};static#t=this.\u0275prov=fe.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"})}return ee})();var wi=U(6825);let Mr=(()=>{class ee{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1,this.isOpenChange=new fe.vpe,this.isDisabledChange=new fe.vpe,this.toggleClick=new fe.vpe,this.counts=0,this.dropdownMenu=new Promise(se=>{this.resolveDropdownMenu=se})}static#e=this.\u0275fac=function(Ie){return new(Ie||ee)};static#t=this.\u0275prov=fe.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"platform"})}return ee})();(0,wi.oB)({height:0,overflow:"hidden"}),(0,wi.jt)("220ms cubic-bezier(0, 0, 0.2, 1)",(0,wi.oB)({height:"*",overflow:"hidden"}));let Os=(()=>{class ee{static forRoot(){return{ngModule:ee,providers:[ts,jr,Mr]}}static#e=this.\u0275fac=function(Ie){return new(Ie||ee)};static#t=this.\u0275mod=fe.oAB({type:ee});static#n=this.\u0275inj=fe.cJS({imports:[w.ez]})}return ee})();var Co=U(9515),Fi=U(5061);function aa(ee){return new Fi.w(ee,"./assets/i18n/",".json")}let Ii=(()=>{class ee{static \u0275fac=function(Ie){return new(Ie||ee)};static \u0275mod=fe.oAB({type:ee});static \u0275inj=fe.cJS({providers:[S.F],imports:[w.ez,ne.JF,Os.forRoot(),Co.aw.forChild({loader:{provide:Co.Zw,useFactory:aa,deps:[ne.eN]}}),ne.JF,Os,Co.aw]})}return ee})()},2281:(nn,it,U)=>{var w=U(6593),ne=U(5879),S=U(6825);function Pe(l){return new ne.vHH(3e3,!1)}function jt(l){switch(l.length){case 0:return new S.ZN;case 1:return l[0];default:return new S.ZE(l)}}function Jt(l,s,o=new Map,c=new Map){const g=[],E=[];let T=-1,F=null;if(s.forEach(G=>{const X=G.get("offset"),Ae=X==T,Ue=Ae&&F||new Map;G.forEach((st,wt)=>{let At=wt,on=st;if("offset"!==wt)switch(At=l.normalizePropertyName(At,g),on){case S.k1:on=o.get(wt);break;case S.l3:on=c.get(wt);break;default:on=l.normalizeStyleValue(wt,At,on,g)}Ue.set(At,on)}),Ae||E.push(Ue),F=Ue,T=X}),g.length)throw function Yt(l){return new ne.vHH(3502,!1)}();return E}function Nn(l,s,o,c){switch(s){case"start":l.onStart(()=>c(o&&pn(o,"start",l)));break;case"done":l.onDone(()=>c(o&&pn(o,"done",l)));break;case"destroy":l.onDestroy(()=>c(o&&pn(o,"destroy",l)))}}function pn(l,s,o){const E=Vn(l.element,l.triggerName,l.fromState,l.toState,s||l.phaseName,o.totalTime??l.totalTime,!!o.disabled),T=l._data;return null!=T&&(E._data=T),E}function Vn(l,s,o,c,g="",E=0,T){return{element:l,triggerName:s,fromState:o,toState:c,phaseName:g,totalTime:E,disabled:!!T}}function dn(l,s,o){let c=l.get(s);return c||l.set(s,c=o),c}function Bn(l){const s=l.indexOf(":");return[l.substring(1,s),l.slice(s+1)]}const ur=(()=>typeof document>"u"?null:document.documentElement)();function fn(l){const s=l.parentNode||l.host||null;return s===ur?null:s}let jn=null,or=!1;function Ai(l,s){for(;s;){if(s===l)return!0;s=fn(s)}return!1}function yi(l,s,o){if(o)return Array.from(l.querySelectorAll(s));const c=l.querySelector(s);return c?[c]:[]}let zn=(()=>{class l{validateStyleProperty(o){return function ws(l){jn||(jn=function Kr(){return typeof document<"u"?document.body:null}()||{},or=!!jn.style&&"WebkitAppearance"in jn.style);let s=!0;return jn.style&&!function Sn(l){return"ebkit"==l.substring(1,6)}(l)&&(s=l in jn.style,!s&&or&&(s="Webkit"+l.charAt(0).toUpperCase()+l.slice(1)in jn.style)),s}(o)}matchesElement(o,c){return!1}containsElement(o,c){return Ai(o,c)}getParentElement(o){return fn(o)}query(o,c,g){return yi(o,c,g)}computeStyle(o,c,g){return g||""}animate(o,c,g,E,T,F=[],G){return new S.ZN(g,E)}static#e=this.\u0275fac=function(c){return new(c||l)};static#t=this.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac})}return l})(),An=(()=>{class l{static#e=this.NOOP=new zn}return l})();const cr=1e3,Yn="ng-enter",Sr="ng-leave",Yi="ng-trigger",rr=".ng-trigger",Fr="ng-animating",an=".ng-animating";function Ar(l){if("number"==typeof l)return l;const s=l.match(/^(-?[\.\d]+)(m?s)/);return!s||s.length<2?0:zi(parseFloat(s[1]),s[2])}function zi(l,s){return"s"===s?l*cr:l}function vi(l,s,o){return l.hasOwnProperty("duration")?l:function Ei(l,s,o){let g,E=0,T="";if("string"==typeof l){const F=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===F)return s.push(Pe()),{duration:0,delay:0,easing:""};g=zi(parseFloat(F[1]),F[2]);const G=F[3];null!=G&&(E=zi(parseFloat(G),F[4]));const X=F[5];X&&(T=X)}else g=l;if(!o){let F=!1,G=s.length;g<0&&(s.push(function Ge(){return new ne.vHH(3100,!1)}()),F=!0),E<0&&(s.push(function Ve(){return new ne.vHH(3101,!1)}()),F=!0),F&&s.splice(G,0,Pe())}return{duration:g,delay:E,easing:T}}(l,s,o)}function Vr(l,s={}){return Object.keys(l).forEach(o=>{s[o]=l[o]}),s}function Dn(l){const s=new Map;return Object.keys(l).forEach(o=>{s.set(o,l[o])}),s}function vr(l,s=new Map,o){if(o)for(let[c,g]of o)s.set(c,g);for(let[c,g]of l)s.set(c,g);return s}function Hn(l,s,o){s.forEach((c,g)=>{const E=Dt(g);o&&!o.has(g)&&o.set(g,l.style[E]),l.style[E]=c})}function Qr(l,s){s.forEach((o,c)=>{const g=Dt(c);l.style[g]=""})}function Qn(l){return Array.isArray(l)?1==l.length?l[0]:(0,S.vP)(l):l}const re=new RegExp("{{\\s*(.+?)\\s*}}","g");function ae(l){let s=[];if("string"==typeof l){let o;for(;o=re.exec(l);)s.push(o[1]);re.lastIndex=0}return s}function ie(l,s,o){const c=l.toString(),g=c.replace(re,(E,T)=>{let F=s[T];return null==F&&(o.push(function $e(l){return new ne.vHH(3003,!1)}()),F=""),F.toString()});return g==c?l:g}function le(l){const s=[];let o=l.next();for(;!o.done;)s.push(o.value),o=l.next();return s}const Ze=/-+([a-z0-9])/g;function Dt(l){return l.replace(Ze,(...s)=>s[1].toUpperCase())}function Ut(l,s,o){switch(s.type){case 7:return l.visitTrigger(s,o);case 0:return l.visitState(s,o);case 1:return l.visitTransition(s,o);case 2:return l.visitSequence(s,o);case 3:return l.visitGroup(s,o);case 4:return l.visitAnimate(s,o);case 5:return l.visitKeyframes(s,o);case 6:return l.visitStyle(s,o);case 8:return l.visitReference(s,o);case 9:return l.visitAnimateChild(s,o);case 10:return l.visitAnimateRef(s,o);case 11:return l.visitQuery(s,o);case 12:return l.visitStagger(s,o);default:throw function pe(l){return new ne.vHH(3004,!1)}()}}function Ln(l,s){return window.getComputedStyle(l)[s]}const Ye="*";function Et(l,s){const o=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(c=>function ln(l,s,o){if(":"==l[0]){const G=function Zt(l,s){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,c)=>parseFloat(c)>parseFloat(o);case":decrement":return(o,c)=>parseFloat(c)<parseFloat(o);default:return s.push(function vt(l){return new ne.vHH(3016,!1)}()),"* => *"}}(l,o);if("function"==typeof G)return void s.push(G);l=G}const c=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return o.push(function gt(l){return new ne.vHH(3015,!1)}()),s;const g=c[1],E=c[2],T=c[3];s.push(dr(g,T));"<"==E[0]&&!(g==Ye&&T==Ye)&&s.push(dr(T,g))}(c,o,s)):o.push(l),o}const Mn=new Set(["true","1"]),gr=new Set(["false","0"]);function dr(l,s){const o=Mn.has(l)||gr.has(l),c=Mn.has(s)||gr.has(s);return(g,E)=>{let T=l==Ye||l==g,F=s==Ye||s==E;return!T&&o&&"boolean"==typeof g&&(T=g?Mn.has(l):gr.has(l)),!F&&c&&"boolean"==typeof E&&(F=E?Mn.has(s):gr.has(s)),T&&F}}const Hi=new RegExp("s*:selfs*,?","g");function es(l,s,o,c){return new Cr(l).build(s,o,c)}class Cr{constructor(s){this._driver=s}build(s,o,c){const g=new Mi(o);return this._resetContextStyleTimingState(g),Ut(this,Qn(s),g)}_resetContextStyleTimingState(s){s.currentQuerySelector="",s.collectedStyles=new Map,s.collectedStyles.set("",new Map),s.currentTime=0}visitTrigger(s,o){let c=o.queryCount=0,g=o.depCount=0;const E=[],T=[];return"@"==s.name.charAt(0)&&o.errors.push(function Re(){return new ne.vHH(3006,!1)}()),s.definitions.forEach(F=>{if(this._resetContextStyleTimingState(o),0==F.type){const G=F,X=G.name;X.toString().split(/\s*,\s*/).forEach(Ae=>{G.name=Ae,E.push(this.visitState(G,o))}),G.name=X}else if(1==F.type){const G=this.visitTransition(F,o);c+=G.queryCount,g+=G.depCount,T.push(G)}else o.errors.push(function It(){return new ne.vHH(3007,!1)}())}),{type:7,name:s.name,states:E,transitions:T,queryCount:c,depCount:g,options:null}}visitState(s,o){const c=this.visitStyle(s.styles,o),g=s.options&&s.options.params||null;if(c.containsDynamicStyles){const E=new Set,T=g||{};c.styles.forEach(F=>{F instanceof Map&&F.forEach(G=>{ae(G).forEach(X=>{T.hasOwnProperty(X)||E.add(X)})})}),E.size&&(le(E.values()),o.errors.push(function yt(l,s){return new ne.vHH(3008,!1)}()))}return{type:0,name:s.name,style:c,options:g?{params:g}:null}}visitTransition(s,o){o.queryCount=0,o.depCount=0;const c=Ut(this,Qn(s.animation),o);return{type:1,matchers:Et(s.expr,o.errors),animation:c,queryCount:o.queryCount,depCount:o.depCount,options:Mr(s.options)}}visitSequence(s,o){return{type:2,steps:s.steps.map(c=>Ut(this,c,o)),options:Mr(s.options)}}visitGroup(s,o){const c=o.currentTime;let g=0;const E=s.steps.map(T=>{o.currentTime=c;const F=Ut(this,T,o);return g=Math.max(g,o.currentTime),F});return o.currentTime=g,{type:3,steps:E,options:Mr(s.options)}}visitAnimate(s,o){const c=function so(l,s){if(l.hasOwnProperty("duration"))return l;if("number"==typeof l)return Bs(vi(l,s).duration,0,"");const o=l;if(o.split(/\s+/).some(E=>"{"==E.charAt(0)&&"{"==E.charAt(1))){const E=Bs(0,0,"");return E.dynamic=!0,E.strValue=o,E}const g=vi(o,s);return Bs(g.duration,g.delay,g.easing)}(s.timings,o.errors);o.currentAnimateTimings=c;let g,E=s.styles?s.styles:(0,S.oB)({});if(5==E.type)g=this.visitKeyframes(E,o);else{let T=s.styles,F=!1;if(!T){F=!0;const X={};c.easing&&(X.easing=c.easing),T=(0,S.oB)(X)}o.currentTime+=c.duration+c.delay;const G=this.visitStyle(T,o);G.isEmptyStep=F,g=G}return o.currentAnimateTimings=null,{type:4,timings:c,style:g,options:null}}visitStyle(s,o){const c=this._makeStyleAst(s,o);return this._validateStyleAst(c,o),c}_makeStyleAst(s,o){const c=[],g=Array.isArray(s.styles)?s.styles:[s.styles];for(let F of g)"string"==typeof F?F===S.l3?c.push(F):o.errors.push(new ne.vHH(3002,!1)):c.push(Dn(F));let E=!1,T=null;return c.forEach(F=>{if(F instanceof Map&&(F.has("easing")&&(T=F.get("easing"),F.delete("easing")),!E))for(let G of F.values())if(G.toString().indexOf("{{")>=0){E=!0;break}}),{type:6,styles:c,easing:T,offset:s.offset,containsDynamicStyles:E,options:null}}_validateStyleAst(s,o){const c=o.currentAnimateTimings;let g=o.currentTime,E=o.currentTime;c&&E>0&&(E-=c.duration+c.delay),s.styles.forEach(T=>{"string"!=typeof T&&T.forEach((F,G)=>{const X=o.collectedStyles.get(o.currentQuerySelector),Ae=X.get(G);let Ue=!0;Ae&&(E!=g&&E>=Ae.startTime&&g<=Ae.endTime&&(o.errors.push(function Vt(l,s,o,c,g){return new ne.vHH(3010,!1)}()),Ue=!1),E=Ae.startTime),Ue&&X.set(G,{startTime:E,endTime:g}),o.options&&function Oe(l,s,o){const c=s.params||{},g=ae(l);g.length&&g.forEach(E=>{c.hasOwnProperty(E)||o.push(function Ke(l){return new ne.vHH(3001,!1)}())})}(F,o.options,o.errors)})})}visitKeyframes(s,o){const c={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function xt(){return new ne.vHH(3011,!1)}()),c;let E=0;const T=[];let F=!1,G=!1,X=0;const Ae=s.steps.map(br=>{const si=this._makeStyleAst(br,o);let ti=null!=si.offset?si.offset:function ls(l){if("string"==typeof l)return null;let s=null;if(Array.isArray(l))l.forEach(o=>{if(o instanceof Map&&o.has("offset")){const c=o;s=parseFloat(c.get("offset")),c.delete("offset")}});else if(l instanceof Map&&l.has("offset")){const o=l;s=parseFloat(o.get("offset")),o.delete("offset")}return s}(si.styles),oi=0;return null!=ti&&(E++,oi=si.offset=ti),G=G||oi<0||oi>1,F=F||oi<X,X=oi,T.push(oi),si});G&&o.errors.push(function ze(){return new ne.vHH(3012,!1)}()),F&&o.errors.push(function Lt(){return new ne.vHH(3200,!1)}());const Ue=s.steps.length;let st=0;E>0&&E<Ue?o.errors.push(function _e(){return new ne.vHH(3202,!1)}()):0==E&&(st=1/(Ue-1));const wt=Ue-1,At=o.currentTime,on=o.currentAnimateTimings,yn=on.duration;return Ae.forEach((br,si)=>{const ti=st>0?si==wt?1:st*si:T[si],oi=ti*yn;o.currentTime=At+on.delay+oi,on.duration=oi,this._validateStyleAst(br,o),br.offset=ti,c.styles.push(br)}),c}visitReference(s,o){return{type:8,animation:Ut(this,Qn(s.animation),o),options:Mr(s.options)}}visitAnimateChild(s,o){return o.depCount++,{type:9,options:Mr(s.options)}}visitAnimateRef(s,o){return{type:10,animation:this.visitReference(s.animation,o),options:Mr(s.options)}}visitQuery(s,o){const c=o.currentQuerySelector,g=s.options||{};o.queryCount++,o.currentQuery=s;const[E,T]=function ts(l){const s=!!l.split(/\s*,\s*/).find(o=>":self"==o);return s&&(l=l.replace(Hi,"")),l=l.replace(/@\*/g,rr).replace(/@\w+/g,o=>rr+"-"+o.slice(1)).replace(/:animating/g,an),[l,s]}(s.selector);o.currentQuerySelector=c.length?c+" "+E:E,dn(o.collectedStyles,o.currentQuerySelector,new Map);const F=Ut(this,Qn(s.animation),o);return o.currentQuery=null,o.currentQuerySelector=c,{type:11,selector:E,limit:g.limit||0,optional:!!g.optional,includeSelf:T,animation:F,originalSelector:s.selector,options:Mr(s.options)}}visitStagger(s,o){o.currentQuery||o.errors.push(function et(){return new ne.vHH(3013,!1)}());const c="full"===s.timings?{duration:0,delay:0,easing:"full"}:vi(s.timings,o.errors,!0);return{type:12,animation:Ut(this,Qn(s.animation),o),timings:c,options:null}}}class Mi{constructor(s){this.errors=s,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Mr(l){return l?(l=Vr(l)).params&&(l.params=function wi(l){return l?Vr(l):null}(l.params)):l={},l}function Bs(l,s,o){return{duration:l,delay:s,easing:o}}function gs(l,s,o,c,g,E,T=null,F=!1){return{type:1,element:l,keyframes:s,preStyleProps:o,postStyleProps:c,duration:g,delay:E,totalTime:g+E,easing:T,subTimeline:F}}class Xs{constructor(){this._map=new Map}get(s){return this._map.get(s)||[]}append(s,o){let c=this._map.get(s);c||this._map.set(s,c=[]),c.push(...o)}has(s){return this._map.has(s)}clear(){this._map.clear()}}const xs=new RegExp(":enter","g"),Co=new RegExp(":leave","g");function Fi(l,s,o,c,g,E=new Map,T=new Map,F,G,X=[]){return(new aa).buildKeyframes(l,s,o,c,g,E,T,F,G,X)}class aa{buildKeyframes(s,o,c,g,E,T,F,G,X,Ae=[]){X=X||new Xs;const Ue=new ee(s,o,X,g,E,Ae,[]);Ue.options=G;const st=G.delay?Ar(G.delay):0;Ue.currentTimeline.delayNextStep(st),Ue.currentTimeline.setStyles([T],null,Ue.errors,G),Ut(this,c,Ue);const wt=Ue.timelines.filter(At=>At.containsAnimation());if(wt.length&&F.size){let At;for(let on=wt.length-1;on>=0;on--){const yn=wt[on];if(yn.element===o){At=yn;break}}At&&!At.allowOnlyTimelineStyles()&&At.setStyles([F],null,Ue.errors,G)}return wt.length?wt.map(At=>At.buildKeyframes()):[gs(o,[],[],[],0,st,"",!1)]}visitTrigger(s,o){}visitState(s,o){}visitTransition(s,o){}visitAnimateChild(s,o){const c=o.subInstructions.get(o.element);if(c){const g=o.createSubContext(s.options),E=o.currentTimeline.currentTime,T=this._visitSubInstructions(c,g,g.options);E!=T&&o.transformIntoNewTimeline(T)}o.previousNode=s}visitAnimateRef(s,o){const c=o.createSubContext(s.options);c.transformIntoNewTimeline(),this._applyAnimationRefDelays([s.options,s.animation.options],o,c),this.visitReference(s.animation,c),o.transformIntoNewTimeline(c.currentTimeline.currentTime),o.previousNode=s}_applyAnimationRefDelays(s,o,c){for(const g of s){const E=g?.delay;if(E){const T="number"==typeof E?E:Ar(ie(E,g?.params??{},o.errors));c.delayNextStep(T)}}}_visitSubInstructions(s,o,c){let E=o.currentTimeline.currentTime;const T=null!=c.duration?Ar(c.duration):null,F=null!=c.delay?Ar(c.delay):null;return 0!==T&&s.forEach(G=>{const X=o.appendInstructionToTimeline(G,T,F);E=Math.max(E,X.duration+X.delay)}),E}visitReference(s,o){o.updateOptions(s.options,!0),Ut(this,s.animation,o),o.previousNode=s}visitSequence(s,o){const c=o.subContextCount;let g=o;const E=s.options;if(E&&(E.params||E.delay)&&(g=o.createSubContext(E),g.transformIntoNewTimeline(),null!=E.delay)){6==g.previousNode.type&&(g.currentTimeline.snapshotCurrentStyles(),g.previousNode=Ii);const T=Ar(E.delay);g.delayNextStep(T)}s.steps.length&&(s.steps.forEach(T=>Ut(this,T,g)),g.currentTimeline.applyStylesToKeyframe(),g.subContextCount>c&&g.transformIntoNewTimeline()),o.previousNode=s}visitGroup(s,o){const c=[];let g=o.currentTimeline.currentTime;const E=s.options&&s.options.delay?Ar(s.options.delay):0;s.steps.forEach(T=>{const F=o.createSubContext(s.options);E&&F.delayNextStep(E),Ut(this,T,F),g=Math.max(g,F.currentTimeline.currentTime),c.push(F.currentTimeline)}),c.forEach(T=>o.currentTimeline.mergeTimelineCollectedStyles(T)),o.transformIntoNewTimeline(g),o.previousNode=s}_visitTiming(s,o){if(s.dynamic){const c=s.strValue;return vi(o.params?ie(c,o.params,o.errors):c,o.errors)}return{duration:s.duration,delay:s.delay,easing:s.easing}}visitAnimate(s,o){const c=o.currentAnimateTimings=this._visitTiming(s.timings,o),g=o.currentTimeline;c.delay&&(o.incrementTime(c.delay),g.snapshotCurrentStyles());const E=s.style;5==E.type?this.visitKeyframes(E,o):(o.incrementTime(c.duration),this.visitStyle(E,o),g.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=s}visitStyle(s,o){const c=o.currentTimeline,g=o.currentAnimateTimings;!g&&c.hasCurrentStyleProperties()&&c.forwardFrame();const E=g&&g.easing||s.easing;s.isEmptyStep?c.applyEmptyStep(E):c.setStyles(s.styles,E,o.errors,o.options),o.previousNode=s}visitKeyframes(s,o){const c=o.currentAnimateTimings,g=o.currentTimeline.duration,E=c.duration,F=o.createSubContext().currentTimeline;F.easing=c.easing,s.styles.forEach(G=>{F.forwardTime((G.offset||0)*E),F.setStyles(G.styles,G.easing,o.errors,o.options),F.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(F),o.transformIntoNewTimeline(g+E),o.previousNode=s}visitQuery(s,o){const c=o.currentTimeline.currentTime,g=s.options||{},E=g.delay?Ar(g.delay):0;E&&(6===o.previousNode.type||0==c&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Ii);let T=c;const F=o.invokeQuery(s.selector,s.originalSelector,s.limit,s.includeSelf,!!g.optional,o.errors);o.currentQueryTotal=F.length;let G=null;F.forEach((X,Ae)=>{o.currentQueryIndex=Ae;const Ue=o.createSubContext(s.options,X);E&&Ue.delayNextStep(E),X===o.element&&(G=Ue.currentTimeline),Ut(this,s.animation,Ue),Ue.currentTimeline.applyStylesToKeyframe(),T=Math.max(T,Ue.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(T),G&&(o.currentTimeline.mergeTimelineCollectedStyles(G),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=s}visitStagger(s,o){const c=o.parentContext,g=o.currentTimeline,E=s.timings,T=Math.abs(E.duration),F=T*(o.currentQueryTotal-1);let G=T*o.currentQueryIndex;switch(E.duration<0?"reverse":E.easing){case"reverse":G=F-G;break;case"full":G=c.currentStaggerTime}const Ae=o.currentTimeline;G&&Ae.delayNextStep(G);const Ue=Ae.currentTime;Ut(this,s.animation,o),o.previousNode=s,c.currentStaggerTime=g.currentTime-Ue+(g.startTime-c.currentTimeline.startTime)}}const Ii={};class ee{constructor(s,o,c,g,E,T,F,G){this._driver=s,this.element=o,this.subInstructions=c,this._enterClassName=g,this._leaveClassName=E,this.errors=T,this.timelines=F,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ii,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=G||new he(this._driver,o,0),F.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(s,o){if(!s)return;const c=s;let g=this.options;null!=c.duration&&(g.duration=Ar(c.duration)),null!=c.delay&&(g.delay=Ar(c.delay));const E=c.params;if(E){let T=g.params;T||(T=this.options.params={}),Object.keys(E).forEach(F=>{(!o||!T.hasOwnProperty(F))&&(T[F]=ie(E[F],T,this.errors))})}}_copyOptions(){const s={};if(this.options){const o=this.options.params;if(o){const c=s.params={};Object.keys(o).forEach(g=>{c[g]=o[g]})}}return s}createSubContext(s=null,o,c){const g=o||this.element,E=new ee(this._driver,g,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(g,c||0));return E.previousNode=this.previousNode,E.currentAnimateTimings=this.currentAnimateTimings,E.options=this._copyOptions(),E.updateOptions(s),E.currentQueryIndex=this.currentQueryIndex,E.currentQueryTotal=this.currentQueryTotal,E.parentContext=this,this.subContextCount++,E}transformIntoNewTimeline(s){return this.previousNode=Ii,this.currentTimeline=this.currentTimeline.fork(this.element,s),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(s,o,c){const g={duration:o??s.duration,delay:this.currentTimeline.currentTime+(c??0)+s.delay,easing:""},E=new se(this._driver,s.element,s.keyframes,s.preStyleProps,s.postStyleProps,g,s.stretchStartingKeyframe);return this.timelines.push(E),g}incrementTime(s){this.currentTimeline.forwardTime(this.currentTimeline.duration+s)}delayNextStep(s){s>0&&this.currentTimeline.delayNextStep(s)}invokeQuery(s,o,c,g,E,T){let F=[];if(g&&F.push(this.element),s.length>0){s=(s=s.replace(xs,"."+this._enterClassName)).replace(Co,"."+this._leaveClassName);let X=this._driver.query(this.element,s,1!=c);0!==c&&(X=c<0?X.slice(X.length+c,X.length):X.slice(0,c)),F.push(...X)}return!E&&0==F.length&&T.push(function Be(l){return new ne.vHH(3014,!1)}()),F}}class he{constructor(s,o,c,g){this._driver=s,this.element=o,this.startTime=c,this._elementTimelineStylesLookup=g,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(s){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+s),o&&this.snapshotCurrentStyles()):this.startTime+=s}fork(s,o){return this.applyStylesToKeyframe(),new he(this._driver,s,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(s){this.applyStylesToKeyframe(),this.duration=s,this._loadKeyframe()}_updateStyle(s,o){this._localTimelineStyles.set(s,o),this._globalTimelineStyles.set(s,o),this._styleSummary.set(s,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(s){s&&this._previousKeyframe.set("easing",s);for(let[o,c]of this._globalTimelineStyles)this._backFill.set(o,c||S.l3),this._currentKeyframe.set(o,S.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(s,o,c,g){o&&this._previousKeyframe.set("easing",o);const E=g&&g.params||{},T=function ct(l,s){const o=new Map;let c;return l.forEach(g=>{if("*"===g){c=c||s.keys();for(let E of c)o.set(E,S.l3)}else vr(g,o)}),o}(s,this._globalTimelineStyles);for(let[F,G]of T){const X=ie(G,E,c);this._pendingStyles.set(F,X),this._localTimelineStyles.has(F)||this._backFill.set(F,this._globalTimelineStyles.get(F)??S.l3),this._updateStyle(F,X)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((s,o)=>{this._currentKeyframe.set(o,s)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((s,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,s)}))}snapshotCurrentStyles(){for(let[s,o]of this._localTimelineStyles)this._pendingStyles.set(s,o),this._updateStyle(s,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const s=[];for(let o in this._currentKeyframe)s.push(o);return s}mergeTimelineCollectedStyles(s){s._styleSummary.forEach((o,c)=>{const g=this._styleSummary.get(c);(!g||o.time>g.time)&&this._updateStyle(c,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const s=new Set,o=new Set,c=1===this._keyframes.size&&0===this.duration;let g=[];this._keyframes.forEach((F,G)=>{const X=vr(F,new Map,this._backFill);X.forEach((Ae,Ue)=>{Ae===S.k1?s.add(Ue):Ae===S.l3&&o.add(Ue)}),c||X.set("offset",G/this.duration),g.push(X)});const E=s.size?le(s.values()):[],T=o.size?le(o.values()):[];if(c){const F=g[0],G=new Map(F);F.set("offset",0),G.set("offset",1),g=[F,G]}return gs(this.element,g,E,T,this.duration,this.startTime,this.easing,!1)}}class se extends he{constructor(s,o,c,g,E,T,F=!1){super(s,o,T.delay),this.keyframes=c,this.preStyleProps=g,this.postStyleProps=E,this._stretchStartingKeyframe=F,this.timings={duration:T.duration,delay:T.delay,easing:T.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let s=this.keyframes,{delay:o,duration:c,easing:g}=this.timings;if(this._stretchStartingKeyframe&&o){const E=[],T=c+o,F=o/T,G=vr(s[0]);G.set("offset",0),E.push(G);const X=vr(s[0]);X.set("offset",Ie(F)),E.push(X);const Ae=s.length-1;for(let Ue=1;Ue<=Ae;Ue++){let st=vr(s[Ue]);const wt=st.get("offset");st.set("offset",Ie((o+wt*c)/T)),E.push(st)}c=T,o=0,g="",s=E}return gs(this.element,s,this.preStyleProps,this.postStyleProps,c,o,g,!0)}}function Ie(l,s=3){const o=Math.pow(10,s-1);return Math.round(l*o)/o}class Rt{}const we=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ce extends Rt{normalizePropertyName(s,o){return Dt(s)}normalizeStyleValue(s,o,c,g){let E="";const T=c.toString().trim();if(we.has(o)&&0!==c&&"0"!==c)if("number"==typeof c)E="px";else{const F=c.match(/^[+-]?[\d\.]+([a-z]*)$/);F&&0==F[1].length&&g.push(function ye(l,s){return new ne.vHH(3005,!1)}())}return T+E}}function We(l,s,o,c,g,E,T,F,G,X,Ae,Ue,st){return{type:0,element:l,triggerName:s,isRemovalTransition:g,fromState:o,fromStyles:E,toState:c,toStyles:T,timelines:F,queriedElements:G,preStyleProps:X,postStyleProps:Ae,totalTime:Ue,errors:st}}const _t={};class bt{constructor(s,o,c){this._triggerName=s,this.ast=o,this._stateStyles=c}match(s,o,c,g){return function Qt(l,s,o,c,g){return l.some(E=>E(s,o,c,g))}(this.ast.matchers,s,o,c,g)}buildStyles(s,o,c){let g=this._stateStyles.get("*");return void 0!==s&&(g=this._stateStyles.get(s?.toString())||g),g?g.buildStyles(o,c):new Map}build(s,o,c,g,E,T,F,G,X,Ae){const Ue=[],st=this.ast.options&&this.ast.options.params||_t,At=this.buildStyles(c,F&&F.params||_t,Ue),on=G&&G.params||_t,yn=this.buildStyles(g,on,Ue),br=new Set,si=new Map,ti=new Map,oi="void"===g,Lu={params:vn(on,st),delay:this.ast.options?.delay},oa=Ae?[]:Fi(s,o,this.ast.animation,E,T,At,yn,Lu,X,Ue);let vo=0;if(oa.forEach(Fu=>{vo=Math.max(Fu.duration+Fu.delay,vo)}),Ue.length)return We(o,this._triggerName,c,g,oi,At,yn,[],[],si,ti,vo,Ue);oa.forEach(Fu=>{const _d=Fu.element,Lm=dn(si,_d,new Set);Fu.preStyleProps.forEach(Vu=>Lm.add(Vu));const Ig=dn(ti,_d,new Set);Fu.postStyleProps.forEach(Vu=>Ig.add(Vu)),_d!==o&&br.add(_d)});const Eo=le(br.values());return We(o,this._triggerName,c,g,oi,At,yn,oa,Eo,si,ti,vo)}}function vn(l,s){const o=Vr(s);for(const c in l)l.hasOwnProperty(c)&&null!=l[c]&&(o[c]=l[c]);return o}class qn{constructor(s,o,c){this.styles=s,this.defaultParams=o,this.normalizer=c}buildStyles(s,o){const c=new Map,g=Vr(this.defaultParams);return Object.keys(s).forEach(E=>{const T=s[E];null!==T&&(g[E]=T)}),this.styles.styles.forEach(E=>{"string"!=typeof E&&E.forEach((T,F)=>{T&&(T=ie(T,g,o));const G=this.normalizer.normalizePropertyName(F,o);T=this.normalizer.normalizeStyleValue(F,G,T,o),c.set(F,T)})}),c}}class ai{constructor(s,o,c){this.name=s,this.ast=o,this._normalizer=c,this.transitionFactories=[],this.states=new Map,o.states.forEach(g=>{this.states.set(g.name,new qn(g.style,g.options&&g.options.params||{},c))}),ui(this.states,"true","1"),ui(this.states,"false","0"),o.transitions.forEach(g=>{this.transitionFactories.push(new bt(s,g,this.states))}),this.fallbackTransition=function Wi(l,s,o){return new bt(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(T,F)=>!0],options:null,queryCount:0,depCount:0},s)}(s,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(s,o,c,g){return this.transitionFactories.find(T=>T.match(s,o,c,g))||null}matchStyles(s,o,c){return this.fallbackTransition.buildStyles(s,o,c)}}function ui(l,s,o){l.has(s)?l.has(o)||l.set(o,l.get(s)):l.has(o)&&l.set(s,l.get(o))}const Qi=new Xs;class cs{constructor(s,o,c){this.bodyNode=s,this._driver=o,this._normalizer=c,this._animations=new Map,this._playersById=new Map,this.players=[]}register(s,o){const c=[],E=es(this._driver,o,c,[]);if(c.length)throw function Cn(l){return new ne.vHH(3503,!1)}();this._animations.set(s,E)}_buildPlayer(s,o,c){const g=s.element,E=Jt(this._normalizer,s.keyframes,o,c);return this._driver.animate(g,E,s.duration,s.delay,s.easing,[],!0)}create(s,o,c={}){const g=[],E=this._animations.get(s);let T;const F=new Map;if(E?(T=Fi(this._driver,o,E,Yn,Sr,new Map,new Map,c,Qi,g),T.forEach(Ae=>{const Ue=dn(F,Ae.element,new Map);Ae.postStyleProps.forEach(st=>Ue.set(st,null))})):(g.push(function kn(){return new ne.vHH(3300,!1)}()),T=[]),g.length)throw function pr(l){return new ne.vHH(3504,!1)}();F.forEach((Ae,Ue)=>{Ae.forEach((st,wt)=>{Ae.set(wt,this._driver.computeStyle(Ue,wt,S.l3))})});const X=jt(T.map(Ae=>{const Ue=F.get(Ae.element);return this._buildPlayer(Ae,new Map,Ue)}));return this._playersById.set(s,X),X.onDestroy(()=>this.destroy(s)),this.players.push(X),X}destroy(s){const o=this._getPlayer(s);o.destroy(),this._playersById.delete(s);const c=this.players.indexOf(o);c>=0&&this.players.splice(c,1)}_getPlayer(s){const o=this._playersById.get(s);if(!o)throw function Nt(l){return new ne.vHH(3301,!1)}();return o}listen(s,o,c,g){const E=Vn(o,"","","");return Nn(this._getPlayer(s),c,E,g),()=>{}}command(s,o,c,g){if("register"==c)return void this.register(s,g[0]);if("create"==c)return void this.create(s,o,g[0]||{});const E=this._getPlayer(s);switch(c){case"play":E.play();break;case"pause":E.pause();break;case"reset":E.reset();break;case"restart":E.restart();break;case"finish":E.finish();break;case"init":E.init();break;case"setPosition":E.setPosition(parseFloat(g[0]));break;case"destroy":this.destroy(s)}}}const er="ng-animate-queued",Hs="ng-animate-disabled",ua=[],ys={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},xo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Rs="__ng_removed";class bi{get params(){return this.options.params}constructor(s,o=""){this.namespaceId=o;const c=s&&s.hasOwnProperty("value");if(this.value=function Cs(l){return l??null}(c?s.value:s),c){const E=Vr(s);delete E.value,this.options=E}else this.options={};this.options.params||(this.options.params={})}absorbOptions(s){const o=s.params;if(o){const c=this.options.params;Object.keys(o).forEach(g=>{null==c[g]&&(c[g]=o[g])})}}}const Lr="void",Io=new bi(Lr);class oo{constructor(s,o,c){this.id=s,this.hostElement=o,this._engine=c,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+s,So(o,this._hostClassName)}listen(s,o,c,g){if(!this._triggers.has(o))throw function Jn(l,s){return new ne.vHH(3302,!1)}();if(null==c||0==c.length)throw function xe(l){return new ne.vHH(3303,!1)}();if(!function ns(l){return"start"==l||"done"==l}(c))throw function ge(l,s){return new ne.vHH(3400,!1)}();const E=dn(this._elementListeners,s,[]),T={name:o,phase:c,callback:g};E.push(T);const F=dn(this._engine.statesByElement,s,new Map);return F.has(o)||(So(s,Yi),So(s,Yi+"-"+o),F.set(o,Io)),()=>{this._engine.afterFlush(()=>{const G=E.indexOf(T);G>=0&&E.splice(G,1),this._triggers.has(o)||F.delete(o)})}}register(s,o){return!this._triggers.has(s)&&(this._triggers.set(s,o),!0)}_getTrigger(s){const o=this._triggers.get(s);if(!o)throw function Le(l){return new ne.vHH(3401,!1)}();return o}trigger(s,o,c,g=!0){const E=this._getTrigger(o),T=new pi(this.id,o,s);let F=this._engine.statesByElement.get(s);F||(So(s,Yi),So(s,Yi+"-"+o),this._engine.statesByElement.set(s,F=new Map));let G=F.get(o);const X=new bi(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&G&&X.absorbOptions(G.options),F.set(o,X),G||(G=Io),X.value!==Lr&&G.value===X.value){if(!function la(l,s){const o=Object.keys(l),c=Object.keys(s);if(o.length!=c.length)return!1;for(let g=0;g<o.length;g++){const E=o[g];if(!s.hasOwnProperty(E)||l[E]!==s[E])return!1}return!0}(G.params,X.params)){const on=[],yn=E.matchStyles(G.value,G.params,on),br=E.matchStyles(X.value,X.params,on);on.length?this._engine.reportError(on):this._engine.afterFlush(()=>{Qr(s,yn),Hn(s,br)})}return}const st=dn(this._engine.playersByElement,s,[]);st.forEach(on=>{on.namespaceId==this.id&&on.triggerName==o&&on.queued&&on.destroy()});let wt=E.matchTransition(G.value,X.value,s,X.params),At=!1;if(!wt){if(!g)return;wt=E.fallbackTransition,At=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:s,triggerName:o,transition:wt,fromState:G,toState:X,player:T,isFallbackTransition:At}),At||(So(s,er),T.onStart(()=>{Di(s,er)})),T.onDone(()=>{let on=this.players.indexOf(T);on>=0&&this.players.splice(on,1);const yn=this._engine.playersByElement.get(s);if(yn){let br=yn.indexOf(T);br>=0&&yn.splice(br,1)}}),this.players.push(T),st.push(T),T}deregister(s){this._triggers.delete(s),this._engine.statesByElement.forEach(o=>o.delete(s)),this._elementListeners.forEach((o,c)=>{this._elementListeners.set(c,o.filter(g=>g.name!=s))})}clearElementCache(s){this._engine.statesByElement.delete(s),this._elementListeners.delete(s);const o=this._engine.playersByElement.get(s);o&&(o.forEach(c=>c.destroy()),this._engine.playersByElement.delete(s))}_signalRemovalForInnerTriggers(s,o){const c=this._engine.driver.query(s,rr,!0);c.forEach(g=>{if(g[Rs])return;const E=this._engine.fetchNamespacesByElement(g);E.size?E.forEach(T=>T.triggerLeaveAnimation(g,o,!1,!0)):this.clearElementCache(g)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(g=>this.clearElementCache(g)))}triggerLeaveAnimation(s,o,c,g){const E=this._engine.statesByElement.get(s),T=new Map;if(E){const F=[];if(E.forEach((G,X)=>{if(T.set(X,G.value),this._triggers.has(X)){const Ae=this.trigger(s,X,Lr,g);Ae&&F.push(Ae)}}),F.length)return this._engine.markElementAsRemoved(this.id,s,!0,o,T),c&&jt(F).onDone(()=>this._engine.processLeaveNode(s)),!0}return!1}prepareLeaveAnimationListeners(s){const o=this._elementListeners.get(s),c=this._engine.statesByElement.get(s);if(o&&c){const g=new Set;o.forEach(E=>{const T=E.name;if(g.has(T))return;g.add(T);const G=this._triggers.get(T).fallbackTransition,X=c.get(T)||Io,Ae=new bi(Lr),Ue=new pi(this.id,T,s);this._engine.totalQueuedPlayers++,this._queue.push({element:s,triggerName:T,transition:G,fromState:X,toState:Ae,player:Ue,isFallbackTransition:!0})})}}removeNode(s,o){const c=this._engine;if(s.childElementCount&&this._signalRemovalForInnerTriggers(s,o),this.triggerLeaveAnimation(s,o,!0))return;let g=!1;if(c.totalAnimations){const E=c.players.length?c.playersByQueriedElement.get(s):[];if(E&&E.length)g=!0;else{let T=s;for(;T=T.parentNode;)if(c.statesByElement.get(T)){g=!0;break}}}if(this.prepareLeaveAnimationListeners(s),g)c.markElementAsRemoved(this.id,s,!1,o);else{const E=s[Rs];(!E||E===ys)&&(c.afterFlush(()=>this.clearElementCache(s)),c.destroyInnerAnimations(s),c._onRemovalComplete(s,o))}}insertNode(s,o){So(s,this._hostClassName)}drainQueuedTransitions(s){const o=[];return this._queue.forEach(c=>{const g=c.player;if(g.destroyed)return;const E=c.element,T=this._elementListeners.get(E);T&&T.forEach(F=>{if(F.name==c.triggerName){const G=Vn(E,c.triggerName,c.fromState.value,c.toState.value);G._data=s,Nn(c.player,F.phase,G,F.callback)}}),g.markedForDestroy?this._engine.afterFlush(()=>{g.destroy()}):o.push(c)}),this._queue=[],o.sort((c,g)=>{const E=c.transition.ast.depCount,T=g.transition.ast.depCount;return 0==E||0==T?E-T:this._engine.driver.containsElement(c.element,g.element)?1:-1})}destroy(s){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,s)}}class mr{_onRemovalComplete(s,o){this.onRemovalComplete(s,o)}constructor(s,o,c){this.bodyNode=s,this.driver=o,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(g,E)=>{}}get queuedPlayers(){const s=[];return this._namespaceList.forEach(o=>{o.players.forEach(c=>{c.queued&&s.push(c)})}),s}createNamespace(s,o){const c=new oo(s,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(c,o):(this.newHostElements.set(o,c),this.collectEnterElement(o)),this._namespaceLookup[s]=c}_balanceNamespaceList(s,o){const c=this._namespaceList,g=this.namespacesByHostElement;if(c.length-1>=0){let T=!1,F=this.driver.getParentElement(o);for(;F;){const G=g.get(F);if(G){const X=c.indexOf(G);c.splice(X+1,0,s),T=!0;break}F=this.driver.getParentElement(F)}T||c.unshift(s)}else c.push(s);return g.set(o,s),s}register(s,o){let c=this._namespaceLookup[s];return c||(c=this.createNamespace(s,o)),c}registerTrigger(s,o,c){let g=this._namespaceLookup[s];g&&g.register(o,c)&&this.totalAnimations++}destroy(s,o){s&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const c=this._fetchNamespace(s);this.namespacesByHostElement.delete(c.hostElement);const g=this._namespaceList.indexOf(c);g>=0&&this._namespaceList.splice(g,1),c.destroy(o),delete this._namespaceLookup[s]}))}_fetchNamespace(s){return this._namespaceLookup[s]}fetchNamespacesByElement(s){const o=new Set,c=this.statesByElement.get(s);if(c)for(let g of c.values())if(g.namespaceId){const E=this._fetchNamespace(g.namespaceId);E&&o.add(E)}return o}trigger(s,o,c,g){if(Vi(o)){const E=this._fetchNamespace(s);if(E)return E.trigger(o,c,g),!0}return!1}insertNode(s,o,c,g){if(!Vi(o))return;const E=o[Rs];if(E&&E.setForRemoval){E.setForRemoval=!1,E.setForMove=!0;const T=this.collectedLeaveElements.indexOf(o);T>=0&&this.collectedLeaveElements.splice(T,1)}if(s){const T=this._fetchNamespace(s);T&&T.insertNode(o,c)}g&&this.collectEnterElement(o)}collectEnterElement(s){this.collectedEnterElements.push(s)}markElementAsDisabled(s,o){o?this.disabledNodes.has(s)||(this.disabledNodes.add(s),So(s,Hs)):this.disabledNodes.has(s)&&(this.disabledNodes.delete(s),Di(s,Hs))}removeNode(s,o,c){if(Vi(o)){const g=s?this._fetchNamespace(s):null;g?g.removeNode(o,c):this.markElementAsRemoved(s,o,!1,c);const E=this.namespacesByHostElement.get(o);E&&E.id!==s&&E.removeNode(o,c)}else this._onRemovalComplete(o,c)}markElementAsRemoved(s,o,c,g,E){this.collectedLeaveElements.push(o),o[Rs]={namespaceId:s,setForRemoval:g,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:E}}listen(s,o,c,g,E){return Vi(o)?this._fetchNamespace(s).listen(o,c,g,E):()=>{}}_buildInstruction(s,o,c,g,E){return s.transition.build(this.driver,s.element,s.fromState.value,s.toState.value,c,g,s.fromState.options,s.toState.options,o,E)}destroyInnerAnimations(s){let o=this.driver.query(s,rr,!0);o.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(s,an,!0),o.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(s){const o=this.playersByElement.get(s);o&&o.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(s){const o=this.playersByQueriedElement.get(s);o&&o.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(s=>{if(this.players.length)return jt(this.players).onDone(()=>s());s()})}processLeaveNode(s){const o=s[Rs];if(o&&o.setForRemoval){if(s[Rs]=ys,o.namespaceId){this.destroyInnerAnimations(s);const c=this._fetchNamespace(o.namespaceId);c&&c.clearElementCache(s)}this._onRemovalComplete(s,o.setForRemoval)}s.classList?.contains(Hs)&&this.markElementAsDisabled(s,!1),this.driver.query(s,".ng-animate-disabled",!0).forEach(c=>{this.markElementAsDisabled(c,!1)})}flush(s=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,g)=>this._balanceNamespaceList(c,g)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)So(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{o=this._flushAnimations(c,s)}finally{for(let g=0;g<c.length;g++)c[g]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],o.length?jt(o).onDone(()=>{c.forEach(g=>g())}):c.forEach(g=>g())}}reportError(s){throw function He(l){return new ne.vHH(3402,!1)}()}_flushAnimations(s,o){const c=new Xs,g=[],E=new Map,T=[],F=new Map,G=new Map,X=new Map,Ae=new Set;this.disabledNodes.forEach(Wn=>{Ae.add(Wn);const Zn=this.driver.query(Wn,".ng-animate-queued",!0);for(let Er=0;Er<Zn.length;Er++)Ae.add(Zn[Er])});const Ue=this.bodyNode,st=Array.from(this.statesByElement.keys()),wt=rs(st,this.collectedEnterElements),At=new Map;let on=0;wt.forEach((Wn,Zn)=>{const Er=Yn+on++;At.set(Zn,Er),Wn.forEach(Li=>So(Li,Er))});const yn=[],br=new Set,si=new Set;for(let Wn=0;Wn<this.collectedLeaveElements.length;Wn++){const Zn=this.collectedLeaveElements[Wn],Er=Zn[Rs];Er&&Er.setForRemoval&&(yn.push(Zn),br.add(Zn),Er.hasAnimation?this.driver.query(Zn,".ng-star-inserted",!0).forEach(Li=>br.add(Li)):si.add(Zn))}const ti=new Map,oi=rs(st,Array.from(br));oi.forEach((Wn,Zn)=>{const Er=Sr+on++;ti.set(Zn,Er),Wn.forEach(Li=>So(Li,Er))}),s.push(()=>{wt.forEach((Wn,Zn)=>{const Er=At.get(Zn);Wn.forEach(Li=>Di(Li,Er))}),oi.forEach((Wn,Zn)=>{const Er=ti.get(Zn);Wn.forEach(Li=>Di(Li,Er))}),yn.forEach(Wn=>{this.processLeaveNode(Wn)})});const Lu=[],oa=[];for(let Wn=this._namespaceList.length-1;Wn>=0;Wn--)this._namespaceList[Wn].drainQueuedTransitions(o).forEach(Er=>{const Li=Er.player,vs=Er.element;if(Lu.push(Li),this.collectedEnterElements.length){const xa=vs[Rs];if(xa&&xa.setForMove){if(xa.previousTriggersValues&&xa.previousTriggersValues.has(Er.triggerName)){const Yf=xa.previousTriggersValues.get(Er.triggerName),pu=this.statesByElement.get(Er.element);if(pu&&pu.has(Er.triggerName)){const vd=pu.get(Er.triggerName);vd.value=Yf,pu.set(Er.triggerName,vd)}}return void Li.destroy()}}const Go=!Ue||!this.driver.containsElement(Ue,vs),io=ti.get(vs),oh=At.get(vs),Qs=this._buildInstruction(Er,c,oh,io,Go);if(Qs.errors&&Qs.errors.length)return void oa.push(Qs);if(Go)return Li.onStart(()=>Qr(vs,Qs.fromStyles)),Li.onDestroy(()=>Hn(vs,Qs.toStyles)),void g.push(Li);if(Er.isFallbackTransition)return Li.onStart(()=>Qr(vs,Qs.fromStyles)),Li.onDestroy(()=>Hn(vs,Qs.toStyles)),void g.push(Li);const iv=[];Qs.timelines.forEach(xa=>{xa.stretchStartingKeyframe=!0,this.disabledNodes.has(xa.element)||iv.push(xa)}),Qs.timelines=iv,c.append(vs,Qs.timelines),T.push({instruction:Qs,player:Li,element:vs}),Qs.queriedElements.forEach(xa=>dn(F,xa,[]).push(Li)),Qs.preStyleProps.forEach((xa,Yf)=>{if(xa.size){let pu=G.get(Yf);pu||G.set(Yf,pu=new Set),xa.forEach((vd,Tc)=>pu.add(Tc))}}),Qs.postStyleProps.forEach((xa,Yf)=>{let pu=X.get(Yf);pu||X.set(Yf,pu=new Set),xa.forEach((vd,Tc)=>pu.add(Tc))})});if(oa.length){const Wn=[];oa.forEach(Zn=>{Wn.push(function mt(l,s){return new ne.vHH(3505,!1)}())}),Lu.forEach(Zn=>Zn.destroy()),this.reportError(Wn)}const vo=new Map,Eo=new Map;T.forEach(Wn=>{const Zn=Wn.element;c.has(Zn)&&(Eo.set(Zn,Zn),this._beforeAnimationBuild(Wn.player.namespaceId,Wn.instruction,vo))}),g.forEach(Wn=>{const Zn=Wn.element;this._getPreviousPlayers(Zn,!1,Wn.namespaceId,Wn.triggerName,null).forEach(Li=>{dn(vo,Zn,[]).push(Li),Li.destroy()})});const Fu=yn.filter(Wn=>is(Wn,G,X)),_d=new Map;To(_d,this.driver,si,X,S.l3).forEach(Wn=>{is(Wn,G,X)&&Fu.push(Wn)});const Ig=new Map;wt.forEach((Wn,Zn)=>{To(Ig,this.driver,new Set(Wn),G,S.k1)}),Fu.forEach(Wn=>{const Zn=_d.get(Wn),Er=Ig.get(Wn);_d.set(Wn,new Map([...Zn?.entries()??[],...Er?.entries()??[]]))});const Vu=[],s_=[],rv={};T.forEach(Wn=>{const{element:Zn,player:Er,instruction:Li}=Wn;if(c.has(Zn)){if(Ae.has(Zn))return Er.onDestroy(()=>Hn(Zn,Li.toStyles)),Er.disabled=!0,Er.overrideTotalTime(Li.totalTime),void g.push(Er);let vs=rv;if(Eo.size>1){let io=Zn;const oh=[];for(;io=io.parentNode;){const Qs=Eo.get(io);if(Qs){vs=Qs;break}oh.push(io)}oh.forEach(Qs=>Eo.set(Qs,vs))}const Go=this._buildAnimation(Er.namespaceId,Li,vo,E,Ig,_d);if(Er.setRealPlayer(Go),vs===rv)Vu.push(Er);else{const io=this.playersByElement.get(vs);io&&io.length&&(Er.parentPlayer=jt(io)),g.push(Er)}}else Qr(Zn,Li.fromStyles),Er.onDestroy(()=>Hn(Zn,Li.toStyles)),s_.push(Er),Ae.has(Zn)&&g.push(Er)}),s_.forEach(Wn=>{const Zn=E.get(Wn.element);if(Zn&&Zn.length){const Er=jt(Zn);Wn.setRealPlayer(Er)}}),g.forEach(Wn=>{Wn.parentPlayer?Wn.syncPlayerEvents(Wn.parentPlayer):Wn.destroy()});for(let Wn=0;Wn<yn.length;Wn++){const Zn=yn[Wn],Er=Zn[Rs];if(Di(Zn,Sr),Er&&Er.hasAnimation)continue;let Li=[];if(F.size){let Go=F.get(Zn);Go&&Go.length&&Li.push(...Go);let io=this.driver.query(Zn,an,!0);for(let oh=0;oh<io.length;oh++){let Qs=F.get(io[oh]);Qs&&Qs.length&&Li.push(...Qs)}}const vs=Li.filter(Go=>!Go.destroyed);vs.length?Is(this,Zn,vs):this.processLeaveNode(Zn)}return yn.length=0,Vu.forEach(Wn=>{this.players.push(Wn),Wn.onDone(()=>{Wn.destroy();const Zn=this.players.indexOf(Wn);this.players.splice(Zn,1)}),Wn.play()}),Vu}afterFlush(s){this._flushFns.push(s)}afterFlushAnimationsDone(s){this._whenQuietFns.push(s)}_getPreviousPlayers(s,o,c,g,E){let T=[];if(o){const F=this.playersByQueriedElement.get(s);F&&(T=F)}else{const F=this.playersByElement.get(s);if(F){const G=!E||E==Lr;F.forEach(X=>{X.queued||!G&&X.triggerName!=g||T.push(X)})}}return(c||g)&&(T=T.filter(F=>!(c&&c!=F.namespaceId||g&&g!=F.triggerName))),T}_beforeAnimationBuild(s,o,c){const E=o.element,T=o.isRemovalTransition?void 0:s,F=o.isRemovalTransition?void 0:o.triggerName;for(const G of o.timelines){const X=G.element,Ae=X!==E,Ue=dn(c,X,[]);this._getPreviousPlayers(X,Ae,T,F,o.toState).forEach(wt=>{const At=wt.getRealPlayer();At.beforeDestroy&&At.beforeDestroy(),wt.destroy(),Ue.push(wt)})}Qr(E,o.fromStyles)}_buildAnimation(s,o,c,g,E,T){const F=o.triggerName,G=o.element,X=[],Ae=new Set,Ue=new Set,st=o.timelines.map(At=>{const on=At.element;Ae.add(on);const yn=on[Rs];if(yn&&yn.removedBeforeQueried)return new S.ZN(At.duration,At.delay);const br=on!==G,si=function bs(l){const s=[];return ao(l,s),s}((c.get(on)||ua).map(vo=>vo.getRealPlayer())).filter(vo=>!!vo.element&&vo.element===on),ti=E.get(on),oi=T.get(on),Lu=Jt(this._normalizer,At.keyframes,ti,oi),oa=this._buildPlayer(At,Lu,si);if(At.subTimeline&&g&&Ue.add(on),br){const vo=new pi(s,F,on);vo.setRealPlayer(oa),X.push(vo)}return oa});X.forEach(At=>{dn(this.playersByQueriedElement,At.element,[]).push(At),At.onDone(()=>function bo(l,s,o){let c=l.get(s);if(c){if(c.length){const g=c.indexOf(o);c.splice(g,1)}0==c.length&&l.delete(s)}return c}(this.playersByQueriedElement,At.element,At))}),Ae.forEach(At=>So(At,Fr));const wt=jt(st);return wt.onDestroy(()=>{Ae.forEach(At=>Di(At,Fr)),Hn(G,o.toStyles)}),Ue.forEach(At=>{dn(g,At,[]).push(wt)}),wt}_buildPlayer(s,o,c){return o.length>0?this.driver.animate(s.element,o,s.duration,s.delay,s.easing,c):new S.ZN(s.duration,s.delay)}}class pi{constructor(s,o,c){this.namespaceId=s,this.triggerName=o,this.element=c,this._player=new S.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(s){this._containsRealPlayer||(this._player=s,this._queuedCallbacks.forEach((o,c)=>{o.forEach(g=>Nn(s,c,void 0,g))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(s.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(s){this.totalTime=s}syncPlayerEvents(s){const o=this._player;o.triggerCallback&&s.onStart(()=>o.triggerCallback("start")),s.onDone(()=>this.finish()),s.onDestroy(()=>this.destroy())}_queueEvent(s,o){dn(this._queuedCallbacks,s,[]).push(o)}onDone(s){this.queued&&this._queueEvent("done",s),this._player.onDone(s)}onStart(s){this.queued&&this._queueEvent("start",s),this._player.onStart(s)}onDestroy(s){this.queued&&this._queueEvent("destroy",s),this._player.onDestroy(s)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(s){this.queued||this._player.setPosition(s)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(s){const o=this._player;o.triggerCallback&&o.triggerCallback(s)}}function Vi(l){return l&&1===l.nodeType}function Do(l,s){const o=l.style.display;return l.style.display=s??"none",o}function To(l,s,o,c,g){const E=[];o.forEach(G=>E.push(Do(G)));const T=[];c.forEach((G,X)=>{const Ae=new Map;G.forEach(Ue=>{const st=s.computeStyle(X,Ue,g);Ae.set(Ue,st),(!st||0==st.length)&&(X[Rs]=xo,T.push(X))}),l.set(X,Ae)});let F=0;return o.forEach(G=>Do(G,E[F++])),T}function rs(l,s){const o=new Map;if(l.forEach(F=>o.set(F,[])),0==s.length)return o;const g=new Set(s),E=new Map;function T(F){if(!F)return 1;let G=E.get(F);if(G)return G;const X=F.parentNode;return G=o.has(X)?X:g.has(X)?1:T(X),E.set(F,G),G}return s.forEach(F=>{const G=T(F);1!==G&&o.get(G).push(F)}),o}function So(l,s){l.classList?.add(s)}function Di(l,s){l.classList?.remove(s)}function Is(l,s,o){jt(o).onDone(()=>l.processLeaveNode(s))}function ao(l,s){for(let o=0;o<l.length;o++){const c=l[o];c instanceof S.ZE?ao(c.players,s):s.push(c)}}function is(l,s,o){const c=o.get(l);if(!c)return!1;let g=s.get(l);return g?c.forEach(E=>g.add(E)):s.set(l,c),o.delete(l),!0}class $i{constructor(s,o,c){this.bodyNode=s,this._driver=o,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(g,E)=>{},this._transitionEngine=new mr(s,o,c),this._timelineEngine=new cs(s,o,c),this._transitionEngine.onRemovalComplete=(g,E)=>this.onRemovalComplete(g,E)}registerTrigger(s,o,c,g,E){const T=s+"-"+g;let F=this._triggerCache[T];if(!F){const G=[],Ae=es(this._driver,E,G,[]);if(G.length)throw function Ot(l,s){return new ne.vHH(3404,!1)}();F=function Hr(l,s,o){return new ai(l,s,o)}(g,Ae,this._normalizer),this._triggerCache[T]=F}this._transitionEngine.registerTrigger(o,g,F)}register(s,o){this._transitionEngine.register(s,o)}destroy(s,o){this._transitionEngine.destroy(s,o)}onInsert(s,o,c,g){this._transitionEngine.insertNode(s,o,c,g)}onRemove(s,o,c){this._transitionEngine.removeNode(s,o,c)}disableAnimations(s,o){this._transitionEngine.markElementAsDisabled(s,o)}process(s,o,c,g){if("@"==c.charAt(0)){const[E,T]=Bn(c);this._timelineEngine.command(E,o,T,g)}else this._transitionEngine.trigger(s,o,c,g)}listen(s,o,c,g,E){if("@"==c.charAt(0)){const[T,F]=Bn(c);return this._timelineEngine.listen(T,o,F,E)}return this._transitionEngine.listen(s,o,c,g,E)}flush(s=-1){this._transitionEngine.flush(s)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(s){this._transitionEngine.afterFlushAnimationsDone(s)}}let ss=(()=>{class l{static#e=this.initialStylesByElement=new WeakMap;constructor(o,c,g){this._element=o,this._startStyles=c,this._endStyles=g,this._state=0;let E=l.initialStylesByElement.get(o);E||l.initialStylesByElement.set(o,E=new Map),this._initialStyles=E}start(){this._state<1&&(this._startStyles&&Hn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Hn(this._element,this._initialStyles),this._endStyles&&(Hn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(Qr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qr(this._element,this._endStyles),this._endStyles=null),Hn(this._element,this._initialStyles),this._state=3)}}return l})();function _a(l){let s=null;return l.forEach((o,c)=>{(function Oo(l){return"display"===l||"position"===l})(c)&&(s=s||new Map,s.set(c,o))}),s}class gu{constructor(s,o,c,g){this.element=s,this.keyframes=o,this.options=c,this._specialStyles=g,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(s=>s()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const s=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,s,this.options),this._finalKeyframe=s.length?s[s.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(s){const o=[];return s.forEach(c=>{o.push(Object.fromEntries(c))}),o}_triggerWebAnimation(s,o,c){return s.animate(this._convertKeyframesToObject(o),c)}onStart(s){this._originalOnStartFns.push(s),this._onStartFns.push(s)}onDone(s){this._originalOnDoneFns.push(s),this._onDoneFns.push(s)}onDestroy(s){this._onDestroyFns.push(s)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(s=>s()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(s=>s()),this._onDestroyFns=[])}setPosition(s){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=s*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const s=new Map;this.hasStarted()&&this._finalKeyframe.forEach((c,g)=>{"offset"!==g&&s.set(g,this._finished?c:Ln(this.element,g))}),this.currentSnapshot=s}triggerCallback(s){const o="start"===s?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}class ju{validateStyleProperty(s){return!0}validateAnimatableStyleProperty(s){return!0}matchesElement(s,o){return!1}containsElement(s,o){return Ai(s,o)}getParentElement(s){return fn(s)}query(s,o,c){return yi(s,o,c)}computeStyle(s,o,c){return window.getComputedStyle(s)[o]}animate(s,o,c,g,E,T=[]){const G={duration:c,delay:g,fill:0==g?"both":"forwards"};E&&(G.easing=E);const X=new Map,Ae=T.filter(wt=>wt instanceof gu);(function Pn(l,s){return 0===l||0===s})(c,g)&&Ae.forEach(wt=>{wt.currentSnapshot.forEach((At,on)=>X.set(on,At))});let Ue=function Br(l){return l.length?l[0]instanceof Map?l:l.map(s=>Dn(s)):[]}(o).map(wt=>vr(wt));Ue=function hn(l,s,o){if(o.size&&s.length){let c=s[0],g=[];if(o.forEach((E,T)=>{c.has(T)||g.push(T),c.set(T,E)}),g.length)for(let E=1;E<s.length;E++){let T=s[E];g.forEach(F=>T.set(F,Ln(l,F)))}}return s}(s,Ue,X);const st=function ca(l,s){let o=null,c=null;return Array.isArray(s)&&s.length?(o=_a(s[0]),s.length>1&&(c=_a(s[s.length-1]))):s instanceof Map&&(o=_a(s)),o||c?new ss(l,o,c):null}(s,Ue);return new gu(s,Ue,G,st)}}var Hu=U(6814);let va=(()=>{class l extends S._j{constructor(o,c){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(c.body,{id:"0",encapsulation:ne.ifc.None,styles:[],data:{animation:[]}})}build(o){const c=this._nextAnimationId.toString();this._nextAnimationId++;const g=Array.isArray(o)?(0,S.vP)(o):o;return yu(this._renderer,null,c,"register",[g]),new Oa(c,this._renderer)}static#e=this.\u0275fac=function(c){return new(c||l)(ne.LFG(ne.FYo),ne.LFG(Hu.K0))};static#t=this.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac})}return l})();class Oa extends S.LC{constructor(s,o){super(),this._id=s,this._renderer=o}create(s,o){return new mu(this._id,s,o||{},this._renderer)}}class mu{constructor(s,o,c,g){this.id=s,this.element=o,this._renderer=g,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(s,o){return this._renderer.listen(this.element,`@@${this.id}:${s}`,o)}_command(s,...o){return yu(this._renderer,this.element,this.id,s,o)}onDone(s){this._listen("done",s)}onStart(s){this._listen("start",s)}onDestroy(s){this._listen("destroy",s)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(s){this._command("setPosition",s)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function yu(l,s,o,c,g){return l.setProperty(s,`@@${o}:${c}`,g)}const ko="@.disabled";let _u=(()=>{class l{constructor(o,c,g){this.delegate=o,this.engine=c,this._zone=g,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,c.onRemovalComplete=(E,T)=>{const F=T?.parentNode(E);F&&T.removeChild(F,E)}}createRenderer(o,c){const E=this.delegate.createRenderer(o,c);if(!(o&&c&&c.data&&c.data.animation)){let Ae=this._rendererCache.get(E);return Ae||(Ae=new Ja("",E,this.engine,()=>this._rendererCache.delete(E)),this._rendererCache.set(E,Ae)),Ae}const T=c.id,F=c.id+"-"+this._currentId;this._currentId++,this.engine.register(F,o);const G=Ae=>{Array.isArray(Ae)?Ae.forEach(G):this.engine.registerTrigger(T,F,o,Ae.name,Ae)};return c.data.animation.forEach(G),new uo(this,F,E,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(o,c,g){o>=0&&o<this._microtaskId?this._zone.run(()=>c(g)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(E=>{const[T,F]=E;T(F)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,g]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(c){return new(c||l)(ne.LFG(ne.FYo),ne.LFG($i),ne.LFG(ne.R0b))};static#t=this.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac})}return l})();class Ja{constructor(s,o,c,g){this.namespaceId=s,this.delegate=o,this.engine=c,this._onDestroy=g}get data(){return this.delegate.data}destroyNode(s){this.delegate.destroyNode?.(s)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(s,o){return this.delegate.createElement(s,o)}createComment(s){return this.delegate.createComment(s)}createText(s){return this.delegate.createText(s)}appendChild(s,o){this.delegate.appendChild(s,o),this.engine.onInsert(this.namespaceId,o,s,!1)}insertBefore(s,o,c,g=!0){this.delegate.insertBefore(s,o,c),this.engine.onInsert(this.namespaceId,o,s,g)}removeChild(s,o,c){this.engine.onRemove(this.namespaceId,o,this.delegate)}selectRootElement(s,o){return this.delegate.selectRootElement(s,o)}parentNode(s){return this.delegate.parentNode(s)}nextSibling(s){return this.delegate.nextSibling(s)}setAttribute(s,o,c,g){this.delegate.setAttribute(s,o,c,g)}removeAttribute(s,o,c){this.delegate.removeAttribute(s,o,c)}addClass(s,o){this.delegate.addClass(s,o)}removeClass(s,o){this.delegate.removeClass(s,o)}setStyle(s,o,c,g){this.delegate.setStyle(s,o,c,g)}removeStyle(s,o,c){this.delegate.removeStyle(s,o,c)}setProperty(s,o,c){"@"==o.charAt(0)&&o==ko?this.disableAnimations(s,!!c):this.delegate.setProperty(s,o,c)}setValue(s,o){this.delegate.setValue(s,o)}listen(s,o,c){return this.delegate.listen(s,o,c)}disableAnimations(s,o){this.engine.disableAnimations(s,o)}}class uo extends Ja{constructor(s,o,c,g,E){super(o,c,g,E),this.factory=s,this.namespaceId=o}setProperty(s,o,c){"@"==o.charAt(0)?"."==o.charAt(1)&&o==ko?this.disableAnimations(s,c=void 0===c||!!c):this.engine.process(this.namespaceId,s,o.slice(1),c):this.delegate.setProperty(s,o,c)}listen(s,o,c){if("@"==o.charAt(0)){const g=function lo(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(s);let E=o.slice(1),T="";return"@"!=E.charAt(0)&&([E,T]=function da(l){const s=l.indexOf(".");return[l.substring(0,s),l.slice(s+1)]}(E)),this.engine.listen(this.namespaceId,g,E,T,F=>{this.factory.scheduleListenerCallback(F._data||-1,c,F)})}return this.delegate.listen(s,o,c)}}const $u=[{provide:S._j,useClass:va},{provide:Rt,useFactory:function zo(){return new Ce}},{provide:$i,useClass:(()=>{class l extends $i{constructor(o,c,g,E){super(o.body,c,g)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(c){return new(c||l)(ne.LFG(Hu.K0),ne.LFG(An),ne.LFG(Rt),ne.LFG(ne.z2F))};static#t=this.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac})}return l})()},{provide:ne.FYo,useFactory:function ci(l,s,o){return new _u(l,s,o)},deps:[w.se,$i,ne.R0b]}],ar=[{provide:An,useFactory:()=>new ju},{provide:ne.QbO,useValue:"BrowserAnimations"},...$u],eu=[{provide:An,useClass:zn},{provide:ne.QbO,useValue:"NoopAnimations"},...$u];let pl=(()=>{class l{static withConfig(o){return{ngModule:l,providers:o.disableAnimations?eu:ar}}static#e=this.\u0275fac=function(c){return new(c||l)};static#t=this.\u0275mod=ne.oAB({type:l});static#n=this.\u0275inj=ne.cJS({providers:ar,imports:[w.b2]})}return l})();var qo=U(8113);let Ko=(()=>{class l{title="angularfiebase-authentication";static \u0275fac=function(c){return new(c||l)};static \u0275cmp=ne.Xpm({type:l,selectors:[["app-root"]],decls:1,vars:0,template:function(c,g){1&c&&ne._UZ(0,"router-outlet")},dependencies:[qo.lC]})}return l})();var Js=U(6304),H=U(7046),K=U(5592),L=U(2096),Q=U(2459),Me=U(6321),cn=U(9360),Fn=U(8251),di=U(7398),Fo=U(4664),Xi=U(1966),ka=U(3106),Zo=U(5861),Yo=U(6122),me=U(9058),ha=U(4537);const gl="firebasestorage.googleapis.com",Gu="storageBucket";class Ri extends me.ZR{constructor(s,o,c=0){super(eo(s),`Firebase Storage: ${o} (${eo(s)})`),this.status_=c,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ri.prototype)}get status(){return this.status_}set status(s){this.status_=s}_codeEquals(s){return eo(s)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(s){this.customData.serverResponse=s,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var gi=function(l){return l.UNKNOWN="unknown",l.OBJECT_NOT_FOUND="object-not-found",l.BUCKET_NOT_FOUND="bucket-not-found",l.PROJECT_NOT_FOUND="project-not-found",l.QUOTA_EXCEEDED="quota-exceeded",l.UNAUTHENTICATED="unauthenticated",l.UNAUTHORIZED="unauthorized",l.UNAUTHORIZED_APP="unauthorized-app",l.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",l.INVALID_CHECKSUM="invalid-checksum",l.CANCELED="canceled",l.INVALID_EVENT_NAME="invalid-event-name",l.INVALID_URL="invalid-url",l.INVALID_DEFAULT_BUCKET="invalid-default-bucket",l.NO_DEFAULT_BUCKET="no-default-bucket",l.CANNOT_SLICE_BLOB="cannot-slice-blob",l.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",l.NO_DOWNLOAD_URL="no-download-url",l.INVALID_ARGUMENT="invalid-argument",l.INVALID_ARGUMENT_COUNT="invalid-argument-count",l.APP_DELETED="app-deleted",l.INVALID_ROOT_OPERATION="invalid-root-operation",l.INVALID_FORMAT="invalid-format",l.INTERNAL_ERROR="internal-error",l.UNSUPPORTED_ENVIRONMENT="unsupported-environment",l}(gi||{});function eo(l){return"storage/"+l}function Ea(){return new Ri(gi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Cu(){return new Ri(gi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vo(){return new Ri(gi.CANCELED,"User canceled the upload/download.")}function Qo(){return new Ri(gi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Z(l){return new Ri(gi.INVALID_ARGUMENT,l)}function De(){return new Ri(gi.APP_DELETED,"The Firebase app was deleted.")}function lt(l){return new Ri(gi.INVALID_ROOT_OPERATION,"The operation '"+l+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ct(l,s){return new Ri(gi.INVALID_FORMAT,"String does not match format '"+l+"': "+s)}function En(l){throw new Ri(gi.INTERNAL_ERROR,"Internal error: "+l)}class lr{constructor(s,o){this.bucket=s,this.path_=o}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const s=encodeURIComponent;return"/b/"+s(this.bucket)+"/o/"+s(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(s,o){let c;try{c=lr.makeFromUrl(s,o)}catch{return new lr(s,"")}if(""===c.path)return c;throw function Zl(l){return new Ri(gi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+l+"'.")}(s)}static makeFromUrl(s,o){let c=null;const g="([A-Za-z0-9.\\-_]+)",F=new RegExp("^gs://"+g+"(/(.*))?$","i");function X(oi){oi.path_=decodeURIComponent(oi.path)}const Ue=o.replace(/[.]/g,"\\."),ti=[{regex:F,indices:{bucket:1,path:3},postModify:function E(oi){"/"===oi.path.charAt(oi.path.length-1)&&(oi.path_=oi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ue}/v[A-Za-z0-9_]+/b/${g}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:X},{regex:new RegExp(`^https?://${o===gl?"(?:storage.googleapis.com|storage.cloud.google.com)":o}/${g}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:X}];for(let oi=0;oi<ti.length;oi++){const Lu=ti[oi],oa=Lu.regex.exec(s);if(oa){let Eo=oa[Lu.indices.path];Eo||(Eo=""),c=new lr(oa[Lu.indices.bucket],Eo),Lu.postModify(c);break}}if(null==c)throw function Uo(l){return new Ri(gi.INVALID_URL,"Invalid URL '"+l+"'.")}(s);return c}}class yr{constructor(s){this.promise_=Promise.reject(s)}getPromise(){return this.promise_}cancel(s=!1){}}function qi(l){return"string"==typeof l||l instanceof String}function Un(l){return Ps()&&l instanceof Blob}function Ps(){return typeof Blob<"u"&&!(0,me.UG)()}function Ao(l,s,o,c){if(c<s)throw Z(`Invalid value for '${l}'. Expected ${s} or greater.`);if(c>o)throw Z(`Invalid value for '${l}'. Expected ${o} or less.`)}function Gs(l,s,o){let c=s;return null==o&&(c=`https://${s}`),`${o}://${c}/v0${l}`}function zs(l){const s=encodeURIComponent;let o="?";for(const c in l)l.hasOwnProperty(c)&&(o=o+(s(c)+"=")+s(l[c])+"&");return o=o.slice(0,-1),o}var hi=function(l){return l[l.NO_ERROR=0]="NO_ERROR",l[l.NETWORK_ERROR=1]="NETWORK_ERROR",l[l.ABORT=2]="ABORT",l}(hi||{});function Mc(l,s){const o=l>=500&&l<600,g=-1!==[408,429].indexOf(l),E=-1!==s.indexOf(l);return o||g||E}class as{constructor(s,o,c,g,E,T,F,G,X,Ae,Ue,st=!0){this.url_=s,this.method_=o,this.headers_=c,this.body_=g,this.successCodes_=E,this.additionalRetryCodes_=T,this.callback_=F,this.errorCallback_=G,this.timeout_=X,this.progressCallback_=Ae,this.connectionFactory_=Ue,this.retry=st,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((wt,At)=>{this.resolve_=wt,this.reject_=At,this.start_()})}start_(){const o=(c,g)=>{const E=this.resolve_,T=this.reject_,F=g.connection;if(g.wasSuccessCode)try{const G=this.callback_(F,F.getResponse());!function Ti(l){return void 0!==l}(G)?E():E(G)}catch(G){T(G)}else if(null!==F){const G=Ea();G.serverResponse=F.getErrorText(),T(this.errorCallback_?this.errorCallback_(F,G):G)}else T(g.canceled?this.appDelete_?De():Vo():Cu())};this.canceled_?o(0,new zu(!1,null,!0)):this.backoffId_=function hr(l,s,o){let c=1,g=null,E=null,T=!1,F=0;function G(){return 2===F}let X=!1;function Ae(...yn){X||(X=!0,s.apply(null,yn))}function Ue(yn){g=setTimeout(()=>{g=null,l(wt,G())},yn)}function st(){E&&clearTimeout(E)}function wt(yn,...br){if(X)return void st();if(yn)return st(),void Ae.call(null,yn,...br);if(G()||T)return st(),void Ae.call(null,yn,...br);let ti;c<64&&(c*=2),1===F?(F=2,ti=0):ti=1e3*(c+Math.random()),Ue(ti)}let At=!1;function on(yn){At||(At=!0,st(),!X&&(null!==g?(yn||(F=2),clearTimeout(g),Ue(0)):yn||(F=1)))}return Ue(0),E=setTimeout(()=>{T=!0,on(!0)},o),on}((c,g)=>{if(g)return void c(!1,new zu(!1,null,!0));const E=this.connectionFactory_();this.pendingConnection_=E;const T=F=>{null!==this.progressCallback_&&this.progressCallback_(F.loaded,F.lengthComputable?F.total:-1)};null!==this.progressCallback_&&E.addUploadProgressListener(T),E.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&E.removeUploadProgressListener(T),this.pendingConnection_=null;const F=E.getErrorCode()===hi.NO_ERROR,G=E.getStatus();if(!F||Mc(G,this.additionalRetryCodes_)&&this.retry){const Ae=E.getErrorCode()===hi.ABORT;return void c(!1,new zu(!1,null,Ae))}const X=-1!==this.successCodes_.indexOf(G);c(!0,new zu(X,E))})},o,this.timeout_)}getPromise(){return this.promise_}cancel(s){this.canceled_=!0,this.appDelete_=s||!1,null!==this.backoffId_&&function Xn(l){l(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class zu{constructor(s,o,c){this.wasSuccessCode=s,this.connection=o,this.canceled=!!c}}function Iu(...l){const s=function tr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==s){const o=new s;for(let c=0;c<l.length;c++)o.append(l[c]);return o.getBlob()}if(Ps())return new Blob(l);throw new Ri(gi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const _s={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ht{constructor(s,o){this.data=s,this.contentType=o||null}}function Xr(l,s){switch(l){case _s.RAW:return new Ht(ks(s));case _s.BASE64:case _s.BASE64URL:return new Ht(Kt(l,s));case _s.DATA_URL:return new Ht(function Rc(l){const s=new $n(l);return s.base64?Kt(_s.BASE64,s.rest):function Wu(l){let s;try{s=decodeURIComponent(l)}catch{throw Ct(_s.DATA_URL,"Malformed data URL.")}return ks(s)}(s.rest)}(s),function en(l){return new $n(l).contentType}(s))}throw Ea()}function ks(l){const s=[];for(let o=0;o<l.length;o++){let c=l.charCodeAt(o);c<=127?s.push(c):c<=2047?s.push(192|c>>6,128|63&c):55296==(64512&c)?o<l.length-1&&56320==(64512&l.charCodeAt(o+1))?(c=65536|(1023&c)<<10|1023&l.charCodeAt(++o),s.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|63&c)):s.push(239,191,189):56320==(64512&c)?s.push(239,191,189):s.push(224|c>>12,128|c>>6&63,128|63&c)}return new Uint8Array(s)}function Kt(l,s){switch(l){case _s.BASE64:{const g=-1!==s.indexOf("-"),E=-1!==s.indexOf("_");if(g||E)throw Ct(l,"Invalid character '"+(g?"-":"_")+"' found: is it base64url encoded?");break}case _s.BASE64URL:{const g=-1!==s.indexOf("+"),E=-1!==s.indexOf("/");if(g||E)throw Ct(l,"Invalid character '"+(g?"+":"/")+"' found: is it base64 encoded?");s=s.replace(/-/g,"+").replace(/_/g,"/");break}}let o;try{o=function Ws(l){if(typeof atob>"u")throw function B(l){return new Ri(gi.UNSUPPORTED_ENVIRONMENT,`${l} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(l)}(s)}catch(g){throw g.message.includes("polyfill")?g:Ct(l,"Invalid character found")}const c=new Uint8Array(o.length);for(let g=0;g<o.length;g++)c[g]=o.charCodeAt(g);return c}class $n{constructor(s){this.base64=!1,this.contentType=null;const o=s.match(/^data:([^,]+)?,/);if(null===o)throw Ct(_s.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const c=o[1]||null;null!=c&&(this.base64=function ft(l,s){return l.length>=s.length&&l.substring(l.length-s.length)===s}(c,";base64"),this.contentType=this.base64?c.substring(0,c.length-7):c),this.rest=s.substring(s.indexOf(",")+1)}}class Pt{constructor(s,o){let c=0,g="";Un(s)?(this.data_=s,c=s.size,g=s.type):s instanceof ArrayBuffer?(o?this.data_=new Uint8Array(s):(this.data_=new Uint8Array(s.byteLength),this.data_.set(new Uint8Array(s))),c=this.data_.length):s instanceof Uint8Array&&(o?this.data_=s:(this.data_=new Uint8Array(s.length),this.data_.set(s)),c=s.length),this.size_=c,this.type_=g}size(){return this.size_}type(){return this.type_}slice(s,o){if(Un(this.data_)){const g=function Bo(l,s,o){return l.webkitSlice?l.webkitSlice(s,o):l.mozSlice?l.mozSlice(s,o):l.slice?l.slice(s,o):null}(this.data_,s,o);return null===g?null:new Pt(g)}{const c=new Uint8Array(this.data_.buffer,s,o-s);return new Pt(c,!0)}}static getBlob(...s){if(Ps()){const o=s.map(c=>c instanceof Pt?c.data_:c);return new Pt(Iu.apply(null,o))}{const o=s.map(T=>qi(T)?Xr(_s.RAW,T).data:T.data_);let c=0;o.forEach(T=>{c+=T.byteLength});const g=new Uint8Array(c);let E=0;return o.forEach(T=>{for(let F=0;F<T.length;F++)g[E++]=T[F]}),new Pt(g,!0)}}uploadData(){return this.data_}}function Ni(l){let s;try{s=JSON.parse(l)}catch{return null}return function Gi(l){return"object"==typeof l&&!Array.isArray(l)}(s)?s:null}function qu(l){const s=l.lastIndexOf("/",l.length-2);return-1===s?l:l.slice(s+1)}function uh(l,s){return s}class hs{constructor(s,o,c,g){this.server=s,this.local=o||s,this.writable=!!c,this.xform=g||uh}}let Va=null;function bu(){if(Va)return Va;const l=[];l.push(new hs("bucket")),l.push(new hs("generation")),l.push(new hs("metageneration")),l.push(new hs("name","fullPath",!0));const o=new hs("name");o.xform=function s(E,T){return function _l(l){return!qi(l)||l.length<2?l:qu(l)}(T)},l.push(o);const g=new hs("size");return g.xform=function c(E,T){return void 0!==T?Number(T):T},l.push(g),l.push(new hs("timeCreated")),l.push(new hs("updated")),l.push(new hs("md5Hash",null,!0)),l.push(new hs("cacheControl",null,!0)),l.push(new hs("contentDisposition",null,!0)),l.push(new hs("contentEncoding",null,!0)),l.push(new hs("contentLanguage",null,!0)),l.push(new hs("contentType",null,!0)),l.push(new hs("metadata","customMetadata",!0)),Va=l,Va}function vl(l,s,o){const c=Ni(s);return null===c?null:function Nc(l,s,o){const c={type:"file"},g=o.length;for(let E=0;E<g;E++){const T=o[E];c[T.local]=T.xform(c,s[T.server])}return function Yl(l,s){Object.defineProperty(l,"ref",{get:function o(){const E=new lr(l.bucket,l.fullPath);return s._makeStorageReference(E)}})}(c,l),c}(l,c,o)}function Xo(l,s){const o={},c=s.length;for(let g=0;g<c;g++){const E=s[g];E.writable&&(o[E.server]=l[E.local])}return JSON.stringify(o)}const Ql="prefixes",Pi="items";class fr{constructor(s,o,c,g){this.url=s,this.method=o,this.handler=c,this.timeout=g,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fa(l){if(!l)throw Ea()}function Rr(l,s){return function o(c,g){const E=vl(l,g,s);return fa(null!==E),E}}function wa(l){return function s(o,c){let g;return g=401===o.getStatus()?o.getErrorText().includes("Firebase App Check token is invalid")?function La(){return new Ri(gi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Kl(){return new Ri(gi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===o.getStatus()?function nu(l){return new Ri(gi.QUOTA_EXCEEDED,"Quota for bucket '"+l+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(l.bucket):403===o.getStatus()?function $s(l){return new Ri(gi.UNAUTHORIZED,"User does not have permission to access '"+l+"'.")}(l.path):c,g.status=o.getStatus(),g.serverResponse=c.serverResponse,g}}function Jo(l){const s=wa(l);return function o(c,g){let E=s(c,g);return 404===c.getStatus()&&(E=function Ac(l){return new Ri(gi.OBJECT_NOT_FOUND,"Object '"+l+"' does not exist.")}(l.path)),E.serverResponse=g.serverResponse,E}}function lh(l,s,o){const g=Gs(s.fullServerUrl(),l.host,l._protocol),T=l.maxOperationRetryTime,F=new fr(g,"GET",Rr(l,o),T);return F.errorHandler=Jo(s),F}function ea(l,s,o,c,g){const E={};E.prefix=s.isRoot?"":s.path+"/",o&&o.length>0&&(E.delimiter=o),c&&(E.pageToken=c),g&&(E.maxResults=g);const F=Gs(s.bucketOnlyServerUrl(),l.host,l._protocol),X=l.maxOperationRetryTime,Ae=new fr(F,"GET",function un(l,s){return function o(c,g){const E=function Mo(l,s,o){const c=Ni(o);return null===c?null:function Gn(l,s,o){const c={prefixes:[],items:[],nextPageToken:o.nextPageToken};if(o[Ql])for(const g of o[Ql]){const E=g.replace(/\/$/,""),T=l._makeStorageReference(new lr(s,E));c.prefixes.push(T)}if(o[Pi])for(const g of o[Pi]){const E=l._makeStorageReference(new lr(s,g.name));c.items.push(E)}return c}(l,s,c)}(l,s,g);return fa(null!==E),E}}(l,s.bucket),X);return Ae.urlParams=E,Ae.errorHandler=wa(s),Ae}function P(l,s,o){const c=Object.assign({},o);return c.fullPath=l.path,c.size=s.size(),c.contentType||(c.contentType=function b(l,s){return l&&l.contentType||s&&s.type()||"application/octet-stream"}(null,s)),c}class de{constructor(s,o,c,g){this.current=s,this.total=o,this.finalized=!!c,this.metadata=g||null}}function ce(l,s){let o=null;try{o=l.getResponseHeader("X-Goog-Upload-Status")}catch{fa(!1)}return fa(!!o&&-1!==(s||["active"]).indexOf(o)),o}const Wr={STATE_CHANGED:"state_changed"},ni={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ca(l){switch(l){case"running":case"pausing":case"canceling":return ni.RUNNING;case"paused":return ni.PAUSED;case"success":return ni.SUCCESS;case"canceled":return ni.CANCELED;default:return ni.ERROR}}class pa{constructor(s,o,c){if(function mi(l){return"function"==typeof l}(s)||null!=o||null!=c)this.next=s,this.error=o??void 0,this.complete=c??void 0;else{const E=s;this.next=E.next,this.error=E.error,this.complete=E.complete}}}function qs(l){return(...s)=>{Promise.resolve().then(()=>l(...s))}}let Zu=null;class wl{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hi.NO_ERROR,this.sendPromise_=new Promise(s=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hi.ABORT,s()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hi.NETWORK_ERROR,s()}),this.xhr_.addEventListener("load",()=>{s()})})}send(s,o,c,g){if(this.sent_)throw En("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(o,s,!0),void 0!==g)for(const E in g)g.hasOwnProperty(E)&&this.xhr_.setRequestHeader(E,g[E].toString());return void 0!==c?this.xhr_.send(c):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw En("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw En("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw En("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw En("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(s){return this.xhr_.getResponseHeader(s)}addUploadProgressListener(s){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",s)}removeUploadProgressListener(s){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",s)}}class Jf extends wl{initXhr(){this.xhr_.responseType="text"}}function ta(){return Zu?Zu():new Jf}class Zs{constructor(s,o,c=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=s,this._blob=o,this._metadata=c,this._mappings=bu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=g=>{if(this._request=void 0,this._chunkMultiplier=1,g._codeEquals(gi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const E=this.isExponentialBackoffExpired();if(Mc(g.status,[])){if(!E)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();g=Cu()}this._error=g,this._transition("error")}},this._metadataErrorHandler=g=>{this._request=void 0,g._codeEquals(gi.CANCELED)?this.completeTransitions_():(this._error=g,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((g,E)=>{this._resolve=g,this._reject=E,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const s=this._transferred;return o=>this._updateProgress(s+o)}_shouldDoResumable(s){return s.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(s){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([o,c])=>{switch(this._state){case"running":s(o,c);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((s,o)=>{const c=function tt(l,s,o,c,g){const E=s.bucketOnlyServerUrl(),T=P(s,c,g),F={name:T.fullPath},G=Gs(E,l.host,l._protocol),Ae={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${c.size()}`,"X-Goog-Upload-Header-Content-Type":T.contentType,"Content-Type":"application/json; charset=utf-8"},Ue=Xo(T,o),At=new fr(G,"POST",function wt(on){let yn;ce(on);try{yn=on.getResponseHeader("X-Goog-Upload-URL")}catch{fa(!1)}return fa(qi(yn)),yn},l.maxUploadRetryTime);return At.urlParams=F,At.headers=Ae,At.body=Ue,At.errorHandler=wa(s),At}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),g=this._ref.storage._makeRequest(c,ta,s,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._uploadUrl=E,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const s=this._uploadUrl;this._resolveToken((o,c)=>{const g=function be(l,s,o,c){const G=new fr(o,"POST",function E(X){const Ae=ce(X,["active","final"]);let Ue=null;try{Ue=X.getResponseHeader("X-Goog-Upload-Size-Received")}catch{fa(!1)}Ue||fa(!1);const st=Number(Ue);return fa(!isNaN(st)),new de(st,c.size(),"final"===Ae)},l.maxUploadRetryTime);return G.headers={"X-Goog-Upload-Command":"query"},G.errorHandler=wa(s),G}(this._ref.storage,this._ref._location,s,this._blob),E=this._ref.storage._makeRequest(g,ta,o,c);this._request=E,E.getPromise().then(T=>{this._request=void 0,this._updateProgress(T.current),this._needToFetchStatus=!1,T.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const s=262144*this._chunkMultiplier,o=new de(this._transferred,this._blob.size()),c=this._uploadUrl;this._resolveToken((g,E)=>{let T;try{T=function _n(l,s,o,c,g,E,T,F){const G=new de(0,0);if(T?(G.current=T.current,G.total=T.total):(G.current=0,G.total=c.size()),c.size()!==G.total)throw function R(){return new Ri(gi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const X=G.total-G.current;let Ae=X;g>0&&(Ae=Math.min(Ae,g));const Ue=G.current;let wt="";wt=0===Ae?"finalize":X===Ae?"upload, finalize":"upload";const At={"X-Goog-Upload-Command":wt,"X-Goog-Upload-Offset":`${G.current}`},on=c.slice(Ue,Ue+Ae);if(null===on)throw Qo();const ti=new fr(o,"POST",function yn(oi,Lu){const oa=ce(oi,["active","final"]),vo=G.current+Ae,Eo=c.size();let Fu;return Fu="final"===oa?Rr(s,E)(oi,Lu):null,new de(vo,Eo,"final"===oa,Fu)},s.maxUploadRetryTime);return ti.headers=At,ti.body=on.uploadData(),ti.progressCallback=F||null,ti.errorHandler=wa(l),ti}(this._ref._location,this._ref.storage,c,this._blob,s,this._mappings,o,this._makeProgressCallback())}catch(G){return this._error=G,void this._transition("error")}const F=this._ref.storage._makeRequest(T,ta,g,E,!1);this._request=F,F.getPromise().then(G=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(G.current),G.finalized?(this._metadata=G.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((s,o)=>{const c=lh(this._ref.storage,this._ref._location,this._mappings),g=this._ref.storage._makeRequest(c,ta,s,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((s,o)=>{const c=function z(l,s,o,c,g){const E=s.bucketOnlyServerUrl(),T={"X-Goog-Upload-Protocol":"multipart"},G=function F(){let ti="";for(let oi=0;oi<2;oi++)ti+=Math.random().toString().slice(2);return ti}();T["Content-Type"]="multipart/related; boundary="+G;const X=P(s,c,g),Ae=Xo(X,o),wt=Pt.getBlob("--"+G+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ae+"\r\n--"+G+"\r\nContent-Type: "+X.contentType+"\r\n\r\n",c,"\r\n--"+G+"--");if(null===wt)throw Qo();const At={name:X.fullPath},on=Gs(E,l.host,l._protocol),br=l.maxUploadRetryTime,si=new fr(on,"POST",Rr(l,o),br);return si.urlParams=At,si.headers=T,si.body=wt.uploadData(),si.errorHandler=wa(s),si}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),g=this._ref.storage._makeRequest(c,ta,s,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(s){const o=this._transferred;this._transferred=s,this._transferred!==o&&this._notifyObservers()}_transition(s){if(this._state!==s)switch(s){case"canceling":case"pausing":this._state=s,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const o="paused"===this._state;this._state=s,o&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=s,this._notifyObservers();break;case"canceled":this._error=Vo(),this._state=s,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const s=Ca(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:s,metadata:this._metadata,task:this,ref:this._ref}}on(s,o,c,g){const E=new pa(o||void 0,c||void 0,g||void 0);return this._addObserver(E),()=>{this._removeObserver(E)}}then(s,o){return this._promise.then(s,o)}catch(s){return this.then(null,s)}_addObserver(s){this._observers.push(s),this._notifyObserver(s)}_removeObserver(s){const o=this._observers.indexOf(s);-1!==o&&this._observers.splice(o,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(o=>{this._notifyObserver(o)})}_finishPromise(){if(void 0!==this._resolve){let s=!0;switch(Ca(this._state)){case ni.SUCCESS:qs(this._resolve.bind(null,this.snapshot))();break;case ni.CANCELED:case ni.ERROR:qs(this._reject.bind(null,this._error))();break;default:s=!1}s&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(s){switch(Ca(this._state)){case ni.RUNNING:case ni.PAUSED:s.next&&qs(s.next.bind(s,this.snapshot))();break;case ni.SUCCESS:s.complete&&qs(s.complete.bind(s))();break;default:s.error&&qs(s.error.bind(s,this._error))()}}resume(){const s="paused"===this._state||"pausing"===this._state;return s&&this._transition("running"),s}pause(){const s="running"===this._state;return s&&this._transition("pausing"),s}cancel(){const s="running"===this._state||"pausing"===this._state;return s&&this._transition("canceling"),s}}class Ia{constructor(s,o){this._service=s,this._location=o instanceof lr?o:lr.makeFromUrl(o,s.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(s,o){return new Ia(s,o)}get root(){const s=new lr(this._location.bucket,"");return this._newRef(this._service,s)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qu(this._location.path)}get storage(){return this._service}get parent(){const s=function co(l){if(0===l.length)return null;const s=l.lastIndexOf("/");return-1===s?"":l.slice(0,s)}(this._location.path);if(null===s)return null;const o=new lr(this._location.bucket,s);return new Ia(this._service,o)}_throwIfRoot(s){if(""===this._location.path)throw lt(s)}}function Jl(l,s,o){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,Zo.Z)(function*(l,s,o){const g=yield Oc(l,{pageToken:o});s.prefixes.push(...g.prefixes),s.items.push(...g.items),null!=g.nextPageToken&&(yield Jl(l,s,g.nextPageToken))})).apply(this,arguments)}function Oc(l,s){null!=s&&"number"==typeof s.maxResults&&Ao("options.maxResults",1,1e3,s.maxResults);const o=s||{},c=ea(l.storage,l._location,"/",o.pageToken,o.maxResults);return l.storage.makeRequestWithTokens(c,ta)}function dh(l){l._throwIfRoot("getDownloadURL");const s=function Ku(l,s,o){const g=Gs(s.fullServerUrl(),l.host,l._protocol),T=l.maxOperationRetryTime,F=new fr(g,"GET",function xi(l,s){return function o(c,g){const E=vl(l,g,s);return fa(null!==E),function ir(l,s,o,c){const g=Ni(s);if(null===g||!qi(g.downloadTokens))return null;const E=g.downloadTokens;if(0===E.length)return null;const T=encodeURIComponent;return E.split(",").map(X=>{const Ue=l.fullPath;return Gs("/b/"+T(l.bucket)+"/o/"+T(Ue),o,c)+zs({alt:"media",token:X})})[0]}(E,g,l.host,l._protocol)}}(l,o),T);return F.errorHandler=Jo(s),F}(l.storage,l._location,bu());return l.storage.makeRequestWithTokens(s,ta).then(o=>{if(null===o)throw function J(){return new Ri(gi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return o})}function Il(l,s){const o=function ah(l,s){const o=s.split("/").filter(c=>c.length>0).join("/");return 0===l.length?o:l+"/"+o}(l._location.path,s),c=new lr(l._location.bucket,o);return new Ia(l.storage,c)}function ep(l,s){if(l instanceof Fc){const o=l;if(null==o._bucket)throw function Dr(){return new Ri(gi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gu+"' property when initializing the app?")}();const c=new Ia(o,o._bucket);return null!=s?ep(c,s):c}return void 0!==s?Il(l,s):l}function Lc(l,s){if(s&&function ec(l){return/^[A-Za-z]+:\/\//.test(l)}(s)){if(l instanceof Fc)return function tc(l,s){return new Ia(l,s)}(l,s);throw Z("To use ref(service, url), the first argument must be a Storage instance.")}return ep(l,s)}function Yu(l,s){const o=s?.[Gu];return null==o?null:lr.makeFromBucketSpec(o,l)}class Fc{constructor(s,o,c,g,E){this.app=s,this._authProvider=o,this._appCheckProvider=c,this._url=g,this._firebaseVersion=E,this._bucket=null,this._host=gl,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=g?lr.makeFromBucketSpec(g,this._host):Yu(this._host,this.app.options)}get host(){return this._host}set host(s){this._host=s,this._bucket=null!=this._url?lr.makeFromBucketSpec(this._url,s):Yu(s,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(s){Ao("time",0,Number.POSITIVE_INFINITY,s),this._maxUploadRetryTime=s}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(s){Ao("time",0,Number.POSITIVE_INFINITY,s),this._maxOperationRetryTime=s}_getAuthToken(){var s=this;return(0,Zo.Z)(function*(){if(s._overrideAuthToken)return s._overrideAuthToken;const o=s._authProvider.getImmediate({optional:!0});if(o){const c=yield o.getToken();if(null!==c)return c.accessToken}return null})()}_getAppCheckToken(){var s=this;return(0,Zo.Z)(function*(){const o=s._appCheckProvider.getImmediate({optional:!0});return o?(yield o.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(s=>s.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(s){return new Ia(this,s)}_makeRequest(s,o,c,g,E=!0){if(this._deleted)return new yr(De());{const T=function Bt(l,s,o,c,g,E,T=!0){const F=zs(l.urlParams),G=l.url+F,X=Object.assign({},l.headers);return function Ed(l,s){s&&(l["X-Firebase-GMPID"]=s)}(X,s),function yl(l,s){null!==s&&s.length>0&&(l.Authorization="Firebase "+s)}(X,o),function to(l,s){l["X-Firebase-Storage-Version"]="webjs/"+(s??"AppManager")}(X,E),function Fa(l,s){null!==s&&(l["X-Firebase-AppCheck"]=s)}(X,c),new as(G,l.method,X,l.body,l.successCodes,l.additionalRetryCodes,l.handler,l.errorHandler,l.timeout,l.progressCallback,g,T)}(s,this._appId,c,g,o,this._firebaseVersion,E);return this._requests.add(T),T.getPromise().then(()=>this._requests.delete(T),()=>this._requests.delete(T)),T}}makeRequestWithTokens(s,o){var c=this;return(0,Zo.Z)(function*(){const[g,E]=yield Promise.all([c._getAuthToken(),c._getAppCheckToken()]);return c._makeRequest(s,o,g,E).getPromise()})()}}const Qu="@firebase/storage";function x(l,s){return Lc(l=(0,me.m9)(l),s)}function kt(l,{instanceIdentifier:s}){const o=l.getProvider("app").getImmediate(),c=l.getProvider("auth-internal"),g=l.getProvider("app-check-internal");return new Fc(o,c,g,s,Yo.SDK_VERSION)}!function mn(){(0,Yo._registerComponent)(new ha.wA("storage",kt,"PUBLIC").setMultipleInstances(!0)),(0,Yo.registerVersion)(Qu,"0.11.2",""),(0,Yo.registerVersion)(Qu,"0.11.2","esm2017")}();class Xt{constructor(s,o,c){this._delegate=s,this.task=o,this.ref=c}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class wn{constructor(s,o){this._delegate=s,this._ref=o,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xt(this._delegate.snapshot,this,this._ref)}then(s,o){return this._delegate.then(c=>{if(s)return s(new Xt(c,this,this._ref))},o)}on(s,o,c,g){let E;return o&&(E="function"==typeof o?T=>o(new Xt(T,this,this._ref)):{next:o.next?T=>o.next(new Xt(T,this,this._ref)):void 0,complete:o.complete||void 0,error:o.error||void 0}),this._delegate.on(s,E,c||void 0,g||void 0)}}class _r{constructor(s,o){this._delegate=s,this._service=o}get prefixes(){return this._delegate.prefixes.map(s=>new Kn(s,this._service))}get items(){return this._delegate.items.map(s=>new Kn(s,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Kn{constructor(s,o){this._delegate=s,this.storage=o}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(s){const o=function V(l,s){return Il(l,s)}(this._delegate,s);return new Kn(o,this.storage)}get root(){return new Kn(this._delegate.root,this.storage)}get parent(){const s=this._delegate.parent;return null==s?null:new Kn(s,this.storage)}put(s,o){return this._throwIfRoot("put"),new wn(function Tu(l,s,o){return function xc(l,s,o){return l._throwIfRoot("uploadBytesResumable"),new Zs(l,new Pt(s),o)}(l=(0,me.m9)(l),s,o)}(this._delegate,s,o),this)}putString(s,o=_s.RAW,c){this._throwIfRoot("putString");const g=Xr(o,s),E=Object.assign({},c);return null==E.contentType&&null!=g.contentType&&(E.contentType=g.contentType),new wn(new Zs(this._delegate,new Pt(g.data,!0),E),this)}listAll(){return function Ta(l){return function ch(l){const s={prefixes:[],items:[]};return Jl(l,s).then(()=>s)}(l=(0,me.m9)(l))}(this._delegate).then(s=>new _r(s,this.storage))}list(s){return function ri(l,s){return Oc(l=(0,me.m9)(l),s)}(this._delegate,s||void 0).then(o=>new _r(o,this.storage))}getMetadata(){return function Da(l){return function kc(l){l._throwIfRoot("getMetadata");const s=lh(l.storage,l._location,bu());return l.storage.makeRequestWithTokens(s,ta)}(l=(0,me.m9)(l))}(this._delegate)}updateMetadata(s){return function nc(l,s){return function Du(l,s){l._throwIfRoot("updateMetadata");const o=function A(l,s,o,c){const E=Gs(s.fullServerUrl(),l.host,l._protocol),F=Xo(o,c),X=l.maxOperationRetryTime,Ae=new fr(E,"PATCH",Rr(l,c),X);return Ae.headers={"Content-Type":"application/json; charset=utf-8"},Ae.body=F,Ae.errorHandler=Jo(s),Ae}(l.storage,l._location,s,bu());return l.storage.makeRequestWithTokens(o,ta)}(l=(0,me.m9)(l),s)}(this._delegate,s)}getDownloadURL(){return function Ls(l){return dh(l=(0,me.m9)(l))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ki(l){return function Cd(l){l._throwIfRoot("deleteObject");const s=function O(l,s){const c=Gs(s.fullServerUrl(),l.host,l._protocol),F=new fr(c,"DELETE",function T(G,X){},l.maxOperationRetryTime);return F.successCodes=[200,204],F.errorHandler=Jo(s),F}(l.storage,l._location);return l.storage.makeRequestWithTokens(s,ta)}(l=(0,me.m9)(l))}(this._delegate)}_throwIfRoot(s){if(""===this._delegate._location.path)throw lt(s)}}class Jr{constructor(s,o){this.app=s,this._delegate=o}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(s){if(no(s))throw Z("ref() expected a child path but got a URL, use refFromURL instead.");return new Kn(x(this._delegate,s),this)}refFromURL(s){if(!no(s))throw Z("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lr.makeFromUrl(s,this._delegate.host)}catch{throw Z("refFromUrl() expected a valid full URL but got an invalid one.")}return new Kn(x(this._delegate,s),this)}setMaxUploadRetryTime(s){this._delegate.maxUploadRetryTime=s}setMaxOperationRetryTime(s){this._delegate.maxOperationRetryTime=s}useEmulator(s,o,c={}){!function Ee(l,s,o,c={}){!function Yh(l,s,o,c={}){l.host=`${s}:${o}`,l._protocol="http";const{mockUserToken:g}=c;g&&(l._overrideAuthToken="string"==typeof g?g:(0,me.Sg)(g,l.app.options.projectId))}(l,s,o,c)}(this._delegate,s,o,c)}}function no(l){return/^[A-Za-z]+:\/\//.test(l)}function Ts(l,{instanceIdentifier:s}){const o=l.getProvider("app-compat").getImmediate(),c=l.getProvider("storage").getImmediate({identifier:s});return new Jr(o,c)}!function ro(l){const s={TaskState:ni,TaskEvent:Wr,StringFormat:_s,Storage:Jr,Reference:Kn};l.INTERNAL.registerComponent(new ha.wA("storage-compat",Ts,"PUBLIC").setServiceProps(s).setMultipleInstances(!0)),l.registerVersion("@firebase/storage-compat","0.3.2")}(ka.Z);var iu=U(8697),$a=U(7142);function Id(l){const s=function Mg(l){return new K.y(s=>{const o=T=>s.next(T);o(l.snapshot);const E=l.on("state_changed",o);return l.then(T=>{o(T),s.complete()},T=>{o(l.snapshot),(T=>{s.error(T)})(T)}),function(){E()}}).pipe(function os(l,s=Me.z){return(0,cn.e)((o,c)=>{let g=null,E=null,T=null;const F=()=>{if(g){g.unsubscribe(),g=null;const X=E;E=null,c.next(X)}};function G(){const X=T+l,Ae=s.now();if(Ae<X)return g=this.schedule(void 0,X-Ae),void c.add(g);F()}o.subscribe((0,Fn.x)(c,X=>{E=X,T=s.now(),g||(g=s.schedule(G,l),c.add(g))},()=>{F(),c.complete()},void 0,()=>{E=g=null}))})}(0))}(l);return{task:l,then:l.then.bind(l),catch:l.catch.bind(l),pause:l.pause.bind(l),cancel:l.cancel.bind(l),resume:l.resume.bind(l),snapshotChanges:()=>s,percentageChanges:()=>s.pipe((0,di.U)(o=>o.bytesTransferred/o.totalBytes*100))}}function bd(l){return{getDownloadURL:()=>(0,L.of)(void 0).pipe(Xi.fc,(0,Fo.w)(()=>l.getDownloadURL()),Xi.iC),getMetadata:()=>(0,L.of)(void 0).pipe(Xi.fc,(0,Fo.w)(()=>l.getMetadata()),Xi.iC),delete:()=>(0,Q.D)(l.delete()),child:s=>bd(l.child(s)),updateMetadata:s=>(0,Q.D)(l.updateMetadata(s)),put:(s,o)=>Id(l.put(s,o)),putString:(s,o,c)=>Id(l.putString(s,o,c)),list:s=>(0,Q.D)(l.list(s)),listAll:()=>(0,Q.D)(l.listAll())}}const np=new ne.OlP("angularfire2.storageBucket"),Ys=new ne.OlP("angularfire2.storage.maxUploadRetryTime"),fh=new ne.OlP("angularfire2.storage.maxOperationRetryTime"),Xu=new ne.OlP("angularfire2.storage.use-emulator");let Bm=(()=>{class l{constructor(o,c,g,E,T,F,G,X,Ae,Ue){const st=(0,Js.on)(o,T,c);this.storage=(0,Js.cc)(`${st.name}.storage.${g}`,"AngularFireStorage",st.name,()=>{const wt=T.runOutsideAngular(()=>st.storage(g||void 0)),At=Ae;return At&&wt.useEmulator(...At),G&&wt.setMaxUploadRetryTime(G),X&&wt.setMaxOperationRetryTime(X),wt},[G,X])}ref(o){return bd(this.storage.ref(o))}refFromURL(o){return bd(this.storage.refFromURL(o))}upload(o,c,g){return bd(this.storage.ref(o)).put(c,g)}}return l.\u0275fac=function(o){return new(o||l)(ne.LFG(Js.Dh),ne.LFG(Js.xv,8),ne.LFG(np,8),ne.LFG(ne.Lbi),ne.LFG(ne.R0b),ne.LFG(Xi.HU),ne.LFG(Ys,8),ne.LFG(fh,8),ne.LFG(Xu,8),ne.LFG(iu.nm,8))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),Qh=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({}),l})(),Dd=(()=>{class l{constructor(){$a.Z.registerVersion("angularfire",Xi.q4.full,"gcs-compat")}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({providers:[Bm],imports:[Qh]}),l})();var Ng=U(8330),Pg=U(3019),jm=U(3020),rp=U(6699),Xh=U(3997),Fs=U(4829),Jh=U(2737),Ji=U(2420),Ju=U(4564);U(5967);var Vc=U(7879);const Sd="@firebase/database";let Si="";function rc(l){Si=l}class Su{constructor(s){this.domStorage_=s,this.prefix_="firebase:"}set(s,o){null==o?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),(0,me.Wl)(o))}get(s){const o=this.domStorage_.getItem(this.prefixedName_(s));return null==o?null:(0,me.cI)(o)}remove(s){this.domStorage_.removeItem(this.prefixedName_(s))}prefixedName_(s){return this.prefix_+s}toString(){return this.domStorage_.toString()}}class ic{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(s,o){null==o?delete this.cache_[s]:this.cache_[s]=o}get(s){return(0,me.r3)(this.cache_,s)?this.cache_[s]:null}remove(s){delete this.cache_[s]}}const ef=function(l){try{if(typeof window<"u"&&typeof window[l]<"u"){const s=window[l];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new Su(s)}}catch{}return new ic},sc=ef("localStorage"),gh=ef("sessionStorage"),Uc=new Vc.Yd("@firebase/database"),xg=function(){let l=1;return function(){return l++}}(),Og=function(l){const s=(0,me.dS)(l),o=new me.gQ;o.update(s);const c=o.digest();return me.US.encodeByteArray(c)},Ad=function(...l){let s="";for(let o=0;o<l.length;o++){const c=l[o];Array.isArray(c)||c&&"object"==typeof c&&"number"==typeof c.length?s+=Ad.apply(null,c):s+="object"==typeof c?(0,me.Wl)(c):c,s+=" "}return s};let Bc=null,mh=!0;const bl=function(l,s){(0,me.hu)(!s||!0===l||!1===l,"Can't turn on custom loggers persistently."),!0===l?(Uc.logLevel=Vc.in.VERBOSE,Bc=Uc.log.bind(Uc),s&&gh.set("logging_enabled",!0)):"function"==typeof l?Bc=l:(Bc=null,gh.remove("logging_enabled"))},fo=function(...l){if(!0===mh&&(mh=!1,null===Bc&&!0===gh.get("logging_enabled")&&bl(!0)),Bc){const s=Ad.apply(null,l);Bc(s)}},Md=function(l){return function(...s){fo(l,...s)}},tf=function(...l){const s="FIREBASE INTERNAL ERROR: "+Ad(...l);Uc.error(s)},Au=function(...l){const s=`FIREBASE FATAL ERROR: ${Ad(...l)}`;throw Uc.error(s),new Error(s)},po=function(...l){const s="FIREBASE WARNING: "+Ad(...l);Uc.warn(s)},oc=function(l){return"number"==typeof l&&(l!=l||l===Number.POSITIVE_INFINITY||l===Number.NEGATIVE_INFINITY)},el="[MIN_NAME]",Dl="[MAX_NAME]",su=function(l,s){if(l===s)return 0;if(l===el||s===Dl)return-1;if(s===el||l===Dl)return 1;{const o=nf(l),c=nf(s);return null!==o?null!==c?o-c==0?l.length-s.length:o-c:-1:null!==c?1:l<s?-1:1}},uc=function(l,s){return l===s?0:l<s?-1:1},yh=function(l,s){if(s&&l in s)return s[l];throw new Error("Missing required key ("+l+") in object: "+(0,me.Wl)(s))},Hc=function(l){if("object"!=typeof l||null===l)return(0,me.Wl)(l);const s=[];for(const c in l)s.push(c);s.sort();let o="{";for(let c=0;c<s.length;c++)0!==c&&(o+=","),o+=(0,me.Wl)(s[c]),o+=":",o+=Hc(l[s[c]]);return o+="}",o},kg=function(l,s){const o=l.length;if(o<=s)return[l];const c=[];for(let g=0;g<o;g+=s)c.push(l.substring(g,g+s>o?o:g+s));return c};function go(l,s){for(const o in l)l.hasOwnProperty(o)&&s(o,l[o])}const Rd=function(l){(0,me.hu)(!oc(l),"Invalid JSON number");const c=1023;let g,E,T,F,G;0===l?(E=0,T=0,g=1/l==-1/0?1:0):(g=l<0,(l=Math.abs(l))>=Math.pow(2,1-c)?(F=Math.min(Math.floor(Math.log(l)/Math.LN2),c),E=F+c,T=Math.round(l*Math.pow(2,52-F)-Math.pow(2,52))):(E=0,T=Math.round(l/Math.pow(2,-1074))));const X=[];for(G=52;G;G-=1)X.push(T%2?1:0),T=Math.floor(T/2);for(G=11;G;G-=1)X.push(E%2?1:0),E=Math.floor(E/2);X.push(g?1:0),X.reverse();const Ae=X.join("");let Ue="";for(G=0;G<64;G+=8){let st=parseInt(Ae.substr(G,8),2).toString(16);1===st.length&&(st="0"+st),Ue+=st}return Ue.toLowerCase()},Nd=new RegExp("^-?(0*)\\d{1,10}$"),nf=function(l){if(Nd.test(l)){const s=Number(l);if(s>=-2147483648&&s<=2147483647)return s}return null},ou=function(l){try{l()}catch(s){setTimeout(()=>{throw po("Exception was thrown by user callback.",s.stack||""),s},Math.floor(0))}},Tl=function(l,s){const o=setTimeout(l,s);return"number"==typeof o&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(o):"object"==typeof o&&o.unref&&o.unref(),o};class _h{constructor(s,o){this.appName_=s,this.appCheckProvider=o,this.appCheck=o?.getImmediate({optional:!0}),this.appCheck||o?.get().then(c=>this.appCheck=c)}getToken(s){return this.appCheck?this.appCheck.getToken(s):new Promise((o,c)=>{setTimeout(()=>{this.appCheck?this.getToken(s).then(o,c):o(null)},0)})}addTokenChangeListener(s){var o;null===(o=this.appCheckProvider)||void 0===o||o.get().then(c=>c.addTokenListener(s))}notifyForInvalidToken(){po(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Lg{constructor(s,o,c){this.appName_=s,this.firebaseOptions_=o,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(g=>this.auth_=g)}getToken(s){return this.auth_?this.auth_.getToken(s).catch(o=>o&&"auth/token-not-initialized"===o.code?(fo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)):new Promise((o,c)=>{setTimeout(()=>{this.auth_?this.getToken(s).then(o,c):o(null)},0)})}addTokenChangeListener(s){this.auth_?this.auth_.addAuthTokenListener(s):this.authProvider_.get().then(o=>o.addAuthTokenListener(s))}removeTokenChangeListener(s){this.authProvider_.get().then(o=>o.removeAuthTokenListener(s))}notifyForInvalidToken(){let s='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';s+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',po(s)}}let Ga=(()=>{class l{constructor(o){this.accessToken=o}getToken(o){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(o){o(this.accessToken)}removeTokenChangeListener(o){}notifyForInvalidToken(){}}return l.OWNER="owner",l})();const au=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ga="websocket",Ir="long_polling";class xd{constructor(s,o,c,g,E=!1,T="",F=!1,G=!1){this.secure=o,this.namespace=c,this.webSocketOnly=g,this.nodeAdmin=E,this.persistenceKey=T,this.includeNamespaceInQueryParams=F,this.isUsingEmulator=G,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sc.get("host:"+s)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&sc.set("host:"+this._host,this.internalHost))}toString(){let s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function mo(l,s,o){let c;if((0,me.hu)("string"==typeof s,"typeof type must == string"),(0,me.hu)("object"==typeof o,"typeof params must == object"),s===ga)c=(l.secure?"wss://":"ws://")+l.internalHost+"/.ws?";else{if(s!==Ir)throw new Error("Unknown connection type: "+s);c=(l.secure?"https://":"http://")+l.internalHost+"/.lp?"}(function Gc(l){return l.host!==l.internalHost||l.isCustomHost()||l.includeNamespaceInQueryParams})(l)&&(o.ns=l.namespace);const g=[];return go(o,(E,T)=>{g.push(E+"="+T)}),c+g.join("&")}class Od{constructor(){this.counters_={}}incrementCounter(s,o=1){(0,me.r3)(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=o}get(){return(0,me.p$)(this.counters_)}}const zc={},Wc={};function ma(l){const s=l.toString();return zc[s]||(zc[s]=new Od),zc[s]}class ap{constructor(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(s,o){this.closeAfterResponse=s,this.onClose=o,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(s,o){for(this.pendingResponses[s]=o;this.pendingResponses[this.currentResponseNum];){const c=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let g=0;g<c.length;++g)c[g]&&ou(()=>{this.onMessage_(c[g])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Aa{constructor(s,o,c,g,E,T,F){this.connId=s,this.repoInfo=o,this.applicationId=c,this.appCheckToken=g,this.authToken=E,this.transportSessionId=T,this.lastSessionId=F,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Md(s),this.stats_=ma(o),this.urlFn=G=>(this.appCheckToken&&(G.ac=this.appCheckToken),mo(o,Ir,G))}open(s,o){this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new ap(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(l){if((0,me.Yr)()||"complete"===document.readyState)l();else{let s=!1;const o=function(){document.body?s||(s=!0,l()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fc((...E)=>{const[T,F,G,X,Ae]=E;if(this.incrementIncomingBytes_(E),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===T)this.id=F,this.password=G;else{if("close"!==T)throw new Error("Unrecognized command received: "+T);F?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(F,()=>{this.onClosed_()})):this.onClosed_()}},(...E)=>{const[T,F]=E;this.incrementIncomingBytes_(E),this.myPacketOrderer.handleResponse(T,F)},()=>{this.onClosed_()},this.urlFn);const c={start:"t"};c.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(c.cb=this.scriptTagHolder.uniqueCallbackIdentifier),c.v="5",this.transportSessionId&&(c.s=this.transportSessionId),this.lastSessionId&&(c.ls=this.lastSessionId),this.applicationId&&(c.p=this.applicationId),this.appCheckToken&&(c.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&au.test(location.hostname)&&(c.r="f");const g=this.urlFn(c);this.log_("Connecting via long-poll to "+g),this.scriptTagHolder.addTag(g,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Aa.forceAllow_=!0}static forceDisallow(){Aa.forceDisallow_=!0}static isAvailable(){return!((0,me.Yr)()||!Aa.forceAllow_&&(Aa.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(s){const o=(0,me.Wl)(s);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const c=(0,me.h$)(o),g=kg(c,1840);for(let E=0;E<g.length;E++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,g.length,g[E]),this.curSegmentNum++}addDisconnectPingFrame(s,o){if((0,me.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const c={dframe:"t"};c.id=s,c.pw=o,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(s){const o=(0,me.Wl)(s).length;this.bytesReceived+=o,this.stats_.incrementCounter("bytes_received",o)}}class fc{constructor(s,o,c,g){if(this.onDisconnect=c,this.urlFn=g,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,me.Yr)())this.commandCB=s,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=xg(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=o,this.myIFrame=fc.createIFrame_();let E="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(E='<script>document.domain="'+document.domain+'";<\/script>');const T="<html><body>"+E+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(T),this.myIFrame.doc.close()}catch(F){fo("frame writing exception"),F.stack&&fo(F.stack),fo(F)}}}static createIFrame_(){const s=document.createElement("iframe");if(s.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(s);try{s.contentWindow.document||fo("No IE domain setting required")}catch{const c=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const s=this.onDisconnect;s&&(this.onDisconnect=null,s())}startLongPoll(s,o){for(this.myID=s,this.myPW=o,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const s={};s.id=this.myID,s.pw=this.myPW,s.ser=this.currentSerial;let o=this.urlFn(s),c="",g=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){const T=this.pendingSegs.shift();c=c+"&seg"+g+"="+T.seg+"&ts"+g+"="+T.ts+"&d"+g+"="+T.d,g++}return o+=c,this.addLongPollTag_(o,this.currentSerial),!0}return!1}enqueueSegment(s,o,c){this.pendingSegs.push({seg:s,ts:o,d:c}),this.alive&&this.newRequest_()}addLongPollTag_(s,o){this.outstandingRequests.add(o);const c=()=>{this.outstandingRequests.delete(o),this.newRequest_()},g=setTimeout(c,Math.floor(25e3));this.addTag(s,()=>{clearTimeout(g),c()})}addTag(s,o){(0,me.Yr)()?this.doNodeLongPoll(s,o):setTimeout(()=>{try{if(!this.sendNewPolls)return;const c=this.myIFrame.doc.createElement("script");c.type="text/javascript",c.async=!0,c.src=s,c.onload=c.onreadystatechange=function(){const g=c.readyState;(!g||"loaded"===g||"complete"===g)&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),o())},c.onerror=()=>{fo("Long-poll script failed to load: "+s),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(c)}catch{}},Math.floor(1))}}let Zc=null;typeof MozWebSocket<"u"?Zc=MozWebSocket:typeof WebSocket<"u"&&(Zc=WebSocket);let Yc=(()=>{class l{constructor(o,c,g,E,T,F,G){this.connId=o,this.applicationId=g,this.appCheckToken=E,this.authToken=T,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Md(this.connId),this.stats_=ma(c),this.connURL=l.connectionURL_(c,F,G,E,g),this.nodeAdmin=c.nodeAdmin}static connectionURL_(o,c,g,E,T){const F={v:"5"};return!(0,me.Yr)()&&typeof location<"u"&&location.hostname&&au.test(location.hostname)&&(F.r="f"),c&&(F.s=c),g&&(F.ls=g),E&&(F.ac=E),T&&(F.p=T),mo(o,ga,F)}open(o,c){this.onDisconnect=c,this.onMessage=o,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sc.set("previous_websocket_failure",!0);try{let g;if((0,me.Yr)()){g={headers:{"User-Agent":`Firebase/5/${Si}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(g.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(g.headers["X-Firebase-AppCheck"]=this.appCheckToken);const T=process.env,F=0===this.connURL.indexOf("wss://")?T.HTTPS_PROXY||T.https_proxy:T.HTTP_PROXY||T.http_proxy;F&&(g.proxy={origin:F})}this.mySock=new Zc(this.connURL,[],g)}catch(g){this.log_("Error instantiating WebSocket.");const E=g.message||g.data;return E&&this.log_(E),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=g=>{this.handleIncomingFrame(g)},this.mySock.onerror=g=>{this.log_("WebSocket error.  Closing connection.");const E=g.message||g.data;E&&this.log_(E),this.onClosed_()}}start(){}static forceDisallow(){l.forceDisallow_=!0}static isAvailable(){let o=!1;if(typeof navigator<"u"&&navigator.userAgent){const g=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);g&&g.length>1&&parseFloat(g[1])<4.4&&(o=!0)}return!o&&null!==Zc&&!l.forceDisallow_}static previouslyFailed(){return sc.isInMemoryStorage||!0===sc.get("previous_websocket_failure")}markConnectionHealthy(){sc.remove("previous_websocket_failure")}appendFrame_(o){if(this.frames.push(o),this.frames.length===this.totalFrames){const c=this.frames.join("");this.frames=null;const g=(0,me.cI)(c);this.onMessage(g)}}handleNewFrameCount_(o){this.totalFrames=o,this.frames=[]}extractFrameCount_(o){if((0,me.hu)(null===this.frames,"We already have a frame buffer"),o.length<=6){const c=Number(o);if(!isNaN(c))return this.handleNewFrameCount_(c),null}return this.handleNewFrameCount_(1),o}handleIncomingFrame(o){if(null===this.mySock)return;const c=o.data;if(this.bytesReceived+=c.length,this.stats_.incrementCounter("bytes_received",c.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(c);else{const g=this.extractFrameCount_(c);null!==g&&this.appendFrame_(g)}}send(o){this.resetKeepAlive();const c=(0,me.Wl)(o);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const g=kg(c,16384);g.length>1&&this.sendString_(String(g.length));for(let E=0;E<g.length;E++)this.sendString_(g[E])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(o){try{this.mySock.send(o)}catch(c){this.log_("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return l.responsesRequiredToBeHealthy=2,l.healthyTimeout=3e4,l})(),lp=(()=>{class l{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[Aa,Yc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(o){const c=Yc&&Yc.isAvailable();let g=c&&!Yc.previouslyFailed();if(o.webSocketOnly&&(c||po("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),g=!0),g)this.transports_=[Yc];else{const E=this.transports_=[];for(const T of l.ALL_TRANSPORTS)T&&T.isAvailable()&&E.push(T);l.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return l.globalTransportInitialized_=!1,l})();class us{constructor(s,o,c,g,E,T,F,G,X,Ae){this.id=s,this.repoInfo_=o,this.applicationId_=c,this.appCheckToken_=g,this.authToken_=E,this.onMessage_=T,this.onReady_=F,this.onDisconnect_=G,this.onKill_=X,this.lastSessionId=Ae,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Md("c:"+this.id+":"),this.transportManager_=new lp(o),this.log_("Connection created"),this.start_()}start_(){const s=this.transportManager_.initialTransport();this.conn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.conn_),c=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(o,c)},Math.floor(0));const g=s.healthyTimeout||0;g>0&&(this.healthyTimeout_=Tl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(g)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(s){return o=>{s===this.conn_?this.onConnectionLost_(o):s===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(s){return o=>{2!==this.state_&&(s===this.rx_?this.onPrimaryMessageReceived_(o):s===this.secondaryConn_?this.onSecondaryMessageReceived_(o):this.log_("message on old connection"))}}sendRequest(s){this.sendData_({t:"d",d:s})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(s){if("t"in s){const o=s.t;"a"===o?this.upgradeIfSecondaryHealthy_():"r"===o?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===o&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(s){const o=yh("t",s),c=yh("d",s);if("c"===o)this.onSecondaryControl_(c);else{if("d"!==o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(c)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(s){const o=yh("t",s),c=yh("d",s);"c"===o?this.onControl_(c):"d"===o&&this.onDataMessage_(c)}onDataMessage_(s){this.onPrimaryResponse_(),this.onMessage_(s)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(s){const o=yh("t",s);if("d"in s){const c=s.d;if("h"===o){const g=Object.assign({},c);this.repoInfo_.isUsingEmulator&&(g.h=this.repoInfo_.host),this.onHandshake_(g)}else if("n"===o){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let g=0;g<this.pendingDataMessages.length;++g)this.onDataMessage_(this.pendingDataMessages[g]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===o?this.onConnectionShutdown_(c):"r"===o?this.onReset_(c):"e"===o?tf("Server Error: "+c):"o"===o?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tf("Unknown control packet command: "+o)}}onHandshake_(s){const o=s.ts,c=s.v,g=s.h;this.sessionId=s.s,this.repoInfo_.host=g,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,o),"5"!==c&&po("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)}startUpgrade_(s){this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.secondaryConn_),c=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,c),Tl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.host=s,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(s,o){this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()}onConnectionLost_(s){this.conn_=null,s||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(s){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(s)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class za{put(s,o,c,g){}merge(s,o,c,g){}refreshAuthToken(s){}refreshAppCheckToken(s){}onDisconnectPut(s,o,c){}onDisconnectMerge(s,o,c){}onDisconnectCancel(s,o){}reportStats(s){}}class Qc{constructor(s){this.allowedEvents_=s,this.listeners_={},(0,me.hu)(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}trigger(s,...o){if(Array.isArray(this.listeners_[s])){const c=[...this.listeners_[s]];for(let g=0;g<c.length;g++)c[g].callback.apply(c[g].context,o)}}on(s,o,c){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:o,context:c});const g=this.getInitialEvent(s);g&&o.apply(c,g)}off(s,o,c){this.validateEventType_(s);const g=this.listeners_[s]||[];for(let E=0;E<g.length;E++)if(g[E].callback===o&&(!c||c===g[E].context))return void g.splice(E,1)}validateEventType_(s){(0,me.hu)(this.allowedEvents_.find(o=>o===s),"Unknown event: "+s)}}class pc extends Qc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,me.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pc}getInitialEvent(s){return(0,me.hu)("online"===s,"Unknown event type: "+s),[this.online_]}currentlyOnline(){return this.online_}}class ii{constructor(s,o){if(void 0===o){this.pieces_=s.split("/");let c=0;for(let g=0;g<this.pieces_.length;g++)this.pieces_[g].length>0&&(this.pieces_[c]=this.pieces_[g],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=o}toString(){let s="";for(let o=this.pieceNum_;o<this.pieces_.length;o++)""!==this.pieces_[o]&&(s+="/"+this.pieces_[o]);return s||"/"}}function $r(){return new ii("")}function Tr(l){return l.pieceNum_>=l.pieces_.length?null:l.pieces_[l.pieceNum_]}function Mu(l){return l.pieces_.length-l.pieceNum_}function Oi(l){let s=l.pieceNum_;return s<l.pieces_.length&&s++,new ii(l.pieces_,s)}function Xc(l){return l.pieceNum_<l.pieces_.length?l.pieces_[l.pieces_.length-1]:null}function il(l,s=0){return l.pieces_.slice(l.pieceNum_+s)}function Fd(l){if(l.pieceNum_>=l.pieces_.length)return null;const s=[];for(let o=l.pieceNum_;o<l.pieces_.length-1;o++)s.push(l.pieces_[o]);return new ii(s,0)}function Vs(l,s){const o=[];for(let c=l.pieceNum_;c<l.pieces_.length;c++)o.push(l.pieces_[c]);if(s instanceof ii)for(let c=s.pieceNum_;c<s.pieces_.length;c++)o.push(s.pieces_[c]);else{const c=s.split("/");for(let g=0;g<c.length;g++)c[g].length>0&&o.push(c[g])}return new ii(o,0)}function Zr(l){return l.pieceNum_>=l.pieces_.length}function Wa(l,s){const o=Tr(l),c=Tr(s);if(null===o)return s;if(o===c)return Wa(Oi(l),Oi(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+l+")")}function Gm(l,s){const o=il(l,0),c=il(s,0);for(let g=0;g<o.length&&g<c.length;g++){const E=su(o[g],c[g]);if(0!==E)return E}return o.length===c.length?0:o.length<c.length?-1:1}function Vd(l,s){if(Mu(l)!==Mu(s))return!1;for(let o=l.pieceNum_,c=s.pieceNum_;o<=l.pieces_.length;o++,c++)if(l.pieces_[o]!==s.pieces_[c])return!1;return!0}function lu(l,s){let o=l.pieceNum_,c=s.pieceNum_;if(Mu(l)>Mu(s))return!1;for(;o<l.pieces_.length;){if(l.pieces_[o]!==s.pieces_[c])return!1;++o,++c}return!0}class f_{constructor(s,o){this.errorPrefix_=o,this.parts_=il(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(let c=0;c<this.parts_.length;c++)this.byteLength_+=(0,me.ug)(this.parts_[c]);Ud(this)}}function Ud(l){if(l.byteLength_>768)throw new Error(l.errorPrefix_+"has a key path longer than 768 bytes ("+l.byteLength_+").");if(l.parts_.length>32)throw new Error(l.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ol(l))}function Ol(l){return 0===l.parts_.length?"":"in property '"+l.parts_.join(".")+"'"}class sl extends Qc{constructor(){let s,o;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",s="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",s="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",s="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",s="webkitHidden")),this.visible_=!0,o&&document.addEventListener(o,()=>{const c=!document[s];c!==this.visible_&&(this.visible_=c,this.trigger("visible",c))},!1)}static getInstance(){return new sl}getInitialEvent(s){return(0,me.hu)("visible"===s,"Unknown event type: "+s),[this.visible_]}}const cf=1e3;let fp,jd=(()=>{class l extends za{constructor(o,c,g,E,T,F,G,X){if(super(),this.repoInfo_=o,this.applicationId_=c,this.onDataUpdate_=g,this.onConnectStatus_=E,this.onServerInfoUpdate_=T,this.authTokenProvider_=F,this.appCheckTokenProvider_=G,this.authOverride_=X,this.id=l.nextPersistentConnectionId_++,this.log_=Md("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,X&&!(0,me.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sl.getInstance().on("visible",this.onVisible_,this),-1===o.host.indexOf("fblocal")&&pc.getInstance().on("online",this.onOnline_,this)}sendRequest(o,c,g){const E=++this.requestNumber_,T={r:E,a:o,b:c};this.log_((0,me.Wl)(T)),(0,me.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(T),g&&(this.requestCBHash_[E]=g)}get(o){this.initConnection_();const c=new me.BH,E={action:"g",request:{p:o._path.toString(),q:o._queryObject},onComplete:F=>{const G=F.d;"ok"===F.s?c.resolve(G):c.reject(G)}};return this.outstandingGets_.push(E),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),c.promise}listen(o,c,g,E){this.initConnection_();const T=o._queryIdentifier,F=o._path.toString();this.log_("Listen called for "+F+" "+T),this.listens.has(F)||this.listens.set(F,new Map),(0,me.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,me.hu)(!this.listens.get(F).has(T),"listen() called twice for same path/queryId.");const G={onComplete:E,hashFn:c,query:o,tag:g};this.listens.get(F).set(T,G),this.connected_&&this.sendListen_(G)}sendGet_(o){const c=this.outstandingGets_[o];this.sendRequest("g",c.request,g=>{delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),c.onComplete&&c.onComplete(g)})}sendListen_(o){const c=o.query,g=c._path.toString(),E=c._queryIdentifier;this.log_("Listen on "+g+" for "+E);const T={p:g};o.tag&&(T.q=c._queryObject,T.t=o.tag),T.h=o.hashFn(),this.sendRequest("q",T,G=>{const X=G.d,Ae=G.s;l.warnOnListenWarnings_(X,c),(this.listens.get(g)&&this.listens.get(g).get(E))===o&&(this.log_("listen response",G),"ok"!==Ae&&this.removeListen_(g,E),o.onComplete&&o.onComplete(Ae,X))})}static warnOnListenWarnings_(o,c){if(o&&"object"==typeof o&&(0,me.r3)(o,"w")){const g=(0,me.DV)(o,"w");if(Array.isArray(g)&&~g.indexOf("no_index")){const E='".indexOn": "'+c._queryParams.getIndex().toString()+'"',T=c._path.toString();po(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${E} at ${T} to your security rules for better performance.`)}}}refreshAuthToken(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(o)}reduceReconnectDelayIfAdminCredential_(o){(o&&40===o.length||(0,me.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const o=this.authToken_,c=(0,me.w9)(o)?"auth":"gauth",g={cred:o};null===this.authOverride_?g.noauth=!0:"object"==typeof this.authOverride_&&(g.authvar=this.authOverride_),this.sendRequest(c,g,E=>{const T=E.s,F=E.d||"error";this.authToken_===o&&("ok"===T?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(T,F))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},o=>{const c=o.s,g=o.d||"error";"ok"===c?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(c,g)})}unlisten(o,c){const g=o._path.toString(),E=o._queryIdentifier;this.log_("Unlisten called for "+g+" "+E),(0,me.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(g,E)&&this.connected_&&this.sendUnlisten_(g,E,o._queryObject,c)}sendUnlisten_(o,c,g,E){this.log_("Unlisten on "+o+" for "+c);const T={p:o};E&&(T.q=g,T.t=E),this.sendRequest("n",T)}onDisconnectPut(o,c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,c,g):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:c,onComplete:g})}onDisconnectMerge(o,c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,c,g):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:c,onComplete:g})}onDisconnectCancel(o,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,c):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:c})}sendOnDisconnect_(o,c,g,E){const T={p:c,d:g};this.log_("onDisconnect "+o,T),this.sendRequest(o,T,F=>{E&&setTimeout(()=>{E(F.s,F.d)},Math.floor(0))})}put(o,c,g,E){this.putInternal("p",o,c,g,E)}merge(o,c,g,E){this.putInternal("m",o,c,g,E)}putInternal(o,c,g,E,T){this.initConnection_();const F={p:c,d:g};void 0!==T&&(F.h=T),this.outstandingPuts_.push({action:o,request:F,onComplete:E}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)}sendPut_(o){const c=this.outstandingPuts_[o].action,g=this.outstandingPuts_[o].request,E=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(c,g,T=>{this.log_(c+" response",T),delete this.outstandingPuts_[o],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),E&&E(T.s,T.d)})}reportStats(o){if(this.connected_){const c={c:o};this.log_("reportStats",c),this.sendRequest("s",c,g=>{"ok"!==g.s&&this.log_("reportStats","Error sending stats: "+g.d)})}}onDataMessage_(o){if("r"in o){this.log_("from server: "+(0,me.Wl)(o));const c=o.r,g=this.requestCBHash_[c];g&&(delete this.requestCBHash_[c],g(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}onDataPush_(o,c){this.log_("handleServerMessage",o,c),"d"===o?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===o?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===o?this.onListenRevoked_(c.p,c.q):"ac"===o?this.onAuthRevoked_(c.s,c.d):"apc"===o?this.onAppCheckRevoked_(c.s,c.d):"sd"===o?this.onSecurityDebugPacket_(c):tf("Unrecognized action received from server: "+(0,me.Wl)(o)+"\nAre you using the latest client?")}onReady_(o,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(o){(0,me.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(o))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cf,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}onOnline_(o){o?(this.log_("Browser went online."),this.reconnectDelay_=cf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=cf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const o=(new Date).getTime()-this.lastConnectionAttemptTime_;let c=Math.max(0,this.reconnectDelay_-o);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var o=this;return(0,Zo.Z)(function*(){if(o.shouldReconnect_()){o.log_("Making a connection attempt"),o.lastConnectionAttemptTime_=(new Date).getTime(),o.lastConnectionEstablishedTime_=null;const c=o.onDataMessage_.bind(o),g=o.onReady_.bind(o),E=o.onRealtimeDisconnect_.bind(o),T=o.id+":"+l.nextConnectionId_++,F=o.lastSessionId;let G=!1,X=null;const Ae=function(){X?X.close():(G=!0,E())};o.realtime_={close:Ae,sendRequest:function(wt){(0,me.hu)(X,"sendRequest call when we're not connected not allowed."),X.sendRequest(wt)}};const st=o.forceTokenRefresh_;o.forceTokenRefresh_=!1;try{const[wt,At]=yield Promise.all([o.authTokenProvider_.getToken(st),o.appCheckTokenProvider_.getToken(st)]);G?fo("getToken() completed but was canceled"):(fo("getToken() completed. Creating connection."),o.authToken_=wt&&wt.accessToken,o.appCheckToken_=At&&At.token,X=new us(T,o.repoInfo_,o.applicationId_,o.appCheckToken_,o.authToken_,c,g,E,on=>{po(on+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},F))}catch(wt){o.log_("Failed to get token: "+wt),G||(o.repoInfo_.nodeAdmin&&po(wt),Ae())}}})()}interrupt(o){fo("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(o){fo("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,me.xb)(this.interruptReasons_)&&(this.reconnectDelay_=cf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(o){const c=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})}cancelSentTransactions_(){for(let o=0;o<this.outstandingPuts_.length;o++){const c=this.outstandingPuts_[o];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(o,c){let g;g=c?c.map(T=>Hc(T)).join("$"):"default";const E=this.removeListen_(o,g);E&&E.onComplete&&E.onComplete("permission_denied")}removeListen_(o,c){const g=new ii(o).toString();let E;if(this.listens.has(g)){const T=this.listens.get(g);E=T.get(c),T.delete(c),0===T.size&&this.listens.delete(g)}else E=void 0;return E}onAuthRevoked_(o,c){fo("Auth token revoked: "+o+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(o,c){fo("App check token revoked: "+o+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const o of this.listens.values())for(const c of o.values())this.sendListen_(c);for(let o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){const o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(let o=0;o<this.outstandingGets_.length;o++)this.outstandingGets_[o]&&this.sendGet_(o)}sendConnectStats_(){const o={};let c="js";(0,me.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+c+"."+Si.replace(/\./g,"-")]=1,(0,me.uI)()?o["framework.cordova"]=1:(0,me.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}shouldReconnect_(){const o=pc.getInstance().currentlyOnline();return(0,me.xb)(this.interruptReasons_)&&o}}return l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l})();class Ur{constructor(s,o){this.name=s,this.node=o}static Wrap(s,o){return new Ur(s,o)}}class wh{getCompare(){return this.compare.bind(this)}indexedValueChanged(s,o){const c=new Ur(el,s),g=new Ur(el,o);return 0!==this.compare(c,g)}minPost(){return Ur.MIN}}class zm extends wh{static get __EMPTY_NODE(){return fp}static set __EMPTY_NODE(s){fp=s}compare(s,o){return su(s.name,o.name)}isDefinedOn(s){throw(0,me.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(s,o){return!1}minPost(){return Ur.MIN}maxPost(){return new Ur(Dl,fp)}makePost(s,o){return(0,me.hu)("string"==typeof s,"KeyIndex indexValue must always be a string."),new Ur(s,fp)}toString(){return".key"}}const ol=new zm;class pp{constructor(s,o,c,g,E=null){this.isReverse_=g,this.resultGenerator_=E,this.nodeStack_=[];let T=1;for(;!s.isEmpty();)if(T=o?c(s.key,o):1,g&&(T*=-1),T<0)s=this.isReverse_?s.left:s.right;else{if(0===T){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}getNext(){if(0===this.nodeStack_.length)return null;let o,s=this.nodeStack_.pop();if(o=this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return o}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}}}let Jc,kl=(()=>{class l{constructor(o,c,g,E,T){this.key=o,this.value=c,this.color=g??l.RED,this.left=E??_o.EMPTY_NODE,this.right=T??_o.EMPTY_NODE}copy(o,c,g,E,T){return new l(o??this.key,c??this.value,g??this.color,E??this.left,T??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||!!o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,c,g){let E=this;const T=g(o,E.key);return E=T<0?E.copy(null,null,null,E.left.insert(o,c,g),null):0===T?E.copy(null,c,null,null,null):E.copy(null,null,null,null,E.right.insert(o,c,g)),E.fixUp_()}removeMin_(){if(this.left.isEmpty())return _o.EMPTY_NODE;let o=this;return!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.removeMin_(),null),o.fixUp_()}remove(o,c){let g,E;if(g=this,c(o,g.key)<0)!g.left.isEmpty()&&!g.left.isRed_()&&!g.left.left.isRed_()&&(g=g.moveRedLeft_()),g=g.copy(null,null,null,g.left.remove(o,c),null);else{if(g.left.isRed_()&&(g=g.rotateRight_()),!g.right.isEmpty()&&!g.right.isRed_()&&!g.right.left.isRed_()&&(g=g.moveRedRight_()),0===c(o,g.key)){if(g.right.isEmpty())return _o.EMPTY_NODE;E=g.right.min_(),g=g.copy(E.key,E.value,null,null,g.right.removeMin_())}g=g.copy(null,null,null,null,g.right.remove(o,c))}return g.fixUp_()}isRed_(){return this.color}fixUp_(){let o=this;return o.right.isRed_()&&!o.left.isRed_()&&(o=o.rotateLeft_()),o.left.isRed_()&&o.left.left.isRed_()&&(o=o.rotateRight_()),o.left.isRed_()&&o.right.isRed_()&&(o=o.colorFlip_()),o}moveRedLeft_(){let o=this.colorFlip_();return o.right.left.isRed_()&&(o=o.copy(null,null,null,null,o.right.rotateRight_()),o=o.rotateLeft_(),o=o.colorFlip_()),o}moveRedRight_(){let o=this.colorFlip_();return o.left.left.isRed_()&&(o=o.rotateRight_(),o=o.colorFlip_()),o}rotateLeft_(){const o=this.copy(null,null,l.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight_(){const o=this.copy(null,null,l.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip_(){const o=this.left.copy(null,null,!this.left.color,null,null),c=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,c)}checkMaxDepth_(){const o=this.check_();return Math.pow(2,o)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const o=this.left.check_();if(o!==this.right.check_())throw new Error("Black depths differ");return o+(this.isRed_()?0:1)}}return l.RED=!0,l.BLACK=!1,l})();class _o{constructor(s,o=_o.EMPTY_NODE){this.comparator_=s,this.root_=o}insert(s,o){return new _o(this.comparator_,this.root_.insert(s,o,this.comparator_).copy(null,null,kl.BLACK,null,null))}remove(s){return new _o(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,kl.BLACK,null,null))}get(s){let o,c=this.root_;for(;!c.isEmpty();){if(o=this.comparator_(s,c.key),0===o)return c.value;o<0?c=c.left:o>0&&(c=c.right)}return null}getPredecessorKey(s){let o,c=this.root_,g=null;for(;!c.isEmpty();){if(o=this.comparator_(s,c.key),0===o){if(c.left.isEmpty())return g?g.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}o<0?c=c.left:o>0&&(g=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(s){return this.root_.inorderTraversal(s)}reverseTraversal(s){return this.root_.reverseTraversal(s)}getIterator(s){return new pp(this.root_,null,this.comparator_,!1,s)}getIteratorFrom(s,o){return new pp(this.root_,s,this.comparator_,!1,o)}getReverseIteratorFrom(s,o){return new pp(this.root_,s,this.comparator_,!0,o)}getReverseIterator(s){return new pp(this.root_,null,this.comparator_,!0,s)}}function gp(l,s){return su(l.name,s.name)}function Wm(l,s){return su(l,s)}_o.EMPTY_NODE=new class m_{copy(s,o,c,g,E){return this}insert(s,o,c){return new kl(s,o,null)}remove(s,o){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const y_=function(l){return"number"==typeof l?"number:"+Rd(l):"string:"+l},fv=function(l){if(l.isLeafNode()){const s=l.val();(0,me.hu)("string"==typeof s||"number"==typeof s||"object"==typeof s&&(0,me.r3)(s,".sv"),"Priority must be a string or number.")}else(0,me.hu)(l===Jc||l.isEmpty(),"priority of unexpected type.");(0,me.hu)(l===Jc||l.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let __,qm,v_,qa=(()=>{class l{constructor(o,c=l.__childrenNodeConstructor.EMPTY_NODE){this.value_=o,this.priorityNode_=c,this.lazyHash_=null,(0,me.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),fv(this.priorityNode_)}static set __childrenNodeConstructor(o){__=o}static get __childrenNodeConstructor(){return __}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(o){return new l(this.value_,o)}getImmediateChild(o){return".priority"===o?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}getChild(o){return Zr(o)?this:".priority"===Tr(o)?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(o,c){return null}updateImmediateChild(o,c){return".priority"===o?this.updatePriority(c):c.isEmpty()&&".priority"!==o?this:l.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(o,c).updatePriority(this.priorityNode_)}updateChild(o,c){const g=Tr(o);return null===g?c:c.isEmpty()&&".priority"!==g?this:((0,me.hu)(".priority"!==g||1===Mu(o),".priority must be the last token in a path"),this.updateImmediateChild(g,l.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oi(o),c)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(o,c){return!1}val(o){return o&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let o="";this.priorityNode_.isEmpty()||(o+="priority:"+y_(this.priorityNode_.val())+":");const c=typeof this.value_;o+=c+":",o+="number"===c?Rd(this.value_):this.value_,this.lazyHash_=Og(o)}return this.lazyHash_}getValue(){return this.value_}compareTo(o){return o===l.__childrenNodeConstructor.EMPTY_NODE?1:o instanceof l.__childrenNodeConstructor?-1:((0,me.hu)(o.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(o))}compareToLeafNode_(o){const c=typeof o.value_,g=typeof this.value_,E=l.VALUE_TYPE_ORDER.indexOf(c),T=l.VALUE_TYPE_ORDER.indexOf(g);return(0,me.hu)(E>=0,"Unknown leaf type: "+c),(0,me.hu)(T>=0,"Unknown leaf type: "+g),E===T?"object"===g?0:this.value_<o.value_?-1:this.value_===o.value_?0:1:T-E}withIndex(){return this}isIndexed(){return!0}equals(o){return o===this||!!o.isLeafNode()&&(this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_))}}return l.VALUE_TYPE_ORDER=["object","boolean","number","string"],l})();const Yr=new class ed extends wh{compare(s,o){const c=s.node.getPriority(),g=o.node.getPriority(),E=c.compareTo(g);return 0===E?su(s.name,o.name):E}isDefinedOn(s){return!s.getPriority().isEmpty()}indexedValueChanged(s,o){return!s.getPriority().equals(o.getPriority())}minPost(){return Ur.MIN}maxPost(){return new Ur(Dl,new qa("[PRIORITY-POST]",v_))}makePost(s,o){const c=qm(s);return new Ur(o,new qa("[PRIORITY-POST]",c))}toString(){return".priority"}},Ll=Math.log(2);class hf{constructor(s){this.count=parseInt(Math.log(s+1)/Ll,10),this.current_=this.count-1;const g=(E=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=s+1&g}nextBitIsOne(){const s=!(this.bits_&1<<this.current_);return this.current_--,s}}const ff=function(l,s,o,c){l.sort(s);const g=function(G,X){const Ae=X-G;let Ue,st;if(0===Ae)return null;if(1===Ae)return Ue=l[G],st=o?o(Ue):Ue,new kl(st,Ue.node,kl.BLACK,null,null);{const wt=parseInt(Ae/2,10)+G,At=g(G,wt),on=g(wt+1,X);return Ue=l[wt],st=o?o(Ue):Ue,new kl(st,Ue.node,kl.BLACK,At,on)}},F=function(G){let X=null,Ae=null,Ue=l.length;const st=function(At,on){const yn=Ue-At,br=Ue;Ue-=At;const si=g(yn+1,br),ti=l[yn],oi=o?o(ti):ti;wt(new kl(oi,ti.node,on,null,si))},wt=function(At){X?(X.left=At,X=At):(Ae=At,X=At)};for(let At=0;At<G.count;++At){const on=G.nextBitIsOne(),yn=Math.pow(2,G.count-(At+1));on?st(yn,kl.BLACK):(st(yn,kl.BLACK),st(yn,kl.RED))}return Ae}(new hf(l.length));return new _o(c||s,F)};let pf;const Ch={};class td{constructor(s,o){this.indexes_=s,this.indexSet_=o}static get Default(){return(0,me.hu)(Ch&&Yr,"ChildrenNode.ts has not been loaded"),pf=pf||new td({".priority":Ch},{".priority":Yr}),pf}get(s){const o=(0,me.DV)(this.indexes_,s);if(!o)throw new Error("No index defined for "+s);return o instanceof _o?o:null}hasIndex(s){return(0,me.r3)(this.indexSet_,s.toString())}addIndex(s,o){(0,me.hu)(s!==ol,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const c=[];let g=!1;const E=o.getIterator(Ur.Wrap);let F,T=E.getNext();for(;T;)g=g||s.isDefinedOn(T.node),c.push(T),T=E.getNext();F=g?ff(c,s.getCompare()):Ch;const G=s.toString(),X=Object.assign({},this.indexSet_);X[G]=s;const Ae=Object.assign({},this.indexes_);return Ae[G]=F,new td(Ae,X)}addToIndexes(s,o){const c=(0,me.UI)(this.indexes_,(g,E)=>{const T=(0,me.DV)(this.indexSet_,E);if((0,me.hu)(T,"Missing index implementation for "+E),g===Ch){if(T.isDefinedOn(s.node)){const F=[],G=o.getIterator(Ur.Wrap);let X=G.getNext();for(;X;)X.name!==s.name&&F.push(X),X=G.getNext();return F.push(s),ff(F,T.getCompare())}return Ch}{const F=o.get(s.name);let G=g;return F&&(G=G.remove(new Ur(s.name,F))),G.insert(s,s.node)}});return new td(c,this.indexSet_)}removeFromIndexes(s,o){const c=(0,me.UI)(this.indexes_,g=>{if(g===Ch)return g;{const E=o.get(s.name);return E?g.remove(new Ur(s.name,E)):g}});return new td(c,this.indexSet_)}}let yp,xr=(()=>{class l{constructor(o,c,g){this.children_=o,this.priorityNode_=c,this.indexMap_=g,this.lazyHash_=null,this.priorityNode_&&fv(this.priorityNode_),this.children_.isEmpty()&&(0,me.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yp||(yp=new l(new _o(Wm),null,td.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yp}updatePriority(o){return this.children_.isEmpty()?this:new l(this.children_,o,this.indexMap_)}getImmediateChild(o){if(".priority"===o)return this.getPriority();{const c=this.children_.get(o);return null===c?yp:c}}getChild(o){const c=Tr(o);return null===c?this:this.getImmediateChild(c).getChild(Oi(o))}hasChild(o){return null!==this.children_.get(o)}updateImmediateChild(o,c){if((0,me.hu)(c,"We should always be passing snapshot nodes"),".priority"===o)return this.updatePriority(c);{const g=new Ur(o,c);let E,T;c.isEmpty()?(E=this.children_.remove(o),T=this.indexMap_.removeFromIndexes(g,this.children_)):(E=this.children_.insert(o,c),T=this.indexMap_.addToIndexes(g,this.children_));const F=E.isEmpty()?yp:this.priorityNode_;return new l(E,F,T)}}updateChild(o,c){const g=Tr(o);if(null===g)return c;{(0,me.hu)(".priority"!==Tr(o)||1===Mu(o),".priority must be the last token in a path");const E=this.getImmediateChild(g).updateChild(Oi(o),c);return this.updateImmediateChild(g,E)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(o){if(this.isEmpty())return null;const c={};let g=0,E=0,T=!0;if(this.forEachChild(Yr,(F,G)=>{c[F]=G.val(o),g++,T&&l.INTEGER_REGEXP_.test(F)?E=Math.max(E,Number(F)):T=!1}),!o&&T&&E<2*g){const F=[];for(const G in c)F[G]=c[G];return F}return o&&!this.getPriority().isEmpty()&&(c[".priority"]=this.getPriority().val()),c}hash(){if(null===this.lazyHash_){let o="";this.getPriority().isEmpty()||(o+="priority:"+y_(this.getPriority().val())+":"),this.forEachChild(Yr,(c,g)=>{const E=g.hash();""!==E&&(o+=":"+c+":"+E)}),this.lazyHash_=""===o?"":Og(o)}return this.lazyHash_}getPredecessorChildName(o,c,g){const E=this.resolveIndex_(g);if(E){const T=E.getPredecessorKey(new Ur(o,c));return T?T.name:null}return this.children_.getPredecessorKey(o)}getFirstChildName(o){const c=this.resolveIndex_(o);if(c){const g=c.minKey();return g&&g.name}return this.children_.minKey()}getFirstChild(o){const c=this.getFirstChildName(o);return c?new Ur(c,this.children_.get(c)):null}getLastChildName(o){const c=this.resolveIndex_(o);if(c){const g=c.maxKey();return g&&g.name}return this.children_.maxKey()}getLastChild(o){const c=this.getLastChildName(o);return c?new Ur(c,this.children_.get(c)):null}forEachChild(o,c){const g=this.resolveIndex_(o);return g?g.inorderTraversal(E=>c(E.name,E.node)):this.children_.inorderTraversal(c)}getIterator(o){return this.getIteratorFrom(o.minPost(),o)}getIteratorFrom(o,c){const g=this.resolveIndex_(c);if(g)return g.getIteratorFrom(o,E=>E);{const E=this.children_.getIteratorFrom(o.name,Ur.Wrap);let T=E.peek();for(;null!=T&&c.compare(T,o)<0;)E.getNext(),T=E.peek();return E}}getReverseIterator(o){return this.getReverseIteratorFrom(o.maxPost(),o)}getReverseIteratorFrom(o,c){const g=this.resolveIndex_(c);if(g)return g.getReverseIteratorFrom(o,E=>E);{const E=this.children_.getReverseIteratorFrom(o.name,Ur.Wrap);let T=E.peek();for(;null!=T&&c.compare(T,o)>0;)E.getNext(),T=E.peek();return E}}compareTo(o){return this.isEmpty()?o.isEmpty()?0:-1:o.isLeafNode()||o.isEmpty()?1:o===_p?-1:0}withIndex(o){if(o===ol||this.indexMap_.hasIndex(o))return this;{const c=this.indexMap_.addIndex(o,this.children_);return new l(this.children_,this.priorityNode_,c)}}isIndexed(o){return o===ol||this.indexMap_.hasIndex(o)}equals(o){if(o===this)return!0;if(o.isLeafNode())return!1;{const c=o;if(this.getPriority().equals(c.getPriority())){if(this.children_.count()===c.children_.count()){const g=this.getIterator(Yr),E=c.getIterator(Yr);let T=g.getNext(),F=E.getNext();for(;T&&F;){if(T.name!==F.name||!T.node.equals(F.node))return!1;T=g.getNext(),F=E.getNext()}return null===T&&null===F}return!1}return!1}}resolveIndex_(o){return o===ol?null:this.indexMap_.get(o.toString())}}return l.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,l})();const _p=new class Ug extends xr{constructor(){super(new _o(Wm),xr.EMPTY_NODE,td.Default)}compareTo(s){return s===this?0:1}equals(s){return s===this}getPriority(){return this}getImmediateChild(s){return xr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ur,{MIN:{value:new Ur(el,xr.EMPTY_NODE)},MAX:{value:new Ur(Dl,_p)}}),zm.__EMPTY_NODE=xr.EMPTY_NODE,qa.__childrenNodeConstructor=xr,function mp(l){Jc=l}(_p),function Vg(l){v_=l}(_p);const Km=!0;function ps(l,s=null){if(null===l)return xr.EMPTY_NODE;if("object"==typeof l&&".priority"in l&&(s=l[".priority"]),(0,me.hu)(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof l&&".value"in l&&null!==l[".value"]&&(l=l[".value"]),"object"!=typeof l||".sv"in l)return new qa(l,ps(s));if(l instanceof Array||!Km){let o=xr.EMPTY_NODE;return go(l,(c,g)=>{if((0,me.r3)(l,c)&&"."!==c.substring(0,1)){const E=ps(g);(E.isLeafNode()||!E.isEmpty())&&(o=o.updateImmediateChild(c,E))}}),o.updatePriority(ps(s))}{const o=[];let c=!1;if(go(l,(T,F)=>{if("."!==T.substring(0,1)){const G=ps(F);G.isEmpty()||(c=c||!G.getPriority().isEmpty(),o.push(new Ur(T,G)))}}),0===o.length)return xr.EMPTY_NODE;const E=ff(o,gp,T=>T.name,Wm);if(c){const T=ff(o,Yr.getCompare());return new xr(E,ps(s),new td({".priority":T},{".priority":Yr}))}return new xr(E,ps(s),td.Default)}}!function E_(l){qm=l}(ps);class nd extends wh{constructor(s){super(),this.indexPath_=s,(0,me.hu)(!Zr(s)&&".priority"!==Tr(s),"Can't create PathIndex with empty path or .priority key")}extractChild(s){return s.getChild(this.indexPath_)}isDefinedOn(s){return!s.getChild(this.indexPath_).isEmpty()}compare(s,o){const c=this.extractChild(s.node),g=this.extractChild(o.node),E=c.compareTo(g);return 0===E?su(s.name,o.name):E}makePost(s,o){const c=ps(s),g=xr.EMPTY_NODE.updateChild(this.indexPath_,c);return new Ur(o,g)}maxPost(){const s=xr.EMPTY_NODE.updateChild(this.indexPath_,_p);return new Ur(Dl,s)}toString(){return il(this.indexPath_,0).join("/")}}const Bg=new class pv extends wh{compare(s,o){const c=s.node.compareTo(o.node);return 0===c?su(s.name,o.name):c}isDefinedOn(s){return!0}indexedValueChanged(s,o){return!s.equals(o)}minPost(){return Ur.MIN}maxPost(){return Ur.MAX}makePost(s,o){const c=ps(s);return new Ur(o,c)}toString(){return".value"}};function w_(l){return{type:"value",snapshotNode:l}}function Ih(l,s){return{type:"child_added",snapshotNode:s,childName:l}}function Hd(l,s){return{type:"child_removed",snapshotNode:s,childName:l}}function rd(l,s,o){return{type:"child_changed",snapshotNode:s,childName:l,oldSnap:o}}class gc{constructor(s){this.index_=s}updateChild(s,o,c,g,E,T){(0,me.hu)(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");const F=s.getImmediateChild(o);return F.getChild(g).equals(c.getChild(g))&&F.isEmpty()===c.isEmpty()||(null!=T&&(c.isEmpty()?s.hasChild(o)?T.trackChildChange(Hd(o,F)):(0,me.hu)(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):F.isEmpty()?T.trackChildChange(Ih(o,c)):T.trackChildChange(rd(o,c,F))),s.isLeafNode()&&c.isEmpty())?s:s.updateImmediateChild(o,c).withIndex(this.index_)}updateFullNode(s,o,c){return null!=c&&(s.isLeafNode()||s.forEachChild(Yr,(g,E)=>{o.hasChild(g)||c.trackChildChange(Hd(g,E))}),o.isLeafNode()||o.forEachChild(Yr,(g,E)=>{if(s.hasChild(g)){const T=s.getImmediateChild(g);T.equals(E)||c.trackChildChange(rd(g,E,T))}else c.trackChildChange(Ih(g,E))})),o.withIndex(this.index_)}updatePriority(s,o){return s.isEmpty()?xr.EMPTY_NODE:s.updatePriority(o)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Fl{constructor(s){this.indexedFilter_=new gc(s.getIndex()),this.index_=s.getIndex(),this.startPost_=Fl.getStartPost_(s),this.endPost_=Fl.getEndPost_(s),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(s){const o=this.startIsInclusive_?this.index_.compare(this.getStartPost(),s)<=0:this.index_.compare(this.getStartPost(),s)<0,c=this.endIsInclusive_?this.index_.compare(s,this.getEndPost())<=0:this.index_.compare(s,this.getEndPost())<0;return o&&c}updateChild(s,o,c,g,E,T){return this.matches(new Ur(o,c))||(c=xr.EMPTY_NODE),this.indexedFilter_.updateChild(s,o,c,g,E,T)}updateFullNode(s,o,c){o.isLeafNode()&&(o=xr.EMPTY_NODE);let g=o.withIndex(this.index_);g=g.updatePriority(xr.EMPTY_NODE);const E=this;return o.forEachChild(Yr,(T,F)=>{E.matches(new Ur(T,F))||(g=g.updateImmediateChild(T,xr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,g,c)}updatePriority(s,o){return s}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(s){if(s.hasStart()){const o=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),o)}return s.getIndex().minPost()}static getEndPost_(s){if(s.hasEnd()){const o=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),o)}return s.getIndex().maxPost()}}class gv{constructor(s){this.withinDirectionalStart=o=>this.reverse_?this.withinEndPost(o):this.withinStartPost(o),this.withinDirectionalEnd=o=>this.reverse_?this.withinStartPost(o):this.withinEndPost(o),this.withinStartPost=o=>{const c=this.index_.compare(this.rangedFilter_.getStartPost(),o);return this.startIsInclusive_?c<=0:c<0},this.withinEndPost=o=>{const c=this.index_.compare(o,this.rangedFilter_.getEndPost());return this.endIsInclusive_?c<=0:c<0},this.rangedFilter_=new Fl(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft(),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}updateChild(s,o,c,g,E,T){return this.rangedFilter_.matches(new Ur(o,c))||(c=xr.EMPTY_NODE),s.getImmediateChild(o).equals(c)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,o,c,g,E,T):this.fullLimitUpdateChild_(s,o,c,E,T)}updateFullNode(s,o,c){let g;if(o.isLeafNode()||o.isEmpty())g=xr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<o.numChildren()&&o.isIndexed(this.index_)){let E;g=xr.EMPTY_NODE.withIndex(this.index_),E=this.reverse_?o.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let T=0;for(;E.hasNext()&&T<this.limit_;){const F=E.getNext();if(this.withinDirectionalStart(F)){if(!this.withinDirectionalEnd(F))break;g=g.updateImmediateChild(F.name,F.node),T++}}}else{let E;g=o.withIndex(this.index_),g=g.updatePriority(xr.EMPTY_NODE),E=this.reverse_?g.getReverseIterator(this.index_):g.getIterator(this.index_);let T=0;for(;E.hasNext();){const F=E.getNext();T<this.limit_&&this.withinDirectionalStart(F)&&this.withinDirectionalEnd(F)?T++:g=g.updateImmediateChild(F.name,xr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,g,c)}updatePriority(s,o){return s}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(s,o,c,g,E){let T;if(this.reverse_){const Ue=this.index_.getCompare();T=(st,wt)=>Ue(wt,st)}else T=this.index_.getCompare();const F=s;(0,me.hu)(F.numChildren()===this.limit_,"");const G=new Ur(o,c),X=this.reverse_?F.getFirstChild(this.index_):F.getLastChild(this.index_),Ae=this.rangedFilter_.matches(G);if(F.hasChild(o)){const Ue=F.getImmediateChild(o);let st=g.getChildAfterChild(this.index_,X,this.reverse_);for(;null!=st&&(st.name===o||F.hasChild(st.name));)st=g.getChildAfterChild(this.index_,st,this.reverse_);const wt=null==st?1:T(st,G);if(Ae&&!c.isEmpty()&&wt>=0)return E?.trackChildChange(rd(o,c,Ue)),F.updateImmediateChild(o,c);{E?.trackChildChange(Hd(o,Ue));const on=F.updateImmediateChild(o,xr.EMPTY_NODE);return null!=st&&this.rangedFilter_.matches(st)?(E?.trackChildChange(Ih(st.name,st.node)),on.updateImmediateChild(st.name,st.node)):on}}return c.isEmpty()?s:Ae&&T(X,G)>=0?(null!=E&&(E.trackChildChange(Hd(X.name,X.node)),E.trackChildChange(Ih(o,c))),F.updateImmediateChild(o,c).updateImmediateChild(X.name,xr.EMPTY_NODE)):s}}class vp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,me.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,me.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:el}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,me.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,me.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,me.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yr}copy(){const s=new vp;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.startAfterSet_=this.startAfterSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.endBeforeSet_=this.endBeforeSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s}}function Hg(l,s,o){const c=l.copy();return c.startSet_=!0,void 0===s&&(s=null),c.indexStartValue_=s,null!=o?(c.startNameSet_=!0,c.indexStartName_=o):(c.startNameSet_=!1,c.indexStartName_=""),c}function Ep(l,s,o){const c=l.copy();return c.endSet_=!0,void 0===s&&(s=null),c.indexEndValue_=s,void 0!==o?(c.endNameSet_=!0,c.indexEndName_=o):(c.endNameSet_=!1,c.indexEndName_=""),c}function gf(l,s){const o=l.copy();return o.index_=s,o}function mv(l){const s={};if(l.isDefault())return s;let o;if(l.index_===Yr?o="$priority":l.index_===Bg?o="$value":l.index_===ol?o="$key":((0,me.hu)(l.index_ instanceof nd,"Unrecognized index type!"),o=l.index_.toString()),s.orderBy=(0,me.Wl)(o),l.startSet_){const c=l.startAfterSet_?"startAfter":"startAt";s[c]=(0,me.Wl)(l.indexStartValue_),l.startNameSet_&&(s[c]+=","+(0,me.Wl)(l.indexStartName_))}if(l.endSet_){const c=l.endBeforeSet_?"endBefore":"endAt";s[c]=(0,me.Wl)(l.indexEndValue_),l.endNameSet_&&(s[c]+=","+(0,me.Wl)(l.indexEndName_))}return l.limitSet_&&(l.isViewFromLeft()?s.limitToFirst=l.limit_:s.limitToLast=l.limit_),s}function $d(l){const s={};if(l.startSet_&&(s.sp=l.indexStartValue_,l.startNameSet_&&(s.sn=l.indexStartName_),s.sin=!l.startAfterSet_),l.endSet_&&(s.ep=l.indexEndValue_,l.endNameSet_&&(s.en=l.indexEndName_),s.ein=!l.endBeforeSet_),l.limitSet_){s.l=l.limit_;let o=l.viewFrom_;""===o&&(o=l.isViewFromLeft()?"l":"r"),s.vf=o}return l.index_!==Yr&&(s.i=l.index_.toString()),s}class fi extends za{constructor(s,o,c,g){super(),this.repoInfo_=s,this.onDataUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=g,this.log_=Md("p:rest:"),this.listens_={}}reportStats(s){throw new Error("Method not implemented.")}static getListenId_(s,o){return void 0!==o?"tag$"+o:((0,me.hu)(s._queryParams.isDefault(),"should have a tag if it's not a default query."),s._path.toString())}listen(s,o,c,g){const E=s._path.toString();this.log_("Listen called for "+E+" "+s._queryIdentifier);const T=fi.getListenId_(s,c),F={};this.listens_[T]=F;const G=mv(s._queryParams);this.restRequest_(E+".json",G,(X,Ae)=>{let Ue=Ae;if(404===X&&(Ue=null,X=null),null===X&&this.onDataUpdate_(E,Ue,!1,c),(0,me.DV)(this.listens_,T)===F){let st;st=X?401===X?"permission_denied":"rest_error:"+X:"ok",g(st,null)}})}unlisten(s,o){const c=fi.getListenId_(s,o);delete this.listens_[c]}get(s){const o=mv(s._queryParams),c=s._path.toString(),g=new me.BH;return this.restRequest_(c+".json",o,(E,T)=>{let F=T;404===E&&(F=null,E=null),null===E?(this.onDataUpdate_(c,F,!1,null),g.resolve(F)):g.reject(new Error(F))}),g.promise}refreshAuthToken(s){}restRequest_(s,o={},c){return o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([g,E])=>{g&&g.accessToken&&(o.auth=g.accessToken),E&&E.token&&(o.ac=E.token);const T=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+s+"?ns="+this.repoInfo_.namespace+(0,me.xO)(o);this.log_("Sending REST request for "+T);const F=new XMLHttpRequest;F.onreadystatechange=()=>{if(c&&4===F.readyState){this.log_("REST Response for "+T+" received. status:",F.status,"response:",F.responseText);let G=null;if(F.status>=200&&F.status<300){try{G=(0,me.cI)(F.responseText)}catch{po("Failed to parse JSON response for "+T+": "+F.responseText)}c(null,G)}else 401!==F.status&&404!==F.status&&po("Got unsuccessful REST response for "+T+" Status: "+F.status),c(F.status);c=null}},F.open("GET",T,!0),F.send()})}}class wp{constructor(){this.rootNode_=xr.EMPTY_NODE}getNode(s){return this.rootNode_.getChild(s)}updateSnapshot(s,o){this.rootNode_=this.rootNode_.updateChild(s,o)}}function mf(){return{value:null,children:new Map}}function Vl(l,s,o){if(Zr(s))l.value=o,l.children.clear();else if(null!==l.value)l.value=l.value.updateChild(s,o);else{const c=Tr(s);l.children.has(c)||l.children.set(c,mf()),Vl(l.children.get(c),s=Oi(s),o)}}function bh(l,s){if(Zr(s))return l.value=null,l.children.clear(),!0;if(null!==l.value){if(l.value.isLeafNode())return!1;{const o=l.value;return l.value=null,o.forEachChild(Yr,(c,g)=>{Vl(l,new ii(c),g)}),bh(l,s)}}if(l.children.size>0){const o=Tr(s);return s=Oi(s),l.children.has(o)&&bh(l.children.get(o),s)&&l.children.delete(o),0===l.children.size}return!0}function sd(l,s,o){null!==l.value?o(s,l.value):function C_(l,s){l.children.forEach((o,c)=>{s(c,o)})}(l,(c,g)=>{sd(g,new ii(s.toString()+"/"+c),o)})}class Jm{constructor(s){this.collection_=s,this.last_=null}get(){const s=this.collection_.get(),o=Object.assign({},s);return this.last_&&go(this.last_,(c,g)=>{o[c]=o[c]-g}),this.last_=s,o}}class yf{constructor(s,o){this.server_=o,this.statsToReport_={},this.statsListener_=new Jm(s);const c=1e4+2e4*Math.random();Tl(this.reportStats_.bind(this),Math.floor(c))}reportStats_(){const s=this.statsListener_.get(),o={};let c=!1;go(s,(g,E)=>{E>0&&(0,me.r3)(this.statsToReport_,g)&&(o[g]=E,c=!0)}),c&&this.server_.reportStats(o),Tl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ul=function(l){return l[l.OVERWRITE=0]="OVERWRITE",l[l.MERGE=1]="MERGE",l[l.ACK_USER_WRITE=2]="ACK_USER_WRITE",l[l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",l}(Ul||{});function Cp(l){return{fromUser:!1,fromServer:!0,queryId:l,tagged:!0}}class Ma{constructor(s,o,c){this.path=s,this.affectedTree=o,this.revert=c,this.type=Ul.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(s){if(Zr(this.path)){if(null!=this.affectedTree.value)return(0,me.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const o=this.affectedTree.subtree(new ii(s));return new Ma($r(),o,this.revert)}}return(0,me.hu)(Tr(this.path)===s,"operationForChild called for unrelated child."),new Ma(Oi(this.path),this.affectedTree,this.revert)}}class Ip{constructor(s,o){this.source=s,this.path=o,this.type=Ul.LISTEN_COMPLETE}operationForChild(s){return Zr(this.path)?new Ip(this.source,$r()):new Ip(this.source,Oi(this.path))}}class cu{constructor(s,o,c){this.source=s,this.path=o,this.snap=c,this.type=Ul.OVERWRITE}operationForChild(s){return Zr(this.path)?new cu(this.source,$r(),this.snap.getImmediateChild(s)):new cu(this.source,Oi(this.path),this.snap)}}class mc{constructor(s,o,c){this.source=s,this.path=o,this.children=c,this.type=Ul.MERGE}operationForChild(s){if(Zr(this.path)){const o=this.children.subtree(new ii(s));return o.isEmpty()?null:o.value?new cu(this.source,$r(),o.value):new mc(this.source,$r(),o)}return(0,me.hu)(Tr(this.path)===s,"Can't get a merge for a child not on the path of the operation"),new mc(this.source,Oi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ka{constructor(s,o,c){this.node_=s,this.fullyInitialized_=o,this.filtered_=c}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(s){if(Zr(s))return this.isFullyInitialized()&&!this.filtered_;const o=Tr(s);return this.isCompleteForChild(o)}isCompleteForChild(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)}getNode(){return this.node_}}class Gg{constructor(s){this.query_=s,this.index_=this.query_._queryParams.getIndex()}}function ul(l,s,o,c,g,E){const T=c.filter(F=>F.type===o);T.sort((F,G)=>function Wg(l,s,o){if(null==s.childName||null==o.childName)throw(0,me.g5)("Should only compare child_ events.");const c=new Ur(s.childName,s.snapshotNode),g=new Ur(o.childName,o.snapshotNode);return l.index_.compare(c,g)}(l,F,G)),T.forEach(F=>{const G=function ty(l,s,o){return"value"===s.type||"child_removed"===s.type||(s.prevName=o.getPredecessorChildName(s.childName,s.snapshotNode,l.index_)),s}(l,F,E);g.forEach(X=>{X.respondsTo(F.type)&&s.push(X.createEvent(G,l.query_))})})}function qg(l,s){return{eventCache:l,serverCache:s}}function Gd(l,s,o,c){return qg(new Ka(s,o,c),l.serverCache)}function Kg(l,s,o,c){return qg(l.eventCache,new Ka(s,o,c))}function ad(l){return l.eventCache.isFullyInitialized()?l.eventCache.getNode():null}function zd(l){return l.serverCache.isFullyInitialized()?l.serverCache.getNode():null}let ny;class ki{constructor(s,o=(()=>(ny||(ny=new _o(uc)),ny))()){this.value=s,this.children=o}static fromObject(s){let o=new ki(null);return go(s,(c,g)=>{o=o.set(new ii(c),g)}),o}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(s,o){if(null!=this.value&&o(this.value))return{path:$r(),value:this.value};if(Zr(s))return null;{const c=Tr(s),g=this.children.get(c);if(null!==g){const E=g.findRootMostMatchingPathAndValue(Oi(s),o);return null!=E?{path:Vs(new ii(c),E.path),value:E.value}:null}return null}}findRootMostValueAndPath(s){return this.findRootMostMatchingPathAndValue(s,()=>!0)}subtree(s){if(Zr(s))return this;{const o=Tr(s),c=this.children.get(o);return null!==c?c.subtree(Oi(s)):new ki(null)}}set(s,o){if(Zr(s))return new ki(o,this.children);{const c=Tr(s),E=(this.children.get(c)||new ki(null)).set(Oi(s),o),T=this.children.insert(c,E);return new ki(this.value,T)}}remove(s){if(Zr(s))return this.children.isEmpty()?new ki(null):new ki(null,this.children);{const o=Tr(s),c=this.children.get(o);if(c){const g=c.remove(Oi(s));let E;return E=g.isEmpty()?this.children.remove(o):this.children.insert(o,g),null===this.value&&E.isEmpty()?new ki(null):new ki(this.value,E)}return this}}get(s){if(Zr(s))return this.value;{const o=Tr(s),c=this.children.get(o);return c?c.get(Oi(s)):null}}setTree(s,o){if(Zr(s))return o;{const c=Tr(s),E=(this.children.get(c)||new ki(null)).setTree(Oi(s),o);let T;return T=E.isEmpty()?this.children.remove(c):this.children.insert(c,E),new ki(this.value,T)}}fold(s){return this.fold_($r(),s)}fold_(s,o){const c={};return this.children.inorderTraversal((g,E)=>{c[g]=E.fold_(Vs(s,g),o)}),o(s,this.value,c)}findOnPath(s,o){return this.findOnPath_(s,$r(),o)}findOnPath_(s,o,c){const g=!!this.value&&c(o,this.value);if(g)return g;if(Zr(s))return null;{const E=Tr(s),T=this.children.get(E);return T?T.findOnPath_(Oi(s),Vs(o,E),c):null}}foreachOnPath(s,o){return this.foreachOnPath_(s,$r(),o)}foreachOnPath_(s,o,c){if(Zr(s))return this;{this.value&&c(o,this.value);const g=Tr(s),E=this.children.get(g);return E?E.foreachOnPath_(Oi(s),Vs(o,g),c):new ki(null)}}foreach(s){this.foreach_($r(),s)}foreach_(s,o){this.children.inorderTraversal((c,g)=>{g.foreach_(Vs(s,c),o)}),this.value&&o(s,this.value)}foreachChild(s){this.children.inorderTraversal((o,c)=>{c.value&&s(o,c.value)})}}class Ra{constructor(s){this.writeTree_=s}static empty(){return new Ra(new ki(null))}}function _f(l,s,o){if(Zr(s))return new Ra(new ki(o));{const c=l.writeTree_.findRootMostValueAndPath(s);if(null!=c){const g=c.path;let E=c.value;const T=Wa(g,s);return E=E.updateChild(T,o),new Ra(l.writeTree_.set(g,E))}{const g=new ki(o),E=l.writeTree_.setTree(s,g);return new Ra(E)}}}function bp(l,s,o){let c=l;return go(o,(g,E)=>{c=_f(c,Vs(s,g),E)}),c}function Zg(l,s){if(Zr(s))return Ra.empty();{const o=l.writeTree_.setTree(s,new ki(null));return new Ra(o)}}function ry(l,s){return null!=Dh(l,s)}function Dh(l,s){const o=l.writeTree_.findRootMostValueAndPath(s);return null!=o?l.writeTree_.get(o.path).getChild(Wa(o.path,s)):null}function b_(l){const s=[],o=l.writeTree_.value;return null!=o?o.isLeafNode()||o.forEachChild(Yr,(c,g)=>{s.push(new Ur(c,g))}):l.writeTree_.children.inorderTraversal((c,g)=>{null!=g.value&&s.push(new Ur(c,g.value))}),s}function yc(l,s){if(Zr(s))return l;{const o=Dh(l,s);return new Ra(null!=o?new ki(o):l.writeTree_.subtree(s))}}function jo(l){return l.writeTree_.isEmpty()}function Dp(l,s){return Tp($r(),l.writeTree_,s)}function Tp(l,s,o){if(null!=s.value)return o.updateChild(l,s.value);{let c=null;return s.children.inorderTraversal((g,E)=>{".priority"===g?((0,me.hu)(null!==E.value,"Priority writes must always be leaf nodes"),c=E.value):o=Tp(Vs(l,g),E,o)}),!o.getChild(l).isEmpty()&&null!==c&&(o=o.updateChild(Vs(l,".priority"),c)),o}}function Yg(l,s){return M_(s,l)}function wf(l,s){if(l.snap)return lu(l.path,s);for(const o in l.children)if(l.children.hasOwnProperty(o)&&lu(Vs(l.path,o),s))return!0;return!1}function Mp(l){return l.visible}function Wd(l,s,o){let c=Ra.empty();for(let g=0;g<l.length;++g){const E=l[g];if(s(E)){const T=E.path;let F;if(E.snap)lu(o,T)?(F=Wa(o,T),c=_f(c,F,E.snap)):lu(T,o)&&(F=Wa(T,o),c=_f(c,$r(),E.snap.getChild(F)));else{if(!E.children)throw(0,me.g5)("WriteRecord should have .snap or .children");if(lu(o,T))F=Wa(o,T),c=bp(c,F,E.children);else if(lu(T,o))if(F=Wa(T,o),Zr(F))c=bp(c,$r(),E.children);else{const G=(0,me.DV)(E.children,Tr(F));if(G){const X=G.getChild(Oi(F));c=_f(c,$r(),X)}}}}}return c}function Rp(l,s,o,c,g){if(c||g){const E=yc(l.visibleWrites,s);return!g&&jo(E)?o:g||null!=o||ry(E,$r())?Dp(Wd(l.allWrites,function(X){return(X.visible||g)&&(!c||!~c.indexOf(X.writeId))&&(lu(X.path,s)||lu(s,X.path))},s),o||xr.EMPTY_NODE):null}{const E=Dh(l.visibleWrites,s);if(null!=E)return E;{const T=yc(l.visibleWrites,s);return jo(T)?o:null!=o||ry(T,$r())?Dp(T,o||xr.EMPTY_NODE):null}}}function Pp(l,s,o,c){return Rp(l.writeTree,l.treePath,s,o,c)}function Xg(l,s){return function Th(l,s,o){let c=xr.EMPTY_NODE;const g=Dh(l.visibleWrites,s);if(g)return g.isLeafNode()||g.forEachChild(Yr,(E,T)=>{c=c.updateImmediateChild(E,T)}),c;if(o){const E=yc(l.visibleWrites,s);return o.forEachChild(Yr,(T,F)=>{const G=Dp(yc(E,new ii(T)),F);c=c.updateImmediateChild(T,G)}),b_(E).forEach(T=>{c=c.updateImmediateChild(T.name,T.node)}),c}return b_(yc(l.visibleWrites,s)).forEach(T=>{c=c.updateImmediateChild(T.name,T.node)}),c}(l.writeTree,l.treePath,s)}function xp(l,s,o,c){return function Sh(l,s,o,c,g){(0,me.hu)(c||g,"Either existingEventSnap or existingServerSnap must exist");const E=Vs(s,o);if(ry(l.visibleWrites,E))return null;{const T=yc(l.visibleWrites,E);return jo(T)?g.getChild(o):Dp(T,g.getChild(o))}}(l.writeTree,l.treePath,s,o,c)}function Op(l,s){return function Np(l,s){return Dh(l.visibleWrites,s)}(l.writeTree,Vs(l.treePath,s))}function sy(l,s,o){return function D_(l,s,o,c){const g=Vs(s,o),E=Dh(l.visibleWrites,g);return null!=E?E:c.isCompleteForChild(o)?Dp(yc(l.visibleWrites,g),c.getNode().getImmediateChild(o)):null}(l.writeTree,l.treePath,s,o)}function A_(l,s){return M_(Vs(l.treePath,s),l.writeTree)}function M_(l,s){return{treePath:l,writeTree:s}}class qd{constructor(){this.changeMap=new Map}trackChildChange(s){const o=s.type,c=s.childName;(0,me.hu)("child_added"===o||"child_changed"===o||"child_removed"===o,"Only child changes supported for tracking"),(0,me.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");const g=this.changeMap.get(c);if(g){const E=g.type;if("child_added"===o&&"child_removed"===E)this.changeMap.set(c,rd(c,s.snapshotNode,g.snapshotNode));else if("child_removed"===o&&"child_added"===E)this.changeMap.delete(c);else if("child_removed"===o&&"child_changed"===E)this.changeMap.set(c,Hd(c,g.oldSnap));else if("child_changed"===o&&"child_added"===E)this.changeMap.set(c,Ih(c,s.snapshotNode));else{if("child_changed"!==o||"child_changed"!==E)throw(0,me.g5)("Illegal combination of changes: "+s+" occurred after "+g);this.changeMap.set(c,rd(c,s.snapshotNode,g.oldSnap))}}else this.changeMap.set(c,s)}getChanges(){return Array.from(this.changeMap.values())}}const Jg=new class Kd{getCompleteChild(s){return null}getChildAfterChild(s,o,c){return null}};class Ah{constructor(s,o,c=null){this.writes_=s,this.viewCache_=o,this.optCompleteServerCache_=c}getCompleteChild(s){const o=this.viewCache_.eventCache;if(o.isCompleteForChild(s))return o.getNode().getImmediateChild(s);{const c=null!=this.optCompleteServerCache_?new Ka(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sy(this.writes_,s,c)}}getChildAfterChild(s,o,c){const g=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zd(this.viewCache_),E=function S_(l,s,o,c,g,E){return function Qg(l,s,o,c,g,E,T){let F;const G=yc(l.visibleWrites,s),X=Dh(G,$r());if(null!=X)F=X;else{if(null==o)return[];F=Dp(G,o)}if(F=F.withIndex(T),F.isEmpty()||F.isLeafNode())return[];{const Ae=[],Ue=T.getCompare(),st=E?F.getReverseIteratorFrom(c,T):F.getIteratorFrom(c,T);let wt=st.getNext();for(;wt&&Ae.length<g;)0!==Ue(wt,c)&&Ae.push(wt),wt=st.getNext();return Ae}}(l.writeTree,l.treePath,s,o,c,g,E)}(this.writes_,g,o,1,c,s);return 0===E.length?null:E[0]}}function tm(l,s,o,c,g,E){const T=s.eventCache;if(null!=Op(c,o))return s;{let F,G;if(Zr(o))if((0,me.hu)(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){const X=zd(s),Ue=Xg(c,X instanceof xr?X:xr.EMPTY_NODE);F=l.filter.updateFullNode(s.eventCache.getNode(),Ue,E)}else{const X=Pp(c,zd(s));F=l.filter.updateFullNode(s.eventCache.getNode(),X,E)}else{const X=Tr(o);if(".priority"===X){(0,me.hu)(1===Mu(o),"Can't have a priority with additional path components");const Ae=T.getNode();G=s.serverCache.getNode();const Ue=xp(c,o,Ae,G);F=null!=Ue?l.filter.updatePriority(Ae,Ue):T.getNode()}else{const Ae=Oi(o);let Ue;if(T.isCompleteForChild(X)){G=s.serverCache.getNode();const st=xp(c,o,T.getNode(),G);Ue=null!=st?T.getNode().getImmediateChild(X).updateChild(Ae,st):T.getNode().getImmediateChild(X)}else Ue=sy(c,X,s.serverCache);F=null!=Ue?l.filter.updateChild(T.getNode(),X,Ue,Ae,g,E):T.getNode()}}return Gd(s,F,T.isFullyInitialized()||Zr(o),l.filter.filtersNodes())}}function Lp(l,s,o,c,g,E,T,F){const G=s.serverCache;let X;const Ae=T?l.filter:l.filter.getIndexedFilter();if(Zr(o))X=Ae.updateFullNode(G.getNode(),c,null);else if(Ae.filtersNodes()&&!G.isFiltered()){const wt=G.getNode().updateChild(o,c);X=Ae.updateFullNode(G.getNode(),wt,null)}else{const wt=Tr(o);if(!G.isCompleteForPath(o)&&Mu(o)>1)return s;const At=Oi(o),yn=G.getNode().getImmediateChild(wt).updateChild(At,c);X=".priority"===wt?Ae.updatePriority(G.getNode(),yn):Ae.updateChild(G.getNode(),wt,yn,At,Jg,null)}const Ue=Kg(s,X,G.isFullyInitialized()||Zr(o),Ae.filtersNodes());return tm(l,Ue,o,g,new Ah(g,Ue,E),F)}function nm(l,s,o,c,g,E,T){const F=s.eventCache;let G,X;const Ae=new Ah(g,s,E);if(Zr(o))X=l.filter.updateFullNode(s.eventCache.getNode(),c,T),G=Gd(s,X,!0,l.filter.filtersNodes());else{const Ue=Tr(o);if(".priority"===Ue)X=l.filter.updatePriority(s.eventCache.getNode(),c),G=Gd(s,X,F.isFullyInitialized(),F.isFiltered());else{const st=Oi(o),wt=F.getNode().getImmediateChild(Ue);let At;if(Zr(st))At=c;else{const on=Ae.getCompleteChild(Ue);At=null!=on?".priority"===Xc(st)&&on.getChild(Fd(st)).isEmpty()?on:on.updateChild(st,c):xr.EMPTY_NODE}G=wt.equals(At)?s:Gd(s,l.filter.updateChild(F.getNode(),Ue,At,st,Ae,T),F.isFullyInitialized(),l.filter.filtersNodes())}}return G}function oy(l,s){return l.eventCache.isCompleteForChild(s)}function rm(l,s,o){return o.foreach((c,g)=>{s=s.updateChild(c,g)}),s}function Bl(l,s,o,c,g,E,T,F){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;let X,G=s;X=Zr(o)?c:new ki(null).setTree(o,c);const Ae=s.serverCache.getNode();return X.children.inorderTraversal((Ue,st)=>{if(Ae.hasChild(Ue)){const At=rm(0,s.serverCache.getNode().getImmediateChild(Ue),st);G=Lp(l,G,new ii(Ue),At,g,E,T,F)}}),X.children.inorderTraversal((Ue,st)=>{const wt=!s.serverCache.isCompleteForChild(Ue)&&null===st.value;if(!Ae.hasChild(Ue)&&!wt){const on=rm(0,s.serverCache.getNode().getImmediateChild(Ue),st);G=Lp(l,G,new ii(Ue),on,g,E,T,F)}}),G}class ay{constructor(s,o){this.query_=s,this.eventRegistrations_=[];const c=this.query_._queryParams,g=new gc(c.getIndex()),E=function Zm(l){return l.loadsAllData()?new gc(l.getIndex()):l.hasLimit()?new gv(l):new Fl(l)}(c);this.processor_=function em(l){return{filter:l}}(E);const T=o.serverCache,F=o.eventCache,G=g.updateFullNode(xr.EMPTY_NODE,T.getNode(),null),X=E.updateFullNode(xr.EMPTY_NODE,F.getNode(),null),Ae=new Ka(G,T.isFullyInitialized(),g.filtersNodes()),Ue=new Ka(X,F.isFullyInitialized(),E.filtersNodes());this.viewCache_=qg(Ue,Ae),this.eventGenerator_=new Gg(this.query_)}get query(){return this.query_}}function x_(l,s){const o=zd(l.viewCache_);return o&&(l.query._queryParams.loadsAllData()||!Zr(s)&&!o.getImmediateChild(Tr(s)).isEmpty())?o.getChild(s):null}function om(l){return 0===l.eventRegistrations_.length}function Zd(l,s,o){const c=[];if(o){(0,me.hu)(null==s,"A cancel should cancel all event registrations.");const g=l.query._path;l.eventRegistrations_.forEach(E=>{const T=E.createCancelEvent(o,g);T&&c.push(T)})}if(s){let g=[];for(let E=0;E<l.eventRegistrations_.length;++E){const T=l.eventRegistrations_[E];if(T.matches(s)){if(s.hasAnyCallback()){g=g.concat(l.eventRegistrations_.slice(E+1));break}}else g.push(T)}l.eventRegistrations_=g}else l.eventRegistrations_=[];return c}function ly(l,s,o,c){s.type===Ul.MERGE&&null!==s.source.queryId&&((0,me.hu)(zd(l.viewCache_),"We should always have a full cache before handling merges"),(0,me.hu)(ad(l.viewCache_),"Missing event cache, even though we have a server cache"));const g=l.viewCache_,E=function R_(l,s,o,c,g){const E=new qd;let T,F;if(o.type===Ul.OVERWRITE){const X=o;X.source.fromUser?T=nm(l,s,X.path,X.snap,c,g,E):((0,me.hu)(X.source.fromServer,"Unknown source."),F=X.source.tagged||s.serverCache.isFiltered()&&!Zr(X.path),T=Lp(l,s,X.path,X.snap,c,g,F,E))}else if(o.type===Ul.MERGE){const X=o;X.source.fromUser?T=function Cf(l,s,o,c,g,E,T){let F=s;return c.foreach((G,X)=>{const Ae=Vs(o,G);oy(s,Tr(Ae))&&(F=nm(l,F,Ae,X,g,E,T))}),c.foreach((G,X)=>{const Ae=Vs(o,G);oy(s,Tr(Ae))||(F=nm(l,F,Ae,X,g,E,T))}),F}(l,s,X.path,X.children,c,g,E):((0,me.hu)(X.source.fromServer,"Unknown source."),F=X.source.tagged||s.serverCache.isFiltered(),T=Bl(l,s,X.path,X.children,c,g,F,E))}else if(o.type===Ul.ACK_USER_WRITE){const X=o;T=X.revert?function sm(l,s,o,c,g,E){let T;if(null!=Op(c,o))return s;{const F=new Ah(c,s,g),G=s.eventCache.getNode();let X;if(Zr(o)||".priority"===Tr(o)){let Ae;if(s.serverCache.isFullyInitialized())Ae=Pp(c,zd(s));else{const Ue=s.serverCache.getNode();(0,me.hu)(Ue instanceof xr,"serverChildren would be complete if leaf node"),Ae=Xg(c,Ue)}X=l.filter.updateFullNode(G,Ae,E)}else{const Ae=Tr(o);let Ue=sy(c,Ae,s.serverCache);null==Ue&&s.serverCache.isCompleteForChild(Ae)&&(Ue=G.getImmediateChild(Ae)),X=null!=Ue?l.filter.updateChild(G,Ae,Ue,Oi(o),F,E):s.eventCache.getNode().hasChild(Ae)?l.filter.updateChild(G,Ae,xr.EMPTY_NODE,Oi(o),F,E):G,X.isEmpty()&&s.serverCache.isFullyInitialized()&&(T=Pp(c,zd(s)),T.isLeafNode()&&(X=l.filter.updateFullNode(X,T,E)))}return T=s.serverCache.isFullyInitialized()||null!=Op(c,$r()),Gd(s,X,T,l.filter.filtersNodes())}}(l,s,X.path,c,g,E):function ud(l,s,o,c,g,E,T){if(null!=Op(g,o))return s;const F=s.serverCache.isFiltered(),G=s.serverCache;if(null!=c.value){if(Zr(o)&&G.isFullyInitialized()||G.isCompleteForPath(o))return Lp(l,s,o,G.getNode().getChild(o),g,E,F,T);if(Zr(o)){let X=new ki(null);return G.getNode().forEachChild(ol,(Ae,Ue)=>{X=X.set(new ii(Ae),Ue)}),Bl(l,s,o,X,g,E,F,T)}return s}{let X=new ki(null);return c.foreach((Ae,Ue)=>{const st=Vs(o,Ae);G.isCompleteForPath(st)&&(X=X.set(Ae,G.getNode().getChild(st)))}),Bl(l,s,o,X,g,E,F,T)}}(l,s,X.path,X.affectedTree,c,g,E)}else{if(o.type!==Ul.LISTEN_COMPLETE)throw(0,me.g5)("Unknown operation type: "+o.type);T=function im(l,s,o,c,g){const E=s.serverCache;return tm(l,Kg(s,E.getNode(),E.isFullyInitialized()||Zr(o),E.isFiltered()),o,c,Jg,g)}(l,s,o.path,c,E)}const G=E.getChanges();return function N_(l,s,o){const c=s.eventCache;if(c.isFullyInitialized()){const g=c.getNode().isLeafNode()||c.getNode().isEmpty(),E=ad(l);(o.length>0||!l.eventCache.isFullyInitialized()||g&&!c.getNode().equals(E)||!c.getNode().getPriority().equals(E.getPriority()))&&o.push(w_(ad(s)))}}(s,T,G),{viewCache:T,changes:G}}(l.processor_,g,s,o,c);return function kp(l,s){(0,me.hu)(s.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),(0,me.hu)(s.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed")}(l.processor_,E.viewCache),(0,me.hu)(E.viewCache.serverCache.isFullyInitialized()||!g.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),l.viewCache_=E.viewCache,Ho(l,E.changes,E.viewCache.eventCache.getNode(),null)}function Ho(l,s,o,c){return function zg(l,s,o,c){const g=[],E=[];return s.forEach(T=>{"child_changed"===T.type&&l.index_.indexedValueChanged(T.oldSnap,T.snapshotNode)&&E.push(function id(l,s){return{type:"child_moved",snapshotNode:s,childName:l}}(T.childName,T.snapshotNode))}),ul(l,g,"child_removed",s,c,o),ul(l,g,"child_added",s,c,o),ul(l,g,"child_moved",E,c,o),ul(l,g,"child_changed",s,c,o),ul(l,g,"value",s,c,o),g}(l.eventGenerator_,s,o,c?[c]:l.eventRegistrations_)}let ld,cd;class bf{constructor(){this.views=new Map}}function am(l,s,o,c){const g=s.source.queryId;if(null!==g){const E=l.views.get(g);return(0,me.hu)(null!=E,"SyncTree gave us an op for an invalid query."),ly(E,s,o,c)}{let E=[];for(const T of l.views.values())E=E.concat(ly(T,s,o,c));return E}}function O_(l,s,o,c,g){const T=l.views.get(s._queryIdentifier);if(!T){let F=Pp(o,g?c:null),G=!1;F?G=!0:c instanceof xr?(F=Xg(o,c),G=!1):(F=xr.EMPTY_NODE,G=!1);const X=qg(new Ka(F,G,!1),new Ka(c,g,!1));return new ay(s,X)}return T}function k_(l){const s=[];for(const o of l.views.values())o.query._queryParams.loadsAllData()||s.push(o);return s}function jl(l,s){let o=null;for(const c of l.views.values())o=o||x_(c,s);return o}function Mh(l,s){return s._queryParams.loadsAllData()?Vp(l):l.views.get(s._queryIdentifier)}function _c(l,s){return null!=Mh(l,s)}function Ru(l){return null!=Vp(l)}function Vp(l){for(const s of l.views.values())if(s.query._queryParams.loadsAllData())return s;return null}let Tf=1;class Up{constructor(s){this.listenProvider_=s,this.syncPointTree_=new ki(null),this.pendingWriteTree_=function T_(){return{visibleWrites:Ra.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hy(l,s,o,c,g){return function iy(l,s,o,c,g){(0,me.hu)(c>l.lastWriteId,"Stacking an older write on top of newer ones"),void 0===g&&(g=!0),l.allWrites.push({path:s,snap:o,writeId:c,visible:g}),g&&(l.visibleWrites=_f(l.visibleWrites,s,o)),l.lastWriteId=c}(l.pendingWriteTree_,s,o,c,g),g?Rh(l,new cu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,o)):[]}function Nu(l,s,o=!1){const c=function vf(l,s){for(let o=0;o<l.allWrites.length;o++){const c=l.allWrites[o];if(c.writeId===s)return c}return null}(l.pendingWriteTree_,s);if(function Ef(l,s){const o=l.allWrites.findIndex(F=>F.writeId===s);(0,me.hu)(o>=0,"removeWrite called with nonexistent writeId.");const c=l.allWrites[o];l.allWrites.splice(o,1);let g=c.visible,E=!1,T=l.allWrites.length-1;for(;g&&T>=0;){const F=l.allWrites[T];F.visible&&(T>=o&&wf(F,c.path)?g=!1:lu(c.path,F.path)&&(E=!0)),T--}return!!g&&(E?(function Ap(l){l.visibleWrites=Wd(l.allWrites,Mp,$r()),l.lastWriteId=l.allWrites.length>0?l.allWrites[l.allWrites.length-1].writeId:-1}(l),!0):(c.snap?l.visibleWrites=Zg(l.visibleWrites,c.path):go(c.children,G=>{l.visibleWrites=Zg(l.visibleWrites,Vs(c.path,G))}),!0))}(l.pendingWriteTree_,s)){let E=new ki(null);return null!=c.snap?E=E.set($r(),!0):go(c.children,T=>{E=E.set(new ii(T),!0)}),Rh(l,new Ma(c.path,E,o))}return[]}function Pu(l,s,o){return Rh(l,new cu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,o))}function Bp(l,s,o,c,g=!1){const E=s._path,T=l.syncPointTree_.get(E);let F=[];if(T&&("default"===s._queryIdentifier||_c(T,s))){const G=function _v(l,s,o,c){const g=s._queryIdentifier,E=[];let T=[];const F=Ru(l);if("default"===g)for(const[G,X]of l.views.entries())T=T.concat(Zd(X,o,c)),om(X)&&(l.views.delete(G),X.query._queryParams.loadsAllData()||E.push(X.query));else{const G=l.views.get(g);G&&(T=T.concat(Zd(G,o,c)),om(G)&&(l.views.delete(g),G.query._queryParams.loadsAllData()||E.push(G.query)))}return F&&!Ru(l)&&E.push(new(function Df(){return(0,me.hu)(ld,"Reference.ts has not been loaded"),ld}())(s._repo,s._path)),{removed:E,events:T}}(T,s,o,c);(function cy(l){return 0===l.views.size})(T)&&(l.syncPointTree_=l.syncPointTree_.remove(E));const X=G.removed;if(F=G.events,!g){const Ae=-1!==X.findIndex(st=>st._queryParams.loadsAllData()),Ue=l.syncPointTree_.findOnPath(E,(st,wt)=>Ru(wt));if(Ae&&!Ue){const st=l.syncPointTree_.subtree(E);if(!st.isEmpty()){const wt=function Xd(l){return l.fold((s,o,c)=>{if(o&&Ru(o))return[Vp(o)];{let g=[];return o&&(g=k_(o)),go(c,(E,T)=>{g=g.concat(T)}),g}})}(st);for(let At=0;At<wt.length;++At){const on=wt[At],yn=on.query,br=gy(l,on);l.listenProvider_.startListening(ll(yn),$p(l,yn),br.hashFn,br.onComplete)}}}!Ue&&X.length>0&&!c&&(Ae?l.listenProvider_.stopListening(ll(s),null):X.forEach(st=>{const wt=l.queryToTagMap.get(Gp(st));l.listenProvider_.stopListening(ll(st),wt)}))}!function V_(l,s){for(let o=0;o<s.length;++o){const c=s[o];if(!c._queryParams.loadsAllData()){const g=Gp(c),E=l.queryToTagMap.get(g);l.queryToTagMap.delete(g),l.tagToQueryMap.delete(E)}}}(l,X)}return F}function jp(l,s,o,c){const g=my(l,c);if(null!=g){const E=cm(g),T=E.path,F=E.queryId,G=Wa(T,s);return Sf(l,T,new cu(Cp(F),G,o))}return[]}function Hp(l,s,o,c=!1){const g=s._path;let E=null,T=!1;l.syncPointTree_.foreachOnPath(g,(st,wt)=>{const At=Wa(st,g);E=E||jl(wt,At),T=T||Ru(wt)});let G,F=l.syncPointTree_.get(g);F?(T=T||Ru(F),E=E||jl(F,$r())):(F=new bf,l.syncPointTree_=l.syncPointTree_.set(g,F)),null!=E?G=!0:(G=!1,E=xr.EMPTY_NODE,l.syncPointTree_.subtree(g).foreachChild((wt,At)=>{const on=jl(At,$r());on&&(E=E.updateImmediateChild(wt,on))}));const X=_c(F,s);if(!X&&!s._queryParams.loadsAllData()){const st=Gp(s);(0,me.hu)(!l.queryToTagMap.has(st),"View does not exist, but we have a tag");const wt=function yy(){return Tf++}();l.queryToTagMap.set(st,wt),l.tagToQueryMap.set(wt,st)}let Ue=function yv(l,s,o,c,g,E){const T=O_(l,s,c,g,E);return l.views.has(s._queryIdentifier)||l.views.set(s._queryIdentifier,T),function If(l,s){l.eventRegistrations_.push(s)}(T,o),function eE(l,s){const o=l.viewCache_.eventCache,c=[];return o.getNode().isLeafNode()||o.getNode().forEachChild(Yr,(E,T)=>{c.push(Ih(E,T))}),o.isFullyInitialized()&&c.push(w_(o.getNode())),Ho(l,c,o.getNode(),s)}(T,o)}(F,s,o,Yg(l.pendingWriteTree_,g),E,G);if(!X&&!T&&!c){const st=Mh(F,s);Ue=Ue.concat(function dm(l,s,o){const c=s._path,g=$p(l,s),E=gy(l,o),T=l.listenProvider_.startListening(ll(s),g,E.hashFn,E.onComplete),F=l.syncPointTree_.subtree(c);if(g)(0,me.hu)(!Ru(F.value),"If we're adding a query, it shouldn't be shadowed");else{const G=F.fold((X,Ae,Ue)=>{if(!Zr(X)&&Ae&&Ru(Ae))return[Vp(Ae).query];{let st=[];return Ae&&(st=st.concat(k_(Ae).map(wt=>wt.query))),go(Ue,(wt,At)=>{st=st.concat(At)}),st}});for(let X=0;X<G.length;++X){const Ae=G[X];l.listenProvider_.stopListening(ll(Ae),$p(l,Ae))}}return T}(l,s,st))}return Ue}function Yd(l,s,o){const g=l.pendingWriteTree_,E=l.syncPointTree_.findOnPath(s,(T,F)=>{const X=jl(F,Wa(T,s));if(X)return X});return Rp(g,s,E,o,!0)}function Rh(l,s){return Qd(s,l.syncPointTree_,null,Yg(l.pendingWriteTree_,$r()))}function Qd(l,s,o,c){if(Zr(l.path))return lm(l,s,o,c);{const g=s.get($r());null==o&&null!=g&&(o=jl(g,$r()));let E=[];const T=Tr(l.path),F=l.operationForChild(T),G=s.children.get(T);if(G&&F){const X=o?o.getImmediateChild(T):null,Ae=A_(c,T);E=E.concat(Qd(F,G,X,Ae))}return g&&(E=E.concat(am(g,l,c,o))),E}}function lm(l,s,o,c){const g=s.get($r());null==o&&null!=g&&(o=jl(g,$r()));let E=[];return s.children.inorderTraversal((T,F)=>{const G=o?o.getImmediateChild(T):null,X=A_(c,T),Ae=l.operationForChild(T);Ae&&(E=E.concat(lm(Ae,F,G,X)))}),g&&(E=E.concat(am(g,l,c,o))),E}function gy(l,s){const o=s.query,c=$p(l,o);return{hashFn:()=>(function uy(l){return l.viewCache_.serverCache.getNode()}(s)||xr.EMPTY_NODE).hash(),onComplete:g=>{if("ok"===g)return c?function Nr(l,s,o){const c=my(l,o);if(c){const g=cm(c),E=g.path,T=g.queryId,F=Wa(E,s);return Sf(l,E,new Ip(Cp(T),F))}return[]}(l,o._path,c):function F_(l,s){return Rh(l,new Ip({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s))}(l,o._path);{const E=function na(l,s){let o="Unknown Error";"too_big"===l?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===l?o="Client doesn't have permission to access the desired data.":"unavailable"===l&&(o="The service is unavailable");const c=new Error(l+" at "+s._path.toString()+": "+o);return c.code=l.toUpperCase(),c}(g,o);return Bp(l,o,null,E)}}}}function $p(l,s){const o=Gp(s);return l.queryToTagMap.get(o)}function Gp(l){return l._path.toString()+"$"+l._queryIdentifier}function my(l,s){return l.tagToQueryMap.get(s)}function cm(l){const s=l.indexOf("$");return(0,me.hu)(-1!==s&&s<l.length-1,"Bad queryKey."),{queryId:l.substr(s+1),path:new ii(l.substr(0,s))}}function Sf(l,s,o){const c=l.syncPointTree_.get(s);return(0,me.hu)(c,"Missing sync point for query tag that we're tracking"),am(c,o,Yg(l.pendingWriteTree_,s),null)}function ll(l){return l._queryParams.loadsAllData()&&!l._queryParams.isDefault()?new(function dy(){return(0,me.hu)(cd,"Reference.ts has not been loaded"),cd}())(l._repo,l._path):l}class vc{constructor(s){this.node_=s}getImmediateChild(s){const o=this.node_.getImmediateChild(s);return new vc(o)}node(){return this.node_}}class Af{constructor(s,o){this.syncTree_=s,this.path_=o}getImmediateChild(s){const o=Vs(this.path_,s);return new Af(this.syncTree_,o)}node(){return Yd(this.syncTree_,this.path_)}}const Nh=function(l){return(l=l||{}).timestamp=l.timestamp||(new Date).getTime(),l},zp=function(l,s,o){return l&&"object"==typeof l?((0,me.hu)(".sv"in l,"Unexpected leaf node or priority contents"),"string"==typeof l[".sv"]?Wp(l[".sv"],s,o):"object"==typeof l[".sv"]?Jd(l[".sv"],s):void(0,me.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2))):l},Wp=function(l,s,o){if("timestamp"===l)return o.timestamp;(0,me.hu)(!1,"Unexpected server value: "+l)},Jd=function(l,s,o){l.hasOwnProperty("increment")||(0,me.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2));const c=l.increment;"number"!=typeof c&&(0,me.hu)(!1,"Unexpected increment value: "+c);const g=s.node();if((0,me.hu)(null!==g&&typeof g<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!g.isLeafNode())return c;const T=g.getValue();return"number"!=typeof T?c:T+c},Hl=function(l,s,o,c){return Ec(s,new Af(o,l),c)},Mf=function(l,s,o){return Ec(l,new vc(s),o)};function Ec(l,s,o){const c=l.getPriority().val(),g=zp(c,s.getImmediateChild(".priority"),o);let E;if(l.isLeafNode()){const T=l,F=zp(T.getValue(),s,o);return F!==T.getValue()||g!==T.getPriority().val()?new qa(F,ps(g)):l}{const T=l;return E=T,g!==T.getPriority().val()&&(E=E.updatePriority(new qa(g))),T.forEachChild(Yr,(F,G)=>{const X=Ec(G,s.getImmediateChild(F),o);X!==G&&(E=E.updateImmediateChild(F,X))}),E}}class eh{constructor(s="",o=null,c={children:{},childCount:0}){this.name=s,this.parent=o,this.node=c}}function qp(l,s){let o=s instanceof ii?s:new ii(s),c=l,g=Tr(o);for(;null!==g;){const E=(0,me.DV)(c.node.children,g)||{children:{},childCount:0};c=new eh(g,c,E),o=Oi(o),g=Tr(o)}return c}function cl(l){return l.node.value}function hm(l,s){l.node.value=s,vy(l)}function U_(l){return l.node.childCount>0}function Rf(l,s){go(l.node.children,(o,c)=>{s(new eh(o,l,c))})}function fm(l,s,o,c){o&&!c&&s(l),Rf(l,g=>{fm(g,s,!0,c)}),o&&c&&s(l)}function Nf(l){return new ii(null===l.parent?l.name:Nf(l.parent)+"/"+l.name)}function vy(l){null!==l.parent&&function Ey(l,s,o){const c=function _y(l){return void 0===cl(l)&&!U_(l)}(o),g=(0,me.r3)(l.node.children,s);c&&g?(delete l.node.children[s],l.node.childCount--,vy(l)):!c&&!g&&(l.node.children[s]=o.node,l.node.childCount++,vy(l))}(l.parent,l.name,l)}const Za=/[\[\].#$\/\u0000-\u001F\u007F]/,vv=/[\[\].#$\u0000-\u001F\u007F]/,gm=10485760,wy=function(l){return"string"==typeof l&&0!==l.length&&!Za.test(l)},Kp=function(l){return"string"==typeof l&&0!==l.length&&!vv.test(l)},Pf=function(l){return null===l||"string"==typeof l||"number"==typeof l&&!oc(l)||l&&"object"==typeof l&&(0,me.r3)(l,".sv")},$l=function(l,s,o,c){c&&void 0===s||Zp((0,me.gK)(l,"value"),s,o)},Zp=function(l,s,o){const c=o instanceof ii?new f_(o,l):o;if(void 0===s)throw new Error(l+"contains undefined "+Ol(c));if("function"==typeof s)throw new Error(l+"contains a function "+Ol(c)+" with contents = "+s.toString());if(oc(s))throw new Error(l+"contains "+s.toString()+" "+Ol(c));if("string"==typeof s&&s.length>gm/3&&(0,me.ug)(s)>gm)throw new Error(l+"contains a string greater than "+gm+" utf8 bytes "+Ol(c)+" ('"+s.substring(0,50)+"...')");if(s&&"object"==typeof s){let g=!1,E=!1;if(go(s,(T,F)=>{if(".value"===T)g=!0;else if(".priority"!==T&&".sv"!==T&&(E=!0,!wy(T)))throw new Error(l+" contains an invalid key ("+T+") "+Ol(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Us(l,s){l.parts_.length>0&&(l.byteLength_+=1),l.parts_.push(s),l.byteLength_+=(0,me.ug)(s),Ud(l)})(c,T),Zp(l,F,c),function dp(l){const s=l.parts_.pop();l.byteLength_-=(0,me.ug)(s),l.parts_.length>0&&(l.byteLength_-=1)}(c)}),g&&E)throw new Error(l+' contains ".value" child '+Ol(c)+" in addition to actual children.")}},j_=function(l,s,o,c){if(c&&void 0===s)return;const g=(0,me.gK)(l,"values");if(!s||"object"!=typeof s||Array.isArray(s))throw new Error(g+" must be an object containing the children to replace.");const E=[];go(s,(T,F)=>{const G=new ii(T);if(Zp(g,F,Vs(o,G)),".priority"===Xc(G)&&!Pf(F))throw new Error(g+"contains an invalid value for '"+G.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");E.push(G)}),function(l,s){let o,c;for(o=0;o<s.length;o++){c=s[o];const E=il(c);for(let T=0;T<E.length;T++)if((".priority"!==E[T]||T!==E.length-1)&&!wy(E[T]))throw new Error(l+"contains an invalid key ("+E[T]+") in path "+c.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}s.sort(Gm);let g=null;for(o=0;o<s.length;o++){if(c=s[o],null!==g&&lu(g,c))throw new Error(l+"contains a path "+g.toString()+" that is ancestor of another path "+c.toString());g=c}}(g,E)},Iy=function(l,s,o){if(!o||void 0!==s){if(oc(s))throw new Error((0,me.gK)(l,"priority")+"is "+s.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pf(s))throw new Error((0,me.gK)(l,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dd=function(l,s,o,c){if(!(c&&void 0===o||wy(o)))throw new Error((0,me.gK)(l,s)+'was an invalid key = "'+o+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ph=function(l,s,o,c){if(!(c&&void 0===o||Kp(o)))throw new Error((0,me.gK)(l,s)+'was an invalid path = "'+o+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},by=function(l,s,o,c){o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),Ph(l,s,o,c)},dl=function(l,s){if(".info"===Tr(s))throw new Error(l+" failed = Can't modify data under /.info/")},mm=function(l,s){const o=s.path.toString();if("string"!=typeof s.repoInfo.host||0===s.repoInfo.host.length||!wy(s.repoInfo.namespace)&&"localhost"!==s.repoInfo.host.split(":")[0]||0!==o.length&&!function(l){return l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Kp(l)}(o))throw new Error((0,me.gK)(l,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ev{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ya(l,s){let o=null;for(let c=0;c<s.length;c++){const g=s[c],E=g.getPath();null!==o&&!Vd(E,o.path)&&(l.eventLists_.push(o),o=null),null===o&&(o={events:[],path:E}),o.events.push(g)}o&&l.eventLists_.push(o)}function Yp(l,s,o){Ya(l,o),ym(l,c=>Vd(c,s))}function Qa(l,s,o){Ya(l,o),ym(l,c=>lu(c,s)||lu(s,c))}function ym(l,s){l.recursionDepth_++;let o=!0;for(let c=0;c<l.eventLists_.length;c++){const g=l.eventLists_[c];g&&(s(g.path)?(wv(l.eventLists_[c]),l.eventLists_[c]=null):o=!1)}o&&(l.eventLists_=[]),l.recursionDepth_--}function wv(l){for(let s=0;s<l.events.length;s++){const o=l.events[s];if(null!==o){l.events[s]=null;const c=o.getEventRunner();Bc&&fo("event: "+o.toString()),ou(c)}}}const Qp="repo_interrupt",H_=25;class xf{constructor(s,o,c,g){this.repoInfo_=s,this.forceRestClient_=o,this.authTokenProvider_=c,this.appCheckProvider_=g,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ev,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mf(),this.transactionQueueTree_=new eh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ty(l){const o=l.infoData_.getNode(new ii(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+o}function Of(l){return Nh({timestamp:Ty(l)})}function Xp(l,s,o,c,g){l.dataUpdateCount++;const E=new ii(s);o=l.interceptServerDataCallback_?l.interceptServerDataCallback_(s,o):o;let T=[];if(g)if(c){const G=(0,me.UI)(o,X=>ps(X));T=function tE(l,s,o,c){const g=my(l,c);if(g){const E=cm(g),T=E.path,F=E.queryId,G=Wa(T,s),X=ki.fromObject(o);return Sf(l,T,new mc(Cp(F),G,X))}return[]}(l.serverSyncTree_,E,G,g)}else{const G=ps(o);T=jp(l.serverSyncTree_,E,G,g)}else if(c){const G=(0,me.UI)(o,X=>ps(X));T=function fy(l,s,o){const c=ki.fromObject(o);return Rh(l,new mc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,c))}(l.serverSyncTree_,E,G)}else{const G=ps(o);T=Pu(l.serverSyncTree_,E,G)}let F=E;T.length>0&&(F=nh(l,E)),Qa(l.eventQueue_,F,T)}function Jp(l,s){wc(l,"connected",s),!1===s&&function hd(l){tg(l,"onDisconnectEvents");const s=Of(l),o=mf();sd(l.onDisconnect_,$r(),(g,E)=>{const T=Hl(g,E,l.serverSyncTree_,s);Vl(o,g,T)});let c=[];sd(o,$r(),(g,E)=>{c=c.concat(Pu(l.serverSyncTree_,g,E));const T=rg(l,g);nh(l,T)}),l.onDisconnect_=mf(),Qa(l.eventQueue_,$r(),c)}(l)}function wc(l,s,o){const c=new ii("/.info/"+s),g=ps(o);l.infoData_.updateSnapshot(c,g);const E=Pu(l.infoSyncTree_,c,g);Qa(l.eventQueue_,c,E)}function xu(l){return l.nextWriteId_++}function Ay(l,s,o,c,g){tg(l,"set",{path:s.toString(),value:o,priority:c});const E=Of(l),T=ps(o,c),F=Yd(l.serverSyncTree_,s),G=Mf(T,F,E),X=xu(l),Ae=hy(l.serverSyncTree_,s,G,X,!0);Ya(l.eventQueue_,Ae),l.server_.put(s.toString(),T.val(!0),(st,wt)=>{const At="ok"===st;At||po("set at "+s+" failed: "+st);const on=Nu(l.serverSyncTree_,X,!At);Qa(l.eventQueue_,s,on),Cc(0,g,st,wt)});const Ue=rg(l,s);nh(l,Ue),Qa(l.eventQueue_,Ue,[])}function My(l,s,o){l.server_.onDisconnectCancel(s.toString(),(c,g)=>{"ok"===c&&bh(l.onDisconnect_,s),Cc(0,o,c,g)})}function $_(l,s,o,c){const g=ps(o);l.server_.onDisconnectPut(s.toString(),g.val(!0),(E,T)=>{"ok"===E&&Vl(l.onDisconnect_,s,g),Cc(0,c,E,T)})}function th(l,s,o){let c;c=".info"===Tr(s._path)?Bp(l.infoSyncTree_,s,o):Bp(l.serverSyncTree_,s,o),Yp(l.eventQueue_,s._path,c)}function kf(l){l.persistentConnection_&&l.persistentConnection_.interrupt(Qp)}function tg(l,...s){let o="";l.persistentConnection_&&(o=l.persistentConnection_.id+":"),fo(o,...s)}function Cc(l,s,o,c){s&&ou(()=>{if("ok"===o)s(null);else{const g=(o||"error").toUpperCase();let E=g;c&&(E+=": "+c);const T=new Error(E);T.code=g,s(T)}})}function Ff(l,s,o){return Yd(l.serverSyncTree_,s,o)||xr.EMPTY_NODE}function ng(l,s=l.transactionQueueTree_){if(s||xh(l,s),cl(s)){const o=vm(l,s);(0,me.hu)(o.length>0,"Sending zero length transaction queue"),o.every(g=>0===g.status)&&function Ry(l,s,o){const c=o.map(X=>X.currentWriteId),g=Ff(l,s,c);let E=g;const T=g.hash();for(let X=0;X<o.length;X++){const Ae=o[X];(0,me.hu)(0===Ae.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ae.status=1,Ae.retryCount++;const Ue=Wa(s,Ae.path);E=E.updateChild(Ue,Ae.currentOutputSnapshotRaw)}const F=E.val(!0),G=s;l.server_.put(G.toString(),F,X=>{tg(l,"transaction put response",{path:G.toString(),status:X});let Ae=[];if("ok"===X){const Ue=[];for(let st=0;st<o.length;st++)o[st].status=2,Ae=Ae.concat(Nu(l.serverSyncTree_,o[st].currentWriteId)),o[st].onComplete&&Ue.push(()=>o[st].onComplete(null,!0,o[st].currentOutputSnapshotResolved)),o[st].unwatcher();xh(l,qp(l.transactionQueueTree_,s)),ng(l,l.transactionQueueTree_),Qa(l.eventQueue_,s,Ae);for(let st=0;st<Ue.length;st++)ou(Ue[st])}else{if("datastale"===X)for(let Ue=0;Ue<o.length;Ue++)o[Ue].status=3===o[Ue].status?4:0;else{po("transaction at "+G.toString()+" failed: "+X);for(let Ue=0;Ue<o.length;Ue++)o[Ue].status=4,o[Ue].abortReason=X}nh(l,s)}},T)}(l,Nf(s),o)}else U_(s)&&Rf(s,o=>{ng(l,o)})}function nh(l,s){const o=Vf(l,s),c=Nf(o);return function q_(l,s,o){if(0===s.length)return;const c=[];let g=[];const T=s.filter(F=>0===F.status).map(F=>F.currentWriteId);for(let F=0;F<s.length;F++){const G=s[F],X=Wa(o,G.path);let Ue,Ae=!1;if((0,me.hu)(null!==X,"rerunTransactionsUnderNode_: relativePath should not be null."),4===G.status)Ae=!0,Ue=G.abortReason,g=g.concat(Nu(l.serverSyncTree_,G.currentWriteId,!0));else if(0===G.status)if(G.retryCount>=H_)Ae=!0,Ue="maxretry",g=g.concat(Nu(l.serverSyncTree_,G.currentWriteId,!0));else{const st=Ff(l,G.path,T);G.currentInputSnapshot=st;const wt=s[F].update(st.val());if(void 0!==wt){Zp("transaction failed: Data returned ",wt,G.path);let At=ps(wt);"object"==typeof wt&&null!=wt&&(0,me.r3)(wt,".priority")||(At=At.updatePriority(st.getPriority()));const yn=G.currentWriteId,br=Of(l),si=Mf(At,st,br);G.currentOutputSnapshotRaw=At,G.currentOutputSnapshotResolved=si,G.currentWriteId=xu(l),T.splice(T.indexOf(yn),1),g=g.concat(hy(l.serverSyncTree_,G.path,si,G.currentWriteId,G.applyLocally)),g=g.concat(Nu(l.serverSyncTree_,yn,!0))}else Ae=!0,Ue="nodata",g=g.concat(Nu(l.serverSyncTree_,G.currentWriteId,!0))}Qa(l.eventQueue_,o,g),g=[],Ae&&(s[F].status=2,setTimeout(s[F].unwatcher,Math.floor(0)),s[F].onComplete&&c.push("nodata"===Ue?()=>s[F].onComplete(null,!1,s[F].currentInputSnapshot):()=>s[F].onComplete(new Error(Ue),!1,null)))}xh(l,l.transactionQueueTree_);for(let F=0;F<c.length;F++)ou(c[F]);ng(l,l.transactionQueueTree_)}(l,vm(l,o),c),c}function Vf(l,s){let o,c=l.transactionQueueTree_;for(o=Tr(s);null!==o&&void 0===cl(c);)c=qp(c,o),o=Tr(s=Oi(s));return c}function vm(l,s){const o=[];return Ny(l,s,o),o.sort((c,g)=>c.order-g.order),o}function Ny(l,s,o){const c=cl(s);if(c)for(let g=0;g<c.length;g++)o.push(c[g]);Rf(s,g=>{Ny(l,g,o)})}function xh(l,s){const o=cl(s);if(o){let c=0;for(let g=0;g<o.length;g++)2!==o[g].status&&(o[c]=o[g],c++);o.length=c,hm(s,o.length>0?o:void 0)}Rf(s,c=>{xh(l,c)})}function rg(l,s){const o=Nf(Vf(l,s)),c=qp(l.transactionQueueTree_,s);return function pm(l,s,o){let c=o?l:l.parent;for(;null!==c;){if(s(c))return!0;c=c.parent}}(c,g=>{ig(l,g)}),ig(l,c),fm(c,g=>{ig(l,g)}),o}function ig(l,s){const o=cl(s);if(o){const c=[];let g=[],E=-1;for(let T=0;T<o.length;T++)3===o[T].status||(1===o[T].status?((0,me.hu)(E===T-1,"All SENT items should be at beginning of queue."),E=T,o[T].status=3,o[T].abortReason="set"):((0,me.hu)(0===o[T].status,"Unexpected transaction status in abort"),o[T].unwatcher(),g=g.concat(Nu(l.serverSyncTree_,o[T].currentWriteId,!0)),o[T].onComplete&&c.push(o[T].onComplete.bind(null,new Error("set"),!1,null))));-1===E?hm(s,void 0):o.length=E+1,Qa(l.eventQueue_,Nf(s),g);for(let T=0;T<c.length;T++)ou(c[T])}}const Py=function(l,s){const o=xy(l),c=o.namespace;return"firebase.com"===o.domain&&Au(o.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==o.domain&&Au("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),o.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&po("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new xd(o.host,o.secure,c,"ws"===o.scheme||"wss"===o.scheme,s,"",c!==o.subdomain),path:new ii(o.pathString)}},xy=function(l){let s="",o="",c="",g="",E="",T=!0,F="https",G=443;if("string"==typeof l){let X=l.indexOf("//");X>=0&&(F=l.substring(0,X-1),l=l.substring(X+2));let Ae=l.indexOf("/");-1===Ae&&(Ae=l.length);let Ue=l.indexOf("?");-1===Ue&&(Ue=l.length),s=l.substring(0,Math.min(Ae,Ue)),Ae<Ue&&(g=function sg(l){let s="";const o=l.split("/");for(let c=0;c<o.length;c++)if(o[c].length>0){let g=o[c];try{g=decodeURIComponent(g.replace(/\+/g," "))}catch{}s+="/"+g}return s}(l.substring(Ae,Ue)));const st=function og(l){const s={};"?"===l.charAt(0)&&(l=l.substring(1));for(const o of l.split("&")){if(0===o.length)continue;const c=o.split("=");2===c.length?s[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):po(`Invalid query segment '${o}' in query '${l}'`)}return s}(l.substring(Math.min(l.length,Ue)));X=s.indexOf(":"),X>=0?(T="https"===F||"wss"===F,G=parseInt(s.substring(X+1),10)):X=s.length;const wt=s.slice(0,X);if("localhost"===wt.toLowerCase())o="localhost";else if(wt.split(".").length<=2)o=wt;else{const At=s.indexOf(".");c=s.substring(0,At).toLowerCase(),o=s.substring(At+1),E=c}"ns"in st&&(E=st.ns)}return{host:s,port:G,domain:o,subdomain:c,secure:T,scheme:F,pathString:g,namespace:E}},Oy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Uf=function(){let l=0;const s=[];return function(o){const c=o===l;let g;l=o;const E=new Array(8);for(g=7;g>=0;g--)E[g]=Oy.charAt(o%64),o=Math.floor(o/64);(0,me.hu)(0===o,"Cannot push at time == 0");let T=E.join("");if(c){for(g=11;g>=0&&63===s[g];g--)s[g]=0;s[g]++}else for(g=0;g<12;g++)s[g]=Math.floor(64*Math.random());for(g=0;g<12;g++)T+=Oy.charAt(s[g]);return(0,me.hu)(20===T.length,"nextPushId: Length should be 20."),T}}();class ky{constructor(s,o,c,g){this.eventType=s,this.eventRegistration=o,this.snapshot=c,this.prevName=g}getPath(){const s=this.snapshot.ref;return"value"===this.eventType?s._path:s.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,me.Wl)(this.snapshot.exportVal())}}class ag{constructor(s,o,c){this.eventRegistration=s,this.error=o,this.path=c}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ly{constructor(s,o){this.snapshotCallback=s,this.cancelCallback=o}onValue(s,o){this.snapshotCallback.call(null,s,o)}onCancel(s){return(0,me.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,s)}get hasCancelCallback(){return!!this.cancelCallback}matches(s){return this.snapshotCallback===s.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===s.snapshotCallback.userCallback&&this.snapshotCallback.context===s.snapshotCallback.context}}class Fy{constructor(s,o){this._repo=s,this._path=o}cancel(){const s=new me.BH;return My(this._repo,this._path,s.wrapCallback(()=>{})),s.promise}remove(){dl("OnDisconnect.remove",this._path);const s=new me.BH;return $_(this._repo,this._path,null,s.wrapCallback(()=>{})),s.promise}set(s){dl("OnDisconnect.set",this._path),$l("OnDisconnect.set",s,this._path,!1);const o=new me.BH;return $_(this._repo,this._path,s,o.wrapCallback(()=>{})),o.promise}setWithPriority(s,o){dl("OnDisconnect.setWithPriority",this._path),$l("OnDisconnect.setWithPriority",s,this._path,!1),Iy("OnDisconnect.setWithPriority",o,!1);const c=new me.BH;return function G_(l,s,o,c,g){const E=ps(o,c);l.server_.onDisconnectPut(s.toString(),E.val(!0),(T,F)=>{"ok"===T&&Vl(l.onDisconnect_,s,E),Cc(0,g,T,F)})}(this._repo,this._path,s,o,c.wrapCallback(()=>{})),c.promise}update(s){dl("OnDisconnect.update",this._path),j_("OnDisconnect.update",s,this._path,!1);const o=new me.BH;return function z_(l,s,o,c){if((0,me.xb)(o))return fo("onDisconnect().update() called with empty data.  Don't do anything."),void Cc(0,c,"ok",void 0);l.server_.onDisconnectMerge(s.toString(),o,(g,E)=>{"ok"===g&&go(o,(T,F)=>{const G=ps(F);Vl(l.onDisconnect_,Vs(s,T),G)}),Cc(0,c,g,E)})}(this._repo,this._path,s,o.wrapCallback(()=>{})),o.promise}}class Na{constructor(s,o,c,g){this._repo=s,this._path=o,this._queryParams=c,this._orderByCalled=g}get key(){return Zr(this._path)?null:Xc(this._path)}get ref(){return new hu(this._repo,this._path)}get _queryIdentifier(){const s=$d(this._queryParams),o=Hc(s);return"{}"===o?"default":o}get _queryObject(){return $d(this._queryParams)}isEqual(s){if(!((s=(0,me.m9)(s))instanceof Na))return!1;const o=this._repo===s._repo,c=Vd(this._path,s._path);return o&&c&&this._queryIdentifier===s._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function cp(l){let s="";for(let o=l.pieceNum_;o<l.pieces_.length;o++)""!==l.pieces_[o]&&(s+="/"+encodeURIComponent(String(l.pieces_[o])));return s||"/"}(this._path)}}function Em(l,s){if(!0===l._orderByCalled)throw new Error(s+": You can't combine multiple orderBy calls.")}function du(l){let s=null,o=null;if(l.hasStart()&&(s=l.getIndexStartValue()),l.hasEnd()&&(o=l.getIndexEndValue()),l.getIndex()===ol){const c="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",g="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(l.hasStart()){if(l.getIndexStartName()!==el)throw new Error(c);if("string"!=typeof s)throw new Error(g)}if(l.hasEnd()){if(l.getIndexEndName()!==Dl)throw new Error(c);if("string"!=typeof o)throw new Error(g)}}else if(l.getIndex()===Yr){if(null!=s&&!Pf(s)||null!=o&&!Pf(o))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,me.hu)(l.getIndex()instanceof nd||l.getIndex()===Bg,"unknown index type."),null!=s&&"object"==typeof s||null!=o&&"object"==typeof o)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Bf(l){if(l.hasStart()&&l.hasEnd()&&l.hasLimit()&&!l.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class hu extends Na{constructor(s,o){super(s,o,new vp,!1)}get parent(){const s=Fd(this._path);return null===s?null:new hu(this._repo,s)}get root(){let s=this;for(;null!==s.parent;)s=s.parent;return s}}class fd{constructor(s,o,c){this._node=s,this.ref=o,this._index=c}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(s){const o=new ii(s),c=pd(this.ref,s);return new fd(this._node.getChild(o),c,Yr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(s){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(c,g)=>s(new fd(g,pd(this.ref,c),Yr)))}hasChild(s){const o=new ii(s);return!this._node.getChild(o).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vy(l,s){return(l=(0,me.m9)(l))._checkNotDeleted("ref"),void 0!==s?pd(l._root,s):l._root}function wm(l,s){(l=(0,me.m9)(l))._checkNotDeleted("refFromURL");const o=Py(s,l._repo.repoInfo_.nodeAdmin);mm("refFromURL",o);const c=o.repoInfo;return!l._repo.repoInfo_.isCustomHost()&&c.host!==l._repo.repoInfo_.host&&Au("refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+l._repo.repoInfo_.host+")"),Vy(l,o.path.toString())}function pd(l,s){return null===Tr((l=(0,me.m9)(l))._path)?by("child","path",s,!1):Ph("child","path",s,!1),new hu(l._repo,Vs(l._path,s))}function jf(l,s){l=(0,me.m9)(l),dl("set",l._path),$l("set",s,l._path,!1);const o=new me.BH;return Ay(l._repo,l._path,s,null,o.wrapCallback(()=>{})),o.promise}function jy(l,s){j_("update",s,l._path,!1);const o=new me.BH;return function eg(l,s,o,c){tg(l,"update",{path:s.toString(),value:o});let g=!0;const E=Of(l),T={};if(go(o,(F,G)=>{g=!1,T[F]=Hl(Vs(s,F),ps(G),l.serverSyncTree_,E)}),g)fo("update() called with empty data.  Don't do anything."),Cc(0,c,"ok",void 0);else{const F=xu(l),G=function um(l,s,o,c){!function Sp(l,s,o,c){(0,me.hu)(c>l.lastWriteId,"Stacking an older merge on top of newer ones"),l.allWrites.push({path:s,children:o,writeId:c,visible:!0}),l.visibleWrites=bp(l.visibleWrites,s,o),l.lastWriteId=c}(l.pendingWriteTree_,s,o,c);const g=ki.fromObject(o);return Rh(l,new mc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,g))}(l.serverSyncTree_,s,T,F);Ya(l.eventQueue_,G),l.server_.merge(s.toString(),o,(X,Ae)=>{const Ue="ok"===X;Ue||po("update at "+s+" failed: "+X);const st=Nu(l.serverSyncTree_,F,!Ue),wt=st.length>0?nh(l,s):s;Qa(l.eventQueue_,wt,st),Cc(0,c,X,Ae)}),go(o,X=>{const Ae=rg(l,Vs(s,X));nh(l,Ae)}),Qa(l.eventQueue_,s,[])}}(l._repo,l._path,s,o.wrapCallback(()=>{})),o.promise}function ug(l){l=(0,me.m9)(l);const s=new Ly(()=>{}),o=new Ic(s);return function Sy(l,s,o){const c=function py(l,s){const o=s._path;let c=null;l.syncPointTree_.foreachOnPath(o,(X,Ae)=>{const Ue=Wa(X,o);c=c||jl(Ae,Ue)});let g=l.syncPointTree_.get(o);g?c=c||jl(g,$r()):(g=new bf,l.syncPointTree_=l.syncPointTree_.set(o,g));const E=null!=c,T=E?new Ka(c,!0,!1):null;return function P_(l){return ad(l.viewCache_)}(O_(g,s,Yg(l.pendingWriteTree_,s._path),E?T.getNode():xr.EMPTY_NODE,E))}(l.serverSyncTree_,s);return null!=c?Promise.resolve(c):l.server_.get(s).then(g=>{const E=ps(g).withIndex(s._queryParams.getIndex());let T;if(Hp(l.serverSyncTree_,s,o,!0),s._queryParams.loadsAllData())T=Pu(l.serverSyncTree_,s._path,E);else{const F=$p(l.serverSyncTree_,s);T=jp(l.serverSyncTree_,s._path,E,F)}return Qa(l.eventQueue_,s._path,T),Bp(l.serverSyncTree_,s,o,null,!0),E},g=>(tg(l,"get for query "+(0,me.Wl)(s)+" failed: "+g),Promise.reject(new Error(g))))}(l._repo,l,o).then(c=>new fd(c,new hu(l._repo,l._path),l._queryParams.getIndex()))}class Ic{constructor(s){this.callbackContext=s}respondsTo(s){return"value"===s}createEvent(s,o){const c=o._queryParams.getIndex();return new ky("value",this,new fd(s.snapshotNode,new hu(o._repo,o._path),c))}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,null)}createCancelEvent(s,o){return this.callbackContext.hasCancelCallback?new ag(this,s,o):null}matches(s){return s instanceof Ic&&(!s.callbackContext||!this.callbackContext||s.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class bm{constructor(s,o){this.eventType=s,this.callbackContext=o}respondsTo(s){let o="children_added"===s?"child_added":s;return o="children_removed"===o?"child_removed":o,this.eventType===o}createCancelEvent(s,o){return this.callbackContext.hasCancelCallback?new ag(this,s,o):null}createEvent(s,o){(0,me.hu)(null!=s.childName,"Child events should have a childName.");const c=pd(new hu(o._repo,o._path),s.childName),g=o._queryParams.getIndex();return new ky(s.type,this,new fd(s.snapshotNode,c,g),s.prevName)}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,s.prevName)}matches(s){return s instanceof bm&&this.eventType===s.eventType&&(!this.callbackContext||!s.callbackContext||this.callbackContext.matches(s.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function lg(l,s,o,c,g){let E;if("object"==typeof c&&(E=void 0,g=c),"function"==typeof c&&(E=c),g&&g.onlyOnce){const G=o,X=(Ae,Ue)=>{th(l._repo,l,F),G(Ae,Ue)};X.userCallback=o.userCallback,X.context=o.context,o=X}const T=new Ly(o,E||void 0),F="value"===s?new Ic(T):new bm(s,T);return function Cv(l,s,o){let c;c=".info"===Tr(s._path)?Hp(l.infoSyncTree_,s,o):Hp(l.serverSyncTree_,s,o),Yp(l.eventQueue_,s._path,c)}(l._repo,l,F),()=>th(l._repo,l,F)}function cg(l,s,o,c){return lg(l,"value",s,o,c)}function Hy(l,s,o,c){return lg(l,"child_added",s,o,c)}function Gl(l,s,o,c){return lg(l,"child_changed",s,o,c)}function Oh(l,s,o,c){return lg(l,"child_moved",s,o,c)}function ya(l,s,o,c){return lg(l,"child_removed",s,o,c)}function rh(l,s,o){let c=null;const g=o?new Ly(o):null;"value"===s?c=new Ic(g):s&&(c=new bm(s,g)),th(l._repo,l,c)}class fu{}class Ou extends fu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){$l("endAt",this._value,s._path,!0);const o=Ep(s._queryParams,this._value,this._key);if(Bf(o),du(o),s._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Na(s._repo,s._path,o,s._orderByCalled)}}class kh extends fu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){$l("endBefore",this._value,s._path,!1);const o=function Xm(l,s,o){let c;return c=Ep(l,s,l.index_===ol||o?o:el),c.endBeforeSet_=!0,c}(s._queryParams,this._value,this._key);if(Bf(o),du(o),s._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Na(s._repo,s._path,o,s._orderByCalled)}}class sh extends fu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){$l("startAt",this._value,s._path,!0);const o=Hg(s._queryParams,this._value,this._key);if(Bf(o),du(o),s._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Na(s._repo,s._path,o,s._orderByCalled)}}class Fh extends fu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){$l("startAfter",this._value,s._path,!1);const o=function Qm(l,s,o){let c;return c=Hg(l,s,l.index_===ol||o?o:Dl),c.startAfterSet_=!0,c}(s._queryParams,this._value,this._key);if(Bf(o),du(o),s._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Na(s._repo,s._path,o,s._orderByCalled)}}class qr extends fu{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Na(s._repo,s._path,function jg(l,s){const o=l.copy();return o.limitSet_=!0,o.limit_=s,o.viewFrom_="l",o}(s._queryParams,this._limit),s._orderByCalled)}}class Uh extends fu{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Na(s._repo,s._path,function Ym(l,s){const o=l.copy();return o.limitSet_=!0,o.limit_=s,o.viewFrom_="r",o}(s._queryParams,this._limit),s._orderByCalled)}}class $y extends fu{constructor(s){super(),this._path=s}_apply(s){Em(s,"orderByChild");const o=new ii(this._path);if(Zr(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const c=new nd(o),g=gf(s._queryParams,c);return du(g),new Na(s._repo,s._path,g,!0)}}class sa extends fu{_apply(s){Em(s,"orderByKey");const o=gf(s._queryParams,ol);return du(o),new Na(s._repo,s._path,o,!0)}}class Gy extends fu{_apply(s){Em(s,"orderByPriority");const o=gf(s._queryParams,Yr);return du(o),new Na(s._repo,s._path,o,!0)}}class dg extends fu{_apply(s){Em(s,"orderByValue");const o=gf(s._queryParams,Bg);return du(o),new Na(s._repo,s._path,o,!0)}}class hg extends fu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){if($l("equalTo",this._value,s._path,!1),s._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(s._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ou(this._value,this._key)._apply(new sh(this._value,this._key)._apply(s))}}function hl(l,...s){let o=(0,me.m9)(l);for(const c of s)o=c._apply(o);return o}(function Fp(l){(0,me.hu)(!ld,"__referenceConstructor has already been defined"),ld=l})(hu),function L_(l){(0,me.hu)(!cd,"__referenceConstructor has already been defined"),cd=l}(hu);const Wy={};function Dv(l,s,o,c,g){let E=c||l.options.databaseURL;void 0===E&&(l.options.projectId||Au("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fo("Using default host for project ",l.options.projectId),E=`${l.options.projectId}-default-rtdb.firebaseio.com`);let G,X,T=Py(E,g),F=T.repoInfo;typeof process<"u"&&process.env&&(X=process.env.FIREBASE_DATABASE_EMULATOR_HOST),X?(G=!0,E=`http://${X}?ns=${F.namespace}`,T=Py(E,g),F=T.repoInfo):G=!T.repoInfo.secure;const Ae=g&&G?new Ga(Ga.OWNER):new Lg(l.name,l.options,s);mm("Invalid Firebase Database URL",T),Zr(T.path)||Au("Database URL must point to the root of a Firebase Database (not including a child path).");const Ue=function Z_(l,s,o,c){let g=Wy[s.name];g||(g={},Wy[s.name]=g);let E=g[l.toURLString()];return E&&Au("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),E=new xf(l,false,o,c),g[l.toURLString()]=E,E}(F,l,Ae,new _h(l.name,o));return new Sv(Ue,l)}class Sv{constructor(s,o){this._repoInternal=s,this.app=o,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Dy(l,s,o){if(l.stats_=ma(l.repoInfo_),l.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)l.server_=new fi(l.repoInfo_,(c,g,E,T)=>{Xp(l,c,g,E,T)},l.authTokenProvider_,l.appCheckProvider_),setTimeout(()=>Jp(l,!0),0);else{if(typeof o<"u"&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,me.Wl)(o)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}l.persistentConnection_=new jd(l.repoInfo_,s,(c,g,E,T)=>{Xp(l,c,g,E,T)},c=>{Jp(l,c)},c=>{!function _m(l,s){go(s,(o,c)=>{wc(l,o,c)})}(l,c)},l.authTokenProvider_,l.appCheckProvider_,o),l.server_=l.persistentConnection_}l.authTokenProvider_.addTokenChangeListener(c=>{l.server_.refreshAuthToken(c)}),l.appCheckProvider_.addTokenChangeListener(c=>{l.server_.refreshAppCheckToken(c.token)}),l.statsReporter_=function kd(l,s){const o=l.toString();return Wc[o]||(Wc[o]=s()),Wc[o]}(l.repoInfo_,()=>new yf(l.stats_,l.server_)),l.infoData_=new wp,l.infoSyncTree_=new Up({startListening:(c,g,E,T)=>{let F=[];const G=l.infoData_.getNode(c._path);return G.isEmpty()||(F=Pu(l.infoSyncTree_,c._path,G),setTimeout(()=>{T("ok")},0)),F},stopListening:()=>{}}),wc(l,"connected",!1),l.serverSyncTree_=new Up({startListening:(c,g,E,T)=>(l.server_.listen(c,E,g,(F,G)=>{const X=T(F,G);Qa(l.eventQueue_,c._path,X)}),[]),stopListening:(c,g)=>{l.server_.unlisten(c,g)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hu(this._repo,$r())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function No(l,s){const o=Wy[s];(!o||o[l.key]!==l)&&Au(`Database ${s}(${l.repoInfo_}) has already been deleted.`),kf(l),delete o[l.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(s){null===this._rootInternal&&Au("Cannot call "+s+" on a deleted database.")}}function fg(){lp.IS_TRANSPORT_INITIALIZED&&po("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function pg(){fg(),Aa.forceDisallow()}function qy(){fg(),Yc.forceDisallow(),Aa.forceAllow()}function Av(l,s){bl(l,s)}const gg={".sv":"timestamp"};class md{constructor(s,o){this.committed=s,this.snapshot=o}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}jd.prototype.simpleListen=function(l,s){this.sendRequest("q",{p:l},s)},jd.prototype.echo=function(l,s){this.sendRequest("echo",{d:l},s)},function $f(l){rc(Yo.SDK_VERSION),(0,Yo._registerComponent)(new ha.wA("database",(s,{instanceIdentifier:o})=>Dv(s.getProvider("app").getImmediate(),s.getProvider("auth-internal"),s.getProvider("app-check-internal"),o),"PUBLIC").setMultipleInstances(!0)),(0,Yo.registerVersion)(Sd,"0.14.4",l),(0,Yo.registerVersion)(Sd,"0.14.4","esm2017")}();const X_=new Vc.Yd("@firebase/database-compat"),mg=function(l){X_.warn("FIREBASE WARNING: "+l)};class Bh{constructor(s){this._delegate=s}cancel(s){(0,me.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,me.Wj)("OnDisconnect.cancel","onComplete",s,!0);const o=this._delegate.cancel();return s&&o.then(()=>s(null),c=>s(c)),o}remove(s){(0,me.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,me.Wj)("OnDisconnect.remove","onComplete",s,!0);const o=this._delegate.remove();return s&&o.then(()=>s(null),c=>s(c)),o}set(s,o){(0,me.Dv)("OnDisconnect.set",1,2,arguments.length),(0,me.Wj)("OnDisconnect.set","onComplete",o,!0);const c=this._delegate.set(s);return o&&c.then(()=>o(null),g=>o(g)),c}setWithPriority(s,o,c){(0,me.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,me.Wj)("OnDisconnect.setWithPriority","onComplete",c,!0);const g=this._delegate.setWithPriority(s,o);return c&&g.then(()=>c(null),E=>c(E)),g}update(s,o){if((0,me.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(s)){const g={};for(let E=0;E<s.length;++E)g[""+E]=s[E];s=g,mg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,me.Wj)("OnDisconnect.update","onComplete",o,!0);const c=this._delegate.update(s);return o&&c.then(()=>o(null),g=>o(g)),c}}class Am{constructor(s,o){this.committed=s,this.snapshot=o}toJSON(){return(0,me.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ku{constructor(s,o){this._database=s,this._delegate=o}val(){return(0,me.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,me.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,me.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,me.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(s){return(0,me.Dv)("DataSnapshot.child",0,1,arguments.length),s=String(s),Ph("DataSnapshot.child","path",s,!1),new ku(this._database,this._delegate.child(s))}hasChild(s){return(0,me.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ph("DataSnapshot.hasChild","path",s,!1),this._delegate.hasChild(s)}getPriority(){return(0,me.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(s){return(0,me.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,me.Wj)("DataSnapshot.forEach","action",s,!1),this._delegate.forEach(o=>s(new ku(this._database,o)))}hasChildren(){return(0,me.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,me.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,me.Dv)("DataSnapshot.ref",0,0,arguments.length),new Pa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class $o{constructor(s,o){this.database=s,this._delegate=o}on(s,o,c,g){var E;(0,me.Dv)("Query.on",2,4,arguments.length),(0,me.Wj)("Query.on","callback",o,!1);const T=$o.getCancelAndContextArgs_("Query.on",c,g),F=(X,Ae)=>{o.call(T.context,new ku(this.database,X),Ae)};F.userCallback=o,F.context=T.context;const G=null===(E=T.cancel)||void 0===E?void 0:E.bind(T.context);switch(s){case"value":return cg(this._delegate,F,G),o;case"child_added":return Hy(this._delegate,F,G),o;case"child_removed":return ya(this._delegate,F,G),o;case"child_changed":return Gl(this._delegate,F,G),o;case"child_moved":return Oh(this._delegate,F,G),o;default:throw new Error((0,me.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(s,o,c){if((0,me.Dv)("Query.off",0,3,arguments.length),function(l,s,o){if(void 0!==s)switch(s){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,me.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,s),(0,me.Wj)("Query.off","callback",o,!0),(0,me.lb)("Query.off","context",c,!0),o){const g=()=>{};g.userCallback=o,g.context=c,rh(this._delegate,s,g)}else rh(this._delegate,s)}get(){return ug(this._delegate).then(s=>new ku(this.database,s))}once(s,o,c,g){(0,me.Dv)("Query.once",1,4,arguments.length),(0,me.Wj)("Query.once","callback",o,!0);const E=$o.getCancelAndContextArgs_("Query.once",c,g),T=new me.BH,F=(X,Ae)=>{const Ue=new ku(this.database,X);o&&o.call(E.context,Ue,Ae),T.resolve(Ue)};F.userCallback=o,F.context=E.context;const G=X=>{E.cancel&&E.cancel.call(E.context,X),T.reject(X)};switch(s){case"value":cg(this._delegate,F,G,{onlyOnce:!0});break;case"child_added":Hy(this._delegate,F,G,{onlyOnce:!0});break;case"child_removed":ya(this._delegate,F,G,{onlyOnce:!0});break;case"child_changed":Gl(this._delegate,F,G,{onlyOnce:!0});break;case"child_moved":Oh(this._delegate,F,G,{onlyOnce:!0});break;default:throw new Error((0,me.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return T.promise}limitToFirst(s){return(0,me.Dv)("Query.limitToFirst",1,1,arguments.length),new $o(this.database,hl(this._delegate,function Vh(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new qr(l)}(s)))}limitToLast(s){return(0,me.Dv)("Query.limitToLast",1,1,arguments.length),new $o(this.database,hl(this._delegate,function Hf(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Uh(l)}(s)))}orderByChild(s){return(0,me.Dv)("Query.orderByChild",1,1,arguments.length),new $o(this.database,hl(this._delegate,function Ss(l){if("$key"===l)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===l)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===l)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ph("orderByChild","path",l,!1),new $y(l)}(s)))}orderByKey(){return(0,me.Dv)("Query.orderByKey",0,0,arguments.length),new $o(this.database,hl(this._delegate,function zl(){return new sa}()))}orderByPriority(){return(0,me.Dv)("Query.orderByPriority",0,0,arguments.length),new $o(this.database,hl(this._delegate,function K_(){return new Gy}()))}orderByValue(){return(0,me.Dv)("Query.orderByValue",0,0,arguments.length),new $o(this.database,hl(this._delegate,function zy(){return new dg}()))}startAt(s=null,o){return(0,me.Dv)("Query.startAt",0,2,arguments.length),new $o(this.database,hl(this._delegate,function Lh(l=null,s){return dd("startAt","key",s,!0),new sh(l,s)}(s,o)))}startAfter(s=null,o){return(0,me.Dv)("Query.startAfter",0,2,arguments.length),new $o(this.database,hl(this._delegate,function gd(l,s){return dd("startAfter","key",s,!0),new Fh(l,s)}(s,o)))}endAt(s=null,o){return(0,me.Dv)("Query.endAt",0,2,arguments.length),new $o(this.database,hl(this._delegate,function Dm(l,s){return dd("endAt","key",s,!0),new Ou(l,s)}(s,o)))}endBefore(s=null,o){return(0,me.Dv)("Query.endBefore",0,2,arguments.length),new $o(this.database,hl(this._delegate,function ih(l,s){return dd("endBefore","key",s,!0),new kh(l,s)}(s,o)))}equalTo(s,o){return(0,me.Dv)("Query.equalTo",1,2,arguments.length),new $o(this.database,hl(this._delegate,function bv(l,s){return dd("equalTo","key",s,!0),new hg(l,s)}(s,o)))}toString(){return(0,me.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,me.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(s){if((0,me.Dv)("Query.isEqual",1,1,arguments.length),!(s instanceof $o))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(s._delegate)}static getCancelAndContextArgs_(s,o,c){const g={cancel:void 0,context:void 0};if(o&&c)g.cancel=o,(0,me.Wj)(s,"cancel",g.cancel,!0),g.context=c,(0,me.lb)(s,"context",g.context,!0);else if(o)if("object"==typeof o&&null!==o)g.context=o;else{if("function"!=typeof o)throw new Error((0,me.gK)(s,"cancelOrContext")+" must either be a cancel callback or a context object.");g.cancel=o}return g}get ref(){return new Pa(this.database,new hu(this._delegate._repo,this._delegate._path))}}class Pa extends $o{constructor(s,o){super(s,new Na(o._repo,o._path,new vp,!1)),this.database=s,this._delegate=o}getKey(){return(0,me.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(s){return(0,me.Dv)("Reference.child",1,1,arguments.length),"number"==typeof s&&(s=String(s)),new Pa(this.database,pd(this._delegate,s))}getParent(){(0,me.Dv)("Reference.parent",0,0,arguments.length);const s=this._delegate.parent;return s?new Pa(this.database,s):null}getRoot(){return(0,me.Dv)("Reference.root",0,0,arguments.length),new Pa(this.database,this._delegate.root)}set(s,o){(0,me.Dv)("Reference.set",1,2,arguments.length),(0,me.Wj)("Reference.set","onComplete",o,!0);const c=jf(this._delegate,s);return o&&c.then(()=>o(null),g=>o(g)),c}update(s,o){if((0,me.Dv)("Reference.update",1,2,arguments.length),Array.isArray(s)){const g={};for(let E=0;E<s.length;++E)g[""+E]=s[E];s=g,mg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}dl("Reference.update",this._delegate._path),(0,me.Wj)("Reference.update","onComplete",o,!0);const c=jy(this._delegate,s);return o&&c.then(()=>o(null),g=>o(g)),c}setWithPriority(s,o,c){(0,me.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,me.Wj)("Reference.setWithPriority","onComplete",c,!0);const g=function Im(l,s,o){if(dl("setWithPriority",l._path),$l("setWithPriority",s,l._path,!1),Iy("setWithPriority",o,!1),".length"===l.key||".keys"===l.key)throw"setWithPriority failed: "+l.key+" is a read-only object.";const c=new me.BH;return Ay(l._repo,l._path,s,o,c.wrapCallback(()=>{})),c.promise}(this._delegate,s,o);return c&&g.then(()=>c(null),E=>c(E)),g}remove(s){(0,me.Dv)("Reference.remove",0,1,arguments.length),(0,me.Wj)("Reference.remove","onComplete",s,!0);const o=function By(l){return dl("remove",l._path),jf(l,null)}(this._delegate);return s&&o.then(()=>s(null),c=>s(c)),o}transaction(s,o,c){(0,me.Dv)("Reference.transaction",1,3,arguments.length),(0,me.Wj)("Reference.transaction","transactionUpdate",s,!1),(0,me.Wj)("Reference.transaction","onComplete",o,!0),function(l,s,o,c){if(void 0!==o&&"boolean"!=typeof o)throw new Error((0,me.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,c);const g=function Q_(l,s,o){var c;if(l=(0,me.m9)(l),dl("Reference.transaction",l._path),".length"===l.key||".keys"===l.key)throw"Reference.transaction failed: "+l.key+" is a read-only object.";const g=null===(c=o?.applyLocally)||void 0===c||c,E=new me.BH,F=cg(l,()=>{});return function W_(l,s,o,c,g,E){tg(l,"transaction on "+s);const T={path:s,update:o,onComplete:c,status:null,order:xg(),applyLocally:E,retryCount:0,unwatcher:g,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},F=Ff(l,s,void 0);T.currentInputSnapshot=F;const G=T.update(F.val());if(void 0===G)T.unwatcher(),T.currentOutputSnapshotRaw=null,T.currentOutputSnapshotResolved=null,T.onComplete&&T.onComplete(null,!1,T.currentInputSnapshot);else{Zp("transaction failed: Data returned ",G,T.path),T.status=0;const X=qp(l.transactionQueueTree_,s),Ae=cl(X)||[];let Ue;Ae.push(T),hm(X,Ae),"object"==typeof G&&null!==G&&(0,me.r3)(G,".priority")?(Ue=(0,me.DV)(G,".priority"),(0,me.hu)(Pf(Ue),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ue=(Yd(l.serverSyncTree_,s)||xr.EMPTY_NODE).getPriority().val();const st=Of(l),wt=ps(G,Ue),At=Mf(wt,F,st);T.currentOutputSnapshotRaw=wt,T.currentOutputSnapshotResolved=At,T.currentWriteId=xu(l);const on=hy(l.serverSyncTree_,s,At,T.currentWriteId,T.applyLocally);Qa(l.eventQueue_,s,on),ng(l,l.transactionQueueTree_)}}(l._repo,l._path,s,(G,X,Ae)=>{let Ue=null;G?E.reject(G):(Ue=new fd(Ae,new hu(l._repo,l._path),Yr),E.resolve(new md(X,Ue)))},F,g),E.promise}(this._delegate,s,{applyLocally:c}).then(E=>new Am(E.committed,new ku(this.database,E.snapshot)));return o&&g.then(E=>o(null,E.committed,E.snapshot),E=>o(E,!1,null)),g}setPriority(s,o){(0,me.Dv)("Reference.setPriority",1,2,arguments.length),(0,me.Wj)("Reference.setPriority","onComplete",o,!0);const c=function Iv(l,s){l=(0,me.m9)(l),dl("setPriority",l._path),Iy("setPriority",s,!1);const o=new me.BH;return Ay(l._repo,Vs(l._path,".priority"),s,null,o.wrapCallback(()=>{})),o.promise}(this._delegate,s);return o&&c.then(()=>o(null),g=>o(g)),c}push(s,o){(0,me.Dv)("Reference.push",0,2,arguments.length),(0,me.Wj)("Reference.push","onComplete",o,!0);const c=function Cm(l,s){l=(0,me.m9)(l),dl("push",l._path),$l("push",s,l._path,!0);const o=Ty(l._repo),c=Uf(o),g=pd(l,c),E=pd(l,c);let T;return T=null!=s?jf(E,s).then(()=>E):Promise.resolve(E),g.then=T.then.bind(T),g.catch=T.then.bind(T,void 0),g}(this._delegate,s),g=c.then(T=>new Pa(this.database,T));o&&g.then(()=>o(null),T=>o(T));const E=new Pa(this.database,c);return E.then=g.then.bind(g),E.catch=g.catch.bind(g,void 0),E}onDisconnect(){return dl("Reference.onDisconnect",this._delegate._path),new Bh(new Fy(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class yg{constructor(s,o){this._delegate=s,this.app=o,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:pg,forceLongPolling:qy}}useEmulator(s,o,c={}){!function Zy(l,s,o,c={}){(l=(0,me.m9)(l))._checkNotDeleted("useEmulator"),l._instanceStarted&&Au("Cannot call useEmulator() after instance has already been initialized.");const g=l._repoInternal;let E;if(g.repoInfo_.nodeAdmin)c.mockUserToken&&Au('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),E=new Ga(Ga.OWNER);else if(c.mockUserToken){const T="string"==typeof c.mockUserToken?c.mockUserToken:(0,me.Sg)(c.mockUserToken,l.app.options.projectId);E=new Ga(T)}!function OE(l,s,o,c){l.repoInfo_=new xd(`${s}:${o}`,!1,l.repoInfo_.namespace,l.repoInfo_.webSocketOnly,l.repoInfo_.nodeAdmin,l.repoInfo_.persistenceKey,l.repoInfo_.includeNamespaceInQueryParams,!0),c&&(l.authTokenProvider_=c)}(g,s,o,E)}(this._delegate,s,o,c)}ref(s){if((0,me.Dv)("database.ref",0,1,arguments.length),s instanceof Pa){const o=wm(this._delegate,s.toString());return new Pa(this,o)}{const o=Vy(this._delegate,s);return new Pa(this,o)}}refFromURL(s){(0,me.Dv)("database.refFromURL",1,1,arguments.length);const c=wm(this._delegate,s);return new Pa(this,c)}goOffline(){return(0,me.Dv)("database.goOffline",0,0,arguments.length),function Tm(l){(l=(0,me.m9)(l))._checkNotDeleted("goOffline"),kf(l._repo)}(this._delegate)}goOnline(){return(0,me.Dv)("database.goOnline",0,0,arguments.length),function Y_(l){(l=(0,me.m9)(l))._checkNotDeleted("goOnline"),function Lf(l){l.persistentConnection_&&l.persistentConnection_.resume(Qp)}(l._repo)}(this._delegate)}}yg.ServerValue={TIMESTAMP:function Mv(){return gg}(),increment:l=>function bc(l){return{".sv":{increment:l}}}(l)};var Pv=Object.freeze({__proto__:null,initStandalone:function Nv({app:l,url:s,version:o,customAuthImpl:c,namespace:g,nodeAdmin:E=!1}){rc(o);const T=new ha.zt("auth-internal",new ha.H0("database-standalone"));return T.setComponent(new ha.wA("auth-internal",()=>c,"PRIVATE")),{instance:new yg(Dv(l,T,void 0,s,E),l),namespace:g}}});const Mm=yg.ServerValue;function zf(l){return null==l}function Wf(l){return"function"==typeof l.set}function qf(l,s){return Wf(s)?s:l.ref(s)}function Hh(l,s){if(function Rm(l){return"string"==typeof l}(l))return s.stringCase();if(Wf(l))return s.firebaseCase();if(function jh(l){return"function"==typeof l.exportVal}(l))return s.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof l)}function vg(l,s,o="on",c=Me.z){return new K.y(g=>{let E=null;return E=l[o](s,(T,F)=>{c.schedule(()=>{g.next({snapshot:T,prevKey:F})}),"once"===o&&c.schedule(()=>g.complete())},T=>{c.schedule(()=>g.error(T))}),"on"===o?{unsubscribe(){null!=E&&l.off(s,E)}}:{unsubscribe(){}}}).pipe((0,di.U)(g=>{const{snapshot:E,prevKey:T}=g;let F=null;return E.exists()&&(F=E.key),{type:s,payload:E,prevKey:T,key:F}}),(0,jm.B)())}function Eg(l,s){const o=l.length;for(let c=0;c<o;c++)if(l[c].payload.key===s)return c;return-1}function $h(l,s){const{payload:o,prevKey:c,key:g}=s,E=Eg(l,g),T=function Pm(l,s){if(zf(s))return 0;{const o=Eg(l,s);return-1===o?l.length:o+1}}(l,c);switch(s.type){case"value":if(s.payload&&s.payload.exists()){let F=null;s.payload.forEach(G=>{const X={payload:G,type:"value",prevKey:F,key:G.key};return F=G.key,l=[...l,X],!1})}return l;case"child_added":if(E>-1){const F=l[E-1];(F&&F.key||null)!==c&&(l=l.filter(G=>G.payload.key!==o.key)).splice(T,0,s)}else{if(null==c)return[s,...l];(l=l.slice()).splice(T,0,s)}return l;case"child_removed":return l.filter(F=>F.payload.key!==o.key);case"child_changed":return l.map(F=>F.payload.key===g?s:F);case"child_moved":if(E>-1){const F=l.splice(E,1)[0];return(l=l.slice()).splice(T,0,F),l}return l;default:return l}}function Yy(l){return(zf(l)||0===l.length)&&(l=["child_added","child_removed","child_changed","child_moved"]),l}function Kf(l,s,o){return function Nm(l,s,o){return vg(l,"value","once",o).pipe((0,Fo.w)(c=>{const g=[(0,L.of)(c)];return s.forEach(E=>g.push(vg(l,E,"on",o))),(0,Pg.T)(...g).pipe((0,rp.R)($h,[]))}),(0,Xh.x)())}(l,s=Yy(s),o)}function Qy(l,s,o){const c=(s=Yy(s)).map(g=>vg(l,g,"on",o));return(0,Pg.T)(...c)}function Gh(l,s){return function(c,g){return Hh(c,{stringCase:()=>l.child(c)[s](g),firebaseCase:()=>c[s](g),snapshotCase:()=>c.ref[s](g)})}}function Jy(l){return function(o){return o?Hh(o,{stringCase:()=>l.child(o).remove(),firebaseCase:()=>o.remove(),snapshotCase:()=>o.ref.remove()}):l.remove()}}function xv(l,s){return function(){return vg(l,"value","on",s)}}!function _g(l){l.INTERNAL.registerComponent(new ha.wA("database-compat",(s,{instanceIdentifier:o})=>{const c=s.getProvider("app-compat").getImmediate(),g=s.getProvider("database").getImmediate({identifier:o});return new yg(g,c)},"PUBLIC").setServiceProps({Reference:Pa,Query:$o,Database:yg,DataSnapshot:ku,enableLogging:Av,INTERNAL:Pv,ServerValue:Mm}).setMultipleInstances(!0)),l.registerVersion("@firebase/database-compat","0.3.4")}(ka.Z);const xm=new ne.OlP("angularfire2.realtimeDatabaseURL"),ev=new ne.OlP("angularfire2.database.use-emulator");let wg=(()=>{class l{constructor(o,c,g,E,T,F,G,X,Ae,Ue,st,wt,At,on,yn){this.schedulers=F;const br=G,si=(0,Js.on)(o,T,c);X&&(0,H.nw)(si,T,Ae,st,wt,At,Ue,on),this.database=(0,Js.cc)(`${si.name}.database.${g}`,"AngularFireDatabase",si.name,()=>{const ti=T.runOutsideAngular(()=>si.database(g||void 0));return br&&ti.useEmulator(...br),ti},[br])}list(o,c){const g=this.schedulers.ngZone.runOutsideAngular(()=>qf(this.database,o));let E=g;return c&&(E=c(g)),function zh(l,s){const o=s.schedulers.outsideAngular,c=s.schedulers.ngZone.run(()=>l.ref);return{query:l,update:Gh(c,"update"),set:Gh(c,"set"),push:g=>c.push(g),remove:Jy(c),snapshotChanges:g=>Kf(l,g,o).pipe(Xi.iC),stateChanges:g=>Qy(l,g,o).pipe(Xi.iC),auditTrail:g=>function Xy(l,s,o){return function Dc(l,s,o){return function Zf(l,s){return vg(l,"value","on",s).pipe((0,di.U)(o=>{let c;return o.payload.forEach(g=>(c=g.key,!1)),{data:o,lastKeyToLoad:c}}))}(l,o).pipe(function ph(...l){const s=(0,Ju.jO)(l);return(0,cn.e)((o,c)=>{const g=l.length,E=new Array(g);let T=l.map(()=>!1),F=!1;for(let G=0;G<g;G++)(0,Fs.Xf)(l[G]).subscribe((0,Fn.x)(c,X=>{E[G]=X,!F&&!T[G]&&(T[G]=!0,(F=T.every(Jh.y))&&(T=null))},Ji.Z));o.subscribe((0,Fn.x)(c,G=>{if(F){const X=[G,...E];c.next(s?s(...X):X)}}))})}(s),(0,di.U)(([g,E])=>{const T=g.lastKeyToLoad,F=E.map(G=>G.key);return{actions:E,lastKeyToLoad:T,loadedKeys:F}}),function ip(l){return(0,cn.e)((s,o)=>{let c=!1,g=0;s.subscribe((0,Fn.x)(o,E=>(c||(c=!l(E,g++)))&&o.next(E)))})}(g=>-1===g.loadedKeys.indexOf(g.lastKeyToLoad)),(0,di.U)(g=>g.actions))}(l,Qy(l,s).pipe((0,rp.R)((g,E)=>[...g,E],[])),o)}(l,g,o).pipe(Xi.iC),valueChanges:(g,E)=>Kf(l,g,o).pipe((0,di.U)(F=>F.map(G=>E&&E.idField?Object.assign(Object.assign({},G.payload.val()),{[E.idField]:G.key}):G.payload.val())),Xi.iC)}}(E,this)}object(o){return function Ov(l,s){return{query:l,snapshotChanges:()=>xv(l,s.schedulers.outsideAngular)().pipe(Xi.iC),update:o=>l.ref.update(o),set:o=>l.ref.set(o),remove:()=>l.ref.remove(),valueChanges:()=>xv(l,s.schedulers.outsideAngular)().pipe(Xi.iC,(0,di.U)(c=>c.payload.exists()?c.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>qf(this.database,o)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return l.\u0275fac=function(o){return new(o||l)(ne.LFG(Js.Dh),ne.LFG(Js.xv,8),ne.LFG(xm,8),ne.LFG(ne.Lbi),ne.LFG(ne.R0b),ne.LFG(Xi.HU),ne.LFG(ev,8),ne.LFG(H.zQ,8),ne.LFG(H.Qv,8),ne.LFG(H.L6,8),ne.LFG(H._Q,8),ne.LFG(H.rT,8),ne.LFG(H.lh,8),ne.LFG(H.f7,8),ne.LFG(iu.nm,8))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),kv=(()=>{class l{constructor(){$a.Z.registerVersion("angularfire",Xi.q4.full,"rtdb-compat")}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({providers:[wg]}),l})();var tv=U(9515),Om=U(5061),e_=U(9862);const km_firebase={apiKey:"AIzaSyAJE0uVferW2gzu9fdogmeCFEkRQNGN434",authDomain:"auctions-317be.firebaseapp.com",projectId:"auctions-317be",storageBucket:"auctions-317be.appspot.com",messagingSenderId:"949962431669",appId:"1:949962431669:web:0b70f1d85d122e87d732fc",measurementId:"G-06TBN8H13X"};var Cg=U(5148);const nv=[{path:"",loadChildren:()=>U.e(168).then(U.bind(U,6168)).then(l=>l.StoreModule)},{path:"dashboard",canActivate:[(()=>{class l{authService;router;constructor(o,c){this.authService=o,this.router=c}canActivate(o,c){return!0!==this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}static \u0275fac=function(c){return new(c||l)(ne.LFG(Cg.e),ne.LFG(qo.F0))};static \u0275prov=ne.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()],loadChildren:()=>U.e(65).then(U.bind(U,65)).then(l=>l.DashboardModule)},{path:"auth",loadChildren:()=>Promise.resolve().then(U.bind(U,7764)).then(l=>l.AuthModule)}];let t_=(()=>{class l{static \u0275fac=function(c){return new(c||l)};static \u0275mod=ne.oAB({type:l});static \u0275inj=ne.cJS({imports:[qo.Bz.forRoot(nv,{initialNavigation:"enabledBlocking"}),qo.Bz]})}return l})();var n_=U(7764);function r_(l){return new Om.w(l,"./assets/i18n/",".json")}let i_=(()=>{class l{static \u0275fac=function(c){return new(c||l)};static \u0275mod=ne.oAB({type:l,bootstrap:[Ko]});static \u0275inj=ne.cJS({imports:[w.b2,pl,Js.hO.initializeApp(km_firebase),H.ww,Ng.yb,Dd,kv,t_,n_.AuthModule,tv.aw.forRoot({loader:{provide:tv.Zw,useFactory:r_,deps:[e_.eN]}})]})}return l})();(0,ne.G48)(),w.q6().bootstrapModule(i_).catch(l=>console.error(l))},5619:(nn,it,U)=>{U.d(it,{X:()=>ne});var w=U(8645);class ne extends w.x{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const Pe=super._subscribe(fe);return!Pe.closed&&fe.next(this._value),Pe}getValue(){const{hasError:fe,thrownError:Pe,_value:Ge}=this;if(fe)throw Pe;return this._throwIfClosed(),Ge}next(fe){super.next(this._value=fe)}}},5592:(nn,it,U)=>{U.d(it,{y:()=>Ke});var w=U(305),ne=U(7394),S=U(4850),fe=U(8407),Pe=U(2653),Ge=U(4674),Ve=U(1441);let Ke=(()=>{class Re{constructor(yt){yt&&(this._subscribe=yt)}lift(yt){const $t=new Re;return $t.source=this,$t.operator=yt,$t}subscribe(yt,$t,Tt){const Vt=function ye(Re){return Re&&Re instanceof w.Lv||function pe(Re){return Re&&(0,Ge.m)(Re.next)&&(0,Ge.m)(Re.error)&&(0,Ge.m)(Re.complete)}(Re)&&(0,ne.Nn)(Re)}(yt)?yt:new w.Hp(yt,$t,Tt);return(0,Ve.x)(()=>{const{operator:xt,source:ze}=this;Vt.add(xt?xt.call(Vt,ze):ze?this._subscribe(Vt):this._trySubscribe(Vt))}),Vt}_trySubscribe(yt){try{return this._subscribe(yt)}catch($t){yt.error($t)}}forEach(yt,$t){return new($t=$e($t))((Tt,Vt)=>{const xt=new w.Hp({next:ze=>{try{yt(ze)}catch(Lt){Vt(Lt),xt.unsubscribe()}},error:Vt,complete:Tt});this.subscribe(xt)})}_subscribe(yt){var $t;return null===($t=this.source)||void 0===$t?void 0:$t.subscribe(yt)}[S.L](){return this}pipe(...yt){return(0,fe.U)(yt)(this)}toPromise(yt){return new(yt=$e(yt))(($t,Tt)=>{let Vt;this.subscribe(xt=>Vt=xt,xt=>Tt(xt),()=>$t(Vt))})}}return Re.create=It=>new Re(It),Re})();function $e(Re){var It;return null!==(It=Re??Pe.config.Promise)&&void 0!==It?It:Promise}},8645:(nn,it,U)=>{U.d(it,{x:()=>Ve});var w=U(5592),ne=U(7394);const fe=(0,U(2306).d)($e=>function(){$e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=U(9039),Ge=U(1441);let Ve=(()=>{class $e extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ye){const Re=new Ke(this,this);return Re.operator=ye,Re}_throwIfClosed(){if(this.closed)throw new fe}next(ye){(0,Ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Re of this.currentObservers)Re.next(ye)}})}error(ye){(0,Ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ye;const{observers:Re}=this;for(;Re.length;)Re.shift().error(ye)}})}complete(){(0,Ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ye}=this;for(;ye.length;)ye.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ye;return(null===(ye=this.observers)||void 0===ye?void 0:ye.length)>0}_trySubscribe(ye){return this._throwIfClosed(),super._trySubscribe(ye)}_subscribe(ye){return this._throwIfClosed(),this._checkFinalizedStatuses(ye),this._innerSubscribe(ye)}_innerSubscribe(ye){const{hasError:Re,isStopped:It,observers:yt}=this;return Re||It?ne.Lc:(this.currentObservers=null,yt.push(ye),new ne.w0(()=>{this.currentObservers=null,(0,Pe.P)(yt,ye)}))}_checkFinalizedStatuses(ye){const{hasError:Re,thrownError:It,isStopped:yt}=this;Re?ye.error(It):yt&&ye.complete()}asObservable(){const ye=new w.y;return ye.source=this,ye}}return $e.create=(pe,ye)=>new Ke(pe,ye),$e})();class Ke extends Ve{constructor(pe,ye){super(),this.destination=pe,this.source=ye}next(pe){var ye,Re;null===(Re=null===(ye=this.destination)||void 0===ye?void 0:ye.next)||void 0===Re||Re.call(ye,pe)}error(pe){var ye,Re;null===(Re=null===(ye=this.destination)||void 0===ye?void 0:ye.error)||void 0===Re||Re.call(ye,pe)}complete(){var pe,ye;null===(ye=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===ye||ye.call(pe)}_subscribe(pe){var ye,Re;return null!==(Re=null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(pe))&&void 0!==Re?Re:ne.Lc}}},305:(nn,it,U)=>{U.d(it,{Hp:()=>Tt,Lv:()=>Re});var w=U(4674),ne=U(7394),S=U(2653),fe=U(3894),Pe=U(2420);const Ge=$e("C",void 0,void 0);function $e(_e,et,Be){return{kind:_e,value:et,error:Be}}var pe=U(7599),ye=U(1441);class Re extends ne.w0{constructor(et){super(),this.isStopped=!1,et?(this.destination=et,(0,ne.Nn)(et)&&et.add(this)):this.destination=Lt}static create(et,Be,gt){return new Tt(et,Be,gt)}next(et){this.isStopped?ze(function Ke(_e){return $e("N",_e,void 0)}(et),this):this._next(et)}error(et){this.isStopped?ze(function Ve(_e){return $e("E",void 0,_e)}(et),this):(this.isStopped=!0,this._error(et))}complete(){this.isStopped?ze(Ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(et){this.destination.next(et)}_error(et){try{this.destination.error(et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const It=Function.prototype.bind;function yt(_e,et){return It.call(_e,et)}class $t{constructor(et){this.partialObserver=et}next(et){const{partialObserver:Be}=this;if(Be.next)try{Be.next(et)}catch(gt){Vt(gt)}}error(et){const{partialObserver:Be}=this;if(Be.error)try{Be.error(et)}catch(gt){Vt(gt)}else Vt(et)}complete(){const{partialObserver:et}=this;if(et.complete)try{et.complete()}catch(Be){Vt(Be)}}}class Tt extends Re{constructor(et,Be,gt){let vt;if(super(),(0,w.m)(et)||!et)vt={next:et??void 0,error:Be??void 0,complete:gt??void 0};else{let Xe;this&&S.config.useDeprecatedNextContext?(Xe=Object.create(et),Xe.unsubscribe=()=>this.unsubscribe(),vt={next:et.next&&yt(et.next,Xe),error:et.error&&yt(et.error,Xe),complete:et.complete&&yt(et.complete,Xe)}):vt=et}this.destination=new $t(vt)}}function Vt(_e){S.config.useDeprecatedSynchronousErrorHandling?(0,ye.O)(_e):(0,fe.h)(_e)}function ze(_e,et){const{onStoppedNotification:Be}=S.config;Be&&pe.z.setTimeout(()=>Be(_e,et))}const Lt={closed:!0,next:Pe.Z,error:function xt(_e){throw _e},complete:Pe.Z}},7394:(nn,it,U)=>{U.d(it,{Lc:()=>Ge,w0:()=>Pe,Nn:()=>Ve});var w=U(4674);const S=(0,U(2306).d)($e=>function(ye){$e(this),this.message=ye?`${ye.length} errors occurred during unsubscription:\n${ye.map((Re,It)=>`${It+1}) ${Re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ye});var fe=U(9039);class Pe{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:ye}=this;if(ye)if(this._parentage=null,Array.isArray(ye))for(const yt of ye)yt.remove(this);else ye.remove(this);const{initialTeardown:Re}=this;if((0,w.m)(Re))try{Re()}catch(yt){pe=yt instanceof S?yt.errors:[yt]}const{_finalizers:It}=this;if(It){this._finalizers=null;for(const yt of It)try{Ke(yt)}catch($t){pe=pe??[],$t instanceof S?pe=[...pe,...$t.errors]:pe.push($t)}}if(pe)throw new S(pe)}}add(pe){var ye;if(pe&&pe!==this)if(this.closed)Ke(pe);else{if(pe instanceof Pe){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(ye=this._finalizers)&&void 0!==ye?ye:[]).push(pe)}}_hasParent(pe){const{_parentage:ye}=this;return ye===pe||Array.isArray(ye)&&ye.includes(pe)}_addParent(pe){const{_parentage:ye}=this;this._parentage=Array.isArray(ye)?(ye.push(pe),ye):ye?[ye,pe]:pe}_removeParent(pe){const{_parentage:ye}=this;ye===pe?this._parentage=null:Array.isArray(ye)&&(0,fe.P)(ye,pe)}remove(pe){const{_finalizers:ye}=this;ye&&(0,fe.P)(ye,pe),pe instanceof Pe&&pe._removeParent(this)}}Pe.EMPTY=(()=>{const $e=new Pe;return $e.closed=!0,$e})();const Ge=Pe.EMPTY;function Ve($e){return $e instanceof Pe||$e&&"closed"in $e&&(0,w.m)($e.remove)&&(0,w.m)($e.add)&&(0,w.m)($e.unsubscribe)}function Ke($e){(0,w.m)($e)?$e():$e.unsubscribe()}},2653:(nn,it,U)=>{U.d(it,{config:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(nn,it,U)=>{U.d(it,{z:()=>Pe});var w=U(7537),S=U(4564),fe=U(2459);function Pe(...Ge){return function ne(){return(0,w.J)(1)}()((0,fe.D)(Ge,(0,S.yG)(Ge)))}},4911:(nn,it,U)=>{U.d(it,{P:()=>S});var w=U(5592),ne=U(4829);function S(fe){return new w.y(Pe=>{(0,ne.Xf)(fe()).subscribe(Pe)})}},6232:(nn,it,U)=>{U.d(it,{E:()=>ne});const ne=new(U(5592).y)(Pe=>Pe.complete())},9315:(nn,it,U)=>{U.d(it,{D:()=>Ke});var w=U(5592),ne=U(7453),S=U(4829),fe=U(4564),Pe=U(8251),Ge=U(7400),Ve=U(2714);function Ke(...$e){const pe=(0,fe.jO)($e),{args:ye,keys:Re}=(0,ne.D)($e),It=new w.y(yt=>{const{length:$t}=ye;if(!$t)return void yt.complete();const Tt=new Array($t);let Vt=$t,xt=$t;for(let ze=0;ze<$t;ze++){let Lt=!1;(0,S.Xf)(ye[ze]).subscribe((0,Pe.x)(yt,_e=>{Lt||(Lt=!0,xt--),Tt[ze]=_e},()=>Vt--,void 0,()=>{(!Vt||!Lt)&&(xt||yt.next(Re?(0,Ve.n)(Re,Tt):Tt),yt.complete())}))}});return pe?It.pipe((0,Ge.Z)(pe)):It}},2459:(nn,it,U)=>{U.d(it,{D:()=>et});var w=U(4829),ne=U(3093),S=U(5137),Ge=U(5592),Ke=U(4971),$e=U(4674),pe=U(7103);function Re(Be,gt){if(!Be)throw new Error("Iterable cannot be null");return new Ge.y(vt=>{(0,pe.f)(vt,gt,()=>{const Xe=Be[Symbol.asyncIterator]();(0,pe.f)(vt,gt,()=>{Xe.next().then(ot=>{ot.done?vt.complete():vt.next(ot.value)})},0,!0)})})}var It=U(8382),yt=U(4026),$t=U(4266),Tt=U(3664),Vt=U(5726),xt=U(9853),ze=U(541);function et(Be,gt){return gt?function _e(Be,gt){if(null!=Be){if((0,It.c)(Be))return function fe(Be,gt){return(0,w.Xf)(Be).pipe((0,S.R)(gt),(0,ne.Q)(gt))}(Be,gt);if((0,$t.z)(Be))return function Ve(Be,gt){return new Ge.y(vt=>{let Xe=0;return gt.schedule(function(){Xe===Be.length?vt.complete():(vt.next(Be[Xe++]),vt.closed||this.schedule())})})}(Be,gt);if((0,yt.t)(Be))return function Pe(Be,gt){return(0,w.Xf)(Be).pipe((0,S.R)(gt),(0,ne.Q)(gt))}(Be,gt);if((0,Vt.D)(Be))return Re(Be,gt);if((0,Tt.T)(Be))return function ye(Be,gt){return new Ge.y(vt=>{let Xe;return(0,pe.f)(vt,gt,()=>{Xe=Be[Ke.h](),(0,pe.f)(vt,gt,()=>{let ot,Ot;try{({value:ot,done:Ot}=Xe.next())}catch(Yt){return void vt.error(Yt)}Ot?vt.complete():vt.next(ot)},0,!0)}),()=>(0,$e.m)(Xe?.return)&&Xe.return()})}(Be,gt);if((0,ze.L)(Be))return function Lt(Be,gt){return Re((0,ze.Q)(Be),gt)}(Be,gt)}throw(0,xt.z)(Be)}(Be,gt):(0,w.Xf)(Be)}},4829:(nn,it,U)=>{U.d(it,{Xf:()=>It});var w=U(7582),ne=U(4266),S=U(4026),fe=U(5592),Pe=U(8382),Ge=U(5726),Ve=U(9853),Ke=U(3664),$e=U(541),pe=U(4674),ye=U(3894),Re=U(4850);function It(_e){if(_e instanceof fe.y)return _e;if(null!=_e){if((0,Pe.c)(_e))return function yt(_e){return new fe.y(et=>{const Be=_e[Re.L]();if((0,pe.m)(Be.subscribe))return Be.subscribe(et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(_e);if((0,ne.z)(_e))return function $t(_e){return new fe.y(et=>{for(let Be=0;Be<_e.length&&!et.closed;Be++)et.next(_e[Be]);et.complete()})}(_e);if((0,S.t)(_e))return function Tt(_e){return new fe.y(et=>{_e.then(Be=>{et.closed||(et.next(Be),et.complete())},Be=>et.error(Be)).then(null,ye.h)})}(_e);if((0,Ge.D)(_e))return xt(_e);if((0,Ke.T)(_e))return function Vt(_e){return new fe.y(et=>{for(const Be of _e)if(et.next(Be),et.closed)return;et.complete()})}(_e);if((0,$e.L)(_e))return function ze(_e){return xt((0,$e.Q)(_e))}(_e)}throw(0,Ve.z)(_e)}function xt(_e){return new fe.y(et=>{(function Lt(_e,et){var Be,gt,vt,Xe;return(0,w.mG)(this,void 0,void 0,function*(){try{for(Be=(0,w.KL)(_e);!(gt=yield Be.next()).done;)if(et.next(gt.value),et.closed)return}catch(ot){vt={error:ot}}finally{try{gt&&!gt.done&&(Xe=Be.return)&&(yield Xe.call(Be))}finally{if(vt)throw vt.error}}et.complete()})})(_e,et).catch(Be=>et.error(Be))})}},3019:(nn,it,U)=>{U.d(it,{T:()=>Ge});var w=U(7537),ne=U(4829),S=U(6232),fe=U(4564),Pe=U(2459);function Ge(...Ve){const Ke=(0,fe.yG)(Ve),$e=(0,fe._6)(Ve,1/0),pe=Ve;return pe.length?1===pe.length?(0,ne.Xf)(pe[0]):(0,w.J)($e)((0,Pe.D)(pe,Ke)):S.E}},2096:(nn,it,U)=>{U.d(it,{of:()=>S});var w=U(4564),ne=U(2459);function S(...fe){const Pe=(0,w.yG)(fe);return(0,ne.D)(fe,Pe)}},8251:(nn,it,U)=>{U.d(it,{x:()=>ne});var w=U(305);function ne(fe,Pe,Ge,Ve,Ke){return new S(fe,Pe,Ge,Ve,Ke)}class S extends w.Lv{constructor(Pe,Ge,Ve,Ke,$e,pe){super(Pe),this.onFinalize=$e,this.shouldUnsubscribe=pe,this._next=Ge?function(ye){try{Ge(ye)}catch(Re){Pe.error(Re)}}:super._next,this._error=Ke?function(ye){try{Ke(ye)}catch(Re){Pe.error(Re)}finally{this.unsubscribe()}}:super._error,this._complete=Ve?function(){try{Ve()}catch(ye){Pe.error(ye)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ge}=this;super.unsubscribe(),!Ge&&(null===(Pe=this.onFinalize)||void 0===Pe||Pe.call(this))}}}},6328:(nn,it,U)=>{U.d(it,{b:()=>S});var w=U(1631),ne=U(4674);function S(fe,Pe){return(0,ne.m)(Pe)?(0,w.z)(fe,Pe,1):(0,w.z)(fe,1)}},3572:(nn,it,U)=>{U.d(it,{d:()=>S});var w=U(9360),ne=U(8251);function S(fe){return(0,w.e)((Pe,Ge)=>{let Ve=!1;Pe.subscribe((0,ne.x)(Ge,Ke=>{Ve=!0,Ge.next(Ke)},()=>{Ve||Ge.next(fe),Ge.complete()}))})}},3997:(nn,it,U)=>{U.d(it,{x:()=>fe});var w=U(2737),ne=U(9360),S=U(8251);function fe(Ge,Ve=w.y){return Ge=Ge??Pe,(0,ne.e)((Ke,$e)=>{let pe,ye=!0;Ke.subscribe((0,S.x)($e,Re=>{const It=Ve(Re);(ye||!Ge(pe,It))&&(ye=!1,pe=It,$e.next(Re))}))})}function Pe(Ge,Ve){return Ge===Ve}},2181:(nn,it,U)=>{U.d(it,{h:()=>S});var w=U(9360),ne=U(8251);function S(fe,Pe){return(0,w.e)((Ge,Ve)=>{let Ke=0;Ge.subscribe((0,ne.x)(Ve,$e=>fe.call(Pe,$e,Ke++)&&Ve.next($e)))})}},4716:(nn,it,U)=>{U.d(it,{x:()=>ne});var w=U(9360);function ne(S){return(0,w.e)((fe,Pe)=>{try{fe.subscribe(Pe)}finally{Pe.add(S)}})}},1374:(nn,it,U)=>{U.d(it,{P:()=>Ve});var w=U(6973),ne=U(2181),S=U(8180),fe=U(3572),Pe=U(3026),Ge=U(2737);function Ve(Ke,$e){const pe=arguments.length>=2;return ye=>ye.pipe(Ke?(0,ne.h)((Re,It)=>Ke(Re,It,ye)):Ge.y,(0,S.q)(1),pe?(0,fe.d)($e):(0,Pe.T)(()=>new w.K))}},7398:(nn,it,U)=>{U.d(it,{U:()=>S});var w=U(9360),ne=U(8251);function S(fe,Pe){return(0,w.e)((Ge,Ve)=>{let Ke=0;Ge.subscribe((0,ne.x)(Ve,$e=>{Ve.next(fe.call(Pe,$e,Ke++))}))})}},7537:(nn,it,U)=>{U.d(it,{J:()=>S});var w=U(1631),ne=U(2737);function S(fe=1/0){return(0,w.z)(ne.y,fe)}},1631:(nn,it,U)=>{U.d(it,{z:()=>Ke});var w=U(7398),ne=U(4829),S=U(9360),fe=U(7103),Pe=U(8251),Ve=U(4674);function Ke($e,pe,ye=1/0){return(0,Ve.m)(pe)?Ke((Re,It)=>(0,w.U)((yt,$t)=>pe(Re,yt,It,$t))((0,ne.Xf)($e(Re,It))),ye):("number"==typeof pe&&(ye=pe),(0,S.e)((Re,It)=>function Ge($e,pe,ye,Re,It,yt,$t,Tt){const Vt=[];let xt=0,ze=0,Lt=!1;const _e=()=>{Lt&&!Vt.length&&!xt&&pe.complete()},et=gt=>xt<Re?Be(gt):Vt.push(gt),Be=gt=>{yt&&pe.next(gt),xt++;let vt=!1;(0,ne.Xf)(ye(gt,ze++)).subscribe((0,Pe.x)(pe,Xe=>{It?.(Xe),yt?et(Xe):pe.next(Xe)},()=>{vt=!0},void 0,()=>{if(vt)try{for(xt--;Vt.length&&xt<Re;){const Xe=Vt.shift();$t?(0,fe.f)(pe,$t,()=>Be(Xe)):Be(Xe)}_e()}catch(Xe){pe.error(Xe)}}))};return $e.subscribe((0,Pe.x)(pe,et,()=>{Lt=!0,_e()})),()=>{Tt?.()}}(Re,It,$e,ye)))}},3093:(nn,it,U)=>{U.d(it,{Q:()=>fe});var w=U(7103),ne=U(9360),S=U(8251);function fe(Pe,Ge=0){return(0,ne.e)((Ve,Ke)=>{Ve.subscribe((0,S.x)(Ke,$e=>(0,w.f)(Ke,Pe,()=>Ke.next($e),Ge),()=>(0,w.f)(Ke,Pe,()=>Ke.complete(),Ge),$e=>(0,w.f)(Ke,Pe,()=>Ke.error($e),Ge)))})}},6699:(nn,it,U)=>{U.d(it,{R:()=>fe});var w=U(9360),ne=U(8251);function fe(Pe,Ge){return(0,w.e)(function S(Pe,Ge,Ve,Ke,$e){return(pe,ye)=>{let Re=Ve,It=Ge,yt=0;pe.subscribe((0,ne.x)(ye,$t=>{const Tt=yt++;It=Re?Pe(It,$t,Tt):(Re=!0,$t),Ke&&ye.next(It)},$e&&(()=>{Re&&ye.next(It),ye.complete()})))}}(Pe,Ge,arguments.length>=2,!0))}},3020:(nn,it,U)=>{U.d(it,{B:()=>Pe});var w=U(4829),ne=U(8645),S=U(305),fe=U(9360);function Pe(Ve={}){const{connector:Ke=(()=>new ne.x),resetOnError:$e=!0,resetOnComplete:pe=!0,resetOnRefCountZero:ye=!0}=Ve;return Re=>{let It,yt,$t,Tt=0,Vt=!1,xt=!1;const ze=()=>{yt?.unsubscribe(),yt=void 0},Lt=()=>{ze(),It=$t=void 0,Vt=xt=!1},_e=()=>{const et=It;Lt(),et?.unsubscribe()};return(0,fe.e)((et,Be)=>{Tt++,!xt&&!Vt&&ze();const gt=$t=$t??Ke();Be.add(()=>{Tt--,0===Tt&&!xt&&!Vt&&(yt=Ge(_e,ye))}),gt.subscribe(Be),!It&&Tt>0&&(It=new S.Hp({next:vt=>gt.next(vt),error:vt=>{xt=!0,ze(),yt=Ge(Lt,$e,vt),gt.error(vt)},complete:()=>{Vt=!0,ze(),yt=Ge(Lt,pe),gt.complete()}}),(0,w.Xf)(et).subscribe(It))})(Re)}}function Ge(Ve,Ke,...$e){if(!0===Ke)return void Ve();if(!1===Ke)return;const pe=new S.Hp({next:()=>{pe.unsubscribe(),Ve()}});return(0,w.Xf)(Ke(...$e)).subscribe(pe)}},940:(nn,it,U)=>{U.d(it,{d:()=>Pe});var w=U(8645),ne=U(4552);class S extends w.x{constructor(Ve=1/0,Ke=1/0,$e=ne.l){super(),this._bufferSize=Ve,this._windowTime=Ke,this._timestampProvider=$e,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ke===1/0,this._bufferSize=Math.max(1,Ve),this._windowTime=Math.max(1,Ke)}next(Ve){const{isStopped:Ke,_buffer:$e,_infiniteTimeWindow:pe,_timestampProvider:ye,_windowTime:Re}=this;Ke||($e.push(Ve),!pe&&$e.push(ye.now()+Re)),this._trimBuffer(),super.next(Ve)}_subscribe(Ve){this._throwIfClosed(),this._trimBuffer();const Ke=this._innerSubscribe(Ve),{_infiniteTimeWindow:$e,_buffer:pe}=this,ye=pe.slice();for(let Re=0;Re<ye.length&&!Ve.closed;Re+=$e?1:2)Ve.next(ye[Re]);return this._checkFinalizedStatuses(Ve),Ke}_trimBuffer(){const{_bufferSize:Ve,_timestampProvider:Ke,_buffer:$e,_infiniteTimeWindow:pe}=this,ye=(pe?1:2)*Ve;if(Ve<1/0&&ye<$e.length&&$e.splice(0,$e.length-ye),!pe){const Re=Ke.now();let It=0;for(let yt=1;yt<$e.length&&$e[yt]<=Re;yt+=2)It=yt;It&&$e.splice(0,It+1)}}}var fe=U(3020);function Pe(Ge,Ve,Ke){let $e,pe=!1;return Ge&&"object"==typeof Ge?({bufferSize:$e=1/0,windowTime:Ve=1/0,refCount:pe=!1,scheduler:Ke}=Ge):$e=Ge??1/0,(0,fe.B)({connector:()=>new S($e,Ve,Ke),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:pe})}},7921:(nn,it,U)=>{U.d(it,{O:()=>fe});var w=U(5211),ne=U(4564),S=U(9360);function fe(...Pe){const Ge=(0,ne.yG)(Pe);return(0,S.e)((Ve,Ke)=>{(Ge?(0,w.z)(Pe,Ve,Ge):(0,w.z)(Pe,Ve)).subscribe(Ke)})}},5137:(nn,it,U)=>{U.d(it,{R:()=>ne});var w=U(9360);function ne(S,fe=0){return(0,w.e)((Pe,Ge)=>{Ge.add(S.schedule(()=>Pe.subscribe(Ge),fe))})}},4664:(nn,it,U)=>{U.d(it,{w:()=>fe});var w=U(4829),ne=U(9360),S=U(8251);function fe(Pe,Ge){return(0,ne.e)((Ve,Ke)=>{let $e=null,pe=0,ye=!1;const Re=()=>ye&&!$e&&Ke.complete();Ve.subscribe((0,S.x)(Ke,It=>{$e?.unsubscribe();let yt=0;const $t=pe++;(0,w.Xf)(Pe(It,$t)).subscribe($e=(0,S.x)(Ke,Tt=>Ke.next(Ge?Ge(It,Tt,$t,yt++):Tt),()=>{$e=null,Re()}))},()=>{ye=!0,Re()}))})}},8180:(nn,it,U)=>{U.d(it,{q:()=>fe});var w=U(6232),ne=U(9360),S=U(8251);function fe(Pe){return Pe<=0?()=>w.E:(0,ne.e)((Ge,Ve)=>{let Ke=0;Ge.subscribe((0,S.x)(Ve,$e=>{++Ke<=Pe&&(Ve.next($e),Pe<=Ke&&Ve.complete())}))})}},9397:(nn,it,U)=>{U.d(it,{b:()=>Pe});var w=U(4674),ne=U(9360),S=U(8251),fe=U(2737);function Pe(Ge,Ve,Ke){const $e=(0,w.m)(Ge)||Ve||Ke?{next:Ge,error:Ve,complete:Ke}:Ge;return $e?(0,ne.e)((pe,ye)=>{var Re;null===(Re=$e.subscribe)||void 0===Re||Re.call($e);let It=!0;pe.subscribe((0,S.x)(ye,yt=>{var $t;null===($t=$e.next)||void 0===$t||$t.call($e,yt),ye.next(yt)},()=>{var yt;It=!1,null===(yt=$e.complete)||void 0===yt||yt.call($e),ye.complete()},yt=>{var $t;It=!1,null===($t=$e.error)||void 0===$t||$t.call($e,yt),ye.error(yt)},()=>{var yt,$t;It&&(null===(yt=$e.unsubscribe)||void 0===yt||yt.call($e)),null===($t=$e.finalize)||void 0===$t||$t.call($e)}))}):fe.y}},3026:(nn,it,U)=>{U.d(it,{T:()=>fe});var w=U(6973),ne=U(9360),S=U(8251);function fe(Ge=Pe){return(0,ne.e)((Ve,Ke)=>{let $e=!1;Ve.subscribe((0,S.x)(Ke,pe=>{$e=!0,Ke.next(pe)},()=>$e?Ke.complete():Ke.error(Ge())))})}function Pe(){return new w.K}},1954:(nn,it,U)=>{U.d(it,{o:()=>Pe});var w=U(7394);class ne extends w.w0{constructor(Ve,Ke){super()}schedule(Ve,Ke=0){return this}}const S={setInterval(Ge,Ve,...Ke){const{delegate:$e}=S;return $e?.setInterval?$e.setInterval(Ge,Ve,...Ke):setInterval(Ge,Ve,...Ke)},clearInterval(Ge){const{delegate:Ve}=S;return(Ve?.clearInterval||clearInterval)(Ge)},delegate:void 0};var fe=U(9039);class Pe extends ne{constructor(Ve,Ke){super(Ve,Ke),this.scheduler=Ve,this.work=Ke,this.pending=!1}schedule(Ve,Ke=0){var $e;if(this.closed)return this;this.state=Ve;const pe=this.id,ye=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(ye,pe,Ke)),this.pending=!0,this.delay=Ke,this.id=null!==($e=this.id)&&void 0!==$e?$e:this.requestAsyncId(ye,this.id,Ke),this}requestAsyncId(Ve,Ke,$e=0){return S.setInterval(Ve.flush.bind(Ve,this),$e)}recycleAsyncId(Ve,Ke,$e=0){if(null!=$e&&this.delay===$e&&!1===this.pending)return Ke;null!=Ke&&S.clearInterval(Ke)}execute(Ve,Ke){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const $e=this._execute(Ve,Ke);if($e)return $e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,Ke){let pe,$e=!1;try{this.work(Ve)}catch(ye){$e=!0,pe=ye||new Error("Scheduled action threw falsy error")}if($e)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:Ve,scheduler:Ke}=this,{actions:$e}=Ke;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)($e,this),null!=Ve&&(this.id=this.recycleAsyncId(Ke,Ve,null)),this.delay=null,super.unsubscribe()}}}},2631:(nn,it,U)=>{U.d(it,{v:()=>S});var w=U(4552);class ne{constructor(Pe,Ge=ne.now){this.schedulerActionCtor=Pe,this.now=Ge}schedule(Pe,Ge=0,Ve){return new this.schedulerActionCtor(this,Pe).schedule(Ve,Ge)}}ne.now=w.l.now;class S extends ne{constructor(Pe,Ge=ne.now){super(Pe,Ge),this.actions=[],this._active=!1}flush(Pe){const{actions:Ge}=this;if(this._active)return void Ge.push(Pe);let Ve;this._active=!0;do{if(Ve=Pe.execute(Pe.state,Pe.delay))break}while(Pe=Ge.shift());if(this._active=!1,Ve){for(;Pe=Ge.shift();)Pe.unsubscribe();throw Ve}}}},6321:(nn,it,U)=>{U.d(it,{z:()=>S});var w=U(1954);const S=new(U(2631).v)(w.o)},4552:(nn,it,U)=>{U.d(it,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},7599:(nn,it,U)=>{U.d(it,{z:()=>w});const w={setTimeout(ne,S,...fe){const{delegate:Pe}=w;return Pe?.setTimeout?Pe.setTimeout(ne,S,...fe):setTimeout(ne,S,...fe)},clearTimeout(ne){const{delegate:S}=w;return(S?.clearTimeout||clearTimeout)(ne)},delegate:void 0}},4971:(nn,it,U)=>{U.d(it,{h:()=>ne});const ne=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(nn,it,U)=>{U.d(it,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(nn,it,U)=>{U.d(it,{K:()=>ne});const ne=(0,U(2306).d)(S=>function(){S(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(nn,it,U)=>{U.d(it,{_6:()=>Ge,jO:()=>fe,yG:()=>Pe});var w=U(4674);function S(Ve){return Ve[Ve.length-1]}function fe(Ve){return(0,w.m)(S(Ve))?Ve.pop():void 0}function Pe(Ve){return function ne(Ve){return Ve&&(0,w.m)(Ve.schedule)}(S(Ve))?Ve.pop():void 0}function Ge(Ve,Ke){return"number"==typeof S(Ve)?Ve.pop():Ke}},7453:(nn,it,U)=>{U.d(it,{D:()=>Pe});const{isArray:w}=Array,{getPrototypeOf:ne,prototype:S,keys:fe}=Object;function Pe(Ve){if(1===Ve.length){const Ke=Ve[0];if(w(Ke))return{args:Ke,keys:null};if(function Ge(Ve){return Ve&&"object"==typeof Ve&&ne(Ve)===S}(Ke)){const $e=fe(Ke);return{args:$e.map(pe=>Ke[pe]),keys:$e}}}return{args:Ve,keys:null}}},9039:(nn,it,U)=>{function w(ne,S){if(ne){const fe=ne.indexOf(S);0<=fe&&ne.splice(fe,1)}}U.d(it,{P:()=>w})},2306:(nn,it,U)=>{function w(ne){const fe=ne(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}U.d(it,{d:()=>w})},2714:(nn,it,U)=>{function w(ne,S){return ne.reduce((fe,Pe,Ge)=>(fe[Pe]=S[Ge],fe),{})}U.d(it,{n:()=>w})},1441:(nn,it,U)=>{U.d(it,{O:()=>fe,x:()=>S});var w=U(2653);let ne=null;function S(Pe){if(w.config.useDeprecatedSynchronousErrorHandling){const Ge=!ne;if(Ge&&(ne={errorThrown:!1,error:null}),Pe(),Ge){const{errorThrown:Ve,error:Ke}=ne;if(ne=null,Ve)throw Ke}}else Pe()}function fe(Pe){w.config.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=Pe)}},7103:(nn,it,U)=>{function w(ne,S,fe,Pe=0,Ge=!1){const Ve=S.schedule(function(){fe(),Ge?ne.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(ne.add(Ve),!Ge)return Ve}U.d(it,{f:()=>w})},2737:(nn,it,U)=>{function w(ne){return ne}U.d(it,{y:()=>w})},4266:(nn,it,U)=>{U.d(it,{z:()=>w});const w=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},5726:(nn,it,U)=>{U.d(it,{D:()=>ne});var w=U(4674);function ne(S){return Symbol.asyncIterator&&(0,w.m)(S?.[Symbol.asyncIterator])}},4674:(nn,it,U)=>{function w(ne){return"function"==typeof ne}U.d(it,{m:()=>w})},8382:(nn,it,U)=>{U.d(it,{c:()=>S});var w=U(4850),ne=U(4674);function S(fe){return(0,ne.m)(fe[w.L])}},3664:(nn,it,U)=>{U.d(it,{T:()=>S});var w=U(4971),ne=U(4674);function S(fe){return(0,ne.m)(fe?.[w.h])}},2664:(nn,it,U)=>{U.d(it,{b:()=>S});var w=U(5592),ne=U(4674);function S(fe){return!!fe&&(fe instanceof w.y||(0,ne.m)(fe.lift)&&(0,ne.m)(fe.subscribe))}},4026:(nn,it,U)=>{U.d(it,{t:()=>ne});var w=U(4674);function ne(S){return(0,w.m)(S?.then)}},541:(nn,it,U)=>{U.d(it,{L:()=>fe,Q:()=>S});var w=U(7582),ne=U(4674);function S(Pe){return(0,w.FC)(this,arguments,function*(){const Ve=Pe.getReader();try{for(;;){const{value:Ke,done:$e}=yield(0,w.qq)(Ve.read());if($e)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(Ke)}}finally{Ve.releaseLock()}})}function fe(Pe){return(0,ne.m)(Pe?.getReader)}},9360:(nn,it,U)=>{U.d(it,{A:()=>ne,e:()=>S});var w=U(4674);function ne(fe){return(0,w.m)(fe?.lift)}function S(fe){return Pe=>{if(ne(Pe))return Pe.lift(function(Ge){try{return fe(Ge,this)}catch(Ve){this.error(Ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(nn,it,U)=>{U.d(it,{Z:()=>fe});var w=U(7398);const{isArray:ne}=Array;function fe(Pe){return(0,w.U)(Ge=>function S(Pe,Ge){return ne(Ge)?Pe(...Ge):Pe(Ge)}(Pe,Ge))}},2420:(nn,it,U)=>{function w(){}U.d(it,{Z:()=>w})},8407:(nn,it,U)=>{U.d(it,{U:()=>S,z:()=>ne});var w=U(2737);function ne(...fe){return S(fe)}function S(fe){return 0===fe.length?w.y:1===fe.length?fe[0]:function(Ge){return fe.reduce((Ve,Ke)=>Ke(Ve),Ge)}}},3894:(nn,it,U)=>{U.d(it,{h:()=>S});var w=U(2653),ne=U(7599);function S(fe){ne.z.setTimeout(()=>{const{onUnhandledError:Pe}=w.config;if(!Pe)throw fe;Pe(fe)})}},9853:(nn,it,U)=>{function w(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(it,{z:()=>w})},6825:(nn,it,U)=>{U.d(it,{LC:()=>ne,ZE:()=>xt,ZN:()=>Vt,_j:()=>w,jt:()=>Pe,k1:()=>ze,l3:()=>S,oB:()=>Ke,vP:()=>Ve});class w{}class ne{}const S="*";function Pe(Lt,_e=null){return{type:4,styles:_e,timings:Lt}}function Ve(Lt,_e=null){return{type:2,steps:Lt,options:_e}}function Ke(Lt){return{type:6,styles:Lt,offset:null}}class Vt{constructor(_e=0,et=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=_e+et}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_e=>_e()),this._onDoneFns=[])}onStart(_e){this._originalOnStartFns.push(_e),this._onStartFns.push(_e)}onDone(_e){this._originalOnDoneFns.push(_e),this._onDoneFns.push(_e)}onDestroy(_e){this._onDestroyFns.push(_e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(_e=>_e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(_e=>_e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(_e){this._position=this.totalTime?_e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(_e){const et="start"==_e?this._onStartFns:this._onDoneFns;et.forEach(Be=>Be()),et.length=0}}class xt{constructor(_e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=_e;let et=0,Be=0,gt=0;const vt=this.players.length;0==vt?queueMicrotask(()=>this._onFinish()):this.players.forEach(Xe=>{Xe.onDone(()=>{++et==vt&&this._onFinish()}),Xe.onDestroy(()=>{++Be==vt&&this._onDestroy()}),Xe.onStart(()=>{++gt==vt&&this._onStart()})}),this.totalTime=this.players.reduce((Xe,ot)=>Math.max(Xe,ot.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_e=>_e()),this._onDoneFns=[])}init(){this.players.forEach(_e=>_e.init())}onStart(_e){this._onStartFns.push(_e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(_e=>_e()),this._onStartFns=[])}onDone(_e){this._onDoneFns.push(_e)}onDestroy(_e){this._onDestroyFns.push(_e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(_e=>_e.play())}pause(){this.players.forEach(_e=>_e.pause())}restart(){this.players.forEach(_e=>_e.restart())}finish(){this._onFinish(),this.players.forEach(_e=>_e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(_e=>_e.destroy()),this._onDestroyFns.forEach(_e=>_e()),this._onDestroyFns=[])}reset(){this.players.forEach(_e=>_e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(_e){const et=_e*this.totalTime;this.players.forEach(Be=>{const gt=Be.totalTime?Math.min(1,et/Be.totalTime):1;Be.setPosition(gt)})}getPosition(){const _e=this.players.reduce((et,Be)=>null===et||Be.totalTime>et.totalTime?Be:et,null);return null!=_e?_e.getPosition():0}beforeDestroy(){this.players.forEach(_e=>{_e.beforeDestroy&&_e.beforeDestroy()})}triggerCallback(_e){const et="start"==_e?this._onStartFns:this._onDoneFns;et.forEach(Be=>Be()),et.length=0}}const ze="!"},6814:(nn,it,U)=>{U.d(it,{Do:()=>Tt,EM:()=>Cs,HT:()=>fe,JF:()=>rs,K0:()=>Ge,Mx:()=>Hi,NF:()=>Io,O5:()=>Bs,PM:()=>oo,S$:()=>It,V_:()=>Ke,Ye:()=>Vt,b0:()=>$t,bD:()=>xo,ez:()=>ys,mk:()=>Cr,q:()=>S,sg:()=>ls,uU:()=>vn,w_:()=>Pe});var w=U(5879);let ne=null;function S(){return ne}function fe(R){ne||(ne=R)}class Pe{}const Ge=new w.OlP("DocumentToken");let Ve=(()=>{class R{historyGo(B){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Z){return new(Z||R)};static#t=this.\u0275prov=w.Yz7({token:R,factory:function(){return(0,w.f3M)($e)},providedIn:"platform"})}return R})();const Ke=new w.OlP("Location Initialized");let $e=(()=>{class R extends Ve{constructor(){super(),this._doc=(0,w.f3M)(Ge),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return S().getBaseHref(this._doc)}onPopState(B){const Z=S().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("popstate",B,!1),()=>Z.removeEventListener("popstate",B)}onHashChange(B){const Z=S().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("hashchange",B,!1),()=>Z.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,Z,De){this._history.pushState(B,Z,De)}replaceState(B,Z,De){this._history.replaceState(B,Z,De)}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}static#e=this.\u0275fac=function(Z){return new(Z||R)};static#t=this.\u0275prov=w.Yz7({token:R,factory:function(){return new R},providedIn:"platform"})}return R})();function pe(R,J){if(0==R.length)return J;if(0==J.length)return R;let B=0;return R.endsWith("/")&&B++,J.startsWith("/")&&B++,2==B?R+J.substring(1):1==B?R+J:R+"/"+J}function ye(R){const J=R.match(/#|\?|$/),B=J&&J.index||R.length;return R.slice(0,B-("/"===R[B-1]?1:0))+R.slice(B)}function Re(R){return R&&"?"!==R[0]?"?"+R:R}let It=(()=>{class R{historyGo(B){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Z){return new(Z||R)};static#t=this.\u0275prov=w.Yz7({token:R,factory:function(){return(0,w.f3M)($t)},providedIn:"root"})}return R})();const yt=new w.OlP("appBaseHref");let $t=(()=>{class R extends It{constructor(B,Z){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=Z??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(Ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return pe(this._baseHref,B)}path(B=!1){const Z=this._platformLocation.pathname+Re(this._platformLocation.search),De=this._platformLocation.hash;return De&&B?`${Z}${De}`:Z}pushState(B,Z,De,lt){const Ct=this.prepareExternalUrl(De+Re(lt));this._platformLocation.pushState(B,Z,Ct)}replaceState(B,Z,De,lt){const Ct=this.prepareExternalUrl(De+Re(lt));this._platformLocation.replaceState(B,Z,Ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}static#e=this.\u0275fac=function(Z){return new(Z||R)(w.LFG(Ve),w.LFG(yt,8))};static#t=this.\u0275prov=w.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),Tt=(()=>{class R extends It{constructor(B,Z){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=Z&&(this._baseHref=Z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let Z=this._platformLocation.hash;return null==Z&&(Z="#"),Z.length>0?Z.substring(1):Z}prepareExternalUrl(B){const Z=pe(this._baseHref,B);return Z.length>0?"#"+Z:Z}pushState(B,Z,De,lt){let Ct=this.prepareExternalUrl(De+Re(lt));0==Ct.length&&(Ct=this._platformLocation.pathname),this._platformLocation.pushState(B,Z,Ct)}replaceState(B,Z,De,lt){let Ct=this.prepareExternalUrl(De+Re(lt));0==Ct.length&&(Ct=this._platformLocation.pathname),this._platformLocation.replaceState(B,Z,Ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}static#e=this.\u0275fac=function(Z){return new(Z||R)(w.LFG(Ve),w.LFG(yt,8))};static#t=this.\u0275prov=w.Yz7({token:R,factory:R.\u0275fac})}return R})(),Vt=(()=>{class R{constructor(B){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const Z=this._locationStrategy.getBaseHref();this._basePath=function _e(R){if(new RegExp("^(https?:)?//").test(R)){const[,B]=R.split(/\/\/[^\/]+/);return B}return R}(ye(Lt(Z))),this._locationStrategy.onPopState(De=>{this._subject.emit({url:this.path(!0),pop:!0,state:De.state,type:De.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,Z=""){return this.path()==this.normalize(B+Re(Z))}normalize(B){return R.stripTrailingSlash(function ze(R,J){if(!R||!J.startsWith(R))return J;const B=J.substring(R.length);return""===B||["/",";","?","#"].includes(B[0])?B:J}(this._basePath,Lt(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,Z="",De=null){this._locationStrategy.pushState(De,"",B,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Re(Z)),De)}replaceState(B,Z="",De=null){this._locationStrategy.replaceState(De,"",B,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Re(Z)),De)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Z=>{this._notifyUrlChangeListeners(Z.url,Z.state)})),()=>{const Z=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(Z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",Z){this._urlChangeListeners.forEach(De=>De(B,Z))}subscribe(B,Z,De){return this._subject.subscribe({next:B,error:Z,complete:De})}static#e=this.normalizeQueryParams=Re;static#t=this.joinWithSlash=pe;static#n=this.stripTrailingSlash=ye;static#r=this.\u0275fac=function(Z){return new(Z||R)(w.LFG(It))};static#i=this.\u0275prov=w.Yz7({token:R,factory:function(){return function xt(){return new Vt((0,w.LFG)(It))}()},providedIn:"root"})}return R})();function Lt(R){return R.replace(/\/index.html$/,"")}var vt=function(R){return R[R.Format=0]="Format",R[R.Standalone=1]="Standalone",R}(vt||{}),Xe=function(R){return R[R.Narrow=0]="Narrow",R[R.Abbreviated=1]="Abbreviated",R[R.Wide=2]="Wide",R[R.Short=3]="Short",R}(Xe||{}),ot=function(R){return R[R.Short=0]="Short",R[R.Medium=1]="Medium",R[R.Long=2]="Long",R[R.Full=3]="Full",R}(ot||{}),Ot=function(R){return R[R.Decimal=0]="Decimal",R[R.Group=1]="Group",R[R.List=2]="List",R[R.PercentSign=3]="PercentSign",R[R.PlusSign=4]="PlusSign",R[R.MinusSign=5]="MinusSign",R[R.Exponential=6]="Exponential",R[R.SuperscriptingExponent=7]="SuperscriptingExponent",R[R.PerMille=8]="PerMille",R[R.Infinity=9]="Infinity",R[R.NaN=10]="NaN",R[R.TimeSeparator=11]="TimeSeparator",R[R.CurrencyDecimal=12]="CurrencyDecimal",R[R.CurrencyGroup=13]="CurrencyGroup",R}(Ot||{});function Le(R,J){return Sn((0,w.cg1)(R)[w.wAp.DateFormat],J)}function He(R,J){return Sn((0,w.cg1)(R)[w.wAp.TimeFormat],J)}function rt(R,J){return Sn((0,w.cg1)(R)[w.wAp.DateTimeFormat],J)}function mt(R,J){const B=(0,w.cg1)(R),Z=B[w.wAp.NumberSymbols][J];if(typeof Z>"u"){if(J===Ot.CurrencyDecimal)return B[w.wAp.NumberSymbols][Ot.Decimal];if(J===Ot.CurrencyGroup)return B[w.wAp.NumberSymbols][Ot.Group]}return Z}function dn(R){if(!R[w.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${R[w.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Sn(R,J){for(let B=J;B>-1;B--)if(typeof R[B]<"u")return R[B];throw new Error("Locale data API: locale data undefined")}function jn(R){const[J,B]=R.split(":");return{hours:+J,minutes:+B}}const Kr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ai={},yi=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var gn=function(R){return R[R.Short=0]="Short",R[R.ShortGMT=1]="ShortGMT",R[R.Long=2]="Long",R[R.Extended=3]="Extended",R}(gn||{}),zn=function(R){return R[R.FullYear=0]="FullYear",R[R.Month=1]="Month",R[R.Date=2]="Date",R[R.Hours=3]="Hours",R[R.Minutes=4]="Minutes",R[R.Seconds=5]="Seconds",R[R.FractionalSeconds=6]="FractionalSeconds",R[R.Day=7]="Day",R}(zn||{}),An=function(R){return R[R.DayPeriods=0]="DayPeriods",R[R.Days=1]="Days",R[R.Months=2]="Months",R[R.Eras=3]="Eras",R}(An||{});function cr(R,J,B,Z){let De=function re(R){if(ie(R))return R;if("number"==typeof R&&!isNaN(R))return new Date(R);if("string"==typeof R){if(R=R.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(R)){const[De,lt=1,Ct=1]=R.split("-").map(En=>+En);return Or(De,lt-1,Ct)}const B=parseFloat(R);if(!isNaN(R-B))return new Date(B);let Z;if(Z=R.match(Kr))return function ae(R){const J=new Date(0);let B=0,Z=0;const De=R[8]?J.setUTCFullYear:J.setFullYear,lt=R[8]?J.setUTCHours:J.setHours;R[9]&&(B=Number(R[9]+R[10]),Z=Number(R[9]+R[11])),De.call(J,Number(R[1]),Number(R[2])-1,Number(R[3]));const Ct=Number(R[4]||0)-B,En=Number(R[5]||0)-Z,lr=Number(R[6]||0),yr=Math.floor(1e3*parseFloat("0."+(R[7]||0)));return lt.call(J,Ct,En,lr,yr),J}(Z)}const J=new Date(R);if(!ie(J))throw new Error(`Unable to convert "${R}" into a date`);return J}(R);J=_i(B,J)||J;let En,Ct=[];for(;J;){if(En=yi.exec(J),!En){Ct.push(J);break}{Ct=Ct.concat(En.slice(1));const hr=Ct.pop();if(!hr)break;J=hr}}let lr=De.getTimezoneOffset();Z&&(lr=Qr(Z,lr),De=function Oe(R,J,B){const Z=B?-1:1,De=R.getTimezoneOffset();return function Qn(R,J){return(R=new Date(R.getTime())).setMinutes(R.getMinutes()+J),R}(R,Z*(Qr(J,De)-De))}(De,Z,!0));let yr="";return Ct.forEach(hr=>{const Xn=function Hn(R){if(vr[R])return vr[R];let J;switch(R){case"G":case"GG":case"GGG":J=an(An.Eras,Xe.Abbreviated);break;case"GGGG":J=an(An.Eras,Xe.Wide);break;case"GGGGG":J=an(An.Eras,Xe.Narrow);break;case"y":J=rr(zn.FullYear,1,0,!1,!0);break;case"yy":J=rr(zn.FullYear,2,0,!0,!0);break;case"yyy":J=rr(zn.FullYear,3,0,!1,!0);break;case"yyyy":J=rr(zn.FullYear,4,0,!1,!0);break;case"Y":J=nr(1);break;case"YY":J=nr(2,!0);break;case"YYY":J=nr(3);break;case"YYYY":J=nr(4);break;case"M":case"L":J=rr(zn.Month,1,1);break;case"MM":case"LL":J=rr(zn.Month,2,1);break;case"MMM":J=an(An.Months,Xe.Abbreviated);break;case"MMMM":J=an(An.Months,Xe.Wide);break;case"MMMMM":J=an(An.Months,Xe.Narrow);break;case"LLL":J=an(An.Months,Xe.Abbreviated,vt.Standalone);break;case"LLLL":J=an(An.Months,Xe.Wide,vt.Standalone);break;case"LLLLL":J=an(An.Months,Xe.Narrow,vt.Standalone);break;case"w":J=Br(1);break;case"ww":J=Br(2);break;case"W":J=Br(1,!0);break;case"d":J=rr(zn.Date,1);break;case"dd":J=rr(zn.Date,2);break;case"c":case"cc":J=rr(zn.Day,1);break;case"ccc":J=an(An.Days,Xe.Abbreviated,vt.Standalone);break;case"cccc":J=an(An.Days,Xe.Wide,vt.Standalone);break;case"ccccc":J=an(An.Days,Xe.Narrow,vt.Standalone);break;case"cccccc":J=an(An.Days,Xe.Short,vt.Standalone);break;case"E":case"EE":case"EEE":J=an(An.Days,Xe.Abbreviated);break;case"EEEE":J=an(An.Days,Xe.Wide);break;case"EEEEE":J=an(An.Days,Xe.Narrow);break;case"EEEEEE":J=an(An.Days,Xe.Short);break;case"a":case"aa":case"aaa":J=an(An.DayPeriods,Xe.Abbreviated);break;case"aaaa":J=an(An.DayPeriods,Xe.Wide);break;case"aaaaa":J=an(An.DayPeriods,Xe.Narrow);break;case"b":case"bb":case"bbb":J=an(An.DayPeriods,Xe.Abbreviated,vt.Standalone,!0);break;case"bbbb":J=an(An.DayPeriods,Xe.Wide,vt.Standalone,!0);break;case"bbbbb":J=an(An.DayPeriods,Xe.Narrow,vt.Standalone,!0);break;case"B":case"BB":case"BBB":J=an(An.DayPeriods,Xe.Abbreviated,vt.Format,!0);break;case"BBBB":J=an(An.DayPeriods,Xe.Wide,vt.Format,!0);break;case"BBBBB":J=an(An.DayPeriods,Xe.Narrow,vt.Format,!0);break;case"h":J=rr(zn.Hours,1,-12);break;case"hh":J=rr(zn.Hours,2,-12);break;case"H":J=rr(zn.Hours,1);break;case"HH":J=rr(zn.Hours,2);break;case"m":J=rr(zn.Minutes,1);break;case"mm":J=rr(zn.Minutes,2);break;case"s":J=rr(zn.Seconds,1);break;case"ss":J=rr(zn.Seconds,2);break;case"S":J=rr(zn.FractionalSeconds,1);break;case"SS":J=rr(zn.FractionalSeconds,2);break;case"SSS":J=rr(zn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":J=zi(gn.Short);break;case"ZZZZZ":J=zi(gn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":J=zi(gn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":J=zi(gn.Long);break;default:return null}return vr[R]=J,J}(hr);yr+=Xn?Xn(De,B,lr):"''"===hr?"'":hr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),yr}function Or(R,J,B){const Z=new Date(0);return Z.setFullYear(R,J,B),Z.setHours(0,0,0),Z}function _i(R,J){const B=function Cn(R){return(0,w.cg1)(R)[w.wAp.LocaleId]}(R);if(Ai[B]=Ai[B]||{},Ai[B][J])return Ai[B][J];let Z="";switch(J){case"shortDate":Z=Le(R,ot.Short);break;case"mediumDate":Z=Le(R,ot.Medium);break;case"longDate":Z=Le(R,ot.Long);break;case"fullDate":Z=Le(R,ot.Full);break;case"shortTime":Z=He(R,ot.Short);break;case"mediumTime":Z=He(R,ot.Medium);break;case"longTime":Z=He(R,ot.Long);break;case"fullTime":Z=He(R,ot.Full);break;case"short":const De=_i(R,"shortTime"),lt=_i(R,"shortDate");Z=Yn(rt(R,ot.Short),[De,lt]);break;case"medium":const Ct=_i(R,"mediumTime"),En=_i(R,"mediumDate");Z=Yn(rt(R,ot.Medium),[Ct,En]);break;case"long":const lr=_i(R,"longTime"),yr=_i(R,"longDate");Z=Yn(rt(R,ot.Long),[lr,yr]);break;case"full":const hr=_i(R,"fullTime"),Xn=_i(R,"fullDate");Z=Yn(rt(R,ot.Full),[hr,Xn])}return Z&&(Ai[B][J]=Z),Z}function Yn(R,J){return J&&(R=R.replace(/\{([^}]+)}/g,function(B,Z){return null!=J&&Z in J?J[Z]:B})),R}function Sr(R,J,B="-",Z,De){let lt="";(R<0||De&&R<=0)&&(De?R=1-R:(R=-R,lt=B));let Ct=String(R);for(;Ct.length<J;)Ct="0"+Ct;return Z&&(Ct=Ct.slice(Ct.length-J)),lt+Ct}function rr(R,J,B=0,Z=!1,De=!1){return function(lt,Ct){let En=function Fr(R,J){switch(R){case zn.FullYear:return J.getFullYear();case zn.Month:return J.getMonth();case zn.Date:return J.getDate();case zn.Hours:return J.getHours();case zn.Minutes:return J.getMinutes();case zn.Seconds:return J.getSeconds();case zn.FractionalSeconds:return J.getMilliseconds();case zn.Day:return J.getDay();default:throw new Error(`Unknown DateType value "${R}".`)}}(R,lt);if((B>0||En>-B)&&(En+=B),R===zn.Hours)0===En&&-12===B&&(En=12);else if(R===zn.FractionalSeconds)return function Yi(R,J){return Sr(R,3).substring(0,J)}(En,J);const lr=mt(Ct,Ot.MinusSign);return Sr(En,J,lr,Z,De)}}function an(R,J,B=vt.Format,Z=!1){return function(De,lt){return function Ar(R,J,B,Z,De,lt){switch(B){case An.Months:return function Nt(R,J,B){const Z=(0,w.cg1)(R),lt=Sn([Z[w.wAp.MonthsFormat],Z[w.wAp.MonthsStandalone]],J);return Sn(lt,B)}(J,De,Z)[R.getMonth()];case An.Days:return function pr(R,J,B){const Z=(0,w.cg1)(R),lt=Sn([Z[w.wAp.DaysFormat],Z[w.wAp.DaysStandalone]],J);return Sn(lt,B)}(J,De,Z)[R.getDay()];case An.DayPeriods:const Ct=R.getHours(),En=R.getMinutes();if(lt){const yr=function Bn(R){const J=(0,w.cg1)(R);return dn(J),(J[w.wAp.ExtraData][2]||[]).map(Z=>"string"==typeof Z?jn(Z):[jn(Z[0]),jn(Z[1])])}(J),hr=function ur(R,J,B){const Z=(0,w.cg1)(R);dn(Z);const lt=Sn([Z[w.wAp.ExtraData][0],Z[w.wAp.ExtraData][1]],J)||[];return Sn(lt,B)||[]}(J,De,Z),Xn=yr.findIndex(Ti=>{if(Array.isArray(Ti)){const[mi,Gi]=Ti,qi=Ct>=mi.hours&&En>=mi.minutes,Un=Ct<Gi.hours||Ct===Gi.hours&&En<Gi.minutes;if(mi.hours<Gi.hours){if(qi&&Un)return!0}else if(qi||Un)return!0}else if(Ti.hours===Ct&&Ti.minutes===En)return!0;return!1});if(-1!==Xn)return hr[Xn]}return function kn(R,J,B){const Z=(0,w.cg1)(R),lt=Sn([Z[w.wAp.DayPeriodsFormat],Z[w.wAp.DayPeriodsStandalone]],J);return Sn(lt,B)}(J,De,Z)[Ct<12?0:1];case An.Eras:return function Jn(R,J){return Sn((0,w.cg1)(R)[w.wAp.Eras],J)}(J,Z)[R.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${B}`)}}(De,lt,R,J,B,Z)}}function zi(R){return function(J,B,Z){const De=-1*Z,lt=mt(B,Ot.MinusSign),Ct=De>0?Math.floor(De/60):Math.ceil(De/60);switch(R){case gn.Short:return(De>=0?"+":"")+Sr(Ct,2,lt)+Sr(Math.abs(De%60),2,lt);case gn.ShortGMT:return"GMT"+(De>=0?"+":"")+Sr(Ct,1,lt);case gn.Long:return"GMT"+(De>=0?"+":"")+Sr(Ct,2,lt)+":"+Sr(Math.abs(De%60),2,lt);case gn.Extended:return 0===Z?"Z":(De>=0?"+":"")+Sr(Ct,2,lt)+":"+Sr(Math.abs(De%60),2,lt);default:throw new Error(`Unknown zone width "${R}"`)}}}const vi=0,Ei=4;function Dn(R){return Or(R.getFullYear(),R.getMonth(),R.getDate()+(Ei-R.getDay()))}function Br(R,J=!1){return function(B,Z){let De;if(J){const lt=new Date(B.getFullYear(),B.getMonth(),1).getDay()-1,Ct=B.getDate();De=1+Math.floor((Ct+lt)/7)}else{const lt=Dn(B),Ct=function Vr(R){const J=Or(R,vi,1).getDay();return Or(R,0,1+(J<=Ei?Ei:Ei+7)-J)}(lt.getFullYear()),En=lt.getTime()-Ct.getTime();De=1+Math.round(En/6048e5)}return Sr(De,R,mt(Z,Ot.MinusSign))}}function nr(R,J=!1){return function(B,Z){return Sr(Dn(B).getFullYear(),R,mt(Z,Ot.MinusSign),J)}}const vr={};function Qr(R,J){R=R.replace(/:/g,"");const B=Date.parse("Jan 01, 1970 00:00:00 "+R)/6e4;return isNaN(B)?J:B}function ie(R){return R instanceof Date&&!isNaN(R.valueOf())}function Hi(R,J){J=encodeURIComponent(J);for(const B of R.split(";")){const Z=B.indexOf("="),[De,lt]=-1==Z?[B,""]:[B.slice(0,Z),B.slice(Z+1)];if(De.trim()===J)return decodeURIComponent(lt)}return null}const es=/\s+/,wr=[];let Cr=(()=>{class R{constructor(B,Z,De,lt){this._iterableDiffers=B,this._keyValueDiffers=Z,this._ngEl=De,this._renderer=lt,this.initialClasses=wr,this.stateMap=new Map}set klass(B){this.initialClasses=null!=B?B.trim().split(es):wr}set ngClass(B){this.rawClass="string"==typeof B?B.trim().split(es):B}ngDoCheck(){for(const Z of this.initialClasses)this._updateState(Z,!0);const B=this.rawClass;if(Array.isArray(B)||B instanceof Set)for(const Z of B)this._updateState(Z,!0);else if(null!=B)for(const Z of Object.keys(B))this._updateState(Z,!!B[Z]);this._applyStateDiff()}_updateState(B,Z){const De=this.stateMap.get(B);void 0!==De?(De.enabled!==Z&&(De.changed=!0,De.enabled=Z),De.touched=!0):this.stateMap.set(B,{enabled:Z,changed:!0,touched:!0})}_applyStateDiff(){for(const B of this.stateMap){const Z=B[0],De=B[1];De.changed?(this._toggleClass(Z,De.enabled),De.changed=!1):De.touched||(De.enabled&&this._toggleClass(Z,!1),this.stateMap.delete(Z)),De.touched=!1}}_toggleClass(B,Z){(B=B.trim()).length>0&&B.split(es).forEach(De=>{Z?this._renderer.addClass(this._ngEl.nativeElement,De):this._renderer.removeClass(this._ngEl.nativeElement,De)})}static#e=this.\u0275fac=function(Z){return new(Z||R)(w.Y36(w.ZZ4),w.Y36(w.aQg),w.Y36(w.SBq),w.Y36(w.Qsj))};static#t=this.\u0275dir=w.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return R})();class Mi{constructor(J,B,Z,De){this.$implicit=J,this.ngForOf=B,this.index=Z,this.count=De}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ls=(()=>{class R{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,Z,De){this._viewContainer=B,this._template=Z,this._differs=De,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const Z=this._viewContainer;B.forEachOperation((De,lt,Ct)=>{if(null==De.previousIndex)Z.createEmbeddedView(this._template,new Mi(De.item,this._ngForOf,-1,-1),null===Ct?void 0:Ct);else if(null==Ct)Z.remove(null===lt?void 0:lt);else if(null!==lt){const En=Z.get(lt);Z.move(En,Ct),so(En,De)}});for(let De=0,lt=Z.length;De<lt;De++){const En=Z.get(De).context;En.index=De,En.count=lt,En.ngForOf=this._ngForOf}B.forEachIdentityChange(De=>{so(Z.get(De.currentIndex),De)})}static ngTemplateContextGuard(B,Z){return!0}static#e=this.\u0275fac=function(Z){return new(Z||R)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))};static#t=this.\u0275dir=w.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return R})();function so(R,J){R.context.$implicit=J.item}let Bs=(()=>{class R{constructor(B,Z){this._viewContainer=B,this._context=new gs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Z}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){Xs("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){Xs("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,Z){return!0}static#e=this.\u0275fac=function(Z){return new(Z||R)(w.Y36(w.s_b),w.Y36(w.Rgc))};static#t=this.\u0275dir=w.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return R})();class gs{constructor(){this.$implicit=null,this.ngIf=null}}function Xs(R,J){if(J&&!J.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,w.AaK)(J)}'.`)}const pt=new w.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Qt=new w.OlP("DATE_PIPE_DEFAULT_OPTIONS");let vn=(()=>{class R{constructor(B,Z,De){this.locale=B,this.defaultTimezone=Z,this.defaultOptions=De}transform(B,Z,De,lt){if(null==B||""===B||B!=B)return null;try{return cr(B,Z??this.defaultOptions?.dateFormat??"mediumDate",lt||this.locale,De??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(Ct){throw function se(R,J){return new w.vHH(2100,!1)}()}}static#e=this.\u0275fac=function(Z){return new(Z||R)(w.Y36(w.soG,16),w.Y36(pt,24),w.Y36(Qt,24))};static#t=this.\u0275pipe=w.Yjl({name:"date",type:R,pure:!0,standalone:!0})}return R})(),ys=(()=>{class R{static#e=this.\u0275fac=function(Z){return new(Z||R)};static#t=this.\u0275mod=w.oAB({type:R});static#n=this.\u0275inj=w.cJS({})}return R})();const xo="browser",Rs="server";function Io(R){return R===xo}function oo(R){return R===Rs}let Cs=(()=>{class R{static#e=this.\u0275prov=(0,w.Yz7)({token:R,providedIn:"root",factory:()=>new Vi((0,w.LFG)(Ge),window)})}return R})();class Vi{constructor(J,B){this.document=J,this.window=B,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const B=function Do(R,J){const B=R.getElementById(J)||R.getElementsByName(J)[0];if(B)return B;if("function"==typeof R.createTreeWalker&&R.body&&"function"==typeof R.body.attachShadow){const Z=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let De=Z.currentNode;for(;De;){const lt=De.shadowRoot;if(lt){const Ct=lt.getElementById(J)||lt.querySelector(`[name="${J}"]`);if(Ct)return Ct}De=Z.nextNode()}}return null}(this.document,J);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(J){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=J)}}scrollToElement(J){const B=J.getBoundingClientRect(),Z=B.left+this.window.pageXOffset,De=B.top+this.window.pageYOffset,lt=this.offset();this.window.scrollTo(Z-lt[0],De-lt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const J=ns(this.window.history)||ns(Object.getPrototypeOf(this.window.history));return!(!J||!J.writable&&!J.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ns(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class rs{}},9862:(nn,it,U)=>{U.d(it,{JF:()=>le,eN:()=>ge});var w=U(5879),ne=U(2096),S=U(2459),fe=U(5592),Pe=U(6328),Ge=U(2181),Ve=U(7398),Ke=U(4716),$e=U(4664),pe=U(6814);class ye{}class Re{}class It{constructor(Fe){this.normalizedNames=new Map,this.lazyUpdate=null,Fe?"string"==typeof Fe?this.lazyInit=()=>{this.headers=new Map,Fe.split("\n").forEach(je=>{const Te=je.indexOf(":");if(Te>0){const Ne=je.slice(0,Te),Ye=Ne.toLowerCase(),Et=je.slice(Te+1).trim();this.maybeSetNormalizedName(Ne,Ye),this.headers.has(Ye)?this.headers.get(Ye).push(Et):this.headers.set(Ye,[Et])}})}:typeof Headers<"u"&&Fe instanceof Headers?(this.headers=new Map,Fe.forEach((je,Te)=>{this.setHeaderEntries(Te,je)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(Fe).forEach(([je,Te])=>{this.setHeaderEntries(je,Te)})}:this.headers=new Map}has(Fe){return this.init(),this.headers.has(Fe.toLowerCase())}get(Fe){this.init();const je=this.headers.get(Fe.toLowerCase());return je&&je.length>0?je[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Fe){return this.init(),this.headers.get(Fe.toLowerCase())||null}append(Fe,je){return this.clone({name:Fe,value:je,op:"a"})}set(Fe,je){return this.clone({name:Fe,value:je,op:"s"})}delete(Fe,je){return this.clone({name:Fe,value:je,op:"d"})}maybeSetNormalizedName(Fe,je){this.normalizedNames.has(je)||this.normalizedNames.set(je,Fe)}init(){this.lazyInit&&(this.lazyInit instanceof It?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Fe=>this.applyUpdate(Fe)),this.lazyUpdate=null))}copyFrom(Fe){Fe.init(),Array.from(Fe.headers.keys()).forEach(je=>{this.headers.set(je,Fe.headers.get(je)),this.normalizedNames.set(je,Fe.normalizedNames.get(je))})}clone(Fe){const je=new It;return je.lazyInit=this.lazyInit&&this.lazyInit instanceof It?this.lazyInit:this,je.lazyUpdate=(this.lazyUpdate||[]).concat([Fe]),je}applyUpdate(Fe){const je=Fe.name.toLowerCase();switch(Fe.op){case"a":case"s":let Te=Fe.value;if("string"==typeof Te&&(Te=[Te]),0===Te.length)return;this.maybeSetNormalizedName(Fe.name,je);const Ne=("a"===Fe.op?this.headers.get(je):void 0)||[];Ne.push(...Te),this.headers.set(je,Ne);break;case"d":const Ye=Fe.value;if(Ye){let Et=this.headers.get(je);if(!Et)return;Et=Et.filter(ln=>-1===Ye.indexOf(ln)),0===Et.length?(this.headers.delete(je),this.normalizedNames.delete(je)):this.headers.set(je,Et)}else this.headers.delete(je),this.normalizedNames.delete(je)}}setHeaderEntries(Fe,je){const Te=(Array.isArray(je)?je:[je]).map(Ye=>Ye.toString()),Ne=Fe.toLowerCase();this.headers.set(Ne,Te),this.maybeSetNormalizedName(Fe,Ne)}forEach(Fe){this.init(),Array.from(this.normalizedNames.keys()).forEach(je=>Fe(this.normalizedNames.get(je),this.headers.get(je)))}}class $t{encodeKey(Fe){return ze(Fe)}encodeValue(Fe){return ze(Fe)}decodeKey(Fe){return decodeURIComponent(Fe)}decodeValue(Fe){return decodeURIComponent(Fe)}}const Vt=/%(\d[a-f0-9])/gi,xt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ze(Je){return encodeURIComponent(Je).replace(Vt,(Fe,je)=>xt[je]??Fe)}function Lt(Je){return`${Je}`}class _e{constructor(Fe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Fe.encoder||new $t,Fe.fromString){if(Fe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Tt(Je,Fe){const je=new Map;return Je.length>0&&Je.replace(/^\?/,"").split("&").forEach(Ne=>{const Ye=Ne.indexOf("="),[Et,ln]=-1==Ye?[Fe.decodeKey(Ne),""]:[Fe.decodeKey(Ne.slice(0,Ye)),Fe.decodeValue(Ne.slice(Ye+1))],Zt=je.get(Et)||[];Zt.push(ln),je.set(Et,Zt)}),je}(Fe.fromString,this.encoder)}else Fe.fromObject?(this.map=new Map,Object.keys(Fe.fromObject).forEach(je=>{const Te=Fe.fromObject[je],Ne=Array.isArray(Te)?Te.map(Lt):[Lt(Te)];this.map.set(je,Ne)})):this.map=null}has(Fe){return this.init(),this.map.has(Fe)}get(Fe){this.init();const je=this.map.get(Fe);return je?je[0]:null}getAll(Fe){return this.init(),this.map.get(Fe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Fe,je){return this.clone({param:Fe,value:je,op:"a"})}appendAll(Fe){const je=[];return Object.keys(Fe).forEach(Te=>{const Ne=Fe[Te];Array.isArray(Ne)?Ne.forEach(Ye=>{je.push({param:Te,value:Ye,op:"a"})}):je.push({param:Te,value:Ne,op:"a"})}),this.clone(je)}set(Fe,je){return this.clone({param:Fe,value:je,op:"s"})}delete(Fe,je){return this.clone({param:Fe,value:je,op:"d"})}toString(){return this.init(),this.keys().map(Fe=>{const je=this.encoder.encodeKey(Fe);return this.map.get(Fe).map(Te=>je+"="+this.encoder.encodeValue(Te)).join("&")}).filter(Fe=>""!==Fe).join("&")}clone(Fe){const je=new _e({encoder:this.encoder});return je.cloneFrom=this.cloneFrom||this,je.updates=(this.updates||[]).concat(Fe),je}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Fe=>this.map.set(Fe,this.cloneFrom.map.get(Fe))),this.updates.forEach(Fe=>{switch(Fe.op){case"a":case"s":const je=("a"===Fe.op?this.map.get(Fe.param):void 0)||[];je.push(Lt(Fe.value)),this.map.set(Fe.param,je);break;case"d":if(void 0===Fe.value){this.map.delete(Fe.param);break}{let Te=this.map.get(Fe.param)||[];const Ne=Te.indexOf(Lt(Fe.value));-1!==Ne&&Te.splice(Ne,1),Te.length>0?this.map.set(Fe.param,Te):this.map.delete(Fe.param)}}}),this.cloneFrom=this.updates=null)}}class Be{constructor(){this.map=new Map}set(Fe,je){return this.map.set(Fe,je),this}get(Fe){return this.map.has(Fe)||this.map.set(Fe,Fe.defaultValue()),this.map.get(Fe)}delete(Fe){return this.map.delete(Fe),this}has(Fe){return this.map.has(Fe)}keys(){return this.map.keys()}}function vt(Je){return typeof ArrayBuffer<"u"&&Je instanceof ArrayBuffer}function Xe(Je){return typeof Blob<"u"&&Je instanceof Blob}function ot(Je){return typeof FormData<"u"&&Je instanceof FormData}class Yt{constructor(Fe,je,Te,Ne){let Ye;if(this.url=je,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Fe.toUpperCase(),function gt(Je){switch(Je){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ne?(this.body=void 0!==Te?Te:null,Ye=Ne):Ye=Te,Ye&&(this.reportProgress=!!Ye.reportProgress,this.withCredentials=!!Ye.withCredentials,Ye.responseType&&(this.responseType=Ye.responseType),Ye.headers&&(this.headers=Ye.headers),Ye.context&&(this.context=Ye.context),Ye.params&&(this.params=Ye.params)),this.headers||(this.headers=new It),this.context||(this.context=new Be),this.params){const Et=this.params.toString();if(0===Et.length)this.urlWithParams=je;else{const ln=je.indexOf("?");this.urlWithParams=je+(-1===ln?"?":ln<je.length-1?"&":"")+Et}}else this.params=new _e,this.urlWithParams=je}serializeBody(){return null===this.body?null:vt(this.body)||Xe(this.body)||ot(this.body)||function Ot(Je){return typeof URLSearchParams<"u"&&Je instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof _e?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ot(this.body)?null:Xe(this.body)?this.body.type||null:vt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _e?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Fe={}){const je=Fe.method||this.method,Te=Fe.url||this.url,Ne=Fe.responseType||this.responseType,Ye=void 0!==Fe.body?Fe.body:this.body,Et=void 0!==Fe.withCredentials?Fe.withCredentials:this.withCredentials,ln=void 0!==Fe.reportProgress?Fe.reportProgress:this.reportProgress;let Zt=Fe.headers||this.headers,Mn=Fe.params||this.params;const gr=Fe.context??this.context;return void 0!==Fe.setHeaders&&(Zt=Object.keys(Fe.setHeaders).reduce((dr,jr)=>dr.set(jr,Fe.setHeaders[jr]),Zt)),Fe.setParams&&(Mn=Object.keys(Fe.setParams).reduce((dr,jr)=>dr.set(jr,Fe.setParams[jr]),Mn)),new Yt(je,Te,Ye,{params:Mn,headers:Zt,context:gr,reportProgress:ln,responseType:Ne,withCredentials:Et})}}var Cn=function(Je){return Je[Je.Sent=0]="Sent",Je[Je.UploadProgress=1]="UploadProgress",Je[Je.ResponseHeader=2]="ResponseHeader",Je[Je.DownloadProgress=3]="DownloadProgress",Je[Je.Response=4]="Response",Je[Je.User=5]="User",Je}(Cn||{});class kn{constructor(Fe,je=200,Te="OK"){this.headers=Fe.headers||new It,this.status=void 0!==Fe.status?Fe.status:je,this.statusText=Fe.statusText||Te,this.url=Fe.url||null,this.ok=this.status>=200&&this.status<300}}class pr extends kn{constructor(Fe={}){super(Fe),this.type=Cn.ResponseHeader}clone(Fe={}){return new pr({headers:Fe.headers||this.headers,status:void 0!==Fe.status?Fe.status:this.status,statusText:Fe.statusText||this.statusText,url:Fe.url||this.url||void 0})}}class Nt extends kn{constructor(Fe={}){super(Fe),this.type=Cn.Response,this.body=void 0!==Fe.body?Fe.body:null}clone(Fe={}){return new Nt({body:void 0!==Fe.body?Fe.body:this.body,headers:Fe.headers||this.headers,status:void 0!==Fe.status?Fe.status:this.status,statusText:Fe.statusText||this.statusText,url:Fe.url||this.url||void 0})}}class Jn extends kn{constructor(Fe){super(Fe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Fe.url||"(unknown url)"}`:`Http failure response for ${Fe.url||"(unknown url)"}: ${Fe.status} ${Fe.statusText}`,this.error=Fe.error||null}}function xe(Je,Fe){return{body:Fe,headers:Je.headers,context:Je.context,observe:Je.observe,params:Je.params,reportProgress:Je.reportProgress,responseType:Je.responseType,withCredentials:Je.withCredentials}}let ge=(()=>{class Je{constructor(je){this.handler=je}request(je,Te,Ne={}){let Ye;if(je instanceof Yt)Ye=je;else{let Zt,Mn;Zt=Ne.headers instanceof It?Ne.headers:new It(Ne.headers),Ne.params&&(Mn=Ne.params instanceof _e?Ne.params:new _e({fromObject:Ne.params})),Ye=new Yt(je,Te,void 0!==Ne.body?Ne.body:null,{headers:Zt,context:Ne.context,params:Mn,reportProgress:Ne.reportProgress,responseType:Ne.responseType||"json",withCredentials:Ne.withCredentials})}const Et=(0,ne.of)(Ye).pipe((0,Pe.b)(Zt=>this.handler.handle(Zt)));if(je instanceof Yt||"events"===Ne.observe)return Et;const ln=Et.pipe((0,Ge.h)(Zt=>Zt instanceof Nt));switch(Ne.observe||"body"){case"body":switch(Ye.responseType){case"arraybuffer":return ln.pipe((0,Ve.U)(Zt=>{if(null!==Zt.body&&!(Zt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Zt.body}));case"blob":return ln.pipe((0,Ve.U)(Zt=>{if(null!==Zt.body&&!(Zt.body instanceof Blob))throw new Error("Response is not a Blob.");return Zt.body}));case"text":return ln.pipe((0,Ve.U)(Zt=>{if(null!==Zt.body&&"string"!=typeof Zt.body)throw new Error("Response is not a string.");return Zt.body}));default:return ln.pipe((0,Ve.U)(Zt=>Zt.body))}case"response":return ln;default:throw new Error(`Unreachable: unhandled observe type ${Ne.observe}}`)}}delete(je,Te={}){return this.request("DELETE",je,Te)}get(je,Te={}){return this.request("GET",je,Te)}head(je,Te={}){return this.request("HEAD",je,Te)}jsonp(je,Te){return this.request("JSONP",je,{params:(new _e).append(Te,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(je,Te={}){return this.request("OPTIONS",je,Te)}patch(je,Te,Ne={}){return this.request("PATCH",je,xe(Ne,Te))}post(je,Te,Ne={}){return this.request("POST",je,xe(Ne,Te))}put(je,Te,Ne={}){return this.request("PUT",je,xe(Ne,Te))}static#e=this.\u0275fac=function(Te){return new(Te||Je)(w.LFG(ye))};static#t=this.\u0275prov=w.Yz7({token:Je,factory:Je.\u0275fac})}return Je})();function Nn(Je,Fe){return Fe(Je)}function pn(Je,Fe){return(je,Te)=>Fe.intercept(je,{handle:Ne=>Je(Ne,Te)})}const dn=new w.OlP(""),Bn=new w.OlP(""),ur=new w.OlP("");function fn(){let Je=null;return(Fe,je)=>{null===Je&&(Je=((0,w.f3M)(dn,{optional:!0})??[]).reduceRight(pn,Nn));const Te=(0,w.f3M)(w.HDt),Ne=Te.add();return Je(Fe,je).pipe((0,Ke.x)(()=>Te.remove(Ne)))}}let Sn=(()=>{class Je extends ye{constructor(je,Te){super(),this.backend=je,this.injector=Te,this.chain=null,this.pendingTasks=(0,w.f3M)(w.HDt)}handle(je){if(null===this.chain){const Ne=Array.from(new Set([...this.injector.get(Bn),...this.injector.get(ur,[])]));this.chain=Ne.reduceRight((Ye,Et)=>function Vn(Je,Fe,je){return(Te,Ne)=>je.runInContext(()=>Fe(Te,Ye=>Je(Ye,Ne)))}(Ye,Et,this.injector),Nn)}const Te=this.pendingTasks.add();return this.chain(je,Ne=>this.backend.handle(Ne)).pipe((0,Ke.x)(()=>this.pendingTasks.remove(Te)))}static#e=this.\u0275fac=function(Te){return new(Te||Je)(w.LFG(Re),w.LFG(w.lqb))};static#t=this.\u0275prov=w.Yz7({token:Je,factory:Je.\u0275fac})}return Je})();const Or=/^\)\]\}',?\n/;let Yn=(()=>{class Je{constructor(je){this.xhrFactory=je}handle(je){if("JSONP"===je.method)throw new w.vHH(-2800,!1);const Te=this.xhrFactory;return(Te.\u0275loadImpl?(0,S.D)(Te.\u0275loadImpl()):(0,ne.of)(null)).pipe((0,$e.w)(()=>new fe.y(Ye=>{const Et=Te.build();if(Et.open(je.method,je.urlWithParams),je.withCredentials&&(Et.withCredentials=!0),je.headers.forEach((wr,Cr)=>Et.setRequestHeader(wr,Cr.join(","))),je.headers.has("Accept")||Et.setRequestHeader("Accept","application/json, text/plain, */*"),!je.headers.has("Content-Type")){const wr=je.detectContentTypeHeader();null!==wr&&Et.setRequestHeader("Content-Type",wr)}if(je.responseType){const wr=je.responseType.toLowerCase();Et.responseType="json"!==wr?wr:"text"}const ln=je.serializeBody();let Zt=null;const Mn=()=>{if(null!==Zt)return Zt;const wr=Et.statusText||"OK",Cr=new It(Et.getAllResponseHeaders()),ts=function _i(Je){return"responseURL"in Je&&Je.responseURL?Je.responseURL:/^X-Request-URL:/m.test(Je.getAllResponseHeaders())?Je.getResponseHeader("X-Request-URL"):null}(Et)||je.url;return Zt=new pr({headers:Cr,status:Et.status,statusText:wr,url:ts}),Zt},gr=()=>{let{headers:wr,status:Cr,statusText:ts,url:wi}=Mn(),Mi=null;204!==Cr&&(Mi=typeof Et.response>"u"?Et.responseText:Et.response),0===Cr&&(Cr=Mi?200:0);let ls=Cr>=200&&Cr<300;if("json"===je.responseType&&"string"==typeof Mi){const so=Mi;Mi=Mi.replace(Or,"");try{Mi=""!==Mi?JSON.parse(Mi):null}catch(Mr){Mi=so,ls&&(ls=!1,Mi={error:Mr,text:Mi})}}ls?(Ye.next(new Nt({body:Mi,headers:wr,status:Cr,statusText:ts,url:wi||void 0})),Ye.complete()):Ye.error(new Jn({error:Mi,headers:wr,status:Cr,statusText:ts,url:wi||void 0}))},dr=wr=>{const{url:Cr}=Mn(),ts=new Jn({error:wr,status:Et.status||0,statusText:Et.statusText||"Unknown Error",url:Cr||void 0});Ye.error(ts)};let jr=!1;const Hi=wr=>{jr||(Ye.next(Mn()),jr=!0);let Cr={type:Cn.DownloadProgress,loaded:wr.loaded};wr.lengthComputable&&(Cr.total=wr.total),"text"===je.responseType&&Et.responseText&&(Cr.partialText=Et.responseText),Ye.next(Cr)},es=wr=>{let Cr={type:Cn.UploadProgress,loaded:wr.loaded};wr.lengthComputable&&(Cr.total=wr.total),Ye.next(Cr)};return Et.addEventListener("load",gr),Et.addEventListener("error",dr),Et.addEventListener("timeout",dr),Et.addEventListener("abort",dr),je.reportProgress&&(Et.addEventListener("progress",Hi),null!==ln&&Et.upload&&Et.upload.addEventListener("progress",es)),Et.send(ln),Ye.next({type:Cn.Sent}),()=>{Et.removeEventListener("error",dr),Et.removeEventListener("abort",dr),Et.removeEventListener("load",gr),Et.removeEventListener("timeout",dr),je.reportProgress&&(Et.removeEventListener("progress",Hi),null!==ln&&Et.upload&&Et.upload.removeEventListener("progress",es)),Et.readyState!==Et.DONE&&Et.abort()}})))}static#e=this.\u0275fac=function(Te){return new(Te||Je)(w.LFG(pe.JF))};static#t=this.\u0275prov=w.Yz7({token:Je,factory:Je.\u0275fac})}return Je})();const Sr=new w.OlP("XSRF_ENABLED"),rr=new w.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),an=new w.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Ar{}let zi=(()=>{class Je{constructor(je,Te,Ne){this.doc=je,this.platform=Te,this.cookieName=Ne,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const je=this.doc.cookie||"";return je!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,pe.Mx)(je,this.cookieName),this.lastCookieString=je),this.lastToken}static#e=this.\u0275fac=function(Te){return new(Te||Je)(w.LFG(pe.K0),w.LFG(w.Lbi),w.LFG(rr))};static#t=this.\u0275prov=w.Yz7({token:Je,factory:Je.\u0275fac})}return Je})();function vi(Je,Fe){const je=Je.url.toLowerCase();if(!(0,w.f3M)(Sr)||"GET"===Je.method||"HEAD"===Je.method||je.startsWith("http://")||je.startsWith("https://"))return Fe(Je);const Te=(0,w.f3M)(Ar).getToken(),Ne=(0,w.f3M)(an);return null!=Te&&!Je.headers.has(Ne)&&(Je=Je.clone({headers:Je.headers.set(Ne,Te)})),Fe(Je)}var Vr=function(Je){return Je[Je.Interceptors=0]="Interceptors",Je[Je.LegacyInterceptors=1]="LegacyInterceptors",Je[Je.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Je[Je.NoXsrfProtection=3]="NoXsrfProtection",Je[Je.JsonpSupport=4]="JsonpSupport",Je[Je.RequestsMadeViaParent=5]="RequestsMadeViaParent",Je[Je.Fetch=6]="Fetch",Je}(Vr||{});function Br(...Je){const Fe=[ge,Yn,Sn,{provide:ye,useExisting:Sn},{provide:Re,useExisting:Yn},{provide:Bn,useValue:vi,multi:!0},{provide:Sr,useValue:!0},{provide:Ar,useClass:zi}];for(const je of Je)Fe.push(...je.\u0275providers);return(0,w.MR2)(Fe)}const vr=new w.OlP("LEGACY_INTERCEPTOR_FN");function Hn(){return function Dn(Je,Fe){return{\u0275kind:Je,\u0275providers:Fe}}(Vr.LegacyInterceptors,[{provide:vr,useFactory:fn},{provide:Bn,useExisting:vr,multi:!0}])}let le=(()=>{class Je{static#e=this.\u0275fac=function(Te){return new(Te||Je)};static#t=this.\u0275mod=w.oAB({type:Je});static#n=this.\u0275inj=w.cJS({providers:[Br(Hn())]})}return Je})()},5879:(nn,it,U)=>{U.d(it,{$8M:()=>Da,$WT:()=>St,$Z:()=>V_,AFp:()=>Ra,ALo:()=>g0,AaK:()=>Re,AsE:()=>ov,CHM:()=>Iu,CRH:()=>R0,EJc:()=>Ub,EpF:()=>Zf,F4k:()=>Gh,FYo:()=>sm,FiY:()=>Ji,G48:()=>lD,GfV:()=>x_,Gpc:()=>$t,HDt:()=>X0,JOm:()=>_h,KtG:()=>Bo,LFG:()=>Hn,LSH:()=>Zm,Lbi:()=>Zg,Lck:()=>CI,MAs:()=>Mm,MMx:()=>e0,MR2:()=>sd,NdJ:()=>Jy,Ojb:()=>b_,OlP:()=>fi,Oqu:()=>o_,P3R:()=>Xm,PXZ:()=>eD,Q6J:()=>_g,QGY:()=>Dc,QbO:()=>Dh,Qsj:()=>ay,R0b:()=>ql,RDi:()=>g_,Rgc:()=>Xv,SBq:()=>ud,Sil:()=>Hb,Suo:()=>M0,TTD:()=>gi,TgZ:()=>zf,Tol:()=>Li,VuI:()=>kD,WLB:()=>l0,X6Q:()=>uD,XFs:()=>gn,Xpm:()=>Ci,Xq5:()=>jy,Xts:()=>wp,Y36:()=>ll,YKP:()=>Xw,YNc:()=>ku,Yjl:()=>he,Yz7:()=>dn,Z0I:()=>Sn,ZZ4:()=>Mw,_Bn:()=>Qw,_UZ:()=>qf,_Vd:()=>Cf,_c5:()=>DD,_uU:()=>UE,aQg:()=>Rw,c2e:()=>Q0,cJS:()=>ur,cg1:()=>Gv,dDg:()=>Yb,dqk:()=>Yn,eFA:()=>hC,eJc:()=>fw,ekj:()=>Wn,eoX:()=>uC,f3M:()=>Qn,g9A:()=>bp,h0i:()=>lv,hGG:()=>TD,hij:()=>a_,iGM:()=>A0,ifc:()=>Pn,ip1:()=>Y0,jDz:()=>t0,kL8:()=>zv,lG2:()=>ee,lcZ:()=>m0,lqb:()=>ul,lri:()=>oC,n5z:()=>tp,oAB:()=>Fi,oxw:()=>wg,q4F:()=>om,qFp:()=>FD,qLn:()=>ld,qOj:()=>Na,qZA:()=>Wf,rWj:()=>aC,rg0:()=>Eu,s9C:()=>e_,sBO:()=>cD,s_b:()=>TE,soG:()=>AE,tb:()=>Iw,tp0:()=>ph,uIk:()=>Dm,vHH:()=>_e,vpe:()=>Xf,wAp:()=>Ag,xi3:()=>y0,xp6:()=>Bp,z2F:()=>hv,zSh:()=>cu,zs3:()=>Xd});var w=U(8645),ne=U(7394),S=U(5619),fe=U(5592),Pe=U(3019),Ge=U(2096),Ve=U(3020),Ke=U(4664),$e=U(3997);function pe(n){for(let r in n)if(n[r]===pe)return r;throw Error("Could not find renamed property on target object.")}function ye(n,r){for(const u in r)r.hasOwnProperty(u)&&!n.hasOwnProperty(u)&&(n[u]=r[u])}function Re(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Re).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const u=r.indexOf("\n");return-1===u?r:r.substring(0,u)}function It(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const yt=pe({__forward_ref__:pe});function $t(n){return n.__forward_ref__=$t,n.toString=function(){return Re(this())},n}function Tt(n){return Vt(n)?n():n}function Vt(n){return"function"==typeof n&&n.hasOwnProperty(yt)&&n.__forward_ref__===$t}function xt(n){return n&&!!n.\u0275providers}const Lt="https://g.co/ng/security#xss";class _e extends Error{constructor(r,u){super(function et(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,u)),this.code=r}}function Be(n){return"string"==typeof n?n:null==n?"":String(n)}function Ot(n,r){throw new _e(-201,!1)}function jt(n,r){null==n&&function Jt(n,r,u,h){throw new Error(`ASSERTION ERROR: ${n}`+(null==h?"":` [Expected=> ${u} ${h} ${r} <=Actual]`))}(r,n,null,"!=")}function dn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ur(n){return{providers:n.providers||[],imports:n.imports||[]}}function fn(n){return jn(n,ji)||jn(n,Ai)}function Sn(n){return null!==fn(n)}function jn(n,r){return n.hasOwnProperty(r)?n[r]:null}function ws(n){return n&&(n.hasOwnProperty(Kr)||n.hasOwnProperty(yi))?n[Kr]:null}const ji=pe({\u0275prov:pe}),Kr=pe({\u0275inj:pe}),Ai=pe({ngInjectableDef:pe}),yi=pe({ngInjectorDef:pe});var gn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(gn||{});let zn;function cr(n){const r=zn;return zn=n,r}function Or(n,r,u){const h=fn(n);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&gn.Optional?null:void 0!==r?r:void Ot(Re(n))}const Yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Fr={},an="__NG_DI_FLAG__",Ar="ngTempTokenPath",vi=/\n/gm,Vr="__source";let Dn;function nr(n){const r=Dn;return Dn=n,r}function vr(n,r=gn.Default){if(void 0===Dn)throw new _e(-203,!1);return null===Dn?Or(n,void 0,r):Dn.get(n,r&gn.Optional?null:void 0,r)}function Hn(n,r=gn.Default){return(function An(){return zn}()||vr)(Tt(n),r)}function Qn(n,r=gn.Default){return Hn(n,Oe(r))}function Oe(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function re(n){const r=[];for(let u=0;u<n.length;u++){const h=Tt(n[u]);if(Array.isArray(h)){if(0===h.length)throw new _e(900,!1);let f,y=gn.Default;for(let C=0;C<h.length;C++){const M=h[C],k=ie(M);"number"==typeof k?-1===k?f=M.token:y|=k:f=M}r.push(Hn(f,y))}else r.push(Hn(h))}return r}function ae(n,r){return n[an]=r,n.prototype[an]=r,n}function ie(n){return n[an]}function Dt(n){return{toString:n}.toString()}var qt=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(qt||{}),Pn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pn||{});const hn={},Ut=[],Ln=pe({\u0275cmp:pe}),kr=pe({\u0275dir:pe}),Je=pe({\u0275pipe:pe}),Fe=pe({\u0275mod:pe}),je=pe({\u0275fac:pe}),Te=pe({__NG_ELEMENT_ID__:pe}),Ne=pe({__NG_ENV_ID__:pe});function Ye(n,r,u){let h=n.length;for(;;){const f=n.indexOf(r,u);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=r.length;if(f+y===h||n.charCodeAt(f+y)<=32)return f}u=f+1}}function Et(n,r,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const y=u[h++],C=u[h++],M=u[h++];n.setAttribute(r,C,M,y)}else{const y=f,C=u[++h];Zt(y)?n.setProperty(r,y,C):n.setAttribute(r,y,C),h++}}return h}function ln(n){return 3===n||4===n||6===n}function Zt(n){return 64===n.charCodeAt(0)}function Mn(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let u=-1;for(let h=0;h<r.length;h++){const f=r[h];"number"==typeof f?u=f:0===u||gr(n,u,f,null,-1===u||2===u?r[++h]:null)}}return n}function gr(n,r,u,h,f){let y=0,C=n.length;if(-1===r)C=-1;else for(;y<n.length;){const M=n[y++];if("number"==typeof M){if(M===r){C=-1;break}if(M>r){C=y-1;break}}}for(;y<n.length;){const M=n[y];if("number"==typeof M)break;if(M===u){if(null===h)return void(null!==f&&(n[y+1]=f));if(h===n[y+1])return void(n[y+2]=f)}y++,null!==h&&y++,null!==f&&y++}-1!==C&&(n.splice(C,0,r),y=C+1),n.splice(y++,0,u),null!==h&&n.splice(y++,0,h),null!==f&&n.splice(y++,0,f)}const dr="ng-template";function jr(n,r,u){let h=0,f=!0;for(;h<n.length;){let y=n[h++];if("string"==typeof y&&f){const C=n[h++];if(u&&"class"===y&&-1!==Ye(C.toLowerCase(),r,0))return!0}else{if(1===y){for(;h<n.length&&"string"==typeof(y=n[h++]);)if(y.toLowerCase()===r)return!0;return!1}"number"==typeof y&&(f=!1)}}return!1}function Hi(n){return 4===n.type&&n.value!==dr}function es(n,r,u){return r===(4!==n.type||u?n.value:dr)}function wr(n,r,u){let h=4;const f=n.attrs||[],y=function ls(n){for(let r=0;r<n.length;r++)if(ln(n[r]))return r;return n.length}(f);let C=!1;for(let M=0;M<r.length;M++){const k=r[M];if("number"!=typeof k){if(!C)if(4&h){if(h=2|1&h,""!==k&&!es(n,k,u)||""===k&&1===r.length){if(Cr(h))return!1;C=!0}}else{const W=8&h?k:r[++M];if(8&h&&null!==n.attrs){if(!jr(n.attrs,W,u)){if(Cr(h))return!1;C=!0}continue}const ve=ts(8&h?"class":k,f,Hi(n),u);if(-1===ve){if(Cr(h))return!1;C=!0;continue}if(""!==W){let Qe;Qe=ve>y?"":f[ve+1].toLowerCase();const ut=8&h?Qe:null;if(ut&&-1!==Ye(ut,W,0)||2&h&&W!==Qe){if(Cr(h))return!1;C=!0}}}}else{if(!C&&!Cr(h)&&!Cr(k))return!1;if(C&&Cr(k))continue;C=!1,h=k|1&h}}return Cr(h)||C}function Cr(n){return 0==(1&n)}function ts(n,r,u,h){if(null===r)return-1;let f=0;if(h||!u){let y=!1;for(;f<r.length;){const C=r[f];if(C===n)return f;if(3===C||6===C)y=!0;else{if(1===C||2===C){let M=r[++f];for(;"string"==typeof M;)M=r[++f];continue}if(4===C)break;if(0===C){f+=4;continue}}f+=y?1:2}return-1}return function so(n,r){let u=n.indexOf(4);if(u>-1)for(u++;u<n.length;){const h=n[u];if("number"==typeof h)return-1;if(h===r)return u;u++}return-1}(r,n)}function wi(n,r,u=!1){for(let h=0;h<r.length;h++)if(wr(n,r[h],u))return!0;return!1}function Bs(n,r){return n?":not("+r.trim()+")":r}function gs(n){let r=n[0],u=1,h=2,f="",y=!1;for(;u<n.length;){let C=n[u];if("string"==typeof C)if(2&h){const M=n[++u];f+="["+C+(M.length>0?'="'+M+'"':"")+"]"}else 8&h?f+="."+C:4&h&&(f+=" "+C);else""!==f&&!Cr(C)&&(r+=Bs(y,f),f=""),h=C,y=y||!Cr(h);u++}return""!==f&&(r+=Bs(y,f)),r}function Ci(n){return Dt(()=>{const r=zt(n),u={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===qt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pn.Emulated,styles:n.styles||Ut,_:null,schemas:n.schemas||null,tView:null,id:""};we(u);const h=n.dependencies;return u.directiveDefs=Ce(h,!1),u.pipeDefs=Ce(h,!0),u.id=function _t(n){let r=0;const u=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const f of u)r=Math.imul(31,r)+f.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(u),u})}function Os(n){return se(n)||Ie(n)}function Co(n){return null!==n}function Fi(n){return Dt(()=>({type:n.type,bootstrap:n.bootstrap||Ut,declarations:n.declarations||Ut,imports:n.imports||Ut,exports:n.exports||Ut,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ii(n,r){if(null==n)return hn;const u={};for(const h in n)if(n.hasOwnProperty(h)){let f=n[h],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),u[f]=h,r&&(r[f]=y)}return u}function ee(n){return Dt(()=>{const r=zt(n);return we(r),r})}function he(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function se(n){return n[Ln]||null}function Ie(n){return n[kr]||null}function ct(n){return n[Je]||null}function St(n){const r=se(n)||Ie(n)||ct(n);return null!==r&&r.standalone}function Rt(n,r){const u=n[Fe]||null;if(!u&&!0===r)throw new Error(`Type ${Re(n)} does not have '\u0275mod' property.`);return u}function zt(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:n.inputs||hn,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ut,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ii(n.inputs,r),outputs:Ii(n.outputs)}}function we(n){n.features?.forEach(r=>r(n))}function Ce(n,r){if(!n)return null;const u=r?ct:Os;return()=>("function"==typeof n?n():n).map(h=>u(h)).filter(Co)}const bt=0,pt=1,Qt=2,vn=3,qn=4,Hr=5,ai=6,Wi=7,ui=8,Qi=9,cs=10,er=11,ms=12,Hs=13,ds=14,li=15,Po=16,ua=17,ys=18,xo=19,Rs=20,bi=21,Lr=22,Io=23,oo=24,mr=25,bo=1,Cs=2,Vi=7,Do=9,rs=11;function Di(n){return Array.isArray(n)&&"object"==typeof n[bo]}function Is(n){return Array.isArray(n)&&!0===n[bo]}function bs(n){return 0!=(4&n.flags)}function ao(n){return n.componentOffset>-1}function la(n){return 1==(1&n.flags)}function is(n){return!!n.template}function $i(n){return 0!=(512&n[Qt])}function ar(n,r){return n.hasOwnProperty(je)?n[je]:null}let qo=Yn.WeakRef??class Lo{constructor(r){this.ref=r}deref(){return this.ref}},H=0,K=null,L=!1;function Q(n){const r=K;return K=n,r}class Me{constructor(){this.id=H++,this.ref=function Ko(n){return new qo(n)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[r,u]of this.producers){const h=u.producerNode.deref();if(null!=h&&u.atTrackingVersion===this.trackingVersion){if(h.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(r),h?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const r=L;L=!0;try{for(const[u,h]of this.consumers){const f=h.consumerNode.deref();null!=f&&f.trackingVersion===h.atTrackingVersion?f.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),f?.producers.delete(this.id))}}finally{L=r}}producerAccessed(){if(L)throw new Error("");if(null===K)return;let r=K.producers.get(this.id);void 0===r?(r={consumerNode:K.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:K.trackingVersion},K.producers.set(this.id,r),this.consumers.set(K.id,r)):(r.seenValueVersion=this.valueVersion,r.atTrackingVersion=K.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==K?.consumerAllowSignalWrites}producerPollStatus(r){return this.valueVersion!==r||(this.onProducerUpdateValueVersion(),this.valueVersion!==r)}}let ka=null;function Eu(n){const r=Q(null);try{return n()}finally{Q(r)}}const ml=()=>{};class wu extends Me{constructor(r,u,h){super(),this.watch=r,this.schedule=u,this.dirty=!1,this.cleanupFn=ml,this.registerOnCleanup=f=>{this.cleanupFn=f},this.consumerAllowSignalWrites=h}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const r=Q(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ml,this.watch(this.registerOnCleanup)}finally{Q(r)}}cleanup(){this.cleanupFn()}}class Ri{constructor(r,u,h){this.previousValue=r,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function gi(){return eo}function eo(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ac),Ea}function Ea(){const n=Kl(this),r=n?.current;if(r){const u=n.previous;if(u===hn)n.previous=r;else for(let h in r)u[h]=r[h];n.current=null,this.ngOnChanges(r)}}function Ac(n,r,u,h){const f=this.declaredInputs[u],y=Kl(n)||function La(n,r){return n[nu]=r}(n,{previous:hn,current:null}),C=y.current||(y.current={}),M=y.previous,k=M[f];C[f]=new Ri(k&&k.currentValue,r,M===hn),n[h]=r}gi.ngInherit=!0;const nu="__ngSimpleChanges__";function Kl(n){return n[nu]||null}const Vo=function(n,r,u){};function Dr(n){for(;Array.isArray(n);)n=n[bt];return n}function R(n,r){return Dr(r[n])}function J(n,r){return Dr(r[n.index])}function Z(n,r){return n.data[r]}function De(n,r){return n[r]}function lt(n,r){const u=r[n];return Di(u)?u:u[bt]}function yr(n,r){return null==r?null:n[r]}function hr(n){n[ua]=0}function Xn(n){1024&n[Qt]||(n[Qt]|=1024,mi(n,1))}function Ti(n){1024&n[Qt]&&(n[Qt]&=-1025,mi(n,-1))}function mi(n,r){let u=n[vn];if(null===u)return;u[Hr]+=r;let h=u;for(u=u[vn];null!==u&&(1===r&&1===h[Hr]||-1===r&&0===h[Hr]);)u[Hr]+=r,h=u,u=u[vn]}const Un={lFrame:Ql(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Mc(){return Un.bindingsEnabled}function Bt(){return Un.lFrame.lView}function tr(){return Un.lFrame.tView}function Iu(n){return Un.lFrame.contextLView=n,n[ui]}function Bo(n){return Un.lFrame.contextLView=null,n}function Ws(){let n=_s();for(;null!==n&&64===n.type;)n=n.parent;return n}function _s(){return Un.lFrame.currentTNode}function Xr(n,r){const u=Un.lFrame;u.currentTNode=n,u.isParent=r}function ks(){return Un.lFrame.isParent}function en(){const n=Un.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Ni(){return Un.lFrame.bindingIndex++}function co(n){const r=Un.lFrame,u=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,u}function uh(n,r){const u=Un.lFrame;u.bindingIndex=u.bindingRootIndex=n,Va(r)}function Va(n){Un.lFrame.currentDirectiveIndex=n}function bu(){return Un.lFrame.currentQueryIndex}function Yl(n){Un.lFrame.currentQueryIndex=n}function Nc(n){const r=n[pt];return 2===r.type?r.declTNode:1===r.type?n[ai]:null}function vl(n,r,u){if(u&gn.SkipSelf){let f=r,y=n;for(;!(f=f.parent,null!==f||u&gn.Host||(f=Nc(y),null===f||(y=y[ds],10&f.type))););if(null===f)return!1;r=f,n=y}const h=Un.lFrame=Xo();return h.currentTNode=r,h.lView=n,!0}function ir(n){const r=Xo(),u=n[pt];Un.lFrame=r,r.currentTNode=u.firstChild,r.lView=n,r.tView=u,r.contextLView=n,r.bindingIndex=u.bindingStartIndex,r.inI18n=!1}function Xo(){const n=Un.lFrame,r=null===n?null:n.child;return null===r?Ql(n):r}function Ql(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Pi(){const n=Un.lFrame;return Un.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Gn=Pi;function Mo(){const n=Pi();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Rr(){return Un.lFrame.selectedIndex}function un(n){Un.lFrame.selectedIndex=n}function xi(){const n=Un.lFrame;return Z(n.tView,n.selectedIndex)}let Ku=!0;function A(){return Ku}function O(n){Ku=n}function P(n,r){for(let u=r.directiveStart,h=r.directiveEnd;u<h;u++){const y=n.data[u].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:M,ngAfterViewInit:k,ngAfterViewChecked:W,ngOnDestroy:oe}=y;C&&(n.contentHooks??=[]).push(-u,C),M&&((n.contentHooks??=[]).push(u,M),(n.contentCheckHooks??=[]).push(u,M)),k&&(n.viewHooks??=[]).push(-u,k),W&&((n.viewHooks??=[]).push(u,W),(n.viewCheckHooks??=[]).push(u,W)),null!=oe&&(n.destroyHooks??=[]).push(u,oe)}}function z(n,r,u){tt(n,r,3,u)}function de(n,r,u,h){(3&n[Qt])===u&&tt(n,r,u,h)}function ce(n,r){let u=n[Qt];(3&u)===r&&(u&=8191,u+=1,n[Qt]=u)}function tt(n,r,u,h){const y=h??-1,C=r.length-1;let M=0;for(let k=void 0!==h?65535&n[ua]:0;k<C;k++)if("number"==typeof r[k+1]){if(M=r[k],null!=h&&M>=h)break}else r[k]<0&&(n[ua]+=65536),(M<y||-1==y)&&(xn(n,u,r,k),n[ua]=(4294901760&n[ua])+k+2),k++}function be(n,r){Vo(4,n,r);const u=Q(null);try{r.call(n)}finally{Q(u),Vo(5,n,r)}}function xn(n,r,u,h){const f=u[h]<0,y=u[h+1],M=n[f?-u[h]:u[h]];f?n[Qt]>>13<n[ua]>>16&&(3&n[Qt])===r&&(n[Qt]+=8192,be(M,y)):be(M,y)}const _n=-1;class Wr{constructor(r,u,h){this.factory=r,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Ks(n){return n!==_n}function Ua(n){return 32767&n}function Pc(n,r){let u=function Xl(n){return n>>16}(n),h=r;for(;u>0;)h=h[ds],u--;return h}let Zs=!0;function Ia(n){const r=Zs;return Zs=n,r}const Ba=255,wd=5;let xc=0;const ja={};function Jl(n,r){const u=Oc(n,r);if(-1!==u)return u;const h=r[pt];h.firstCreatePass&&(n.injectorIndex=r.length,Cl(h.data,n),Cl(r,null),Cl(h.blueprint,null));const f=kc(n,r),y=n.injectorIndex;if(Ks(f)){const C=Ua(f),M=Pc(f,r),k=M[pt].data;for(let W=0;W<8;W++)r[y+W]=M[C+W]|k[C+W]}return r[y+8]=f,y}function Cl(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Oc(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function kc(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let u=0,h=null,f=r;for(;null!==f;){if(h=Tu(f),null===h)return _n;if(u++,f=f[ds],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return _n}function Du(n,r,u){!function ch(n,r,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Te)&&(h=u[Te]),null==h&&(h=u[Te]=xc++);const f=h&Ba;r.data[n+(f>>wd)]|=1<<f}(n,r,u)}function Cd(n,r,u){if(u&gn.Optional||void 0!==n)return n;Ot()}function Il(n,r,u,h){if(u&gn.Optional&&void 0===h&&(h=null),!(u&(gn.Self|gn.Host))){const f=n[Qi],y=cr(void 0);try{return f?f.get(r,h,u&gn.Optional):Or(r,h,u&gn.Optional)}finally{cr(y)}}return Cd(h,0,u)}function ec(n,r,u,h=gn.Default,f){if(null!==n){if(2048&r[Qt]&&!(h&gn.Self)){const C=function ho(n,r,u,h,f){let y=n,C=r;for(;null!==y&&null!==C&&2048&C[Qt]&&!(512&C[Qt]);){const M=tc(y,C,u,h|gn.Self,ja);if(M!==ja)return M;let k=y.parent;if(!k){const W=C[Rs];if(W){const oe=W.get(u,ja,h);if(oe!==ja)return oe}k=Tu(C),C=C[ds]}y=k}return f}(n,r,u,h,ja);if(C!==ja)return C}const y=tc(n,r,u,h,ja);if(y!==ja)return y}return Il(r,u,h,f)}function tc(n,r,u,h,f){const y=function Yh(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Te)?n[Te]:void 0;return"number"==typeof r?r>=0?r&Ba:hh:r}(u);if("function"==typeof y){if(!vl(r,n,h))return h&gn.Host?Cd(f,0,h):Il(r,u,h,f);try{const C=y(h);if(null!=C||h&gn.Optional)return C;Ot()}finally{Gn()}}else if("number"==typeof y){let C=null,M=Oc(n,r),k=_n,W=h&gn.Host?r[li][ai]:null;for((-1===M||h&gn.SkipSelf)&&(k=-1===M?kc(n,r):r[M+8],k!==_n&&Qu(h,!1)?(C=r[pt],M=Ua(k),r=Pc(k,r)):M=-1);-1!==M;){const oe=r[pt];if(Fc(y,M,oe.data)){const ve=ep(M,r,u,C,h,W);if(ve!==ja)return ve}k=r[M+8],k!==_n&&Qu(h,r[pt].data[M+8]===W)&&Fc(y,M,r)?(C=oe,M=Ua(k),r=Pc(k,r)):M=-1}}return f}function ep(n,r,u,h,f,y){const C=r[pt],M=C.data[n+8],oe=Lc(M,C,u,null==h?ao(M)&&Zs:h!=C&&0!=(3&M.type),f&gn.Host&&y===M);return null!==oe?Yu(r,C,oe,M):ja}function Lc(n,r,u,h,f){const y=n.providerIndexes,C=r.data,M=1048575&y,k=n.directiveStart,oe=y>>20,Qe=f?M+oe:n.directiveEnd;for(let ut=h?M:M+oe;ut<Qe;ut++){const Ft=C[ut];if(ut<k&&u===Ft||ut>=k&&Ft.type===u)return ut}if(f){const ut=C[k];if(ut&&is(ut)&&ut.type===u)return k}return null}function Yu(n,r,u,h){let f=n[u];const y=r.data;if(function ni(n){return n instanceof Wr}(f)){const C=f;C.resolving&&function vt(n,r){const u=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new _e(-200,`Circular dependency in DI detected for ${n}${u}`)}(function gt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Be(n)}(y[u]));const M=Ia(C.canSeeViewProviders);C.resolving=!0;const k=C.injectImpl?cr(C.injectImpl):null;vl(n,h,gn.Default);try{f=n[u]=C.factory(void 0,y,n,h),r.firstCreatePass&&u>=h.directiveStart&&function b(n,r,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:y}=r.type.prototype;if(h){const C=eo(r);(u.preOrderHooks??=[]).push(n,C),(u.preOrderCheckHooks??=[]).push(n,C)}f&&(u.preOrderHooks??=[]).push(0-n,f),y&&((u.preOrderHooks??=[]).push(n,y),(u.preOrderCheckHooks??=[]).push(n,y))}(u,y[u],r)}finally{null!==k&&cr(k),Ia(M),C.resolving=!1,Gn()}}return f}function Fc(n,r,u){return!!(u[r+(n>>wd)]&1<<n)}function Qu(n,r){return!(n&gn.Self||n&gn.Host&&r)}class Ha{constructor(r,u){this._tNode=r,this._lView=u}get(r,u,h){return ec(this._tNode,this._lView,r,Oe(h),u)}}function hh(){return new Ha(Ws(),Bt())}function tp(n){return Dt(()=>{const r=n.prototype.constructor,u=r[je]||ba(r),h=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==h;){const y=f[je]||ba(f);if(y&&y!==u)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function ba(n){return Vt(n)?()=>{const r=ba(Tt(n));return r&&r()}:ar(n)}function Tu(n){const r=n[pt],u=r.type;return 2===u?r.declTNode:1===u?n[ai]:null}function Da(n){return function dh(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const u=n.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const y=u[f];if(ln(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(y===r)return u[f+1];f+=2}}}return null}(Ws(),n)}const ri="__parameters__";function x(n,r,u){return Dt(()=>{const h=function Ki(n){return function(...u){if(n){const h=n(...u);for(const f in h)this[f]=h[f]}}}(r);function f(...y){if(this instanceof f)return h.apply(this,y),this;const C=new f(...y);return M.annotation=C,M;function M(k,W,oe){const ve=k.hasOwnProperty(ri)?k[ri]:Object.defineProperty(k,ri,{value:[]})[ri];for(;ve.length<=oe;)ve.push(null);return(ve[oe]=ve[oe]||[]).push(C),k}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}function Ts(n,r){n.forEach(u=>Array.isArray(u)?Ts(u,r):r(u))}function ro(n,r,u){r>=n.length?n.push(u):n.splice(r,0,u)}function iu(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Ys(n,r,u){let h=Xu(n,r);return h>=0?n[1|h]=u:(h=~h,function bd(n,r,u,h){let f=n.length;if(f==r)n.push(u,h);else if(1===f)n.push(h,n[0]),n[0]=u;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=u,n[r+1]=h}}(n,h,r,u)),h}function fh(n,r){const u=Xu(n,r);if(u>=0)return n[1|u]}function Xu(n,r){return function Rg(n,r,u){let h=0,f=n.length>>u;for(;f!==h;){const y=h+(f-h>>1),C=n[y<<u];if(r===C)return y<<u;C>r?f=y:h=y+1}return~(f<<u)}(n,r,1)}const Ji=ae(x("Optional"),8),ph=ae(x("SkipSelf"),4);function cc(n){return 128==(128&n.flags)}var _h=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_h||{});const vh=new Map;let rl=0;const Gc="__ngContext__";function mo(n,r){Di(r)?(n[Gc]=r[xo],function au(n){vh.set(n[xo],n)}(r)):n[Gc]=r}let Al;function uu(n,r){return Al(n,r)}function Ml(n){const r=n[vn];return Is(r)?r[vn]:r}function fs(n){return hc(n[ms])}function yo(n){return hc(n[qn])}function hc(n){for(;null!==n&&!Is(n);)n=n[qn];return n}function Rl(n,r,u,h,f){if(null!=h){let y,C=!1;Is(h)?y=h:Di(h)&&(C=!0,h=h[bt]);const M=Dr(h);0===n&&null!==u?null==f?Wt(r,u,M):at(r,u,M,f||null,!0):1===n&&null!==u?at(r,u,M,f||null,!0):2===n?function Xc(n,r,u){const h=us(n,r);h&&function In(n,r,u,h){n.removeChild(r,u,h)}(n,h,r,u)}(r,M,C):3===n&&r.destroyNode(M),null!=y&&function Wa(n,r,u,h,f){const y=u[Vi];y!==Dr(u)&&Rl(r,n,h,y,f);for(let M=rs;M<u.length;M++){const k=u[M];Fd(k[pt],k,n,r,h,y)}}(r,n,y,u,f)}}function fc(n,r,u){return n.createElement(r,u)}function lf(n,r){const u=n[Do],h=u.indexOf(r);Ti(r),u.splice(h,1)}function I(n,r){if(n.length<=rs)return;const u=rs+r,h=n[u];if(h){const f=h[Po];null!==f&&f!==n&&lf(f,h),r>0&&(n[u-1][qn]=h[qn]);const y=iu(n,rs+r);!function Kc(n,r){Fd(n,r,r[er],2,null,null),r[bt]=null,r[ai]=null}(h[pt],h);const C=y[ys];null!==C&&C.detachView(y[pt]),h[vn]=null,h[qn]=null,h[Qt]&=-129}return h}function m(n,r){if(!(256&r[Qt])){const u=r[er];r[Io]?.destroy(),r[oo]?.destroy(),u.destroyNode&&Fd(n,r,u,3,null,null),function Yc(n){let r=n[ms];if(!r)return _(n[pt],n);for(;r;){let u=null;if(Di(r))u=r[ms];else{const h=r[rs];h&&(u=h)}if(!u){for(;r&&!r[qn]&&r!==n;)Di(r)&&_(r[pt],r),r=r[vn];null===r&&(r=n),Di(r)&&_(r[pt],r),u=r&&r[qn]}r=u}}(r)}}function _(n,r){if(!(256&r[Qt])){r[Qt]&=-129,r[Qt]|=256,function $(n,r){let u;if(null!=n&&null!=(u=n.destroyHooks))for(let h=0;h<u.length;h+=2){const f=r[u[h]];if(!(f instanceof Wr)){const y=u[h+1];if(Array.isArray(y))for(let C=0;C<y.length;C+=2){const M=f[y[C]],k=y[C+1];Vo(4,M,k);try{k.call(M)}finally{Vo(5,M,k)}}else{Vo(4,f,y);try{y.call(f)}finally{Vo(5,f,y)}}}}}(n,r),function D(n,r){const u=n.cleanup,h=r[Wi];if(null!==u)for(let y=0;y<u.length-1;y+=2)if("string"==typeof u[y]){const C=u[y+3];C>=0?h[C]():h[-C].unsubscribe(),y+=2}else u[y].call(h[u[y+1]]);null!==h&&(r[Wi]=null);const f=r[bi];if(null!==f){r[bi]=null;for(let y=0;y<f.length;y++)(0,f[y])()}}(n,r),1===r[pt].type&&r[er].destroy();const u=r[Po];if(null!==u&&Is(r[vn])){u!==r[vn]&&lf(u,r);const h=r[ys];null!==h&&h.detachView(n)}!function Pd(n){vh.delete(n[xo])}(r)}}function te(n,r,u){return function Se(n,r,u){let h=r;for(;null!==h&&40&h.type;)h=(r=h).parent;if(null===h)return u[bt];{const{componentOffset:f}=h;if(f>-1){const{encapsulation:y}=n.data[h.directiveStart+f];if(y===Pn.None||y===Pn.Emulated)return null}return J(h,u)}}(n,r.parent,u)}function at(n,r,u,h,f){n.insertBefore(r,u,h,f)}function Wt(n,r,u){n.appendChild(r,u)}function sn(n,r,u,h,f){null!==h?at(n,r,u,h,f):Wt(n,r,u)}function us(n,r){return n.parentNode(r)}let xl,Bd,hp,Pl=function pc(n,r,u){return 40&n.type?J(n,u):null};function $r(n,r,u,h){const f=te(n,h,r),y=r[er],M=function Qc(n,r,u){return Pl(n,r,u)}(h.parent||r[ai],h,r);if(null!=f)if(Array.isArray(u))for(let k=0;k<u.length;k++)sn(y,f,u[k],M,!1);else sn(y,f,u,M,!1);void 0!==xl&&xl(y,h,r,u,f)}function Tr(n,r){if(null!==r){const u=r.type;if(3&u)return J(r,n);if(4&u)return Oi(-1,n[r.index]);if(8&u){const h=r.child;if(null!==h)return Tr(n,h);{const f=n[r.index];return Is(f)?Oi(-1,f):Dr(f)}}if(32&u)return uu(r,n)()||Dr(n[r.index]);{const h=Mu(n,r);return null!==h?Array.isArray(h)?h[0]:Tr(Ml(n[li]),h):Tr(n,r.next)}}return null}function Mu(n,r){return null!==r?n[li][ai].projection[r.projection]:null}function Oi(n,r){const u=rs+n+1;if(u<r.length){const h=r[u],f=h[pt].firstChild;if(null!==f)return Tr(h,f)}return r[Vi]}function il(n,r,u,h,f,y,C){for(;null!=u;){const M=h[u.index],k=u.type;if(C&&0===r&&(M&&mo(Dr(M),h),u.flags|=2),32!=(32&u.flags))if(8&k)il(n,r,u.child,h,f,y,!1),Rl(r,n,f,M,y);else if(32&k){const W=uu(u,h);let oe;for(;oe=W();)Rl(r,n,f,oe,y);Rl(r,n,f,M,y)}else 16&k?Zr(n,r,h,u,f,y):Rl(r,n,f,M,y);u=C?u.projectionNext:u.next}}function Fd(n,r,u,h,f,y){il(u,h,n.firstChild,r,f,y,!1)}function Zr(n,r,u,h,f,y){const C=u[li],k=C[ai].projection[h.projection];if(Array.isArray(k))for(let W=0;W<k.length;W++)Rl(r,n,f,k[W],y);else{let W=k;const oe=C[vn];cc(h)&&(W.flags|=128),il(n,r,W,oe,f,y,!0)}}function lu(n,r,u){""===u?n.removeAttribute(r,"class"):n.setAttribute(r,"class",u)}function f_(n,r,u){const{mergedAttrs:h,classes:f,styles:y}=u;null!==h&&Et(n,r,h),null!==f&&lu(n,r,f),null!==y&&function Vd(n,r,u){n.setAttribute(r,"style",u)}(n,r,y)}function g_(n){Bd=n}function wh(n){return function Fg(){if(void 0===hp&&(hp=null,Yn.trustedTypes))try{hp=Yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return hp}()?.createScriptURL(n)||n}class fp{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lt})`}}function _o(n){return n instanceof fp?n.changingThisBreaksApplicationSecurity:n}function gp(n,r){const u=function Wm(n){return n instanceof fp&&n.getTypeName()||null}(n);if(null!=u&&u!==r){if("ResourceURL"===u&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${u} (see ${Lt})`)}return u===r}const Vg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Fl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fl||{});function Zm(n){const r=$d();return r?r.sanitize(Fl.URL,n)||"":gp(n,"URL")?_o(n):function ed(n){return(n=String(n)).match(Vg)?n:"unsafe:"+n}(Be(n))}function jg(n){const r=$d();if(r)return wh(r.sanitize(Fl.RESOURCE_URL,n)||"");if(gp(n,"ResourceURL"))return wh(_o(n));throw new _e(904,!1)}function Xm(n,r,u){return function Ep(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?jg:Zm}(r,u)(n)}function $d(){const n=Bt();return n&&n[cs].sanitizer}class fi{constructor(r,u){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=dn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const wp=new fi("ENVIRONMENT_INITIALIZER"),mf=new fi("INJECTOR",-1),Vl=new fi("INJECTOR_DEF_TYPES");class bh{get(r,u=Fr){if(u===Fr){const h=new Error(`NullInjectorError: No provider for ${Re(r)}!`);throw h.name="NullInjectorError",h}return u}}function sd(n){return{\u0275providers:n}}function C_(...n){return{\u0275providers:Jm(0,n),\u0275fromNgModule:!0}}function Jm(n,...r){const u=[],h=new Set;let f;return Ts(r,y=>{const C=y;$g(C,u,[],h)&&(f||=[],f.push(C))}),void 0!==f&&ia(f,u),u}function ia(n,r){for(let u=0;u<n.length;u++){const{providers:f}=n[u];yf(f,y=>{r.push(y)})}}function $g(n,r,u,h){if(!(n=Tt(n)))return!1;let f=null,y=ws(n);const C=!y&&se(n);if(y||C){if(C&&!C.standalone)return!1;f=n}else{const k=n.ngModule;if(y=ws(k),!y)return!1;f=k}const M=h.has(f);if(C){if(M)return!1;if(h.add(f),C.dependencies){const k="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const W of k)$g(W,r,u,h)}}else{if(!y)return!1;{if(null!=y.imports&&!M){let W;h.add(f);try{Ts(y.imports,oe=>{$g(oe,r,u,h)&&(W||=[],W.push(oe))})}finally{}void 0!==W&&ia(W,r)}if(!M){const W=ar(f)||(()=>new f);r.push({provide:f,useFactory:W,deps:Ut},{provide:Vl,useValue:f,multi:!0},{provide:wp,useValue:()=>Hn(f),multi:!0})}const k=y.providers;null==k||M||yf(k,oe=>{r.push(oe)})}}return f!==n&&void 0!==n.providers}function yf(n,r){for(let u of n)xt(u)&&(u=u.\u0275providers),Array.isArray(u)?yf(u,r):r(u)}const Ul=pe({provide:String,useValue:pe});function al(n){return null!==n&&"object"==typeof n&&Ul in n}function Ma(n){return"function"==typeof n}const cu=new fi("Set Injector scope."),mc={},Ka={};let Gg;function zg(){return void 0===Gg&&(Gg=new bh),Gg}class ul{}class ty extends ul{get destroyed(){return this._destroyed}constructor(r,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ki(r,C=>this.processProvider(C)),this.records.set(mf,ad(void 0,this)),f.has("environment")&&this.records.set(ul,ad(void 0,this));const y=this.records.get(cu);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(Vl.multi,Ut,gn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of r)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const u=nr(this),h=cr(void 0);try{return r()}finally{nr(u),cr(h)}}get(r,u=Fr,h=gn.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Ne))return r[Ne](this);h=Oe(h);const f=nr(this),y=cr(void 0);try{if(!(h&gn.SkipSelf)){let M=this.records.get(r);if(void 0===M){const k=function I_(n){return"function"==typeof n||"object"==typeof n&&n instanceof fi}(r)&&fn(r);M=k&&this.injectableDefInScope(k)?ad(Wg(r),mc):null,this.records.set(r,M)}if(null!=M)return this.hydrate(r,M)}return(h&gn.Self?zg():this.parent).get(r,u=h&gn.Optional&&u===Fr?null:u)}catch(C){if("NullInjectorError"===C.name){if((C[Ar]=C[Ar]||[]).unshift(Re(r)),f)throw C;return function le(n,r,u,h){const f=n[Ar];throw r[Vr]&&f.unshift(r[Vr]),n.message=function Ze(n,r,u,h=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=Re(r);if(Array.isArray(r))f=r.map(Re).join(" -> ");else if("object"==typeof r){let y=[];for(let C in r)if(r.hasOwnProperty(C)){let M=r[C];y.push(C+":"+("string"==typeof M?JSON.stringify(M):Re(M)))}f=`{${y.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${n.replace(vi,"\n  ")}`}("\n"+n.message,f,u,h),n.ngTokenPath=f,n[Ar]=null,n}(C,r,"R3InjectorError",this.source)}throw C}finally{cr(y),nr(f)}}resolveInjectorInitializers(){const r=nr(this),u=cr(void 0);try{const h=this.get(wp.multi,Ut,gn.Self);for(const f of h)f()}finally{nr(r),cr(u)}}toString(){const r=[],u=this.records;for(const h of u.keys())r.push(Re(h));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(r){let u=Ma(r=Tt(r))?r:Tt(r&&r.provide);const h=function Gd(n){return al(n)?ad(void 0,n.useValue):ad(Kg(n),mc)}(r);if(Ma(r)||!0!==r.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=ad(void 0,mc,!0),f.factory=()=>re(f.multi),this.records.set(u,f)),u=r,f.multi.push(r)}this.records.set(u,h)}hydrate(r,u){return u.value===mc&&(u.value=Ka,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ny(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(r){if(!r.providedIn)return!1;const u=Tt(r.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(r){const u=this._onDestroyHooks.indexOf(r);-1!==u&&this._onDestroyHooks.splice(u,1)}}function Wg(n){const r=fn(n),u=null!==r?r.factory:ar(n);if(null!==u)return u;if(n instanceof fi)throw new _e(204,!1);if(n instanceof Function)return function qg(n){const r=n.length;if(r>0)throw function $a(n,r){const u=[];for(let h=0;h<n;h++)u.push(r);return u}(r,"?"),new _e(204,!1);const u=function or(n){return n&&(n[ji]||n[Ai])||null}(n);return null!==u?()=>u.factory(n):()=>new n}(n);throw new _e(204,!1)}function Kg(n,r,u){let h;if(Ma(n)){const f=Tt(n);return ar(f)||Wg(f)}if(al(n))h=()=>Tt(n.useValue);else if(function Cp(n){return!(!n||!n.useFactory)}(n))h=()=>n.useFactory(...re(n.deps||[]));else if(function od(n){return!(!n||!n.useExisting)}(n))h=()=>Hn(Tt(n.useExisting));else{const f=Tt(n&&(n.useClass||n.provide));if(!function zd(n){return!!n.deps}(n))return ar(f)||Wg(f);h=()=>new f(...re(n.deps))}return h}function ad(n,r,u=!1){return{factory:n,value:r,multi:u?[]:void 0}}function ki(n,r){for(const u of n)Array.isArray(u)?ki(u,r):u&&xt(u)?ki(u.\u0275providers,r):r(u)}const Ra=new fi("AppId",{providedIn:"root",factory:()=>_f}),_f="ng",bp=new fi("Platform Initializer"),Zg=new fi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Dh=new fi("AnimationModuleType"),b_=new fi("CSP nonce",{providedIn:"root",factory:()=>function df(){if(void 0!==Bd)return Bd;if(typeof document<"u")return document;throw new _e(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let T_=(n,r)=>null;function xp(n,r){return T_(n,r)}class R_{}class N_{}class oy{resolveComponentFactory(r){throw function tm(n){const r=Error(`No component factory found for ${Re(n)}.`);return r.ngComponent=n,r}(r)}}let Cf=(()=>{class n{static#e=this.NULL=new oy}return n})();function rm(){return Bl(Ws(),Bt())}function Bl(n,r){return new ud(J(n,r))}let ud=(()=>{class n{constructor(u){this.nativeElement=u}static#e=this.__NG_ELEMENT_ID__=rm}return n})();function im(n){return n instanceof ud?n.nativeElement:n}class sm{}let ay=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function uy(){const n=Bt(),u=lt(Ws().index,n);return(Di(u)?u:n)[er]}()}return n})(),P_=(()=>{class n{static#e=this.\u0275prov=dn({token:n,providedIn:"root",factory:()=>null})}return n})();class x_{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const om=new x_("16.1.9"),If={};function Zd(n){for(;n;){n[Qt]|=64;const r=Ml(n);if($i(n)&&!r)return n;n=r}return null}function Ho(n){return n.ngOriginalError}class ld{constructor(){this._console=console}handleError(r){const u=this._findOriginalError(r);this._console.error("ERROR",r),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(r){let u=r&&Ho(r);for(;u&&Ho(u);)u=Ho(u);return u||null}}const Df=new fi("",{providedIn:"root",factory:()=>!1});function _c(n){return n instanceof Function?n():n}class um extends Me{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(r){this._lView=r}onConsumerDependencyMayHaveChanged(){Zd(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(r,u,h){const f=Q(this);this.trackingVersion++;try{r(u,h)}finally{Q(f)}}destroy(){this.trackingVersion++}}let Nu=null;function Pu(){return Nu??=new um,Nu}function fy(n,r){return n[r]??Pu()}function F_(n,r){const u=Pu();u.hasReadASignal&&(n[r]=Nu,u.lView=n,Nu=new um)}const Nr={};function Bp(n){jp(tr(),Bt(),Rr()+n,!1)}function jp(n,r,u,h){if(!h)if(3==(3&r[Qt])){const y=n.preOrderCheckHooks;null!==y&&z(r,y,u)}else{const y=n.preOrderHooks;null!==y&&de(r,y,0,u)}un(u)}function cm(n,r=null,u=null,h){const f=Sf(n,r,u,h);return f.resolveInjectorInitializers(),f}function Sf(n,r=null,u=null,h,f=new Set){const y=[u||Ut,C_(n)];return h=h||("object"==typeof n?void 0:Re(n)),new ty(y,r||zg(),h||null,f)}let Xd=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Fr;static#t=this.NULL=new bh;static create(u,h){if(Array.isArray(u))return cm({name:""},h,u,"");{const f=u.name??"";return cm({name:f},u.parent,u.providers,f)}}static#n=this.\u0275prov=dn({token:n,providedIn:"any",factory:()=>Hn(mf)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function ll(n,r=gn.Default){const u=Bt();return null===u?Hn(n,r):ec(Ws(),u,Tt(n),r)}function V_(){throw new Error("invalid")}function dm(n,r,u,h,f,y,C,M,k,W,oe){const ve=r.blueprint.slice();return ve[bt]=f,ve[Qt]=140|h,(null!==W||n&&2048&n[Qt])&&(ve[Qt]|=2048),hr(ve),ve[vn]=ve[ds]=n,ve[ui]=u,ve[cs]=C||n&&n[cs],ve[er]=M||n&&n[er],ve[Qi]=k||n&&n[Qi]||null,ve[ai]=y,ve[xo]=function sp(){return rl++}(),ve[Lr]=oe,ve[Rs]=W,ve[li]=2==r.type?n[li]:ve,ve}function vc(n,r,u,h,f){let y=n.data[r];if(null===y)y=function Af(n,r,u,h,f){const y=_s(),C=ks(),k=n.data[r]=function fm(n,r,u,h,f,y){let C=r?r.injectorIndex:-1,M=0;return function as(){return null!==Un.skipHydrationRootTNode}()&&(M|=128),{type:u,index:h,insertBeforeIndex:null,injectorIndex:C,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:M,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?y:y&&y.parent,u,r,h,f);return null===n.firstChild&&(n.firstChild=k),null!==y&&(C?null==y.child&&null!==k.parent&&(y.child=k):null===y.next&&(y.next=k,k.prev=y)),k}(n,r,u,h,f),function ah(){return Un.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=u,y.value=h,y.attrs=f;const C=function Ht(){const n=Un.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===C?-1:C.injectorIndex}return Xr(y,!0),y}function Nh(n,r,u,h){if(0===u)return-1;const f=r.length;for(let y=0;y<u;y++)r.push(h),n.blueprint.push(h),n.data.push(null);return f}function zp(n,r,u,h,f){const y=fy(r,Io),C=Rr(),M=2&h;try{if(un(-1),M&&r.length>mr&&jp(n,r,mr,!1),Vo(M?2:0,f),M)y.runInContext(u,h,f);else{const W=Q(null);try{u(h,f)}finally{Q(W)}}}finally{M&&null===r[Io]&&F_(r,Io),un(C),Vo(M?3:1,f)}}function Wp(n,r,u){if(bs(r)){const h=Q(null);try{const y=r.directiveEnd;for(let C=r.directiveStart;C<y;C++){const M=n.data[C];M.contentQueries&&M.contentQueries(1,u[C],C)}}finally{Q(h)}}}function Jd(n,r,u){Mc()&&(function Zp(n,r,u,h){const f=u.directiveStart,y=u.directiveEnd;ao(u)&&function Ev(n,r,u){const h=J(r,n),f=Mf(u);let C=16;u.signals?C=4096:u.onPush&&(C=64);const M=xf(n,dm(n,f,null,C,h,r,null,n[cs].rendererFactory.createRenderer(h,u),null,null,null));n[r.index]=M}(r,u,n.data[f+u.componentOffset]),n.firstCreatePass||Jl(u,r),mo(h,r);const C=u.initialInputs;for(let M=f;M<y;M++){const k=n.data[M],W=Yu(r,n,M,u);mo(W,r),null!==C&&Qa(0,M-f,W,k,0,C),is(k)&&(lt(u.index,r)[ui]=Yu(r,n,M,u))}}(n,r,u,J(u,r)),64==(64&u.flags)&&B_(n,r,u))}function Hl(n,r,u=J){const h=r.localNames;if(null!==h){let f=r.index+1;for(let y=0;y<h.length;y+=2){const C=h[y+1],M=-1===C?u(r,n):n[C];n[f++]=M}}}function Mf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Ec(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):r}function Ec(n,r,u,h,f,y,C,M,k,W,oe){const ve=mr+h,Qe=ve+f,ut=function eh(n,r){const u=[];for(let h=0;h<r;h++)u.push(h<n?null:Nr);return u}(ve,Qe),Ft="function"==typeof W?W():W;return ut[pt]={type:n,blueprint:ut,template:u,queries:null,viewQuery:M,declTNode:r,data:ut.slice().fill(null,ve),bindingStartIndex:ve,expandoStartIndex:Qe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:k,consts:Ft,incompleteFirstPass:!1,ssrId:oe}}let hm=n=>null;function pm(n,r,u,h){for(let f in n)if(n.hasOwnProperty(f)){u=null===u?{}:u;const y=n[f];null===h?Nf(u,r,f,y):h.hasOwnProperty(f)&&Nf(u,r,h[f],y)}return u}function Nf(n,r,u,h){n.hasOwnProperty(u)?n[u].push(r,h):n[u]=[r,h]}function Za(n,r,u,h,f,y,C,M){const k=J(r,u);let oe,W=r.inputs;!M&&null!=W&&(oe=W[h])?(wc(n,u,oe,h,f),ao(r)&&function vv(n,r){const u=lt(r,n);16&u[Qt]||(u[Qt]|=64)}(u,r.index)):3&r.type&&(h=function Ey(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(h),f=null!=C?C(f,r.value||"",h):f,y.setProperty(k,h,f))}function Kp(n,r,u,h){if(Mc()){const f=null===h?null:{"":-1},y=function Iy(n,r){const u=n.directiveRegistry;let h=null,f=null;if(u)for(let y=0;y<u.length;y++){const C=u[y];if(wi(r,C.selectors,!1))if(h||(h=[]),is(C))if(null!==C.findHostDirectiveDefs){const M=[];f=f||new Map,C.findHostDirectiveDefs(C,M,f),h.unshift(...M,C),dd(n,r,M.length)}else h.unshift(C),dd(n,r,0);else f=f||new Map,C.findHostDirectiveDefs?.(C,h,f),h.push(C)}return null===h?null:[h,f]}(n,u);let C,M;null===y?C=M=null:[C,M]=y,null!==C&&Cy(n,r,u,C,f,M),f&&function Ph(n,r,u){if(r){const h=n.localNames=[];for(let f=0;f<r.length;f+=2){const y=u[r[f+1]];if(null==y)throw new _e(-301,!1);h.push(r[f],y)}}}(u,h,f)}u.mergedAttrs=Mn(u.mergedAttrs,u.attrs)}function Cy(n,r,u,h,f,y){for(let W=0;W<h.length;W++)Du(Jl(u,r),n,h[W].type);!function dl(n,r,u){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+u,n.providerIndexes=r}(u,n.data.length,h.length);for(let W=0;W<h.length;W++){const oe=h[W];oe.providersResolver&&oe.providersResolver(oe)}let C=!1,M=!1,k=Nh(n,r,h.length,null);for(let W=0;W<h.length;W++){const oe=h[W];u.mergedAttrs=Mn(u.mergedAttrs,oe.hostAttrs),mm(n,u,r,k,oe),by(k,oe,f),null!==oe.contentQueries&&(u.flags|=4),(null!==oe.hostBindings||null!==oe.hostAttrs||0!==oe.hostVars)&&(u.flags|=64);const ve=oe.type.prototype;!C&&(ve.ngOnChanges||ve.ngOnInit||ve.ngDoCheck)&&((n.preOrderHooks??=[]).push(u.index),C=!0),!M&&(ve.ngOnChanges||ve.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(u.index),M=!0),k++}!function vy(n,r,u){const f=r.directiveEnd,y=n.data,C=r.attrs,M=[];let k=null,W=null;for(let oe=r.directiveStart;oe<f;oe++){const ve=y[oe],Qe=u?u.get(ve):null,Ft=Qe?Qe.outputs:null;k=pm(ve.inputs,oe,k,Qe?Qe.inputs:null),W=pm(ve.outputs,oe,W,Ft);const tn=null===k||null===C||Hi(r)?null:wv(k,oe,C);M.push(tn)}null!==k&&(k.hasOwnProperty("class")&&(r.flags|=8),k.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=M,r.inputs=k,r.outputs=W}(n,u,y)}function B_(n,r,u){const h=u.directiveStart,f=u.directiveEnd,y=u.index,C=function hs(){return Un.lFrame.currentDirectiveIndex}();try{un(y);for(let M=h;M<f;M++){const k=n.data[M],W=r[M];Va(M),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&j_(k,W)}}finally{un(-1),Va(C)}}function j_(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function dd(n,r,u){r.componentOffset=u,(n.components??=[]).push(r.index)}function by(n,r,u){if(u){if(r.exportAs)for(let h=0;h<r.exportAs.length;h++)u[r.exportAs[h]]=n;is(r)&&(u[""]=n)}}function mm(n,r,u,h,f){n.data[h]=f;const y=f.factory||(f.factory=ar(f.type)),C=new Wr(y,is(f),ll);n.blueprint[h]=C,u[h]=C,function Pf(n,r,u,h,f){const y=f.hostBindings;if(y){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const M=~r.index;(function $l(n){let r=n.length;for(;r>0;){const u=n[--r];if("number"==typeof u&&u<0)return u}return 0})(C)!=M&&C.push(M),C.push(u,h,y)}}(n,r,h,Nh(n,u,f.hostVars,Nr),f)}function Ya(n,r,u,h,f,y){const C=J(n,r);!function Yp(n,r,u,h,f,y,C){if(null==y)n.removeAttribute(r,f,u);else{const M=null==C?Be(y):C(y,h||"",f);n.setAttribute(r,f,M,u)}}(r[er],C,y,n.value,u,h,f)}function Qa(n,r,u,h,f,y){const C=y[r];if(null!==C)for(let M=0;M<C.length;)ym(h,u,C[M++],C[M++],C[M++])}function ym(n,r,u,h,f){const y=Q(null);try{const C=n.inputTransforms;null!==C&&C.hasOwnProperty(h)&&(f=C[h].call(r,f)),null!==n.setInput?n.setInput(r,f,u,h):r[h]=f}finally{Q(y)}}function wv(n,r,u){let h=null,f=0;for(;f<u.length;){const y=u[f];if(0!==y)if(5!==y){if("number"==typeof y)break;if(n.hasOwnProperty(y)){null===h&&(h=[]);const C=n[y];for(let M=0;M<C.length;M+=2)if(C[M]===r){h.push(y,C[M+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return h}function Qp(n,r,u,h){return[n,!0,!1,r,null,0,h,u,null,null,null]}function H_(n,r){const u=n.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const y=u[h+1];if(-1!==y){const C=n.data[y];Yl(u[h]),C.contentQueries(2,r[y],y)}}}function xf(n,r){return n[ms]?n[Hs][qn]=r:n[ms]=r,n[Hs]=r,r}function Dy(n,r,u){Yl(0);const h=Q(null);try{r(n,u)}finally{Q(h)}}function Of(n){return n[Wi]||(n[Wi]=[])}function Xp(n){return n.cleanup||(n.cleanup=[])}function _m(n,r){const u=n[Qi],h=u?u.get(ld,null):null;h&&h.handleError(r)}function wc(n,r,u,h,f){for(let y=0;y<u.length;){const C=u[y++],M=u[y++];ym(n.data[C],r[C],h,M,f)}}function xu(n,r,u){const h=R(r,n);!function Sa(n,r,u){n.setValue(r,u)}(n[er],h,u)}function Sy(n,r){const u=lt(r,n),h=u[pt];!function Ay(n,r){for(let u=r.length;u<n.blueprint.length;u++)r.push(n.blueprint[u])}(h,u);const f=u[bt];null!==f&&null===u[Lr]&&(u[Lr]=xp(f,u[Qi])),eg(h,u,u[ui])}function eg(n,r,u){ir(r);try{const h=n.viewQuery;null!==h&&Dy(1,h,u);const f=n.template;null!==f&&zp(n,r,f,1,u),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&H_(n,r),n.staticViewQueries&&Dy(2,n.viewQuery,u);const y=n.components;null!==y&&function hd(n,r){for(let u=0;u<r.length;u++)Sy(n,r[u])}(r,y)}catch(h){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),h}finally{r[Qt]&=-5,Mo()}}let z_=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(u,h,f){const y=typeof Zone>"u"?null:Zone.current,C=new wu(u,W=>{this.all.has(W)&&this.queue.set(W,y)},f);let M;this.all.add(C),C.notify();const k=()=>{C.cleanup(),M?.(),this.all.delete(C),this.queue.delete(C)};return M=h?.onDestroy(k),{destroy:k}}flush(){if(0!==this.queue.size)for(const[u,h]of this.queue)this.queue.delete(u),h?h.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=dn({token:n,providedIn:"root",factory:()=>new n})}return n})();function th(n,r,u){let h=u?n.styles:null,f=u?n.classes:null,y=0;if(null!==r)for(let C=0;C<r.length;C++){const M=r[C];"number"==typeof M?y=M:1==y?f=It(f,M):2==y&&(h=It(h,M+": "+r[++C]+";"))}u?n.styles=h:n.stylesWithoutHost=h,u?n.classes=f:n.classesWithoutHost=f}function kf(n,r,u,h,f=!1){for(;null!==u;){const y=r[u.index];if(null!==y&&h.push(Dr(y)),Is(y)){for(let M=rs;M<y.length;M++){const k=y[M],W=k[pt].firstChild;null!==W&&kf(k[pt],k,W,h)}y[Vi]!==y[bt]&&h.push(y[Vi])}const C=u.type;if(8&C)kf(n,r,u.child,h);else if(32&C){const M=uu(u,r);let k;for(;k=M();)h.push(k)}else if(16&C){const M=Mu(r,u);if(Array.isArray(M))h.push(...M);else{const k=Ml(r[li]);kf(k[pt],k,M,h,!0)}}u=f?u.projectionNext:u.next}return h}function Lf(n,r,u,h=!0){const f=r[cs].rendererFactory;f.begin&&f.begin();try{W_(n,r,n.template,u)}catch(C){throw h&&_m(r,C),C}finally{f.end&&f.end(),r[cs].effectManager?.flush()}}function W_(n,r,u,h){const f=r[Qt];if(256!=(256&f)){r[cs].effectManager?.flush(),ir(r);try{hr(r),function Pt(n){return Un.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==u&&zp(n,r,u,2,h);const C=3==(3&f);if(C){const W=n.preOrderCheckHooks;null!==W&&z(r,W,null)}else{const W=n.preOrderHooks;null!==W&&de(r,W,0,null),ce(r,0)}if(function ng(n){for(let r=fs(n);null!==r;r=yo(r)){if(!r[Cs])continue;const u=r[Do];for(let h=0;h<u.length;h++){Xn(u[h])}}}(r),Ff(r,2),null!==n.contentQueries&&H_(n,r),C){const W=n.contentCheckHooks;null!==W&&z(r,W)}else{const W=n.contentHooks;null!==W&&de(r,W,1),ce(r,1)}!function yy(n,r){const u=n.hostBindingOpCodes;if(null===u)return;const h=fy(r,oo);try{for(let f=0;f<u.length;f++){const y=u[f];if(y<0)un(~y);else{const C=y,M=u[++f],k=u[++f];uh(M,C),h.runInContext(k,2,r[C])}}}finally{null===r[oo]&&F_(r,oo),un(-1)}}(n,r);const M=n.components;null!==M&&q_(r,M,0);const k=n.viewQuery;if(null!==k&&Dy(2,k,h),C){const W=n.viewCheckHooks;null!==W&&z(r,W)}else{const W=n.viewHooks;null!==W&&de(r,W,2),ce(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[Qt]&=-73,Ti(r)}finally{Mo()}}}function Ff(n,r){for(let u=fs(n);null!==u;u=yo(u))for(let h=rs;h<u.length;h++)nh(u[h],r)}function Ry(n,r,u){nh(lt(r,n),u)}function nh(n,r){if(!function En(n){return 128==(128&n[Qt])}(n))return;const u=n[pt];if(80&n[Qt]&&0===r||1024&n[Qt]||2===r)W_(u,n,u.template,n[ui]);else if(n[Hr]>0){Ff(n,1);const f=n[pt].components;null!==f&&q_(n,f,1)}}function q_(n,r,u){for(let h=0;h<r.length;h++)Ry(n,r[h],u)}class Vf{get rootNodes(){const r=this._lView,u=r[pt];return kf(u,r,u.firstChild,[])}constructor(r,u){this._lView=r,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ui]}set context(r){this._lView[ui]=r}get destroyed(){return 256==(256&this._lView[Qt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[vn];if(Is(r)){const u=r[8],h=u?u.indexOf(this):-1;h>-1&&(I(r,h),iu(u,h))}this._attachedToViewContainer=!1}m(this._lView[pt],this._lView)}onDestroy(r){!function Gi(n,r){if(256==(256&n[Qt]))throw new _e(911,!1);null===n[bi]&&(n[bi]=[]),n[bi].push(r)}(this._lView,r)}markForCheck(){Zd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qt]&=-129}reattach(){this._lView[Qt]|=128}detectChanges(){Lf(this._lView[pt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zc(n,r){Fd(n,r,r[er],2,null,null)}(this._lView[pt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=r}}class vm extends Vf{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Lf(r[pt],r,r[ui],!1)}checkNoChanges(){}get context(){return null}}class Ny extends Cf{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const u=se(r);return new sg(u,this.ngModule)}}function xh(n){const r=[];for(let u in n)n.hasOwnProperty(u)&&r.push({propName:n[u],templateName:u});return r}class ig{constructor(r,u){this.injector=r,this.parentInjector=u}get(r,u,h){h=Oe(h);const f=this.injector.get(r,If,h);return f!==If||u===If?f:this.parentInjector.get(r,u,h)}}class sg extends N_{get inputs(){const r=this.componentDef,u=r.inputTransforms,h=xh(r.inputs);if(null!==u)for(const f of h)u.hasOwnProperty(f.propName)&&(f.transform=u[f.propName]);return h}get outputs(){return xh(this.componentDef.outputs)}constructor(r,u){super(),this.componentDef=r,this.ngModule=u,this.componentType=r.type,this.selector=function Xs(n){return n.map(gs).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!u}create(r,u,h,f){let y=(f=f||this.ngModule)instanceof ul?f:f?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const C=y?new ig(r,y):r,M=C.get(sm,null);if(null===M)throw new _e(407,!1);const oe={rendererFactory:M,sanitizer:C.get(P_,null),effectManager:C.get(z_,null)},ve=M.createRenderer(null,this.componentDef),Qe=this.componentDef.selectors[0][0]||"div",ut=h?function qp(n,r,u,h){const y=h.get(Df,!1)||u===Pn.ShadowDom,C=n.selectRootElement(r,y);return function cl(n){hm(n)}(C),C}(ve,h,this.componentDef.encapsulation,C):fc(ve,Qe,function rg(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Qe)),Tn=this.componentDef.signals?4608:this.componentDef.onPush?576:528,sr=Ec(0,null,null,1,0,null,null,null,null,null,null),Gt=dm(null,sr,null,Tn,null,null,oe,ve,C,null,null);let zr,Bi;ir(Gt);try{const Zi=this.componentDef;let fl,xE=null;Zi.findHostDirectiveDefs?(fl=[],xE=new Map,Zi.findHostDirectiveDefs(Zi,fl,xE),fl.push(Zi)):fl=[Zi];const VD=function Py(n,r){const u=n[pt],h=mr;return n[h]=r,vc(u,h,2,"#host",null)}(Gt,ut),UD=function xy(n,r,u,h,f,y,C){const M=f[pt];!function Oy(n,r,u,h){for(const f of n)r.mergedAttrs=Mn(r.mergedAttrs,f.hostAttrs);null!==r.mergedAttrs&&(th(r,r.mergedAttrs,!0),null!==u&&f_(h,u,r))}(h,n,r,C);let k=null;null!==r&&(k=xp(r,f[Qi]));const W=y.rendererFactory.createRenderer(r,u);let oe=16;u.signals?oe=4096:u.onPush&&(oe=64);const ve=dm(f,Mf(u),null,oe,f[n.index],n,y,W,null,null,k);return M.firstCreatePass&&dd(M,n,h.length-1),xf(f,ve),f[n.index]=ve}(VD,ut,Zi,fl,Gt,oe,ve);Bi=Z(sr,mr),ut&&function ky(n,r,u,h){if(h)Et(n,u,["ng-version",om.full]);else{const{attrs:f,classes:y}=function js(n){const r=[],u=[];let h=1,f=2;for(;h<n.length;){let y=n[h];if("string"==typeof y)2===f?""!==y&&r.push(y,n[++h]):8===f&&u.push(y);else{if(!Cr(f))break;f=y}h++}return{attrs:r,classes:u}}(r.selectors[0]);f&&Et(n,u,f),y&&y.length>0&&lu(n,u,y.join(" "))}}(ve,Zi,ut,h),void 0!==u&&function ag(n,r,u){const h=n.projection=[];for(let f=0;f<r.length;f++){const y=u[f];h.push(null!=y?Array.from(y):null)}}(Bi,this.ngContentSelectors,u),zr=function Uf(n,r,u,h,f,y){const C=Ws(),M=f[pt],k=J(C,f);Cy(M,f,C,u,null,h);for(let oe=0;oe<u.length;oe++)mo(Yu(f,M,C.directiveStart+oe,C),f);B_(M,f,C),k&&mo(k,f);const W=Yu(f,M,C.directiveStart+C.componentOffset,C);if(n[ui]=f[ui]=W,null!==y)for(const oe of y)oe(W,r);return Wp(M,C,n),W}(UD,Zi,fl,xE,Gt,[Ly]),eg(sr,Gt,null)}finally{Mo()}return new og(this.componentType,zr,Bl(Bi,Gt),Gt,Bi)}}class og extends R_{constructor(r,u,h,f,y){super(),this.location=h,this._rootLView=f,this._tNode=y,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new vm(f),this.componentType=r}setInput(r,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),u))return;const y=this._rootLView;wc(y[pt],y,f,r,u),this.previousInputValues.set(r,u),Zd(lt(this._tNode.index,y))}}get injector(){return new Ha(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Ly(){const n=Ws();P(Bt()[pt],n)}function Na(n){let r=function Fy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),u=!0;const h=[n];for(;r;){let f;if(is(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new _e(903,!1);f=r.\u0275dir}if(f){if(u){h.push(f);const C=n;C.inputs=du(n.inputs),C.inputTransforms=du(n.inputTransforms),C.declaredInputs=du(n.declaredInputs),C.outputs=du(n.outputs);const M=f.hostBindings;M&&fd(n,M);const k=f.viewQuery,W=f.contentQueries;if(k&&Bf(n,k),W&&hu(n,W),ye(n.inputs,f.inputs),ye(n.declaredInputs,f.declaredInputs),ye(n.outputs,f.outputs),null!==f.inputTransforms&&(null===C.inputTransforms&&(C.inputTransforms={}),ye(C.inputTransforms,f.inputTransforms)),is(f)&&f.data.animation){const oe=n.data;oe.animation=(oe.animation||[]).concat(f.data.animation)}}const y=f.features;if(y)for(let C=0;C<y.length;C++){const M=y[C];M&&M.ngInherit&&M(n),M===Na&&(u=!1)}}r=Object.getPrototypeOf(r)}!function Em(n){let r=0,u=null;for(let h=n.length-1;h>=0;h--){const f=n[h];f.hostVars=r+=f.hostVars,f.hostAttrs=Mn(f.hostAttrs,u=Mn(u,f.hostAttrs))}}(h)}function du(n){return n===hn?{}:n===Ut?[]:n}function Bf(n,r){const u=n.viewQuery;n.viewQuery=u?(h,f)=>{r(h,f),u(h,f)}:r}function hu(n,r){const u=n.contentQueries;n.contentQueries=u?(h,f,y)=>{r(h,f,y),u(h,f,y)}:r}function fd(n,r){const u=n.hostBindings;n.hostBindings=u?(h,f)=>{r(h,f),u(h,f)}:r}function jy(n){const r=n.inputConfig,u={};for(const h in r)if(r.hasOwnProperty(h)){const f=r[h];Array.isArray(f)&&f[2]&&(u[h]=f[2])}n.inputTransforms=u}function Ic(n){return!!cg(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function cg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Gl(n,r,u){return n[r]=u}function ya(n,r,u){return!Object.is(n[r],u)&&(n[r]=u,!0)}function rh(n,r,u,h){const f=ya(n,r,u);return ya(n,r+1,h)||f}function Dm(n,r,u,h){const f=Bt();return ya(f,Ni(),r)&&(tr(),Ya(xi(),f,n,r,u,h)),Dm}function ih(n,r,u,h){return ya(n,Ni(),u)?r+Be(u)+h:Nr}function sh(n,r,u,h,f,y){const M=rh(n,function ft(){return Un.lFrame.bindingIndex}(),u,f);return co(2),M?r+Be(u)+h+Be(f)+y:Nr}function ku(n,r,u,h,f,y,C,M){const k=Bt(),W=tr(),oe=n+mr,ve=W.firstCreatePass?function Am(n,r,u,h,f,y,C,M,k){const W=r.consts,oe=vc(r,n,4,C||null,yr(W,M));Kp(r,u,oe,yr(W,k)),P(r,oe);const ve=oe.tView=Ec(2,oe,h,f,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,W,null);return null!==r.queries&&(r.queries.template(r,oe),ve.queries=r.queries.embeddedTView(oe)),oe}(oe,W,k,r,u,h,f,y,C):W.data[oe];Xr(ve,!1);const Qe=$o(W,k,ve,n);A()&&$r(W,k,Qe,ve),mo(Qe,k),xf(k,k[oe]=Qp(Qe,k,Qe,ve)),la(ve)&&Jd(W,k,ve),null!=C&&Hl(k,ve,M)}let $o=function Pa(n,r,u,h){return O(!0),r[er].createComment("")};function Mm(n){return De(function Kt(){return Un.lFrame.contextLView}(),mr+n)}function _g(n,r,u){const h=Bt();return ya(h,Ni(),r)&&Za(tr(),xi(),h,n,r,h[er],u,!1),_g}function Rm(n,r,u,h,f){const C=f?"class":"style";wc(n,u,r.inputs[C],C,h)}function zf(n,r,u,h){const f=Bt(),y=tr(),C=mr+n,M=f[er],k=y.firstCreatePass?function jh(n,r,u,h,f,y){const C=r.consts,k=vc(r,n,2,h,yr(C,f));return Kp(r,u,k,yr(C,y)),null!==k.attrs&&th(k,k.attrs,!1),null!==k.mergedAttrs&&th(k,k.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,k),k}(C,y,f,r,u,h):y.data[C],W=Hh(y,f,k,M,r,n);f[C]=W;const oe=la(k);return Xr(k,!0),f_(M,W,k),32!=(32&k.flags)&&A()&&$r(y,f,W,k),0===function Gs(){return Un.lFrame.elementDepthCount}()&&mo(W,f),function zs(){Un.lFrame.elementDepthCount++}(),oe&&(Jd(y,f,k),Wp(y,k,f)),null!==h&&Hl(f,k),zf}function Wf(){let n=Ws();ks()?function Wu(){Un.lFrame.isParent=!1}():(n=n.parent,Xr(n,!1));const r=n;(function zu(n){return Un.skipHydrationRootTNode===n})(r)&&function Fa(){Un.skipHydrationRootTNode=null}(),function hi(){Un.lFrame.elementDepthCount--}();const u=tr();return u.firstCreatePass&&(P(u,n),bs(n)&&u.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Zu(n){return 0!=(8&n.flags)}(r)&&Rm(u,r,Bt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function wl(n){return 0!=(16&n.flags)}(r)&&Rm(u,r,Bt(),r.stylesWithoutHost,!1),Wf}function qf(n,r,u,h){return zf(n,r,u,h),Wf(),qf}let Hh=(n,r,u,h,f,y)=>(O(!0),fc(h,f,function El(){return Un.lFrame.currentNamespace}()));function Zf(){return Bt()}function Dc(n){return!!n&&"function"==typeof n.then}function Gh(n){return!!n&&"function"==typeof n.subscribe}function Jy(n,r,u,h){const f=Bt(),y=tr(),C=Ws();return function Ov(n,r,u,h,f,y,C){const M=la(h),W=n.firstCreatePass&&Xp(n),oe=r[ui],ve=Of(r);let Qe=!0;if(3&h.type||C){const tn=J(h,r),Tn=C?C(tn):tn,sr=ve.length,Gt=C?Bi=>C(Dr(Bi[h.index])):h.index;let zr=null;if(!C&&M&&(zr=function xv(n,r,u,h){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const C=f[y];if(C===u&&f[y+1]===h){const M=r[Wi],k=f[y+2];return M.length>k?M[k]:null}"string"==typeof C&&(y+=2)}return null}(n,r,f,h.index)),null!==zr)(zr.__ngLastListenerFn__||zr).__ngNextListenerFn__=y,zr.__ngLastListenerFn__=y,Qe=!1;else{y=ev(h,r,oe,y,!1);const Bi=u.listen(Tn,f,y);ve.push(y,Bi),W&&W.push(f,Gt,sr,sr+1)}}else y=ev(h,r,oe,y,!1);const ut=h.outputs;let Ft;if(Qe&&null!==ut&&(Ft=ut[f])){const tn=Ft.length;if(tn)for(let Tn=0;Tn<tn;Tn+=2){const Zi=r[Ft[Tn]][Ft[Tn+1]].subscribe(y),fl=ve.length;ve.push(y,Zi),W&&W.push(f,h.index,fl,-(fl+1))}}}(y,f,f[er],C,n,r,h),Jy}function xm(n,r,u,h){try{return Vo(6,r,u),!1!==u(h)}catch(f){return _m(n,f),!1}finally{Vo(7,r,u)}}function ev(n,r,u,h,f){return function y(C){if(C===Function)return h;Zd(n.componentOffset>-1?lt(n.index,r):r);let k=xm(r,u,h,C),W=y.__ngNextListenerFn__;for(;W;)k=xm(r,u,W,C)&&k,W=W.__ngNextListenerFn__;return f&&!1===k&&C.preventDefault(),k}}function wg(n=1){return function fr(n){return(Un.lFrame.contextLView=function fa(n,r){for(;n>0;)r=r[ds],n--;return r}(n,Un.lFrame.contextLView))[ui]}(n)}function e_(n,r,u){return km(n,"",r,"",u),e_}function km(n,r,u,h,f){const y=Bt(),C=ih(y,r,u,h);return C!==Nr&&Za(tr(),xi(),y,n,C,y[er],f,!1),km}function s(n,r){return n<<17|r<<2}function o(n){return n>>17&32767}function E(n){return 2|n}function T(n){return(131068&n)>>2}function F(n,r){return-131069&n|r<<2}function X(n){return 1|n}function At(n,r,u,h,f){const y=n[u+1],C=null===r;let M=h?o(y):T(y),k=!1;for(;0!==M&&(!1===k||C);){const oe=n[M+1];on(n[M],r)&&(k=!0,n[M+1]=h?X(oe):E(oe)),M=h?o(oe):T(oe)}k&&(n[u+1]=h?E(y):X(y))}function on(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Xu(n,r)>=0}const yn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function br(n){return n.substring(yn.key,yn.keyEnd)}function oi(n,r){const u=yn.textEnd;return u===r?-1:(r=yn.keyEnd=function Fu(n,r,u){for(;r<u&&n.charCodeAt(r)>32;)r++;return r}(n,yn.key=r,u),Eo(n,r,u))}function Eo(n,r,u){for(;r<u&&n.charCodeAt(r)<=32;)r++;return r}function Wn(n,r){return function Go(n,r,u,h){const f=Bt(),y=tr(),C=co(2);y.firstUpdatePass&&Qs(y,n,C,h),r!==Nr&&ya(f,C,r)&&sE(y,y.data[Rr()],f,f[er],n,f[C+1]=function FE(n,r){return null==n||""===n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Re(_o(n)))),n}(r,u),h,C)}(n,r,null,!0),Wn}function Li(n){!function io(n,r,u,h){const f=tr(),y=co(2);f.firstUpdatePass&&Qs(f,null,y,h);const C=Bt();if(u!==Nr&&ya(C,y,u)){const M=f.data[Rr()];if(VE(M,h)&&!oh(f,y)){let k=h?M.classesWithoutHost:M.stylesWithoutHost;null!==k&&(u=It(k,u||"")),Rm(f,M,C,u,h)}else!function LE(n,r,u,h,f,y,C,M){f===Nr&&(f=Ut);let k=0,W=0,oe=0<f.length?f[0]:null,ve=0<y.length?y[0]:null;for(;null!==oe||null!==ve;){const Qe=k<f.length?f[k+1]:void 0,ut=W<y.length?y[W+1]:void 0;let tn,Ft=null;oe===ve?(k+=2,W+=2,Qe!==ut&&(Ft=ve,tn=ut)):null===ve||null!==oe&&oe<ve?(k+=2,Ft=oe):(W+=2,Ft=ve,tn=ut),null!==Ft&&sE(n,r,u,h,Ft,tn,C,M),oe=k<f.length?f[k]:null,ve=W<y.length?y[W]:null}}(f,M,C,C[er],C[y+1],C[y+1]=function Tc(n,r,u){if(null==u||""===u)return Ut;const h=[],f=_o(u);if(Array.isArray(f))for(let y=0;y<f.length;y++)n(h,f[y],!0);else if("object"==typeof f)for(const y in f)f.hasOwnProperty(y)&&n(h,y,f[y]);else"string"==typeof f&&r(h,f);return h}(n,r,u),h,y)}}(kE,vs,n,!0)}function vs(n,r){for(let u=function ti(n){return function vo(n){yn.key=0,yn.keyEnd=0,yn.value=0,yn.valueEnd=0,yn.textEnd=n.length}(n),oi(n,Eo(n,0,yn.textEnd))}(r);u>=0;u=oi(r,u))Ys(n,br(r),!0)}function oh(n,r){return r>=n.expandoStartIndex}function Qs(n,r,u,h){const f=n.data;if(null===f[u+1]){const y=f[Rr()],C=oh(n,u);VE(y,h)&&null===r&&!C&&(r=!1),r=function iv(n,r,u,h){const f=function _l(n){const r=Un.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=h?r.residualClasses:r.residualStyles;if(null===f)0===(h?r.classBindings:r.styleBindings)&&(u=vd(u=pu(null,n,r,u,h),r.attrs,h),y=null);else{const C=r.directiveStylingLast;if(-1===C||n[C]!==f)if(u=pu(f,n,r,u,h),null===y){let k=function Fv(n,r,u){const h=u?r.classBindings:r.styleBindings;if(0!==T(h))return n[o(h)]}(n,r,h);void 0!==k&&Array.isArray(k)&&(k=pu(null,n,r,k[1],h),k=vd(k,r.attrs,h),function xa(n,r,u,h){n[o(u?r.classBindings:r.styleBindings)]=h}(n,r,h,k))}else y=function Yf(n,r,u){let h;const f=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<f;y++)h=vd(h,n[y].hostAttrs,u);return vd(h,r.attrs,u)}(n,r,h)}return void 0!==y&&(h?r.residualClasses=y:r.residualStyles=y),u}(f,y,r,h),function st(n,r,u,h,f,y){let C=y?r.classBindings:r.styleBindings,M=o(C),k=T(C);n[h]=u;let oe,W=!1;if(Array.isArray(u)?(oe=u[1],(null===oe||Xu(u,oe)>0)&&(W=!0)):oe=u,f)if(0!==k){const Qe=o(n[M+1]);n[h+1]=s(Qe,M),0!==Qe&&(n[Qe+1]=F(n[Qe+1],h)),n[M+1]=function g(n,r){return 131071&n|r<<17}(n[M+1],h)}else n[h+1]=s(M,0),0!==M&&(n[M+1]=F(n[M+1],h)),M=h;else n[h+1]=s(k,0),0===M?M=h:n[k+1]=F(n[k+1],h),k=h;W&&(n[h+1]=E(n[h+1])),At(n,oe,h,!0),At(n,oe,h,!1),function wt(n,r,u,h,f){const y=f?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&Xu(y,r)>=0&&(u[h+1]=X(u[h+1]))}(r,oe,n,h,y),C=s(M,k),y?r.classBindings=C:r.styleBindings=C}(f,y,r,u,C,h)}}function pu(n,r,u,h,f){let y=null;const C=u.directiveEnd;let M=u.directiveStylingLast;for(-1===M?M=u.directiveStart:M++;M<C&&(y=r[M],h=vd(h,y.hostAttrs,f),y!==n);)M++;return null!==n&&(u.directiveStylingLast=M),h}function vd(n,r,u){const h=u?1:2;let f=-1;if(null!==r)for(let y=0;y<r.length;y++){const C=r[y];"number"==typeof C?f=C:f===h&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ys(n,C,!!u||r[++y]))}return void 0===n?null:n}function kE(n,r,u){const h=String(r);""!==h&&!h.includes(" ")&&Ys(n,h,u)}function sE(n,r,u,h,f,y,C,M){if(!(3&r.type))return;const k=n.data,W=k[M+1],oe=function G(n){return 1==(1&n)}(W)?oE(k,r,u,f,T(W),C):void 0;sv(oe)||(sv(y)||function c(n){return 2==(2&n)}(W)&&(y=oE(k,null,u,f,M,C)),function Gm(n,r,u,h,f){if(r)f?n.addClass(u,h):n.removeClass(u,h);else{let y=-1===h.indexOf("-")?void 0:_h.DashCase;null==f?n.removeStyle(u,h,y):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),y|=_h.Important),n.setStyle(u,h,f,y))}}(h,C,R(Rr(),u),f,y))}function oE(n,r,u,h,f,y){const C=null===r;let M;for(;f>0;){const k=n[f],W=Array.isArray(k),oe=W?k[1]:k,ve=null===oe;let Qe=u[f+1];Qe===Nr&&(Qe=ve?Ut:void 0);let ut=ve?fh(Qe,h):oe===h?Qe:void 0;if(W&&!sv(ut)&&(ut=fh(k,h)),sv(ut)&&(M=ut,C))return M;const Ft=n[f+1];f=C?o(Ft):T(Ft)}if(null!==r){let k=y?r.residualClasses:r.residualStyles;null!=k&&(M=fh(k,h))}return M}function sv(n){return void 0!==n}function VE(n,r){return 0!=(n.flags&(r?8:16))}function UE(n,r=""){const u=Bt(),h=tr(),f=n+mr,y=h.firstCreatePass?vc(h,f,1,r,null):h.data[f],C=Vv(h,u,y,r,n);u[f]=C,A()&&$r(h,u,C,y),Xr(y,!1)}let Vv=(n,r,u,h,f)=>(O(!0),function uf(n,r){return n.createText(r)}(r[er],h));function o_(n){return a_("",n,""),o_}function a_(n,r,u){const h=Bt(),f=ih(h,n,r,u);return f!==Nr&&xu(h,Rr(),f),a_}function ov(n,r,u,h,f){const y=Bt(),C=sh(y,n,r,u,h,f);return C!==Nr&&xu(y,Rr(),C),ov}const qh=void 0;var EE=["en",[["a","p"],["AM","PM"],qh],[["AM","PM"],qh,qh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qh,"{1} 'at' {0}",qh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zE(n){const u=Math.floor(Math.abs(n)),h=n.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Sg={};function Gv(n){const r=function CE(n){return n.toLowerCase().replace(/_/g,"-")}(n);let u=wE(r);if(u)return u;const h=r.split("-")[0];if(u=wE(h),u)return u;if("en"===h)return EE;throw new _e(701,!1)}function zv(n){return Gv(n)[Ag.PluralCase]}function wE(n){return n in Sg||(Sg[n]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[n]),Sg[n]}var Ag=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ag||{});const e="en-US";let N=e;function QE(n,r,u,h,f){if(n=Tt(n),Array.isArray(n))for(let y=0;y<n.length;y++)QE(n[y],r,u,h,f);else{const y=tr(),C=Bt();let M=Ma(n)?n:Tt(n.provide),k=Kg(n);const W=Ws(),oe=1048575&W.providerIndexes,ve=W.directiveStart,Qe=W.providerIndexes>>20;if(Ma(n)||!n.multi){const ut=new Wr(k,f,ll),Ft=JE(M,r,f?oe:oe+Qe,ve);-1===Ft?(Du(Jl(W,C),y,M),XE(y,n,r.length),r.push(M),W.directiveStart++,W.directiveEnd++,f&&(W.providerIndexes+=1048576),u.push(ut),C.push(ut)):(u[Ft]=ut,C[Ft]=ut)}else{const ut=JE(M,r,oe+Qe,ve),Ft=JE(M,r,oe,oe+Qe),Tn=Ft>=0&&u[Ft];if(f&&!Tn||!f&&!(ut>=0&&u[ut])){Du(Jl(W,C),y,M);const sr=function wI(n,r,u,h,f){const y=new Wr(n,u,ll);return y.multi=[],y.index=r,y.componentProviders=0,Yw(y,f,h&&!u),y}(f?EI:vI,u.length,f,h,k);!f&&Tn&&(u[Ft].providerFactory=sr),XE(y,n,r.length,0),r.push(M),W.directiveStart++,W.directiveEnd++,f&&(W.providerIndexes+=1048576),u.push(sr),C.push(sr)}else XE(y,n,ut>-1?ut:Ft,Yw(u[f?Ft:ut],k,!f&&h));!f&&h&&Tn&&u[Ft].componentProviders++}}}function XE(n,r,u,h){const f=Ma(r),y=function Ip(n){return!!n.useClass}(r);if(f||y){const k=(y?Tt(r.useClass):r).prototype.ngOnDestroy;if(k){const W=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const oe=W.indexOf(u);-1===oe?W.push(u,[h,k]):W[oe+1].push(h,k)}else W.push(u,k)}}}function Yw(n,r,u){return u&&n.componentProviders++,n.multi.push(r)-1}function JE(n,r,u,h){for(let f=u;f<h;f++)if(r[f]===n)return f;return-1}function vI(n,r,u,h){return ew(this.multi,[])}function EI(n,r,u,h){const f=this.multi;let y;if(this.providerFactory){const C=this.providerFactory.componentProviders,M=Yu(u,u[pt],this.providerFactory.index,h);y=M.slice(0,C),ew(f,y);for(let k=C;k<M.length;k++)y.push(M[k])}else y=[],ew(f,y);return y}function ew(n,r){for(let u=0;u<n.length;u++)r.push((0,n[u])());return r}function Qw(n,r=[]){return u=>{u.providersResolver=(h,f)=>function _I(n,r,u){const h=tr();if(h.firstCreatePass){const f=is(n);QE(u,h.data,h.blueprint,f,!0),QE(r,h.data,h.blueprint,f,!1)}}(h,f?f(n):n,r)}}class lv{}class Xw{}function CI(n,r){return new tw(n,r??null,[])}class tw extends lv{constructor(r,u,h){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ny(this);const f=Rt(r);this._bootstrapComponents=_c(f.bootstrap),this._r3Injector=Sf(r,u,[{provide:lv,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver},...h],Re(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class nw extends Xw{constructor(r){super(),this.moduleType=r}create(r){return new tw(this.moduleType,r,[])}}class Jw extends lv{constructor(r){super(),this.componentFactoryResolver=new Ny(this),this.instance=null;const u=new ty([...r.providers,{provide:lv,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver}],r.parent||zg(),r.debugName,new Set(["environment"]));this.injector=u,r.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function e0(n,r,u=null){return new Jw({providers:n,parent:r,debugName:u,runEnvironmentInitializers:!0}).injector}let bI=(()=>{class n{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const h=Jm(0,u.type),f=h.length>0?e0([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,f)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=dn({token:n,providedIn:"environment",factory:()=>new n(Hn(ul))})}return n})();function t0(n){n.getStandaloneInjector=r=>r.get(bI).getOrCreateStandaloneInjector(n)}function l0(n,r,u,h,f){return d0(Bt(),en(),n,r,u,h,f)}function Yv(n,r){const u=n[r];return u===Nr?void 0:u}function d0(n,r,u,h,f,y,C){const M=r+u;return rh(n,M,f,y)?Gl(n,M+2,C?h.call(C,f,y):h(f,y)):Yv(n,M+2)}function g0(n,r){const u=tr();let h;const f=n+mr;u.firstCreatePass?(h=function HI(n,r){if(r)for(let u=r.length-1;u>=0;u--){const h=r[u];if(n===h.name)return h}}(r,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks??=[]).push(f,h.onDestroy)):h=u.data[f];const y=h.factory||(h.factory=ar(h.type)),C=cr(ll);try{const M=Ia(!1),k=y();return Ia(M),function Pv(n,r,u,h){u>=n.data.length&&(n.data[u]=null,n.blueprint[u]=null),r[u]=h}(u,Bt(),f,k),k}finally{cr(C)}}function m0(n,r,u){const h=n+mr,f=Bt(),y=De(f,h);return Qv(f,h)?function c0(n,r,u,h,f,y){const C=r+u;return ya(n,C,f)?Gl(n,C+1,y?h.call(y,f):h(f)):Yv(n,C+1)}(f,en(),r,y.transform,u,y):y.transform(u)}function y0(n,r,u,h){const f=n+mr,y=Bt(),C=De(y,f);return Qv(y,f)?d0(y,en(),r,C.transform,u,h,C):C.transform(u,h)}function Qv(n,r){return n[pt].data[r].pure}function iw(n){return r=>{setTimeout(n,void 0,r)}}const Xf=class WI extends w.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,u,h){let f=r,y=u||(()=>null),C=h;if(r&&"object"==typeof r){const k=r;f=k.next?.bind(k),y=k.error?.bind(k),C=k.complete?.bind(k)}this.__isAsync&&(y=iw(y),f&&(f=iw(f)),C&&(C=iw(C)));const M=super.subscribe({next:f,error:y,complete:C});return r instanceof ne.w0&&r.add(M),M}};function qI(){return this._results[Symbol.iterator]()}class sw{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Xf)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=sw.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=qI)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,u){return this._results.reduce(r,u)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,u){const h=this;h.dirty=!1;const f=function Ds(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function ru(n,r,u){if(n.length!==r.length)return!1;for(let h=0;h<n.length;h++){let f=n[h],y=r[h];if(u&&(f=u(f),y=u(y)),y!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function ZI(n,r,u,h=!0){const f=r[pt];if(function lp(n,r,u,h){const f=rs+h,y=u.length;h>0&&(u[f-1][qn]=r),h<y-rs?(r[qn]=u[f],ro(u,rs+h,r)):(u.push(r),r[qn]=null),r[vn]=u;const C=r[Po];null!==C&&u!==C&&function Ld(n,r){const u=n[Do];r[li]!==r[vn][vn][li]&&(n[Cs]=!0),null===u?n[Do]=[r]:u.push(r)}(C,r);const M=r[ys];null!==M&&M.insertView(n),r[Qt]|=128}(f,r,n,u),h){const y=Oi(u,n),C=r[er],M=us(C,n[Vi]);null!==M&&function Nl(n,r,u,h,f,y){h[bt]=f,h[ai]=r,Fd(n,h,u,1,f,y)}(f,n[ai],C,r,M,y)}}let Xv=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=XI}return n})();const YI=Xv,QI=class extends YI{constructor(r,u,h){super(),this._declarationLView=r,this._declarationTContainer=u,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,u){return this.createEmbeddedViewImpl(r,u)}createEmbeddedViewImpl(r,u,h){const f=function KI(n,r,u,h){const f=r.tView,M=dm(n,f,u,4096&n[Qt]?4096:16,null,r,null,null,null,h?.injector??null,h?.hydrationInfo??null);M[Po]=n[r.index];const W=n[ys];return null!==W&&(M[ys]=W.createEmbeddedView(f)),eg(f,M,u),M}(this._declarationLView,this._declarationTContainer,r,{injector:u,hydrationInfo:h});return new Vf(f)}};function XI(){return DE(Ws(),Bt())}function DE(n,r){return 4&n.type?new QI(r,n,Bl(n,r)):null}let TE=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=sb}return n})();function sb(){return I0(Ws(),Bt())}const ob=TE,w0=class extends ob{constructor(r,u,h){super(),this._lContainer=r,this._hostTNode=u,this._hostLView=h}get element(){return Bl(this._hostTNode,this._hostLView)}get injector(){return new Ha(this._hostTNode,this._hostLView)}get parentInjector(){const r=kc(this._hostTNode,this._hostLView);if(Ks(r)){const u=Pc(r,this._hostLView),h=Ua(r);return new Ha(u[pt].data[h+8],u)}return new Ha(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const u=C0(this._lContainer);return null!==u&&u[r]||null}get length(){return this._lContainer.length-rs}createEmbeddedView(r,u,h){let f,y;"number"==typeof h?f=h:null!=h&&(f=h.index,y=h.injector);const M=r.createEmbeddedViewImpl(u||{},y,null);return this.insertImpl(M,f,false),M}createComponent(r,u,h,f,y){const C=r&&!function Ro(n){return"function"==typeof n}(r);let M;if(C)M=u;else{const tn=u||{};M=tn.index,h=tn.injector,f=tn.projectableNodes,y=tn.environmentInjector||tn.ngModuleRef}const k=C?r:new sg(se(r)),W=h||this.parentInjector;if(!y&&null==k.ngModule){const Tn=(C?W:this.parentInjector).get(ul,null);Tn&&(y=Tn)}se(k.componentType??{});const ut=k.create(W,f,null,y);return this.insertImpl(ut.hostView,M,false),ut}insert(r,u){return this.insertImpl(r,u,!1)}insertImpl(r,u,h){const f=r._lView;if(function lr(n){return Is(n[vn])}(f)){const k=this.indexOf(r);if(-1!==k)this.detach(k);else{const W=f[vn],oe=new w0(W,W[ai],W[vn]);oe.detach(oe.indexOf(r))}}const C=this._adjustIndex(u),M=this._lContainer;return ZI(M,f,C,!h),r.attachToViewContainerRef(),ro(aw(M),C,r),r}move(r,u){return this.insert(r,u)}indexOf(r){const u=C0(this._lContainer);return null!==u?u.indexOf(r):-1}remove(r){const u=this._adjustIndex(r,-1),h=I(this._lContainer,u);h&&(iu(aw(this._lContainer),u),m(h[pt],h))}detach(r){const u=this._adjustIndex(r,-1),h=I(this._lContainer,u);return h&&null!=iu(aw(this._lContainer),u)?new Vf(h):null}_adjustIndex(r,u=0){return r??this.length+u}};function C0(n){return n[8]}function aw(n){return n[8]||(n[8]=[])}function I0(n,r){let u;const h=r[n.index];return Is(h)?u=h:(u=Qp(h,r,null,n),r[n.index]=u,xf(r,u)),b0(u,r,n,h),new w0(u,n,r)}let b0=function D0(n,r,u,h){if(n[Vi])return;let f;f=8&u.type?Dr(h):function ab(n,r){const u=n[er],h=u.createComment(""),f=J(r,n);return at(u,us(u,f),h,function za(n,r){return n.nextSibling(r)}(u,f),!1),h}(r,u),n[Vi]=f};class uw{constructor(r){this.queryList=r,this.matches=null}clone(){return new uw(this.queryList)}setDirty(){this.queryList.setDirty()}}class lw{constructor(r=[]){this.queries=r}createEmbeddedView(r){const u=r.queries;if(null!==u){const h=null!==r.contentQueries?r.contentQueries[0]:u.length,f=[];for(let y=0;y<h;y++){const C=u.getByIndex(y);f.push(this.queries[C.indexInDeclarationView].clone())}return new lw(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let u=0;u<this.queries.length;u++)null!==x0(r,u).matches&&this.queries[u].setDirty()}}class T0{constructor(r,u,h=null){this.predicate=r,this.flags=u,this.read=h}}class cw{constructor(r=[]){this.queries=r}elementStart(r,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(r,u)}elementEnd(r){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(r)}embeddedTView(r){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,y=this.getByIndex(h).embeddedTView(r,f);y&&(y.indexInDeclarationView=h,null!==u?u.push(y):u=[y])}return null!==u?new cw(u):null}template(r,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(r,u)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class dw{constructor(r,u=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(r,u){this.isApplyingToNode(u)&&this.matchTNode(r,u)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,u){this.elementStart(r,u)}embeddedTView(r,u){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,u),new dw(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=r.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(r,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const y=h[f];this.matchTNodeWithReadOption(r,u,cb(u,y)),this.matchTNodeWithReadOption(r,u,Lc(u,r,y,!1,!1))}else h===Xv?4&u.type&&this.matchTNodeWithReadOption(r,u,-1):this.matchTNodeWithReadOption(r,u,Lc(u,r,h,!1,!1))}matchTNodeWithReadOption(r,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===ud||f===TE||f===Xv&&4&u.type)this.addMatch(u.index,-2);else{const y=Lc(u,r,f,!1,!1);null!==y&&this.addMatch(u.index,y)}else this.addMatch(u.index,h)}}addMatch(r,u){null===this.matches?this.matches=[r,u]:this.matches.push(r,u)}}function cb(n,r){const u=n.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===r)return u[h+1];return null}function hb(n,r,u,h){return-1===u?function db(n,r){return 11&n.type?Bl(n,r):4&n.type?DE(n,r):null}(r,n):-2===u?function fb(n,r,u){return u===ud?Bl(r,n):u===Xv?DE(r,n):u===TE?I0(r,n):void 0}(n,r,h):Yu(n,n[pt],u,r)}function S0(n,r,u,h){const f=r[ys].queries[h];if(null===f.matches){const y=n.data,C=u.matches,M=[];for(let k=0;k<C.length;k+=2){const W=C[k];M.push(W<0?null:hb(r,y[W],C[k+1],u.metadata.read))}f.matches=M}return f.matches}function hw(n,r,u,h){const f=n.queries.getByIndex(u),y=f.matches;if(null!==y){const C=S0(n,r,f,u);for(let M=0;M<y.length;M+=2){const k=y[M];if(k>0)h.push(C[M/2]);else{const W=y[M+1],oe=r[-k];for(let ve=rs;ve<oe.length;ve++){const Qe=oe[ve];Qe[Po]===Qe[vn]&&hw(Qe[pt],Qe,W,h)}if(null!==oe[Do]){const ve=oe[Do];for(let Qe=0;Qe<ve.length;Qe++){const ut=ve[Qe];hw(ut[pt],ut,W,h)}}}}}return h}function A0(n){const r=Bt(),u=tr(),h=bu();Yl(h+1);const f=x0(u,h);if(n.dirty&&function Ct(n){return 4==(4&n[Qt])}(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?hw(u,r,h,[]):S0(u,r,f,h);n.reset(y,im),n.notifyOnChanges()}return!0}return!1}function M0(n,r,u,h){const f=tr();if(f.firstCreatePass){const y=Ws();(function P0(n,r,u){null===n.queries&&(n.queries=new cw),n.queries.track(new dw(r,u))})(f,new T0(r,u,h),y.index),function mb(n,r){const u=n.contentQueries||(n.contentQueries=[]);r!==(u.length?u[u.length-1]:-1)&&u.push(n.queries.length-1,r)}(f,n),2==(2&u)&&(f.staticContentQueries=!0)}!function N0(n,r,u){const h=new sw(4==(4&u));(function Rf(n,r,u,h){const f=Of(r);f.push(u),n.firstCreatePass&&Xp(n).push(h,f.length-1)})(n,r,h,h.destroy),null===r[ys]&&(r[ys]=new lw),r[ys].queries.push(new uw(h))}(f,Bt(),u)}function R0(){return function gb(n,r){return n[ys].queries[r].queryList}(Bt(),bu())}function x0(n,r){return n.queries.getByIndex(r)}function fw(n){return!!Rt(n)}const Y0=new fi("Application Initializer");let _w=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h}),this.appInits=Qn(Y0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const f of this.appInits){const y=f();if(Dc(y))u.push(y);else if(Gh(y)){const C=new Promise((M,k)=>{y.subscribe({complete:M,error:k})});u.push(C)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q0=(()=>{class n{log(u){console.log(u)}warn(u){console.warn(u)}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const AE=new fi("LocaleId",{providedIn:"root",factory:()=>Qn(AE,gn.Optional|gn.SkipSelf)||function Vb(){return typeof $localize<"u"&&$localize.locale||e}()}),Ub=new fi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let X0=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new S.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class jb{constructor(r,u){this.ngModuleFactory=r,this.componentFactories=u}}let Hb=(()=>{class n{compileModuleSync(u){return new nw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),y=_c(Rt(u).declarations).reduce((C,M)=>{const k=se(M);return k&&C.push(new sg(k)),C},[]);return new jb(h,y)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tC(...n){}class ql{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xf(!1),this.onMicrotaskEmpty=new Xf(!1),this.onStable=new Xf(!1),this.onError=new Xf(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function zb(){const n="function"==typeof Yn.requestAnimationFrame;let r=Yn[n?"requestAnimationFrame":"setTimeout"],u=Yn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&u){const h=r[Zone.__symbol__("OriginalDelegate")];h&&(r=h);const f=u[Zone.__symbol__("OriginalDelegate")];f&&(u=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function Kb(n){const r=()=>{!function qb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Ew(n),n.isCheckStableRunning=!0,vw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Ew(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,y,C,M)=>{try{return nC(n),u.invokeTask(f,y,C,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),rC(n)}},onInvoke:(u,h,f,y,C,M,k)=>{try{return nC(n),u.invoke(f,y,C,M,k)}finally{n.shouldCoalesceRunChangeDetection&&r(),rC(n)}},onHasTask:(u,h,f,y)=>{u.hasTask(f,y),h===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,Ew(n),vw(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(u,h,f,y)=>(u.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ql.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(ql.isInAngularZone())throw new _e(909,!1)}run(r,u,h){return this._inner.run(r,u,h)}runTask(r,u,h,f){const y=this._inner,C=y.scheduleEventTask("NgZoneEvent: "+f,r,Wb,tC,tC);try{return y.runTask(C,u,h)}finally{y.cancelTask(C)}}runGuarded(r,u,h){return this._inner.runGuarded(r,u,h)}runOutsideAngular(r){return this._outer.run(r)}}const Wb={};function vw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ew(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function nC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rC(n){n._nesting--,vw(n)}class Zb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xf,this.onMicrotaskEmpty=new Xf,this.onStable=new Xf,this.onError=new Xf}run(r,u,h){return r.apply(u,h)}runGuarded(r,u,h){return r.apply(u,h)}runOutsideAngular(r){return r()}runTask(r,u,h,f){return r.apply(u,h)}}const iC=new fi("",{providedIn:"root",factory:sC});function sC(){const n=Qn(ql);let r=!0;const u=new fe.y(f=>{r=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{f.next(r),f.complete()})}),h=new fe.y(f=>{let y;n.runOutsideAngular(()=>{y=n.onStable.subscribe(()=>{ql.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(r=!0,f.next(!0))})})});const C=n.onUnstable.subscribe(()=>{ql.assertInAngularZone(),r&&(r=!1,n.runOutsideAngular(()=>{f.next(!1)}))});return()=>{y.unsubscribe(),C.unsubscribe()}});return(0,Pe.T)(u,h.pipe((0,Ve.B)()))}const oC=new fi(""),aC=new fi("");let ww,Yb=(()=>{class n{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ww||(function Qb(n){ww=n}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ql.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==y),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}static#e=this.\u0275fac=function(h){return new(h||n)(Hn(ql),Hn(uC),Hn(aC))};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac})}return n})(),uC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return ww?.findTestabilityInTree(this,u,h)??null}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Um=null;const lC=new fi("AllowMultipleToken"),Cw=new fi("PlatformDestroyListeners"),Iw=new fi("appBootstrapListener");class eD{constructor(r,u){this.name=r,this.token=u}}function hC(n,r,u=[]){const h=`Platform: ${r}`,f=new fi(h);return(y=[])=>{let C=bw();if(!C||C.injector.get(lC,!1)){const M=[...u,...y,{provide:f,useValue:!0}];n?n(M):function tD(n){if(Um&&!Um.get(lC,!1))throw new _e(400,!1);(function cC(){!function Yo(n){ka=n}(()=>{throw new _e(600,!1)})})(),Um=n;const r=n.get(pC);(function dC(n){n.get(bp,null)?.forEach(u=>u())})(n)}(function fC(n=[],r){return Xd.create({name:r,providers:[{provide:cu,useValue:"platform"},{provide:Cw,useValue:new Set([()=>Um=null])},...n]})}(M,h))}return function rD(n){const r=bw();if(!r)throw new _e(401,!1);return r}()}}function bw(){return Um?.get(pC)??null}let pC=(()=>{class n{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function iD(n="zone.js",r){return"noop"===n?new Zb:"zone.js"===n?new ql(r):n}(h?.ngZone,function gC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return f.run(()=>{const y=function II(n,r,u){return new tw(n,r,u)}(u.moduleType,this.injector,function EC(n){return[{provide:ql,useFactory:n},{provide:wp,multi:!0,useFactory:()=>{const r=Qn(oD,{optional:!0});return()=>r.initialize()}},{provide:vC,useFactory:sD},{provide:iC,useFactory:sC}]}(()=>f)),C=y.injector.get(ld,null);return f.runOutsideAngular(()=>{const M=f.onError.subscribe({next:k=>{C.handleError(k)}});y.onDestroy(()=>{ME(this._modules,y),M.unsubscribe()})}),function mC(n,r,u){try{const h=u();return Dc(h)?h.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):h}catch(h){throw r.runOutsideAngular(()=>n.handleError(h)),h}}(C,f,()=>{const M=y.injector.get(_w);return M.runInitializers(),M.donePromise.then(()=>(function j(n){jt(n,"Expected localeId to be defined"),"string"==typeof n&&(N=n.toLowerCase().replace(/_/g,"-"))}(y.injector.get(AE,e)||e),this._moduleDoBootstrap(y),y))})})}bootstrapModule(u,h=[]){const f=yC({},h);return function Xb(n,r,u){const h=new nw(u);return Promise.resolve(h)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(u){const h=u.injector.get(hv);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new _e(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Cw,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(h){return new(h||n)(Hn(Xd))};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function yC(n,r){return Array.isArray(r)?r.reduce(yC,n):{...n,...r}}let hv=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Qn(vC),this.zoneIsStable=Qn(iC),this.componentTypes=[],this.components=[],this.isStable=Qn(X0).hasPendingTasks.pipe((0,Ke.w)(u=>u?(0,Ge.of)(!1):this.zoneIsStable),(0,$e.x)(),(0,Ve.B)()),this._injector=Qn(ul)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof N_;if(!this._injector.get(_w).done)throw!f&&St(u),new _e(405,!1);let C;C=f?u:this._injector.get(Cf).resolveComponentFactory(u),this.componentTypes.push(C.componentType);const M=function Jb(n){return n.isBoundToModule}(C)?void 0:this._injector.get(lv),W=C.create(Xd.NULL,[],h||C.selector,M),oe=W.location.nativeElement,ve=W.injector.get(oC,null);return ve?.registerApplication(oe),W.onDestroy(()=>{this.detachView(W.hostView),ME(this.components,W),ve?.unregisterApplication(oe)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;ME(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(Iw,[]);h.push(...this._bootstrapListeners),h.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>ME(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new _e(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ME(n,r){const u=n.indexOf(r);u>-1&&n.splice(u,1)}const vC=new fi("",{providedIn:"root",factory:()=>Qn(ld).handleError.bind(void 0)});function sD(){const n=Qn(ql),r=Qn(ld);return u=>n.runOutsideAngular(()=>r.handleError(u))}let oD=(()=>{class n{constructor(){this.zone=Qn(ql),this.applicationRef=Qn(hv)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||n)};static#t=this.\u0275prov=dn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uD(){return!1}function lD(){}let cD=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=dD}return n})();function dD(n){return function hD(n,r,u){if(ao(n)&&!u){const h=lt(n.index,r);return new Vf(h,h)}return 47&n.type?new Vf(r[li],r):null}(Ws(),Bt(),16==(16&n))}class bC{constructor(){}supports(r){return Ic(r)}create(r){return new _D(r)}}const yD=(n,r)=>r;class _D{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||yD}forEachItem(r){let u;for(u=this._itHead;null!==u;u=u._next)r(u)}forEachOperation(r){let u=this._itHead,h=this._removalsHead,f=0,y=null;for(;u||h;){const C=!h||u&&u.currentIndex<TC(h,f,y)?u:h,M=TC(C,f,y),k=C.currentIndex;if(C===h)f--,h=h._nextRemoved;else if(u=u._next,null==C.previousIndex)f++;else{y||(y=[]);const W=M-f,oe=k-f;if(W!=oe){for(let Qe=0;Qe<W;Qe++){const ut=Qe<y.length?y[Qe]:y[Qe]=0,Ft=ut+Qe;oe<=Ft&&Ft<W&&(y[Qe]=ut+1)}y[C.previousIndex]=oe-W}}M!==k&&r(C,M,k)}}forEachPreviousItem(r){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)r(u)}forEachAddedItem(r){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)r(u)}forEachMovedItem(r){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)r(u)}forEachRemovedItem(r){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)r(u)}forEachIdentityChange(r){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)r(u)}diff(r){if(null==r&&(r=[]),!Ic(r))throw new _e(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,y,C,u=this._itHead,h=!1;if(Array.isArray(r)){this.length=r.length;for(let M=0;M<this.length;M++)y=r[M],C=this._trackByFn(M,y),null!==u&&Object.is(u.trackById,C)?(h&&(u=this._verifyReinsertion(u,y,C,M)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,C,M),h=!0),u=u._next}else f=0,function lg(n,r){if(Array.isArray(n))for(let u=0;u<n.length;u++)r(n[u]);else{const u=n[Symbol.iterator]();let h;for(;!(h=u.next()).done;)r(h.value)}}(r,M=>{C=this._trackByFn(f,M),null!==u&&Object.is(u.trackById,C)?(h&&(u=this._verifyReinsertion(u,M,C,f)),Object.is(u.item,M)||this._addIdentityChange(u,M)):(u=this._mismatch(u,M,C,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,u,h,f){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(r.item,u)||this._addIdentityChange(r,u),this._reinsertAfter(r,y,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(r.item,u)||this._addIdentityChange(r,u),this._moveAfter(r,y,f)):r=this._addAfter(new vD(u,h),y,f),r}_verifyReinsertion(r,u,h,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==y?r=this._reinsertAfter(y,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const u=r._next;this._addToRemovals(this._unlink(r)),r=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,y=r._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(r,u,h),this._addToMoves(r,h),r}_moveAfter(r,u,h){return this._unlink(r),this._insertAfter(r,u,h),this._addToMoves(r,h),r}_addAfter(r,u,h){return this._insertAfter(r,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,u,h){const f=null===u?this._itHead:u._next;return r._next=f,r._prev=u,null===f?this._itTail=r:f._prev=r,null===u?this._itHead=r:u._next=r,null===this._linkedRecords&&(this._linkedRecords=new DC),this._linkedRecords.put(r),r.currentIndex=h,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const u=r._prev,h=r._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,r}_addToMoves(r,u){return r.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,u){return r.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class vD{constructor(r,u){this.item=r,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ED{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,r))return h;return null}remove(r){const u=r._prevDup,h=r._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class DC{constructor(){this.map=new Map}put(r){const u=r.trackById;let h=this.map.get(u);h||(h=new ED,this.map.set(u,h)),h.add(r)}get(r,u){const f=this.map.get(r);return f?f.get(r,u):null}remove(r){const u=r.trackById;return this.map.get(u).remove(r)&&this.map.delete(u),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TC(n,r,u){const h=n.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+r+f}class SC{constructor(){}supports(r){return r instanceof Map||cg(r)}create(){return new wD}}class wD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let u;for(u=this._mapHead;null!==u;u=u._next)r(u)}forEachPreviousItem(r){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)r(u)}forEachChangedItem(r){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)r(u)}forEachAddedItem(r){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)r(u)}forEachRemovedItem(r){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)r(u)}diff(r){if(r){if(!(r instanceof Map||cg(r)))throw new _e(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(r,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const y=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,y)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,u){if(r){const h=r._prev;return u._next=r,u._prev=h,r._prev=u,h&&(h._next=u),r===this._mapHead&&(this._mapHead=u),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(r,u){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,u);const y=f._prev,C=f._next;return y&&(y._next=C),C&&(C._prev=y),f._next=null,f._prev=null,f}const h=new CD(r);return this._records.set(r,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,u){Object.is(u,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=u,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,u){r instanceof Map?r.forEach(u):Object.keys(r).forEach(h=>u(r[h],h))}}class CD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function AC(){return new Mw([new bC])}let Mw=(()=>{class n{static#e=this.\u0275prov=dn({token:n,providedIn:"root",factory:AC});constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new n(u)}static extend(u){return{provide:n,useFactory:h=>n.create(u,h||AC()),deps:[[n,new ph,new Ji]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new _e(901,!1)}}return n})();function MC(){return new Rw([new SC])}let Rw=(()=>{class n{static#e=this.\u0275prov=dn({token:n,providedIn:"root",factory:MC});constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new n(u)}static extend(u){return{provide:n,useFactory:h=>n.create(u,h||MC()),deps:[[n,new ph,new Ji]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new _e(901,!1)}}return n})();const DD=hC(null,"core",[]);let TD=(()=>{class n{constructor(u){}static#e=this.\u0275fac=function(h){return new(h||n)(Hn(hv))};static#t=this.\u0275mod=Fi({type:n});static#n=this.\u0275inj=ur({})}return n})();function kD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function FD(n){const r=se(n);if(!r)return null;const u=new sg(r);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},6593:(nn,it,U)=>{U.d(it,{Dx:()=>Kr,b2:()=>Sn,q6:()=>dn,se:()=>Xe});var w=U(5879),ne=U(6814);class S extends ne.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends S{static makeCurrent(){(0,ne.HT)(new fe)}onAndCancel(ae,ie,le){return ae.addEventListener(ie,le),()=>{ae.removeEventListener(ie,le)}}dispatchEvent(ae,ie){ae.dispatchEvent(ie)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,ie){return(ie=ie||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,ie){return"window"===ie?window:"document"===ie?ae:"body"===ie?ae.body:null}getBaseHref(ae){const ie=function Ge(){return Pe=Pe||document.querySelector("base"),Pe?Pe.getAttribute("href"):null}();return null==ie?null:function Ke(re){Ve=Ve||document.createElement("a"),Ve.setAttribute("href",re);const ae=Ve.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(ie)}resetBaseElement(){Pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,ne.Mx)(document.cookie,ae)}}let Ve,Pe=null,pe=(()=>{class re{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(le){return new(le||re)};static#t=this.\u0275prov=w.Yz7({token:re,factory:re.\u0275fac})}return re})();const ye=new w.OlP("EventManagerPlugins");let Re=(()=>{class re{constructor(ie,le){this._zone=le,this._eventNameToPlugin=new Map,ie.forEach(Ze=>{Ze.manager=this}),this._plugins=ie.slice().reverse()}addEventListener(ie,le,Ze){return this._findPluginFor(le).addEventListener(ie,le,Ze)}getZone(){return this._zone}_findPluginFor(ie){let le=this._eventNameToPlugin.get(ie);if(le)return le;if(le=this._plugins.find(Dt=>Dt.supports(ie)),!le)throw new w.vHH(5101,!1);return this._eventNameToPlugin.set(ie,le),le}static#e=this.\u0275fac=function(le){return new(le||re)(w.LFG(ye),w.LFG(w.R0b))};static#t=this.\u0275prov=w.Yz7({token:re,factory:re.\u0275fac})}return re})();class It{constructor(ae){this._doc=ae}}const yt="ng-app-id";let $t=(()=>{class re{constructor(ie,le,Ze,Dt={}){this.doc=ie,this.appId=le,this.nonce=Ze,this.platformId=Dt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,ne.PM)(Dt),this.resetHostNodes()}addStyles(ie){for(const le of ie)1===this.changeUsageCount(le,1)&&this.onStyleAdded(le)}removeStyles(ie){for(const le of ie)this.changeUsageCount(le,-1)<=0&&this.onStyleRemoved(le)}ngOnDestroy(){const ie=this.styleNodesInDOM;ie&&(ie.forEach(le=>le.remove()),ie.clear());for(const le of this.getAllStyles())this.onStyleRemoved(le);this.resetHostNodes()}addHost(ie){this.hostNodes.add(ie);for(const le of this.getAllStyles())this.addStyleToHost(ie,le)}removeHost(ie){this.hostNodes.delete(ie)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ie){for(const le of this.hostNodes)this.addStyleToHost(le,ie)}onStyleRemoved(ie){const le=this.styleRef;le.get(ie)?.elements?.forEach(Ze=>Ze.remove()),le.delete(ie)}collectServerRenderedStyles(){const ie=this.doc.head?.querySelectorAll(`style[${yt}="${this.appId}"]`);if(ie?.length){const le=new Map;return ie.forEach(Ze=>{null!=Ze.textContent&&le.set(Ze.textContent,Ze)}),le}return null}changeUsageCount(ie,le){const Ze=this.styleRef;if(Ze.has(ie)){const Dt=Ze.get(ie);return Dt.usage+=le,Dt.usage}return Ze.set(ie,{usage:le,elements:[]}),le}getStyleElement(ie,le){const Ze=this.styleNodesInDOM,Dt=Ze?.get(le);if(Dt?.parentNode===ie)return Ze.delete(le),Dt.removeAttribute(yt),Dt;{const qt=this.doc.createElement("style");return this.nonce&&qt.setAttribute("nonce",this.nonce),qt.textContent=le,this.platformIsServer&&qt.setAttribute(yt,this.appId),qt}}addStyleToHost(ie,le){const Ze=this.getStyleElement(ie,le);ie.appendChild(Ze);const Dt=this.styleRef,qt=Dt.get(le)?.elements;qt?qt.push(Ze):Dt.set(le,{elements:[Ze],usage:1})}resetHostNodes(){const ie=this.hostNodes;ie.clear(),ie.add(this.doc.head)}static#e=this.\u0275fac=function(le){return new(le||re)(w.LFG(ne.K0),w.LFG(w.AFp),w.LFG(w.Ojb,8),w.LFG(w.Lbi))};static#t=this.\u0275prov=w.Yz7({token:re,factory:re.\u0275fac})}return re})();const Tt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vt=/%COMP%/g,et=new w.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function vt(re,ae){return ae.map(ie=>ie.replace(Vt,re))}let Xe=(()=>{class re{constructor(ie,le,Ze,Dt,qt,Pn,hn,Ut=null){this.eventManager=ie,this.sharedStylesHost=le,this.appId=Ze,this.removeStylesOnCompDestroy=Dt,this.doc=qt,this.platformId=Pn,this.ngZone=hn,this.nonce=Ut,this.rendererByCompId=new Map,this.platformIsServer=(0,ne.PM)(Pn),this.defaultRenderer=new ot(ie,qt,hn,this.platformIsServer)}createRenderer(ie,le){if(!ie||!le)return this.defaultRenderer;this.platformIsServer&&le.encapsulation===w.ifc.ShadowDom&&(le={...le,encapsulation:w.ifc.Emulated});const Ze=this.getOrCreateRenderer(ie,le);return Ze instanceof Nt?Ze.applyToHost(ie):Ze instanceof pr&&Ze.applyStyles(),Ze}getOrCreateRenderer(ie,le){const Ze=this.rendererByCompId;let Dt=Ze.get(le.id);if(!Dt){const qt=this.doc,Pn=this.ngZone,hn=this.eventManager,Ut=this.sharedStylesHost,Ln=this.removeStylesOnCompDestroy,kr=this.platformIsServer;switch(le.encapsulation){case w.ifc.Emulated:Dt=new Nt(hn,Ut,le,this.appId,Ln,qt,Pn,kr);break;case w.ifc.ShadowDom:return new kn(hn,Ut,ie,le,qt,Pn,this.nonce,kr);default:Dt=new pr(hn,Ut,le,Ln,qt,Pn,kr)}Ze.set(le.id,Dt)}return Dt}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(le){return new(le||re)(w.LFG(Re),w.LFG($t),w.LFG(w.AFp),w.LFG(et),w.LFG(ne.K0),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(w.Ojb))};static#t=this.\u0275prov=w.Yz7({token:re,factory:re.\u0275fac})}return re})();class ot{constructor(ae,ie,le,Ze){this.eventManager=ae,this.doc=ie,this.ngZone=le,this.platformIsServer=Ze,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,ie){return ie?this.doc.createElementNS(Tt[ie]||ie,ae):this.doc.createElement(ae)}createComment(ae){return this.doc.createComment(ae)}createText(ae){return this.doc.createTextNode(ae)}appendChild(ae,ie){(Cn(ae)?ae.content:ae).appendChild(ie)}insertBefore(ae,ie,le){ae&&(Cn(ae)?ae.content:ae).insertBefore(ie,le)}removeChild(ae,ie){ae&&ae.removeChild(ie)}selectRootElement(ae,ie){let le="string"==typeof ae?this.doc.querySelector(ae):ae;if(!le)throw new w.vHH(-5104,!1);return ie||(le.textContent=""),le}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,ie,le,Ze){if(Ze){ie=Ze+":"+ie;const Dt=Tt[Ze];Dt?ae.setAttributeNS(Dt,ie,le):ae.setAttribute(ie,le)}else ae.setAttribute(ie,le)}removeAttribute(ae,ie,le){if(le){const Ze=Tt[le];Ze?ae.removeAttributeNS(Ze,ie):ae.removeAttribute(`${le}:${ie}`)}else ae.removeAttribute(ie)}addClass(ae,ie){ae.classList.add(ie)}removeClass(ae,ie){ae.classList.remove(ie)}setStyle(ae,ie,le,Ze){Ze&(w.JOm.DashCase|w.JOm.Important)?ae.style.setProperty(ie,le,Ze&w.JOm.Important?"important":""):ae.style[ie]=le}removeStyle(ae,ie,le){le&w.JOm.DashCase?ae.style.removeProperty(ie):ae.style[ie]=""}setProperty(ae,ie,le){ae[ie]=le}setValue(ae,ie){ae.nodeValue=ie}listen(ae,ie,le){if("string"==typeof ae&&!(ae=(0,ne.q)().getGlobalEventTarget(this.doc,ae)))throw new Error(`Unsupported event target ${ae} for event ${ie}`);return this.eventManager.addEventListener(ae,ie,this.decoratePreventDefault(le))}decoratePreventDefault(ae){return ie=>{if("__ngUnwrap__"===ie)return ae;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ae(ie)):ae(ie))&&ie.preventDefault()}}}function Cn(re){return"TEMPLATE"===re.tagName&&void 0!==re.content}class kn extends ot{constructor(ae,ie,le,Ze,Dt,qt,Pn,hn){super(ae,Dt,qt,hn),this.sharedStylesHost=ie,this.hostEl=le,this.shadowRoot=le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ut=vt(Ze.id,Ze.styles);for(const Ln of Ut){const kr=document.createElement("style");Pn&&kr.setAttribute("nonce",Pn),kr.textContent=Ln,this.shadowRoot.appendChild(kr)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}appendChild(ae,ie){return super.appendChild(this.nodeOrShadowRoot(ae),ie)}insertBefore(ae,ie,le){return super.insertBefore(this.nodeOrShadowRoot(ae),ie,le)}removeChild(ae,ie){return super.removeChild(this.nodeOrShadowRoot(ae),ie)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pr extends ot{constructor(ae,ie,le,Ze,Dt,qt,Pn,hn){super(ae,Dt,qt,Pn),this.sharedStylesHost=ie,this.removeStylesOnCompDestroy=Ze,this.styles=hn?vt(hn,le.styles):le.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Nt extends pr{constructor(ae,ie,le,Ze,Dt,qt,Pn,hn){const Ut=Ze+"-"+le.id;super(ae,ie,le,Dt,qt,Pn,hn,Ut),this.contentAttr=function Be(re){return"_ngcontent-%COMP%".replace(Vt,re)}(Ut),this.hostAttr=function gt(re){return"_nghost-%COMP%".replace(Vt,re)}(Ut)}applyToHost(ae){this.applyStyles(),this.setAttribute(ae,this.hostAttr,"")}createElement(ae,ie){const le=super.createElement(ae,ie);return super.setAttribute(le,this.contentAttr,""),le}}let Jn=(()=>{class re extends It{constructor(ie){super(ie)}supports(ie){return!0}addEventListener(ie,le,Ze){return ie.addEventListener(le,Ze,!1),()=>this.removeEventListener(ie,le,Ze)}removeEventListener(ie,le,Ze){return ie.removeEventListener(le,Ze)}static#e=this.\u0275fac=function(le){return new(le||re)(w.LFG(ne.K0))};static#t=this.\u0275prov=w.Yz7({token:re,factory:re.\u0275fac})}return re})();const xe=["alt","control","meta","shift"],ge={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Le={alt:re=>re.altKey,control:re=>re.ctrlKey,meta:re=>re.metaKey,shift:re=>re.shiftKey};let He=(()=>{class re extends It{constructor(ie){super(ie)}supports(ie){return null!=re.parseEventName(ie)}addEventListener(ie,le,Ze){const Dt=re.parseEventName(le),qt=re.eventCallback(Dt.fullKey,Ze,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,ne.q)().onAndCancel(ie,Dt.domEventName,qt))}static parseEventName(ie){const le=ie.toLowerCase().split("."),Ze=le.shift();if(0===le.length||"keydown"!==Ze&&"keyup"!==Ze)return null;const Dt=re._normalizeKey(le.pop());let qt="",Pn=le.indexOf("code");if(Pn>-1&&(le.splice(Pn,1),qt="code."),xe.forEach(Ut=>{const Ln=le.indexOf(Ut);Ln>-1&&(le.splice(Ln,1),qt+=Ut+".")}),qt+=Dt,0!=le.length||0===Dt.length)return null;const hn={};return hn.domEventName=Ze,hn.fullKey=qt,hn}static matchEventFullKeyCode(ie,le){let Ze=ge[ie.key]||ie.key,Dt="";return le.indexOf("code.")>-1&&(Ze=ie.code,Dt="code."),!(null==Ze||!Ze)&&(Ze=Ze.toLowerCase()," "===Ze?Ze="space":"."===Ze&&(Ze="dot"),xe.forEach(qt=>{qt!==Ze&&(0,Le[qt])(ie)&&(Dt+=qt+".")}),Dt+=Ze,Dt===le)}static eventCallback(ie,le,Ze){return Dt=>{re.matchEventFullKeyCode(Dt,ie)&&Ze.runGuarded(()=>le(Dt))}}static _normalizeKey(ie){return"esc"===ie?"escape":ie}static#e=this.\u0275fac=function(le){return new(le||re)(w.LFG(ne.K0))};static#t=this.\u0275prov=w.Yz7({token:re,factory:re.\u0275fac})}return re})();const dn=(0,w.eFA)(w._c5,"browser",[{provide:w.Lbi,useValue:ne.bD},{provide:w.g9A,useValue:function Jt(){fe.makeCurrent()},multi:!0},{provide:ne.K0,useFactory:function pn(){return(0,w.RDi)(document),document},deps:[]}]),Bn=new w.OlP(""),ur=[{provide:w.rWj,useClass:class $e{addToWindow(ae){w.dqk.getAngularTestability=(le,Ze=!0)=>{const Dt=ae.findTestabilityInTree(le,Ze);if(null==Dt)throw new w.vHH(5103,!1);return Dt},w.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),w.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),w.dqk.frameworkStabilizers||(w.dqk.frameworkStabilizers=[]),w.dqk.frameworkStabilizers.push(le=>{const Ze=w.dqk.getAllAngularTestabilities();let Dt=Ze.length,qt=!1;const Pn=function(hn){qt=qt||hn,Dt--,0==Dt&&le(qt)};Ze.forEach(hn=>{hn.whenStable(Pn)})})}findTestabilityInTree(ae,ie,le){return null==ie?null:ae.getTestability(ie)??(le?(0,ne.q)().isShadowRoot(ie)?this.findTestabilityInTree(ae,ie.host,!0):this.findTestabilityInTree(ae,ie.parentElement,!0):null)}},deps:[]},{provide:w.lri,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]},{provide:w.dDg,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]}],fn=[{provide:w.zSh,useValue:"root"},{provide:w.qLn,useFactory:function Nn(){return new w.qLn},deps:[]},{provide:ye,useClass:Jn,multi:!0,deps:[ne.K0,w.R0b,w.Lbi]},{provide:ye,useClass:He,multi:!0,deps:[ne.K0]},Xe,$t,Re,{provide:w.FYo,useExisting:Xe},{provide:ne.JF,useClass:pe,deps:[]},[]];let Sn=(()=>{class re{constructor(ie){}static withServerTransition(ie){return{ngModule:re,providers:[{provide:w.AFp,useValue:ie.appId}]}}static#e=this.\u0275fac=function(le){return new(le||re)(w.LFG(Bn,12))};static#t=this.\u0275mod=w.oAB({type:re});static#n=this.\u0275inj=w.cJS({providers:[...fn,...ur],imports:[ne.ez,w.hGG]})}return re})(),Kr=(()=>{class re{constructor(ie){this._doc=ie}getTitle(){return this._doc.title}setTitle(ie){this._doc.title=ie||""}static#e=this.\u0275fac=function(le){return new(le||re)(w.LFG(ne.K0))};static#t=this.\u0275prov=w.Yz7({token:re,factory:function(le){let Ze=null;return Ze=le?new le:function ji(){return new Kr((0,w.LFG)(ne.K0))}(),Ze},providedIn:"root"})}return re})();typeof window<"u"&&window},8113:(nn,it,U)=>{U.d(it,{F0:()=>to,rH:()=>Fa,Bz:()=>Pi,lC:()=>xo});var w=U(5879),ne=U(2664),S=U(2459),fe=U(2096),Pe=U(5619),Ge=U(5592),Ve=U(7453),Ke=U(2737),$e=U(7400),pe=U(4564),ye=U(2714),Re=U(8251),It=U(7103);function yt(...A){const O=(0,pe.yG)(A),b=(0,pe.jO)(A),{args:P,keys:z}=(0,Ve.D)(A);if(0===P.length)return(0,S.D)([],O);const de=new Ge.y(function $t(A,O,b=Ke.y){return P=>{Tt(O,()=>{const{length:z}=A,de=new Array(z);let ce=z,tt=z;for(let be=0;be<z;be++)Tt(O,()=>{const xn=(0,S.D)(A[be],O);let _n=!1;xn.subscribe((0,Re.x)(P,Wr=>{de[be]=Wr,_n||(_n=!0,tt--),tt||P.next(b(de.slice()))},()=>{--ce||P.complete()}))},P)},P)}}(P,O,z?ce=>(0,ye.n)(z,ce):Ke.y));return b?de.pipe((0,$e.Z)(b)):de}function Tt(A,O,b){A?(0,It.f)(b,A,O):O()}var Vt=U(6973),xt=U(5211),ze=U(4911),Lt=U(8407),_e=U(4674);function et(A,O){const b=(0,_e.m)(A)?A:()=>A,P=z=>z.error(b());return new Ge.y(O?z=>O.schedule(P,0,z):P)}var Be=U(6232),gt=U(7394),vt=U(9360);function Xe(){return(0,vt.e)((A,O)=>{let b=null;A._refCount++;const P=(0,Re.x)(O,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(b=null);const z=A._connection,de=b;b=null,z&&(!de||z===de)&&z.unsubscribe(),O.unsubscribe()});A.subscribe(P),P.closed||(b=A.connect())})}class ot extends Ge.y{constructor(O,b){super(),this.source=O,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,vt.A)(O)&&(this.lift=O.lift)}_subscribe(O){return this.getSubject().subscribe(O)}getSubject(){const O=this._subject;return(!O||O.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:O}=this;this._subject=this._connection=null,O?.unsubscribe()}connect(){let O=this._connection;if(!O){O=this._connection=new gt.w0;const b=this.getSubject();O.add(this.source.subscribe((0,Re.x)(b,void 0,()=>{this._teardown(),b.complete()},P=>{this._teardown(),b.error(P)},()=>this._teardown()))),O.closed&&(this._connection=null,O=gt.w0.EMPTY)}return O}refCount(){return Xe()(this)}}var Ot=U(8645),Yt=U(6814),Cn=U(7398),kn=U(4664),pr=U(8180),Nt=U(7921),Jn=U(2181),xe=U(1631),ge=U(1374),Le=U(6328),He=U(9397),rt=U(4829);function mt(A){return(0,vt.e)((O,b)=>{let de,P=null,z=!1;P=O.subscribe((0,Re.x)(b,void 0,void 0,ce=>{de=(0,rt.Xf)(A(ce,mt(A)(O))),P?(P.unsubscribe(),P=null,de.subscribe(b)):z=!0})),z&&(P.unsubscribe(),P=null,de.subscribe(b))})}var ht=U(6699),jt=U(3572);function Jt(A){return A<=0?()=>Be.E:(0,vt.e)((O,b)=>{let P=[];O.subscribe((0,Re.x)(b,z=>{P.push(z),A<P.length&&P.shift()},()=>{for(const z of P)b.next(z);b.complete()},void 0,()=>{P=null}))})}var Nn=U(3026),dn=U(4716),Bn=U(7537),ur=U(6593);const fn="primary",Sn=Symbol("RouteTitle");class jn{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const b=this.params[O];return Array.isArray(b)?b[0]:b}return null}getAll(O){if(this.has(O)){const b=this.params[O];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function or(A){return new jn(A)}function ws(A,O,b){const P=b.path.split("/");if(P.length>A.length||"full"===b.pathMatch&&(O.hasChildren()||P.length<A.length))return null;const z={};for(let de=0;de<P.length;de++){const ce=P[de],tt=A[de];if(ce.startsWith(":"))z[ce.substring(1)]=tt;else if(ce!==tt.path)return null}return{consumed:A.slice(0,P.length),posParams:z}}function Kr(A,O){const b=A?Object.keys(A):void 0,P=O?Object.keys(O):void 0;if(!b||!P||b.length!=P.length)return!1;let z;for(let de=0;de<b.length;de++)if(z=b[de],!Ai(A[z],O[z]))return!1;return!0}function Ai(A,O){if(Array.isArray(A)&&Array.isArray(O)){if(A.length!==O.length)return!1;const b=[...A].sort(),P=[...O].sort();return b.every((z,de)=>P[de]===z)}return A===O}function yi(A){return A.length>0?A[A.length-1]:null}function gn(A){return(0,ne.b)(A)?A:(0,w.QGY)(A)?(0,S.D)(Promise.resolve(A)):(0,fe.of)(A)}const zn={exact:function _i(A,O,b){if(!vi(A.segments,O.segments)||!rr(A.segments,O.segments,b)||A.numberOfChildren!==O.numberOfChildren)return!1;for(const P in O.children)if(!A.children[P]||!_i(A.children[P],O.children[P],b))return!1;return!0},subset:Sr},An={exact:function Or(A,O){return Kr(A,O)},subset:function Yn(A,O){return Object.keys(O).length<=Object.keys(A).length&&Object.keys(O).every(b=>Ai(A[b],O[b]))},ignored:()=>!0};function cr(A,O,b){return zn[b.paths](A.root,O.root,b.matrixParams)&&An[b.queryParams](A.queryParams,O.queryParams)&&!("exact"===b.fragment&&A.fragment!==O.fragment)}function Sr(A,O,b){return Yi(A,O,O.segments,b)}function Yi(A,O,b,P){if(A.segments.length>b.length){const z=A.segments.slice(0,b.length);return!(!vi(z,b)||O.hasChildren()||!rr(z,b,P))}if(A.segments.length===b.length){if(!vi(A.segments,b)||!rr(A.segments,b,P))return!1;for(const z in O.children)if(!A.children[z]||!Sr(A.children[z],O.children[z],P))return!1;return!0}{const z=b.slice(0,A.segments.length),de=b.slice(A.segments.length);return!!(vi(A.segments,z)&&rr(A.segments,z,P)&&A.children[fn])&&Yi(A.children[fn],O,de,P)}}function rr(A,O,b){return O.every((P,z)=>An[b](A[z].parameters,P.parameters))}class Fr{constructor(O=new an([],{}),b={},P=null){this.root=O,this.queryParams=b,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=or(this.queryParams)),this._queryParamMap}toString(){return Br.serialize(this)}}class an{constructor(O,b){this.segments=O,this.children=b,this.parent=null,Object.values(b).forEach(P=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nr(this)}}class Ar{constructor(O,b){this.path=O,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=or(this.parameters)),this._parameterMap}toString(){return ie(this)}}function vi(A,O){return A.length===O.length&&A.every((b,P)=>b.path===O[P].path)}let Vr=(()=>{class A{static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:function(){return new Dn},providedIn:"root"})}return A})();class Dn{parse(O){const b=new Fe(O);return new Fr(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(O){const b=`/${vr(O.root,!0)}`,P=function Ze(A){const O=Object.keys(A).map(b=>{const P=A[b];return Array.isArray(P)?P.map(z=>`${Qr(b)}=${Qr(z)}`).join("&"):`${Qr(b)}=${Qr(P)}`}).filter(b=>!!b);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${b}${P}${"string"==typeof O.fragment?`#${function Qn(A){return encodeURI(A)}(O.fragment)}`:""}`}}const Br=new Dn;function nr(A){return A.segments.map(O=>ie(O)).join("/")}function vr(A,O){if(!A.hasChildren())return nr(A);if(O){const b=A.children[fn]?vr(A.children[fn],!1):"",P=[];return Object.entries(A.children).forEach(([z,de])=>{z!==fn&&P.push(`${z}:${vr(de,!1)}`)}),P.length>0?`${b}(${P.join("//")})`:b}{const b=function Ei(A,O){let b=[];return Object.entries(A.children).forEach(([P,z])=>{P===fn&&(b=b.concat(O(z,P)))}),Object.entries(A.children).forEach(([P,z])=>{P!==fn&&(b=b.concat(O(z,P)))}),b}(A,(P,z)=>z===fn?[vr(A.children[fn],!1)]:[`${z}:${vr(P,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[fn]?`${nr(A)}/${b[0]}`:`${nr(A)}/(${b.join("//")})`}}function Hn(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qr(A){return Hn(A).replace(/%3B/gi,";")}function Oe(A){return Hn(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function re(A){return decodeURIComponent(A)}function ae(A){return re(A.replace(/\+/g,"%20"))}function ie(A){return`${Oe(A.path)}${function le(A){return Object.keys(A).map(O=>`;${Oe(O)}=${Oe(A[O])}`).join("")}(A.parameters)}`}const Dt=/^[^\/()?;#]+/;function qt(A){const O=A.match(Dt);return O?O[0]:""}const Pn=/^[^\/()?;=#]+/,Ut=/^[^=?&#]+/,kr=/^[^&#]+/;class Fe{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(O.length>0||Object.keys(b).length>0)&&(P[fn]=new an(O,b)),P}parseSegment(){const O=qt(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new w.vHH(4009,!1);return this.capture(O),new Ar(re(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const b=function hn(A){const O=A.match(Pn);return O?O[0]:""}(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const z=qt(this.remaining);z&&(P=z,this.capture(P))}O[re(b)]=re(P)}parseQueryParam(O){const b=function Ln(A){const O=A.match(Ut);return O?O[0]:""}(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const ce=function Je(A){const O=A.match(kr);return O?O[0]:""}(this.remaining);ce&&(P=ce,this.capture(P))}const z=ae(b),de=ae(P);if(O.hasOwnProperty(z)){let ce=O[z];Array.isArray(ce)||(ce=[ce],O[z]=ce),ce.push(de)}else O[z]=de}parseParens(O){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=qt(this.remaining),z=this.remaining[P.length];if("/"!==z&&")"!==z&&";"!==z)throw new w.vHH(4010,!1);let de;P.indexOf(":")>-1?(de=P.slice(0,P.indexOf(":")),this.capture(de),this.capture(":")):O&&(de=fn);const ce=this.parseChildren();b[de]=1===Object.keys(ce).length?ce[fn]:new an([],ce),this.consumeOptional("//")}return b}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new w.vHH(4011,!1)}}function je(A){return A.segments.length>0?new an([],{[fn]:A}):A}function Te(A){const O={};for(const P of Object.keys(A.children)){const de=Te(A.children[P]);if(P===fn&&0===de.segments.length&&de.hasChildren())for(const[ce,tt]of Object.entries(de.children))O[ce]=tt;else(de.segments.length>0||de.hasChildren())&&(O[P]=de)}return function Ne(A){if(1===A.numberOfChildren&&A.children[fn]){const O=A.children[fn];return new an(A.segments.concat(O.segments),O.children)}return A}(new an(A.segments,O))}function Ye(A){return A instanceof Fr}function ln(A){let O;const z=je(function b(de){const ce={};for(const be of de.children){const xn=b(be);ce[be.outlet]=xn}const tt=new an(de.url,ce);return de===A&&(O=tt),tt}(A.root));return O??z}function Zt(A,O,b,P){let z=A;for(;z.parent;)z=z.parent;if(0===O.length)return dr(z,z,z,b,P);const de=function es(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Hi(!0,0,A);let O=0,b=!1;const P=A.reduce((z,de,ce)=>{if("object"==typeof de&&null!=de){if(de.outlets){const tt={};return Object.entries(de.outlets).forEach(([be,xn])=>{tt[be]="string"==typeof xn?xn.split("/"):xn}),[...z,{outlets:tt}]}if(de.segmentPath)return[...z,de.segmentPath]}return"string"!=typeof de?[...z,de]:0===ce?(de.split("/").forEach((tt,be)=>{0==be&&"."===tt||(0==be&&""===tt?b=!0:".."===tt?O++:""!=tt&&z.push(tt))}),z):[...z,de]},[]);return new Hi(b,O,P)}(O);if(de.toRoot())return dr(z,z,new an([],{}),b,P);const ce=function Cr(A,O,b){if(A.isAbsolute)return new wr(O,!0,0);if(!b)return new wr(O,!1,NaN);if(null===b.parent)return new wr(b,!0,0);const P=Mn(A.commands[0])?0:1;return function ts(A,O,b){let P=A,z=O,de=b;for(;de>z;){if(de-=z,P=P.parent,!P)throw new w.vHH(4005,!1);z=P.segments.length}return new wr(P,!1,z-de)}(b,b.segments.length-1+P,A.numberOfDoubleDots)}(de,z,A),tt=ce.processChildren?ls(ce.segmentGroup,ce.index,de.commands):Mi(ce.segmentGroup,ce.index,de.commands);return dr(z,ce.segmentGroup,tt,b,P)}function Mn(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function gr(A){return"object"==typeof A&&null!=A&&A.outlets}function dr(A,O,b,P,z){let ce,de={};P&&Object.entries(P).forEach(([be,xn])=>{de[be]=Array.isArray(xn)?xn.map(_n=>`${_n}`):`${xn}`}),ce=A===O?b:jr(A,O,b);const tt=je(Te(ce));return new Fr(tt,de,z)}function jr(A,O,b){const P={};return Object.entries(A.children).forEach(([z,de])=>{P[z]=de===O?b:jr(de,O,b)}),new an(A.segments,P)}class Hi{constructor(O,b,P){if(this.isAbsolute=O,this.numberOfDoubleDots=b,this.commands=P,O&&P.length>0&&Mn(P[0]))throw new w.vHH(4003,!1);const z=P.find(gr);if(z&&z!==yi(P))throw new w.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wr{constructor(O,b,P){this.segmentGroup=O,this.processChildren=b,this.index=P}}function Mi(A,O,b){if(A||(A=new an([],{})),0===A.segments.length&&A.hasChildren())return ls(A,O,b);const P=function so(A,O,b){let P=0,z=O;const de={match:!1,pathIndex:0,commandIndex:0};for(;z<A.segments.length;){if(P>=b.length)return de;const ce=A.segments[z],tt=b[P];if(gr(tt))break;const be=`${tt}`,xn=P<b.length-1?b[P+1]:null;if(z>0&&void 0===be)break;if(be&&xn&&"object"==typeof xn&&void 0===xn.outlets){if(!Xs(be,xn,ce))return de;P+=2}else{if(!Xs(be,{},ce))return de;P++}z++}return{match:!0,pathIndex:z,commandIndex:P}}(A,O,b),z=b.slice(P.commandIndex);if(P.match&&P.pathIndex<A.segments.length){const de=new an(A.segments.slice(0,P.pathIndex),{});return de.children[fn]=new an(A.segments.slice(P.pathIndex),A.children),ls(de,0,z)}return P.match&&0===z.length?new an(A.segments,{}):P.match&&!A.hasChildren()?Mr(A,O,b):P.match?ls(A,0,z):Mr(A,O,b)}function ls(A,O,b){if(0===b.length)return new an(A.segments,{});{const P=function wi(A){return gr(A[0])?A[0].outlets:{[fn]:A}}(b),z={};if(!P[fn]&&A.children[fn]&&1===A.numberOfChildren&&0===A.children[fn].segments.length){const de=ls(A.children[fn],O,b);return new an(A.segments,de.children)}return Object.entries(P).forEach(([de,ce])=>{"string"==typeof ce&&(ce=[ce]),null!==ce&&(z[de]=Mi(A.children[de],O,ce))}),Object.entries(A.children).forEach(([de,ce])=>{void 0===P[de]&&(z[de]=ce)}),new an(A.segments,z)}}function Mr(A,O,b){const P=A.segments.slice(0,O);let z=0;for(;z<b.length;){const de=b[z];if(gr(de)){const be=Bs(de.outlets);return new an(P,be)}if(0===z&&Mn(b[0])){P.push(new Ar(A.segments[O].path,gs(b[0]))),z++;continue}const ce=gr(de)?de.outlets[fn]:`${de}`,tt=z<b.length-1?b[z+1]:null;ce&&tt&&Mn(tt)?(P.push(new Ar(ce,gs(tt))),z+=2):(P.push(new Ar(ce,{})),z++)}return new an(P,{})}function Bs(A){const O={};return Object.entries(A).forEach(([b,P])=>{"string"==typeof P&&(P=[P]),null!==P&&(O[b]=Mr(new an([],{}),0,P))}),O}function gs(A){const O={};return Object.entries(A).forEach(([b,P])=>O[b]=`${P}`),O}function Xs(A,O,b){return A==b.path&&Kr(O,b.parameters)}const js="imperative";class Ci{constructor(O,b){this.id=O,this.url=b}}class xs extends Ci{constructor(O,b,P="imperative",z=null){super(O,b),this.type=0,this.navigationTrigger=P,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Os extends Ci{constructor(O,b,P){super(O,b),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Co extends Ci{constructor(O,b,P,z){super(O,b),this.reason=P,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fi extends Ci{constructor(O,b,P,z){super(O,b),this.reason=P,this.code=z,this.type=16}}class aa extends Ci{constructor(O,b,P,z){super(O,b),this.error=P,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ii extends Ci{constructor(O,b,P,z){super(O,b),this.urlAfterRedirects=P,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ee extends Ci{constructor(O,b,P,z){super(O,b),this.urlAfterRedirects=P,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class he extends Ci{constructor(O,b,P,z,de){super(O,b),this.urlAfterRedirects=P,this.state=z,this.shouldActivate=de,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class se extends Ci{constructor(O,b,P,z){super(O,b),this.urlAfterRedirects=P,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ie extends Ci{constructor(O,b,P,z){super(O,b),this.urlAfterRedirects=P,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ct{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class St{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Rt{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zt{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class we{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ce{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class We{constructor(O,b,P){this.routerEvent=O,this.position=b,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bt{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new pt,this.attachRef=null}}let pt=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(b,P){const z=this.getOrCreateContext(b);z.outlet=P,this.contexts.set(b,z)}onChildOutletDestroyed(b){const P=this.getContext(b);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let P=this.getContext(b);return P||(P=new bt,this.contexts.set(b,P)),P}getContext(b){return this.contexts.get(b)||null}static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})();class Qt{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const b=this.pathFromRoot(O);return b.length>1?b[b.length-2]:null}children(O){const b=vn(O,this._root);return b?b.children.map(P=>P.value):[]}firstChild(O){const b=vn(O,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(O){const b=qn(O,this._root);return b.length<2?[]:b[b.length-2].children.map(z=>z.value).filter(z=>z!==O)}pathFromRoot(O){return qn(O,this._root).map(b=>b.value)}}function vn(A,O){if(A===O.value)return O;for(const b of O.children){const P=vn(A,b);if(P)return P}return null}function qn(A,O){if(A===O.value)return[O];for(const b of O.children){const P=qn(A,b);if(P.length)return P.unshift(O),P}return[]}class Hr{constructor(O,b){this.value=O,this.children=b}toString(){return`TreeNode(${this.value})`}}function ai(A){const O={};return A&&A.children.forEach(b=>O[b.value.outlet]=b),O}class Wi extends Qt{constructor(O,b){super(O),this.snapshot=b,li(this,O)}toString(){return this.snapshot.toString()}}function ui(A,O){const b=function Qi(A,O){const ce=new Hs([],{},{},"",{},fn,O,null,{});return new ds("",new Hr(ce,[]))}(0,O),P=new Pe.X([new Ar("",{})]),z=new Pe.X({}),de=new Pe.X({}),ce=new Pe.X({}),tt=new Pe.X(""),be=new cs(P,z,ce,tt,de,fn,O,b.root);return be.snapshot=b.root,new Wi(new Hr(be,[]),b)}class cs{constructor(O,b,P,z,de,ce,tt,be){this.urlSubject=O,this.paramsSubject=b,this.queryParamsSubject=P,this.fragmentSubject=z,this.dataSubject=de,this.outlet=ce,this.component=tt,this._futureSnapshot=be,this.title=this.dataSubject?.pipe((0,Cn.U)(xn=>xn[Sn]))??(0,fe.of)(void 0),this.url=O,this.params=b,this.queryParams=P,this.fragment=z,this.data=de}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Cn.U)(O=>or(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Cn.U)(O=>or(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function er(A,O="emptyOnly"){const b=A.pathFromRoot;let P=0;if("always"!==O)for(P=b.length-1;P>=1;){const z=b[P],de=b[P-1];if(z.routeConfig&&""===z.routeConfig.path)P--;else{if(de.component)break;P--}}return function ms(A){return A.reduce((O,b)=>({params:{...O.params,...b.params},data:{...O.data,...b.data},resolve:{...b.data,...O.resolve,...b.routeConfig?.data,...b._resolvedData}}),{params:{},data:{},resolve:{}})}(b.slice(P))}class Hs{get title(){return this.data?.[Sn]}constructor(O,b,P,z,de,ce,tt,be,xn){this.url=O,this.params=b,this.queryParams=P,this.fragment=z,this.data=de,this.outlet=ce,this.component=tt,this.routeConfig=be,this._resolve=xn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=or(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=or(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ds extends Qt{constructor(O,b){super(b),this.url=O,li(this,b)}toString(){return Po(this._root)}}function li(A,O){O.value._routerState=A,O.children.forEach(b=>li(A,b))}function Po(A){const O=A.children.length>0?` { ${A.children.map(Po).join(", ")} } `:"";return`${A.value}${O}`}function ua(A){if(A.snapshot){const O=A.snapshot,b=A._futureSnapshot;A.snapshot=b,Kr(O.queryParams,b.queryParams)||A.queryParamsSubject.next(b.queryParams),O.fragment!==b.fragment&&A.fragmentSubject.next(b.fragment),Kr(O.params,b.params)||A.paramsSubject.next(b.params),function ji(A,O){if(A.length!==O.length)return!1;for(let b=0;b<A.length;++b)if(!Kr(A[b],O[b]))return!1;return!0}(O.url,b.url)||A.urlSubject.next(b.url),Kr(O.data,b.data)||A.dataSubject.next(b.data)}else A.snapshot=A._futureSnapshot,A.dataSubject.next(A._futureSnapshot.data)}function ys(A,O){const b=Kr(A.params,O.params)&&function zi(A,O){return vi(A,O)&&A.every((b,P)=>Kr(b.parameters,O[P].parameters))}(A.url,O.url);return b&&!(!A.parent!=!O.parent)&&(!A.parent||ys(A.parent,O.parent))}let xo=(()=>{class A{constructor(){this.activated=null,this._activatedRoute=null,this.name=fn,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.parentContexts=(0,w.f3M)(pt),this.location=(0,w.f3M)(w.s_b),this.changeDetector=(0,w.f3M)(w.sBO),this.environmentInjector=(0,w.f3M)(w.lqb),this.inputBinder=(0,w.f3M)(bi,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(b){if(b.name){const{firstChange:P,previousValue:z}=b.name;if(P)return;this.isTrackedInParentContexts(z)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(z)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(b){return this.parentContexts.getContext(b)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);b?.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,!1);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,P){this.activated=b,this._activatedRoute=P,this.location.insert(b.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,P){if(this.isActivated)throw new w.vHH(4013,!1);this._activatedRoute=b;const z=this.location,ce=b.snapshot.component,tt=this.parentContexts.getOrCreateContext(this.name).children,be=new Rs(b,tt,z.injector);this.activated=z.createComponent(ce,{index:z.length,injector:be,environmentInjector:P??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275dir=w.lG2({type:A,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[w.TTD]})}return A})();class Rs{constructor(O,b,P){this.route=O,this.childContexts=b,this.parent=P}get(O,b){return O===cs?this.route:O===pt?this.childContexts:this.parent.get(O,b)}}const bi=new w.OlP("");let Lr=(()=>{class A{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(b){this.unsubscribeFromRouteData(b),this.subscribeToRouteData(b)}unsubscribeFromRouteData(b){this.outletDataSubscriptions.get(b)?.unsubscribe(),this.outletDataSubscriptions.delete(b)}subscribeToRouteData(b){const{activatedRoute:P}=b,z=yt([P.queryParams,P.params,P.data]).pipe((0,kn.w)(([de,ce,tt],be)=>(tt={...de,...ce,...tt},0===be?(0,fe.of)(tt):Promise.resolve(tt)))).subscribe(de=>{if(!b.isActivated||!b.activatedComponentRef||b.activatedRoute!==P||null===P.component)return void this.unsubscribeFromRouteData(b);const ce=(0,w.qFp)(P.component);if(ce)for(const{templateName:tt}of ce.inputs)b.activatedComponentRef.setInput(tt,de[tt]);else this.unsubscribeFromRouteData(b)});this.outletDataSubscriptions.set(b,z)}static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac})}return A})();function oo(A,O,b){if(b&&A.shouldReuseRoute(O.value,b.value.snapshot)){const P=b.value;P._futureSnapshot=O.value;const z=function mr(A,O,b){return O.children.map(P=>{for(const z of b.children)if(A.shouldReuseRoute(P.value,z.value.snapshot))return oo(A,P,z);return oo(A,P)})}(A,O,b);return new Hr(P,z)}{if(A.shouldAttach(O.value)){const de=A.retrieve(O.value);if(null!==de){const ce=de.route;return ce.value._futureSnapshot=O.value,ce.children=O.children.map(tt=>oo(A,tt)),ce}}const P=function pi(A){return new cs(new Pe.X(A.url),new Pe.X(A.params),new Pe.X(A.queryParams),new Pe.X(A.fragment),new Pe.X(A.data),A.outlet,A.component,A)}(O.value),z=O.children.map(de=>oo(A,de));return new Hr(P,z)}}const bo="ngNavigationCancelingError";function Cs(A,O){const{redirectTo:b,navigationBehaviorOptions:P}=Ye(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,z=Vi(!1,0,O);return z.url=b,z.navigationBehaviorOptions=P,z}function Vi(A,O,b){const P=new Error("NavigationCancelingError: "+(A||""));return P[bo]=!0,P.cancellationCode=O,b&&(P.url=b),P}function ns(A){return Do(A)&&Ye(A.url)}function Do(A){return A&&A[bo]}let To=(()=>{class A{static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275cmp=w.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(P,z){1&P&&w._UZ(0,"router-outlet")},dependencies:[xo],encapsulation:2})}return A})();function ca(A){const O=A.children&&A.children.map(ca),b=O?{...A,children:O}:{...A};return!b.component&&!b.loadComponent&&(O||b.loadChildren)&&b.outlet&&b.outlet!==fn&&(b.component=To),b}function ss(A){return A.outlet||fn}function Oo(A){if(!A)return null;if(A.routeConfig?._injector)return A.routeConfig._injector;for(let O=A.parent;O;O=O.parent){const b=O.routeConfig;if(b?._loadedInjector)return b._loadedInjector;if(b?._injector)return b._injector}return null}class Hu{constructor(O,b,P,z,de){this.routeReuseStrategy=O,this.futureState=b,this.currState=P,this.forwardEvent=z,this.inputBindingEnabled=de}activate(O){const b=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,P,O),ua(this.futureState.root),this.activateChildRoutes(b,P,O)}deactivateChildRoutes(O,b,P){const z=ai(b);O.children.forEach(de=>{const ce=de.value.outlet;this.deactivateRoutes(de,z[ce],P),delete z[ce]}),Object.values(z).forEach(de=>{this.deactivateRouteAndItsChildren(de,P)})}deactivateRoutes(O,b,P){const z=O.value,de=b?b.value:null;if(z===de)if(z.component){const ce=P.getContext(z.outlet);ce&&this.deactivateChildRoutes(O,b,ce.children)}else this.deactivateChildRoutes(O,b,P);else de&&this.deactivateRouteAndItsChildren(b,P)}deactivateRouteAndItsChildren(O,b){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,b):this.deactivateRouteAndOutlet(O,b)}detachAndStoreRouteSubtree(O,b){const P=b.getContext(O.value.outlet),z=P&&O.value.component?P.children:b,de=ai(O);for(const ce of Object.keys(de))this.deactivateRouteAndItsChildren(de[ce],z);if(P&&P.outlet){const ce=P.outlet.detach(),tt=P.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:ce,route:O,contexts:tt})}}deactivateRouteAndOutlet(O,b){const P=b.getContext(O.value.outlet),z=P&&O.value.component?P.children:b,de=ai(O);for(const ce of Object.keys(de))this.deactivateRouteAndItsChildren(de[ce],z);P&&(P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated()),P.attachRef=null,P.route=null)}activateChildRoutes(O,b,P){const z=ai(b);O.children.forEach(de=>{this.activateRoutes(de,z[de.value.outlet],P),this.forwardEvent(new Ce(de.value.snapshot))}),O.children.length&&this.forwardEvent(new zt(O.value.snapshot))}activateRoutes(O,b,P){const z=O.value,de=b?b.value:null;if(ua(z),z===de)if(z.component){const ce=P.getOrCreateContext(z.outlet);this.activateChildRoutes(O,b,ce.children)}else this.activateChildRoutes(O,b,P);else if(z.component){const ce=P.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const tt=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),ce.children.onOutletReAttached(tt.contexts),ce.attachRef=tt.componentRef,ce.route=tt.route.value,ce.outlet&&ce.outlet.attach(tt.componentRef,tt.route.value),ua(tt.route.value),this.activateChildRoutes(O,null,ce.children)}else{const tt=Oo(z.snapshot);ce.attachRef=null,ce.route=z,ce.injector=tt,ce.outlet&&ce.outlet.activateWith(z,ce.injector),this.activateChildRoutes(O,null,ce.children)}}else this.activateChildRoutes(O,null,P)}}class va{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class Oa{constructor(O,b){this.component=O,this.route=b}}function mu(A,O,b){const P=A._root;return ko(P,O?O._root:null,b,[P.value])}function Ns(A,O){const b=Symbol(),P=O.get(A,b);return P===b?"function"!=typeof A||(0,w.Z0I)(A)?O.get(A):A:P}function ko(A,O,b,P,z={canDeactivateChecks:[],canActivateChecks:[]}){const de=ai(O);return A.children.forEach(ce=>{(function _u(A,O,b,P,z={canDeactivateChecks:[],canActivateChecks:[]}){const de=A.value,ce=O?O.value:null,tt=b?b.getContext(A.value.outlet):null;if(ce&&de.routeConfig===ce.routeConfig){const be=function Ja(A,O,b){if("function"==typeof b)return b(A,O);switch(b){case"pathParamsChange":return!vi(A.url,O.url);case"pathParamsOrQueryParamsChange":return!vi(A.url,O.url)||!Kr(A.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ys(A,O)||!Kr(A.queryParams,O.queryParams);default:return!ys(A,O)}}(ce,de,de.routeConfig.runGuardsAndResolvers);be?z.canActivateChecks.push(new va(P)):(de.data=ce.data,de._resolvedData=ce._resolvedData),ko(A,O,de.component?tt?tt.children:null:b,P,z),be&&tt&&tt.outlet&&tt.outlet.isActivated&&z.canDeactivateChecks.push(new Oa(tt.outlet.component,ce))}else ce&&uo(O,tt,z),z.canActivateChecks.push(new va(P)),ko(A,null,de.component?tt?tt.children:null:b,P,z)})(ce,de[ce.value.outlet],b,P.concat([ce.value]),z),delete de[ce.value.outlet]}),Object.entries(de).forEach(([ce,tt])=>uo(tt,b.getContext(ce),z)),z}function uo(A,O,b){const P=ai(A),z=A.value;Object.entries(P).forEach(([de,ce])=>{uo(ce,z.component?O?O.children.getContext(de):null:O,b)}),b.canDeactivateChecks.push(new Oa(z.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,z))}function lo(A){return"function"==typeof A}function tu(A){return A instanceof Vt.K||"EmptyError"===A?.name}const Wo=Symbol("INITIAL_VALUE");function Lo(){return(0,kn.w)(A=>yt(A.map(O=>O.pipe((0,pr.q)(1),(0,Nt.O)(Wo)))).pipe((0,Cn.U)(O=>{for(const b of O)if(!0!==b){if(b===Wo)return Wo;if(!1===b||b instanceof Fr)return b}return!0}),(0,Jn.h)(O=>O!==Wo),(0,pr.q)(1)))}function Fn(A){return(0,Lt.z)((0,He.b)(O=>{if(Ye(O))throw Cs(0,O)}),(0,Cn.U)(O=>!0===O))}class di{constructor(O){this.segmentGroup=O||null}}class Fo{constructor(O){this.urlTree=O}}function Xi(A){return et(new di(A))}function ka(A){return et(new Fo(A))}class me{constructor(O,b){this.urlSerializer=O,this.urlTree=b}noMatchError(O){return new w.vHH(4002,!1)}lineralizeSegments(O,b){let P=[],z=b.root;for(;;){if(P=P.concat(z.segments),0===z.numberOfChildren)return(0,fe.of)(P);if(z.numberOfChildren>1||!z.children[fn])return et(new w.vHH(4e3,!1));z=z.children[fn]}}applyRedirectCommands(O,b,P){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),O,P)}applyRedirectCreateUrlTree(O,b,P,z){const de=this.createSegmentGroup(O,b.root,P,z);return new Fr(de,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(O,b){const P={};return Object.entries(O).forEach(([z,de])=>{if("string"==typeof de&&de.startsWith(":")){const tt=de.substring(1);P[z]=b[tt]}else P[z]=de}),P}createSegmentGroup(O,b,P,z){const de=this.createSegments(O,b.segments,P,z);let ce={};return Object.entries(b.children).forEach(([tt,be])=>{ce[tt]=this.createSegmentGroup(O,be,P,z)}),new an(de,ce)}createSegments(O,b,P,z){return b.map(de=>de.path.startsWith(":")?this.findPosParam(O,de,z):this.findOrReturn(de,P))}findPosParam(O,b,P){const z=P[b.path.substring(1)];if(!z)throw new w.vHH(4001,!1);return z}findOrReturn(O,b){let P=0;for(const z of b){if(z.path===O.path)return b.splice(P),z;P++}return O}}const ha={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gl(A,O,b,P,z){const de=Gu(A,O,b);return de.matched?(P=function rs(A,O){return A.providers&&!A._injector&&(A._injector=(0,w.MMx)(A.providers,O,`Route: ${A.path}`)),A._injector??O}(O,P),function os(A,O,b,P){const z=O.canMatch;if(!z||0===z.length)return(0,fe.of)(!0);const de=z.map(ce=>{const tt=Ns(ce,A);return gn(function ar(A){return A&&lo(A.canMatch)}(tt)?tt.canMatch(O,b):A.runInContext(()=>tt(O,b)))});return(0,fe.of)(de).pipe(Lo(),Fn())}(P,O,b).pipe((0,Cn.U)(ce=>!0===ce?de:{...ha}))):(0,fe.of)(de)}function Gu(A,O,b){if(""===O.path)return"full"===O.pathMatch&&(A.hasChildren()||b.length>0)?{...ha}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const z=(O.matcher||ws)(b,A,O);if(!z)return{...ha};const de={};Object.entries(z.posParams??{}).forEach(([tt,be])=>{de[tt]=be.path});const ce=z.consumed.length>0?{...de,...z.consumed[z.consumed.length-1].parameters}:de;return{matched:!0,consumedSegments:z.consumed,remainingSegments:b.slice(z.consumed.length),parameters:ce,positionalParamSegments:z.posParams??{}}}function Eu(A,O,b,P){return b.length>0&&function Ri(A,O,b){return b.some(P=>eo(A,O,P)&&ss(P)!==fn)}(A,b,P)?{segmentGroup:new an(O,wu(P,new an(b,A.children))),slicedSegments:[]}:0===b.length&&function gi(A,O,b){return b.some(P=>eo(A,O,P))}(A,b,P)?{segmentGroup:new an(A.segments,ml(A,0,b,P,A.children)),slicedSegments:b}:{segmentGroup:new an(A.segments,A.children),slicedSegments:b}}function ml(A,O,b,P,z){const de={};for(const ce of P)if(eo(A,b,ce)&&!z[ss(ce)]){const tt=new an([],{});de[ss(ce)]=tt}return{...z,...de}}function wu(A,O){const b={};b[fn]=O;for(const P of A)if(""===P.path&&ss(P)!==fn){const z=new an([],{});b[ss(P)]=z}return b}function eo(A,O,b){return(!(A.hasChildren()||O.length>0)||"full"!==b.pathMatch)&&""===b.path}class Kl{constructor(O,b,P,z,de,ce,tt){this.injector=O,this.configLoader=b,this.rootComponentType=P,this.config=z,this.urlTree=de,this.paramsInheritanceStrategy=ce,this.urlSerializer=tt,this.allowRedirects=!0,this.applyRedirects=new me(this.urlSerializer,this.urlTree)}noMatchError(O){return new w.vHH(4002,!1)}recognize(){const O=Eu(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,O,fn).pipe(mt(b=>{if(b instanceof Fo)return this.allowRedirects=!1,this.urlTree=b.urlTree,this.match(b.urlTree);throw b instanceof di?this.noMatchError(b):b}),(0,Cn.U)(b=>{const P=new Hs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fn,this.rootComponentType,null,{}),z=new Hr(P,b),de=new ds("",z),ce=function Et(A,O,b=null,P=null){return Zt(ln(A),O,b,P)}(P,[],this.urlTree.queryParams,this.urlTree.fragment);return ce.queryParams=this.urlTree.queryParams,de.url=this.urlSerializer.serialize(ce),this.inheritParamsAndData(de._root),{state:de,tree:ce}}))}match(O){return this.processSegmentGroup(this.injector,this.config,O.root,fn).pipe(mt(P=>{throw P instanceof di?this.noMatchError(P):P}))}inheritParamsAndData(O){const b=O.value,P=er(b,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data),O.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(O,b,P,z){return 0===P.segments.length&&P.hasChildren()?this.processChildren(O,b,P):this.processSegment(O,b,P,P.segments,z,!0)}processChildren(O,b,P){const z=[];for(const de of Object.keys(P.children))"primary"===de?z.unshift(de):z.push(de);return(0,S.D)(z).pipe((0,Le.b)(de=>{const ce=P.children[de],tt=function _a(A,O){const b=A.filter(P=>ss(P)===O);return b.push(...A.filter(P=>ss(P)!==O)),b}(b,de);return this.processSegmentGroup(O,tt,ce,de)}),(0,ht.R)((de,ce)=>(de.push(...ce),de)),(0,jt.d)(null),function pn(A,O){const b=arguments.length>=2;return P=>P.pipe(A?(0,Jn.h)((z,de)=>A(z,de,P)):Ke.y,Jt(1),b?(0,jt.d)(O):(0,Nn.T)(()=>new Vt.K))}(),(0,xe.z)(de=>{if(null===de)return Xi(P);const ce=Cu(de);return function La(A){A.sort((O,b)=>O.value.outlet===fn?-1:b.value.outlet===fn?1:O.value.outlet.localeCompare(b.value.outlet))}(ce),(0,fe.of)(ce)}))}processSegment(O,b,P,z,de,ce){return(0,S.D)(b).pipe((0,Le.b)(tt=>this.processSegmentAgainstRoute(tt._injector??O,b,tt,P,z,de,ce).pipe(mt(be=>{if(be instanceof di)return(0,fe.of)(null);throw be}))),(0,ge.P)(tt=>!!tt),mt(tt=>{if(tu(tt))return function Ac(A,O,b){return 0===O.length&&!A.children[b]}(P,z,de)?(0,fe.of)([]):Xi(P);throw tt}))}processSegmentAgainstRoute(O,b,P,z,de,ce,tt){return function Ea(A,O,b,P){return!!(ss(A)===P||P!==fn&&eo(O,b,A))&&("**"===A.path||Gu(O,A,b).matched)}(P,z,de,ce)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(O,z,P,de,ce,tt):tt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,z,b,P,de,ce):Xi(z):Xi(z)}expandSegmentAgainstRouteUsingRedirect(O,b,P,z,de,ce){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,P,z,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(O,b,P,z,de,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,b,P,z){const de=this.applyRedirects.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?ka(de):this.applyRedirects.lineralizeSegments(P,de).pipe((0,xe.z)(ce=>{const tt=new an(ce,{});return this.processSegment(O,b,tt,ce,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,b,P,z,de,ce){const{matched:tt,consumedSegments:be,remainingSegments:xn,positionalParamSegments:_n}=Gu(b,z,de);if(!tt)return Xi(b);const Wr=this.applyRedirects.applyRedirectCommands(be,z.redirectTo,_n);return z.redirectTo.startsWith("/")?ka(Wr):this.applyRedirects.lineralizeSegments(z,Wr).pipe((0,xe.z)(ni=>this.processSegment(O,P,b,ni.concat(xn),ce,!1)))}matchSegmentAgainstRoute(O,b,P,z,de,ce){let tt;if("**"===P.path){const be=z.length>0?yi(z).parameters:{},xn=new Hs(z,be,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Uo(P),ss(P),P.component??P._loadedComponent??null,P,Zl(P));tt=(0,fe.of)({snapshot:xn,consumedSegments:[],remainingSegments:[]}),b.children={}}else tt=gl(b,P,z,O).pipe((0,Cn.U)(({matched:be,consumedSegments:xn,remainingSegments:_n,parameters:Wr})=>be?{snapshot:new Hs(xn,Wr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Uo(P),ss(P),P.component??P._loadedComponent??null,P,Zl(P)),consumedSegments:xn,remainingSegments:_n}:null));return tt.pipe((0,kn.w)(be=>null===be?Xi(b):this.getChildConfig(O=P._injector??O,P,z).pipe((0,kn.w)(({routes:xn})=>{const _n=P._loadedInjector??O,{snapshot:Wr,consumedSegments:ni,remainingSegments:Ca}=be,{segmentGroup:pa,slicedSegments:qs}=Eu(b,ni,Ca,xn);if(0===qs.length&&pa.hasChildren())return this.processChildren(_n,xn,pa).pipe((0,Cn.U)(wl=>null===wl?null:[new Hr(Wr,wl)]));if(0===xn.length&&0===qs.length)return(0,fe.of)([new Hr(Wr,[])]);const Zu=ss(P)===de;return this.processSegment(_n,xn,pa,qs,Zu?fn:de,!0).pipe((0,Cn.U)(wl=>[new Hr(Wr,wl)]))}))))}getChildConfig(O,b,P){return b.children?(0,fe.of)({routes:b.children,injector:O}):b.loadChildren?void 0!==b._loadedRoutes?(0,fe.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function cn(A,O,b,P){const z=O.canLoad;if(void 0===z||0===z.length)return(0,fe.of)(!0);const de=z.map(ce=>{const tt=Ns(ce,A);return gn(function vu(A){return A&&lo(A.canLoad)}(tt)?tt.canLoad(O,b):A.runInContext(()=>tt(O,b)))});return(0,fe.of)(de).pipe(Lo(),Fn())}(O,b,P).pipe((0,xe.z)(z=>z?this.configLoader.loadChildren(O,b).pipe((0,He.b)(de=>{b._loadedRoutes=de.routes,b._loadedInjector=de.injector})):function Yo(A){return et(Vi(!1,3))}())):(0,fe.of)({routes:[],injector:O})}}function $s(A){const O=A.value.routeConfig;return O&&""===O.path}function Cu(A){const O=[],b=new Set;for(const P of A){if(!$s(P)){O.push(P);continue}const z=O.find(de=>P.value.routeConfig===de.value.routeConfig);void 0!==z?(z.children.push(...P.children),b.add(z)):O.push(P)}for(const P of b){const z=Cu(P.children);O.push(new Hr(P.value,z))}return O.filter(P=>!b.has(P))}function Uo(A){return A.data||{}}function Zl(A){return A.resolve||{}}function De(A){return"string"==typeof A.title||null===A.title}function lt(A){return(0,kn.w)(O=>{const b=A(O);return b?(0,S.D)(b).pipe((0,Cn.U)(()=>O)):(0,fe.of)(O)})}const Ct=new w.OlP("ROUTES");let En=(()=>{class A{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,w.f3M)(w.Sil)}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,fe.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const P=gn(b.loadComponent()).pipe((0,Cn.U)(yr),(0,He.b)(de=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=de}),(0,dn.x)(()=>{this.componentLoaders.delete(b)})),z=new ot(P,()=>new Ot.x).pipe(Xe());return this.componentLoaders.set(b,z),z}loadChildren(b,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,fe.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const de=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,Cn.U)(tt=>{this.onLoadEndListener&&this.onLoadEndListener(P);let be,xn;return Array.isArray(tt)?xn=tt:(be=tt.create(b).injector,xn=be.get(Ct,[],w.XFs.Self|w.XFs.Optional).flat()),{routes:xn.map(ca),injector:be}}),(0,dn.x)(()=>{this.childrenLoaders.delete(P)})),ce=new ot(de,()=>new Ot.x).pipe(Xe());return this.childrenLoaders.set(P,ce),ce}loadModuleFactoryOrRoutes(b){return gn(b()).pipe((0,Cn.U)(yr),(0,xe.z)(P=>P instanceof w.YKP||Array.isArray(P)?(0,fe.of)(P):(0,S.D)(this.compiler.compileModuleAsync(P))))}static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})();function yr(A){return function lr(A){return A&&"object"==typeof A&&"default"in A}(A)?A.default:A}let hr=(()=>{class A{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ot.x,this.configLoader=(0,w.f3M)(En),this.environmentInjector=(0,w.f3M)(w.lqb),this.urlSerializer=(0,w.f3M)(Vr),this.rootContexts=(0,w.f3M)(pt),this.inputBindingEnabled=null!==(0,w.f3M)(bi,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,fe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=z=>this.events.next(new St(z)),this.configLoader.onLoadStartListener=z=>this.events.next(new ct(z))}complete(){this.transitions?.complete()}handleNavigationRequest(b){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...b,id:P})}setupNavigations(b){return this.transitions=new Pe.X({id:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:js,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Jn.h)(P=>0!==P.id),(0,Cn.U)(P=>({...P,extractedUrl:b.urlHandlingStrategy.extract(P.rawUrl)})),(0,kn.w)(P=>{let z=!1,de=!1;return(0,fe.of)(P).pipe((0,He.b)(ce=>{this.currentNavigation={id:ce.id,initialUrl:ce.rawUrl,extractedUrl:ce.extractedUrl,trigger:ce.source,extras:ce.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,kn.w)(ce=>{const tt=b.browserUrlTree.toString(),be=!b.navigated||ce.extractedUrl.toString()!==tt||tt!==b.currentUrlTree.toString();if(!be&&"reload"!==(ce.extras.onSameUrlNavigation??b.onSameUrlNavigation)){const _n="";return this.events.next(new Fi(ce.id,b.serializeUrl(P.rawUrl),_n,0)),b.rawUrlTree=ce.rawUrl,ce.resolve(null),Be.E}if(b.urlHandlingStrategy.shouldProcessUrl(ce.rawUrl))return Xn(ce.source)&&(b.browserUrlTree=ce.extractedUrl),(0,fe.of)(ce).pipe((0,kn.w)(_n=>{const Wr=this.transitions?.getValue();return this.events.next(new xs(_n.id,this.urlSerializer.serialize(_n.extractedUrl),_n.source,_n.restoredState)),Wr!==this.transitions?.getValue()?Be.E:Promise.resolve(_n)}),function Dr(A,O,b,P,z,de){return(0,xe.z)(ce=>function nu(A,O,b,P,z,de,ce="emptyOnly"){return new Kl(A,O,b,P,z,ce,de).recognize()}(A,O,b,P,ce.extractedUrl,z,de).pipe((0,Cn.U)(({state:tt,tree:be})=>({...ce,targetSnapshot:tt,urlAfterRedirects:be}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),(0,He.b)(_n=>{if(P.targetSnapshot=_n.targetSnapshot,P.urlAfterRedirects=_n.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_n.urlAfterRedirects},"eager"===b.urlUpdateStrategy){if(!_n.extras.skipLocationChange){const ni=b.urlHandlingStrategy.merge(_n.urlAfterRedirects,_n.rawUrl);b.setBrowserUrl(ni,_n)}b.browserUrlTree=_n.urlAfterRedirects}const Wr=new Ii(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(Wr)}));if(be&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:_n,extractedUrl:Wr,source:ni,restoredState:Ca,extras:pa}=ce,qs=new xs(_n,this.urlSerializer.serialize(Wr),ni,Ca);this.events.next(qs);const Zu=ui(0,this.rootComponentType).snapshot;return P={...ce,targetSnapshot:Zu,urlAfterRedirects:Wr,extras:{...pa,skipLocationChange:!1,replaceUrl:!1}},(0,fe.of)(P)}{const _n="";return this.events.next(new Fi(ce.id,b.serializeUrl(P.extractedUrl),_n,1)),b.rawUrlTree=ce.rawUrl,ce.resolve(null),Be.E}}),(0,He.b)(ce=>{const tt=new ee(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(ce.urlAfterRedirects),ce.targetSnapshot);this.events.next(tt)}),(0,Cn.U)(ce=>P={...ce,guards:mu(ce.targetSnapshot,ce.currentSnapshot,this.rootContexts)}),function qo(A,O){return(0,xe.z)(b=>{const{targetSnapshot:P,currentSnapshot:z,guards:{canActivateChecks:de,canDeactivateChecks:ce}}=b;return 0===ce.length&&0===de.length?(0,fe.of)({...b,guardsResult:!0}):function Ko(A,O,b,P){return(0,S.D)(A).pipe((0,xe.z)(z=>function Me(A,O,b,P,z){const de=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!de||0===de.length)return(0,fe.of)(!0);const ce=de.map(tt=>{const be=Oo(O)??z,xn=Ns(tt,be);return gn(function $u(A){return A&&lo(A.canDeactivate)}(xn)?xn.canDeactivate(A,O,b,P):be.runInContext(()=>xn(A,O,b,P))).pipe((0,ge.P)())});return(0,fe.of)(ce).pipe(Lo())}(z.component,z.route,b,O,P)),(0,ge.P)(z=>!0!==z,!0))}(ce,P,z,A).pipe((0,xe.z)(tt=>tt&&function da(A){return"boolean"==typeof A}(tt)?function Js(A,O,b,P){return(0,S.D)(O).pipe((0,Le.b)(z=>(0,xt.z)(function K(A,O){return null!==A&&O&&O(new Rt(A)),(0,fe.of)(!0)}(z.route.parent,P),function H(A,O){return null!==A&&O&&O(new we(A)),(0,fe.of)(!0)}(z.route,P),function Q(A,O,b){const P=O[O.length-1],de=O.slice(0,O.length-1).reverse().map(ce=>function yu(A){const O=A.routeConfig?A.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:A,guards:O}:null}(ce)).filter(ce=>null!==ce).map(ce=>(0,ze.P)(()=>{const tt=ce.guards.map(be=>{const xn=Oo(ce.node)??b,_n=Ns(be,xn);return gn(function ci(A){return A&&lo(A.canActivateChild)}(_n)?_n.canActivateChild(P,A):xn.runInContext(()=>_n(P,A))).pipe((0,ge.P)())});return(0,fe.of)(tt).pipe(Lo())}));return(0,fe.of)(de).pipe(Lo())}(A,z.path,b),function L(A,O,b){const P=O.routeConfig?O.routeConfig.canActivate:null;if(!P||0===P.length)return(0,fe.of)(!0);const z=P.map(de=>(0,ze.P)(()=>{const ce=Oo(O)??b,tt=Ns(de,ce);return gn(function zo(A){return A&&lo(A.canActivate)}(tt)?tt.canActivate(O,A):ce.runInContext(()=>tt(O,A))).pipe((0,ge.P)())}));return(0,fe.of)(z).pipe(Lo())}(A,z.route,b))),(0,ge.P)(z=>!0!==z,!0))}(P,de,A,O):(0,fe.of)(tt)),(0,Cn.U)(tt=>({...b,guardsResult:tt})))})}(this.environmentInjector,ce=>this.events.next(ce)),(0,He.b)(ce=>{if(P.guardsResult=ce.guardsResult,Ye(ce.guardsResult))throw Cs(0,ce.guardsResult);const tt=new he(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(ce.urlAfterRedirects),ce.targetSnapshot,!!ce.guardsResult);this.events.next(tt)}),(0,Jn.h)(ce=>!!ce.guardsResult||(b.restoreHistory(ce),this.cancelNavigationTransition(ce,"",3),!1)),lt(ce=>{if(ce.guards.canActivateChecks.length)return(0,fe.of)(ce).pipe((0,He.b)(tt=>{const be=new se(tt.id,this.urlSerializer.serialize(tt.extractedUrl),this.urlSerializer.serialize(tt.urlAfterRedirects),tt.targetSnapshot);this.events.next(be)}),(0,kn.w)(tt=>{let be=!1;return(0,fe.of)(tt).pipe(function Qo(A,O){return(0,xe.z)(b=>{const{targetSnapshot:P,guards:{canActivateChecks:z}}=b;if(!z.length)return(0,fe.of)(b);let de=0;return(0,S.D)(z).pipe((0,Le.b)(ce=>function R(A,O,b,P){const z=A.routeConfig,de=A._resolve;return void 0!==z?.title&&!De(z)&&(de[Sn]=z.title),function J(A,O,b,P){const z=function B(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===z.length)return(0,fe.of)({});const de={};return(0,S.D)(z).pipe((0,xe.z)(ce=>function Z(A,O,b,P){const z=Oo(O)??P,de=Ns(A,z);return gn(de.resolve?de.resolve(O,b):z.runInContext(()=>de(O,b)))}(A[ce],O,b,P).pipe((0,ge.P)(),(0,He.b)(tt=>{de[ce]=tt}))),Jt(1),function Vn(A){return(0,Cn.U)(()=>A)}(de),mt(ce=>tu(ce)?Be.E:et(ce)))}(de,A,O,P).pipe((0,Cn.U)(ce=>(A._resolvedData=ce,A.data=er(A,b).resolve,z&&De(z)&&(A.data[Sn]=z.title),null)))}(ce.route,P,A,O)),(0,He.b)(()=>de++),Jt(1),(0,xe.z)(ce=>de===z.length?(0,fe.of)(b):Be.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),(0,He.b)({next:()=>be=!0,complete:()=>{be||(b.restoreHistory(tt),this.cancelNavigationTransition(tt,"",2))}}))}),(0,He.b)(tt=>{const be=new Ie(tt.id,this.urlSerializer.serialize(tt.extractedUrl),this.urlSerializer.serialize(tt.urlAfterRedirects),tt.targetSnapshot);this.events.next(be)}))}),lt(ce=>{const tt=be=>{const xn=[];be.routeConfig?.loadComponent&&!be.routeConfig._loadedComponent&&xn.push(this.configLoader.loadComponent(be.routeConfig).pipe((0,He.b)(_n=>{be.component=_n}),(0,Cn.U)(()=>{})));for(const _n of be.children)xn.push(...tt(_n));return xn};return yt(tt(ce.targetSnapshot.root)).pipe((0,jt.d)(),(0,pr.q)(1))}),lt(()=>this.afterPreactivation()),(0,Cn.U)(ce=>{const tt=function Io(A,O,b){const P=oo(A,O._root,b?b._root:void 0);return new Wi(P,O)}(b.routeReuseStrategy,ce.targetSnapshot,ce.currentRouterState);return P={...ce,targetRouterState:tt}}),(0,He.b)(ce=>{b.currentUrlTree=ce.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(ce.urlAfterRedirects,ce.rawUrl),b.routerState=ce.targetRouterState,"deferred"===b.urlUpdateStrategy&&(ce.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,ce),b.browserUrlTree=ce.urlAfterRedirects)}),((A,O,b,P)=>(0,Cn.U)(z=>(new Hu(O,z.targetRouterState,z.currentRouterState,b,P).activate(A),z)))(this.rootContexts,b.routeReuseStrategy,ce=>this.events.next(ce),this.inputBindingEnabled),(0,pr.q)(1),(0,He.b)({next:ce=>{z=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new Os(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),b.titleStrategy?.updateTitle(ce.targetRouterState.snapshot),ce.resolve(!0)},complete:()=>{z=!0}}),(0,dn.x)(()=>{z||de||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),mt(ce=>{if(de=!0,Do(ce)){ns(ce)||(b.navigated=!0,b.restoreHistory(P,!0));const tt=new Co(P.id,this.urlSerializer.serialize(P.extractedUrl),ce.message,ce.cancellationCode);if(this.events.next(tt),ns(ce)){const be=b.urlHandlingStrategy.merge(ce.url,b.rawUrlTree),xn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||Xn(P.source)};b.scheduleNavigation(be,js,null,xn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{b.restoreHistory(P,!0);const tt=new aa(P.id,this.urlSerializer.serialize(P.extractedUrl),ce,P.targetSnapshot??void 0);this.events.next(tt);try{P.resolve(b.errorHandler(ce))}catch(be){P.reject(be)}}return Be.E}))}))}cancelNavigationTransition(b,P,z){const de=new Co(b.id,this.urlSerializer.serialize(b.extractedUrl),P,z);this.events.next(de),b.resolve(!1)}static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})();function Xn(A){return A!==js}let Ti=(()=>{class A{buildTitle(b){let P,z=b.root;for(;void 0!==z;)P=this.getResolvedTitleForRoute(z)??P,z=z.children.find(de=>de.outlet===fn);return P}getResolvedTitleForRoute(b){return b.data[Sn]}static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:function(){return(0,w.f3M)(mi)},providedIn:"root"})}return A})(),mi=(()=>{class A extends Ti{constructor(b){super(),this.title=b}updateTitle(b){const P=this.buildTitle(b);void 0!==P&&this.title.setTitle(P)}static#e=this.\u0275fac=function(P){return new(P||A)(w.LFG(ur.Dx))};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),Gi=(()=>{class A{static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:function(){return(0,w.f3M)(Un)},providedIn:"root"})}return A})();class qi{shouldDetach(O){return!1}store(O,b){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,b){return O.routeConfig===b.routeConfig}}let Un=(()=>{class A extends qi{static#e=this.\u0275fac=function(){let b;return function(z){return(b||(b=w.n5z(A)))(z||A)}}();static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})();const Ps=new w.OlP("",{providedIn:"root",factory:()=>({})});let Ao=(()=>{class A{static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:function(){return(0,w.f3M)(Gs)},providedIn:"root"})}return A})(),Gs=(()=>{class A{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,P){return b}static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})();var zs=function(A){return A[A.COMPLETE=0]="COMPLETE",A[A.FAILED=1]="FAILED",A[A.REDIRECTING=2]="REDIRECTING",A}(zs||{});function hi(A,O){A.events.pipe((0,Jn.h)(b=>b instanceof Os||b instanceof Co||b instanceof aa||b instanceof Fi),(0,Cn.U)(b=>b instanceof Os||b instanceof Fi?zs.COMPLETE:b instanceof Co&&(0===b.code||1===b.code)?zs.REDIRECTING:zs.FAILED),(0,Jn.h)(b=>b!==zs.REDIRECTING),(0,pr.q)(1)).subscribe(()=>{O()})}function Mc(A){throw A}function as(A,O,b){return O.parse("/")}const zu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let to=(()=>{class A{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,w.f3M)(w.c2e),this.isNgZoneEnabled=!1,this.options=(0,w.f3M)(Ps,{optional:!0})||{},this.pendingTasks=(0,w.f3M)(w.HDt),this.errorHandler=this.options.errorHandler||Mc,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||as,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,w.f3M)(Ao),this.routeReuseStrategy=(0,w.f3M)(Gi),this.titleStrategy=(0,w.f3M)(Ti),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,w.f3M)(Ct,{optional:!0})?.flat()??[],this.navigationTransitions=(0,w.f3M)(hr),this.urlSerializer=(0,w.f3M)(Vr),this.location=(0,w.f3M)(Yt.Ye),this.componentInputBindingEnabled=!!(0,w.f3M)(bi,{optional:!0}),this.isNgZoneEnabled=(0,w.f3M)(w.R0b)instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Fr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ui(0,null),this.navigationTransitions.setupNavigations(this).subscribe(b=>{this.lastSuccessfulId=b.id,this.currentPageId=this.browserPageId??0},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),js,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const P="popstate"===b.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,P,b.state)},0)}))}navigateToSyncWithBrowser(b,P,z){const de={replaceUrl:!0},ce=z?.navigationId?z:null;if(z){const be={...z};delete be.navigationId,delete be.\u0275routerPageId,0!==Object.keys(be).length&&(de.state=be)}const tt=this.parseUrl(b);this.scheduleNavigation(tt,P,ce,de)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(b){this.config=b.map(ca),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,P={}){const{relativeTo:z,queryParams:de,fragment:ce,queryParamsHandling:tt,preserveFragment:be}=P,xn=be?this.currentUrlTree.fragment:ce;let Wr,_n=null;switch(tt){case"merge":_n={...this.currentUrlTree.queryParams,...de};break;case"preserve":_n=this.currentUrlTree.queryParams;break;default:_n=de||null}null!==_n&&(_n=this.removeEmptyProps(_n));try{Wr=ln(z?z.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof b[0]||!b[0].startsWith("/"))&&(b=[]),Wr=this.currentUrlTree.root}return Zt(Wr,b,_n,xn??null)}navigateByUrl(b,P={skipLocationChange:!1}){const z=Ye(b)?b:this.parseUrl(b),de=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(de,js,null,P)}navigate(b,P={skipLocationChange:!1}){return function Ed(A){for(let O=0;O<A.length;O++)if(null==A[O])throw new w.vHH(4008,!1)}(b),this.navigateByUrl(this.createUrlTree(b,P),P)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let P;try{P=this.urlSerializer.parse(b)}catch(z){P=this.malformedUriErrorHandler(z,this.urlSerializer,b)}return P}isActive(b,P){let z;if(z=!0===P?{...zu}:!1===P?{...yl}:P,Ye(b))return cr(this.currentUrlTree,b,z);const de=this.parseUrl(b);return cr(this.currentUrlTree,de,z)}removeEmptyProps(b){return Object.keys(b).reduce((P,z)=>{const de=b[z];return null!=de&&(P[z]=de),P},{})}scheduleNavigation(b,P,z,de,ce){if(this.disposed)return Promise.resolve(!1);let tt,be,xn;ce?(tt=ce.resolve,be=ce.reject,xn=ce.promise):xn=new Promise((Wr,ni)=>{tt=Wr,be=ni});const _n=this.pendingTasks.add();return hi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_n))}),this.navigationTransitions.handleNavigationRequest({source:P,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:de,resolve:tt,reject:be,promise:xn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xn.catch(Wr=>Promise.reject(Wr))}setBrowserUrl(b,P){const z=this.urlSerializer.serialize(b);if(this.location.isCurrentPathEqualTo(z)||P.extras.replaceUrl){const ce={...P.extras.state,...this.generateNgRouterState(P.id,this.browserPageId)};this.location.replaceState(z,"",ce)}else{const de={...P.extras.state,...this.generateNgRouterState(P.id,(this.browserPageId??0)+1)};this.location.go(z,"",de)}}restoreHistory(b,P=!1){if("computed"===this.canceledNavigationResolution){const de=this.currentPageId-(this.browserPageId??this.currentPageId);0!==de?this.location.historyGo(de):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===de&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,P){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:P}:{navigationId:b}}static#e=this.\u0275fac=function(P){return new(P||A)};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),Fa=(()=>{class A{constructor(b,P,z,de,ce,tt){this.router=b,this.route=P,this.tabIndexAttribute=z,this.renderer=de,this.el=ce,this.locationStrategy=tt,this.href=null,this.commands=null,this.onChanges=new Ot.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const be=ce.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===be||"area"===be,this.isAnchorElement?this.subscription=b.events.subscribe(xn=>{xn instanceof Os&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,P,z,de,ce){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||P||z||de||ce||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const b=null===this.href?null:(0,w.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",b)}applyAttributeValue(b,P){const z=this.renderer,de=this.el.nativeElement;null!==P?z.setAttribute(de,b,P):z.removeAttribute(de,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(P){return new(P||A)(w.Y36(to),w.Y36(cs),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Yt.S$))};static#t=this.\u0275dir=w.lG2({type:A,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(P,z){1&P&&w.NdJ("click",function(ce){return z.onClick(ce.button,ce.ctrlKey,ce.shiftKey,ce.altKey,ce.metaKey)}),2&P&&w.uIk("target",z.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",w.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",w.VuI],replaceUrl:["replaceUrl","replaceUrl",w.VuI],routerLink:"routerLink"},standalone:!0,features:[w.Xq5,w.TTD]})}return A})();class Iu{}let _s=(()=>{class A{constructor(b,P,z,de,ce){this.router=b,this.injector=z,this.preloadingStrategy=de,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,Jn.h)(b=>b instanceof Os),(0,Le.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,P){const z=[];for(const de of P){de.providers&&!de._injector&&(de._injector=(0,w.MMx)(de.providers,b,`Route: ${de.path}`));const ce=de._injector??b,tt=de._loadedInjector??ce;(de.loadChildren&&!de._loadedRoutes&&void 0===de.canLoad||de.loadComponent&&!de._loadedComponent)&&z.push(this.preloadConfig(ce,de)),(de.children||de._loadedRoutes)&&z.push(this.processRoutes(tt,de.children??de._loadedRoutes))}return(0,S.D)(z).pipe((0,Bn.J)())}preloadConfig(b,P){return this.preloadingStrategy.preload(P,()=>{let z;z=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(b,P):(0,fe.of)(null);const de=z.pipe((0,xe.z)(ce=>null===ce?(0,fe.of)(void 0):(P._loadedRoutes=ce.routes,P._loadedInjector=ce.injector,this.processRoutes(ce.injector??b,ce.routes))));if(P.loadComponent&&!P._loadedComponent){const ce=this.loader.loadComponent(P);return(0,S.D)([de,ce]).pipe((0,Bn.J)())}return de})}static#e=this.\u0275fac=function(P){return new(P||A)(w.LFG(to),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(Iu),w.LFG(En))};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})();const Ht=new w.OlP("");let Xr=(()=>{class A{constructor(b,P,z,de,ce={}){this.urlSerializer=b,this.transitions=P,this.viewportScroller=z,this.zone=de,this.options=ce,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ce.scrollPositionRestoration=ce.scrollPositionRestoration||"disabled",ce.anchorScrolling=ce.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Os?(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment)):b instanceof Fi&&0===b.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof We&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new We(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(P){w.$Z()};static#t=this.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac})}return A})();function Kt(A,O){return{\u0275kind:A,\u0275providers:O}}function Pt(){const A=(0,w.f3M)(w.zs3);return O=>{const b=A.get(w.z2F);if(O!==b.components[0])return;const P=A.get(to),z=A.get(Ni);1===A.get(co)&&P.initialNavigation(),A.get(hs,null,w.XFs.Optional)?.setUpPreloading(),A.get(Ht,null,w.XFs.Optional)?.init(),P.resetRootComponentType(b.componentTypes[0]),z.closed||(z.next(),z.complete(),z.unsubscribe())}}const Ni=new w.OlP("",{factory:()=>new Ot.x}),co=new w.OlP("",{providedIn:"root",factory:()=>1}),hs=new w.OlP("");function Va(A){return Kt(0,[{provide:hs,useExisting:_s},{provide:Iu,useExisting:A}])}const ir=new w.OlP("ROUTER_FORROOT_GUARD"),Xo=[Yt.Ye,{provide:Vr,useClass:Dn},to,pt,{provide:cs,useFactory:function Wu(A){return A.routerState.root},deps:[to]},En,[]];function Ql(){return new w.PXZ("Router",to)}let Pi=(()=>{class A{constructor(b){}static forRoot(b,P){return{ngModule:A,providers:[Xo,[],{provide:Ct,multi:!0,useValue:b},{provide:ir,useFactory:fa,deps:[[to,new w.FiY,new w.tp0]]},{provide:Ps,useValue:P||{}},P?.useHash?{provide:Yt.S$,useClass:Yt.Do}:{provide:Yt.S$,useClass:Yt.b0},{provide:Ht,useFactory:()=>{const A=(0,w.f3M)(Yt.EM),O=(0,w.f3M)(w.R0b),b=(0,w.f3M)(Ps),P=(0,w.f3M)(hr),z=(0,w.f3M)(Vr);return b.scrollOffset&&A.setOffset(b.scrollOffset),new Xr(z,P,A,O,b)}},P?.preloadingStrategy?Va(P.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:Ql},P?.initialNavigation?Rr(P):[],P?.bindToComponentInputs?Kt(8,[Lr,{provide:bi,useExisting:Lr}]).\u0275providers:[],[{provide:un,useFactory:Pt},{provide:w.tb,multi:!0,useExisting:un}]]}}static forChild(b){return{ngModule:A,providers:[{provide:Ct,multi:!0,useValue:b}]}}static#e=this.\u0275fac=function(P){return new(P||A)(w.LFG(ir,8))};static#t=this.\u0275mod=w.oAB({type:A});static#n=this.\u0275inj=w.cJS({})}return A})();function fa(A){return"guarded"}function Rr(A){return["disabled"===A.initialNavigation?Kt(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const O=(0,w.f3M)(to);return()=>{O.setUpLocationChangeListener()}}},{provide:co,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?Kt(2,[{provide:co,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:O=>{const b=O.get(Yt.V_,Promise.resolve());return()=>b.then(()=>new Promise(P=>{const z=O.get(to),de=O.get(Ni);hi(z,()=>{P(!0)}),O.get(hr).afterPreactivation=()=>(P(!0),de.closed?(0,fe.of)(void 0):de),z.initialNavigation()}))}}]).\u0275providers:[]]}const un=new w.OlP("")},3106:(nn,it,U)=>{U.d(it,{Z:()=>$t});var w=U(9058),ne=U(4537),S=U(6122),fe=U(7879);class Pe{constructor(Vt,xt){this._delegate=Vt,this.firebase=xt,(0,S._addComponent)(Vt,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=Vt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Vt){this._delegate.automaticDataCollectionEnabled=Vt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Vt=>{this._delegate.checkDestroyed(),Vt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,S.deleteApp)(this._delegate)))}_getService(Vt,xt=S._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Lt=this._delegate.container.getProvider(Vt);return!Lt.isInitialized()&&"EXPLICIT"===(null===(ze=Lt.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Lt.initialize(),Lt.getImmediate({identifier:xt})}_removeServiceInstance(Vt,xt=S._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Vt).clearInstance(xt)}_addComponent(Vt){(0,S._addComponent)(this._delegate,Vt)}_addOrOverwriteComponent(Vt){(0,S._addOrOverwriteComponent)(this._delegate,Vt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ve=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function $e(){const Tt=function Ke(Tt){const Vt={},xt={__esModule:!0,initializeApp:function _e(vt,Xe={}){const ot=S.initializeApp(vt,Xe);if((0,w.r3)(Vt,ot.name))return Vt[ot.name];const Ot=new Tt(ot,xt);return Vt[ot.name]=Ot,Ot},app:Lt,registerVersion:S.registerVersion,setLogLevel:S.setLogLevel,onLog:S.onLog,apps:null,SDK_VERSION:S.SDK_VERSION,INTERNAL:{registerComponent:function Be(vt){const Xe=vt.name,ot=Xe.replace("-compat","");if(S._registerComponent(vt)&&"PUBLIC"===vt.type){const Ot=(Yt=Lt())=>{if("function"!=typeof Yt[ot])throw Ve.create("invalid-app-argument",{appName:Xe});return Yt[ot]()};void 0!==vt.serviceProps&&(0,w.ZB)(Ot,vt.serviceProps),xt[ot]=Ot,Tt.prototype[ot]=function(...Yt){return this._getService.bind(this,Xe).apply(this,vt.multipleInstances?Yt:[])}}return"PUBLIC"===vt.type?xt[ot]:null},removeApp:function ze(vt){delete Vt[vt]},useAsService:function gt(vt,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:S}};function Lt(vt){if(!(0,w.r3)(Vt,vt=vt||S._DEFAULT_ENTRY_NAME))throw Ve.create("no-app",{appName:vt});return Vt[vt]}return xt.default=xt,Object.defineProperty(xt,"apps",{get:function et(){return Object.keys(Vt).map(vt=>Vt[vt])}}),Lt.App=Tt,xt}(Pe);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:$e,extendNamespace:function Vt(xt){(0,w.ZB)(Tt,xt)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Tt}(),ye=new fe.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){ye.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&ye.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $t=pe;!function yt(Tt){(0,S.registerVersion)("@firebase/app-compat","0.2.13",Tt)}()},6122:(nn,it,U)=>{U.r(it),U.d(it,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>zi,_DEFAULT_ENTRY_NAME:()=>gn,_addComponent:()=>Or,_addOrOverwriteComponent:()=>_i,_apps:()=>An,_clearComponents:()=>rr,_components:()=>cr,_getProvider:()=>Sr,_registerComponent:()=>Yn,_removeServiceInstance:()=>Yi,deleteApp:()=>Dn,getApp:()=>Ei,getApps:()=>Vr,initializeApp:()=>vi,onLog:()=>vr,registerVersion:()=>nr,setLogLevel:()=>Hn});var w=U(5861),ne=U(4537),S=U(7879),fe=U(9058);const Pe=(Te,Ne)=>Ne.some(Ye=>Te instanceof Ye);let Ge,Ve;const pe=new WeakMap,ye=new WeakMap,Re=new WeakMap,It=new WeakMap,yt=new WeakMap;let Vt={get(Te,Ne,Ye){if(Te instanceof IDBTransaction){if("done"===Ne)return ye.get(Te);if("objectStoreNames"===Ne)return Te.objectStoreNames||Re.get(Te);if("store"===Ne)return Ye.objectStoreNames[1]?void 0:Ye.objectStore(Ye.objectStoreNames[0])}return _e(Te[Ne])},set:(Te,Ne,Ye)=>(Te[Ne]=Ye,!0),has:(Te,Ne)=>Te instanceof IDBTransaction&&("done"===Ne||"store"===Ne)||Ne in Te};function Lt(Te){return"function"==typeof Te?function ze(Te){return Te!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $e(){return Ve||(Ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Te)?function(...Ne){return Te.apply(et(this),Ne),_e(pe.get(this))}:function(...Ne){return _e(Te.apply(et(this),Ne))}:function(Ne,...Ye){const Et=Te.call(et(this),Ne,...Ye);return Re.set(Et,Ne.sort?Ne.sort():[Ne]),_e(Et)}}(Te):(Te instanceof IDBTransaction&&function Tt(Te){if(ye.has(Te))return;const Ne=new Promise((Ye,Et)=>{const ln=()=>{Te.removeEventListener("complete",Zt),Te.removeEventListener("error",Mn),Te.removeEventListener("abort",Mn)},Zt=()=>{Ye(),ln()},Mn=()=>{Et(Te.error||new DOMException("AbortError","AbortError")),ln()};Te.addEventListener("complete",Zt),Te.addEventListener("error",Mn),Te.addEventListener("abort",Mn)});ye.set(Te,Ne)}(Te),Pe(Te,function Ke(){return Ge||(Ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Te,Vt):Te)}function _e(Te){if(Te instanceof IDBRequest)return function $t(Te){const Ne=new Promise((Ye,Et)=>{const ln=()=>{Te.removeEventListener("success",Zt),Te.removeEventListener("error",Mn)},Zt=()=>{Ye(_e(Te.result)),ln()},Mn=()=>{Et(Te.error),ln()};Te.addEventListener("success",Zt),Te.addEventListener("error",Mn)});return Ne.then(Ye=>{Ye instanceof IDBCursor&&pe.set(Ye,Te)}).catch(()=>{}),yt.set(Ne,Te),Ne}(Te);if(It.has(Te))return It.get(Te);const Ne=Lt(Te);return Ne!==Te&&(It.set(Te,Ne),yt.set(Ne,Te)),Ne}const et=Te=>yt.get(Te),vt=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],ot=new Map;function Ot(Te,Ne){if(!(Te instanceof IDBDatabase)||Ne in Te||"string"!=typeof Ne)return;if(ot.get(Ne))return ot.get(Ne);const Ye=Ne.replace(/FromIndex$/,""),Et=Ne!==Ye,ln=Xe.includes(Ye);if(!(Ye in(Et?IDBIndex:IDBObjectStore).prototype)||!ln&&!vt.includes(Ye))return;const Zt=function(){var Mn=(0,w.Z)(function*(gr,...dr){const jr=this.transaction(gr,ln?"readwrite":"readonly");let Hi=jr.store;return Et&&(Hi=Hi.index(dr.shift())),(yield Promise.all([Hi[Ye](...dr),ln&&jr.done]))[0]});return function(dr){return Mn.apply(this,arguments)}}();return ot.set(Ne,Zt),Zt}!function xt(Te){Vt=Te(Vt)}(Te=>({...Te,get:(Ne,Ye,Et)=>Ot(Ne,Ye)||Te.get(Ne,Ye,Et),has:(Ne,Ye)=>!!Ot(Ne,Ye)||Te.has(Ne,Ye)}));class Yt{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function Cn(Te){const Ne=Te.getComponent();return"VERSION"===Ne?.type}(Ye)){const Et=Ye.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(Ye=>Ye).join(" ")}}const kn="@firebase/app",Nt=new S.Yd("@firebase/app"),gn="[DEFAULT]",zn={[kn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},An=new Map,cr=new Map;function Or(Te,Ne){try{Te.container.addComponent(Ne)}catch(Ye){Nt.debug(`Component ${Ne.name} failed to register with FirebaseApp ${Te.name}`,Ye)}}function _i(Te,Ne){Te.container.addOrOverwriteComponent(Ne)}function Yn(Te){const Ne=Te.name;if(cr.has(Ne))return Nt.debug(`There were multiple attempts to register component ${Ne}.`),!1;cr.set(Ne,Te);for(const Ye of An.values())Or(Ye,Te);return!0}function Sr(Te,Ne){const Ye=Te.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),Te.container.getProvider(Ne)}function Yi(Te,Ne,Ye=gn){Sr(Te,Ne).clearInstance(Ye)}function rr(){cr.clear()}const an=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ar{constructor(Ne,Ye,Et){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const zi="9.23.0";function vi(Te,Ne={}){let Ye=Te;"object"!=typeof Ne&&(Ne={name:Ne});const Et=Object.assign({name:gn,automaticDataCollectionEnabled:!1},Ne),ln=Et.name;if("string"!=typeof ln||!ln)throw an.create("bad-app-name",{appName:String(ln)});if(Ye||(Ye=(0,fe.aH)()),!Ye)throw an.create("no-options");const Zt=An.get(ln);if(Zt){if((0,fe.vZ)(Ye,Zt.options)&&(0,fe.vZ)(Et,Zt.config))return Zt;throw an.create("duplicate-app",{appName:ln})}const Mn=new ne.H0(ln);for(const dr of cr.values())Mn.addComponent(dr);const gr=new Ar(Ye,Et,Mn);return An.set(ln,gr),gr}function Ei(Te=gn){const Ne=An.get(Te);if(!Ne&&Te===gn&&(0,fe.aH)())return vi();if(!Ne)throw an.create("no-app",{appName:Te});return Ne}function Vr(){return Array.from(An.values())}function Dn(Te){return Br.apply(this,arguments)}function Br(){return(Br=(0,w.Z)(function*(Te){const Ne=Te.name;An.has(Ne)&&(An.delete(Ne),yield Promise.all(Te.container.getProviders().map(Ye=>Ye.delete())),Te.isDeleted=!0)})).apply(this,arguments)}function nr(Te,Ne,Ye){var Et;let ln=null!==(Et=zn[Te])&&void 0!==Et?Et:Te;Ye&&(ln+=`-${Ye}`);const Zt=ln.match(/\s|\//),Mn=Ne.match(/\s|\//);if(Zt||Mn){const gr=[`Unable to register library "${ln}" with version "${Ne}":`];return Zt&&gr.push(`library name "${ln}" contains illegal characters (whitespace or "/")`),Zt&&Mn&&gr.push("and"),Mn&&gr.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void Nt.warn(gr.join(" "))}Yn(new ne.wA(`${ln}-version`,()=>({library:ln,version:Ne}),"VERSION"))}function vr(Te,Ne){if(null!==Te&&"function"!=typeof Te)throw an.create("invalid-log-argument");(0,S.Am)(Te,Ne)}function Hn(Te){(0,S.Ub)(Te)}const Qr="firebase-heartbeat-database",Qn=1,Oe="firebase-heartbeat-store";let re=null;function ae(){return re||(re=function Be(Te,Ne,{blocked:Ye,upgrade:Et,blocking:ln,terminated:Zt}={}){const Mn=indexedDB.open(Te,Ne),gr=_e(Mn);return Et&&Mn.addEventListener("upgradeneeded",dr=>{Et(_e(Mn.result),dr.oldVersion,dr.newVersion,_e(Mn.transaction),dr)}),Ye&&Mn.addEventListener("blocked",dr=>Ye(dr.oldVersion,dr.newVersion,dr)),gr.then(dr=>{Zt&&dr.addEventListener("close",()=>Zt()),ln&&dr.addEventListener("versionchange",jr=>ln(jr.oldVersion,jr.newVersion,jr))}).catch(()=>{}),gr}(Qr,Qn,{upgrade:(Te,Ne)=>{0===Ne&&Te.createObjectStore(Oe)}}).catch(Te=>{throw an.create("idb-open",{originalErrorMessage:Te.message})})),re}function le(){return(le=(0,w.Z)(function*(Te){try{return yield(yield ae()).transaction(Oe).objectStore(Oe).get(qt(Te))}catch(Ne){if(Ne instanceof fe.ZR)Nt.warn(Ne.message);else{const Ye=an.create("idb-get",{originalErrorMessage:Ne?.message});Nt.warn(Ye.message)}}})).apply(this,arguments)}function Ze(Te,Ne){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,w.Z)(function*(Te,Ne){try{const Et=(yield ae()).transaction(Oe,"readwrite");yield Et.objectStore(Oe).put(Ne,qt(Te)),yield Et.done}catch(Ye){if(Ye instanceof fe.ZR)Nt.warn(Ye.message);else{const Et=an.create("idb-set",{originalErrorMessage:Ye?.message});Nt.warn(Et.message)}}})).apply(this,arguments)}function qt(Te){return`${Te.name}!${Te.options.appId}`}class Ut{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new Je(Ye),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var Ne=this;return(0,w.Z)(function*(){const Et=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ln=Ln();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==ln&&!Ne._heartbeatsCache.heartbeats.some(Zt=>Zt.date===ln))return Ne._heartbeatsCache.heartbeats.push({date:ln,agent:Et}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(Zt=>{const Mn=new Date(Zt.date).valueOf();return Date.now()-Mn<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,w.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const Ye=Ln(),{heartbeatsToSend:Et,unsentEntries:ln}=function kr(Te,Ne=1024){const Ye=[];let Et=Te.slice();for(const ln of Te){const Zt=Ye.find(Mn=>Mn.agent===ln.agent);if(Zt){if(Zt.dates.push(ln.date),Fe(Ye)>Ne){Zt.dates.pop();break}}else if(Ye.push({agent:ln.agent,dates:[ln.date]}),Fe(Ye)>Ne){Ye.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:Et}}(Ne._heartbeatsCache.heartbeats),Zt=(0,fe.L)(JSON.stringify({version:2,heartbeats:Et}));return Ne._heartbeatsCache.lastSentHeartbeatDate=Ye,ln.length>0?(Ne._heartbeatsCache.heartbeats=ln,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),Zt})()}}function Ln(){return(new Date).toISOString().substring(0,10)}class Je{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,w.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function ie(Te){return le.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var Ye=this;return(0,w.Z)(function*(){var Et;if(yield Ye._canUseIndexedDBPromise){const Zt=yield Ye.read();return Ze(Ye.app,{lastSentHeartbeatDate:null!==(Et=Ne.lastSentHeartbeatDate)&&void 0!==Et?Et:Zt.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var Ye=this;return(0,w.Z)(function*(){var Et;if(yield Ye._canUseIndexedDBPromise){const Zt=yield Ye.read();return Ze(Ye.app,{lastSentHeartbeatDate:null!==(Et=Ne.lastSentHeartbeatDate)&&void 0!==Et?Et:Zt.lastSentHeartbeatDate,heartbeats:[...Zt.heartbeats,...Ne.heartbeats]})}})()}}function Fe(Te){return(0,fe.L)(JSON.stringify({version:2,heartbeats:Te})).length}!function je(Te){Yn(new ne.wA("platform-logger",Ne=>new Yt(Ne),"PRIVATE")),Yn(new ne.wA("heartbeat",Ne=>new Ut(Ne),"PRIVATE")),nr(kn,"0.9.13",Te),nr(kn,"0.9.13","esm2017"),nr("fire-js","")}("")},4537:(nn,it,U)=>{U.d(it,{H0:()=>Ke,wA:()=>S,zt:()=>Pe});var w=U(5861),ne=U(9058);class S{constructor(pe,ye,Re){this.name=pe,this.instanceFactory=ye,this.type=Re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const fe="[DEFAULT]";class Pe{constructor(pe,ye){this.name=pe,this.container=ye,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const ye=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(ye)){const Re=new ne.BH;if(this.instancesDeferred.set(ye,Re),this.isInitialized(ye)||this.shouldAutoInitialize())try{const It=this.getOrInitializeService({instanceIdentifier:ye});It&&Re.resolve(It)}catch{}}return this.instancesDeferred.get(ye).promise}getImmediate(pe){var ye;const Re=this.normalizeInstanceIdentifier(pe?.identifier),It=null!==(ye=pe?.optional)&&void 0!==ye&&ye;if(!this.isInitialized(Re)&&!this.shouldAutoInitialize()){if(It)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Re})}catch(yt){if(It)return null;throw yt}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Ve($e){return"EAGER"===$e.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[ye,Re]of this.instancesDeferred.entries()){const It=this.normalizeInstanceIdentifier(ye);try{const yt=this.getOrInitializeService({instanceIdentifier:It});Re.resolve(yt)}catch{}}}}clearInstance(pe=fe){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,w.Z)(function*(){const ye=Array.from(pe.instances.values());yield Promise.all([...ye.filter(Re=>"INTERNAL"in Re).map(Re=>Re.INTERNAL.delete()),...ye.filter(Re=>"_delete"in Re).map(Re=>Re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=fe){return this.instances.has(pe)}getOptions(pe=fe){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:ye={}}=pe,Re=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Re))throw Error(`${this.name}(${Re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const It=this.getOrInitializeService({instanceIdentifier:Re,options:ye});for(const[yt,$t]of this.instancesDeferred.entries())Re===this.normalizeInstanceIdentifier(yt)&&$t.resolve(It);return It}onInit(pe,ye){var Re;const It=this.normalizeInstanceIdentifier(ye),yt=null!==(Re=this.onInitCallbacks.get(It))&&void 0!==Re?Re:new Set;yt.add(pe),this.onInitCallbacks.set(It,yt);const $t=this.instances.get(It);return $t&&pe($t,It),()=>{yt.delete(pe)}}invokeOnInitCallbacks(pe,ye){const Re=this.onInitCallbacks.get(ye);if(Re)for(const It of Re)try{It(pe,ye)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:ye={}}){let Re=this.instances.get(pe);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:($e=pe,$e===fe?void 0:$e),options:ye}),this.instances.set(pe,Re),this.instancesOptions.set(pe,ye),this.invokeOnInitCallbacks(Re,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Re)}catch{}var $e;return Re||null}normalizeInstanceIdentifier(pe=fe){return this.component?this.component.multipleInstances?pe:fe:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ke{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const ye=this.getProvider(pe.name);if(ye.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);ye.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const ye=new Pe(pe,this);return this.providers.set(pe,ye),ye}getProviders(){return Array.from(this.providers.values())}}},7879:(nn,it,U)=>{U.d(it,{Am:()=>$e,Ub:()=>Ke,Yd:()=>Ve,in:()=>ne});const w=[];var ne=function(pe){return pe[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",pe}(ne||{});const S={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},fe=ne.INFO,Pe={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},Ge=(pe,ye,...Re)=>{if(ye<pe.logLevel)return;const It=(new Date).toISOString(),yt=Pe[ye];if(!yt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ye})`);console[yt](`[${It}]  ${pe.name}:`,...Re)};class Ve{constructor(ye){this.name=ye,this._logLevel=fe,this._logHandler=Ge,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(ye){if(!(ye in ne))throw new TypeError(`Invalid value "${ye}" assigned to \`logLevel\``);this._logLevel=ye}setLogLevel(ye){this._logLevel="string"==typeof ye?S[ye]:ye}get logHandler(){return this._logHandler}set logHandler(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye}get userLogHandler(){return this._userLogHandler}set userLogHandler(ye){this._userLogHandler=ye}debug(...ye){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...ye),this._logHandler(this,ne.DEBUG,...ye)}log(...ye){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...ye),this._logHandler(this,ne.VERBOSE,...ye)}info(...ye){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...ye),this._logHandler(this,ne.INFO,...ye)}warn(...ye){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...ye),this._logHandler(this,ne.WARN,...ye)}error(...ye){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...ye),this._logHandler(this,ne.ERROR,...ye)}}function Ke(pe){w.forEach(ye=>{ye.setLogLevel(pe)})}function $e(pe,ye){for(const Re of w){let It=null;ye&&ye.level&&(It=S[ye.level]),Re.userLogHandler=null===pe?null:(yt,$t,...Tt)=>{const Vt=Tt.map(xt=>{if(null==xt)return null;if("string"==typeof xt)return xt;if("number"==typeof xt||"boolean"==typeof xt)return xt.toString();if(xt instanceof Error)return xt.message;try{return JSON.stringify(xt)}catch{return null}}).filter(xt=>xt).join(" ");$t>=(It??yt.logLevel)&&pe({level:ne[$t].toLowerCase(),message:Vt,args:Tt,type:yt.name})}}}},9515:(nn,it,U)=>{U.d(it,{X$:()=>kn,Zw:()=>Re,aw:()=>pr,sK:()=>Yt});var w=U(5879),ne=U(2096),S=U(2664),fe=U(9315),Pe=U(5211),Ge=U(4911),Ve=U(8180),Ke=U(940),$e=U(7398),pe=U(6328),ye=U(4664);class Re{}let It=(()=>{class Nt extends Re{getTranslation(xe){return(0,ne.of)({})}static \u0275fac=function(){let xe;return function(Le){return(xe||(xe=w.n5z(Nt)))(Le||Nt)}}();static \u0275prov=w.Yz7({token:Nt,factory:Nt.\u0275fac})}return Nt})();class yt{}let $t=(()=>{class Nt{handle(xe){return xe.key}static \u0275fac=function(ge){return new(ge||Nt)};static \u0275prov=w.Yz7({token:Nt,factory:Nt.\u0275fac})}return Nt})();function Tt(Nt,Jn){if(Nt===Jn)return!0;if(null===Nt||null===Jn)return!1;if(Nt!=Nt&&Jn!=Jn)return!0;let Le,He,rt,xe=typeof Nt;if(xe==typeof Jn&&"object"==xe){if(!Array.isArray(Nt)){if(Array.isArray(Jn))return!1;for(He in rt=Object.create(null),Nt){if(!Tt(Nt[He],Jn[He]))return!1;rt[He]=!0}for(He in Jn)if(!(He in rt)&&typeof Jn[He]<"u")return!1;return!0}if(!Array.isArray(Jn))return!1;if((Le=Nt.length)==Jn.length){for(He=0;He<Le;He++)if(!Tt(Nt[He],Jn[He]))return!1;return!0}}return!1}function Vt(Nt){return typeof Nt<"u"&&null!==Nt}function xt(Nt){return Nt&&"object"==typeof Nt&&!Array.isArray(Nt)}function ze(Nt,Jn){let xe=Object.assign({},Nt);return xt(Nt)&&xt(Jn)&&Object.keys(Jn).forEach(ge=>{xt(Jn[ge])?ge in Nt?xe[ge]=ze(Nt[ge],Jn[ge]):Object.assign(xe,{[ge]:Jn[ge]}):Object.assign(xe,{[ge]:Jn[ge]})}),xe}class Lt{}let _e=(()=>{class Nt extends Lt{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(xe,ge){let Le;return Le="string"==typeof xe?this.interpolateString(xe,ge):"function"==typeof xe?this.interpolateFunction(xe,ge):xe,Le}getValue(xe,ge){let Le="string"==typeof ge?ge.split("."):[ge];ge="";do{ge+=Le.shift(),!Vt(xe)||!Vt(xe[ge])||"object"!=typeof xe[ge]&&Le.length?Le.length?ge+=".":xe=void 0:(xe=xe[ge],ge="")}while(Le.length);return xe}interpolateFunction(xe,ge){return xe(ge)}interpolateString(xe,ge){return ge?xe.replace(this.templateMatcher,(Le,He)=>{let rt=this.getValue(ge,He);return Vt(rt)?rt:Le}):xe}static \u0275fac=function(){let xe;return function(Le){return(xe||(xe=w.n5z(Nt)))(Le||Nt)}}();static \u0275prov=w.Yz7({token:Nt,factory:Nt.\u0275fac})}return Nt})();class et{}let Be=(()=>{class Nt extends et{compile(xe,ge){return xe}compileTranslations(xe,ge){return xe}static \u0275fac=function(){let xe;return function(Le){return(xe||(xe=w.n5z(Nt)))(Le||Nt)}}();static \u0275prov=w.Yz7({token:Nt,factory:Nt.\u0275fac})}return Nt})();class gt{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new w.vpe;onLangChange=new w.vpe;onDefaultLangChange=new w.vpe}const vt=new w.OlP("USE_STORE"),Xe=new w.OlP("USE_DEFAULT_LANG"),ot=new w.OlP("DEFAULT_LANGUAGE"),Ot=new w.OlP("USE_EXTEND");let Yt=(()=>{class Nt{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new w.vpe;_onLangChange=new w.vpe;_onDefaultLangChange=new w.vpe;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(xe){this.isolate?this._defaultLang=xe:this.store.defaultLang=xe}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(xe){this.isolate?this._currentLang=xe:this.store.currentLang=xe}get langs(){return this.isolate?this._langs:this.store.langs}set langs(xe){this.isolate?this._langs=xe:this.store.langs=xe}get translations(){return this.isolate?this._translations:this.store.translations}set translations(xe){this.isolate?this._translations=xe:this.store.translations=xe}constructor(xe,ge,Le,He,rt,mt=!0,ht=!1,jt=!1,Jt){this.store=xe,this.currentLoader=ge,this.compiler=Le,this.parser=He,this.missingTranslationHandler=rt,this.useDefaultLang=mt,this.isolate=ht,this.extend=jt,Jt&&this.setDefaultLang(Jt)}setDefaultLang(xe){if(xe===this.defaultLang)return;let ge=this.retrieveTranslations(xe);typeof ge<"u"?(null==this.defaultLang&&(this.defaultLang=xe),ge.pipe((0,Ve.q)(1)).subscribe(Le=>{this.changeDefaultLang(xe)})):this.changeDefaultLang(xe)}getDefaultLang(){return this.defaultLang}use(xe){if(xe===this.currentLang)return(0,ne.of)(this.translations[xe]);let ge=this.retrieveTranslations(xe);return typeof ge<"u"?(this.currentLang||(this.currentLang=xe),ge.pipe((0,Ve.q)(1)).subscribe(Le=>{this.changeLang(xe)}),ge):(this.changeLang(xe),(0,ne.of)(this.translations[xe]))}retrieveTranslations(xe){let ge;return(typeof this.translations[xe]>"u"||this.extend)&&(this._translationRequests[xe]=this._translationRequests[xe]||this.getTranslation(xe),ge=this._translationRequests[xe]),ge}getTranslation(xe){this.pending=!0;const ge=this.currentLoader.getTranslation(xe).pipe((0,Ke.d)(1),(0,Ve.q)(1));return this.loadingTranslations=ge.pipe((0,$e.U)(Le=>this.compiler.compileTranslations(Le,xe)),(0,Ke.d)(1),(0,Ve.q)(1)),this.loadingTranslations.subscribe({next:Le=>{this.translations[xe]=this.extend&&this.translations[xe]?{...Le,...this.translations[xe]}:Le,this.updateLangs(),this.pending=!1},error:Le=>{this.pending=!1}}),ge}setTranslation(xe,ge,Le=!1){ge=this.compiler.compileTranslations(ge,xe),this.translations[xe]=(Le||this.extend)&&this.translations[xe]?ze(this.translations[xe],ge):ge,this.updateLangs(),this.onTranslationChange.emit({lang:xe,translations:this.translations[xe]})}getLangs(){return this.langs}addLangs(xe){xe.forEach(ge=>{-1===this.langs.indexOf(ge)&&this.langs.push(ge)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(xe,ge,Le){let He;if(ge instanceof Array){let rt={},mt=!1;for(let ht of ge)rt[ht]=this.getParsedResult(xe,ht,Le),(0,S.b)(rt[ht])&&(mt=!0);if(mt){const ht=ge.map(jt=>(0,S.b)(rt[jt])?rt[jt]:(0,ne.of)(rt[jt]));return(0,fe.D)(ht).pipe((0,$e.U)(jt=>{let Jt={};return jt.forEach((Nn,pn)=>{Jt[ge[pn]]=Nn}),Jt}))}return rt}if(xe&&(He=this.parser.interpolate(this.parser.getValue(xe,ge),Le)),typeof He>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(He=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],ge),Le)),typeof He>"u"){let rt={key:ge,translateService:this};typeof Le<"u"&&(rt.interpolateParams=Le),He=this.missingTranslationHandler.handle(rt)}return typeof He<"u"?He:ge}get(xe,ge){if(!Vt(xe)||!xe.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,pe.b)(Le=>(Le=this.getParsedResult(Le,xe,ge),(0,S.b)(Le)?Le:(0,ne.of)(Le))));{let Le=this.getParsedResult(this.translations[this.currentLang],xe,ge);return(0,S.b)(Le)?Le:(0,ne.of)(Le)}}getStreamOnTranslationChange(xe,ge){if(!Vt(xe)||!xe.length)throw new Error('Parameter "key" required');return(0,Pe.z)((0,Ge.P)(()=>this.get(xe,ge)),this.onTranslationChange.pipe((0,ye.w)(Le=>{const He=this.getParsedResult(Le.translations,xe,ge);return"function"==typeof He.subscribe?He:(0,ne.of)(He)})))}stream(xe,ge){if(!Vt(xe)||!xe.length)throw new Error('Parameter "key" required');return(0,Pe.z)((0,Ge.P)(()=>this.get(xe,ge)),this.onLangChange.pipe((0,ye.w)(Le=>{const He=this.getParsedResult(Le.translations,xe,ge);return(0,S.b)(He)?He:(0,ne.of)(He)})))}instant(xe,ge){if(!Vt(xe)||!xe.length)throw new Error('Parameter "key" required');let Le=this.getParsedResult(this.translations[this.currentLang],xe,ge);if((0,S.b)(Le)){if(xe instanceof Array){let He={};return xe.forEach((rt,mt)=>{He[xe[mt]]=xe[mt]}),He}return xe}return Le}set(xe,ge,Le=this.currentLang){this.translations[Le][xe]=this.compiler.compile(ge,Le),this.updateLangs(),this.onTranslationChange.emit({lang:Le,translations:this.translations[Le]})}changeLang(xe){this.currentLang=xe,this.onLangChange.emit({lang:xe,translations:this.translations[xe]}),null==this.defaultLang&&this.changeDefaultLang(xe)}changeDefaultLang(xe){this.defaultLang=xe,this.onDefaultLangChange.emit({lang:xe,translations:this.translations[xe]})}reloadLang(xe){return this.resetLang(xe),this.getTranslation(xe)}resetLang(xe){this._translationRequests[xe]=void 0,this.translations[xe]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let xe=window.navigator.languages?window.navigator.languages[0]:null;return xe=xe||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof xe>"u"?void 0:(-1!==xe.indexOf("-")&&(xe=xe.split("-")[0]),-1!==xe.indexOf("_")&&(xe=xe.split("_")[0]),xe)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let xe=window.navigator.languages?window.navigator.languages[0]:null;return xe=xe||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,xe}static \u0275fac=function(ge){return new(ge||Nt)(w.LFG(gt),w.LFG(Re),w.LFG(et),w.LFG(Lt),w.LFG(yt),w.LFG(Xe),w.LFG(vt),w.LFG(Ot),w.LFG(ot))};static \u0275prov=w.Yz7({token:Nt,factory:Nt.\u0275fac})}return Nt})(),kn=(()=>{class Nt{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(xe,ge){this.translate=xe,this._ref=ge}updateValue(xe,ge,Le){let He=rt=>{this.value=void 0!==rt?rt:xe,this.lastKey=xe,this._ref.markForCheck()};if(Le){let rt=this.translate.getParsedResult(Le,xe,ge);(0,S.b)(rt.subscribe)?rt.subscribe(He):He(rt)}this.translate.get(xe,ge).subscribe(He)}transform(xe,...ge){if(!xe||!xe.length)return xe;if(Tt(xe,this.lastKey)&&Tt(ge,this.lastParams))return this.value;let Le;if(Vt(ge[0])&&ge.length)if("string"==typeof ge[0]&&ge[0].length){let He=ge[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{Le=JSON.parse(He)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${ge[0]}`)}}else"object"==typeof ge[0]&&!Array.isArray(ge[0])&&(Le=ge[0]);return this.lastKey=xe,this.lastParams=ge,this.updateValue(xe,Le),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(He=>{this.lastKey&&He.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(xe,Le,He.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(He=>{this.lastKey&&(this.lastKey=null,this.updateValue(xe,Le,He.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(xe,Le))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(ge){return new(ge||Nt)(w.Y36(Yt,16),w.Y36(w.sBO,16))};static \u0275pipe=w.Yjl({name:"translate",type:Nt,pure:!1});static \u0275prov=w.Yz7({token:Nt,factory:Nt.\u0275fac})}return Nt})(),pr=(()=>{class Nt{static forRoot(xe={}){return{ngModule:Nt,providers:[xe.loader||{provide:Re,useClass:It},xe.compiler||{provide:et,useClass:Be},xe.parser||{provide:Lt,useClass:_e},xe.missingTranslationHandler||{provide:yt,useClass:$t},gt,{provide:vt,useValue:xe.isolate},{provide:Xe,useValue:xe.useDefaultLang},{provide:Ot,useValue:xe.extend},{provide:ot,useValue:xe.defaultLanguage},Yt]}}static forChild(xe={}){return{ngModule:Nt,providers:[xe.loader||{provide:Re,useClass:It},xe.compiler||{provide:et,useClass:Be},xe.parser||{provide:Lt,useClass:_e},xe.missingTranslationHandler||{provide:yt,useClass:$t},{provide:vt,useValue:xe.isolate},{provide:Xe,useValue:xe.useDefaultLang},{provide:Ot,useValue:xe.extend},{provide:ot,useValue:xe.defaultLanguage},Yt]}}static \u0275fac=function(ge){return new(ge||Nt)};static \u0275mod=w.oAB({type:Nt});static \u0275inj=w.cJS({})}return Nt})()},5061:(nn,it,U)=>{U.d(it,{w:()=>w});class w{http;prefix;suffix;constructor(S,fe="/assets/i18n/",Pe=".json"){this.http=S,this.prefix=fe,this.suffix=Pe}getTranslation(S){return this.http.get(`${this.prefix}${S}${this.suffix}`)}}},3182:(nn,it,U)=>{U.d(it,{C6:()=>w.getApps,Mq:()=>w.getApp});var w=U(6122);(0,w.registerVersion)("firebase","9.23.0","app")},7142:(nn,it,U)=>{U.d(it,{Z:()=>w.Z});var w=U(3106);w.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(nn,it,U)=>{U.r(it);var w=U(5861),ne=U(3106),S=U(9058),fe=U(6122),Pe=U(7582),Ge=U(7879),Ve=U(4537);const $e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const $t=function It(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Tt=function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Vt=new S.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ze=new Ge.Yd("@firebase/auth");function _e(I,...m){ze.logLevel<=Ge.in.ERROR&&ze.error(`Auth (${fe.SDK_VERSION}): ${I}`,...m)}function et(I,...m){throw Xe(I,...m)}function Be(I,...m){return Xe(I,...m)}function gt(I,m,_){const D=Object.assign(Object.assign({},Tt()),{[m]:_});return new S.LL("auth","Firebase",D).create(m,{appName:I.name})}function vt(I,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&et(I,"argument-error"),gt(I,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(I,...m){if("string"!=typeof I){const _=m[0],D=[...m.slice(1)];return D[0]&&(D[0].appName=I.name),I._errorFactory.create(_,...D)}return Vt.create(I,...m)}function ot(I,m,..._){if(!I)throw Xe(m,..._)}function Ot(I){const m="INTERNAL ASSERTION FAILED: "+I;throw _e(m),new Error(m)}function Yt(I,m){I||Ot(m)}function Cn(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function kn(){return"http:"===pr()||"https:"===pr()}function pr(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class xe{constructor(m,_){this.shortDelay=m,this.longDelay=_,Yt(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,S.uI)()||(0,S.b$)()}get(){return function Nt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kn()||(0,S.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ge(I,m){Yt(I.emulator,"Emulator should always be set here");const{url:_}=I.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class Le{static initialize(m,_,D){this.fetchImpl=m,_&&(this.headersImpl=_),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},rt=new xe(3e4,6e4);function mt(I,m){return I.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:I.tenantId}):m}function ht(I,m,_,D){return jt.apply(this,arguments)}function jt(){return(jt=(0,w.Z)(function*(I,m,_,D,$={}){return Jt(I,$,(0,w.Z)(function*(){let te={},Se={};D&&("GET"===m?Se=D:te={body:JSON.stringify(D)});const at=(0,S.xO)(Object.assign({key:I.config.apiKey},Se)).slice(1),Wt=yield I._getAdditionalHeaders();return Wt["Content-Type"]="application/json",I.languageCode&&(Wt["X-Firebase-Locale"]=I.languageCode),Le.fetch()(dn(I,I.config.apiHost,_,at),Object.assign({method:m,headers:Wt,referrerPolicy:"no-referrer"},te))}))})).apply(this,arguments)}function Jt(I,m,_){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,w.Z)(function*(I,m,_){I._canInitEmulator=!1;const D=Object.assign(Object.assign({},He),m);try{const $=new Bn(I),te=yield Promise.race([_(),$.promise]);$.clearNetworkTimeout();const Se=yield te.json();if("needConfirmation"in Se)throw ur(I,"account-exists-with-different-credential",Se);if(te.ok&&!("errorMessage"in Se))return Se;{const at=te.ok?Se.errorMessage:Se.error.message,[Wt,sn]=at.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Wt)throw ur(I,"credential-already-in-use",Se);if("EMAIL_EXISTS"===Wt)throw ur(I,"email-already-in-use",Se);if("USER_DISABLED"===Wt)throw ur(I,"user-disabled",Se);const In=D[Wt]||Wt.toLowerCase().replace(/[_\s]+/g,"-");if(sn)throw gt(I,In,sn);et(I,In)}}catch($){if($ instanceof S.ZR)throw $;et(I,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function pn(I,m,_,D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,w.Z)(function*(I,m,_,D,$={}){const te=yield ht(I,m,_,D,$);return"mfaPendingCredential"in te&&et(I,"multi-factor-auth-required",{_serverResponse:te}),te})).apply(this,arguments)}function dn(I,m,_,D){const $=`${m}${_}?${D}`;return I.config.emulator?ge(I.config,$):`${I.config.apiScheme}://${$}`}class Bn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,D)=>{this.timer=setTimeout(()=>D(Be(this.auth,"network-request-failed")),rt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ur(I,m,_){const D={appName:I.name};_.email&&(D.email=_.email),_.phoneNumber&&(D.phoneNumber=_.phoneNumber);const $=Be(I,m,D);return $.customData._tokenResponse=_,$}function Sn(){return(Sn=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function or(){return(or=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ji(){return(ji=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Kr(I){if(I)try{const m=new Date(Number(I));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function gn(){return(gn=(0,w.Z)(function*(I,m=!1){const _=(0,S.m9)(I),D=yield _.getIdToken(m),$=An(D);ot($&&$.exp&&$.auth_time&&$.iat,_.auth,"internal-error");const te="object"==typeof $.firebase?$.firebase:void 0,Se=te?.sign_in_provider;return{claims:$,token:D,authTime:Kr(zn($.auth_time)),issuedAtTime:Kr(zn($.iat)),expirationTime:Kr(zn($.exp)),signInProvider:Se||null,signInSecondFactor:te?.sign_in_second_factor||null}})).apply(this,arguments)}function zn(I){return 1e3*Number(I)}function An(I){const[m,_,D]=I.split(".");if(void 0===m||void 0===_||void 0===D)return _e("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,S.tV)(_);return $?JSON.parse($):(_e("Failed to decode base64 JWT payload"),null)}catch($){return _e("Caught error parsing JWT payload as JSON",$?.toString()),null}}function Or(I,m){return _i.apply(this,arguments)}function _i(){return(_i=(0,w.Z)(function*(I,m,_=!1){if(_)return m;try{return yield m}catch(D){throw D instanceof S.ZR&&function Yn({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(D)&&I.auth.currentUser===I&&(yield I.auth.signOut()),D}})).apply(this,arguments)}class Sr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const $=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const D=this.getInterval(m);this.timerId=setTimeout((0,w.Z)(function*(){yield _.iteration()}),D)}iteration(){var m=this;return(0,w.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class Yi{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kr(this.lastLoginAt),this.creationTime=Kr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rr(I){return Fr.apply(this,arguments)}function Fr(){return Fr=(0,w.Z)(function*(I){var m;const _=I.auth,D=yield I.getIdToken(),$=yield Or(I,function ws(I,m){return ji.apply(this,arguments)}(_,{idToken:D}));ot($?.users.length,_,"internal-error");const te=$.users[0];I._notifyReloadListener(te);const Se=null!==(m=te.providerUserInfo)&&void 0!==m&&m.length?function vi(I){return I.map(m=>{var{providerId:_}=m,D=(0,Pe._T)(m,["providerId"]);return{providerId:_,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(te.providerUserInfo):[],at=function zi(I,m){return[...I.filter(D=>!m.some($=>$.providerId===D.providerId)),...m]}(I.providerData,Se),In=!!I.isAnonymous&&!(I.email&&te.passwordHash||at?.length),On={uid:te.localId,displayName:te.displayName||null,photoURL:te.photoUrl||null,email:te.email||null,emailVerified:te.emailVerified||!1,phoneNumber:te.phoneNumber||null,tenantId:te.tenantId||null,providerData:at,metadata:new Yi(te.createdAt,te.lastLoginAt),isAnonymous:In};Object.assign(I,On)}),Fr.apply(this,arguments)}function Ar(){return(Ar=(0,w.Z)(function*(I){const m=(0,S.m9)(I);yield rr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Vr(){return(Vr=(0,w.Z)(function*(I,m){const _=yield Jt(I,{},(0,w.Z)(function*(){const D=(0,S.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:$,apiKey:te}=I.config,Se=dn(I,$,"/v1/token",`key=${te}`),at=yield I._getAdditionalHeaders();return at["Content-Type"]="application/x-www-form-urlencoded",Le.fetch()(Se,{method:"POST",headers:at,body:D})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Dn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ot(m.idToken,"internal-error"),ot(typeof m.idToken<"u","internal-error"),ot(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function cr(I){const m=An(I);return ot(m,"internal-error"),ot(typeof m.exp<"u","internal-error"),ot(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var D=this;return(0,w.Z)(function*(){return ot(!D.accessToken||D.refreshToken,m,"user-token-expired"),_||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(m,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var D=this;return(0,w.Z)(function*(){const{accessToken:$,refreshToken:te,expiresIn:Se}=yield function Ei(I,m){return Vr.apply(this,arguments)}(m,_);D.updateTokensAndExpiration($,te,Number(Se))})()}updateTokensAndExpiration(m,_,D){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(m,_){const{refreshToken:D,accessToken:$,expirationTime:te}=_,Se=new Dn;return D&&(ot("string"==typeof D,"internal-error",{appName:m}),Se.refreshToken=D),$&&(ot("string"==typeof $,"internal-error",{appName:m}),Se.accessToken=$),te&&(ot("number"==typeof te,"internal-error",{appName:m}),Se.expirationTime=te),Se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Dn,this.toJSON())}_performRefresh(){return Ot("not implemented")}}function Br(I,m){ot("string"==typeof I||typeof I>"u","internal-error",{appName:m})}class nr{constructor(m){var{uid:_,auth:D,stsTokenManager:$}=m,te=(0,Pe._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=D,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=te.displayName||null,this.email=te.email||null,this.emailVerified=te.emailVerified||!1,this.phoneNumber=te.phoneNumber||null,this.photoURL=te.photoURL||null,this.isAnonymous=te.isAnonymous||!1,this.tenantId=te.tenantId||null,this.providerData=te.providerData?[...te.providerData]:[],this.metadata=new Yi(te.createdAt||void 0,te.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,w.Z)(function*(){const D=yield Or(_,_.stsTokenManager.getToken(_.auth,m));return ot(D,_.auth,"internal-error"),_.accessToken!==D&&(_.accessToken=D,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),D})()}getIdTokenResult(m){return function yi(I){return gn.apply(this,arguments)}(this,m)}reload(){return function an(I){return Ar.apply(this,arguments)}(this)}_assign(m){this!==m&&(ot(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new nr(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var D=this;return(0,w.Z)(function*(){let $=!1;m.idToken&&m.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(m),$=!0),_&&(yield rr(D)),yield D.auth._persistUserIfCurrent(D),$&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var m=this;return(0,w.Z)(function*(){const _=yield m.getIdToken();return yield Or(m,function fn(I,m){return Sn.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var D,$,te,Se,at,Wt,sn,In;const On=null!==(D=_.displayName)&&void 0!==D?D:void 0,us=null!==($=_.email)&&void 0!==$?$:void 0,za=null!==(te=_.phoneNumber)&&void 0!==te?te:void 0,Qc=null!==(Se=_.photoURL)&&void 0!==Se?Se:void 0,pc=null!==(at=_.tenantId)&&void 0!==at?at:void 0,Pl=null!==(Wt=_._redirectEventId)&&void 0!==Wt?Wt:void 0,xl=null!==(sn=_.createdAt)&&void 0!==sn?sn:void 0,ii=null!==(In=_.lastLoginAt)&&void 0!==In?In:void 0,{uid:$r,emailVerified:Tr,isAnonymous:Mu,providerData:Oi,stsTokenManager:Xc}=_;ot($r&&Xc,m,"internal-error");const cp=Dn.fromJSON(this.name,Xc);ot("string"==typeof $r,m,"internal-error"),Br(On,m.name),Br(us,m.name),ot("boolean"==typeof Tr,m,"internal-error"),ot("boolean"==typeof Mu,m,"internal-error"),Br(za,m.name),Br(Qc,m.name),Br(pc,m.name),Br(Pl,m.name),Br(xl,m.name),Br(ii,m.name);const il=new nr({uid:$r,auth:m,email:us,emailVerified:Tr,displayName:On,isAnonymous:Mu,photoURL:Qc,phoneNumber:za,tenantId:pc,stsTokenManager:cp,createdAt:xl,lastLoginAt:ii});return Oi&&Array.isArray(Oi)&&(il.providerData=Oi.map(Fd=>Object.assign({},Fd))),Pl&&(il._redirectEventId=Pl),il}static _fromIdTokenResponse(m,_,D=!1){return(0,w.Z)(function*(){const $=new Dn;$.updateFromServerResponse(_);const te=new nr({uid:_.localId,auth:m,stsTokenManager:$,isAnonymous:D});return yield rr(te),te})()}}const vr=new Map;function Hn(I){Yt(I instanceof Function,"Expected a class definition");let m=vr.get(I);return m?(Yt(m instanceof I,"Instance stored in cache mismatched with class"),m):(m=new I,vr.set(I,m),m)}const Qn=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(_,D){var $=this;return(0,w.Z)(function*(){$.storage[_]=D})()}_get(_){var D=this;return(0,w.Z)(function*(){const $=D.storage[_];return void 0===$?null:$})()}_remove(_){var D=this;return(0,w.Z)(function*(){delete D.storage[_]})()}_addListener(_,D){}_removeListener(_,D){}}return I.type="NONE",I})();function Oe(I,m,_){return`firebase:${I}:${m}:${_}`}class re{constructor(m,_,D){this.persistence=m,this.auth=_,this.userKey=D;const{config:$,name:te}=this.auth;this.fullUserKey=Oe(this.userKey,$.apiKey,te),this.fullPersistenceKey=Oe("persistence",$.apiKey,te),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,w.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?nr._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,w.Z)(function*(){if(_.persistence===m)return;const D=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,D?_.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,D="authUser"){return(0,w.Z)(function*(){if(!_.length)return new re(Hn(Qn),m,D);const $=(yield Promise.all(_.map(function(){var sn=(0,w.Z)(function*(In){if(yield In._isAvailable())return In});return function(In){return sn.apply(this,arguments)}}()))).filter(sn=>sn);let te=$[0]||Hn(Qn);const Se=Oe(D,m.config.apiKey,m.name);let at=null;for(const sn of _)try{const In=yield sn._get(Se);if(In){const On=nr._fromJSON(m,In);sn!==te&&(at=On),te=sn;break}}catch{}const Wt=$.filter(sn=>sn._shouldAllowMigration);return te._shouldAllowMigration&&Wt.length?(te=Wt[0],at&&(yield te._set(Se,at.toJSON())),yield Promise.all(_.map(function(){var sn=(0,w.Z)(function*(In){if(In!==te)try{yield In._remove(Se)}catch{}});return function(In){return sn.apply(this,arguments)}}())),new re(te,m,D)):new re(te,m,D)})()}}function ae(I){const m=I.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Dt(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(ie(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Pn(m))return"Blackberry";if(hn(m))return"Webos";if(le(m))return"Safari";if((m.includes("chrome/")||Ze(m))&&!m.includes("edge/"))return"Chrome";if(qt(m))return"Android";{const D=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function ie(I=(0,S.z$)()){return/firefox\//i.test(I)}function le(I=(0,S.z$)()){const m=I.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Ze(I=(0,S.z$)()){return/crios\//i.test(I)}function Dt(I=(0,S.z$)()){return/iemobile/i.test(I)}function qt(I=(0,S.z$)()){return/android/i.test(I)}function Pn(I=(0,S.z$)()){return/blackberry/i.test(I)}function hn(I=(0,S.z$)()){return/webos/i.test(I)}function Ut(I=(0,S.z$)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function Fe(I=(0,S.z$)()){return Ut(I)||qt(I)||hn(I)||Pn(I)||/windows phone/i.test(I)||Dt(I)}function Te(I,m=[]){let _;switch(I){case"Browser":_=ae((0,S.z$)());break;case"Worker":_=`${ae((0,S.z$)())}-${I}`;break;default:_=I}const D=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${fe.SDK_VERSION}/${D}`}function Ye(){return(Ye=(0,w.Z)(function*(I){return(yield ht(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Et(I,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,w.Z)(function*(I,m){return ht(I,"GET","/v2/recaptchaConfig",mt(I,m))})).apply(this,arguments)}function Zt(I){return void 0!==I&&void 0!==I.getResponse}function Mn(I){return void 0!==I&&void 0!==I.enterprise}class gr{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function jr(I){return new Promise((m,_)=>{const D=document.createElement("script");D.setAttribute("src",I),D.onload=m,D.onerror=$=>{const te=Be("internal-error");te.customData=$,_(te)},D.type="text/javascript",D.charset="UTF-8",function dr(){var I,m;return null!==(m=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==m?m:document}().appendChild(D)})}function Hi(I){return`__${I}${Math.floor(1e6*Math.random())}`}class ts{constructor(m){this.type="recaptcha-enterprise",this.auth=Mr(m)}verify(m="verify",_=!1){var D=this;return(0,w.Z)(function*(){function te(){return te=(0,w.Z)(function*(at){if(!_){if(null==at.tenantId&&null!=at._agentRecaptchaConfig)return at._agentRecaptchaConfig.siteKey;if(null!=at.tenantId&&void 0!==at._tenantRecaptchaConfigs[at.tenantId])return at._tenantRecaptchaConfigs[at.tenantId].siteKey}return new Promise(function(){var Wt=(0,w.Z)(function*(sn,In){Et(at,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(On=>{if(void 0!==On.recaptchaKey){const us=new gr(On);return null==at.tenantId?at._agentRecaptchaConfig=us:at._tenantRecaptchaConfigs[at.tenantId]=us,sn(us.siteKey)}In(new Error("recaptcha Enterprise site key undefined"))}).catch(On=>{In(On)})});return function(sn,In){return Wt.apply(this,arguments)}}())}),te.apply(this,arguments)}function Se(at,Wt,sn){const In=window.grecaptcha;Mn(In)?In.enterprise.ready(()=>{In.enterprise.execute(at,{action:m}).then(On=>{Wt(On)}).catch(()=>{Wt("NO_RECAPTCHA")})}):sn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((at,Wt)=>{(function $(at){return te.apply(this,arguments)})(D.auth).then(sn=>{if(!_&&Mn(window.grecaptcha))Se(sn,at,Wt);else{if(typeof window>"u")return void Wt(new Error("RecaptchaVerifier is only supported in browser"));jr("https://www.google.com/recaptcha/enterprise.js?render="+sn).then(()=>{Se(sn,at,Wt)}).catch(In=>{Wt(In)})}}).catch(sn=>{Wt(sn)})})})()}}function wi(I,m,_){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,w.Z)(function*(I,m,_,D=!1){const $=new ts(I);let te;try{te=yield $.verify(_)}catch{te=yield $.verify(_,!0)}const Se=Object.assign({},m);return Object.assign(Se,D?{captchaResp:te}:{captchaResponse:te}),Object.assign(Se,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Se,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Se})).apply(this,arguments)}class ls{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const D=te=>new Promise((Se,at)=>{try{Se(m(te))}catch(Wt){at(Wt)}});D.onAbort=_,this.queue.push(D);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,w.Z)(function*(){if(_.auth.currentUser===m)return;const D=[];try{for(const $ of _.queue)yield $(m),$.onAbort&&D.push($.onAbort)}catch($){D.reverse();for(const te of D)try{te()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class so{constructor(m,_,D,$){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=D,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bs(this),this.idTokenSubscription=new Bs(this),this.beforeStateQueue=new ls(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(m,_){var D=this;return _&&(this._popupRedirectResolver=Hn(_)),this._initializationPromise=this.queue((0,w.Z)(function*(){var $,te;if(!D._deleted&&(D.persistenceManager=yield re.create(D,m),!D._deleted)){if(null!==($=D._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(_),D.lastNotifiedUid=(null===(te=D.currentUser)||void 0===te?void 0:te.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,w.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,w.Z)(function*(){var D;const $=yield _.assertedPersistence.getCurrentUser();let te=$,Se=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const at=null===(D=_.redirectUser)||void 0===D?void 0:D._redirectEventId,Wt=te?._redirectEventId,sn=yield _.tryRedirectSignIn(m);(!at||at===Wt)&&sn?.user&&(te=sn.user,Se=!0)}if(!te)return _.directlySetCurrentUser(null);if(!te._redirectEventId){if(Se)try{yield _.beforeStateQueue.runMiddleware(te)}catch(at){te=$,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(at))}return te?_.reloadAndSetCurrentUserOrClear(te):_.directlySetCurrentUser(null)}return ot(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===te._redirectEventId?_.directlySetCurrentUser(te):_.reloadAndSetCurrentUserOrClear(te)})()}tryRedirectSignIn(m){var _=this;return(0,w.Z)(function*(){let D=null;try{D=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,w.Z)(function*(){try{yield rr(m)}catch(D){if("auth/network-request-failed"!==D?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Jn(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var m=this;return(0,w.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,w.Z)(function*(){const D=m?(0,S.m9)(m):null;return D&&ot(D.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(D&&D._clone(_))})()}_updateCurrentUser(m,_=!1){var D=this;return(0,w.Z)(function*(){if(!D._deleted)return m&&ot(D.tenantId===m.tenantId,D,"tenant-id-mismatch"),_||(yield D.beforeStateQueue.runMiddleware(m)),D.queue((0,w.Z)(function*(){yield D.directlySetCurrentUser(m),D.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,w.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,w.Z)(function*(){yield _.assertedPersistence.setPersistence(Hn(m))}))}initializeRecaptchaConfig(){var m=this;return(0,w.Z)(function*(){const _=yield Et(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),D=new gr(_);null==m.tenantId?m._agentRecaptchaConfig=D:m._tenantRecaptchaConfigs[m.tenantId]=D,D.emailPasswordEnabled&&new ts(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new S.LL("auth","Firebase",m())}onAuthStateChanged(m,_,D){return this.registerStateListener(this.authStateSubscription,m,_,D)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,D){return this.registerStateListener(this.idTokenSubscription,m,_,D)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var D=this;return(0,w.Z)(function*(){const $=yield D.getOrInitRedirectPersistenceManager(_);return null===m?$.removeCurrentUser():$.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,w.Z)(function*(){if(!_.redirectPersistenceManager){const D=m&&Hn(m)||_._popupRedirectResolver;ot(D,_,"argument-error"),_.redirectPersistenceManager=yield re.create(_,[Hn(D._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,w.Z)(function*(){var D,$;return _._isInitialized&&(yield _.queue((0,w.Z)(function*(){}))),(null===(D=_._currentUser)||void 0===D?void 0:D._redirectEventId)===m?_._currentUser:(null===($=_.redirectUser)||void 0===$?void 0:$._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,w.Z)(function*(){if(m===_.currentUser)return _.queue((0,w.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,D,$){if(this._deleted)return()=>{};const te="function"==typeof _?_:_.next.bind(_),Se=this._isInitialized?Promise.resolve():this._initializationPromise;return ot(Se,this,"internal-error"),Se.then(()=>te(this.currentUser)),"function"==typeof _?m.addObserver(_,D,$):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,w.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Te(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,w.Z)(function*(){var _;const D={"X-Client-Version":m.clientVersion};m.app.options.appId&&(D["X-Firebase-gmpid"]=m.app.options.appId);const $=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();$&&(D["X-Firebase-Client"]=$);const te=yield m._getAppCheckToken();return te&&(D["X-Firebase-AppCheck"]=te),D})()}_getAppCheckToken(){var m=this;return(0,w.Z)(function*(){var _;const D=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return D?.error&&function Lt(I,...m){ze.logLevel<=Ge.in.WARN&&ze.warn(`Auth (${fe.SDK_VERSION}): ${I}`,...m)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function Mr(I){return(0,S.m9)(I)}class Bs{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,S.ne)(_=>this.observer=_)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ci(I){const m=I.indexOf(":");return m<0?"":I.substr(0,m+1)}function Os(I){if(!I)return null;const m=Number(I);return isNaN(m)?null:m}class Fi{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return Ot("not implemented")}_getIdTokenResponse(m){return Ot("not implemented")}_linkToIdToken(m,_){return Ot("not implemented")}_getReauthenticationResolver(m){return Ot("not implemented")}}function aa(I,m){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:resetPassword",mt(I,m))})).apply(this,arguments)}function ee(I,m){return he.apply(this,arguments)}function he(){return(he=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ie(){return(Ie=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:update",mt(I,m))})).apply(this,arguments)}function ct(I,m){return St.apply(this,arguments)}function St(){return(St=(0,w.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithPassword",mt(I,m))})).apply(this,arguments)}function Rt(I,m){return zt.apply(this,arguments)}function zt(){return(zt=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:sendOobCode",mt(I,m))})).apply(this,arguments)}function Ce(){return(Ce=(0,w.Z)(function*(I,m){return Rt(I,m)})).apply(this,arguments)}function We(I,m){return _t.apply(this,arguments)}function _t(){return(_t=(0,w.Z)(function*(I,m){return Rt(I,m)})).apply(this,arguments)}function bt(I,m){return pt.apply(this,arguments)}function pt(){return(pt=(0,w.Z)(function*(I,m){return Rt(I,m)})).apply(this,arguments)}function vn(){return(vn=(0,w.Z)(function*(I,m){return Rt(I,m)})).apply(this,arguments)}function Hr(){return(Hr=(0,w.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithEmailLink",mt(I,m))})).apply(this,arguments)}function Wi(){return(Wi=(0,w.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithEmailLink",mt(I,m))})).apply(this,arguments)}class ui extends Fi{constructor(m,_,D,$=null){super("password",D),this._email=m,this._password=_,this._tenantId=$}static _fromEmailAndPassword(m,_){return new ui(m,_,"password")}static _fromEmailAndCode(m,_,D=null){return new ui(m,_,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,w.Z)(function*(){var D;switch(_.signInMethod){case"password":const $={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=m._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const te=yield wi(m,$,"signInWithPassword");return ct(m,te)}return ct(m,$).catch(function(){var te=(0,w.Z)(function*(Se){if("auth/missing-recaptcha-token"===Se.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const at=yield wi(m,$,"signInWithPassword");return ct(m,at)}return Promise.reject(Se)});return function(Se){return te.apply(this,arguments)}}());case"emailLink":return function qn(I,m){return Hr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:et(m,"internal-error")}})()}_linkToIdToken(m,_){var D=this;return(0,w.Z)(function*(){switch(D.signInMethod){case"password":return ee(m,{idToken:_,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function ai(I,m){return Wi.apply(this,arguments)}(m,{idToken:_,email:D._email,oobCode:D._password});default:et(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Qi(I,m){return cs.apply(this,arguments)}function cs(){return(cs=(0,w.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithIdp",mt(I,m))})).apply(this,arguments)}class ms extends Fi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new ms(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):et("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:$}=_,te=(0,Pe._T)(_,["providerId","signInMethod"]);if(!D||!$)return null;const Se=new ms(D,$);return Se.idToken=te.idToken||void 0,Se.accessToken=te.accessToken||void 0,Se.secret=te.secret,Se.nonce=te.nonce,Se.pendingToken=te.pendingToken||null,Se}_getIdTokenResponse(m){return Qi(m,this.buildRequest())}_linkToIdToken(m,_){const D=this.buildRequest();return D.idToken=_,Qi(m,D)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Qi(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,S.xO)(_)}return m}}function ds(){return(ds=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:sendVerificationCode",mt(I,m))})).apply(this,arguments)}function Po(){return(Po=(0,w.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithPhoneNumber",mt(I,m))})).apply(this,arguments)}function ys(){return(ys=(0,w.Z)(function*(I,m){const _=yield pn(I,"POST","/v1/accounts:signInWithPhoneNumber",mt(I,m));if(_.temporaryProof)throw ur(I,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const xo={USER_NOT_FOUND:"user-not-found"};function bi(){return(bi=(0,w.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithPhoneNumber",mt(I,Object.assign(Object.assign({},m),{operation:"REAUTH"})),xo)})).apply(this,arguments)}class Lr extends Fi{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Lr({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Lr({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function li(I,m){return Po.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function ua(I,m){return ys.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Rs(I,m){return bi.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:D,verificationCode:$}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:D,code:$}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:D,phoneNumber:$,temporaryProof:te}=m;return D||_||$||te?new Lr({verificationId:_,verificationCode:D,phoneNumber:$,temporaryProof:te}):null}}class mr{constructor(m){var _,D,$,te,Se,at;const Wt=(0,S.zd)((0,S.pd)(m)),sn=null!==(_=Wt.apiKey)&&void 0!==_?_:null,In=null!==(D=Wt.oobCode)&&void 0!==D?D:null,On=function Io(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Wt.mode)&&void 0!==$?$:null);ot(sn&&In&&On,"argument-error"),this.apiKey=sn,this.operation=On,this.code=In,this.continueUrl=null!==(te=Wt.continueUrl)&&void 0!==te?te:null,this.languageCode=null!==(Se=Wt.languageCode)&&void 0!==Se?Se:null,this.tenantId=null!==(at=Wt.tenantId)&&void 0!==at?at:null}static parseLink(m){const _=function oo(I){const m=(0,S.zd)((0,S.pd)(I)).link,_=m?(0,S.zd)((0,S.pd)(m)).deep_link_id:null,D=(0,S.zd)((0,S.pd)(I)).deep_link_id;return(D?(0,S.zd)((0,S.pd)(D)).link:null)||D||_||m||I}(m);try{return new mr(_)}catch{return null}}}let bo=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(_,D){return ui._fromEmailAndPassword(_,D)}static credentialWithLink(_,D){const $=mr.parseLink(D);return ot($,"argument-error"),ui._fromEmailAndCode(_,$.code,$.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Cs{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Vi extends Cs{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ns extends Vi{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return ot("providerId"in _&&"signInMethod"in _,"argument-error"),ms._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ot(m.idToken||m.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ns.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ns.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:D,oauthTokenSecret:$,pendingToken:te,nonce:Se,providerId:at}=m;if(!D&&!$&&!_&&!te||!at)return null;try{return new ns(at)._credential({idToken:_,accessToken:D,nonce:Se,pendingToken:te})}catch{return null}}}let Do=(()=>{class I extends Vi{constructor(){super("facebook.com")}static credential(_){return ms._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return I.credential(_.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),To=(()=>{class I extends Vi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,D){return ms._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:D})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:D,oauthAccessToken:$}=_;if(!D&&!$)return null;try{return I.credential(D,$)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),rs=(()=>{class I extends Vi{constructor(){super("github.com")}static credential(_){return ms._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return I.credential(_.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Di extends Fi{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Qi(m,this.buildRequest())}_linkToIdToken(m,_){const D=this.buildRequest();return D.idToken=_,Qi(m,D)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Qi(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:$,pendingToken:te}=_;return D&&$&&te&&D===$?new Di(D,te):null}static _create(m,_){return new Di(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bs extends Cs{constructor(m){ot(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return bs.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return bs.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Di.fromJSON(m);return ot(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:D}=m;if(!_||!D)return null;try{return Di._create(D,_)}catch{return null}}}let ao=(()=>{class I extends Vi{constructor(){super("twitter.com")}static credential(_,D){return ms._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:D})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:D,oauthTokenSecret:$}=_;if(!D||!$)return null;try{return I.credential(D,$)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function la(I,m){return is.apply(this,arguments)}function is(){return(is=(0,w.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signUp",mt(I,m))})).apply(this,arguments)}class $i{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,D,$=!1){return(0,w.Z)(function*(){const te=yield nr._fromIdTokenResponse(m,D,$),Se=ca(D);return new $i({user:te,providerId:Se,_tokenResponse:D,operationType:_})})()}static _forOperation(m,_,D){return(0,w.Z)(function*(){yield m._updateTokensIfNecessary(D,!0);const $=ca(D);return new $i({user:m,providerId:$,_tokenResponse:D,operationType:_})})()}}function ca(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function _a(){return(_a=(0,w.Z)(function*(I){var m;const _=Mr(I);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new $i({user:_.currentUser,providerId:null,operationType:"signIn"});const D=yield la(_,{returnSecureToken:!0}),$=yield $i._fromIdTokenResponse(_,"signIn",D,!0);return yield _._updateCurrentUser($.user),$})).apply(this,arguments)}class Oo extends S.ZR{constructor(m,_,D,$){var te;super(_.code,_.message),this.operationType=D,this.user=$,Object.setPrototypeOf(this,Oo.prototype),this.customData={appName:m.name,tenantId:null!==(te=m.tenantId)&&void 0!==te?te:void 0,_serverResponse:_.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(m,_,D,$){return new Oo(m,_,D,$)}}function gu(I,m,_,D){return("reauthenticate"===m?_._getReauthenticationResolver(I):_._getIdTokenResponse(I)).catch(te=>{throw"auth/multi-factor-auth-required"===te.code?Oo._fromErrorAndOperation(I,te,m,D):te})}function ju(I){return new Set(I.map(({providerId:m})=>m).filter(m=>!!m))}function va(){return va=(0,w.Z)(function*(I,m){const _=(0,S.m9)(I);yield yu(!0,_,m);const{providerUserInfo:D}=yield function jn(I,m){return or.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),$=ju(D||[]);return _.providerData=_.providerData.filter(te=>$.has(te.providerId)),$.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),va.apply(this,arguments)}function Oa(I,m){return mu.apply(this,arguments)}function mu(){return(mu=(0,w.Z)(function*(I,m,_=!1){const D=yield Or(I,m._linkToIdToken(I.auth,yield I.getIdToken()),_);return $i._forOperation(I,"link",D)})).apply(this,arguments)}function yu(I,m,_){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,w.Z)(function*(I,m,_){yield rr(m);const $=!1===I?"provider-already-linked":"no-such-provider";ot(ju(m.providerData).has(_)===I,m.auth,$)})).apply(this,arguments)}function ko(I,m){return _u.apply(this,arguments)}function _u(){return(_u=(0,w.Z)(function*(I,m,_=!1){const{auth:D}=I,$="reauthenticate";try{const te=yield Or(I,gu(D,$,m,I),_);ot(te.idToken,D,"internal-error");const Se=An(te.idToken);ot(Se,D,"internal-error");const{sub:at}=Se;return ot(I.uid===at,D,"user-mismatch"),$i._forOperation(I,$,te)}catch(te){throw"auth/user-not-found"===te?.code&&et(D,"user-mismatch"),te}})).apply(this,arguments)}function Ja(I,m){return uo.apply(this,arguments)}function uo(){return(uo=(0,w.Z)(function*(I,m,_=!1){const D="signIn",$=yield gu(I,D,m),te=yield $i._fromIdTokenResponse(I,D,$);return _||(yield I._updateCurrentUser(te.user)),te})).apply(this,arguments)}function lo(I,m){return da.apply(this,arguments)}function da(){return(da=(0,w.Z)(function*(I,m){return Ja(Mr(I),m)})).apply(this,arguments)}function vu(I,m){return zo.apply(this,arguments)}function zo(){return(zo=(0,w.Z)(function*(I,m){const _=(0,S.m9)(I);return yield yu(!1,_,m.providerId),Oa(_,m)})).apply(this,arguments)}function ci(I,m){return $u.apply(this,arguments)}function $u(){return($u=(0,w.Z)(function*(I,m){return ko((0,S.m9)(I),m)})).apply(this,arguments)}function eu(){return(eu=(0,w.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithCustomToken",mt(I,m))})).apply(this,arguments)}function tu(){return tu=(0,w.Z)(function*(I,m){const _=Mr(I),D=yield function ar(I,m){return eu.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),$=yield $i._fromIdTokenResponse(_,"signIn",D);return yield _._updateCurrentUser($.user),$}),tu.apply(this,arguments)}class Wo{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Lo._fromServerResponse(m,_):"totpInfo"in _?qo._fromServerResponse(m,_):et(m,"internal-error")}}class Lo extends Wo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Lo(_)}}class qo extends Wo{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new qo(_)}}function Ko(I,m,_){var D;ot((null===(D=_.url)||void 0===D?void 0:D.length)>0,I,"invalid-continue-uri"),ot(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ot(_.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(ot(_.android.packageName.length>0,I,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function H(){return H=(0,w.Z)(function*(I,m,_){var D;const $=Mr(I),te={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=$._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const Se=yield wi($,te,"getOobCode",!0);_&&Ko($,Se,_),yield We($,Se)}else _&&Ko($,te,_),yield We($,te).catch(function(){var Se=(0,w.Z)(function*(at){if("auth/missing-recaptcha-token"!==at.code)return Promise.reject(at);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Wt=yield wi($,te,"getOobCode",!0);_&&Ko($,Wt,_),yield We($,Wt)}});return function(at){return Se.apply(this,arguments)}}())}),H.apply(this,arguments)}function L(){return(L=(0,w.Z)(function*(I,m,_){yield aa((0,S.m9)(I),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Me(){return Me=(0,w.Z)(function*(I,m){yield function se(I,m){return Ie.apply(this,arguments)}((0,S.m9)(I),{oobCode:m})}),Me.apply(this,arguments)}function cn(I,m){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,w.Z)(function*(I,m){const _=(0,S.m9)(I),D=yield aa(_,{oobCode:m}),$=D.requestType;switch(ot($,_,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ot(D.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ot(D.mfaInfo,_,"internal-error");default:ot(D.email,_,"internal-error")}let te=null;return D.mfaInfo&&(te=Wo._fromServerResponse(Mr(_),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:te},operation:$}})).apply(this,arguments)}function di(){return(di=(0,w.Z)(function*(I,m){const{data:_}=yield cn((0,S.m9)(I),m);return _.email})).apply(this,arguments)}function Xi(){return Xi=(0,w.Z)(function*(I,m,_){var D;const $=Mr(I),te={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let Se;if(null!==(D=$._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const sn=yield wi($,te,"signUpPassword");Se=la($,sn)}else Se=la($,te).catch(function(){var sn=(0,w.Z)(function*(In){if("auth/missing-recaptcha-token"===In.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const On=yield wi($,te,"signUpPassword");return la($,On)}return Promise.reject(In)});return function(In){return sn.apply(this,arguments)}}());const at=yield Se.catch(sn=>Promise.reject(sn)),Wt=yield $i._fromIdTokenResponse($,"signIn",at);return yield $._updateCurrentUser(Wt.user),Wt}),Xi.apply(this,arguments)}function Yo(){return Yo=(0,w.Z)(function*(I,m,_){var D;const $=Mr(I),te={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Se(at,Wt){ot(Wt.handleCodeInApp,$,"argument-error"),Wt&&Ko($,at,Wt)}if(null!==(D=$._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const at=yield wi($,te,"getOobCode",!0);Se(at,_),yield bt($,at)}else Se(te,_),yield bt($,te).catch(function(){var at=(0,w.Z)(function*(Wt){if("auth/missing-recaptcha-token"!==Wt.code)return Promise.reject(Wt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const sn=yield wi($,te,"getOobCode",!0);Se(sn,_),yield bt($,sn)}});return function(Wt){return at.apply(this,arguments)}}())}),Yo.apply(this,arguments)}function gl(){return(gl=(0,w.Z)(function*(I,m,_){const D=(0,S.m9)(I),$=bo.credentialWithLink(m,_||Cn());return ot($._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),lo(D,$)})).apply(this,arguments)}function Eu(){return(Eu=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:createAuthUri",mt(I,m))})).apply(this,arguments)}function wu(){return wu=(0,w.Z)(function*(I,m){const D={identifier:m,continueUri:kn()?Cn():"http://localhost"},{signinMethods:$}=yield function Gu(I,m){return Eu.apply(this,arguments)}((0,S.m9)(I),D);return $||[]}),wu.apply(this,arguments)}function gi(){return gi=(0,w.Z)(function*(I,m){const _=(0,S.m9)(I),$={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};m&&Ko(_.auth,$,m);const{email:te}=yield function we(I,m){return Ce.apply(this,arguments)}(_.auth,$);te!==I.email&&(yield I.reload())}),gi.apply(this,arguments)}function Ea(){return Ea=(0,w.Z)(function*(I,m,_){const D=(0,S.m9)(I),te={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:m};_&&Ko(D.auth,te,_);const{email:Se}=yield function Qt(I,m){return vn.apply(this,arguments)}(D.auth,te);Se!==I.email&&(yield I.reload())}),Ea.apply(this,arguments)}function nu(){return(nu=(0,w.Z)(function*(I,m){return ht(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function La(){return La=(0,w.Z)(function*(I,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const D=(0,S.m9)(I),te={idToken:yield D.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Se=yield Or(D,function Ac(I,m){return nu.apply(this,arguments)}(D.auth,te));D.displayName=Se.displayName||null,D.photoURL=Se.photoUrl||null;const at=D.providerData.find(({providerId:Wt})=>"password"===Wt);at&&(at.displayName=D.displayName,at.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Se)}),La.apply(this,arguments)}function Vo(I,m,_){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,w.Z)(function*(I,m,_){const{auth:D}=I,te={idToken:yield I.getIdToken(),returnSecureToken:!0};m&&(te.email=m),_&&(te.password=_);const Se=yield Or(I,ee(D,te));yield I._updateTokensIfNecessary(Se,!0)})).apply(this,arguments)}class Dr{constructor(m,_,D={}){this.isNewUser=m,this.providerId=_,this.profile=D}}class Qo extends Dr{constructor(m,_,D,$){super(m,_,D),this.username=$}}class R extends Dr{constructor(m,_){super(m,"facebook.com",_)}}class J extends Qo{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class B extends Dr{constructor(m,_){super(m,"google.com",_)}}class Z extends Qo{constructor(m,_,D){super(m,"twitter.com",_,D)}}function De(I){const{user:m,_tokenResponse:_}=I;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Zl(I){var m,_;if(!I)return null;const{providerId:D}=I,$=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},te=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!D&&I?.idToken){const Se=null===(_=null===(m=An(I.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Se)return new Dr(te,"anonymous"!==Se&&"custom"!==Se?Se:null)}if(!D)return null;switch(D){case"facebook.com":return new R(te,$);case"github.com":return new J(te,$);case"google.com":return new B(te,$);case"twitter.com":return new Z(te,$,I.screenName||null);case"custom":case"anonymous":return new Dr(te,null);default:return new Dr(te,D,$)}}(_)}class qi{constructor(m,_,D){this.type=m,this.credential=_,this.auth=D}static _fromIdtoken(m,_){return new qi("enroll",m,_)}static _fromMfaPendingCredential(m){return new qi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,D;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return qi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(D=m.multiFactorSession)&&void 0!==D&&D.idToken)return qi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Un{constructor(m,_,D){this.session=m,this.hints=_,this.signInResolver=D}static _fromError(m,_){const D=Mr(m),$=_.customData._serverResponse,te=($.mfaInfo||[]).map(at=>Wo._fromServerResponse(D,at));ot($.mfaPendingCredential,D,"internal-error");const Se=qi._fromMfaPendingCredential($.mfaPendingCredential);return new Un(Se,te,function(){var at=(0,w.Z)(function*(Wt){const sn=yield Wt._process(D,Se);delete $.mfaInfo,delete $.mfaPendingCredential;const In=Object.assign(Object.assign({},$),{idToken:sn.idToken,refreshToken:sn.refreshToken});switch(_.operationType){case"signIn":const On=yield $i._fromIdTokenResponse(D,_.operationType,In);return yield D._updateCurrentUser(On.user),On;case"reauthenticate":return ot(_.user,D,"internal-error"),$i._forOperation(_.user,_.operationType,In);default:et(D,"internal-error")}});return function(Wt){return at.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,w.Z)(function*(){return _.signInResolver(m)})()}}class as{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(D=>Wo._fromServerResponse(m.auth,D)))})}static _fromUser(m){return new as(m)}getSession(){var m=this;return(0,w.Z)(function*(){return qi._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var D=this;return(0,w.Z)(function*(){const $=m,te=yield D.getSession(),Se=yield Or(D.user,$._process(D.user.auth,te,_));return yield D.user._updateTokensIfNecessary(Se),D.user.reload()})()}unenroll(m){var _=this;return(0,w.Z)(function*(){const D="string"==typeof m?m:m.uid,$=yield _.user.getIdToken();try{const te=yield Or(_.user,function Mc(I,m){return ht(I,"POST","/v2/accounts/mfaEnrollment:withdraw",mt(I,m))}(_.user.auth,{idToken:$,mfaEnrollmentId:D}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Se})=>Se!==D),yield _.user._updateTokensIfNecessary(te),yield _.user.reload()}catch(te){throw te}})()}}const zu=new WeakMap,to="__sak";class Ed{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(to,"1"),this.storage.removeItem(to),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bo=(()=>{class I extends Ed{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,D)=>this.onStorageEvent(_,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fa(){const I=(0,S.z$)();return le(I)||Ut(I)}()&&function je(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Fe(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const D of Object.keys(this.listeners)){const $=this.storage.getItem(D),te=this.localCache[D];$!==te&&_(D,te,$)}}onStorageEvent(_,D=!1){if(!_.key)return void this.forAllChangedKeys((at,Wt,sn)=>{this.notifyListeners(at,sn)});const $=_.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const at=this.storage.getItem($);if(_.newValue!==at)null!==_.newValue?this.storage.setItem($,_.newValue):this.storage.removeItem($);else if(this.localCache[$]===_.newValue&&!D)return}const te=()=>{const at=this.storage.getItem($);!D&&this.localCache[$]===at||this.notifyListeners($,at)},Se=this.storage.getItem($);!function Je(){return(0,S.w1)()&&10===document.documentMode}()||Se===_.newValue||_.newValue===_.oldValue?te():setTimeout(te,10)}notifyListeners(_,D){this.localCache[_]=D;const $=this.listeners[_];if($)for(const te of Array.from($))te(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,D,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:D,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,D){var $=()=>super._set,te=this;return(0,w.Z)(function*(){yield $().call(te,_,D),te.localCache[_]=JSON.stringify(D)})()}_get(_){var D=()=>super._get,$=this;return(0,w.Z)(function*(){const te=yield D().call($,_);return $.localCache[_]=JSON.stringify(te),te})()}_remove(_){var D=()=>super._remove,$=this;return(0,w.Z)(function*(){yield D().call($,_),delete $.localCache[_]})()}}return I.type="LOCAL",I})(),_s=(()=>{class I extends Ed{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,D){}_removeListener(_,D){}}return I.type="SESSION",I})();let Xr=(()=>{class I{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const D=this.receivers.find(te=>te.isListeningto(_));if(D)return D;const $=new I(_);return this.receivers.push($),$}isListeningto(_){return this.eventTarget===_}handleEvent(_){var D=this;return(0,w.Z)(function*(){const $=_,{eventId:te,eventType:Se,data:at}=$.data,Wt=D.handlersMap[Se];if(!Wt?.size)return;$.ports[0].postMessage({status:"ack",eventId:te,eventType:Se});const sn=Array.from(Wt).map(function(){var On=(0,w.Z)(function*(us){return us($.origin,at)});return function(us){return On.apply(this,arguments)}}()),In=yield function Ht(I){return Promise.all(I.map(function(){var m=(0,w.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(D){return{fulfilled:!1,reason:D}}});return function(_){return m.apply(this,arguments)}}()))}(sn);$.ports[0].postMessage({status:"done",eventId:te,eventType:Se,response:In})})()}_subscribe(_,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(D)}_unsubscribe(_,D){this.handlersMap[_]&&D&&this.handlersMap[_].delete(D),(!D||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function ks(I="",m=10){let _="";for(let D=0;D<m;D++)_+=Math.floor(10*Math.random());return I+_}class Wu{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,D=50){var $=this;return(0,w.Z)(function*(){const te=typeof MessageChannel<"u"?new MessageChannel:null;if(!te)throw new Error("connection_unavailable");let Se,at;return new Promise((Wt,sn)=>{const In=ks("",20);te.port1.start();const On=setTimeout(()=>{sn(new Error("unsupported_event"))},D);at={messageChannel:te,onMessage(us){const za=us;if(za.data.eventId===In)switch(za.data.status){case"ack":clearTimeout(On),Se=setTimeout(()=>{sn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Se),Wt(za.data.response);break;default:clearTimeout(On),clearTimeout(Se),sn(new Error("invalid_response"))}}},$.handlers.add(at),te.port1.addEventListener("message",at.onMessage),$.target.postMessage({eventType:m,eventId:In,data:_},[te.port2])}).finally(()=>{at&&$.removeMessageHandler(at)})})()}}function Kt(){return window}function Rc(){return typeof Kt().WorkerGlobalScope<"u"&&"function"==typeof Kt().importScripts}function ft(){return(ft=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const co="firebaseLocalStorageDb",qu="firebaseLocalStorage",uh="fbase_key";class hs{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Va(I,m){return I.transaction([qu],m?"readwrite":"readonly").objectStore(qu)}function bu(){const I=indexedDB.open(co,1);return new Promise((m,_)=>{I.addEventListener("error",()=>{_(I.error)}),I.addEventListener("upgradeneeded",()=>{const D=I.result;try{D.createObjectStore(qu,{keyPath:uh})}catch($){_($)}}),I.addEventListener("success",(0,w.Z)(function*(){const D=I.result;D.objectStoreNames.contains(qu)?m(D):(D.close(),yield function _l(){const I=indexedDB.deleteDatabase(co);return new hs(I).toPromise()}(),m(yield bu()))}))})}function Yl(I,m,_){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,w.Z)(function*(I,m,_){const D=Va(I,!0).put({[uh]:m,value:_});return new hs(D).toPromise()})).apply(this,arguments)}function ir(){return(ir=(0,w.Z)(function*(I,m){const _=Va(I,!1).get(m),D=yield new hs(_).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Xo(I,m){const _=Va(I,!0).delete(m);return new hs(_).toPromise()}const Mo=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,w.Z)(function*(){return _.db||(_.db=yield bu()),_.db})()}_withRetries(_){var D=this;return(0,w.Z)(function*(){let $=0;for(;;)try{const te=yield D._openDb();return yield _(te)}catch(te){if($++>3)throw te;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,w.Z)(function*(){return Rc()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,w.Z)(function*(){_.receiver=Xr._getInstance(function Ni(){return Rc()?self:null}()),_.receiver._subscribe("keyChanged",function(){var D=(0,w.Z)(function*($,te){return{keyProcessed:(yield _._poll()).includes(te.key)}});return function($,te){return D.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var D=(0,w.Z)(function*($,te){return["keyChanged"]});return function($,te){return D.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,w.Z)(function*(){var D,$;if(_.activeServiceWorker=yield function en(){return ft.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Wu(_.activeServiceWorker);const te=yield _.sender._send("ping",{},800);te&&null!==(D=te[0])&&void 0!==D&&D.fulfilled&&null!==($=te[0])&&void 0!==$&&$.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var D=this;return(0,w.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Pt(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:_},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const _=yield bu();return yield Yl(_,to,"1"),yield Xo(_,to),!0}catch{}return!1})()}_withPendingWrite(_){var D=this;return(0,w.Z)(function*(){D.pendingWrites++;try{yield _()}finally{D.pendingWrites--}})()}_set(_,D){var $=this;return(0,w.Z)(function*(){return $._withPendingWrite((0,w.Z)(function*(){return yield $._withRetries(te=>Yl(te,_,D)),$.localCache[_]=D,$.notifyServiceWorker(_)}))})()}_get(_){var D=this;return(0,w.Z)(function*(){const $=yield D._withRetries(te=>function vl(I,m){return ir.apply(this,arguments)}(te,_));return D.localCache[_]=$,$})()}_remove(_){var D=this;return(0,w.Z)(function*(){return D._withPendingWrite((0,w.Z)(function*(){return yield D._withRetries($=>Xo($,_)),delete D.localCache[_],D.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,w.Z)(function*(){const D=yield _._withRetries(Se=>{const at=Va(Se,!1).getAll();return new hs(at).toPromise()});if(!D)return[];if(0!==_.pendingWrites)return[];const $=[],te=new Set;for(const{fbase_key:Se,value:at}of D)te.add(Se),JSON.stringify(_.localCache[Se])!==JSON.stringify(at)&&(_.notifyListeners(Se,at),$.push(Se));for(const Se of Object.keys(_.localCache))_.localCache[Se]&&!te.has(Se)&&(_.notifyListeners(Se,null),$.push(Se));return $})()}notifyListeners(_,D){this.localCache[_]=D;const $=this.listeners[_];if($)for(const te of Array.from($))te(D)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})(),wa=1e12;class Jo{constructor(m){this.auth=m,this.counter=wa,this._widgets=new Map}render(m,_){const D=this.counter;return this._widgets.set(D,new lh(m,this.auth.name,_||{})),this.counter++,D}reset(m){var _;const D=m||wa;null===(_=this._widgets.get(D))||void 0===_||_.delete(),this._widgets.delete(D)}getResponse(m){var _;return(null===(_=this._widgets.get(m||wa))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,w.Z)(function*(){var D;return null===(D=_._widgets.get(m||wa))||void 0===D||D.execute(),""})()}}class lh{constructor(m,_,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof m?document.getElementById(m):m;ot($,"argument-error",{appName:_}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ea(I){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<I;D++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const El=Hi("rcb"),Ku=new xe(3e4,6e4);class O{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Kt().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return ot(function b(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Zt(Kt().grecaptcha)?Promise.resolve(Kt().grecaptcha):new Promise((D,$)=>{const te=Kt().setTimeout(()=>{$(Be(m,"network-request-failed"))},Ku.get());Kt()[El]=()=>{Kt().clearTimeout(te),delete Kt()[El];const at=Kt().grecaptcha;if(!at||!Zt(at))return void $(Be(m,"internal-error"));const Wt=at.render;at.render=(sn,In)=>{const On=Wt(sn,In);return this.counter++,On},this.hostLanguage=_,D(at)},jr(`https://www.google.com/recaptcha/api.js??${(0,S.xO)({onload:El,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(te),$(Be(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Kt().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class P{load(m){return(0,w.Z)(function*(){return new Jo(m)})()}clearedOneInstance(){}}const z="recaptcha",de={theme:"light",type:"image"};class ce{constructor(m,_=Object.assign({},de),D){this.parameters=_,this.type=z,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mr(D),this.isInvisible="invisible"===this.parameters.size,ot(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof m?document.getElementById(m):m;ot($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new P:new O,this.validateStartingState()}verify(){var m=this;return(0,w.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),D=m.getAssertedRecaptcha();return D.getResponse(_)||new Promise(te=>{const Se=at=>{at&&(m.tokenChangeListeners.delete(Se),te(at))};m.tokenChangeListeners.add(Se),m.isInvisible&&D.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ot(!this.parameters.sitekey,this.auth,"argument-error"),ot(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ot(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(D=>D(_)),"function"==typeof m)m(_);else if("string"==typeof m){const D=Kt()[m];"function"==typeof D&&D(_)}}}assertNotDestroyed(){ot(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,w.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const D=document.createElement("div");_.appendChild(D),_=D}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,w.Z)(function*(){ot(kn()&&!Rc(),m.auth,"internal-error"),yield function tt(){let I=null;return new Promise(m=>{"complete"!==document.readyState?(I=()=>m(),window.addEventListener("load",I)):m()}).catch(m=>{throw I&&window.removeEventListener("load",I),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ne(I){return Ye.apply(this,arguments)}(m.auth);ot(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return ot(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class be{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Lr._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function _n(){return(_n=(0,w.Z)(function*(I,m,_){const D=Mr(I),$=yield qs(D,m,(0,S.m9)(_));return new be($,te=>lo(D,te))})).apply(this,arguments)}function ni(){return(ni=(0,w.Z)(function*(I,m,_){const D=(0,S.m9)(I);yield yu(!1,D,"phone");const $=yield qs(D.auth,m,(0,S.m9)(_));return new be($,te=>vu(D,te))})).apply(this,arguments)}function pa(){return(pa=(0,w.Z)(function*(I,m,_){const D=(0,S.m9)(I),$=yield qs(D.auth,m,(0,S.m9)(_));return new be($,te=>ci(D,te))})).apply(this,arguments)}function qs(I,m,_){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,w.Z)(function*(I,m,_){var D;const $=yield _.verify();try{let te;if(ot("string"==typeof $,I,"argument-error"),ot(_.type===z,I,"argument-error"),te="string"==typeof m?{phoneNumber:m}:m,"session"in te){const Se=te.session;if("phoneNumber"in te)return ot("enroll"===Se.type,I,"internal-error"),(yield function Ao(I,m){return ht(I,"POST","/v2/accounts/mfaEnrollment:start",mt(I,m))}(I,{idToken:Se.credential,phoneEnrollmentInfo:{phoneNumber:te.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{ot("signin"===Se.type,I,"internal-error");const at=(null===(D=te.multiFactorHint)||void 0===D?void 0:D.uid)||te.multiFactorUid;return ot(at,I,"missing-multi-factor-info"),(yield function fr(I,m){return ht(I,"POST","/v2/accounts/mfaSignIn:start",mt(I,m))}(I,{mfaPendingCredential:Se.credential,mfaEnrollmentId:at,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Se}=yield function Hs(I,m){return ds.apply(this,arguments)}(I,{phoneNumber:te.phoneNumber,recaptchaToken:$});return Se}}finally{_._reset()}}),Zu.apply(this,arguments)}function Jf(){return(Jf=(0,w.Z)(function*(I,m){yield Oa((0,S.m9)(I),m)})).apply(this,arguments)}let ta=(()=>{class I{constructor(_){this.providerId=I.PROVIDER_ID,this.auth=Mr(_)}verifyPhoneNumber(_,D){return qs(this.auth,_,(0,S.m9)(D))}static credential(_,D){return Lr._fromVerification(_,D)}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:D,temporaryProof:$}=_;return D&&$?Lr._fromTokenResponse(D,$):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Ks(I,m){return m?Hn(m):(ot(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Ua extends Fi{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Qi(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Qi(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Qi(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Xl(I){return Ja(I.auth,new Ua(I),I.bypassAuthState)}function Pc(I){const{auth:m,user:_}=I;return ot(_,m,"internal-error"),ko(_,new Ua(I),I.bypassAuthState)}function Zs(I){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,w.Z)(function*(I){const{auth:m,user:_}=I;return ot(_,m,"internal-error"),Oa(_,new Ua(I),I.bypassAuthState)})).apply(this,arguments)}class Zh{constructor(m,_,D,$,te=!1){this.auth=m,this.resolver=D,this.user=$,this.bypassAuthState=te,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,w.Z)(function*(D,$){m.pendingPromise={resolve:D,reject:$};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(te){m.reject(te)}});return function(D,$){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,w.Z)(function*(){const{urlResponse:D,sessionId:$,postBody:te,tenantId:Se,error:at,type:Wt}=m;if(at)return void _.reject(at);const sn={auth:_.auth,requestUri:D,sessionId:$,tenantId:Se||void 0,postBody:te||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Wt)(sn))}catch(In){_.reject(In)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Xl;case"linkViaPopup":case"linkViaRedirect":return Zs;case"reauthViaPopup":case"reauthViaRedirect":return Pc;default:et(this.auth,"internal-error")}}resolve(m){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ba=new xe(2e3,1e4);function xc(){return(xc=(0,w.Z)(function*(I,m,_){const D=Mr(I);vt(I,m,Cs);const $=Ks(D,_);return new Oc(D,"signInViaPopup",m,$).executeNotNull()})).apply(this,arguments)}function ch(){return(ch=(0,w.Z)(function*(I,m,_){const D=(0,S.m9)(I);vt(D.auth,m,Cs);const $=Ks(D.auth,_);return new Oc(D.auth,"reauthViaPopup",m,$,D).executeNotNull()})).apply(this,arguments)}function Cl(){return(Cl=(0,w.Z)(function*(I,m,_){const D=(0,S.m9)(I);vt(D.auth,m,Cs);const $=Ks(D.auth,_);return new Oc(D.auth,"linkViaPopup",m,$,D).executeNotNull()})).apply(this,arguments)}let Oc=(()=>{class I extends Zh{constructor(_,D,$,te,Se){super(_,D,te,Se),this.provider=$,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var _=this;return(0,w.Z)(function*(){const D=yield _.execute();return ot(D,_.auth,"internal-error"),D})()}onExecution(){var _=this;return(0,w.Z)(function*(){Yt(1===_.filter.length,"Popup operations only handle one event");const D=ks();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],D),_.authWindow.associatedEvent=D,_.resolver._originValidation(_.auth).catch($=>{_.reject($)}),_.resolver._isIframeWebStorageSupported(_.auth,$=>{$||_.reject(Be(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const _=()=>{var D,$;this.pollId=null!==($=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Ba.get())};_()}}return I.currentPopupAction=null,I})();const kc="pendingRedirect",Du=new Map;class dh extends Zh{constructor(m,_,D=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,D),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,w.Z)(function*(){let D=Du.get(_.auth._key());if(!D){try{const te=(yield function Cd(I,m){return Il.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;D=()=>Promise.resolve(te)}catch($){D=()=>Promise.reject($)}Du.set(_.auth._key(),D)}return _.bypassAuthState||Du.set(_.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,D=this;return(0,w.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(D,m);if("unknown"!==m.type){if(m.eventId){const $=yield D.auth._redirectUserForId(m.eventId);if($)return D.user=$,_().call(D,m);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Il(){return(Il=(0,w.Z)(function*(I,m){const _=Yh(m),D=Yu(I);if(!(yield D._isAvailable()))return!1;const $="true"===(yield D._get(_));return yield D._remove(_),$})).apply(this,arguments)}function ec(I,m){return tc.apply(this,arguments)}function tc(){return(tc=(0,w.Z)(function*(I,m){return Yu(I)._set(Yh(m),"true")})).apply(this,arguments)}function Lc(I,m){Du.set(I._key(),m)}function Yu(I){return Hn(I._redirectPersistence)}function Yh(I){return Oe(kc,I.config.apiKey,I.name)}function Fc(I,m,_){return function Qu(I,m,_){return Ha.apply(this,arguments)}(I,m,_)}function Ha(){return(Ha=(0,w.Z)(function*(I,m,_){const D=Mr(I);vt(I,m,Cs),yield D._initializationPromise;const $=Ks(D,_);return yield ec($,D),$._openRedirect(D,m,"signInViaRedirect")})).apply(this,arguments)}function hh(I,m,_){return function tp(I,m,_){return ba.apply(this,arguments)}(I,m,_)}function ba(){return(ba=(0,w.Z)(function*(I,m,_){const D=(0,S.m9)(I);vt(D.auth,m,Cs),yield D.auth._initializationPromise;const $=Ks(D.auth,_);yield ec($,D.auth);const te=yield Ki(D);return $._openRedirect(D.auth,m,"reauthViaRedirect",te)})).apply(this,arguments)}function ho(I,m,_){return function Tu(I,m,_){return Da.apply(this,arguments)}(I,m,_)}function Da(){return(Da=(0,w.Z)(function*(I,m,_){const D=(0,S.m9)(I);vt(D.auth,m,Cs),yield D.auth._initializationPromise;const $=Ks(D.auth,_);yield yu(!1,D,m.providerId),yield ec($,D.auth);const te=yield Ki(D);return $._openRedirect(D.auth,m,"linkViaRedirect",te)})).apply(this,arguments)}function ri(){return(ri=(0,w.Z)(function*(I,m){return yield Mr(I)._initializationPromise,Ta(I,m,!1)})).apply(this,arguments)}function Ta(I,m){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,w.Z)(function*(I,m,_=!1){const D=Mr(I),$=Ks(D,m),Se=yield new dh(D,$,_).execute();return Se&&!_&&(delete Se.user._redirectEventId,yield D._persistUserIfCurrent(Se.user),yield D._setRedirectUser(null,m)),Se})).apply(this,arguments)}function Ki(I){return x.apply(this,arguments)}function x(){return(x=(0,w.Z)(function*(I){const m=ks(`${I.uid}:::`);return I._redirectEventId=m,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),m})).apply(this,arguments)}class Y{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(m,D)&&(_=!0,this.sendToConsumer(m,D),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function nt(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qe(I);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var D;if(m.error&&!qe(m)){const $=(null===(D=m.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";_.onError(Be(this.auth,$))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const D=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&D}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ee(m))}saveEventToCache(m){this.cachedEventUids.add(Ee(m)),this.lastProcessedEventTime=Date.now()}}function Ee(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(m=>m).join("-")}function qe({type:I,error:m}){return"unknown"===I&&"auth/no-auth-event"===m?.code}function kt(I){return mn.apply(this,arguments)}function mn(){return(mn=(0,w.Z)(function*(I,m={}){return ht(I,"GET","/v1/projects",m)})).apply(this,arguments)}const Xt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wn=/^https?/;function Kn(){return(Kn=(0,w.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:m}=yield kt(I);for(const _ of m)try{if(Jr(_))return}catch{}et(I,"unauthorized-domain")})).apply(this,arguments)}function Jr(I){const m=Cn(),{protocol:_,hostname:D}=new URL(m);if(I.startsWith("chrome-extension://")){const Se=new URL(I);return""===Se.hostname&&""===D?"chrome-extension:"===_&&I.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Se.hostname===D}if(!wn.test(_))return!1;if(Xt.test(I))return D===I;const $=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(D)}const no=new xe(3e4,6e4);function Ro(){const I=Kt().___jsl;if(I?.H)for(const m of Object.keys(I.H))if(I.H[m].r=I.H[m].r||[],I.H[m].L=I.H[m].L||[],I.H[m].r=[...I.H[m].L],I.CP)for(let _=0;_<I.CP.length;_++)I.CP[_]=null}let Ds=null;const ro=new xe(5e3,15e3),iu="__/auth/iframe",$a="emulator/auth/iframe",Mg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Id=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bd(I){const m=I.config;ot(m.authDomain,I,"auth-domain-config-required");const _=m.emulator?ge(m,$a):`https://${I.config.authDomain}/${iu}`,D={apiKey:m.apiKey,appName:I.name,v:fe.SDK_VERSION},$=Id.get(I.config.apiHost);$&&(D.eid=$);const te=I._getFrameworks();return te.length&&(D.fw=te.join(",")),`${_}?${(0,S.xO)(D).slice(1)}`}function Ys(){return Ys=(0,w.Z)(function*(I){const m=yield function Ts(I){return Ds=Ds||function ru(I){return new Promise((m,_)=>{var D,$,te;function Se(){Ro(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Ro(),_(Be(I,"network-request-failed"))},timeout:no.get()})}if(null!==($=null===(D=Kt().gapi)||void 0===D?void 0:D.iframes)&&void 0!==$&&$.Iframe)m(gapi.iframes.getContext());else{if(null===(te=Kt().gapi)||void 0===te||!te.load){const at=Hi("iframefcb");return Kt()[at]=()=>{gapi.load?Se():_(Be(I,"network-request-failed"))},jr(`https://apis.google.com/js/api.js?onload=${at}`).catch(Wt=>_(Wt))}Se()}}).catch(m=>{throw Ds=null,m})}(I),Ds}(I),_=Kt().gapi;return ot(_,I,"internal-error"),m.open({where:document.body,url:bd(I),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mg,dontclear:!0},D=>new Promise(function(){var $=(0,w.Z)(function*(te,Se){yield D.restyle({setHideOnLeave:!1});const at=Be(I,"network-request-failed"),Wt=Kt().setTimeout(()=>{Se(at)},ro.get());function sn(){Kt().clearTimeout(Wt),te(D)}D.ping(sn).then(sn,()=>{Se(at)})});return function(te,Se){return $.apply(this,arguments)}}()))}),Ys.apply(this,arguments)}const fh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dd{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const jm="__/auth/handler",rp="emulator/auth/handler",Xh=encodeURIComponent("fac");function Fs(I,m,_,D,$,te){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,w.Z)(function*(I,m,_,D,$,te){ot(I.config.authDomain,I,"auth-domain-config-required"),ot(I.config.apiKey,I,"invalid-api-key");const Se={apiKey:I.config.apiKey,appName:I.name,authType:_,redirectUrl:D,v:fe.SDK_VERSION,eventId:$};if(m instanceof Cs){m.setDefaultLanguage(I.languageCode),Se.providerId=m.providerId||"",(0,S.xb)(m.getCustomParameters())||(Se.customParameters=JSON.stringify(m.getCustomParameters()));for(const[In,On]of Object.entries(te||{}))Se[In]=On}if(m instanceof Vi){const In=m.getScopes().filter(On=>""!==On);In.length>0&&(Se.scopes=In.join(","))}I.tenantId&&(Se.tid=I.tenantId);const at=Se;for(const In of Object.keys(at))void 0===at[In]&&delete at[In];const Wt=yield I._getAppCheckToken(),sn=Wt?`#${Xh}=${encodeURIComponent(Wt)}`:"";return`${function Ji({config:I}){return I.emulator?ge(I,rp):`https://${I.authDomain}/${jm}`}(I)}?${(0,S.xO)(at).slice(1)}${sn}`})).apply(this,arguments)}const Ju="webStorageSupport",ip=class ph{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_s,this._completeRedirectFn=Ta,this._overrideRedirectResult=Lc}_openPopup(m,_,D,$){var te=this;return(0,w.Z)(function*(){var Se;Yt(null===(Se=te.eventManagers[m._key()])||void 0===Se?void 0:Se.manager,"_initialize() not called before _openPopup()");const at=yield Fs(m,_,D,Cn(),$);return function Ng(I,m,_,D=500,$=600){const te=Math.max((window.screen.availHeight-$)/2,0).toString(),Se=Math.max((window.screen.availWidth-D)/2,0).toString();let at="";const Wt=Object.assign(Object.assign({},fh),{width:D.toString(),height:$.toString(),top:te,left:Se}),sn=(0,S.z$)().toLowerCase();_&&(at=Ze(sn)?"_blank":_),ie(sn)&&(m=m||"http://localhost",Wt.scrollbars="yes");const In=Object.entries(Wt).reduce((us,[za,Qc])=>`${us}${za}=${Qc},`,"");if(function kr(I=(0,S.z$)()){var m;return Ut(I)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(sn)&&"_self"!==at)return function Pg(I,m){const _=document.createElement("a");_.href=I,_.target=m;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(D)}(m||"",at),new Dd(null);const On=window.open(m||"",at,In);ot(On,I,"popup-blocked");try{On.focus()}catch{}return new Dd(On)}(m,at,ks())})()}_openRedirect(m,_,D,$){var te=this;return(0,w.Z)(function*(){return yield te._originValidation(m),function $n(I){Kt().location.href=I}(yield Fs(m,_,D,Cn(),$)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:$,promise:te}=this.eventManagers[_];return $?Promise.resolve($):(Yt(te,"If manager is not set, promise should be"),te)}const D=this.initAndGetManager(m);return this.eventManagers[_]={promise:D},D.catch(()=>{delete this.eventManagers[_]}),D}initAndGetManager(m){var _=this;return(0,w.Z)(function*(){const D=yield function np(I){return Ys.apply(this,arguments)}(m),$=new Y(m);return D.register("authEvent",te=>(ot(te?.authEvent,m,"invalid-auth-event"),{status:$.onEvent(te.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:$},_.iframes[m._key()]=D,$})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Ju,{type:Ju},$=>{var te;const Se=null===(te=$?.[0])||void 0===te?void 0:te[Ju];void 0!==Se&&_(!!Se),et(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function _r(I){return Kn.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return Fe()||le()||Ut()}};class Td{constructor(m){this.factorId=m}_process(m,_,D){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,D);case"signin":return this._finalizeSignIn(m,_.credential);default:return Ot("unexpected MultiFactorSessionType")}}}class Vc extends Td{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Vc(m)}_finalizeEnroll(m,_,D){return function Gs(I,m){return ht(I,"POST","/v2/accounts/mfaEnrollment:finalize",mt(I,m))}(m,{idToken:_,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function fa(I,m){return ht(I,"POST","/v2/accounts/mfaSignIn:finalize",mt(I,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sd=(()=>{class I{constructor(){}static assertion(_){return Vc._fromCredential(_)}}return I.FACTOR_ID="phone",I})();var ic="@firebase/auth";class sc{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,w.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(D=>{m(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bl(){return window}(0,S.Pz)("authIdTokenMaxAge"),function Uc(I){(0,fe._registerComponent)(new Ve.wA("auth",(m,{options:_})=>{const D=m.getProvider("app").getImmediate(),$=m.getProvider("heartbeat"),te=m.getProvider("app-check-internal"),{apiKey:Se,authDomain:at}=D.options;ot(Se&&!Se.includes(":"),"invalid-api-key",{appName:D.name});const Wt={apiKey:Se,authDomain:at,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Te(I)},sn=new so(D,$,te,Wt);return function Xs(I,m){const _=m?.persistence||[],D=(Array.isArray(_)?_:[_]).map(Hn);m?.errorMap&&I._updateErrorMap(m.errorMap),I._initializeWithPersistence(D,m?.popupRedirectResolver)}(sn,_),sn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,D)=>{m.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new Ve.wA("auth-internal",m=>{const _=Mr(m.getProvider("auth").getImmediate());return new sc(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(ic,"0.23.2",function gh(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,fe.registerVersion)(ic,"0.23.2","esm2017")}("Browser");function tf(){return tf=(0,w.Z)(function*(I,m,_){var D;const{BuildInfo:$}=bl();Yt(m.sessionId,"AuthEvent did not contain a session ID");const te=yield function Dl(I){return su.apply(this,arguments)}(m.sessionId),Se={};return Ut()?Se.ibi=$.packageName:qt()?Se.apn=$.packageName:et(I,"operation-not-supported-in-this-environment"),$.displayName&&(Se.appDisplayName=$.displayName),Se.sessionId=te,Fs(I,_,m.type,void 0,null!==(D=m.eventId)&&void 0!==D?D:void 0,Se)}),tf.apply(this,arguments)}function po(){return(po=(0,w.Z)(function*(I){const{BuildInfo:m}=bl(),_={};Ut()?_.iosBundleId=m.packageName:qt()?_.androidPackageName=m.packageName:et(I,"operation-not-supported-in-this-environment"),yield kt(I,_)})).apply(this,arguments)}function ac(){return(ac=(0,w.Z)(function*(I,m,_){const{cordova:D}=bl();let $=()=>{};try{yield new Promise((te,Se)=>{let at=null;function Wt(){var On;te();const us=null===(On=D.plugins.browsertab)||void 0===On?void 0:On.close;"function"==typeof us&&us(),"function"==typeof _?.close&&_.close()}function sn(){at||(at=window.setTimeout(()=>{Se(Be(I,"redirect-cancelled-by-user"))},2e3))}function In(){"visible"===document?.visibilityState&&sn()}m.addPassiveListener(Wt),document.addEventListener("resume",sn,!1),qt()&&document.addEventListener("visibilitychange",In,!1),$=()=>{m.removePassiveListener(Wt),document.removeEventListener("resume",sn,!1),document.removeEventListener("visibilitychange",In,!1),at&&window.clearTimeout(at)}})}finally{$()}})).apply(this,arguments)}function su(){return(su=(0,w.Z)(function*(I){const m=function uc(I){if(Yt(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const m=new ArrayBuffer(I.length),_=new Uint8Array(m);for(let D=0;D<I.length;D++)_[D]=I.charCodeAt(D);return _}(I),_=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(_)).map($=>$.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Hc extends Y{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(m)),super.onEvent(m)}initialized(){var m=this;return(0,w.Z)(function*(){yield m.initPromise})()}}function Rd(I){return lc.apply(this,arguments)}function lc(){return(lc=(0,w.Z)(function*(I){const m=yield Nd()._get($c(I));return m&&(yield Nd()._remove($c(I))),m})).apply(this,arguments)}function na(){const I=[];for(let _=0;_<20;_++){const D=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(D))}return I.join("")}function Nd(){return Hn(Bo)}function $c(I){return Oe("authEvent",I.config.apiKey,I.name)}function ou(I){if(!I?.includes("?"))return{};const[m,..._]=I.split("?");return(0,S.zd)(_.join("?"))}const _h=class Tl{constructor(){this._redirectPersistence=_s,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ta,this._overrideRedirectResult=Lc}_initialize(m){var _=this;return(0,w.Z)(function*(){const D=m._key();let $=_.eventManagers.get(D);return $||($=new Hc(m),_.eventManagers.set(D,$),_.attachCallbackListeners(m,$)),$})()}_openPopup(m){et(m,"operation-not-supported-in-this-environment")}_openRedirect(m,_,D,$){var te=this;return(0,w.Z)(function*(){!function el(I){var m,_,D,$,te,Se,at,Wt,sn,In;const On=bl();ot("function"==typeof(null===(m=On?.universalLinks)||void 0===m?void 0:m.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ot(typeof(null===(_=On?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ot("function"==typeof(null===(te=null===($=null===(D=On?.cordova)||void 0===D?void 0:D.plugins)||void 0===$?void 0:$.browsertab)||void 0===te?void 0:te.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ot("function"==typeof(null===(Wt=null===(at=null===(Se=On?.cordova)||void 0===Se?void 0:Se.plugins)||void 0===at?void 0:at.browsertab)||void 0===Wt?void 0:Wt.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ot("function"==typeof(null===(In=null===(sn=On?.cordova)||void 0===sn?void 0:sn.InAppBrowser)||void 0===In?void 0:In.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const Se=yield te._initialize(m);yield Se.initialized(),Se.resetRedirect(),function ep(){Du.clear()}(),yield te._originValidation(m);const at=function kg(I,m,_=null){return{type:m,eventId:_,urlResponse:null,sessionId:na(),postBody:null,tenantId:I.tenantId,error:Be(I,"no-auth-event")}}(m,D,$);yield function go(I,m){return Nd()._set($c(I),m)}(m,at);const Wt=yield function Md(I,m,_){return tf.apply(this,arguments)}(m,at,_),sn=yield function jc(I){const{cordova:m}=bl();return new Promise(_=>{m.plugins.browsertab.isAvailable(D=>{let $=null;D?m.plugins.browsertab.openUrl(I):$=m.InAppBrowser.open(I,function Ln(I=(0,S.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),_($)})})}(Wt);return function oc(I,m,_){return ac.apply(this,arguments)}(m,Se,sn)})()}_isIframeWebStorageSupported(m,_){throw new Error("Method not implemented.")}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Au(I){return po.apply(this,arguments)}(m)),this.originValidationPromises[_]}attachCallbackListeners(m,_){const{universalLinks:D,handleOpenURL:$,BuildInfo:te}=bl(),Se=setTimeout((0,w.Z)(function*(){yield Rd(m),_.onEvent(Lg())}),500),at=function(){var In=(0,w.Z)(function*(On){clearTimeout(Se);const us=yield Rd(m);let za=null;us&&On?.url&&(za=function tl(I,m){var _,D;const $=function nf(I){const m=ou(I),_=m.link?decodeURIComponent(m.link):void 0,D=ou(_).link,$=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return ou($).link||$||D||_||I}(m);if($.includes("/__/auth/callback")){const te=ou($),Se=te.firebaseError?function nl(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(te.firebaseError)):null,at=null===(D=null===(_=Se?.code)||void 0===_?void 0:_.split("auth/"))||void 0===D?void 0:D[1],Wt=at?Be(at):null;return Wt?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:Wt,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:$,postBody:null}}return null}(us,On.url)),_.onEvent(za||Lg())});return function(us){return In.apply(this,arguments)}}();typeof D<"u"&&"function"==typeof D.subscribe&&D.subscribe(null,at);const Wt=$,sn=`${te.packageName.toLowerCase()}://`;bl().handleOpenURL=function(){var In=(0,w.Z)(function*(On){if(On.toLowerCase().startsWith(sn)&&at({url:On}),"function"==typeof Wt)try{Wt(On)}catch(us){console.error(us)}});return function(On){return In.apply(this,arguments)}}()}};function Lg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Be("no-auth-event")}}function rl(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function au(I=(0,S.z$)()){return!("file:"!==rl()&&"ionic:"!==rl()&&"capacitor:"!==rl()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){try{const I=self.localStorage,m=ks();if(I)return I.setItem(m,"1"),I.removeItem(m),!function ga(I=(0,S.z$)()){return function Pd(){return(0,S.w1)()&&11===document?.documentMode}()||function op(I=(0,S.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,S.hl)()}catch{return xd()&&(0,S.hl)()}return!1}function xd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gc(){return(function sp(){return"http:"===rl()||"https:"===rl()}()||(0,S.ru)()||au())&&!function sf(){return(0,S.b$)()||(0,S.UG)()}()&&Ir()&&!xd()}function mo(){return au()&&typeof document<"u"}function zc(){return(zc=(0,w.Z)(function*(){return!!mo()&&new Promise(I=>{const m=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),I(!0)})})})).apply(this,arguments)}const ma={LOCAL:"local",NONE:"none",SESSION:"session"},kd=ot,ap="persistence";function Sl(I){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,w.Z)(function*(I){yield I._initializationPromise;const m=af(),_=Oe(ap,I.config.apiKey,I.name);m&&m.setItem(_,I._getPersistence())})).apply(this,arguments)}function af(){var I;try{return(null===(I=function Wc(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Al=ot;class uu{constructor(){this.browserResolver=Hn(ip),this.cordovaResolver=Hn(_h),this.underlyingResolver=null,this._redirectPersistence=_s,this._completeRedirectFn=Ta,this._overrideRedirectResult=Lc}_initialize(m){var _=this;return(0,w.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,_,D,$){var te=this;return(0,w.Z)(function*(){return yield te.selectUnderlyingResolver(),te.assertedUnderlyingResolver._openPopup(m,_,D,$)})()}_openRedirect(m,_,D,$){var te=this;return(0,w.Z)(function*(){return yield te.selectUnderlyingResolver(),te.assertedUnderlyingResolver._openRedirect(m,_,D,$)})()}_isIframeWebStorageSupported(m,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,_)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return mo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Al(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,w.Z)(function*(){if(m.underlyingResolver)return;const _=yield function Od(){return zc.apply(this,arguments)}();m.underlyingResolver=_?m.cordovaResolver:m.browserResolver})()}}function up(I){return I.unwrap()}function Hm(I){return fs(I)}function fs(I){const{_tokenResponse:m}=I instanceof S.ZR?I.customData:I;if(!m)return null;if(!(I instanceof S.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return ta.credentialFromResult(I);const _=m.providerId;if(!_||_===$e.PASSWORD)return null;let D;switch(_){case $e.GOOGLE:D=To;break;case $e.FACEBOOK:D=Do;break;case $e.GITHUB:D=rs;break;case $e.TWITTER:D=ao;break;default:const{oauthIdToken:$,oauthAccessToken:te,oauthTokenSecret:Se,pendingToken:at,nonce:Wt}=m;return te||Se||$||at?at?_.startsWith("saml.")?Di._create(_,at):ms._fromParams({providerId:_,signInMethod:_,pendingToken:at,idToken:$,accessToken:te}):new ns(_).credential({idToken:$,accessToken:te,rawNonce:Wt}):null}return I instanceof S.ZR?D.credentialFromError(I):D.credentialFromResult(I)}function yo(I,m){return m.catch(_=>{throw _ instanceof S.ZR&&function $m(I,m){var _;const D=null===(_=m.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===m?.code)m.resolver=new uf(I,function Ps(I,m){var _;const D=(0,S.m9)(I),$=m;return ot(m.customData.operationType,D,"argument-error"),ot(null===(_=$.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,D,"argument-error"),Un._fromError(D,$)}(I,m));else if(D){const $=fs(m),te=m;$&&(te.credential=$,te.tenantId=D.tenantId||void 0,te.email=D.email||void 0,te.phoneNumber=D.phoneNumber||void 0)}}(I,_),_}).then(_=>{const $=_.user;return{operationType:_.operationType,credential:Hm(_),additionalUserInfo:De(_),user:Sa.getOrCreate($)}})}function hc(I,m){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,w.Z)(function*(I,m){const _=yield m;return{verificationId:_.verificationId,confirm:D=>yo(I,_.confirm(D))}})).apply(this,arguments)}class uf{constructor(m,_){this.resolver=_,this.auth=function Ml(I){return I.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return yo(up(this.auth),this.resolver.resolveSignIn(m))}}class Sa{constructor(m){this._delegate=m,this.multiFactor=function yl(I){const m=(0,S.m9)(I);return zu.has(m)||zu.set(m,as._fromUser(m)),zu.get(m)}(m)}static getOrCreate(m){return Sa.USER_MAP.has(m)||Sa.USER_MAP.set(m,new Sa(m)),Sa.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var _=this;return(0,w.Z)(function*(){return yo(_.auth,vu(_._delegate,m))})()}linkWithPhoneNumber(m,_){var D=this;return(0,w.Z)(function*(){return hc(D.auth,function Wr(I,m,_){return ni.apply(this,arguments)}(D._delegate,m,_))})()}linkWithPopup(m){var _=this;return(0,w.Z)(function*(){return yo(_.auth,function Jl(I,m,_){return Cl.apply(this,arguments)}(_._delegate,m,uu))})()}linkWithRedirect(m){var _=this;return(0,w.Z)(function*(){return yield Sl(Mr(_.auth)),ho(_._delegate,m,uu)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var _=this;return(0,w.Z)(function*(){return yo(_.auth,ci(_._delegate,m))})()}reauthenticateWithPhoneNumber(m,_){return hc(this.auth,function Ca(I,m,_){return pa.apply(this,arguments)}(this._delegate,m,_))}reauthenticateWithPopup(m){return yo(this.auth,function ja(I,m,_){return ch.apply(this,arguments)}(this._delegate,m,uu))}reauthenticateWithRedirect(m){var _=this;return(0,w.Z)(function*(){return yield Sl(Mr(_.auth)),hh(_._delegate,m,uu)})()}sendEmailVerification(m){return function Ri(I,m){return gi.apply(this,arguments)}(this._delegate,m)}unlink(m){var _=this;return(0,w.Z)(function*(){return yield function Hu(I,m){return va.apply(this,arguments)}(_._delegate,m),_})()}updateEmail(m){return function $s(I,m){return Vo((0,S.m9)(I),m,null)}(this._delegate,m)}updatePassword(m){return function Cu(I,m){return Vo((0,S.m9)(I),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function wl(I,m){return Jf.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function Kl(I,m){return La.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,_){return function eo(I,m,_){return Ea.apply(this,arguments)}(this._delegate,m,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sa.USER_MAP=new WeakMap;const Aa=ot;let fc=(()=>{class I{constructor(_,D){if(this.app=_,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$}=_.options;Aa($,"invalid-api-key",{appName:_.name}),Aa($,"invalid-api-key",{appName:_.name});const te=typeof window<"u"?uu:void 0;this._delegate=D.initialize({options:{persistence:Nl($,_.name),popupRedirectResolver:te}}),this._delegate._updateErrorMap($t),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,D){!function js(I,m,_){const D=Mr(I);ot(D._canInitEmulator,D,"emulator-config-failed"),ot(/^https?:\/\//.test(m),D,"invalid-emulator-scheme");const $=!!_?.disableWarnings,te=Ci(m),{host:Se,port:at}=function xs(I){const m=Ci(I),_=/(\/\/)?([^?#/]+)/.exec(I.substr(m.length));if(!_)return{host:"",port:null};const D=_[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(D);if($){const te=$[1];return{host:te,port:Os(D.substr(te.length+1))}}{const[te,Se]=D.split(":");return{host:te,port:Os(Se)}}}(m);D.config.emulator={url:`${te}//${Se}${null===at?"":`:${at}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Se,port:at,protocol:te.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function Co(){function I(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}(this._delegate,_,D)}applyActionCode(_){return function Q(I,m){return Me.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return cn(this._delegate,_)}confirmPasswordReset(_,D){return function K(I,m,_){return L.apply(this,arguments)}(this._delegate,_,D)}createUserWithEmailAndPassword(_,D){var $=this;return(0,w.Z)(function*(){return yo($._delegate,function Fo(I,m,_){return Xi.apply(this,arguments)}($._delegate,_,D))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function ml(I,m){return wu.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function me(I,m){const _=mr.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,w.Z)(function*(){Aa(Gc(),_._delegate,"operation-not-supported-in-this-environment");const D=yield function nc(I,m){return ri.apply(this,arguments)}(_._delegate,uu);return D?yo(_._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Ga(I,m){Mr(I)._logFramework(m)}(this._delegate,_)}onAuthStateChanged(_,D,$){const{next:te,error:Se,complete:at}=Kc(_,D,$);return this._delegate.onAuthStateChanged(te,Se,at)}onIdTokenChanged(_,D,$){const{next:te,error:Se,complete:at}=Kc(_,D,$);return this._delegate.onIdTokenChanged(te,Se,at)}sendSignInLinkToEmail(_,D){return function Zo(I,m,_){return Yo.apply(this,arguments)}(this._delegate,_,D)}sendPasswordResetEmail(_,D){return function Js(I,m,_){return H.apply(this,arguments)}(this._delegate,_,D||void 0)}setPersistence(_){var D=this;return(0,w.Z)(function*(){let $;switch(function dc(I,m){kd(Object.values(ma).includes(m),I,"invalid-persistence-type"),(0,S.b$)()?kd(m!==ma.SESSION,I,"unsupported-persistence-type"):(0,S.UG)()?kd(m===ma.NONE,I,"unsupported-persistence-type"):xd()?kd(m===ma.NONE||m===ma.LOCAL&&(0,S.hl)(),I,"unsupported-persistence-type"):kd(m===ma.NONE||Ir(),I,"unsupported-persistence-type")}(D._delegate,_),_){case ma.SESSION:$=_s;break;case ma.LOCAL:$=(yield Hn(Mo)._isAvailable())?Mo:Bo;break;case ma.NONE:$=Qn;break;default:return et("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence($)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return yo(this._delegate,function ss(I){return _a.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return yo(this._delegate,lo(this._delegate,_))}signInWithCustomToken(_){return yo(this._delegate,function pl(I,m){return tu.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,D){return yo(this._delegate,function ka(I,m,_){return lo((0,S.m9)(I),bo.credential(m,_))}(this._delegate,_,D))}signInWithEmailLink(_,D){return yo(this._delegate,function ha(I,m,_){return gl.apply(this,arguments)}(this._delegate,_,D))}signInWithPhoneNumber(_,D){return hc(this._delegate,function xn(I,m,_){return _n.apply(this,arguments)}(this._delegate,_,D))}signInWithPopup(_){var D=this;return(0,w.Z)(function*(){return Aa(Gc(),D._delegate,"operation-not-supported-in-this-environment"),yo(D._delegate,function wd(I,m,_){return xc.apply(this,arguments)}(D._delegate,_,uu))})()}signInWithRedirect(_){var D=this;return(0,w.Z)(function*(){return Aa(Gc(),D._delegate,"operation-not-supported-in-this-environment"),yield Sl(D._delegate),Fc(D._delegate,_,uu)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function os(I,m){return di.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=ma,I})();function Kc(I,m,_){let D=I;"function"!=typeof I&&({next:D,error:m,complete:_}=I);const $=D;return{next:Se=>$(Se&&Sa.getOrCreate(Se)),error:m,complete:_}}function Nl(I,m){const _=function qc(I,m){const _=af();if(!_)return[];const D=Oe(ap,I,m);switch(_.getItem(D)){case ma.NONE:return[Qn];case ma.LOCAL:return[Mo,_s];case ma.SESSION:return[_s];default:return[]}}(I,m);if(typeof self<"u"&&!_.includes(Mo)&&_.push(Mo),typeof window<"u")for(const D of[Bo,_s])_.includes(D)||_.push(D);return _.includes(Qn)||_.push(Qn),_}class Zc{constructor(){this.providerId="phone",this._delegate=new ta(up(ne.Z.auth()))}static credential(m,_){return ta.credential(m,_)}verifyPhoneNumber(m,_){return this._delegate.verifyPhoneNumber(m,_)}unwrap(){return this._delegate}}Zc.PHONE_SIGN_IN_METHOD=ta.PHONE_SIGN_IN_METHOD,Zc.PROVIDER_ID=ta.PROVIDER_ID;const Yc=ot;class lp{constructor(m,_,D=ne.Z.app()){var $;Yc(null===($=D.options)||void 0===$?void 0:$.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new ce(m,_,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function lf(I){I.INTERNAL.registerComponent(new Ve.wA("auth-compat",m=>{const _=m.getProvider("app-compat").getImmediate(),D=m.getProvider("auth");return new fc(_,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bo,FacebookAuthProvider:Do,GithubAuthProvider:rs,GoogleAuthProvider:To,OAuthProvider:ns,SAMLAuthProvider:bs,PhoneAuthProvider:Zc,PhoneMultiFactorGenerator:Sd,RecaptchaVerifier:lp,TwitterAuthProvider:ao,Auth:fc,AuthCredential:Fi,Error:S.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.4.2")}(ne.Z)},5861:(nn,it,U)=>{function w(S,fe,Pe,Ge,Ve,Ke,$e){try{var pe=S[Ke]($e),ye=pe.value}catch(Re){return void Pe(Re)}pe.done?fe(ye):Promise.resolve(ye).then(Ge,Ve)}function ne(S){return function(){var fe=this,Pe=arguments;return new Promise(function(Ge,Ve){var Ke=S.apply(fe,Pe);function $e(ye){w(Ke,Ge,Ve,$e,pe,"next",ye)}function pe(ye){w(Ke,Ge,Ve,$e,pe,"throw",ye)}$e(void 0)})}}U.d(it,{Z:()=>ne})},7582:(nn,it,U)=>{function fe(ge,Le){var He={};for(var rt in ge)Object.prototype.hasOwnProperty.call(ge,rt)&&Le.indexOf(rt)<0&&(He[rt]=ge[rt]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var mt=0;for(rt=Object.getOwnPropertySymbols(ge);mt<rt.length;mt++)Le.indexOf(rt[mt])<0&&Object.prototype.propertyIsEnumerable.call(ge,rt[mt])&&(He[rt[mt]]=ge[rt[mt]])}return He}function Re(ge,Le,He,rt){return new(He||(He=Promise))(function(ht,jt){function Jt(Vn){try{pn(rt.next(Vn))}catch(dn){jt(dn)}}function Nn(Vn){try{pn(rt.throw(Vn))}catch(dn){jt(dn)}}function pn(Vn){Vn.done?ht(Vn.value):function mt(ht){return ht instanceof He?ht:new He(function(jt){jt(ht)})}(Vn.value).then(Jt,Nn)}pn((rt=rt.apply(ge,Le||[])).next())})}function _e(ge){return this instanceof _e?(this.v=ge,this):new _e(ge)}function et(ge,Le,He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mt,rt=He.apply(ge,Le||[]),ht=[];return mt={},jt("next"),jt("throw"),jt("return"),mt[Symbol.asyncIterator]=function(){return this},mt;function jt(Bn){rt[Bn]&&(mt[Bn]=function(ur){return new Promise(function(fn,Sn){ht.push([Bn,ur,fn,Sn])>1||Jt(Bn,ur)})})}function Jt(Bn,ur){try{!function Nn(Bn){Bn.value instanceof _e?Promise.resolve(Bn.value.v).then(pn,Vn):dn(ht[0][2],Bn)}(rt[Bn](ur))}catch(fn){dn(ht[0][3],fn)}}function pn(Bn){Jt("next",Bn)}function Vn(Bn){Jt("throw",Bn)}function dn(Bn,ur){Bn(ur),ht.shift(),ht.length&&Jt(ht[0][0],ht[0][1])}}function gt(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Le=ge[Symbol.asyncIterator];return Le?Le.call(ge):(ge=function Tt(ge){var Le="function"==typeof Symbol&&Symbol.iterator,He=Le&&ge[Le],rt=0;if(He)return He.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&rt>=ge.length&&(ge=void 0),{value:ge&&ge[rt++],done:!ge}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),He={},rt("next"),rt("throw"),rt("return"),He[Symbol.asyncIterator]=function(){return this},He);function rt(ht){He[ht]=ge[ht]&&function(jt){return new Promise(function(Jt,Nn){!function mt(ht,jt,Jt,Nn){Promise.resolve(Nn).then(function(pn){ht({value:pn,done:Jt})},jt)}(Jt,Nn,(jt=ge[ht](jt)).done,jt.value)})}}}U.d(it,{FC:()=>et,KL:()=>gt,_T:()=>fe,mG:()=>Re,qq:()=>_e}),"function"==typeof SuppressedError&&SuppressedError}},nn=>{nn(nn.s=2281)}]);